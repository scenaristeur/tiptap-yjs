(self["webpackChunknoosphere3"]=self["webpackChunknoosphere3"]||[]).push([[998],{9662:function(t,e,n){"use strict";var r=n(614),i=n(6330),o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not a function")}},6077:function(t,e,n){"use strict";var r=n(614),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw o("Can't set "+i(t)+" as a prototype")}},5787:function(t,e,n){"use strict";var r=n(7976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},9670:function(t,e,n){"use strict";var r=n(111),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not an object")}},3013:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,s=n(3013),a=n(9781),l=n(7854),c=n(614),u=n(111),h=n(2597),d=n(648),f=n(6330),p=n(8880),m=n(8052),g=n(7045),y=n(7976),v=n(9518),w=n(7674),b=n(5112),_=n(9711),S=n(9909),E=S.enforce,A=S.get,x=l.Int8Array,C=x&&x.prototype,T=l.Uint8ClampedArray,M=T&&T.prototype,I=x&&v(x),k=C&&v(C),O=Object.prototype,R=l.TypeError,D=b("toStringTag"),N=_("TYPED_ARRAY_TAG"),P="TypedArrayConstructor",L=s&&!!w&&"Opera"!==d(l.opera),B=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},z=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(U,e)||h(F,e)},V=function(t){var e=v(t);if(u(e)){var n=A(e);return n&&h(n,P)?n[P]:V(e)}},H=function(t){if(!u(t))return!1;var e=d(t);return h(U,e)||h(F,e)},j=function(t){if(H(t))return t;throw R("Target is not a typed array")},W=function(t){if(c(t)&&(!w||y(I,t)))return t;throw R(f(t)+" is not a typed array constructor")},G=function(t,e,n,r){if(a){if(n)for(var i in U){var o=l[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}k[t]&&!n||m(k,t,n?e:L&&C[t]||e,r)}},$=function(t,e,n){var r,i;if(a){if(w){if(n)for(r in U)if(i=l[r],i&&h(i,t))try{delete i[t]}catch(o){}if(I[t]&&!n)return;try{return m(I,t,n?e:L&&I[t]||e)}catch(o){}}for(r in U)i=l[r],!i||i[t]&&!n||m(i,t,e)}};for(r in U)i=l[r],o=i&&i.prototype,o?E(o)[P]=i:L=!1;for(r in F)i=l[r],o=i&&i.prototype,o&&(E(o)[P]=i);if((!L||!c(I)||I===Function.prototype)&&(I=function(){throw R("Incorrect invocation")},L))for(r in U)l[r]&&w(l[r],I);if((!L||!k||k===O)&&(k=I.prototype,L))for(r in U)l[r]&&w(l[r].prototype,k);if(L&&v(M)!==k&&w(M,k),a&&!h(k,D))for(r in B=!0,g(k,D,{configurable:!0,get:function(){return u(this)?this[N]:void 0}}),U)l[r]&&p(l[r],N,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:B&&N,aTypedArray:j,aTypedArrayConstructor:W,exportTypedArrayMethod:G,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:V,isView:z,isTypedArray:H,TypedArray:I,TypedArrayPrototype:k}},7745:function(t,e,n){"use strict";var r=n(6244);t.exports=function(t,e){var n=0,i=r(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},1318:function(t,e,n){"use strict";var r=n(5656),i=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,l=r(e),c=o(l),u=i(s,c);if(t&&n!==n){while(c>u)if(a=l[u++],a!==a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},3658:function(t,e,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){"use strict";var r=n(6244);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},1572:function(t,e,n){"use strict";var r=n(6244),i=n(9303),o=RangeError;t.exports=function(t,e,n,s){var a=r(t),l=i(n),c=l<0?a+l:l;if(c>=a||c<0)throw o("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===c?s:t[h];return u}},4326:function(t,e,n){"use strict";var r=n(1702),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},648:function(t,e,n){"use strict";var r=n(1694),i=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),l=Object,c="Arguments"===o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=l(t),a))?n:c?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},9920:function(t,e,n){"use strict";var r=n(2597),i=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=i(e),l=s.f,c=o.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||l(t,h,c(e,h))}}},8544:function(t,e,n){"use strict";var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){"use strict";var r=n(9781),i=n(3070),o=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){"use strict";var r=n(6339),i=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},8052:function(t,e,n){"use strict";var r=n(614),i=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(r(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){"use strict";var r=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},5117:function(t,e,n){"use strict";var r=n(6330),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+r(e)+" of "+r(t))}},9781:function(t,e,n){"use strict";var r=n(7293);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){"use strict";var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){"use strict";var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){"use strict";var r,i,o=n(7854),s=n(8113),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},748:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){"use strict";var r=n(1702),i=Error,o=r("".replace),s=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},2109:function(t,e,n){"use strict";var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),l=n(9920),c=n(4705);t.exports=function(t,e){var n,u,h,d,f,p,m=t.target,g=t.global,y=t.stat;if(u=g?r:y?r[m]||a(m,{}):(r[m]||{}).prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(u,h),d=p&&p.value):d=u[h],n=c(g?h:m+(y?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;l(f,d)}(t.sham||d&&d.sham)&&o(f,"sham",!0),s(u,h,f,t)}}},7293:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,n){"use strict";var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){"use strict";var r=n(4374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){"use strict";var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},5668:function(t,e,n){"use strict";var r=n(1702),i=n(9662);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},1702:function(t,e,n){"use strict";var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,n){"use strict";var r=n(7854),i=n(614),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){"use strict";var r=n(9662),i=n(8554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},7854:function(t,e,n){"use strict";var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){"use strict";var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},3501:function(t){"use strict";t.exports={}},4664:function(t,e,n){"use strict";var r=n(9781),i=n(7293),o=n(317);t.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){"use strict";var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},9587:function(t,e,n){"use strict";var r=n(614),i=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:function(t,e,n){"use strict";var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},9909:function(t,e,n){"use strict";var r,i,o,s=n(4811),a=n(7854),l=n(111),c=n(8880),u=n(2597),h=n(5465),d=n(6200),f=n(3501),p="Object already initialized",m=a.TypeError,g=a.WeakMap,y=function(t){return o(t)?i(t):r(t,{})},v=function(t){return function(e){var n;if(!l(e)||(n=i(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(s||h.state){var w=h.state||(h.state=new g);w.get=w.get,w.has=w.has,w.set=w.set,r=function(t,e){if(w.has(t))throw m(p);return e.facade=t,w.set(t,e),e},i=function(t){return w.get(t)||{}},o=function(t){return w.has(t)}}else{var b=d("state");f[b]=!0,r=function(t,e){if(u(t,b))throw m(p);return e.facade=t,c(t,b,e),e},i=function(t){return u(t,b)?t[b]:{}},o=function(t){return u(t,b)}}t.exports={set:r,get:i,has:o,enforce:y,getterFor:v}},3157:function(t,e,n){"use strict";var r=n(4326);t.exports=Array.isArray||function(t){return"Array"===r(t)}},4067:function(t,e,n){"use strict";var r=n(648);t.exports=function(t){var e=r(t);return"BigInt64Array"===e||"BigUint64Array"===e}},614:function(t,e,n){"use strict";var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4705:function(t,e,n){"use strict";var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===u||n!==c&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},8554:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){"use strict";var r=n(614),i=n(4154),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===o}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){"use strict";t.exports=!1},2190:function(t,e,n){"use strict";var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},6244:function(t,e,n){"use strict";var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){"use strict";var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),l=n(6530).CONFIGURABLE,c=n(2788),u=n(9909),h=u.enforce,d=u.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),y=r([].join),v=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),w=String(String).split("String"),b=t.exports=function(t,e,n){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return s(r,"source")||(r.source=y(w,"string"==typeof e?e:"")),t};Function.prototype.toString=b((function(){return o(this)&&d(this).source||c(this)}),"toString")},4758:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},6277:function(t,e,n){"use strict";var r=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},3070:function(t,e,n){"use strict";var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return c(t,e,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){"use strict";var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),l=n(4948),c=n(2597),u=n(4664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=l(e),u)try{return h(t,e)}catch(n){}if(c(t,e))return s(!i(o.f,t,e),t[e])}},8006:function(t,e,n){"use strict";var r=n(6324),i=n(748),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){"use strict";var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),l=s("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(r(e,l))return e[l];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof c?u:null}},7976:function(t,e,n){"use strict";var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){"use strict";var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),l=r([].push);t.exports=function(t,e){var n,r=o(t),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);while(e.length>c)i(r,n=e[c++])&&(~s(u,n)||l(u,n));return u}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){"use strict";var r=n(5668),i=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},2140:function(t,e,n){"use strict";var r=n(6916),i=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){"use strict";var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),l=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},4488:function(t,e,n){"use strict";var r=n(8554),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},6200:function(t,e,n){"use strict";var r=n(2309),i=n(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){"use strict";var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},2309:function(t,e,n){"use strict";var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.32.2",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){"use strict";var r=n(7392),i=n(7293),o=n(7854),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(t,e,n){"use strict";var r=n(9303),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},4599:function(t,e,n){"use strict";var r=n(7593),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){"use strict";var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9303:function(t,e,n){"use strict";var r=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},7466:function(t,e,n){"use strict";var r=n(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){"use strict";var r=n(4488),i=Object;t.exports=function(t){return i(r(t))}},7593:function(t,e,n){"use strict";var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),l=n(5112),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,l=s(t,u);if(l){if(void 0===e&&(e="default"),n=r(l,t,e),!i(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){"use strict";var r=n(7593),i=n(2190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){"use strict";var r=n(5112),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},1340:function(t,e,n){"use strict";var r=n(648),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){"use strict";var r=n(1702),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3307:function(t,e,n){"use strict";var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){"use strict";var r=n(9781),i=n(7293);t.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,n){"use strict";var r=n(7854),i=n(614),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},5112:function(t,e,n){"use strict";var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),l=n(3307),c=r.Symbol,u=i("wks"),h=l?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(c,t)?c[t]:h("Symbol."+t)),u[t]}},7658:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(7207),l=n(7293),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=c||!u();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var l=0;l<r;l++)e[n]=arguments[l],n++;return s(e,n),n}})},541:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(5117),l=n(7207),c=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},h=c||!u();r({target:"Array",proto:!0,arity:1,forced:h},{unshift:function(t){var e=i(this),n=o(e),r=arguments.length;if(r){l(n+r);var c=n;while(c--){var u=c+r;c in e?e[u]=e[c]:a(e,u)}for(var h=0;h<r;h++)e[h]=arguments[h]}return s(e,n+r)}})},1439:function(t,e,n){"use strict";var r=n(1843),i=n(260),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},7585:function(t,e,n){"use strict";var r=n(260),i=n(1702),o=n(9662),s=n(7745),a=r.aTypedArray,l=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(l(e),e);return u(n,t)}))},5315:function(t,e,n){"use strict";var r=n(1572),i=n(260),o=n(4067),s=n(9303),a=n(4599),l=i.aTypedArray,c=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=l(this),i=s(t),u=o(n)?a(e):+e;return r(n,c(n),i,u)}}["with"],!h)},3767:function(t,e,n){"use strict";n(1439)},8585:function(t,e,n){"use strict";n(7585)},8696:function(t,e,n){"use strict";n(5315)},2801:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),s=n(9114),a=n(3070).f,l=n(2597),c=n(5787),u=n(9587),h=n(6277),d=n(3678),f=n(1060),p=n(9781),m=n(1913),g="DOMException",y=o("Error"),v=o(g),w=function(){c(this,b);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new v(e,n),i=y(e);return i.name=g,a(r,"stack",s(1,f(i.stack,1))),u(r,this,w),r},b=w.prototype=v.prototype,_="stack"in y(g),S="stack"in new v(1,2),E=v&&p&&Object.getOwnPropertyDescriptor(i,g),A=!!E&&!(E.writable&&E.configurable),x=_&&!A&&!S;r({global:!0,constructor:!0,forced:m||x},{DOMException:x?w:v});var C=o(g),T=C.prototype;if(T.constructor!==C)for(var M in m||a(T,"constructor",s(1,C)),d)if(l(d,M)){var I=d[M],k=I.s;l(C,k)||a(C,k,s(6,I.c))}},368:function(){},6742:function(){},1958:function(){},5110:function(){},5713:function(t,e,n){"use strict";n(3767),n(8585),n(8696),n(7658);const r=-8,i=-4,o=0,s=1,a=1,l=2,c=5,u=1024,h=2048,d=8192,f=0,p=4,m=8,g=12,y=12,v=16,w="undefined"!==typeof BigUint64Array,b=Symbol(),_=1024;function S(t,e){const n=new Uint32Array(t),r=new Uint16Array(t);var o=n[e+i>>>2]>>>1,s=e>>>1;if(o<=_)return String.fromCharCode.apply(String,r.subarray(s,s+o));const a=[];do{const t=r[s+_-1],e=t>=55296&&t<56320?_-1:_;a.push(String.fromCharCode.apply(String,r.subarray(s,s+=e))),o-=e}while(o>_);return a.join("")+String.fromCharCode.apply(String,r.subarray(s,s+o))}function E(t){const e={};function n(t,e){return t?S(t.buffer,e):"<yet unknown>"}const r=t.env=t.env||{};return r.abort=r.abort||function(t,i,o,s){const a=e.memory||r.memory;throw Error("abort: "+n(a,t)+" at "+n(a,i)+":"+o+":"+s)},r.trace=r.trace||function(t,i){const o=e.memory||r.memory;console.log("trace: "+n(o,t)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function A(t,e){const n=e.exports,b=n.memory,_=n.table,E=n["__alloc"],A=n["__retain"],x=n["__rtti_base"]||-1;function C(t){const e=new Uint32Array(b.buffer),n=e[x>>>2];if((t>>>=0)>=n)throw Error("invalid id: "+t);return e[(x+4>>>2)+2*t]}function T(t){const e=new Uint32Array(b.buffer),n=e[x>>>2];if((t>>>=0)>=n)throw Error("invalid id: "+t);return e[(x+4>>>2)+2*t+1]}function M(t){return 31-Math.clz32(t>>>c&31)}function k(t){const e=t.length,n=E(e<<1,s),r=new Uint16Array(b.buffer);for(var i=0,o=n>>>1;i<e;++i)r[o+i]=t.charCodeAt(i);return n}function O(t){const e=b.buffer,n=new Uint32Array(e)[t+r>>>2];if(n!==s)throw Error("not a string: "+t);return S(e,t)}function R(t,e,n){const r=b.buffer;if(n)switch(t){case 2:return new Float32Array(r);case 3:return new Float64Array(r)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(r);case 1:return new(e?Int16Array:Uint16Array)(r);case 2:return new(e?Int32Array:Uint32Array)(r);case 3:return new(e?BigInt64Array:BigUint64Array)(r)}throw Error("unsupported align: "+t)}function D(t,e){const n=C(t);if(!(n&(a|l)))throw Error("not an array: "+t+" @ "+n);const r=M(n),i=e.length,s=E(i<<r,o),c=E(n&l?v:g,t),w=new Uint32Array(b.buffer);w[c+f>>>2]=A(s),w[c+p>>>2]=s,w[c+m>>>2]=i<<r,n&l&&(w[c+y>>>2]=i);const _=R(r,n&u,n&h);if(n&d)for(let o=0;o<i;++o)_[(s>>>r)+o]=A(e[o]);else _.set(e,s>>>r);return c}function N(t){const e=new Uint32Array(b.buffer),n=e[t+r>>>2],o=C(n);if(!(o&a))throw Error("not an array: "+n);const s=M(o);var c=e[t+p>>>2];const d=o&l?e[t+y>>>2]:e[c+i>>>2]>>>s;return R(s,o&u,o&h).subarray(c>>>=s,c+d)}function P(t){const e=N(t),n=e.length,r=new Array(n);for(let i=0;i<n;i++)r[i]=e[i];return r}function L(t){const e=b.buffer,n=new Uint32Array(e)[t+i>>>2];return e.slice(t,t+n)}function B(t,e,n){return new t(U(t,e,n))}function U(t,e,n){const r=b.buffer,o=new Uint32Array(r),s=o[n+p>>>2];return new t(r,s,o[s+i>>>2]>>>e)}function F(t,e){const n=new Uint32Array(b.buffer);var i=n[t+r>>>2];if(i<=n[x>>>2])do{if(i==e)return!0}while(i=T(i));return!1}return t.__allocString=k,t.__getString=O,t.__allocArray=D,t.__getArrayView=N,t.__getArray=P,t.__getArrayBuffer=L,t.__getInt8Array=B.bind(null,Int8Array,0),t.__getInt8ArrayView=U.bind(null,Int8Array,0),t.__getUint8Array=B.bind(null,Uint8Array,0),t.__getUint8ArrayView=U.bind(null,Uint8Array,0),t.__getUint8ClampedArray=B.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=U.bind(null,Uint8ClampedArray,0),t.__getInt16Array=B.bind(null,Int16Array,1),t.__getInt16ArrayView=U.bind(null,Int16Array,1),t.__getUint16Array=B.bind(null,Uint16Array,1),t.__getUint16ArrayView=U.bind(null,Uint16Array,1),t.__getInt32Array=B.bind(null,Int32Array,2),t.__getInt32ArrayView=U.bind(null,Int32Array,2),t.__getUint32Array=B.bind(null,Uint32Array,2),t.__getUint32ArrayView=U.bind(null,Uint32Array,2),w&&(t.__getInt64Array=B.bind(null,BigInt64Array,3),t.__getInt64ArrayView=U.bind(null,BigInt64Array,3),t.__getUint64Array=B.bind(null,BigUint64Array,3),t.__getUint64ArrayView=U.bind(null,BigUint64Array,3)),t.__getFloat32Array=B.bind(null,Float32Array,2),t.__getFloat32ArrayView=U.bind(null,Float32Array,2),t.__getFloat64Array=B.bind(null,Float64Array,3),t.__getFloat64ArrayView=U.bind(null,Float64Array,3),t.__instanceof=F,t.memory=t.memory||b,t.table=t.table||_,I(n,t)}function x(t){return"undefined"!==typeof Response&&t instanceof Response}async function C(t,e){return x(t=await t)?M(t,e):A(E(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}function T(t,e){return A(E(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}async function M(t,e){return WebAssembly.instantiateStreaming?A(E(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):C(x(t=await t)?t.arrayBuffer():t,e)}function I(t,e){var n=e?Object.create(e):{},r=t["__argumentsLength"]?function(e){t["__argumentsLength"].value=e}:t["__setArgumentsLength"]||t["__setargc"]||function(){};for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i))continue;const e=t[i];let o=i.split("."),s=n;while(o.length>1){let t=o.shift();Object.prototype.hasOwnProperty.call(s,t)||(s[t]={}),s=s[t]}let a=o[0],l=a.indexOf("#");if(l>=0){let n=a.substring(0,l),o=s[n];if("undefined"===typeof o||!o.prototype){let t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf:function(){return this[b]}},t.wrap=function(e){return Object.create(t.prototype,{[b]:{value:e,writable:!1}})},o&&Object.getOwnPropertyNames(o).forEach((e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e)))),s[n]=t}if(a=a.substring(l+1),s=s[n].prototype,/^(get|set):/.test(a)){if(!Object.prototype.hasOwnProperty.call(s,a=a.substring(4))){let e=t[i.replace("set:","get:")],n=t[i.replace("get:","set:")];Object.defineProperty(s,a,{get:function(){return e(this[b])},set:function(t){n(this[b],t)},enumerable:!0})}}else"constructor"===a?(s[a]=(...t)=>(r(t.length),e(...t))).original=e:(s[a]=function(...t){return r(t.length),e(this[b],...t)}).original=e}else/^(get|set):/.test(a)?Object.prototype.hasOwnProperty.call(s,a=a.substring(4))||Object.defineProperty(s,a,{get:t[i.replace("set:","get:")],set:t[i.replace("get:","set:")],enumerable:!0}):"function"===typeof e&&e!==r?(s[a]=(...t)=>(r(t.length),e(...t))).original=e:s[a]=e}return n}e.instantiate=C,e.instantiateSync=T,e.instantiateStreaming=M,e.demangle=I},7997:function(t,e,n){"use strict";n.d(e,{fi:function(){return T},kZ:function(){return C}});n(7658);var r=n(1640),i=n(790),o=n(7018),s=n(9496);function a(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function l(t){return t!==(0,o.Z)(t)&&(0,s.Re)(t)?a(t):(0,i.Z)(t)}var c=n(2323),u=n(4988),h=n(8657),d=n(2341),f=n(8865);function p(t){var e=t.getBoundingClientRect(),n=(0,f.NM)(e.width)/t.offsetWidth||1,r=(0,f.NM)(e.height)/t.offsetHeight||1;return 1!==n||1!==r}function m(t,e,n){void 0===n&&(n=!1);var i=(0,s.Re)(e),o=(0,s.Re)(e)&&p(e),a=(0,h.Z)(e),f=(0,r.Z)(t,o,n),m={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(i||!i&&!n)&&(("body"!==(0,c.Z)(e)||(0,d.Z)(a))&&(m=l(e)),(0,s.Re)(e)?(g=(0,r.Z)(e,!0),g.x+=e.clientLeft,g.y+=e.clientTop):a&&(g.x=(0,u.Z)(a))),{x:f.left+m.scrollLeft-g.x,y:f.top+m.scrollTop-g.y,width:f.width,height:f.height}}var g=n(1936),y=n(3349),v=n(8443),w=n(7155);function b(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name);var o=[].concat(t.requires||[],t.requiresIfExists||[]);o.forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function _(t){var e=b(t);return w.xs.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function S(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function E(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var A={placement:"bottom",modifiers:[],strategy:"absolute"};function x(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function C(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?A:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},A,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],l=!1,c={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;h(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:(0,s.kK)(t)?(0,y.Z)(t):t.contextElement?(0,y.Z)(t.contextElement):[],popper:(0,y.Z)(e)};var l=_(E([].concat(r,i.options.modifiers)));return i.orderedModifiers=l.filter((function(t){return t.enabled})),u(),c.update()},forceUpdate:function(){if(!l){var t=i.elements,e=t.reference,n=t.popper;if(x(e,n)){i.rects={reference:m(e,(0,v.Z)(n),"fixed"===i.options.strategy),popper:(0,g.Z)(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,u=void 0===a?{}:a,h=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:h,instance:c})||i)}else i.reset=!1,r=-1}}},update:S((function(){return new Promise((function(t){c.forceUpdate(),t(i)}))})),destroy:function(){h(),l=!0}};if(!x(t,e))return c;function u(){i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:c,options:r}),l=function(){};a.push(s||l)}}))}function h(){a.forEach((function(t){return t()})),a=[]}return c.setOptions(n).then((function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var T=C()},9732:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9496);function i(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&(0,r.Zq)(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},1640:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(9496),i=n(8865),o=n(7018),s=n(3176);function a(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var a=t.getBoundingClientRect(),l=1,c=1;e&&(0,r.Re)(t)&&(l=t.offsetWidth>0&&(0,i.NM)(a.width)/t.offsetWidth||1,c=t.offsetHeight>0&&(0,i.NM)(a.height)/t.offsetHeight||1);var u=(0,r.kK)(t)?(0,o.Z)(t):window,h=u.visualViewport,d=!(0,s.Z)()&&n,f=(a.left+(d&&h?h.offsetLeft:0))/l,p=(a.top+(d&&h?h.offsetTop:0))/c,m=a.width/l,g=a.height/c;return{width:m,height:g,top:p,right:f+m,bottom:p+g,left:f,x:f,y:p}}},5473:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7018);function i(t){return(0,r.Z)(t).getComputedStyle(t)}},8657:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9496);function i(t){return(((0,r.kK)(t)?t.ownerDocument:t.document)||window.document).documentElement}},1936:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1640);function i(t){var e=(0,r.Z)(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}},2323:function(t,e,n){"use strict";function r(t){return t?(t.nodeName||"").toLowerCase():null}n.d(e,{Z:function(){return r}})},8443:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(7018),i=n(2323),o=n(5473),s=n(9496);function a(t){return["table","td","th"].indexOf((0,i.Z)(t))>=0}var l=n(5761),c=n(3486);function u(t){return(0,s.Re)(t)&&"fixed"!==(0,o.Z)(t).position?t.offsetParent:null}function h(t){var e=/firefox/i.test((0,c.Z)()),n=/Trident/i.test((0,c.Z)());if(n&&(0,s.Re)(t)){var r=(0,o.Z)(t);if("fixed"===r.position)return null}var a=(0,l.Z)(t);(0,s.Zq)(a)&&(a=a.host);while((0,s.Re)(a)&&["html","body"].indexOf((0,i.Z)(a))<0){var u=(0,o.Z)(a);if("none"!==u.transform||"none"!==u.perspective||"paint"===u.contain||-1!==["transform","perspective"].indexOf(u.willChange)||e&&"filter"===u.willChange||e&&u.filter&&"none"!==u.filter)return a;a=a.parentNode}return null}function d(t){var e=(0,r.Z)(t),n=u(t);while(n&&a(n)&&"static"===(0,o.Z)(n).position)n=u(n);return n&&("html"===(0,i.Z)(n)||"body"===(0,i.Z)(n)&&"static"===(0,o.Z)(n).position)?e:n||h(t)||e}},5761:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(2323),i=n(8657),o=n(9496);function s(t){return"html"===(0,r.Z)(t)?t:t.assignedSlot||t.parentNode||((0,o.Zq)(t)?t.host:null)||(0,i.Z)(t)}},7018:function(t,e,n){"use strict";function r(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}n.d(e,{Z:function(){return r}})},790:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7018);function i(t){var e=(0,r.Z)(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}},4988:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(1640),i=n(8657),o=n(790);function s(t){return(0,r.Z)((0,i.Z)(t)).left+(0,o.Z)(t).scrollLeft}},9496:function(t,e,n){"use strict";n.d(e,{Re:function(){return o},Zq:function(){return s},kK:function(){return i}});var r=n(7018);function i(t){var e=(0,r.Z)(t).Element;return t instanceof e||t instanceof Element}function o(t){var e=(0,r.Z)(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function s(t){if("undefined"===typeof ShadowRoot)return!1;var e=(0,r.Z)(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}},3176:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(3486);function i(){return!/^((?!chrome|android).)*safari/i.test((0,r.Z)())}},2341:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(5473);function i(t){var e=(0,r.Z)(t),n=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}},3349:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(5761),i=n(2341),o=n(2323),s=n(9496);function a(t){return["html","body","#document"].indexOf((0,o.Z)(t))>=0?t.ownerDocument.body:(0,s.Re)(t)&&(0,i.Z)(t)?t:a((0,r.Z)(t))}var l=n(7018);function c(t,e){var n;void 0===e&&(e=[]);var o=a(t),s=o===(null==(n=t.ownerDocument)?void 0:n.body),u=(0,l.Z)(o),h=s?[u].concat(u.visualViewport||[],(0,i.Z)(o)?o:[]):o,d=e.concat(h);return s?d:d.concat(c((0,r.Z)(h)))}},7155:function(t,e,n){"use strict";n.d(e,{BL:function(){return c},Ct:function(){return g},DH:function(){return _},F2:function(){return o},I:function(){return i},MS:function(){return x},N7:function(){return y},Pj:function(){return d},XM:function(){return b},YP:function(){return p},bw:function(){return m},cW:function(){return A},d7:function(){return a},ij:function(){return v},iv:function(){return E},k5:function(){return f},mv:function(){return l},r5:function(){return w},t$:function(){return s},ut:function(){return u},wX:function(){return S},we:function(){return r},xs:function(){return C},zV:function(){return h}});var r="top",i="bottom",o="right",s="left",a="auto",l=[r,i,o,s],c="start",u="end",h="clippingParents",d="viewport",f="popper",p="reference",m=l.reduce((function(t,e){return t.concat([e+"-"+c,e+"-"+u])}),[]),g=[].concat(l,[a]).reduce((function(t,e){return t.concat([e,e+"-"+c,e+"-"+u])}),[]),y="beforeRead",v="read",w="afterRead",b="beforeMain",_="main",S="afterMain",E="beforeWrite",A="write",x="afterWrite",C=[y,v,w,b,_,S,E,A,x]},3435:function(t,e,n){"use strict";var r=n(2323),i=n(9496);function o(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},o=e.attributes[t]||{},s=e.elements[t];(0,i.Re)(s)&&(0,r.Z)(s)&&(Object.assign(s.style,n),Object.keys(o).forEach((function(t){var e=o[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))}function s(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var o=e.elements[t],s=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),l=a.reduce((function(t,e){return t[e]="",t}),{});(0,i.Re)(o)&&(0,r.Z)(o)&&(Object.assign(o.style,l),Object.keys(s).forEach((function(t){o.removeAttribute(t)})))}))}}e["Z"]={name:"applyStyles",enabled:!0,phase:"write",fn:o,effect:s,requires:["computeStyles"]}},5120:function(t,e,n){"use strict";var r=n(5697),i=n(1936),o=n(9732),s=n(8443),a=n(6260),l=n(8100),c=n(5876),u=n(38),h=n(7155),d=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,(0,c.Z)("number"!==typeof t?t:(0,u.Z)(t,h.mv))};function f(t){var e,n=t.state,o=t.name,c=t.options,u=n.elements.arrow,f=n.modifiersData.popperOffsets,p=(0,r.Z)(n.placement),m=(0,a.Z)(p),g=[h.t$,h.F2].indexOf(p)>=0,y=g?"height":"width";if(u&&f){var v=d(c.padding,n),w=(0,i.Z)(u),b="y"===m?h.we:h.t$,_="y"===m?h.I:h.F2,S=n.rects.reference[y]+n.rects.reference[m]-f[m]-n.rects.popper[y],E=f[m]-n.rects.reference[m],A=(0,s.Z)(u),x=A?"y"===m?A.clientHeight||0:A.clientWidth||0:0,C=S/2-E/2,T=v[b],M=x-w[y]-v[_],I=x/2-w[y]/2+C,k=(0,l.u)(T,I,M),O=m;n.modifiersData[o]=(e={},e[O]=k,e.centerOffset=k-I,e)}}function p(t){var e=t.state,n=t.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=e.elements.popper.querySelector(i),i))&&(0,o.Z)(e.elements.popper,i)&&(e.elements.arrow=i)}e["Z"]={name:"arrow",enabled:!0,phase:"main",fn:f,effect:p,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},653:function(t,e,n){"use strict";var r=n(7155),i=n(8443),o=n(7018),s=n(8657),a=n(5473),l=n(5697),c=n(9533),u=n(8865),h={top:"auto",right:"auto",bottom:"auto",left:"auto"};function d(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:(0,u.NM)(n*i)/i||0,y:(0,u.NM)(r*i)/i||0}}function f(t){var e,n=t.popper,l=t.popperRect,c=t.placement,u=t.variation,f=t.offsets,p=t.position,m=t.gpuAcceleration,g=t.adaptive,y=t.roundOffsets,v=t.isFixed,w=f.x,b=void 0===w?0:w,_=f.y,S=void 0===_?0:_,E="function"===typeof y?y({x:b,y:S}):{x:b,y:S};b=E.x,S=E.y;var A=f.hasOwnProperty("x"),x=f.hasOwnProperty("y"),C=r.t$,T=r.we,M=window;if(g){var I=(0,i.Z)(n),k="clientHeight",O="clientWidth";if(I===(0,o.Z)(n)&&(I=(0,s.Z)(n),"static"!==(0,a.Z)(I).position&&"absolute"===p&&(k="scrollHeight",O="scrollWidth")),c===r.we||(c===r.t$||c===r.F2)&&u===r.ut){T=r.I;var R=v&&I===M&&M.visualViewport?M.visualViewport.height:I[k];S-=R-l.height,S*=m?1:-1}if(c===r.t$||(c===r.we||c===r.I)&&u===r.ut){C=r.F2;var D=v&&I===M&&M.visualViewport?M.visualViewport.width:I[O];b-=D-l.width,b*=m?1:-1}}var N,P=Object.assign({position:p},g&&h),L=!0===y?d({x:b,y:S},(0,o.Z)(n)):{x:b,y:S};return b=L.x,S=L.y,m?Object.assign({},P,(N={},N[T]=x?"0":"",N[C]=A?"0":"",N.transform=(M.devicePixelRatio||1)<=1?"translate("+b+"px, "+S+"px)":"translate3d("+b+"px, "+S+"px, 0)",N)):Object.assign({},P,(e={},e[T]=x?S+"px":"",e[C]=A?b+"px":"",e.transform="",e))}function p(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,u=void 0===a||a,h={placement:(0,l.Z)(e.placement),variation:(0,c.Z)(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,f(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,f(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}e["Z"]={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:p,data:{}}},7331:function(t,e,n){"use strict";var r=n(7018),i={passive:!0};function o(t){var e=t.state,n=t.instance,o=t.options,s=o.scroll,a=void 0===s||s,l=o.resize,c=void 0===l||l,u=(0,r.Z)(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&h.forEach((function(t){t.addEventListener("scroll",n.update,i)})),c&&u.addEventListener("resize",n.update,i),function(){a&&h.forEach((function(t){t.removeEventListener("scroll",n.update,i)})),c&&u.removeEventListener("resize",n.update,i)}}e["Z"]={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o,data:{}}},4539:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});n(7658);var r={left:"right",right:"left",bottom:"top",top:"bottom"};function i(t){return t.replace(/left|right|bottom|top/g,(function(t){return r[t]}))}var o=n(5697),s={start:"end",end:"start"};function a(t){return t.replace(/start|end/g,(function(t){return s[t]}))}var l=n(5052),c=n(9533),u=n(7155);function h(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,h=n.flipVariations,d=n.allowedAutoPlacements,f=void 0===d?u.Ct:d,p=(0,c.Z)(r),m=p?h?u.bw:u.bw.filter((function(t){return(0,c.Z)(t)===p})):u.mv,g=m.filter((function(t){return f.indexOf(t)>=0}));0===g.length&&(g=m);var y=g.reduce((function(e,n){return e[n]=(0,l.Z)(t,{placement:n,boundary:i,rootBoundary:s,padding:a})[(0,o.Z)(n)],e}),{});return Object.keys(y).sort((function(t,e){return y[t]-y[e]}))}function d(t){if((0,o.Z)(t)===u.d7)return[];var e=i(t);return[a(t),e,a(e)]}function f(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,a=void 0===s||s,f=n.altAxis,p=void 0===f||f,m=n.fallbackPlacements,g=n.padding,y=n.boundary,v=n.rootBoundary,w=n.altBoundary,b=n.flipVariations,_=void 0===b||b,S=n.allowedAutoPlacements,E=e.options.placement,A=(0,o.Z)(E),x=A===E,C=m||(x||!_?[i(E)]:d(E)),T=[E].concat(C).reduce((function(t,n){return t.concat((0,o.Z)(n)===u.d7?h(e,{placement:n,boundary:y,rootBoundary:v,padding:g,flipVariations:_,allowedAutoPlacements:S}):n)}),[]),M=e.rects.reference,I=e.rects.popper,k=new Map,O=!0,R=T[0],D=0;D<T.length;D++){var N=T[D],P=(0,o.Z)(N),L=(0,c.Z)(N)===u.BL,B=[u.we,u.I].indexOf(P)>=0,U=B?"width":"height",F=(0,l.Z)(e,{placement:N,boundary:y,rootBoundary:v,altBoundary:w,padding:g}),z=B?L?u.F2:u.t$:L?u.I:u.we;M[U]>I[U]&&(z=i(z));var V=i(z),H=[];if(a&&H.push(F[P]<=0),p&&H.push(F[z]<=0,F[V]<=0),H.every((function(t){return t}))){R=N,O=!1;break}k.set(N,H)}if(O)for(var j=_?3:1,W=function(t){var e=T.find((function(e){var n=k.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return R=e,"break"},G=j;G>0;G--){var $=W(G);if("break"===$)break}e.placement!==R&&(e.modifiersData[r]._skip=!0,e.placement=R,e.reset=!0)}}var p={name:"flip",enabled:!0,phase:"main",fn:f,requiresIfExists:["offset"],data:{_skip:!1}}},2159:function(t,e,n){"use strict";var r=n(7155),i=n(5052);function o(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function s(t){return[r.we,r.F2,r.I,r.t$].some((function(e){return t[e]>=0}))}function a(t){var e=t.state,n=t.name,r=e.rects.reference,a=e.rects.popper,l=e.modifiersData.preventOverflow,c=(0,i.Z)(e,{elementContext:"reference"}),u=(0,i.Z)(e,{altBoundary:!0}),h=o(c,r),d=o(u,a,l),f=s(h),p=s(d);e.modifiersData[n]={referenceClippingOffsets:h,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":p})}e["Z"]={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:a}},4e3:function(t,e,n){"use strict";var r=n(5697),i=n(7155);function o(t,e,n){var o=(0,r.Z)(t),s=[i.t$,i.we].indexOf(o)>=0?-1:1,a="function"===typeof n?n(Object.assign({},e,{placement:t})):n,l=a[0],c=a[1];return l=l||0,c=(c||0)*s,[i.t$,i.F2].indexOf(o)>=0?{x:c,y:l}:{x:l,y:c}}function s(t){var e=t.state,n=t.options,r=t.name,s=n.offset,a=void 0===s?[0,0]:s,l=i.Ct.reduce((function(t,n){return t[n]=o(n,e.rects,a),t}),{}),c=l[e.placement],u=c.x,h=c.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=l}e["Z"]={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:s}},81:function(t,e,n){"use strict";var r=n(6358);function i(t){var e=t.state,n=t.name;e.modifiersData[n]=(0,r.Z)({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}e["Z"]={name:"popperOffsets",enabled:!0,phase:"read",fn:i,data:{}}},2674:function(t,e,n){"use strict";n.d(e,{Z:function(){return m}});var r=n(7155),i=n(5697),o=n(6260);function s(t){return"x"===t?"y":"x"}var a=n(8100),l=n(1936),c=n(8443),u=n(5052),h=n(9533),d=n(852),f=n(8865);function p(t){var e=t.state,n=t.options,p=t.name,m=n.mainAxis,g=void 0===m||m,y=n.altAxis,v=void 0!==y&&y,w=n.boundary,b=n.rootBoundary,_=n.altBoundary,S=n.padding,E=n.tether,A=void 0===E||E,x=n.tetherOffset,C=void 0===x?0:x,T=(0,u.Z)(e,{boundary:w,rootBoundary:b,padding:S,altBoundary:_}),M=(0,i.Z)(e.placement),I=(0,h.Z)(e.placement),k=!I,O=(0,o.Z)(M),R=s(O),D=e.modifiersData.popperOffsets,N=e.rects.reference,P=e.rects.popper,L="function"===typeof C?C(Object.assign({},e.rects,{placement:e.placement})):C,B="number"===typeof L?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,F={x:0,y:0};if(D){if(g){var z,V="y"===O?r.we:r.t$,H="y"===O?r.I:r.F2,j="y"===O?"height":"width",W=D[O],G=W+T[V],$=W-T[H],q=A?-P[j]/2:0,Y=I===r.BL?N[j]:P[j],X=I===r.BL?-P[j]:-N[j],Z=e.elements.arrow,K=A&&Z?(0,l.Z)(Z):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:(0,d.Z)(),Q=J[V],tt=J[H],et=(0,a.u)(0,N[j],K[j]),nt=k?N[j]/2-q-et-Q-B.mainAxis:Y-et-Q-B.mainAxis,rt=k?-N[j]/2+q+et+tt+B.mainAxis:X+et+tt+B.mainAxis,it=e.elements.arrow&&(0,c.Z)(e.elements.arrow),ot=it?"y"===O?it.clientTop||0:it.clientLeft||0:0,st=null!=(z=null==U?void 0:U[O])?z:0,at=W+nt-st-ot,lt=W+rt-st,ct=(0,a.u)(A?(0,f.VV)(G,at):G,W,A?(0,f.Fp)($,lt):$);D[O]=ct,F[O]=ct-W}if(v){var ut,ht="x"===O?r.we:r.t$,dt="x"===O?r.I:r.F2,ft=D[R],pt="y"===R?"height":"width",mt=ft+T[ht],gt=ft-T[dt],yt=-1!==[r.we,r.t$].indexOf(M),vt=null!=(ut=null==U?void 0:U[R])?ut:0,wt=yt?mt:ft-N[pt]-P[pt]-vt+B.altAxis,bt=yt?ft+N[pt]+P[pt]-vt-B.altAxis:gt,_t=A&&yt?(0,a.q)(wt,ft,bt):(0,a.u)(A?wt:mt,ft,A?bt:gt);D[R]=_t,F[R]=_t-ft}e.modifiersData[p]=F}}var m={name:"preventOverflow",enabled:!0,phase:"main",fn:p,requiresIfExists:["offset"]}},8519:function(t,e,n){"use strict";n.d(e,{fi:function(){return p}});var r=n(7997),i=n(7331),o=n(81),s=n(653),a=n(3435),l=n(4e3),c=n(4539),u=n(2674),h=n(5120),d=n(2159),f=[i.Z,o.Z,s.Z,a.Z,l.Z,c.Z,u.Z,h.Z,d.Z],p=(0,r.kZ)({defaultModifiers:f})},6358:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(5697),i=n(9533),o=n(6260),s=n(7155);function a(t){var e,n=t.reference,a=t.element,l=t.placement,c=l?(0,r.Z)(l):null,u=l?(0,i.Z)(l):null,h=n.x+n.width/2-a.width/2,d=n.y+n.height/2-a.height/2;switch(c){case s.we:e={x:h,y:n.y-a.height};break;case s.I:e={x:h,y:n.y+n.height};break;case s.F2:e={x:n.x+n.width,y:d};break;case s.t$:e={x:n.x-a.width,y:d};break;default:e={x:n.x,y:n.y}}var f=c?(0,o.Z)(c):null;if(null!=f){var p="y"===f?"height":"width";switch(u){case s.BL:e[f]=e[f]-(n[p]/2-a[p]/2);break;case s.ut:e[f]=e[f]+(n[p]/2-a[p]/2);break;default:}}return e}},5052:function(t,e,n){"use strict";n.d(e,{Z:function(){return M}});var r=n(7155),i=n(7018),o=n(8657),s=n(4988),a=n(3176);function l(t,e){var n=(0,i.Z)(t),r=(0,o.Z)(t),l=n.visualViewport,c=r.clientWidth,u=r.clientHeight,h=0,d=0;if(l){c=l.width,u=l.height;var f=(0,a.Z)();(f||!f&&"fixed"===e)&&(h=l.offsetLeft,d=l.offsetTop)}return{width:c,height:u,x:h+(0,s.Z)(t),y:d}}var c=n(5473),u=n(790),h=n(8865);function d(t){var e,n=(0,o.Z)(t),r=(0,u.Z)(t),i=null==(e=t.ownerDocument)?void 0:e.body,a=(0,h.Fp)(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=(0,h.Fp)(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),d=-r.scrollLeft+(0,s.Z)(t),f=-r.scrollTop;return"rtl"===(0,c.Z)(i||n).direction&&(d+=(0,h.Fp)(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:l,x:d,y:f}}var f=n(3349),p=n(8443),m=n(9496),g=n(1640),y=n(5761),v=n(9732),w=n(2323);function b(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _(t,e){var n=(0,g.Z)(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function S(t,e,n){return e===r.Pj?b(l(t,n)):(0,m.kK)(e)?_(e,n):b(d((0,o.Z)(t)))}function E(t){var e=(0,f.Z)((0,y.Z)(t)),n=["absolute","fixed"].indexOf((0,c.Z)(t).position)>=0,r=n&&(0,m.Re)(t)?(0,p.Z)(t):t;return(0,m.kK)(r)?e.filter((function(t){return(0,m.kK)(t)&&(0,v.Z)(t,r)&&"body"!==(0,w.Z)(t)})):[]}function A(t,e,n,r){var i="clippingParents"===e?E(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(e,n){var i=S(t,n,r);return e.top=(0,h.Fp)(i.top,e.top),e.right=(0,h.VV)(i.right,e.right),e.bottom=(0,h.VV)(i.bottom,e.bottom),e.left=(0,h.Fp)(i.left,e.left),e}),S(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var x=n(6358),C=n(5876),T=n(38);function M(t,e){void 0===e&&(e={});var n=e,i=n.placement,s=void 0===i?t.placement:i,a=n.strategy,l=void 0===a?t.strategy:a,c=n.boundary,u=void 0===c?r.zV:c,h=n.rootBoundary,d=void 0===h?r.Pj:h,f=n.elementContext,p=void 0===f?r.k5:f,y=n.altBoundary,v=void 0!==y&&y,w=n.padding,_=void 0===w?0:w,S=(0,C.Z)("number"!==typeof _?_:(0,T.Z)(_,r.mv)),E=p===r.k5?r.YP:r.k5,M=t.rects.popper,I=t.elements[v?E:p],k=A((0,m.kK)(I)?I:I.contextElement||(0,o.Z)(t.elements.popper),u,d,l),O=(0,g.Z)(t.elements.reference),R=(0,x.Z)({reference:O,element:M,strategy:"absolute",placement:s}),D=b(Object.assign({},M,R)),N=p===r.k5?D:O,P={top:k.top-N.top+S.top,bottom:N.bottom-k.bottom+S.bottom,left:k.left-N.left+S.left,right:N.right-k.right+S.right},L=t.modifiersData.offset;if(p===r.k5&&L){var B=L[s];Object.keys(P).forEach((function(t){var e=[r.F2,r.I].indexOf(t)>=0?1:-1,n=[r.we,r.I].indexOf(t)>=0?"y":"x";P[t]+=B[n]*e}))}return P}},38:function(t,e,n){"use strict";function r(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}n.d(e,{Z:function(){return r}})},5697:function(t,e,n){"use strict";function r(t){return t.split("-")[0]}n.d(e,{Z:function(){return r}})},852:function(t,e,n){"use strict";function r(){return{top:0,right:0,bottom:0,left:0}}n.d(e,{Z:function(){return r}})},6260:function(t,e,n){"use strict";function r(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}n.d(e,{Z:function(){return r}})},9533:function(t,e,n){"use strict";function r(t){return t.split("-")[1]}n.d(e,{Z:function(){return r}})},8865:function(t,e,n){"use strict";n.d(e,{Fp:function(){return r},NM:function(){return o},VV:function(){return i}});var r=Math.max,i=Math.min,o=Math.round},5876:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(852);function i(t){return Object.assign({},(0,r.Z)(),t)}},3486:function(t,e,n){"use strict";function r(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}n.d(e,{Z:function(){return r}})},8100:function(t,e,n){"use strict";n.d(e,{q:function(){return o},u:function(){return i}});var r=n(8865);function i(t,e,n){return(0,r.Fp)(t,(0,r.VV)(e,n))}function o(t,e,n){var r=i(t,e,n);return r>n?n:r}},5186:function(t){"use strict";function e(t,e){var n=new Array(arguments.length-1),r=0,i=2,o=!0;while(i<arguments.length)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(t){if(o)if(o=!1,t)s(t);else{var e=new Array(arguments.length-1),n=0;while(n<e.length)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(a){o&&(o=!1,s(a))}}))}t.exports=e},8673:function(t,e,n){"use strict";n(7658);var r=e;r.length=function(t){var e=t.length;if(!e)return 0;var n=0;while(--e%4>1&&"="===t.charAt(e))++n;return Math.ceil(3*t.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(t,e,n){var r,o=null,s=[],a=0,l=0;while(e<n){var c=t[e++];switch(l){case 0:s[a++]=i[c>>2],r=(3&c)<<4,l=1;break;case 1:s[a++]=i[r|c>>4],r=(15&c)<<2,l=2;break;case 2:s[a++]=i[r|c>>6],s[a++]=i[63&c],l=0;break}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=i[r],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";r.decode=function(t,e,n){for(var r,i=n,s=0,l=0;l<t.length;){var c=t.charCodeAt(l++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error(a);switch(s){case 0:r=c,s=1;break;case 1:e[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:e[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:e[n++]=(3&r)<<6|c,s=0;break}}if(1===s)throw Error(a);return n-i},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},8825:function(t,e,n){"use strict";function r(){this._listeners={}}n(7658),t.exports=r,r.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},2913:function(t,e,n){"use strict";function r(t){return"undefined"!==typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function a(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:o,t.writeFloatBE=r?o:i,t.readFloatLE=r?s:a,t.readFloatBE=r?a:s}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(e)/Math.LN2),s=8388607&Math.round(e*Math.pow(2,-o)*8388608);t((i<<31|o+127<<23|s)>>>0,n,r)}}function n(t,e,n){var r=t(e,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,o),t.readFloatLE=n.bind(null,s),t.readFloatBE=n.bind(null,a)}(),"undefined"!==typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function a(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:o,t.writeDoubleBE=r?o:i,t.readDoubleLE=r?s:a,t.readDoubleBE=r?a:s}():function(){function e(t,e,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)t(0,i,o+e),t(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))t(0,i,o+e),t(2146959360,i,o+n);else if(r>17976931348623157e292)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)a=r/5e-324,t(a>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+n);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),a=r*Math.pow(2,-l),t(4503599627370496*a>>>0,i,o+e),t((s<<31|l+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(t,e,n,r,i){var o=t(r,i+e),s=t(r,i+n),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=n.bind(null,s,0,4),t.readDoubleBE=n.bind(null,a,4,0)}(),t}function i(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function o(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function s(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}n(3767),n(8585),n(8696),t.exports=r(r)},6332:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1168:function(t){"use strict";function e(t,e,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return t(n);s+n>r&&(o=t(r),s=0);var a=e.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}t.exports=e},9561:function(t,e,n){"use strict";n(7658);var r=e;r.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:55296===(64512&n)&&56320===(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},r.read=function(t,e,n){var r=n-e;if(r<1)return"";var i,o=null,s=[],a=0;while(e<n)i=t[e++],i<128?s[a++]=i:i>191&&i<224?s[a++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[a++]=55296+(i>>10),s[a++]=56320+(1023&i)):s[a++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(t,e,n){for(var r,i,o=n,s=0;s<t.length;++s)r=t.charCodeAt(s),r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(i=t.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-o}},4870:function(t,e,n){"use strict";n.d(e,{B:function(){return s},Bj:function(){return o},EB:function(){return c},Fl:function(){return te},IU:function(){return Dt},Jd:function(){return C},OT:function(){return Tt},PG:function(){return It},SU:function(){return Wt},Um:function(){return Ct},Vh:function(){return Kt},WL:function(){return $t},X$:function(){return k},X3:function(){return Rt},XI:function(){return Vt},Xl:function(){return Nt},ZM:function(){return Yt},dq:function(){return Ft},iH:function(){return zt},j:function(){return M},lk:function(){return T},nZ:function(){return l},qj:function(){return xt},qq:function(){return S},yT:function(){return Ot}});n(7658);var r=n(7139);let i;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function s(t){return new o(t)}function a(t,e=i){e&&e.active&&e.effects.push(t)}function l(){return i}function c(t){i&&i.cleanups.push(t)}const u=t=>{const e=new Set(t);return e.w=0,e.n=0,e},h=t=>(t.w&y)>0,d=t=>(t.n&y)>0,f=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=y},p=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];h(i)&&!d(i)?i.delete(t):e[n++]=i,i.w&=~y,i.n&=~y}e.length=n}},m=new WeakMap;let g=0,y=1;const v=30;let w;const b=Symbol(""),_=Symbol("");class S{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let t=w,e=A;while(t){if(t===this)return;t=t.parent}try{return this.parent=w,w=this,A=!0,y=1<<++g,g<=v?f(this):E(this),this.fn()}finally{g<=v&&p(this),y=1<<--g,w=this.parent,A=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){w===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let A=!0;const x=[];function C(){x.push(A),A=!1}function T(){const t=x.pop();A=void 0===t||t}function M(t,e,n){if(A&&w){let e=m.get(t);e||m.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=u());const i=void 0;I(r,i)}}function I(t,e){let n=!1;g<=v?d(t)||(t.n|=y,n=!h(t)):n=!t.has(w),n&&(t.add(w),w.deps.push(t))}function k(t,e,n,i,o,s){const a=m.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===n&&(0,r.kJ)(t)){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n>=t)&&l.push(e)}))}else switch(void 0!==n&&l.push(a.get(n)),e){case"add":(0,r.kJ)(t)?(0,r.S0)(n)&&l.push(a.get("length")):(l.push(a.get(b)),(0,r._N)(t)&&l.push(a.get(_)));break;case"delete":(0,r.kJ)(t)||(l.push(a.get(b)),(0,r._N)(t)&&l.push(a.get(_)));break;case"set":(0,r._N)(t)&&l.push(a.get(b));break}if(1===l.length)l[0]&&O(l[0]);else{const t=[];for(const e of l)e&&t.push(...e);O(u(t))}}function O(t,e){const n=(0,r.kJ)(t)?t:[...t];for(const r of n)r.computed&&R(r,e);for(const r of n)r.computed||R(r,e)}function R(t,e){(t!==w||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function D(t,e){var n;return null==(n=m.get(t))?void 0:n.get(e)}const N=(0,r.fY)("__proto__,__v_isRef,__isVue"),P=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.yk)),L=H(),B=H(!1,!0),U=H(!0),F=z();function z(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Dt(this);for(let e=0,i=this.length;e<i;e++)M(n,"get",e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Dt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){C();const n=Dt(this)[e].apply(this,t);return T(),n}})),t}function V(t){const e=Dt(this);return M(e,"has",t),e.hasOwnProperty(t)}function H(t=!1,e=!1){return function(n,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&o===(t?e?St:_t:e?bt:wt).get(n))return n;const s=(0,r.kJ)(n);if(!t){if(s&&(0,r.RI)(F,i))return Reflect.get(F,i,o);if("hasOwnProperty"===i)return V}const a=Reflect.get(n,i,o);return((0,r.yk)(i)?P.has(i):N(i))?a:(t||M(n,"get",i),e?a:Ft(a)?s&&(0,r.S0)(i)?a:a.value:(0,r.Kn)(a)?t?Tt(a):xt(a):a)}}const j=G(),W=G(!0);function G(t=!1){return function(e,n,i,o){let s=e[n];if(kt(s)&&Ft(s)&&!Ft(i))return!1;if(!t&&(Ot(i)||kt(i)||(s=Dt(s),i=Dt(i)),!(0,r.kJ)(e)&&Ft(s)&&!Ft(i)))return s.value=i,!0;const a=(0,r.kJ)(e)&&(0,r.S0)(n)?Number(n)<e.length:(0,r.RI)(e,n),l=Reflect.set(e,n,i,o);return e===Dt(o)&&(a?(0,r.aU)(i,s)&&k(e,"set",n,i,s):k(e,"add",n,i)),l}}function $(t,e){const n=(0,r.RI)(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&k(t,"delete",e,void 0,i),o}function q(t,e){const n=Reflect.has(t,e);return(0,r.yk)(e)&&P.has(e)||M(t,"has",e),n}function Y(t){return M(t,"iterate",(0,r.kJ)(t)?"length":b),Reflect.ownKeys(t)}const X={get:L,set:j,deleteProperty:$,has:q,ownKeys:Y},Z={get:U,set(t,e){return!0},deleteProperty(t,e){return!0}},K=(0,r.l7)({},X,{get:B,set:W}),J=t=>t,Q=t=>Reflect.getPrototypeOf(t);function tt(t,e,n=!1,r=!1){t=t["__v_raw"];const i=Dt(t),o=Dt(e);n||(e!==o&&M(i,"get",e),M(i,"get",o));const{has:s}=Q(i),a=r?J:n?Lt:Pt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function et(t,e=!1){const n=this["__v_raw"],r=Dt(n),i=Dt(t);return e||(t!==i&&M(r,"has",t),M(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function nt(t,e=!1){return t=t["__v_raw"],!e&&M(Dt(t),"iterate",b),Reflect.get(t,"size",t)}function rt(t){t=Dt(t);const e=Dt(this),n=Q(e),r=n.has.call(e,t);return r||(e.add(t),k(e,"add",t,t)),this}function it(t,e){e=Dt(e);const n=Dt(this),{has:i,get:o}=Q(n);let s=i.call(n,t);s||(t=Dt(t),s=i.call(n,t));const a=o.call(n,t);return n.set(t,e),s?(0,r.aU)(e,a)&&k(n,"set",t,e,a):k(n,"add",t,e),this}function ot(t){const e=Dt(this),{has:n,get:r}=Q(e);let i=n.call(e,t);i||(t=Dt(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&k(e,"delete",t,void 0,o),s}function st(){const t=Dt(this),e=0!==t.size,n=void 0,r=t.clear();return e&&k(t,"clear",void 0,void 0,n),r}function at(t,e){return function(n,r){const i=this,o=i["__v_raw"],s=Dt(o),a=e?J:t?Lt:Pt;return!t&&M(s,"iterate",b),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function lt(t,e,n){return function(...i){const o=this["__v_raw"],s=Dt(o),a=(0,r._N)(s),l="entries"===t||t===Symbol.iterator&&a,c="keys"===t&&a,u=o[t](...i),h=n?J:e?Lt:Pt;return!e&&M(s,"iterate",c?_:b),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function ct(t){return function(...e){return"delete"!==t&&this}}function ut(){const t={get(t){return tt(this,t)},get size(){return nt(this)},has:et,add:rt,set:it,delete:ot,clear:st,forEach:at(!1,!1)},e={get(t){return tt(this,t,!1,!0)},get size(){return nt(this)},has:et,add:rt,set:it,delete:ot,clear:st,forEach:at(!1,!0)},n={get(t){return tt(this,t,!0)},get size(){return nt(this,!0)},has(t){return et.call(this,t,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:at(!0,!1)},r={get(t){return tt(this,t,!0,!0)},get size(){return nt(this,!0)},has(t){return et.call(this,t,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:at(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=lt(i,!1,!1),n[i]=lt(i,!0,!1),e[i]=lt(i,!1,!0),r[i]=lt(i,!0,!0)})),[t,n,e,r]}const[ht,dt,ft,pt]=ut();function mt(t,e){const n=e?t?pt:ft:t?dt:ht;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.RI)(n,i)&&i in e?n:e,i,o)}const gt={get:mt(!1,!1)},yt={get:mt(!1,!0)},vt={get:mt(!0,!1)};const wt=new WeakMap,bt=new WeakMap,_t=new WeakMap,St=new WeakMap;function Et(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function At(t){return t["__v_skip"]||!Object.isExtensible(t)?0:Et((0,r.W7)(t))}function xt(t){return kt(t)?t:Mt(t,!1,X,gt,wt)}function Ct(t){return Mt(t,!1,K,yt,bt)}function Tt(t){return Mt(t,!0,Z,vt,_t)}function Mt(t,e,n,i,o){if(!(0,r.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=At(t);if(0===a)return t;const l=new Proxy(t,2===a?i:n);return o.set(t,l),l}function It(t){return kt(t)?It(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function kt(t){return!(!t||!t["__v_isReadonly"])}function Ot(t){return!(!t||!t["__v_isShallow"])}function Rt(t){return It(t)||kt(t)}function Dt(t){const e=t&&t["__v_raw"];return e?Dt(e):t}function Nt(t){return(0,r.Nj)(t,"__v_skip",!0),t}const Pt=t=>(0,r.Kn)(t)?xt(t):t,Lt=t=>(0,r.Kn)(t)?Tt(t):t;function Bt(t){A&&w&&(t=Dt(t),I(t.dep||(t.dep=u())))}function Ut(t,e){t=Dt(t);const n=t.dep;n&&O(n)}function Ft(t){return!(!t||!0!==t.__v_isRef)}function zt(t){return Ht(t,!1)}function Vt(t){return Ht(t,!0)}function Ht(t,e){return Ft(t)?t:new jt(t,e)}class jt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Dt(t),this._value=e?t:Pt(t)}get value(){return Bt(this),this._value}set value(t){const e=this.__v_isShallow||Ot(t)||kt(t);t=e?t:Dt(t),(0,r.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Pt(t),Ut(this,t))}}function Wt(t){return Ft(t)?t.value:t}const Gt={get:(t,e,n)=>Wt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Ft(i)&&!Ft(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function $t(t){return It(t)?t:new Proxy(t,Gt)}class qt{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:n}=t((()=>Bt(this)),(()=>Ut(this)));this._get=e,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function Yt(t){return new qt(t)}class Xt{constructor(t,e,n){this._object=t,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return void 0===t?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return D(Dt(this._object),this._key)}}class Zt{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Kt(t,e,n){return Ft(t)?t:(0,r.mf)(t)?new Zt(t):(0,r.Kn)(t)&&arguments.length>1?Jt(t,e,n):zt(t)}function Jt(t,e,n){const r=t[e];return Ft(r)?r:new Xt(t,e,n)}class Qt{constructor(t,e,n,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new S(t,(()=>{this._dirty||(this._dirty=!0,Ut(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const t=Dt(this);return Bt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function te(t,e,n=!1){let i,o;const s=(0,r.mf)(t);s?(i=t,o=r.dG):(i=t.get,o=t.set);const a=new Qt(i,o,s||!o,n);return a}},3396:function(t,e,n){"use strict";n.d(e,{$d:function(){return s},Ah:function(){return Tt},F4:function(){return vn},FN:function(){return On},Fl:function(){return Zn},HY:function(){return Ze},JJ:function(){return me},Jd:function(){return Ct},Ko:function(){return Ut},LL:function(){return Pt},Nv:function(){return Ft},P$:function(){return rt},Q6:function(){return ct},Rr:function(){return $t},U2:function(){return ot},Uk:function(){return bn},Us:function(){return Le},WI:function(){return zt},Wm:function(){return gn},Y3:function(){return v},Y8:function(){return Q},YP:function(){return $},_:function(){return mn},aZ:function(){return ut},bv:function(){return Et},dG:function(){return xn},dl:function(){return pt},f3:function(){return ge},h:function(){return Kn},iD:function(){return ln},ic:function(){return xt},j4:function(){return cn},kq:function(){return _n},l1:function(){return qt},lR:function(){return Ye},m0:function(){return W},nJ:function(){return et},nK:function(){return lt},se:function(){return mt},sv:function(){return Je},up:function(){return Dt},w5:function(){return P},wg:function(){return nn},wy:function(){return K}});n(7658),n(541);var r=n(4870),i=n(7139);function o(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){a(o,e,n)}return i}function s(t,e,n,r){if((0,i.mf)(t)){const s=o(t,e,n,r);return s&&(0,i.tI)(s)&&s.catch((t=>{a(t,e,n)})),s}const l=[];for(let i=0;i<t.length;i++)l.push(s(t[i],e,n,r));return l}function a(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,s=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,s))return;r=r.parent}const a=e.appContext.config.errorHandler;if(a)return void o(a,null,10,[t,i,s])}l(t,n,i,r)}function l(t,e,n,r=!0){console.error(t)}let c=!1,u=!1;const h=[];let d=0;const f=[];let p=null,m=0;const g=Promise.resolve();let y=null;function v(t){const e=y||g;return t?e.then(this?t.bind(this):t):e}function w(t){let e=d+1,n=h.length;while(e<n){const r=e+n>>>1,i=C(h[r]);i<t?e=r+1:n=r}return e}function b(t){h.length&&h.includes(t,c&&t.allowRecurse?d+1:d)||(null==t.id?h.push(t):h.splice(w(t.id),0,t),_())}function _(){c||u||(u=!0,y=g.then(M))}function S(t){const e=h.indexOf(t);e>d&&h.splice(e,1)}function E(t){(0,i.kJ)(t)?f.push(...t):p&&p.includes(t,t.allowRecurse?m+1:m)||f.push(t),_()}function A(t,e=(c?d+1:0)){for(0;e<h.length;e++){const t=h[e];t&&t.pre&&(h.splice(e,1),e--,t())}}function x(t){if(f.length){const t=[...new Set(f)];if(f.length=0,p)return void p.push(...t);for(p=t,p.sort(((t,e)=>C(t)-C(e))),m=0;m<p.length;m++)p[m]();p=null,m=0}}const C=t=>null==t.id?1/0:t.id,T=(t,e)=>{const n=C(t)-C(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function M(t){u=!1,c=!0,h.sort(T);i.dG;try{for(d=0;d<h.length;d++){const t=h[d];t&&!1!==t.active&&o(t,null,14)}}finally{d=0,h.length=0,x(t),c=!1,y=null,(h.length||f.length)&&M(t)}}function I(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.kT;let o=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in r){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:s}=r[t]||i.kT;s&&(o=n.map((t=>(0,i.HD)(t)?t.trim():t))),e&&(o=n.map(i.h5))}let c;let u=r[c=(0,i.hR)(e)]||r[c=(0,i.hR)((0,i._A)(e))];!u&&a&&(u=r[c=(0,i.hR)((0,i.rs)(e))]),u&&s(u,t,6,o);const h=r[c+"Once"];if(h){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,s(h,t,6,o)}}function k(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let a={},l=!1;if(!(0,i.mf)(t)){const r=t=>{const n=k(t,e,!0);n&&(l=!0,(0,i.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||l?((0,i.kJ)(s)?s.forEach((t=>a[t]=null)):(0,i.l7)(a,s),(0,i.Kn)(t)&&r.set(t,a),a):((0,i.Kn)(t)&&r.set(t,null),null)}function O(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let R=null,D=null;function N(t){const e=R;return R=t,D=t&&t.type.__scopeId||null,e}function P(t,e=R,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&sn(-1);const i=N(e);let o;try{o=t(...n)}finally{N(i),r._d&&sn(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function L(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[l],slots:c,attrs:u,emit:h,render:d,renderCache:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=t;let v,w;const b=N(t);try{if(4&n.shapeFlag){const t=o||r;v=Sn(d.call(t,t,f,s,m,p,g)),w=u}else{const t=e;0,v=Sn(t.length>1?t(s,{attrs:u,slots:c,emit:h}):t(s,null)),w=e.props?u:B(u)}}catch(S){tn.length=0,a(S,t,1),v=gn(Je)}let _=v;if(w&&!1!==y){const t=Object.keys(w),{shapeFlag:e}=_;t.length&&7&e&&(l&&t.some(i.tR)&&(w=U(w,l)),_=wn(_,w))}return n.dirs&&(_=wn(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),v=_,N(b),v}const B=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},U=(t,e)=>{const n={};for(const r in t)(0,i.tR)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function F(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||z(r,s,c):!!s);if(1024&l)return!0;if(16&l)return r?z(r,s,c):!!s;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!O(c,n))return!0}}return!1}function z(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!O(n,o))return!0}return!1}function V({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const H=t=>t.__isSuspense;function j(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):E(t)}function W(t,e){return q(t,null,e)}const G={};function $(t,e,n){return q(t,e,n)}function q(t,e,{immediate:n,deep:a,flush:l,onTrack:c,onTrigger:u}=i.kT){var h;const d=(0,r.nZ)()===(null==(h=kn)?void 0:h.scope)?kn:null;let f,p,m=!1,g=!1;if((0,r.dq)(t)?(f=()=>t.value,m=(0,r.yT)(t)):(0,r.PG)(t)?(f=()=>t,a=!0):(0,i.kJ)(t)?(g=!0,m=t.some((t=>(0,r.PG)(t)||(0,r.yT)(t))),f=()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?Z(t):(0,i.mf)(t)?o(t,d,2):void 0))):f=(0,i.mf)(t)?e?()=>o(t,d,2):()=>{if(!d||!d.isUnmounted)return p&&p(),s(t,d,3,[v])}:i.dG,e&&a){const t=f;f=()=>Z(t())}let y,v=t=>{p=E.onStop=()=>{o(t,d,4)}};if(zn){if(v=i.dG,e?n&&s(e,d,3,[f(),g?[]:void 0,v]):f(),"sync"!==l)return i.dG;{const t=Qn();y=t.__watcherHandles||(t.__watcherHandles=[])}}let w=g?new Array(t.length).fill(G):G;const _=()=>{if(E.active)if(e){const t=E.run();(a||m||(g?t.some(((t,e)=>(0,i.aU)(t,w[e]))):(0,i.aU)(t,w)))&&(p&&p(),s(e,d,3,[t,w===G?void 0:g&&w[0]===G?[]:w,v]),w=t)}else E.run()};let S;_.allowRecurse=!!e,"sync"===l?S=_:"post"===l?S=()=>Pe(_,d&&d.suspense):(_.pre=!0,d&&(_.id=d.uid),S=()=>b(_));const E=new r.qq(f,S);e?n?_():w=E.run():"post"===l?Pe(E.run.bind(E),d&&d.suspense):E.run();const A=()=>{E.stop(),d&&d.scope&&(0,i.Od)(d.scope.effects,E)};return y&&y.push(A),A}function Y(t,e,n){const r=this.proxy,o=(0,i.HD)(t)?t.includes(".")?X(r,t):()=>r[t]:t.bind(r,r);let s;(0,i.mf)(e)?s=e:(s=e.handler,n=e);const a=kn;Pn(this);const l=q(o,s.bind(r),n);return a?Pn(a):Ln(),l}function X(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Z(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,r.dq)(t))Z(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)Z(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{Z(t,e)}));else if((0,i.PO)(t))for(const n in t)Z(t[n],e);return t}function K(t,e){const n=R;if(null===n)return t;const r=qn(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,l=i.kT]=e[s];t&&((0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&Z(n),o.push({dir:t,instance:r,value:n,oldValue:void 0,arg:a,modifiers:l}))}return t}function J(t,e,n,i){const o=t.dirs,a=e&&e.dirs;for(let l=0;l<o.length;l++){const c=o[l];a&&(c.oldValue=a[l].value);let u=c.dir[i];u&&((0,r.Jd)(),s(u,n,8,[t.el,c,t,e]),(0,r.lk)())}}function Q(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Et((()=>{t.isMounted=!0})),Ct((()=>{t.isUnmounting=!0})),t}const tt=[Function,Array],et={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tt,onEnter:tt,onAfterEnter:tt,onEnterCancelled:tt,onBeforeLeave:tt,onLeave:tt,onAfterLeave:tt,onLeaveCancelled:tt,onBeforeAppear:tt,onAppear:tt,onAfterAppear:tt,onAppearCancelled:tt},nt={name:"BaseTransition",props:et,setup(t,{slots:e}){const n=On(),i=Q();let o;return()=>{const s=e.default&&ct(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==Je){0,a=e,t=!0;break}}const l=(0,r.IU)(t),{mode:c}=l;if(i.isLeaving)return st(a);const u=at(a);if(!u)return st(a);const h=ot(u,l,i,n);lt(u,h);const d=n.subTree,f=d&&at(d);let p=!1;const{getTransitionKey:m}=u.type;if(m){const t=m();void 0===o?o=t:t!==o&&(o=t,p=!0)}if(f&&f.type!==Je&&(!hn(u,f)||p)){const t=ot(f,l,i,n);if(lt(f,t),"out-in"===c)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},st(a);"in-out"===c&&u.type!==Je&&(t.delayLeave=(t,e,n)=>{const r=it(i,f);r[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},rt=nt;function it(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ot(t,e,n,r){const{appear:o,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:y,onAppear:v,onAfterAppear:w,onAppearCancelled:b}=e,_=String(t.key),S=it(n,t),E=(t,e)=>{t&&s(t,r,9,e)},A=(t,e)=>{const n=e[1];E(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},x={mode:a,persisted:l,beforeEnter(e){let r=c;if(!n.isMounted){if(!o)return;r=y||c}e._leaveCb&&e._leaveCb(!0);const i=S[_];i&&hn(t,i)&&i.el._leaveCb&&i.el._leaveCb(),E(r,[e])},enter(t){let e=u,r=h,i=d;if(!n.isMounted){if(!o)return;e=v||u,r=w||h,i=b||d}let s=!1;const a=t._enterCb=e=>{s||(s=!0,E(e?i:r,[t]),x.delayedLeave&&x.delayedLeave(),t._enterCb=void 0)};e?A(e,[t,a]):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();E(f,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),E(n?g:m,[e]),e._leaveCb=void 0,S[i]===t&&delete S[i])};S[i]=t,p?A(p,[e,s]):s()},clone(t){return ot(t,e,n,r)}};return x}function st(t){if(dt(t))return t=wn(t),t.children=null,t}function at(t){return dt(t)?t.children?t.children[0]:void 0:t}function lt(t,e){6&t.shapeFlag&&t.component?lt(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ct(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===Ze?(128&s.patchFlag&&i++,r=r.concat(ct(s.children,e,a))):(e||s.type!==Je)&&r.push(null!=a?wn(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function ut(t,e){return(0,i.mf)(t)?(()=>(0,i.l7)({name:t.name},e,{setup:t}))():t}const ht=t=>!!t.type.__asyncLoader;const dt=t=>t.type.__isKeepAlive;RegExp,RegExp;function ft(t,e){return(0,i.kJ)(t)?t.some((t=>ft(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!(0,i.Kj)(t)&&t.test(e)}function pt(t,e){gt(t,"a",e)}function mt(t,e){gt(t,"da",e)}function gt(t,e,n=kn){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(bt(e,r,n),n){let t=n.parent;while(t&&t.parent)dt(t.parent.vnode)&&yt(r,e,n,t),t=t.parent}}function yt(t,e,n,r){const o=bt(e,t,r,!0);Tt((()=>{(0,i.Od)(r[e],o)}),n)}function vt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function wt(t){return 128&t.shapeFlag?t.ssContent:t}function bt(t,e,n=kn,i=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),Pn(n);const o=s(e,n,t,i);return Ln(),(0,r.lk)(),o});return i?o.unshift(a):o.push(a),a}}const _t=t=>(e,n=kn)=>(!zn||"sp"===t)&&bt(t,((...t)=>e(...t)),n),St=_t("bm"),Et=_t("m"),At=_t("bu"),xt=_t("u"),Ct=_t("bum"),Tt=_t("um"),Mt=_t("sp"),It=_t("rtg"),kt=_t("rtc");function Ot(t,e=kn){bt("ec",t,e)}const Rt="components";function Dt(t,e){return Lt(Rt,t,!0,e)||t}const Nt=Symbol.for("v-ndc");function Pt(t){return(0,i.HD)(t)?Lt(Rt,t,!1)||t:t||Nt}function Lt(t,e,n=!0,r=!1){const o=R||kn;if(o){const n=o.type;if(t===Rt){const t=Yn(n,!1);if(t&&(t===e||t===(0,i._A)(e)||t===(0,i.kC)((0,i._A)(e))))return n}const s=Bt(o[t]||n[t],e)||Bt(o.appContext[t],e);return!s&&r?n:s}}function Bt(t,e){return t&&(t[e]||t[(0,i._A)(e)]||t[(0,i.kC)((0,i._A)(e))])}function Ut(t,e,n,r){let o;const s=n&&n[r];if((0,i.kJ)(t)||(0,i.HD)(t)){o=new Array(t.length);for(let n=0,r=t.length;n<r;n++)o[n]=e(t[n],n,void 0,s&&s[n])}else if("number"===typeof t){0,o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,s&&s[n])}else if((0,i.Kn)(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,s&&s[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=e(t[i],i,r,s&&s[r])}}else o=[];return n&&(n[r]=o),o}function Ft(t,e){for(let n=0;n<e.length;n++){const r=e[n];if((0,i.kJ)(r))for(let e=0;e<r.length;e++)t[r[e].name]=r[e].fn;else r&&(t[r.name]=r.key?(...t)=>{const e=r.fn(...t);return e&&(e.key=r.key),e}:r.fn)}return t}function zt(t,e,n={},r,i){if(R.isCE||R.parent&&ht(R.parent)&&R.parent.isCE)return"default"!==e&&(n.name=e),gn("slot",n,r&&r());let o=t[e];o&&o._c&&(o._d=!1),nn();const s=o&&Vt(o(n)),a=cn(Ze,{key:n.key||s&&s.key||`_${e}`},s||(r?r():[]),s&&1===t._?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Vt(t){return t.some((t=>!un(t)||t.type!==Je&&!(t.type===Ze&&!Vt(t.children))))?t:null}const Ht=t=>t?Bn(t)?qn(t)||t.proxy:Ht(t.parent):null,jt=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ht(t.parent),$root:t=>Ht(t.root),$emit:t=>t.emit,$options:t=>ee(t),$forceUpdate:t=>t.f||(t.f=()=>b(t.update)),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>Y.bind(t)}),Wt=(t,e)=>t!==i.kT&&!t.__isScriptSetup&&(0,i.RI)(t,e),Gt={get({_:t},e){const{ctx:n,setupState:o,data:s,props:a,accessCache:l,type:c,appContext:u}=t;let h;if("$"!==e[0]){const r=l[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(Wt(o,e))return l[e]=1,o[e];if(s!==i.kT&&(0,i.RI)(s,e))return l[e]=2,s[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return l[e]=3,a[e];if(n!==i.kT&&(0,i.RI)(n,e))return l[e]=4,n[e];Zt&&(l[e]=0)}}const d=jt[e];let f,p;return d?("$attrs"===e&&(0,r.j)(t,"get",e),d(t)):(f=c.__cssModules)&&(f=f[e])?f:n!==i.kT&&(0,i.RI)(n,e)?(l[e]=4,n[e]):(p=u.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return Wt(o,e)?(o[e]=n,!0):r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let l;return!!n[a]||t!==i.kT&&(0,i.RI)(t,a)||Wt(e,a)||(l=s[0])&&(0,i.RI)(l,a)||(0,i.RI)(r,a)||(0,i.RI)(jt,a)||(0,i.RI)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function $t(){return Yt().slots}function qt(){return Yt().attrs}function Yt(){const t=On();return t.setupContext||(t.setupContext=$n(t))}function Xt(t){return(0,i.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Zt=!0;function Kt(t){const e=ee(t),n=t.proxy,o=t.ctx;Zt=!1,e.beforeCreate&&Qt(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:c,provide:u,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:v,beforeDestroy:w,beforeUnmount:b,destroyed:_,unmounted:S,render:E,renderTracked:A,renderTriggered:x,errorCaptured:C,serverPrefetch:T,expose:M,inheritAttrs:I,components:k,directives:O,filters:R}=e,D=null;if(h&&Jt(h,o,D),l)for(const r in l){const t=l[r];(0,i.mf)(t)&&(o[r]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,r.qj)(e))}if(Zt=!0,a)for(const r in a){const t=a[r],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const s=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,l=Zn({get:e,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(c)for(const r in c)te(c[r],o,n,r);if(u){const t=(0,i.mf)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{me(e,t[e])}))}function N(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Qt(d,t,"c"),N(St,f),N(Et,p),N(At,m),N(xt,g),N(pt,y),N(mt,v),N(Ot,C),N(kt,A),N(It,x),N(Ct,b),N(Tt,S),N(Mt,T),(0,i.kJ)(M))if(M.length){const e=t.exposed||(t.exposed={});M.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});E&&t.render===i.dG&&(t.render=E),null!=I&&(t.inheritAttrs=I),k&&(t.components=k),O&&(t.directives=O)}function Jt(t,e,n=i.dG){(0,i.kJ)(t)&&(t=se(t));for(const o in t){const n=t[o];let s;s=(0,i.Kn)(n)?"default"in n?ge(n.from||o,n.default,!0):ge(n.from||o):ge(n),(0,r.dq)(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}function Qt(t,e,n){s((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function te(t,e,n,r){const o=r.includes(".")?X(n,r):()=>n[r];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&$(o,n)}else if((0,i.mf)(t))$(o,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>te(t,e,n,r)));else{const r=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(r)&&$(o,r,t)}else 0}function ee(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let c;return l?c=l:o.length||n||r?(c={},o.length&&o.forEach((t=>ne(c,t,a,!0))),ne(c,e,a)):c=e,(0,i.Kn)(e)&&s.set(e,c),c}function ne(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&ne(t,o,n,!0),i&&i.forEach((e=>ne(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=re[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const re={data:ie,props:ce,emits:ce,methods:le,computed:le,beforeCreate:ae,created:ae,beforeMount:ae,mounted:ae,beforeUpdate:ae,updated:ae,beforeDestroy:ae,beforeUnmount:ae,destroyed:ae,unmounted:ae,activated:ae,deactivated:ae,errorCaptured:ae,serverPrefetch:ae,components:le,directives:le,watch:ue,provide:ie,inject:oe};function ie(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function oe(t,e){return le(se(t),se(e))}function se(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ae(t,e){return t?[...new Set([].concat(t,e))]:e}function le(t,e){return t?(0,i.l7)(Object.create(null),t,e):e}function ce(t,e){return t?(0,i.kJ)(t)&&(0,i.kJ)(e)?[...new Set([...t,...e])]:(0,i.l7)(Object.create(null),Xt(t),Xt(null!=e?e:{})):e}function ue(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const r in e)n[r]=ae(t[r],e[r]);return n}function he(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let de=0;function fe(t,e){return function(n,r=null){(0,i.mf)(n)||(n=(0,i.l7)({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=he();const s=new Set;let a=!1;const l=o.app={_uid:de++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:tr,get config(){return o.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,i.mf)(t.install)?(s.add(t),t.install(l,...e)):(0,i.mf)(t)&&(s.add(t),t(l,...e))),l},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),l},component(t,e){return e?(o.components[t]=e,l):o.components[t]},directive(t,e){return e?(o.directives[t]=e,l):o.directives[t]},mount(i,s,c){if(!a){0;const u=gn(n,r);return u.appContext=o,s&&e?e(u,i):t(u,i,c),a=!0,l._container=i,i.__vue_app__=l,qn(u.component)||u.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return o.provides[t]=e,l},runWithContext(t){pe=l;try{return t()}finally{pe=null}}};return l}}let pe=null;function me(t,e){if(kn){let n=kn.provides;const r=kn.parent&&kn.parent.provides;r===n&&(n=kn.provides=Object.create(r)),n[t]=e}else 0}function ge(t,e,n=!1){const r=kn||R;if(r||pe){const o=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:pe._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(r&&r.proxy):e}else 0}function ye(t,e,n,o=!1){const s={},a={};(0,i.Nj)(a,dn,1),t.propsDefaults=Object.create(null),we(t,e,s,a);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);n?t.props=o?s:(0,r.Um)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function ve(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,c=(0,r.IU)(s),[u]=t.propsOptions;let h=!1;if(!(o||l>0)||16&l){let r;we(t,e,s,a)&&(h=!0);for(const o in c)e&&((0,i.RI)(e,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(s[o]=be(u,c,o,void 0,t,!0)):delete s[o]);if(a!==c)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],h=!0)}else if(8&l){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(O(t.emitsOptions,o))continue;const l=e[o];if(u)if((0,i.RI)(a,o))l!==a[o]&&(a[o]=l,h=!0);else{const e=(0,i._A)(o);s[e]=be(u,c,e,l,t,!1)}else l!==a[o]&&(a[o]=l,h=!0)}}h&&(0,r.X$)(t,"set","$attrs")}function we(t,e,n,o){const[s,a]=t.propsOptions;let l,c=!1;if(e)for(let r in e){if((0,i.Gg)(r))continue;const u=e[r];let h;s&&(0,i.RI)(s,h=(0,i._A)(r))?a&&a.includes(h)?(l||(l={}))[h]=u:n[h]=u:O(t.emitsOptions,r)||r in o&&u===o[r]||(o[r]=u,c=!0)}if(a){const e=(0,r.IU)(n),o=l||i.kT;for(let r=0;r<a.length;r++){const l=a[r];n[l]=be(s,e,l,o[l],t,!(0,i.RI)(o,l))}}return c}function be(t,e,n,r,o,s){const a=t[n];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.mf)(t)){const{propsDefaults:i}=o;n in i?r=i[n]:(Pn(o),r=i[n]=t.call(null,e),Ln())}else r=t}a[0]&&(s&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function _e(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},l=[];let c=!1;if(!(0,i.mf)(t)){const r=t=>{c=!0;const[n,r]=_e(t,e,!0);(0,i.l7)(a,n),r&&l.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!c)return(0,i.Kn)(t)&&r.set(t,i.Z6),i.Z6;if((0,i.kJ)(s))for(let h=0;h<s.length;h++){0;const t=(0,i._A)(s[h]);Se(t)&&(a[t]=i.kT)}else if(s){0;for(const t in s){const e=(0,i._A)(t);if(Se(e)){const n=s[t],r=a[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:(0,i.l7)({},n);if(r){const t=xe(Boolean,r.type),n=xe(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||(0,i.RI)(r,"default"))&&l.push(e)}}}}const u=[a,l];return(0,i.Kn)(t)&&r.set(t,u),u}function Se(t){return"$"!==t[0]}function Ee(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function Ae(t,e){return Ee(t)===Ee(e)}function xe(t,e){return(0,i.kJ)(e)?e.findIndex((e=>Ae(e,t))):(0,i.mf)(e)&&Ae(e,t)?0:-1}const Ce=t=>"_"===t[0]||"$stable"===t,Te=t=>(0,i.kJ)(t)?t.map(Sn):[Sn(t)],Me=(t,e,n)=>{if(e._n)return e;const r=P(((...t)=>Te(e(...t))),n);return r._c=!1,r},Ie=(t,e,n)=>{const r=t._ctx;for(const o in t){if(Ce(o))continue;const n=t[o];if((0,i.mf)(n))e[o]=Me(o,n,r);else if(null!=n){0;const t=Te(n);e[o]=()=>t}}},ke=(t,e)=>{const n=Te(e);t.slots.default=()=>n},Oe=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,r.IU)(e),(0,i.Nj)(e,"_",n)):Ie(e,t.slots={})}else t.slots={},e&&ke(t,e);(0,i.Nj)(t.slots,dn,1)},Re=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=i.kT;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:((0,i.l7)(o,e),n||1!==t||delete o._):(s=!e.$stable,Ie(e,o)),a=e}else e&&(ke(t,e),a={default:1});if(s)for(const i in o)Ce(i)||i in a||delete o[i]};function De(t,e,n,s,a=!1){if((0,i.kJ)(t))return void t.forEach(((t,r)=>De(t,e&&((0,i.kJ)(e)?e[r]:e),n,s,a)));if(ht(s)&&!a)return;const l=4&s.shapeFlag?qn(s.component)||s.component.proxy:s.el,c=a?null:l,{i:u,r:h}=t;const d=e&&e.r,f=u.refs===i.kT?u.refs={}:u.refs,p=u.setupState;if(null!=d&&d!==h&&((0,i.HD)(d)?(f[d]=null,(0,i.RI)(p,d)&&(p[d]=null)):(0,r.dq)(d)&&(d.value=null)),(0,i.mf)(h))o(h,u,12,[c,f]);else{const e=(0,i.HD)(h),o=(0,r.dq)(h);if(e||o){const r=()=>{if(t.f){const n=e?(0,i.RI)(p,h)?p[h]:f[h]:h.value;a?(0,i.kJ)(n)&&(0,i.Od)(n,l):(0,i.kJ)(n)?n.includes(l)||n.push(l):e?(f[h]=[l],(0,i.RI)(p,h)&&(p[h]=f[h])):(h.value=[l],t.k&&(f[t.k]=h.value))}else e?(f[h]=c,(0,i.RI)(p,h)&&(p[h]=c)):o&&(h.value=c,t.k&&(f[t.k]=c))};c?(r.id=-1,Pe(r,n)):r()}else 0}}function Ne(){}const Pe=j;function Le(t){return Be(t)}function Be(t,e){Ne();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:l,createText:c,createComment:u,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=i.dG,insertStaticContent:g}=t,y=(t,e,n,r=null,i=null,o=null,s=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!hn(t,e)&&(r=Q(t),q(t,i,o,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=e;switch(c){case Ke:v(t,e,n,r);break;case Je:w(t,e,n,r);break;case Qe:null==t&&_(e,n,r,s);break;case Ze:N(t,e,n,r,i,o,s,a,l);break;default:1&h?T(t,e,n,r,i,o,s,a,l):6&h?P(t,e,n,r,i,o,s,a,l):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,l,et)}null!=u&&i&&De(u,t&&t.ref,o,e||t,!e)},v=(t,e,n,r)=>{if(null==t)o(e.el=c(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},w=(t,e,n,r)=>{null==t?o(e.el=u(e.children||""),n,r):e.el=t.el},_=(t,e,n,r)=>{[t.el,t.anchor]=g(t.children,e,n,r,t.el,t.anchor)},E=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),o(t,n,r),t=i;o(e,n,r)},C=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},T=(t,e,n,r,i,o,s,a,l)=>{s=s||"svg"===e.type,null==t?M(e,n,r,i,o,s,a,l):O(t,e,i,o,s,a,l)},M=(t,e,n,r,s,c,u,h)=>{let f,p;const{type:m,props:g,shapeFlag:y,transition:v,dirs:w}=t;if(f=t.el=l(t.type,c,g&&g.is,g),8&y?d(f,t.children):16&y&&k(t.children,f,null,r,s,c&&"foreignObject"!==m,u,h),w&&J(t,null,r,"created"),I(f,t,t.scopeId,u,r),g){for(const e in g)"value"===e||(0,i.Gg)(e)||a(f,e,null,g[e],c,t.children,r,s,K);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&Cn(p,r,t)}w&&J(t,null,r,"beforeMount");const b=(!s||s&&!s.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(f),o(f,e,n),((p=g&&g.onVnodeMounted)||b||w)&&Pe((()=>{p&&Cn(p,r,t),b&&v.enter(f),w&&J(t,null,r,"mounted")}),s)},I=(t,e,n,r,i)=>{if(n&&m(t,n),r)for(let o=0;o<r.length;o++)m(t,r[o]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;I(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},k=(t,e,n,r,i,o,s,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?En(t[c]):Sn(t[c]);y(null,l,e,n,r,i,o,s,a)}},O=(t,e,n,r,o,s,l)=>{const c=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.kT,m=e.props||i.kT;let g;n&&Ue(n,!1),(g=m.onVnodeBeforeUpdate)&&Cn(g,n,e,t),f&&J(e,t,n,"beforeUpdate"),n&&Ue(n,!0);const y=o&&"foreignObject"!==e.type;if(h?R(t.dynamicChildren,h,c,n,r,y,s):l||j(t,e,c,null,n,r,y,s,!1),u>0){if(16&u)D(c,e,p,m,n,r,o);else if(2&u&&p.class!==m.class&&a(c,"class",null,m.class,o),4&u&&a(c,"style",p.style,m.style,o),8&u){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const s=i[e],l=p[s],u=m[s];u===l&&"value"!==s||a(c,s,l,u,o,t.children,n,r,K)}}1&u&&t.children!==e.children&&d(c,e.children)}else l||null!=h||D(c,e,p,m,n,r,o);((g=m.onVnodeUpdated)||f)&&Pe((()=>{g&&Cn(g,n,e,t),f&&J(e,t,n,"updated")}),r)},R=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],u=l.el&&(l.type===Ze||!hn(l,c)||70&l.shapeFlag)?f(l.el):n;y(l,c,u,null,r,i,o,s,!0)}},D=(t,e,n,r,o,s,l)=>{if(n!==r){if(n!==i.kT)for(const c in n)(0,i.Gg)(c)||c in r||a(t,c,n[c],null,l,e.children,o,s,K);for(const c in r){if((0,i.Gg)(c))continue;const u=r[c],h=n[c];u!==h&&"value"!==c&&a(t,c,h,u,l,e.children,o,s,K)}"value"in r&&a(t,"value",n.value,r.value)}},N=(t,e,n,r,i,s,a,l,u)=>{const h=e.el=t?t.el:c(""),d=e.anchor=t?t.anchor:c("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=e;m&&(l=l?l.concat(m):m),null==t?(o(h,n,r),o(d,n,r),k(e.children,n,d,i,s,a,l,u)):f>0&&64&f&&p&&t.dynamicChildren?(R(t.dynamicChildren,p,n,i,s,a,l),(null!=e.key||i&&e===i.subTree)&&Fe(t,e,!0)):j(t,e,n,d,i,s,a,l,u)},P=(t,e,n,r,i,o,s,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,l):B(e,n,r,i,o,s,l):U(t,e,l)},B=(t,e,n,r,i,o,s)=>{const a=t.component=In(t,r,i);if(dt(t)&&(a.ctx.renderer=et),Vn(a),a.asyncDep){if(i&&i.registerDep(a,z),!t.el){const t=a.subTree=gn(Je);w(null,t,e,n)}}else z(a,t,e,n,i,o,s)},U=(t,e,n)=>{const r=e.component=t.component;if(F(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,S(r.update),r.update()}else e.el=t.el,r.vnode=e},z=(t,e,n,o,s,a,l)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:r,u:o,parent:c,vnode:u}=t,h=n;0,Ue(t,!1),n?(n.el=u.el,H(t,n,l)):n=u,r&&(0,i.ir)(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Cn(e,c,n,u),Ue(t,!0);const d=L(t);0;const p=t.subTree;t.subTree=d,y(p,d,f(p.el),Q(p),t,s,a),n.el=d.el,null===h&&V(t,d.el),o&&Pe(o,s),(e=n.props&&n.props.onVnodeUpdated)&&Pe((()=>Cn(e,c,n,u)),s)}else{let r;const{el:l,props:c}=e,{bm:u,m:h,parent:d}=t,f=ht(e);if(Ue(t,!1),u&&(0,i.ir)(u),!f&&(r=c&&c.onVnodeBeforeMount)&&Cn(r,d,e),Ue(t,!0),l&&rt){const n=()=>{t.subTree=L(t),rt(l,t.subTree,t,s,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const r=t.subTree=L(t);0,y(null,r,n,o,t,s,a),e.el=r.el}if(h&&Pe(h,s),!f&&(r=c&&c.onVnodeMounted)){const t=e;Pe((()=>Cn(r,d,t)),s)}(256&e.shapeFlag||d&&ht(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Pe(t.a,s),t.isMounted=!0,e=n=o=null}},u=t.effect=new r.qq(c,(()=>b(h)),t.scope),h=t.update=()=>u.run();h.id=t.uid,Ue(t,!0),h()},H=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,ve(t,e.props,i,n),Re(t,e.children,n),(0,r.Jd)(),A(),(0,r.lk)()},j=(t,e,n,r,i,o,s,a,l=!1)=>{const c=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void G(c,h,n,r,i,o,s,a,l);if(256&f)return void W(c,h,n,r,i,o,s,a,l)}8&p?(16&u&&K(c,i,o),h!==c&&d(n,h)):16&u?16&p?G(c,h,n,r,i,o,s,a,l):K(c,i,o,!0):(8&u&&d(n,""),16&p&&k(h,n,r,i,o,s,a,l))},W=(t,e,n,r,o,s,a,l,c)=>{t=t||i.Z6,e=e||i.Z6;const u=t.length,h=e.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=e[f]=c?En(e[f]):Sn(e[f]);y(t[f],r,n,null,o,s,a,l,c)}u>h?K(t,o,s,!0,!1,d):k(e,n,r,o,s,a,l,c,d)},G=(t,e,n,r,o,s,a,l,c)=>{let u=0;const h=e.length;let d=t.length-1,f=h-1;while(u<=d&&u<=f){const r=t[u],i=e[u]=c?En(e[u]):Sn(e[u]);if(!hn(r,i))break;y(r,i,n,null,o,s,a,l,c),u++}while(u<=d&&u<=f){const r=t[d],i=e[f]=c?En(e[f]):Sn(e[f]);if(!hn(r,i))break;y(r,i,n,null,o,s,a,l,c),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<h?e[t].el:r;while(u<=f)y(null,e[u]=c?En(e[u]):Sn(e[u]),n,i,o,s,a,l,c),u++}}else if(u>f)while(u<=d)q(t[u],o,s,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const t=e[u]=c?En(e[u]):Sn(e[u]);null!=t.key&&g.set(t.key,u)}let v,w=0;const b=f-m+1;let _=!1,S=0;const E=new Array(b);for(u=0;u<b;u++)E[u]=0;for(u=p;u<=d;u++){const r=t[u];if(w>=b){q(r,o,s,!0);continue}let i;if(null!=r.key)i=g.get(r.key);else for(v=m;v<=f;v++)if(0===E[v-m]&&hn(r,e[v])){i=v;break}void 0===i?q(r,o,s,!0):(E[i-m]=u+1,i>=S?S=i:_=!0,y(r,e[i],n,null,o,s,a,l,c),w++)}const A=_?ze(E):i.Z6;for(v=A.length-1,u=b-1;u>=0;u--){const t=m+u,i=e[t],d=t+1<h?e[t+1].el:r;0===E[u]?y(null,i,n,d,o,s,a,l,c):_&&(v<0||u!==A[v]?$(i,n,d,2):v--)}}},$=(t,e,n,r,i=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:u}=t;if(6&u)return void $(t.component.subTree,e,n,r);if(128&u)return void t.suspense.move(e,n,r);if(64&u)return void a.move(t,e,n,et);if(a===Ze){o(s,e,n);for(let t=0;t<c.length;t++)$(c[t],e,n,r);return void o(t.anchor,e,n)}if(a===Qe)return void E(t,e,n);const h=2!==r&&1&u&&l;if(h)if(0===r)l.beforeEnter(s),o(s,e,n),Pe((()=>l.enter(s)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=l,a=()=>o(s,e,n),c=()=>{t(s,(()=>{a(),i&&i()}))};r?r(s,a,c):c()}else o(s,e,n)},q=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:d}=t;if(null!=a&&De(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&d,p=!ht(t);let m;if(p&&(m=s&&s.onVnodeBeforeUnmount)&&Cn(m,e,t),6&u)Z(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);f&&J(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,i,et,r):c&&(o!==Ze||h>0&&64&h)?K(c,e,n,!1,!0):(o===Ze&&384&h||!i&&16&u)&&K(l,e,n),r&&Y(t)}(p&&(m=s&&s.onVnodeUnmounted)||f)&&Pe((()=>{m&&Cn(m,e,t),f&&J(t,null,e,"unmounted")}),n)},Y=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===Ze)return void X(n,r);if(e===Qe)return void C(t);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,s=()=>e(n,o);r?r(t.el,o,s):s()}else o()},X=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},Z=(t,e,n)=>{const{bum:r,scope:o,update:s,subTree:a,um:l}=t;r&&(0,i.ir)(r),o.stop(),s&&(s.active=!1,q(a,t,e,n)),l&&Pe(l,e),Pe((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},K=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)q(t[s],e,n,r,i)},Q=t=>6&t.shapeFlag?Q(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&q(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),A(),x(),e._vnode=t},et={p:y,um:q,m:$,r:Y,mt:B,mc:k,pc:j,pbc:R,n:Q,o:t};let nt,rt;return e&&([nt,rt]=e(et)),{render:tt,hydrate:nt,createApp:fe(tt,nt)}}function Ue({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Fe(t,e,n=!1){const r=t.children,o=e.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=En(o[i]),e.el=t.el),n||Fe(t,e)),e.type===Ke&&(e.el=t.el)}}function ze(t){const e=t.slice(),n=[0];let r,i,o,s,a;const l=t.length;for(r=0;r<l;r++){const l=t[r];if(0!==l){if(i=n[n.length-1],t[i]<l){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<l?o=a+1:s=a;l<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}const Ve=t=>t.__isTeleport,He=t=>t&&(t.disabled||""===t.disabled),je=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,We=(t,e)=>{const n=t&&t.to;if((0,i.HD)(n)){if(e){const t=e(n);return t}return null}return n},Ge={__isTeleport:!0,process(t,e,n,r,i,o,s,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,y=He(e.props);let{shapeFlag:v,children:w,dynamicChildren:b}=e;if(null==t){const t=e.el=m(""),c=e.anchor=m("");f(t,n,r),f(c,n,r);const h=e.target=We(e.props,p),d=e.targetAnchor=m("");h&&(f(d,h),s=s||je(h));const g=(t,e)=>{16&v&&u(w,t,e,i,o,s,a,l)};y?g(n,c):h&&g(h,d)}else{e.el=t.el;const r=e.anchor=t.anchor,u=e.target=t.target,f=e.targetAnchor=t.targetAnchor,m=He(t.props),g=m?n:u,v=m?r:f;if(s=s||je(u),b?(d(t.dynamicChildren,b,g,i,o,s,a),Fe(t,e,!0)):l||h(t,e,g,v,i,o,s,a,!1),y)m||$e(e,n,r,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=We(e.props,p);t&&$e(e,t,null,c,0)}else m&&$e(e,u,f,c,1)}Xe(e)},remove(t,e,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&o(u),(s||!He(d))&&(o(c),16&a))for(let f=0;f<l.length;f++){const t=l[f];i(t,e,n,!0,!!t.dynamicChildren)}},move:$e,hydrate:qe};function $e(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:l,children:c,props:u}=t,h=2===o;if(h&&r(s,e,n),(!h||He(u))&&16&l)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function qe(t,e,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:l}},c){const u=e.target=We(e.props,l);if(u){const l=u._lpa||u.firstChild;if(16&e.shapeFlag)if(He(e.props))e.anchor=c(s(t),e,a(t),n,r,i,o),e.targetAnchor=l;else{e.anchor=s(t);let a=l;while(a)if(a=s(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}c(l,e,u,n,r,i,o)}Xe(e)}return e.anchor&&s(e.anchor)}const Ye=Ge;function Xe(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;while(n!==t.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ze=Symbol.for("v-fgt"),Ke=Symbol.for("v-txt"),Je=Symbol.for("v-cmt"),Qe=Symbol.for("v-stc"),tn=[];let en=null;function nn(t=!1){tn.push(en=t?null:[])}function rn(){tn.pop(),en=tn[tn.length-1]||null}let on=1;function sn(t){on+=t}function an(t){return t.dynamicChildren=on>0?en||i.Z6:null,rn(),on>0&&en&&en.push(t),t}function ln(t,e,n,r,i,o){return an(mn(t,e,n,r,i,o,!0))}function cn(t,e,n,r,i){return an(gn(t,e,n,r,i,!0))}function un(t){return!!t&&!0===t.__v_isVNode}function hn(t,e){return t.type===e.type&&t.key===e.key}const dn="__vInternal",fn=({key:t})=>null!=t?t:null,pn=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.HD)(t)||(0,r.dq)(t)||(0,i.mf)(t)?{i:R,r:t,k:e,f:!!n}:t:null);function mn(t,e=null,n=null,r=0,o=null,s=(t===Ze?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fn(e),ref:e&&pn(e),scopeId:D,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:R};return l?(An(c,n),128&s&&t.normalize(c)):n&&(c.shapeFlag|=(0,i.HD)(n)?8:16),on>0&&!a&&en&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&en.push(c),c}const gn=yn;function yn(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==Nt||(t=Je),un(t)){const r=wn(t,e,!0);return n&&An(r,n),on>0&&!a&&en&&(6&r.shapeFlag?en[en.indexOf(t)]=r:en.push(r)),r.patchFlag|=-2,r}if(Xn(t)&&(t=t.__vccOpts),e){e=vn(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const l=(0,i.HD)(t)?1:H(t)?128:Ve(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return mn(t,e,n,o,s,l,a,!0)}function vn(t){return t?(0,r.X3)(t)||dn in t?(0,i.l7)({},t):t:null}function wn(t,e,n=!1){const{props:r,ref:o,patchFlag:s,children:a}=t,l=e?xn(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&fn(l),ref:e&&e.ref?n&&o?(0,i.kJ)(o)?o.concat(pn(e)):[o,pn(e)]:pn(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wn(t.ssContent),ssFallback:t.ssFallback&&wn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c}function bn(t=" ",e=0){return gn(Ke,null,t,e)}function _n(t="",e=!1){return e?(nn(),cn(Je,null,t)):gn(Je,null,t)}function Sn(t){return null==t||"boolean"===typeof t?gn(Je):(0,i.kJ)(t)?gn(Ze,null,t.slice()):"object"===typeof t?En(t):gn(Ke,null,String(t))}function En(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:wn(t)}function An(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),An(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||dn in e?3===r&&R&&(1===R.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=R}}else(0,i.mf)(e)?(e={default:e,_ctx:R},n=32):(e=String(e),64&r?(n=16,e=[bn(e)]):n=8);t.children=e,t.shapeFlag|=n}function xn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C_)([e.class,r.class]));else if("style"===t)e.style=(0,i.j5)([e.style,r.style]);else if((0,i.F7)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function Cn(t,e,n,r=null){s(t,e,7,[n,r])}const Tn=he();let Mn=0;function In(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||Tn,a={uid:Mn++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:_e(o,s),emitsOptions:k(o,s),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=I.bind(null,a),t.ce&&t.ce(a),a}let kn=null;const On=()=>kn||R;let Rn,Dn,Nn="__VUE_INSTANCE_SETTERS__";(Dn=(0,i.E9)()[Nn])||(Dn=(0,i.E9)()[Nn]=[]),Dn.push((t=>kn=t)),Rn=t=>{Dn.length>1?Dn.forEach((e=>e(t))):Dn[0](t)};const Pn=t=>{Rn(t),t.scope.on()},Ln=()=>{kn&&kn.scope.off(),Rn(null)};function Bn(t){return 4&t.vnode.shapeFlag}let Un,Fn,zn=!1;function Vn(t,e=!1){zn=e;const{props:n,children:r}=t.vnode,i=Bn(t);ye(t,n,i,e),Oe(t,r);const o=i?Hn(t,e):void 0;return zn=!1,o}function Hn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,r.Xl)(new Proxy(t.ctx,Gt));const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?$n(t):null;Pn(t),(0,r.Jd)();const l=o(s,t,0,[t.props,n]);if((0,r.lk)(),Ln(),(0,i.tI)(l)){if(l.then(Ln,Ln),e)return l.then((n=>{jn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=l}else jn(t,l,e)}else Wn(t,e)}function jn(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,r.WL)(e)),Wn(t,n)}function Wn(t,e,n){const o=t.type;if(!t.render){if(!e&&Un&&!o.render){const e=o.template||ee(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,l=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:s},r),a);o.render=Un(e,l)}}t.render=o.render||i.dG,Fn&&Fn(t)}Pn(t),(0,r.Jd)(),Kt(t),(0,r.lk)(),Ln()}function Gn(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,r.j)(t,"get","$attrs"),e[n]}}))}function $n(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Gn(t)},slots:t.slots,emit:t.emit,expose:e}}function qn(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in jt?jt[n](t):void 0},has(t,e){return e in t||e in jt}}))}function Yn(t,e=!0){return(0,i.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Xn(t){return(0,i.mf)(t)&&"__vccOpts"in t}const Zn=(t,e)=>(0,r.Fl)(t,e,zn);function Kn(t,e,n){const r=arguments.length;return 2===r?(0,i.Kn)(e)&&!(0,i.kJ)(e)?un(e)?gn(t,null,[e]):gn(t,e):gn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&un(n)&&(n=[n]),gn(t,e,n))}const Jn=Symbol.for("v-scx"),Qn=()=>{{const t=ge(Jn);return t}};const tr="3.3.4"},9242:function(t,e,n){"use strict";n.d(e,{D2:function(){return yt},F8:function(){return vt},G2:function(){return lt},bM:function(){return ct},e8:function(){return st},iM:function(){return mt},ri:function(){return Et},uT:function(){return P}});n(7658);var r=n(7139),i=n(3396),o=n(4870);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),c={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?a.createElementNS(s,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{l.innerHTML=r?`<svg>${t}</svg>`:t;const i=l.content;if(r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function u(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function h(t,e,n){const i=t.style,o=(0,r.HD)(n);if(n&&!o){if(e&&!(0,r.HD)(e))for(const t in e)null==n[t]&&f(i,t,"");for(const t in n)f(i,t,n[t])}else{const r=i.display;o?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const d=/\s*!important$/;function f(t,e,n){if((0,r.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=g(t,e);d.test(n)?t.setProperty((0,r.rs)(i),n.replace(d,""),"important"):t[i]=n}}const p=["Webkit","Moz","ms"],m={};function g(t,e){const n=m[e];if(n)return n;let i=(0,r._A)(e);if("filter"!==i&&i in t)return m[e]=i;i=(0,r.kC)(i);for(let r=0;r<p.length;r++){const n=p[r]+i;if(n in t)return m[e]=n}return e}const y="http://www.w3.org/1999/xlink";function v(t,e,n,i,o){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(y,e.slice(6,e.length)):t.setAttributeNS(y,e,n);else{const i=(0,r.Pq)(e);null==n||i&&!(0,r.yA)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function w(t,e,n,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==n?"":n);const l=t.tagName;if("value"===e&&"PROGRESS"!==l&&!l.includes("-")){t._value=n;const r="OPTION"===l?t.getAttribute("value"):t.value,i=null==n?"":n;return r!==i&&(t.value=i),void(null==n&&t.removeAttribute(e))}let c=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",c=!0):"number"===i&&(n=0,c=!0)}try{t[e]=n}catch(u){0}c&&t.removeAttribute(e)}function b(t,e,n,r){t.addEventListener(e,n,r)}function _(t,e,n,r){t.removeEventListener(e,n,r)}function S(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=A(e);if(r){const s=o[e]=M(r,i);b(t,n,s,a)}else s&&(_(t,n,s,a),o[e]=void 0)}}const E=/(?:Once|Passive|Capture)$/;function A(t){let e;if(E.test(t)){let n;e={};while(n=t.match(E))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,r.rs)(t.slice(2));return[n,e]}let x=0;const C=Promise.resolve(),T=()=>x||(C.then((()=>x=0)),x=Date.now());function M(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,i.$d)(I(t,n.value),e,5,[t])};return n.value=t,n.attached=T(),n}function I(t,e){if((0,r.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const k=/^on[a-z]/,O=(t,e,n,i,o=!1,s,a,l,c)=>{"class"===e?u(t,i,o):"style"===e?h(t,n,i):(0,r.F7)(e)?(0,r.tR)(e)||S(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):R(t,e,i,o))?w(t,e,i,s,a,l,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),v(t,e,i,o))};function R(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&k.test(e)&&(0,r.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!k.test(e)||!(0,r.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const D="transition",N="animation",P=(t,{slots:e})=>(0,i.h)(i.P$,z(t),e);P.displayName="Transition";const L={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},B=P.props=(0,r.l7)({},i.nJ,L),U=(t,e=[])=>{(0,r.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},F=t=>!!t&&((0,r.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function z(t){const e={};for(const r in t)r in L||(e[r]=t[r]);if(!1===t.css)return e;const{name:n="v",type:i,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:u=a,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,m=V(o),g=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:w,onEnterCancelled:b,onLeave:_,onLeaveCancelled:S,onBeforeAppear:E=v,onAppear:A=w,onAppearCancelled:x=b}=e,C=(t,e,n)=>{W(t,e?h:l),W(t,e?u:a),n&&n()},T=(t,e)=>{t._isLeaving=!1,W(t,d),W(t,p),W(t,f),e&&e()},M=t=>(e,n)=>{const r=t?A:w,o=()=>C(e,t,n);U(r,[e,o]),G((()=>{W(e,t?c:s),j(e,t?h:l),F(r)||q(e,i,g,o)}))};return(0,r.l7)(e,{onBeforeEnter(t){U(v,[t]),j(t,s),j(t,a)},onBeforeAppear(t){U(E,[t]),j(t,c),j(t,u)},onEnter:M(!1),onAppear:M(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>T(t,e);j(t,d),K(),j(t,f),G((()=>{t._isLeaving&&(W(t,d),j(t,p),F(_)||q(t,i,y,n))})),U(_,[t,n])},onEnterCancelled(t){C(t,!1),U(b,[t])},onAppearCancelled(t){C(t,!0),U(x,[t])},onLeaveCancelled(t){T(t),U(S,[t])}})}function V(t){if(null==t)return null;if((0,r.Kn)(t))return[H(t.enter),H(t.leave)];{const e=H(t);return[e,e]}}function H(t){const e=(0,r.He)(t);return e}function j(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function W(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function G(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let $=0;function q(t,e,n,r){const i=t._endId=++$,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:l}=Y(t,e);if(!s)return r();const c=s+"end";let u=0;const h=()=>{t.removeEventListener(c,d),o()},d=e=>{e.target===t&&++u>=l&&h()};setTimeout((()=>{u<l&&h()}),a+1),t.addEventListener(c,d)}function Y(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(`${D}Delay`),o=r(`${D}Duration`),s=X(i,o),a=r(`${N}Delay`),l=r(`${N}Duration`),c=X(a,l);let u=null,h=0,d=0;e===D?s>0&&(u=D,h=s,d=o.length):e===N?c>0&&(u=N,h=c,d=l.length):(h=Math.max(s,c),u=h>0?s>c?D:N:null,d=u?u===D?o.length:l.length:0);const f=u===D&&/\b(transform|all)(,|$)/.test(r(`${D}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function X(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>Z(e)+Z(t[n]))))}function Z(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function K(){return document.body.offsetHeight}const J=new WeakMap,Q=new WeakMap,tt={name:"TransitionGroup",props:(0,r.l7)({},B,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.FN)(),r=(0,i.Y8)();let s,a;return(0,i.ic)((()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!it(s[0].el,n.vnode.el,e))return;s.forEach(et),s.forEach(nt);const r=s.filter(rt);K(),r.forEach((t=>{const n=t.el,r=n.style;j(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,W(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const l=(0,o.IU)(t),c=z(l);let u=l.tag||i.HY;s=a,a=e.default?(0,i.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,i.nK)(e,(0,i.U2)(e,c,r,n))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,i.nK)(e,(0,i.U2)(e,c,r,n)),J.set(e,e.el.getBoundingClientRect())}return(0,i.Wm)(u,null,a)}}};tt.props;function et(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function nt(t){Q.set(t,t.el.getBoundingClientRect())}function rt(t){const e=J.get(t),n=Q.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}function it(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Y(r);return i.removeChild(r),o}const ot=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(e)?t=>(0,r.ir)(e,t):e};const st={deep:!0,created(t,e,n){t._assign=ot(n),b(t,"change",(()=>{const e=t._modelValue,n=ht(t),i=t.checked,o=t._assign;if((0,r.kJ)(e)){const t=(0,r.hq)(e,n),s=-1!==t;if(i&&!s)o(e.concat(n));else if(!i&&s){const n=[...e];n.splice(t,1),o(n)}}else if((0,r.DM)(e)){const t=new Set(e);i?t.add(n):t.delete(n),o(t)}else o(dt(t,i))}))},mounted:at,beforeUpdate(t,e,n){t._assign=ot(n),at(t,e,n)}};function at(t,{value:e,oldValue:n},i){t._modelValue=e,(0,r.kJ)(e)?t.checked=(0,r.hq)(e,i.props.value)>-1:(0,r.DM)(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=(0,r.WV)(e,dt(t,!0)))}const lt={created(t,{value:e},n){t.checked=(0,r.WV)(e,n.props.value),t._assign=ot(n),b(t,"change",(()=>{t._assign(ht(t))}))},beforeUpdate(t,{value:e,oldValue:n},i){t._assign=ot(i),e!==n&&(t.checked=(0,r.WV)(e,i.props.value))}},ct={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const o=(0,r.DM)(e);b(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,r.h5)(ht(t)):ht(t)));t._assign(t.multiple?o?new Set(e):e:e[0])})),t._assign=ot(i)},mounted(t,{value:e}){ut(t,e)},beforeUpdate(t,e,n){t._assign=ot(n)},updated(t,{value:e}){ut(t,e)}};function ut(t,e){const n=t.multiple;if(!n||(0,r.kJ)(e)||(0,r.DM)(e)){for(let i=0,o=t.options.length;i<o;i++){const o=t.options[i],s=ht(o);if(n)(0,r.kJ)(e)?o.selected=(0,r.hq)(e,s)>-1:o.selected=e.has(s);else if((0,r.WV)(ht(o),e))return void(t.selectedIndex!==i&&(t.selectedIndex=i))}n||-1===t.selectedIndex||(t.selectedIndex=-1)}}function ht(t){return"_value"in t?t._value:t.value}function dt(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ft=["ctrl","shift","alt","meta"],pt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>ft.some((n=>t[`${n}Key`]&&!e.includes(n)))},mt=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=pt[e[t]];if(r&&r(n,e))return}return t(n,...r)},gt={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},yt=(t,e)=>n=>{if(!("key"in n))return;const i=(0,r.rs)(n.key);return e.some((t=>t===i||gt[t]===i))?t(n):void 0},vt={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):wt(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!==!n&&(r?e?(r.beforeEnter(t),wt(t,!0),r.enter(t)):r.leave(t,(()=>{wt(t,!1)})):wt(t,e))},beforeUnmount(t,{value:e}){wt(t,e)}};function wt(t,e){t.style.display=e?t._vod:"none"}const bt=(0,r.l7)({patchProp:O},c);let _t;function St(){return _t||(_t=(0,i.Us)(bt))}const Et=(...t)=>{const e=St().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=At(t);if(!i)return;const o=e._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function At(t){if((0,r.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,n){"use strict";n.d(e,{C_:function(){return J},DM:function(){return y},E9:function(){return W},F7:function(){return c},Gg:function(){return k},HD:function(){return _},He:function(){return H},Kj:function(){return w},Kn:function(){return E},NO:function(){return a},Nj:function(){return z},Od:function(){return d},PO:function(){return M},Pq:function(){return et},RI:function(){return p},S0:function(){return I},W7:function(){return T},WV:function(){return it},Z6:function(){return o},_A:function(){return D},_N:function(){return g},aU:function(){return U},dG:function(){return s},e1:function(){return $},fY:function(){return r},h5:function(){return V},hR:function(){return B},hq:function(){return ot},ir:function(){return F},j5:function(){return q},kC:function(){return L},kJ:function(){return m},kT:function(){return i},l7:function(){return h},mf:function(){return b},rs:function(){return P},tI:function(){return A},tR:function(){return u},vs:function(){return Q},yA:function(){return nt},yk:function(){return S},zw:function(){return st}});n(7658);function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const i={},o=[],s=()=>{},a=()=>!1,l=/^on[^a-z]/,c=t=>l.test(t),u=t=>t.startsWith("onUpdate:"),h=Object.assign,d=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},f=Object.prototype.hasOwnProperty,p=(t,e)=>f.call(t,e),m=Array.isArray,g=t=>"[object Map]"===C(t),y=t=>"[object Set]"===C(t),v=t=>"[object Date]"===C(t),w=t=>"[object RegExp]"===C(t),b=t=>"function"===typeof t,_=t=>"string"===typeof t,S=t=>"symbol"===typeof t,E=t=>null!==t&&"object"===typeof t,A=t=>E(t)&&b(t.then)&&b(t.catch),x=Object.prototype.toString,C=t=>x.call(t),T=t=>C(t).slice(8,-1),M=t=>"[object Object]"===C(t),I=t=>_(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,k=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),O=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},R=/-(\w)/g,D=O((t=>t.replace(R,((t,e)=>e?e.toUpperCase():"")))),N=/\B([A-Z])/g,P=O((t=>t.replace(N,"-$1").toLowerCase())),L=O((t=>t.charAt(0).toUpperCase()+t.slice(1))),B=O((t=>t?`on${L(t)}`:"")),U=(t,e)=>!Object.is(t,e),F=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},V=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=t=>{const e=_(t)?Number(t):NaN;return isNaN(e)?t:e};let j;const W=()=>j||(j="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const G="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",$=r(G);function q(t){if(m(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=_(r)?K(r):q(r);if(i)for(const t in i)e[t]=i[t]}return e}return _(t)||E(t)?t:void 0}const Y=/;(?![^(]*\))/g,X=/:([^]+)/,Z=/\/\*[^]*?\*\//g;function K(t){const e={};return t.replace(Z,"").split(Y).forEach((t=>{if(t){const n=t.split(X);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function J(t){let e="";if(_(t))e=t;else if(m(t))for(let n=0;n<t.length;n++){const r=J(t[n]);r&&(e+=r+" ")}else if(E(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Q(t){if(!t)return null;let{class:e,style:n}=t;return e&&!_(e)&&(t.class=J(e)),n&&(t.style=q(n)),t}const tt="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",et=r(tt);function nt(t){return!!t||""===t}function rt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=it(t[r],e[r]);return n}function it(t,e){if(t===e)return!0;let n=v(t),r=v(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=S(t),r=S(e),n||r)return t===e;if(n=m(t),r=m(e),n||r)return!(!n||!r)&&rt(t,e);if(n=E(t),r=E(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!it(t[n],e[n]))return!1}}return String(t)===String(e)}function ot(t,e){return t.findIndex((t=>it(t,e)))}const st=t=>_(t)?t:null==t?"":m(t)||E(t)&&(t.toString===x||!b(t.toString))?JSON.stringify(t,at,2):String(t),at=(t,e)=>e&&e.__v_isRef?at(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:y(e)?{[`Set(${e.size})`]:[...e.values()]}:!E(e)||m(e)||M(e)?e:String(e)},1271:function(t,e,n){"use strict";n(3767),n(8585),n(8696),n(7658),e.byteLength=u,e.toByteArray=d,e.fromByteArray=m;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function u(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function h(t,e,n){return 3*(e+n)/4-n}function d(t){var e,n,r=c(t),s=r[0],a=r[1],l=new o(h(t,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function p(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(f(r));return i.join("")}function m(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,l=n-i;a<l;a+=s)o.push(p(t,a,a+s>l?l:a+s));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7336:function(t,e,n){"use strict";const r=n(411);function i(t){return"function"===typeof t.stream?r(t.stream()):r(new Response(t).body)}t.exports=i},227:function(t,e,n){"use strict";n.d(e,{ZP:function(){return jm}});var r={};n.r(r),n.d(r,{afterMain:function(){return l.wX},afterRead:function(){return l.r5},afterWrite:function(){return l.MS},applyStyles:function(){return c.Z},arrow:function(){return u.Z},auto:function(){return l.d7},basePlacements:function(){return l.mv},beforeMain:function(){return l.XM},beforeRead:function(){return l.N7},beforeWrite:function(){return l.iv},bottom:function(){return l.I},clippingParents:function(){return l.zV},computeStyles:function(){return h.Z},createPopper:function(){return b.fi},createPopperBase:function(){return v.fi},createPopperLite:function(){return S},detectOverflow:function(){return w.Z},end:function(){return l.ut},eventListeners:function(){return d.Z},flip:function(){return f.Z},hide:function(){return p.Z},left:function(){return l.t$},main:function(){return l.DH},modifierPhases:function(){return l.xs},offset:function(){return m.Z},placements:function(){return l.Ct},popper:function(){return l.k5},popperGenerator:function(){return v.kZ},popperOffsets:function(){return g.Z},preventOverflow:function(){return y.Z},read:function(){return l.ij},reference:function(){return l.YP},right:function(){return l.F2},start:function(){return l.BL},top:function(){return l.we},variationPlacements:function(){return l.bw},viewport:function(){return l.Pj},write:function(){return l.cW}});n(7658);var i=n(4870),o=n(3396),s=n(7139),a=n(9242),l=n(7155),c=n(3435),u=n(5120),h=n(653),d=n(7331),f=n(4539),p=n(2159),m=n(4e3),g=n(81),y=n(2674),v=n(7997),w=n(5052),b=n(8519),_=[d.Z,g.Z,h.Z,c.Z],S=(0,v.kZ)({defaultModifiers:_});
/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const E=new Map,A={set(t,e,n){E.has(t)||E.set(t,new Map);const r=E.get(t);r.has(e)||0===r.size?r.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get(t,e){return E.has(t)&&E.get(t).get(e)||null},remove(t,e){if(!E.has(t))return;const n=E.get(t);n.delete(e),0===n.size&&E.delete(t)}},x=1e6,C=1e3,T="transitionend",M=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),I=t=>null===t||void 0===t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),k=t=>{do{t+=Math.floor(Math.random()*x)}while(document.getElementById(t));return t},O=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),i=Number.parseFloat(n);return r||i?(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*C):0},R=t=>{t.dispatchEvent(new Event(T))},D=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),N=t=>D(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(M(t)):null,P=t=>{if(!D(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},L=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),B=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?B(t.parentNode):null},U=()=>{},F=t=>{t.offsetHeight},z=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,V=[],H=t=>{"loading"===document.readyState?(V.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of V)t()})),V.push(t)):t()},j=()=>"rtl"===document.documentElement.dir,W=t=>{H((()=>{const e=z();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}}))},G=(t,e=[],n=t)=>"function"===typeof t?t(...e):n,$=(t,e,n=!0)=>{if(!n)return void G(t);const r=5,i=O(e)+r;let o=!1;const s=({target:n})=>{n===e&&(o=!0,e.removeEventListener(T,s),G(t))};e.addEventListener(T,s),setTimeout((()=>{o||R(e)}),i)},q=(t,e,n,r)=>{const i=t.length;let o=t.indexOf(e);return-1===o?!n&&r?t[i-1]:t[0]:(o+=n?1:-1,r&&(o=(o+i)%i),t[Math.max(0,Math.min(o,i-1))])},Y=/[^.]*(?=\..*)\.|.*/,X=/\..*/,Z=/::\d+$/,K={};let J=1;const Q={mouseenter:"mouseover",mouseleave:"mouseout"},tt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function et(t,e){return e&&`${e}::${J++}`||t.uidEvent||J++}function nt(t){const e=et(t);return t.uidEvent=e,K[e]=K[e]||{},K[e]}function rt(t,e){return function n(r){return dt(r,{delegateTarget:t}),n.oneOff&&ht.off(t,r.type,e),e.apply(t,[r])}}function it(t,e,n){return function r(i){const o=t.querySelectorAll(e);for(let{target:s}=i;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return dt(i,{delegateTarget:s}),r.oneOff&&ht.off(t,i.type,e,n),n.apply(s,[i])}}function ot(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function st(t,e,n){const r="string"===typeof e,i=r?n:e||n;let o=ut(t);return tt.has(o)||(o=t),[r,i,o]}function at(t,e,n,r,i){if("string"!==typeof e||!t)return;let[o,s,a]=st(e,n,r);if(e in Q){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=nt(t),c=l[a]||(l[a]={}),u=ot(c,s,o?n:null);if(u)return void(u.oneOff=u.oneOff&&i);const h=et(s,e.replace(Y,"")),d=o?it(t,n,s):rt(t,s);d.delegationSelector=o?n:null,d.callable=s,d.oneOff=i,d.uidEvent=h,c[h]=d,t.addEventListener(a,d,o)}function lt(t,e,n,r,i){const o=ot(e[n],r,i);o&&(t.removeEventListener(n,o,Boolean(i)),delete e[n][o.uidEvent])}function ct(t,e,n,r){const i=e[n]||{};for(const[o,s]of Object.entries(i))o.includes(r)&&lt(t,e,n,s.callable,s.delegationSelector)}function ut(t){return t=t.replace(X,""),Q[t]||t}const ht={on(t,e,n,r){at(t,e,n,r,!1)},one(t,e,n,r){at(t,e,n,r,!0)},off(t,e,n,r){if("string"!==typeof e||!t)return;const[i,o,s]=st(e,n,r),a=s!==e,l=nt(t),c=l[s]||{},u=e.startsWith(".");if("undefined"===typeof o){if(u)for(const n of Object.keys(l))ct(t,l,n,e.slice(1));for(const[n,r]of Object.entries(c)){const i=n.replace(Z,"");a&&!e.includes(i)||lt(t,l,s,r.callable,r.delegationSelector)}}else{if(!Object.keys(c).length)return;lt(t,l,s,o,i?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const r=z(),i=ut(e),o=e!==i;let s=null,a=!0,l=!0,c=!1;o&&r&&(s=r.Event(e,n),r(t).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),c=s.isDefaultPrevented());const u=dt(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&s&&s.preventDefault(),u}};function dt(t,e={}){for(const[r,i]of Object.entries(e))try{t[r]=i}catch(n){Object.defineProperty(t,r,{configurable:!0,get(){return i}})}return t}function ft(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function pt(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const mt={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${pt(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${pt(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const r of n){let n=r.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=ft(t.dataset[r])}return e},getDataAttribute(t,e){return ft(t.getAttribute(`data-bs-${pt(e)}`))}};class gt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=D(e)?mt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...D(e)?mt.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,r]of Object.entries(e)){const e=t[n],i=D(e)?"element":I(e);if(!new RegExp(r).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${i}" but expected type "${r}".`)}}}const yt="5.3.2";class vt extends gt{constructor(t,e){super(),t=N(t),t&&(this._element=t,this._config=this._getConfig(e),A.set(this._element,this.constructor.DATA_KEY,this))}dispose(){A.remove(this._element,this.constructor.DATA_KEY),ht.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){$(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return A.get(N(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return yt}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const wt=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?M(n.trim()):null}return e},bt={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const n=[];let r=t.parentNode.closest(e);while(r)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;while(n){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;while(n){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!L(t)&&P(t)))},getSelectorFromElement(t){const e=wt(t);return e&&bt.findOne(e)?e:null},getElementFromSelector(t){const e=wt(t);return e?bt.findOne(e):null},getMultipleElementsFromSelector(t){const e=wt(t);return e?bt.find(e):[]}},_t=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;ht.on(document,n,`[data-bs-dismiss="${r}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),L(this))return;const i=bt.getElementFromSelector(this)||this.closest(`.${r}`),o=t.getOrCreateInstance(i);o[e]()}))},St="alert",Et="bs.alert",At=`.${Et}`,xt=`close${At}`,Ct=`closed${At}`,Tt="fade",Mt="show";class It extends vt{static get NAME(){return St}close(){const t=ht.trigger(this._element,xt);if(t.defaultPrevented)return;this._element.classList.remove(Mt);const e=this._element.classList.contains(Tt);this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),ht.trigger(this._element,Ct),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=It.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}_t(It,"close"),W(It);const kt="button",Ot="bs.button",Rt=`.${Ot}`,Dt=".data-api",Nt="active",Pt='[data-bs-toggle="button"]',Lt=`click${Rt}${Dt}`;class Bt extends vt{static get NAME(){return kt}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Nt))}static jQueryInterface(t){return this.each((function(){const e=Bt.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}ht.on(document,Lt,Pt,(t=>{t.preventDefault();const e=t.target.closest(Pt),n=Bt.getOrCreateInstance(e);n.toggle()})),W(Bt);const Ut="swipe",Ft=".bs.swipe",zt=`touchstart${Ft}`,Vt=`touchmove${Ft}`,Ht=`touchend${Ft}`,jt=`pointerdown${Ft}`,Wt=`pointerup${Ft}`,Gt="touch",$t="pen",qt="pointer-event",Yt=40,Xt={endCallback:null,leftCallback:null,rightCallback:null},Zt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Kt extends gt{constructor(t,e){super(),this._element=t,t&&Kt.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Xt}static get DefaultType(){return Zt}static get NAME(){return Ut}dispose(){ht.off(this._element,Ft)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),G(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Yt)return;const e=t/this._deltaX;this._deltaX=0,e&&G(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ht.on(this._element,jt,(t=>this._start(t))),ht.on(this._element,Wt,(t=>this._end(t))),this._element.classList.add(qt)):(ht.on(this._element,zt,(t=>this._start(t))),ht.on(this._element,Vt,(t=>this._move(t))),ht.on(this._element,Ht,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===$t||t.pointerType===Gt)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Jt="carousel",Qt="bs.carousel",te=`.${Qt}`,ee=".data-api",ne="ArrowLeft",re="ArrowRight",ie=500,oe="next",se="prev",ae="left",le="right",ce=`slide${te}`,ue=`slid${te}`,he=`keydown${te}`,de=`mouseenter${te}`,fe=`mouseleave${te}`,pe=`dragstart${te}`,me=`load${te}${ee}`,ge=`click${te}${ee}`,ye="carousel",ve="active",we="slide",be="carousel-item-end",_e="carousel-item-start",Se="carousel-item-next",Ee="carousel-item-prev",Ae=".active",xe=".carousel-item",Ce=Ae+xe,Te=".carousel-item img",Me=".carousel-indicators",Ie="[data-bs-slide], [data-bs-slide-to]",ke='[data-bs-ride="carousel"]',Oe={[ne]:le,[re]:ae},Re={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},De={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ne extends vt{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=bt.findOne(Me,this._element),this._addEventListeners(),this._config.ride===ye&&this.cycle()}static get Default(){return Re}static get DefaultType(){return De}static get NAME(){return Jt}next(){this._slide(oe)}nextWhenVisible(){!document.hidden&&P(this._element)&&this.next()}prev(){this._slide(se)}pause(){this._isSliding&&R(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ht.one(this._element,ue,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void ht.one(this._element,ue,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const r=t>n?oe:se;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&ht.on(this._element,he,(t=>this._keydown(t))),"hover"===this._config.pause&&(ht.on(this._element,de,(()=>this.pause())),ht.on(this._element,fe,(()=>this._maybeEnableCycle()))),this._config.touch&&Kt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of bt.find(Te,this._element))ht.on(n,pe,(t=>t.preventDefault()));const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),ie+this._config.interval))},e={leftCallback:()=>this._slide(this._directionToOrder(ae)),rightCallback:()=>this._slide(this._directionToOrder(le)),endCallback:t};this._swipeHelper=new Kt(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Oe[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=bt.findOne(Ae,this._indicatorsElement);e.classList.remove(ve),e.removeAttribute("aria-current");const n=bt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(ve),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),r=t===oe,i=e||q(this._getItems(),n,r,this._config.wrap);if(i===n)return;const o=this._getItemIndex(i),s=e=>ht.trigger(this._element,e,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o}),a=s(ce);if(a.defaultPrevented)return;if(!n||!i)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=i;const c=r?_e:be,u=r?Se:Ee;i.classList.add(u),F(i),n.classList.add(c),i.classList.add(c);const h=()=>{i.classList.remove(c,u),i.classList.add(ve),n.classList.remove(ve,u,c),this._isSliding=!1,s(ue)};this._queueCallback(h,n,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(we)}_getActive(){return bt.findOne(Ce,this._element)}_getItems(){return bt.find(xe,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return j()?t===ae?se:oe:t===ae?oe:se}_orderToDirection(t){return j()?t===se?ae:le:t===se?le:ae}static jQueryInterface(t){return this.each((function(){const e=Ne.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}ht.on(document,ge,Ie,(function(t){const e=bt.getElementFromSelector(this);if(!e||!e.classList.contains(ye))return;t.preventDefault();const n=Ne.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");return r?(n.to(r),void n._maybeEnableCycle()):"next"===mt.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),ht.on(window,me,(()=>{const t=bt.find(ke);for(const e of t)Ne.getOrCreateInstance(e)})),W(Ne);const Pe="collapse",Le="bs.collapse",Be=`.${Le}`,Ue=".data-api",Fe=`show${Be}`,ze=`shown${Be}`,Ve=`hide${Be}`,He=`hidden${Be}`,je=`click${Be}${Ue}`,We="show",Ge="collapse",$e="collapsing",qe="collapsed",Ye=`:scope .${Ge} .${Ge}`,Xe="collapse-horizontal",Ze="width",Ke="height",Je=".collapse.show, .collapse.collapsing",Qe='[data-bs-toggle="collapse"]',tn={parent:null,toggle:!0},en={parent:"(null|element)",toggle:"boolean"};class nn extends vt{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=bt.find(Qe);for(const r of n){const t=bt.getSelectorFromElement(r),e=bt.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tn}static get DefaultType(){return en}static get NAME(){return Pe}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Je).filter((t=>t!==this._element)).map((t=>nn.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=ht.trigger(this._element,Fe);if(e.defaultPrevented)return;for(const s of t)s.hide();const n=this._getDimension();this._element.classList.remove(Ge),this._element.classList.add($e),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove($e),this._element.classList.add(Ge,We),this._element.style[n]="",ht.trigger(this._element,ze)},i=n[0].toUpperCase()+n.slice(1),o=`scroll${i}`;this._queueCallback(r,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=ht.trigger(this._element,Ve);if(t.defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,F(this._element),this._element.classList.add($e),this._element.classList.remove(Ge,We);for(const r of this._triggerArray){const t=bt.getElementFromSelector(r);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove($e),this._element.classList.add(Ge),ht.trigger(this._element,He)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(We)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=N(t.parent),t}_getDimension(){return this._element.classList.contains(Xe)?Ze:Ke}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Qe);for(const e of t){const t=bt.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=bt.find(Ye,this._config.parent);return bt.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(qe,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=nn.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}ht.on(document,je,Qe,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of bt.getMultipleElementsFromSelector(this))nn.getOrCreateInstance(e,{toggle:!1}).toggle()})),W(nn);const rn="dropdown",on="bs.dropdown",sn=`.${on}`,an=".data-api",ln="Escape",cn="Tab",un="ArrowUp",hn="ArrowDown",dn=2,fn=`hide${sn}`,pn=`hidden${sn}`,mn=`show${sn}`,gn=`shown${sn}`,yn=`click${sn}${an}`,vn=`keydown${sn}${an}`,wn=`keyup${sn}${an}`,bn="show",_n="dropup",Sn="dropend",En="dropstart",An="dropup-center",xn="dropdown-center",Cn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Tn=`${Cn}.${bn}`,Mn=".dropdown-menu",In=".navbar",kn=".navbar-nav",On=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Rn=j()?"top-end":"top-start",Dn=j()?"top-start":"top-end",Nn=j()?"bottom-end":"bottom-start",Pn=j()?"bottom-start":"bottom-end",Ln=j()?"left-start":"right-start",Bn=j()?"right-start":"left-start",Un="top",Fn="bottom",zn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Vn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Hn extends vt{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=bt.next(this._element,Mn)[0]||bt.prev(this._element,Mn)[0]||bt.findOne(Mn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return zn}static get DefaultType(){return Vn}static get NAME(){return rn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(L(this._element)||this._isShown())return;const t={relatedTarget:this._element},e=ht.trigger(this._element,mn,t);if(!e.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(kn))for(const t of[].concat(...document.body.children))ht.on(t,"mouseover",U);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(bn),this._element.classList.add(bn),ht.trigger(this._element,gn,t)}}hide(){if(L(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const e=ht.trigger(this._element,fn,t);if(!e.defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))ht.off(t,"mouseover",U);this._popper&&this._popper.destroy(),this._menu.classList.remove(bn),this._element.classList.remove(bn),this._element.setAttribute("aria-expanded","false"),mt.removeDataAttribute(this._menu,"popper"),ht.trigger(this._element,pn,t)}}_getConfig(t){if(t=super._getConfig(t),"object"===typeof t.reference&&!D(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${rn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if("undefined"===typeof r)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:D(this._config.reference)?t=N(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=b.fi(t,this._menu,e)}_isShown(){return this._menu.classList.contains(bn)}_getPlacement(){const t=this._parent;if(t.classList.contains(Sn))return Ln;if(t.classList.contains(En))return Bn;if(t.classList.contains(An))return Un;if(t.classList.contains(xn))return Fn;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains(_n)?e?Dn:Rn:e?Pn:Nn}_detectNavbar(){return null!==this._element.closest(In)}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(mt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...G(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=bt.find(On,this._menu).filter((t=>P(t)));n.length&&q(n,e,t===hn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Hn.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t.button===dn||"keyup"===t.type&&t.key!==cn)return;const e=bt.find(Tn);for(const n of e){const e=Hn.getInstance(n);if(!e||!1===e._config.autoClose)continue;const r=t.composedPath(),i=r.includes(e._menu);if(r.includes(e._element)||"inside"===e._config.autoClose&&!i||"outside"===e._config.autoClose&&i)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&t.key===cn||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===ln,r=[un,hn].includes(t.key);if(!r&&!n)return;if(e&&!n)return;t.preventDefault();const i=this.matches(Cn)?this:bt.prev(this,Cn)[0]||bt.next(this,Cn)[0]||bt.findOne(Cn,t.delegateTarget.parentNode),o=Hn.getOrCreateInstance(i);if(r)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),i.focus())}}ht.on(document,vn,Cn,Hn.dataApiKeydownHandler),ht.on(document,vn,Mn,Hn.dataApiKeydownHandler),ht.on(document,yn,Hn.clearMenus),ht.on(document,wn,Hn.clearMenus),ht.on(document,yn,Cn,(function(t){t.preventDefault(),Hn.getOrCreateInstance(this).toggle()})),W(Hn);const jn="backdrop",Wn="fade",Gn="show",$n=`mousedown.bs.${jn}`,qn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Yn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Xn extends gt{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return qn}static get DefaultType(){return Yn}static get NAME(){return jn}show(t){if(!this._config.isVisible)return void G(t);this._append();const e=this._getElement();this._config.isAnimated&&F(e),e.classList.add(Gn),this._emulateAnimation((()=>{G(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Gn),this._emulateAnimation((()=>{this.dispose(),G(t)}))):G(t)}dispose(){this._isAppended&&(ht.off(this._element,$n),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Wn),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=N(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),ht.on(t,$n,(()=>{G(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){$(t,this._getElement(),this._config.isAnimated)}}const Zn="focustrap",Kn="bs.focustrap",Jn=`.${Kn}`,Qn=`focusin${Jn}`,tr=`keydown.tab${Jn}`,er="Tab",nr="forward",rr="backward",ir={autofocus:!0,trapElement:null},or={autofocus:"boolean",trapElement:"element"};class sr extends gt{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ir}static get DefaultType(){return or}static get NAME(){return Zn}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ht.off(document,Jn),ht.on(document,Qn,(t=>this._handleFocusin(t))),ht.on(document,tr,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ht.off(document,Jn))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=bt.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===rr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===er&&(this._lastTabNavDirection=t.shiftKey?rr:nr)}}const ar=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",lr=".sticky-top",cr="padding-right",ur="margin-right";class hr{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,cr,(e=>e+t)),this._setElementAttributes(ar,cr,(e=>e+t)),this._setElementAttributes(lr,ur,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,cr),this._resetElementAttributes(ar,cr),this._resetElementAttributes(lr,ur)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const r=this.getWidth(),i=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+r)return;this._saveInitialAttribute(t,e);const i=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(i))}px`)};this._applyManipulationCallback(t,i)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&mt.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=t=>{const n=mt.getDataAttribute(t,e);null!==n?(mt.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(D(t))e(t);else for(const n of bt.find(t,this._element))e(n)}}const dr="modal",fr="bs.modal",pr=`.${fr}`,mr=".data-api",gr="Escape",yr=`hide${pr}`,vr=`hidePrevented${pr}`,wr=`hidden${pr}`,br=`show${pr}`,_r=`shown${pr}`,Sr=`resize${pr}`,Er=`click.dismiss${pr}`,Ar=`mousedown.dismiss${pr}`,xr=`keydown.dismiss${pr}`,Cr=`click${pr}${mr}`,Tr="modal-open",Mr="fade",Ir="show",kr="modal-static",Or=".modal.show",Rr=".modal-dialog",Dr=".modal-body",Nr='[data-bs-toggle="modal"]',Pr={backdrop:!0,focus:!0,keyboard:!0},Lr={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Br extends vt{constructor(t,e){super(t,e),this._dialog=bt.findOne(Rr,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new hr,this._addEventListeners()}static get Default(){return Pr}static get DefaultType(){return Lr}static get NAME(){return dr}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=ht.trigger(this._element,br,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Tr),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=ht.trigger(this._element,yr);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ir),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){ht.off(window,pr),ht.off(this._dialog,pr),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Xn({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new sr({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=bt.findOne(Dr,this._dialog);e&&(e.scrollTop=0),F(this._element),this._element.classList.add(Ir);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ht.trigger(this._element,_r,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){ht.on(this._element,xr,(t=>{t.key===gr&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),ht.on(window,Sr,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),ht.on(this._element,Ar,(t=>{ht.one(this._element,Er,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(Tr),this._resetAdjustments(),this._scrollBar.reset(),ht.trigger(this._element,wr)}))}_isAnimated(){return this._element.classList.contains(Mr)}_triggerBackdropTransition(){const t=ht.trigger(this._element,vr);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(kr)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(kr),this._queueCallback((()=>{this._element.classList.remove(kr),this._queueCallback((()=>{this._element.style.overflowY=n}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=j()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=j()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Br.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}ht.on(document,Cr,Nr,(function(t){const e=bt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),ht.one(e,br,(t=>{t.defaultPrevented||ht.one(e,wr,(()=>{P(this)&&this.focus()}))}));const n=bt.findOne(Or);n&&Br.getInstance(n).hide();const r=Br.getOrCreateInstance(e);r.toggle(this)})),_t(Br),W(Br);const Ur="offcanvas",Fr="bs.offcanvas",zr=`.${Fr}`,Vr=".data-api",Hr=`load${zr}${Vr}`,jr="Escape",Wr="show",Gr="showing",$r="hiding",qr="offcanvas-backdrop",Yr=".offcanvas.show",Xr=`show${zr}`,Zr=`shown${zr}`,Kr=`hide${zr}`,Jr=`hidePrevented${zr}`,Qr=`hidden${zr}`,ti=`resize${zr}`,ei=`click${zr}${Vr}`,ni=`keydown.dismiss${zr}`,ri='[data-bs-toggle="offcanvas"]',ii={backdrop:!0,keyboard:!0,scroll:!1},oi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class si extends vt{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ii}static get DefaultType(){return oi}static get NAME(){return Ur}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;const e=ht.trigger(this._element,Xr,{relatedTarget:t});if(e.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new hr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Gr);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Wr),this._element.classList.remove(Gr),ht.trigger(this._element,Zr,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const t=ht.trigger(this._element,Kr);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add($r),this._backdrop.hide();const e=()=>{this._element.classList.remove(Wr,$r),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new hr).reset(),ht.trigger(this._element,Qr)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{"static"!==this._config.backdrop?this.hide():ht.trigger(this._element,Jr)},e=Boolean(this._config.backdrop);return new Xn({className:qr,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new sr({trapElement:this._element})}_addEventListeners(){ht.on(this._element,ni,(t=>{t.key===jr&&(this._config.keyboard?this.hide():ht.trigger(this._element,Jr))}))}static jQueryInterface(t){return this.each((function(){const e=si.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}ht.on(document,ei,ri,(function(t){const e=bt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),L(this))return;ht.one(e,Qr,(()=>{P(this)&&this.focus()}));const n=bt.findOne(Yr);n&&n!==e&&si.getInstance(n).hide();const r=si.getOrCreateInstance(e);r.toggle(this)})),ht.on(window,Hr,(()=>{for(const t of bt.find(Yr))si.getOrCreateInstance(t).show()})),ht.on(window,ti,(()=>{for(const t of bt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&si.getOrCreateInstance(t).hide()})),_t(si),W(si);const ai=/^aria-[\w-]*$/i,li={"*":["class","dir","id","lang","role",ai],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ci=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ui=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,hi=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!ci.has(n)||Boolean(ui.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))};function di(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const r=new window.DOMParser,i=r.parseFromString(t,"text/html"),o=[].concat(...i.body.querySelectorAll("*"));for(const s of o){const t=s.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){s.remove();continue}const n=[].concat(...s.attributes),r=[].concat(e["*"]||[],e[t]||[]);for(const e of n)hi(e,r)||s.removeAttribute(e.nodeName)}return i.body.innerHTML}const fi="TemplateFactory",pi={allowList:li,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},mi={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},gi={entry:"(string|element|function|null)",selector:"(string|element)"};class yi extends gt{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return pi}static get DefaultType(){return mi}static get NAME(){return fi}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(t,i,r);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},gi)}_setContent(t,e,n){const r=bt.findOne(n,t);r&&(e=this._resolvePossibleFunction(e),e?D(e)?this._putElementInTemplate(N(e),r):this._config.html?r.innerHTML=this._maybeSanitize(e):r.textContent=e:r.remove())}_maybeSanitize(t){return this._config.sanitize?di(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return G(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const vi="tooltip",wi=new Set(["sanitize","allowList","sanitizeFn"]),bi="fade",_i="modal",Si="show",Ei=".tooltip-inner",Ai=`.${_i}`,xi="hide.bs.modal",Ci="hover",Ti="focus",Mi="click",Ii="manual",ki="hide",Oi="hidden",Ri="show",Di="shown",Ni="inserted",Pi="click",Li="focusin",Bi="focusout",Ui="mouseenter",Fi="mouseleave",zi={AUTO:"auto",TOP:"top",RIGHT:j()?"left":"right",BOTTOM:"bottom",LEFT:j()?"right":"left"},Vi={allowList:li,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Hi={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ji extends vt{constructor(t,e){if("undefined"===typeof r)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Vi}static get DefaultType(){return Hi}static get NAME(){return vi}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ht.off(this._element.closest(Ai),xi,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=ht.trigger(this._element,this.constructor.eventName(Ri)),e=B(this._element),n=(e||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(r),ht.trigger(this._element,this.constructor.eventName(Ni))),this._popper=this._createPopper(r),r.classList.add(Si),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))ht.on(s,"mouseover",U);const o=()=>{ht.trigger(this._element,this.constructor.eventName(Di)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=ht.trigger(this._element,this.constructor.eventName(ki));if(t.defaultPrevented)return;const e=this._getTipElement();if(e.classList.remove(Si),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))ht.off(r,"mouseover",U);this._activeTrigger[Mi]=!1,this._activeTrigger[Ti]=!1,this._activeTrigger[Ci]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ht.trigger(this._element,this.constructor.eventName(Oi)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(bi,Si),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=k(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(bi),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new yi({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ei]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(bi)}_isShown(){return this.tip&&this.tip.classList.contains(Si)}_createPopper(t){const e=G(this._config.placement,[this,t,this._element]),n=zi[e.toUpperCase()];return b.fi(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return G(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...G(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)ht.on(this._element,this.constructor.eventName(Pi),this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e.toggle()}));else if(e!==Ii){const t=e===Ci?this.constructor.eventName(Ui):this.constructor.eventName(Li),n=e===Ci?this.constructor.eventName(Fi):this.constructor.eventName(Bi);ht.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?Ti:Ci]=!0,e._enter()})),ht.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?Ti:Ci]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},ht.on(this._element.closest(Ai),xi,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=mt.getDataAttributes(this._element);for(const n of Object.keys(e))wi.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:N(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=ji.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}W(ji);const Wi="popover",Gi=".popover-header",$i=".popover-body",qi={...ji.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Yi={...ji.DefaultType,content:"(null|string|element|function)"};class Xi extends ji{static get Default(){return qi}static get DefaultType(){return Yi}static get NAME(){return Wi}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Gi]:this._getTitle(),[$i]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Xi.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}W(Xi);const Zi="scrollspy",Ki="bs.scrollspy",Ji=`.${Ki}`,Qi=".data-api",to=`activate${Ji}`,eo=`click${Ji}`,no=`load${Ji}${Qi}`,ro="dropdown-item",io="active",oo='[data-bs-spy="scroll"]',so="[href]",ao=".nav, .list-group",lo=".nav-link",co=".nav-item",uo=".list-group-item",ho=`${lo}, ${co} > ${lo}, ${uo}`,fo=".dropdown",po=".dropdown-toggle",mo={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},go={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class yo extends vt{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return mo}static get DefaultType(){return go}static get NAME(){return Zi}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=N(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ht.off(this._config.target,eo),ht.on(this._config.target,eo,so,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:r,behavior:"smooth"});n.scrollTop=r}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&t){if(n(o),!r)return}else i||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=bt.find(so,this._config.target);for(const e of t){if(!e.hash||L(e))continue;const t=bt.findOne(decodeURI(e.hash),this._element);P(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(io),this._activateParents(t),ht.trigger(this._element,to,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(ro))bt.findOne(po,t.closest(fo)).classList.add(io);else for(const e of bt.parents(t,ao))for(const t of bt.prev(e,ho))t.classList.add(io)}_clearActiveClass(t){t.classList.remove(io);const e=bt.find(`${so}.${io}`,t);for(const n of e)n.classList.remove(io)}static jQueryInterface(t){return this.each((function(){const e=yo.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ht.on(window,no,(()=>{for(const t of bt.find(oo))yo.getOrCreateInstance(t)})),W(yo);const vo="tab",wo="bs.tab",bo=`.${wo}`,_o=`hide${bo}`,So=`hidden${bo}`,Eo=`show${bo}`,Ao=`shown${bo}`,xo=`click${bo}`,Co=`keydown${bo}`,To=`load${bo}`,Mo="ArrowLeft",Io="ArrowRight",ko="ArrowUp",Oo="ArrowDown",Ro="Home",Do="End",No="active",Po="fade",Lo="show",Bo="dropdown",Uo=".dropdown-toggle",Fo=".dropdown-menu",zo=`:not(${Uo})`,Vo='.list-group, .nav, [role="tablist"]',Ho=".nav-item, .list-group-item",jo=`.nav-link${zo}, .list-group-item${zo}, [role="tab"]${zo}`,Wo='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Go=`${jo}, ${Wo}`,$o=`.${No}[data-bs-toggle="tab"], .${No}[data-bs-toggle="pill"], .${No}[data-bs-toggle="list"]`;class qo extends vt{constructor(t){super(t),this._parent=this._element.closest(Vo),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ht.on(this._element,Co,(t=>this._keydown(t))))}static get NAME(){return vo}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?ht.trigger(e,_o,{relatedTarget:t}):null,r=ht.trigger(t,Eo,{relatedTarget:e});r.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(No),this._activate(bt.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),ht.trigger(t,Ao,{relatedTarget:e})):t.classList.add(Lo)};this._queueCallback(n,t,t.classList.contains(Po))}_deactivate(t,e){if(!t)return;t.classList.remove(No),t.blur(),this._deactivate(bt.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),ht.trigger(t,So,{relatedTarget:e})):t.classList.remove(Lo)};this._queueCallback(n,t,t.classList.contains(Po))}_keydown(t){if(![Mo,Io,ko,Oo,Ro,Do].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!L(t)));let n;if([Ro,Do].includes(t.key))n=e[t.key===Ro?0:e.length-1];else{const r=[Io,Oo].includes(t.key);n=q(e,t.target,r,!0)}n&&(n.focus({preventScroll:!0}),qo.getOrCreateInstance(n).show())}_getChildren(){return bt.find(Go,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=bt.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(Bo))return;const r=(t,r)=>{const i=bt.findOne(t,n);i&&i.classList.toggle(r,e)};r(Uo,No),r(Fo,Lo),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(No)}_getInnerElement(t){return t.matches(Go)?t:bt.findOne(Go,t)}_getOuterElement(t){return t.closest(Ho)||t}static jQueryInterface(t){return this.each((function(){const e=qo.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}ht.on(document,xo,Wo,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),L(this)||qo.getOrCreateInstance(this).show()})),ht.on(window,To,(()=>{for(const t of bt.find($o))qo.getOrCreateInstance(t)})),W(qo);const Yo="toast",Xo="bs.toast",Zo=`.${Xo}`,Ko=`mouseover${Zo}`,Jo=`mouseout${Zo}`,Qo=`focusin${Zo}`,ts=`focusout${Zo}`,es=`hide${Zo}`,ns=`hidden${Zo}`,rs=`show${Zo}`,is=`shown${Zo}`,os="fade",ss="hide",as="show",ls="showing",cs={animation:"boolean",autohide:"boolean",delay:"number"},us={animation:!0,autohide:!0,delay:5e3};class hs extends vt{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return us}static get DefaultType(){return cs}static get NAME(){return Yo}show(){const t=ht.trigger(this._element,rs);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(os);const e=()=>{this._element.classList.remove(ls),ht.trigger(this._element,is),this._maybeScheduleHide()};this._element.classList.remove(ss),F(this._element),this._element.classList.add(as,ls),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=ht.trigger(this._element,es);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(ss),this._element.classList.remove(ls,as),ht.trigger(this._element,ns)};this._element.classList.add(ls),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(as),super.dispose()}isShown(){return this._element.classList.contains(as)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){ht.on(this._element,Ko,(t=>this._onInteraction(t,!0))),ht.on(this._element,Jo,(t=>this._onInteraction(t,!1))),ht.on(this._element,Qo,(t=>this._onInteraction(t,!0))),ht.on(this._element,ts,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=hs.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}_t(hs),W(hs);var ds,fs=Object.defineProperty,ps=(t,e,n)=>e in t?fs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ms=(t,e,n)=>(ps(t,"symbol"!=typeof e?e+"":e,n),n),gs=Object.defineProperty,ys=Object.defineProperties,vs=Object.getOwnPropertyDescriptors,ws=Object.getOwnPropertySymbols,bs=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable,Ss=(t,e,n)=>e in t?gs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Es=(t,e)=>{for(var n in e||(e={}))bs.call(e,n)&&Ss(t,n,e[n]);if(ws)for(var n of ws(e))_s.call(e,n)&&Ss(t,n,e[n]);return t},As=(t,e)=>ys(t,vs(e));function xs(t,e){var n;const r=(0,i.XI)();return(0,o.m0)((()=>{r.value=t()}),As(Es({},e),{flush:null!=(n=null==e?void 0:e.flush)?n:"sync"})),(0,i.OT)(r)}const Cs=typeof window<"u",Ts=t=>"function"==typeof t,Ms=t=>"string"==typeof t,Is=()=>{};function ks(t){return"function"==typeof t?t():(0,i.SU)(t)}function Os(t,e){function n(...n){t((()=>e.apply(this,n)),{fn:e,thisArg:this,args:n})}return n}Cs&&(null==(ds=null==window?void 0:window.navigator)?void 0:ds.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const Rs=t=>t();function Ds(t=Rs){const e=(0,i.iH)(!0);function n(){e.value=!1}function r(){e.value=!0}return{isActive:e,pause:n,resume:r,eventFilter:(...n)=>{e.value&&t(...n)}}}function Ns(t){return t}function Ps(t){return!!(0,i.nZ)()&&((0,i.EB)(t),!0)}function Ls(t){return"function"==typeof t?(0,o.Fl)(t):(0,i.iH)(t)}function Bs(t,e=!0){(0,o.FN)()?(0,o.bv)(t):e?t():(0,o.Y3)(t)}function Us(t,e=1e3,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n;let a=null;const l=(0,i.iH)(!1);function c(){a&&(clearInterval(a),a=null)}function u(){l.value=!1,c()}function h(){(0,i.SU)(e)<=0||(l.value=!0,s&&t(),c(),a=setInterval(t,ks(e)))}if(r&&Cs&&h(),(0,i.dq)(e)||Ts(e)){const t=(0,o.YP)(e,(()=>{l.value&&Cs&&h()}));Ps(t)}return Ps(u),{isActive:l,pause:u,resume:h}}var Fs=Object.getOwnPropertySymbols,zs=Object.prototype.hasOwnProperty,Vs=Object.prototype.propertyIsEnumerable,Hs=(t,e)=>{var n={};for(var r in t)zs.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&Fs)for(var r of Fs(t))e.indexOf(r)<0&&Vs.call(t,r)&&(n[r]=t[r]);return n};function js(t,e,n={}){const r=n,{eventFilter:i=Rs}=r,s=Hs(r,["eventFilter"]);return(0,o.YP)(t,Os(i,e),s)}var Ws=Object.defineProperty,Gs=Object.defineProperties,$s=Object.getOwnPropertyDescriptors,qs=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,Xs=Object.prototype.propertyIsEnumerable,Zs=(t,e,n)=>e in t?Ws(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ks=(t,e)=>{for(var n in e||(e={}))Ys.call(e,n)&&Zs(t,n,e[n]);if(qs)for(var n of qs(e))Xs.call(e,n)&&Zs(t,n,e[n]);return t},Js=(t,e)=>Gs(t,$s(e)),Qs=(t,e)=>{var n={};for(var r in t)Ys.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&qs)for(var r of qs(t))e.indexOf(r)<0&&Xs.call(t,r)&&(n[r]=t[r]);return n};function ta(t,e,n={}){const r=n,{eventFilter:i}=r,o=Qs(r,["eventFilter"]),{eventFilter:s,pause:a,resume:l,isActive:c}=Ds(i);return{stop:js(t,e,Js(Ks({},o),{eventFilter:s})),pause:a,resume:l,isActive:c}}function ea(t){var e;const n=ks(t);return null!=(e=null==n?void 0:n.$el)?e:n}const na=Cs?window:void 0;function ra(...t){let e,n,r,i;if(Ms(t[0])||Array.isArray(t[0])?([n,r,i]=t,e=na):[e,n,r,i]=t,!e)return Is;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],a=()=>{s.forEach((t=>t())),s.length=0},l=(t,e,n)=>(t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)),c=(0,o.YP)((()=>ea(e)),(t=>{a(),t&&s.push(...n.flatMap((e=>r.map((n=>l(t,e,n))))))}),{immediate:!0,flush:"post"}),u=()=>{c(),a()};return Ps(u),u}function ia(t,e=!1){const n=(0,i.iH)(),r=()=>n.value=Boolean(t());return r(),Bs(r,e),n}function oa(t,e={}){const{window:n=na}=e,r=ia((()=>n&&"matchMedia"in n&&"function"==typeof n.matchMedia));let s;const a=(0,i.iH)(!1),l=()=>{!s||("removeEventListener"in s?s.removeEventListener("change",c):s.removeListener(c))},c=()=>{!r.value||(l(),s=n.matchMedia(Ls(t).value),a.value=s.matches,"addEventListener"in s?s.addEventListener("change",c):s.addListener(c))};return(0,o.m0)(c),Ps((()=>l())),a}const sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{},aa="__vueuse_ssr_handlers__";sa[aa]=sa[aa]||{};const la=sa[aa];function ca(t,e){return la[t]||e}function ua(t){return null==t?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":"boolean"==typeof t?"boolean":"string"==typeof t?"string":"object"==typeof t?"object":Number.isNaN(t)?"any":"number"}var ha=Object.defineProperty,da=Object.getOwnPropertySymbols,fa=Object.prototype.hasOwnProperty,pa=Object.prototype.propertyIsEnumerable,ma=(t,e,n)=>e in t?ha(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ga=(t,e)=>{for(var n in e||(e={}))fa.call(e,n)&&ma(t,n,e[n]);if(da)for(var n of da(e))pa.call(e,n)&&ma(t,n,e[n]);return t};const ya={boolean:{read:t=>"true"===t,write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}};function va(t,e,n,r={}){var s;const{flush:a="pre",deep:l=!0,listenToStorageChanges:c=!0,writeDefaults:u=!0,mergeDefaults:h=!1,shallow:d,window:f=na,eventFilter:p,onError:m=(t=>{console.error(t)})}=r,g=(d?i.XI:i.iH)(e);if(!n)try{n=ca("getDefaultStorage",(()=>{var t;return null==(t=na)?void 0:t.localStorage}))()}catch(x){m(x)}if(!n)return g;const y=ks(e),v=ua(y),w=null!=(s=r.serializer)?s:ya[v],{pause:b,resume:_}=ta(g,(()=>S(g.value)),{flush:a,deep:l,eventFilter:p});return f&&c&&ra(f,"storage",A),A(),g;function S(e){try{if(null==e)n.removeItem(t);else{const r=w.write(e),i=n.getItem(t);i!==r&&(n.setItem(t,r),f&&(null==f||f.dispatchEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r,storageArea:n}))))}}catch(r){m(r)}}function E(e){const r=e?e.newValue:n.getItem(t);if(null==r)return u&&null!==y&&n.setItem(t,w.write(y)),y;if(!e&&h){const t=w.read(r);return Ts(h)?h(t,y):"object"!==v||Array.isArray(t)?t:ga(ga({},y),t)}return"string"!=typeof r?r:w.read(r)}function A(e){if(!e||e.storageArea===n){if(e&&null==e.key)return void(g.value=y);if(!e||e.key===t){b();try{g.value=E(e)}catch(r){m(r)}finally{e?(0,o.Y3)(_):_()}}}}}function wa(t){return oa("(prefers-color-scheme: dark)",t)}var ba,_a=Object.defineProperty,Sa=Object.getOwnPropertySymbols,Ea=Object.prototype.hasOwnProperty,Aa=Object.prototype.propertyIsEnumerable,xa=(t,e,n)=>e in t?_a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ca=(t,e)=>{for(var n in e||(e={}))Ea.call(e,n)&&xa(t,n,e[n]);if(Sa)for(var n of Sa(e))Aa.call(e,n)&&xa(t,n,e[n]);return t};function Ta(t={}){const{selector:e="html",attribute:n="class",initialValue:r="auto",window:s=na,storage:a,storageKey:l="vueuse-color-scheme",listenToStorageChanges:c=!0,storageRef:u,emitAuto:h}=t,d=Ca({auto:"",light:"light",dark:"dark"},t.modes||{}),f=wa({window:s}),p=(0,o.Fl)((()=>f.value?"dark":"light")),m=u||(null==l?(0,i.iH)(r):va(l,r,a,{window:s,listenToStorageChanges:c})),g=(0,o.Fl)({get(){return"auto"!==m.value||h?m.value:p.value},set(t){m.value=t}}),y=ca("updateHTMLAttrs",((t,e,n)=>{const r=null==s?void 0:s.document.querySelector(t);if(r)if("class"===e){const t=n.split(/\s/g);Object.values(d).flatMap((t=>(t||"").split(/\s/g))).filter(Boolean).forEach((e=>{t.includes(e)?r.classList.add(e):r.classList.remove(e)}))}else r.setAttribute(e,n)}));function v(t){var r;const i="auto"===t?p.value:t;y(e,n,null!=(r=d[i])?r:i)}function w(e){t.onChanged?t.onChanged(e,v):v(e)}return(0,o.YP)(g,w,{flush:"post",immediate:!0}),h&&(0,o.YP)(p,(()=>w(g.value)),{flush:"post"}),Bs((()=>w(g.value))),g}(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(ba||(ba={}));var Ma=Object.defineProperty,Ia=Object.getOwnPropertySymbols,ka=Object.prototype.hasOwnProperty,Oa=Object.prototype.propertyIsEnumerable,Ra=(t,e,n)=>e in t?Ma(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Da=(t,e)=>{for(var n in e||(e={}))ka.call(e,n)&&Ra(t,n,e[n]);if(Ia)for(var n of Ia(e))Oa.call(e,n)&&Ra(t,n,e[n]);return t};const Na={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Da({linear:Ns},Na);const Pa=t=>xs((()=>t.value?`justify-content-${t.value}`:""));class La{constructor(t,e={}){if(ms(this,"cancelable",!0),ms(this,"componentId",null),ms(this,"_defaultPrevented",!1),ms(this,"eventType",""),ms(this,"nativeEvent",null),ms(this,"_preventDefault"),ms(this,"relatedTarget",null),ms(this,"target",null),!t)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,La.Defaults,e,{eventType:t}),this._preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)}}get defaultPrevented(){return this._defaultPrevented}set defaultPrevented(t){this._defaultPrevented=t}get preventDefault(){return this._preventDefault}set preventDefault(t){this._preventDefault=t}static get Defaults(){return{cancelable:!0,componentId:null,eventType:"",nativeEvent:null,relatedTarget:null,target:null}}}class Ba extends La{constructor(t,e={}){super(t,e),ms(this,"trigger",null),Object.assign(this,La.Defaults,e,{eventType:t})}static get Defaults(){return{...super.Defaults,trigger:null}}}const Ua=t=>null!==t&&"object"==typeof t,Fa=t=>/^[0-9]*\.?[0-9]+$/.test(String(t)),za=t=>"[object Object]"===Object.prototype.toString.call(t),Va=t=>null===t,Ha=/_/g,ja=/([a-z])([A-Z])/g,Wa=/(\s|^)(\w)/g,Ga=/(\s|^)(\w)/,$a=/\s+/,qa=/^#/,Ya=/^#[A-Za-z]+[\w\-:.]*$/,Xa=/-u-.+/,Za=(t,e=2)=>"string"==typeof t?t:null==t?"":Array.isArray(t)||za(t)&&t.toString===Object.prototype.toString?JSON.stringify(t,null,e):String(t),Ka=t=>t.replace(Ha," ").replace(ja,((t,e,n)=>`${e} ${n}`)).replace(Ga,((t,e,n)=>e+n.toUpperCase())),Ja=t=>t.replace(Ha," ").replace(ja,((t,e,n)=>`${e} ${n}`)).replace(Wa,((t,e,n)=>e+n.toUpperCase())),Qa=t=>{const e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},tl=t=>`\\${t}`,el=t=>{const e=Za(t),{length:n}=e,r=e.charCodeAt(0);return e.split("").reduce(((t,i,o)=>{const s=e.charCodeAt(o);return 0===s?`${t}�`:127===s||s>=1&&s<=31||0===o&&s>=48&&s<=57||1===o&&s>=48&&s<=57&&45===r?t+tl(`${s.toString(16)} `):0===o&&45===s&&1===n?t+tl(i):s>=128||45===s||95===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?t+i:t+tl(i)}),"")},nl=typeof window<"u",rl=typeof document<"u",il=typeof navigator<"u",ol=nl&&rl&&il,sl=nl?window:{},al=(()=>{let t=!1;if(ol)try{const e={get passive(){t=!0}};sl.addEventListener("test",e,e),sl.removeEventListener("test",e,e)}catch{t=!1}return t})(),ll=typeof window<"u",cl=typeof document<"u",ul=typeof Element<"u",hl=typeof navigator<"u",dl=ll&&cl&&hl,fl=ll?window:{},pl=cl?document:{},ml=hl?navigator:{},gl=(ml.userAgent||"").toLowerCase();gl.indexOf("jsdom"),/msie|trident/.test(gl),(()=>{let t=!1;if(dl)try{const e={get passive(){return t=!0,t}};fl.addEventListener("test",e,e),fl.removeEventListener("test",e,e)}catch{t=!1}})(),dl&&("ontouchstart"in pl.documentElement||ml.maxTouchPoints),dl&&Boolean(fl.PointerEvent||fl.MSPointerEvent),dl&&"IntersectionObserver"in fl&&"IntersectionObserverEntry"in fl&&fl.IntersectionObserverEntry.prototype;const yl=ul?Element.prototype:void 0,vl=(null==yl?void 0:yl.matches)||(null==yl?void 0:yl.msMatchesSelector)||(null==yl?void 0:yl.webkitMatchesSelector),wl=t=>!(!t||t.nodeType!==Node.ELEMENT_NODE),bl=t=>wl(t)?t.getBoundingClientRect():null,_l=(t=[])=>{const{activeElement:e}=document;return e&&!t.some((t=>t===e))?e:null},Sl=t=>wl(t)&&t===_l(),El=(t,e={})=>{try{t.focus(e)}catch(n){console.error(n)}return Sl(t)},Al=(t,e)=>e&&wl(t)&&t.getAttribute(e)||null,xl=t=>{if("none"===Al(t,"display"))return!1;const e=bl(t);return!!(e&&e.height>0&&e.width>0)},Cl=(t,e)=>!t||t(e).filter((t=>t.type!==o.sv)).length<1,Tl=(t,e)=>(wl(e)?e:pl).querySelector(t)||null,Ml=(t,e)=>Array.from([(wl(e)?e:pl).querySelectorAll(t)]),Il=(t,e)=>e&&wl(t)?t.getAttribute(e):null,kl=t=>pl.getElementById(/^#/.test(t)?t.slice(1):t)||null,Ol=(t,e,n)=>{e&&wl(t)&&t.setAttribute(e,n)},Rl=(t,e)=>{e&&wl(t)&&t.removeAttribute(e)},Dl=(t,e)=>Za(t).toLowerCase()===Za(e).toLowerCase(),Nl=nl?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||(t=>setTimeout(t,16)):t=>setTimeout(t,0),Pl=(t,e)=>!!wl(t)&&vl.call(t,e),Ll=(null==yl?void 0:yl.closest)||function(t){let e=this;if(!e)return null;do{if(Pl(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&e.nodeType===Node.ELEMENT_NODE);return null},Bl=(t,e,n=!1)=>{if(!wl(e))return null;const r=Ll.call(e,t);return n?r:r===e?null:r},Ul=(t,e,n)=>e.concat(["sm","md","lg","xl","xxl"]).reduce(((e,r)=>(e[t?`${t}${r.charAt(0).toUpperCase()+r.slice(1)}`:r]=n,e)),Object.create(null)),Fl=(t,e,n,r=n)=>Object.keys(e).reduce(((e,i)=>(t[i]&&e.push([r,i.replace(n,""),t[i]].filter((t=>t&&"boolean"!=typeof t)).join("-").toLowerCase()),e)),[]),zl=(t="")=>`__BVID__${Math.random().toString().slice(2,8)}___BV_${t}__`,Vl=(t,e)=>!0===t||"true"===t||""===t?"true":"grammar"===t||"spelling"===t?t:!1===e?"true":!1===t||"false"===t?"false":void 0,Hl=t=>!!t&&"object"==typeof t&&t.constructor===Object,jl=(t,e,n=!0)=>{const r=t instanceof Date&&"function"==typeof t.getMonth?new Date(t.getTime()):Object.assign({},t);return Hl(t)&&Hl(e)&&Object.keys(e).forEach((i=>{Hl(e[i])?i in t?r[i]=jl(t[i],e[i],n):Object.assign(r,{[i]:e[i]}):Array.isArray(e[i])&&Array.isArray(t[i])?Object.assign(r,{[i]:n?t[i].concat(e[i].filter((e=>!t[i].includes(e)))):e[i]}):Object.assign(r,{[i]:e[i]})})),r},Wl=(t,e={},n={})=>{const r=[t];let i;for(let o=0;o<r.length&&!i;o++){const t=r[o];i=n[t]}return i&&"function"==typeof i?i(e):i},Gl=(t,e=NaN)=>Number.isInteger(t)?t:e,$l=(t,e=NaN)=>{const n=Number.parseInt(t,10);return Number.isNaN(n)?e:n},ql=(t,e=NaN)=>{const n=Number.parseFloat(t.toString());return Number.isNaN(n)?e:n},Yl=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,n)=>({...e,[n]:t[n]})),{}),Xl=t=>Array.isArray(t)?t.map((t=>Xl(t))):t instanceof Date?new Date(t.getTime()):t&&"object"==typeof t?Object.getOwnPropertyNames(t).reduce(((e,n)=>{var r;return Object.defineProperty(e,n,null!=(r=Object.getOwnPropertyDescriptor(t,n))?r:{}),e[n]=Xl(t[n]),e}),Object.create(Object.getPrototypeOf(t))):t,Zl=t=>new Promise((e=>e(Xl(t)))),Kl=(t,e)=>e+(t?Qa(t):""),Jl=(t,e)=>(Array.isArray(e)?e.slice():Object.keys(e)).reduce(((e,n)=>(e[n]=t[n],e)),{}),Ql=t=>"boolean"==typeof t?t:""===t||"true"===t,tc=t=>!(!t.href&&!t.to);function ec(t){return xs((()=>void 0===t.value||null===t.value?t.value:Ql(t.value)))}const nc=Symbol(),rc={items:(0,i.qj)([]),reset(){this.items=(0,i.qj)([])}},ic=t=>{t.provide(nc,rc)},oc=()=>{var t;return null!=(t=(0,o.f3)(nc))?t:rc},sc=(t,e,n)=>{(0,o.bv)((()=>{var r;null==(r=null==t?void 0:t.value)||r.addEventListener(e,n)})),(0,o.Jd)((()=>{var r;null==(r=null==t?void 0:t.value)||r.removeEventListener(e,n)}))},ac=t=>(0,o.Fl)((()=>({"form-check":!1===t.plain&&!1===t.button,"form-check-inline":!0===t.inline,"form-switch":!0===t.switch,[`form-control-${t.size}`]:void 0!==t.size&&"md"!==t.size}))),lc=t=>(0,o.Fl)((()=>({"form-check-input":!1===t.plain&&!1===t.button,"is-valid":!0===t.state,"is-invalid":!1===t.state,"btn-check":!0===t.button}))),cc=t=>(0,o.Fl)((()=>({"form-check-label":!1===t.plain&&!1===t.button,btn:!0===t.button,[`btn-${t.buttonVariant}`]:!0===t.button&&void 0!==t.buttonVariant,[`btn-${t.size}`]:t.button&&t.size&&"md"!==t.size}))),uc=t=>(0,o.Fl)((()=>({"aria-invalid":Vl(t.ariaInvalid,t.state),"aria-required":!0===t.required||void 0}))),hc=t=>(0,o.Fl)((()=>({"was-validated":!0===t.validated,"btn-group":!0===t.buttons&&!1===t.stacked,"btn-group-vertical":!0===t.stacked,[`btn-group-${t.size}`]:void 0!==t.size}))),dc=(t,e,n)=>t.reduce(((t,e)=>"Symbol(Fragment)"===e.type.toString()?t.concat(e.children):t.concat([e])),[]).filter((t=>t.type.__name===e||t.type.name===e)).map((t=>{const e=(t.children.default?t.children.default():[]).find((t=>"Symbol(Text)"===t.type.toString()));return{props:{disabled:n,...t.props},text:e?e.children:""}})),fc=(t,e)=>"string"==typeof t?{props:{value:t,disabled:e.disabled},text:t}:{props:{value:t[e.valueField],disabled:e.disabled||t[e.disabledField],...t.props},text:t[e.textField],html:t[e.htmlField]},pc=(t,e,n,r,i)=>({...t,props:{"button-variant":n.buttonVariant,form:n.form,name:r.value,id:`${i.value}_option_${e}`,button:n.buttons,state:n.state,plain:n.plain,size:n.size,inline:!n.stacked,required:n.required,...t.props}}),mc=(t,e)=>(0,o.Fl)((()=>(null==t?void 0:t.value)||zl(e))),gc={ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}},yc=(t,e)=>{const n=(0,i.iH)();let r=null,s=!0;const a=mc((0,i.Vh)(t,"id"),"input"),l=(e,n,r=!1)=>(e=String(e),"function"!=typeof t.formatter||t.lazyFormatter&&!r?e:(s=!1,t.formatter(e,n))),c=e=>t.trim?e.trim():t.number?Number.parseFloat(e):e,u=()=>{(0,o.Y3)((()=>{var e;t.autofocus&&(null==(e=n.value)||e.focus())}))};(0,o.bv)(u),(0,o.bv)((()=>{n.value&&(n.value.value=t.modelValue)})),(0,o.dl)(u);const h=(0,o.Fl)((()=>{var e;return Vl(t.ariaInvalid,null!=(e=t.state)?e:void 0)})),d=n=>{const{value:i}=n.target,o=l(i,n);if(!1===o||n.defaultPrevented)return void n.preventDefault();if(t.lazy)return;const s=c(o);t.modelValue!==s&&(r=i,e("update:modelValue",s)),e("input",o)},f=n=>{const{value:i}=n.target,o=l(i,n);if(!1===o||n.defaultPrevented)return void n.preventDefault();if(!t.lazy)return;r=i,e("update:modelValue",o);const s=c(o);t.modelValue!==s&&e("change",o)},p=n=>{if(e("blur",n),!t.lazy&&!t.lazyFormatter)return;const{value:i}=n.target,o=l(i,n,!0);r=i,e("update:modelValue",o)},m=()=>{var e;t.disabled||null==(e=n.value)||e.focus()},g=()=>{var e;t.disabled||null==(e=n.value)||e.blur()};return(0,o.YP)((()=>t.modelValue),(t=>{!n.value||(n.value.value=r&&s?r:t,r=null,s=!0)})),{input:n,computedId:a,computedAriaInvalid:h,onInput:d,onChange:f,onBlur:p,focus:m,blur:g}},vc=(t,e)=>{if(!t)return t;if(e in t)return t[e];const n=e.split(".");return vc(t[n[0]],n.splice(1).join("."))},wc=(t,e=null,n,r)=>{if("[object Object]"===Object.prototype.toString.call(t)){const i=vc(t,r.valueField),o=vc(t,r.textField),s=vc(t,r.htmlField),a=vc(t,r.disabledField),l=t[r.optionsField]||null;return null!==l?{label:String(vc(t,r.labelField)||o),options:bc(l,n,r)}:{value:typeof i>"u"?e||o:i,text:String(typeof o>"u"?e:o),html:s,disabled:Boolean(a)}}return{value:e||t,text:String(t),disabled:!1}},bc=(t,e,n)=>Array.isArray(t)?t.map((t=>wc(t,null,e,n))):"[object Object]"===Object.prototype.toString.call(t)?(console.warn(`[BootstrapVue warn]: ${e} - Setting prop "options" to an object is deprecated. Use the array format instead.`),Object.keys(t).map((r=>{const i=t[r];switch(typeof i){case"object":return wc(i.text,String(i.value),e,n);default:return wc(i,String(r),e,n)}}))):[],_c=(t=!1,e={})=>{var n,r;const i="data-bs-theme",o="body";return Ta({attribute:i,selector:o,storageKey:t?`${null!=(n=e.attribute)?n:i}-${null!=(r=e.selector)?r:o}`:null,...e})},Sc=["id"],Ec=Symbol(),Ac=(0,o.aZ)({__name:"BAccordion",props:{flush:{default:!1},free:{default:!1},id:null},setup(t){const e=t,n=mc((0,i.Vh)(e,"id"),"accordion"),r=ec((0,i.Vh)(e,"flush")),a=ec((0,i.Vh)(e,"free")),l=(0,o.Fl)((()=>({"accordion-flush":r.value})));return a.value||(0,o.JJ)(Ec,n.value),(t,e)=>((0,o.wg)(),(0,o.iD)("div",{id:(0,i.SU)(n),class:(0,s.C_)(["accordion",(0,i.SU)(l)])},[(0,o.WI)(t.$slots,"default")],10,Sc))}}),xc=(0,o.aZ)({__name:"BCollapse",props:{accordion:null,id:{default:zl()},modelValue:{default:!1},tag:{default:"div"},toggle:{default:!1},visible:{default:!1},isNav:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"modelValue")),a=ec((0,i.Vh)(n,"toggle")),l=ec((0,i.Vh)(n,"visible")),c=ec((0,i.Vh)(n,"isNav")),u=(0,i.iH)(),h=(0,i.iH)(),d=(0,o.Fl)((()=>({show:r.value,"navbar-collapse":c.value}))),f=()=>e("update:modelValue",!1);return(0,o.YP)((()=>r.value),(t=>{var e,n;t?null==(e=h.value)||e.show():null==(n=h.value)||n.hide()})),(0,o.YP)((()=>l.value),(t=>{var n,r;t?(e("update:modelValue",!!t),null==(n=h.value)||n.show()):(e("update:modelValue",!!t),null==(r=h.value)||r.hide())})),sc(u,"show.bs.collapse",(()=>{e("show"),e("update:modelValue",!0)})),sc(u,"hide.bs.collapse",(()=>{e("hide"),e("update:modelValue",!1)})),sc(u,"shown.bs.collapse",(()=>e("shown"))),sc(u,"hidden.bs.collapse",(()=>e("hidden"))),(0,o.bv)((()=>{var t;h.value=new nn(u.value,{parent:n.accordion?`#${n.accordion}`:void 0,toggle:a.value}),(l.value||r.value)&&(e("update:modelValue",!0),null==(t=h.value)||t.show())})),(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:t.id,ref_key:"element",ref:u,class:(0,s.C_)(["collapse",(0,i.SU)(d)]),"data-bs-parent":t.accordion||null,"is-nav":(0,i.SU)(c)},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{visible:(0,i.SU)(r),close:f})])),_:3},8,["id","class","data-bs-parent","is-nav"]))}}),Cc=(t,e)=>t.setAttribute("data-bs-theme",e),Tc={mounted(t,e){Cc(t,e.value)},updated(t,e){Cc(t,e.value)}},Mc={mounted(t,e){const n=e.modifiers.left?"left":e.modifiers.right?"right":e.modifiers.bottom?"bottom":e.modifiers.top?"top":"right",r=[];e.modifiers.manual?r.push("manual"):(e.modifiers.click&&r.push("click"),e.modifiers.hover&&r.push("hover"),e.modifiers.focus&&r.push("focus")),t.setAttribute("data-bs-toggle","popover"),new Xi(t,{trigger:0===r.length?"click":r.join(" "),placement:n,content:e.value,html:e.modifiers.html})},unmounted(t){const e=Xi.getInstance(t);null!==e&&e.dispose()}},Ic=t=>{if(t.classList.contains("offcanvas"))return"offcanvas";if(t.classList.contains("collapse"))return"collapse";throw Error("Couldn't resolve toggle type")},kc=(t,e)=>{const{modifiers:n,arg:r,value:i}=t,o=Object.keys(n||{}),s="string"==typeof i?i.split($a):i;if(Dl(e.tagName,"a")){const t=Il(e,"href")||"";Ya.test(t)&&o.push(t.replace(qa,""))}return Array.prototype.concat.apply([],[r,s]).forEach((t=>"string"==typeof t&&o.push(t))),o.filter(((t,e,n)=>t&&n.indexOf(t)===e))},Oc={mounted(t,e){const n=kc(e,t),r=[],i="a"===t.tagName?"href":"data-bs-target";n.forEach((e=>{const n=document.getElementById(e);null!==n&&(t.setAttribute("data-bs-toggle",Ic(n)),r.push(`#${e}`))})),r.length>0&&t.setAttribute(i,r.join(","))}},Rc=(t,e)=>{if(null!=e&&e.trigger)return e.trigger;if(t.manual)return"manual";const n=[];return t.click&&n.push("click"),t.hover&&n.push("hover"),t.focus&&n.push("focus"),n.length>0?n.join(" "):"hover focus"},Dc=(t,e)=>null!=e&&e.placement?e.placement:t.left?"left":t.right?"right":t.bottom?"bottom":"top",Nc=t=>null!=t&&t.delay?t.delay:0,Pc=t=>typeof t>"u"?(console.warn("Review tooltip directive usage. Some uses are not defining a title in root component or a value like `v-b-tooltip='{title: \"my title\"}'` nor `v-b-tooltip=\"'my title'\"` to define a title"),""):"object"==typeof t?null==t?void 0:t.title:t,Lc={beforeMount(t,e){t.setAttribute("data-bs-toggle","tooltip"),t.getAttribute("title")||t.setAttribute("title",Pc(e.value).toString());const n=/<("[^"]*"|'[^']*'|[^'">])*>/.test(t.title),r=Rc(e.modifiers,e.value),i=Dc(e.modifiers,e.value),o=Nc(e.value),s=t.getAttribute("title");new ji(t,{trigger:r,placement:i,delay:o,html:n}),s&&t.setAttribute("data-bs-original-title",s)},updated(t,e){t.getAttribute("title")||t.setAttribute("title",Pc(e.value).toString());const n=t.getAttribute("title"),r=t.getAttribute("data-bs-original-title"),i=ji.getInstance(t);t.removeAttribute("title"),n&&n!==r&&(null==i||i.setContent({".tooltip-inner":n}),t.setAttribute("data-bs-original-title",n))},unmounted(t){const e=ji.getInstance(t);null!==e&&e.dispose()}},Bc=new Map;class Uc{constructor(t,e,n,r,i){ms(this,"element"),ms(this,"margin"),ms(this,"once"),ms(this,"callback"),ms(this,"instance"),ms(this,"observer"),ms(this,"doneOnce"),ms(this,"visible"),this.element=t,this.margin=e,this.once=n,this.callback=r,this.instance=i,this.createObserver()}createObserver(){if(this.observer&&this.stop(),!this.doneOnce&&"function"==typeof this.callback){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch{return console.error("Intersection Observer not supported"),this.doneOnce=!0,this.observer=void 0,void this.callback(null)}this.instance.$nextTick((()=>{this.observer&&this.observer.observe(this.element)}))}}handler(t){const[e]=t,n=Boolean(e.isIntersecting||e.intersectionRatio>0);n!==this.visible&&(this.visible=n,this.callback(n),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}stop(){this.observer&&this.observer.disconnect(),this.observer=null}}const Fc=t=>{if(Bc.has(t)){const e=Bc.get(t);e&&e.stop&&e.stop(),Bc.delete(t)}},zc=(t,e)=>{const n={margin:"0px",once:!1,callback:e.value};Object.keys(e.modifiers).forEach((t=>{Number.isInteger(t)?n.margin=`${t}px`:"once"===t.toLowerCase()&&(n.once=!0)})),Fc(t);const r=new Uc(t,n.margin,n.once,n.callback,e.instance);Bc.set(t,r)},Vc={beforeMount(t,e){zc(t,e)},updated(t,e){zc(t,e)},unmounted(t){Fc(t)}},Hc={class:"accordion-item"},jc=["id"],Wc=["aria-expanded","aria-controls"],Gc={class:"accordion-body"},$c=(0,o.aZ)({__name:"BAccordionItem",props:{id:null,title:null,visible:{default:!1}},setup(t){const e=t,n=(0,o.f3)(Ec,""),r=mc((0,i.Vh)(e,"id"),"accordion_item"),a=ec((0,i.Vh)(e,"visible"));return(e,l)=>((0,o.wg)(),(0,o.iD)("div",Hc,[(0,o._)("h2",{id:`${(0,i.SU)(r)}heading`,class:"accordion-header"},[(0,o.wy)(((0,o.wg)(),(0,o.iD)("button",{class:(0,s.C_)(["accordion-button",{collapsed:!(0,i.SU)(a)}]),type:"button","aria-expanded":(0,i.SU)(a)?"true":"false","aria-controls":(0,i.SU)(r)},[(0,o.WI)(e.$slots,"title",{},(()=>[(0,o.Uk)((0,s.zw)(t.title),1)]))],10,Wc)),[[(0,i.SU)(Oc),void 0,(0,i.SU)(r)]])],8,jc),(0,o.Wm)(xc,{id:(0,i.SU)(r),class:"accordion-collapse",visible:t.visible,accordion:(0,i.SU)(n),"aria-labelledby":`heading${(0,i.SU)(r)}`},{default:(0,o.w5)((()=>[(0,o._)("div",Gc,[(0,o.WI)(e.$slots,"default")])])),_:3},8,["id","visible","accordion","aria-labelledby"])]))}}),qc=(0,o.aZ)({__name:"BTransition",props:{appear:{default:!1},mode:null,noFade:{default:!1},transProps:null},setup(t){const e=t,n=ec((0,i.Vh)(e,"appear")),r=ec((0,i.Vh)(e,"noFade")),l=(0,o.Fl)((()=>{const t={name:"",enterActiveClass:"",enterToClass:"",leaveActiveClass:"",leaveToClass:"showing",enterFromClass:"showing",leaveFromClass:""},e={...t,enterActiveClass:"fade showing",leaveActiveClass:"fade showing"};return r.value?t:e})),c=(0,o.Fl)((()=>({mode:e.mode,css:!0,...l.value}))),u=(0,o.Fl)((()=>void 0!==e.transProps?{...c.value,...e.transProps}:n.value?{...c.value,appear:!0,appearActiveClass:l.value.enterActiveClass,appearToClass:l.value.enterToClass}:c.value));return(t,e)=>((0,o.wg)(),(0,o.j4)(a.uT,(0,s.vs)((0,o.F4)((0,i.SU)(u))),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16))}}),Yc=["type","disabled","aria-label"],Xc=(0,o.aZ)({__name:"BCloseButton",props:{ariaLabel:{default:"Close"},disabled:{default:!1},white:{default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"disabled")),a=ec((0,i.Vh)(n,"white")),l=(0,o.Fl)((()=>({"btn-close-white":a.value})));return(n,a)=>((0,o.wg)(),(0,o.iD)("button",{type:t.type,class:(0,s.C_)(["btn-close",(0,i.SU)(l)]),disabled:(0,i.SU)(r),"aria-label":t.ariaLabel,onClick:a[0]||(a[0]=t=>e("click",t))},null,10,Yc))}}),Zc={key:0,class:"visually-hidden"},Kc=(0,o.aZ)({__name:"BSpinner",props:{label:null,role:{default:"status"},small:{default:!1},tag:{default:"span"},type:{default:"border"},variant:null},setup(t){const e=t,n=(0,o.Rr)(),r=ec((0,i.Vh)(e,"small")),a=(0,o.Fl)((()=>({"spinner-border":"border"===e.type,"spinner-border-sm":"border"===e.type&&r.value,"spinner-grow":"grow"===e.type,"spinner-grow-sm":"grow"===e.type&&r.value,[`text-${e.variant}`]:void 0!==e.variant}))),l=(0,o.Fl)((()=>!Cl(n.label)));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)((0,i.SU)(a)),role:t.label||(0,i.SU)(l)?t.role:null,"aria-hidden":!t.label&&!(0,i.SU)(l)||null},{default:(0,o.w5)((()=>[t.label||(0,i.SU)(l)?((0,o.wg)(),(0,o.iD)("span",Zc,[(0,o.WI)(e.$slots,"label",{},(()=>[(0,o.Uk)((0,s.zw)(t.label),1)]))])):(0,o.kq)("",!0)])),_:3},8,["class","role","aria-hidden"]))}}),Jc={active:{type:[Boolean,String],default:!1},activeClass:{type:String,default:"router-link-active"},append:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},event:{type:[String,Array],default:"click"},exact:{type:[Boolean,String],default:!1},exactActiveClass:{type:String,default:"router-link-exact-active"},href:{type:String},rel:{type:String,default:null},replace:{type:[Boolean,String],default:!1},routerComponentName:{type:String,default:"router-link"},routerTag:{type:String,default:"a"},target:{type:String,default:"_self"},to:{type:[String,Object],default:null}},Qc=(0,o.aZ)({props:Jc,emits:["click"],setup(t,{emit:e,attrs:n}){const r=ec((0,i.Vh)(t,"active")),s=ec((0,i.Vh)(t,"append")),a=ec((0,i.Vh)(t,"disabled")),l=ec((0,i.Vh)(t,"exact")),c=ec((0,i.Vh)(t,"replace")),u=(0,o.FN)(),h=(0,i.iH)(null),d=(0,o.Fl)((()=>{const e=t.routerComponentName.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join("");return void 0===(null==u?void 0:u.appContext.app.component(e))||a.value||!t.to?"a":t.routerComponentName})),f=(0,o.Fl)((()=>{const e="#";if(t.href)return t.href;if("string"==typeof t.to)return t.to||e;const n=t.to;if("[object Object]"===Object.prototype.toString.call(n)&&(n.path||n.query||n.hash)){const t=n.path||"",r=n.query?`?${Object.keys(n.query).map((t=>`${t}=${n.query[t]}`)).join("=")}`:"",i=n.hash&&"#"!==n.hash.charAt(0)?`#${n.hash}`:n.hash||"";return`${t}${r}${i}`||e}return e})),p=(0,o.Fl)((()=>({to:t.to,href:f.value,target:t.target,rel:"_blank"===t.target&&null===t.rel?"noopener":t.rel||null,tabindex:a.value?"-1":typeof n.tabindex>"u"?null:n.tabindex,"aria-disabled":a.value?"true":null})));return{computedLinkClasses:(0,o.Fl)((()=>({active:r.value,disabled:a.value}))),tag:d,routerAttr:p,link:h,clicked:t=>{if(a.value)return t.preventDefault(),void t.stopImmediatePropagation();e("click",t)},activeBoolean:r,appendBoolean:s,disabledBoolean:a,replaceBoolean:c,exactBoolean:l}}}),tu=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n};function eu(t,e,n,r,i,s){return"router-link"===t.tag?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),(0,o.dG)({key:0},t.routerAttr,{custom:""}),{default:(0,o.w5)((({href:e,navigate:n,isActive:r,isExactActive:i})=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.routerTag),(0,o.dG)({ref:"link",href:e,class:[(r||t.activeBoolean)&&t.activeClass,(i||t.exactBoolean)&&t.exactActiveClass]},t.$attrs,{onClick:n}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:2},1040,["href","class","onClick"]))])),_:3},16)):((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),(0,o.dG)({key:1,ref:"link",class:t.computedLinkClasses},t.routerAttr,{onClick:t.clicked}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16,["class","onClick"]))}const nu=tu(Qc,[["render",eu]]),ru=(0,o.aZ)({components:{BLink:nu,BSpinner:Kc},props:{...Jc,active:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},href:{type:String,required:!1},pill:{type:[Boolean,String],default:!1},pressed:{type:[Boolean,String],default:!1},rel:{type:String,default:void 0},size:{type:String,default:"md"},squared:{type:[Boolean,String],default:!1},tag:{type:String,default:"button"},target:{type:String,default:"_self"},type:{type:String,default:"button"},variant:{type:String,default:"secondary"},loading:{type:[Boolean,String],default:!1},loadingMode:{type:String,default:"inline"}},emits:["click","update:pressed"],setup(t,{emit:e}){const n=ec((0,i.Vh)(t,"active")),r=ec((0,i.Vh)(t,"disabled")),s=ec((0,i.Vh)(t,"pill")),a=ec((0,i.Vh)(t,"pressed")),l=ec((0,i.Vh)(t,"squared")),c=ec((0,i.Vh)(t,"loading")),u=(0,o.Fl)((()=>!0===a.value)),h=(0,o.Fl)((()=>"button"===t.tag&&void 0===t.href&&null===t.to)),d=(0,o.Fl)((()=>tc(t))),f=(0,o.Fl)((()=>null!==t.to)),p=(0,o.Fl)((()=>void 0===t.href&&!h.value)),m=(0,o.Fl)((()=>[[`btn-${t.variant}`],[`btn-${t.size}`],{active:n.value||a.value,"rounded-pill":s.value,"rounded-0":l.value,disabled:r.value}])),g=(0,o.Fl)((()=>({"aria-disabled":p.value?r.value:null,"aria-pressed":u.value?a.value:null,autocomplete:u.value?"off":null,disabled:h.value?r.value:null,href:t.href,rel:d.value?t.rel:null,role:p.value||d.value?"button":null,target:d.value?t.target:null,type:h.value?t.type:null,to:h.value?null:t.to,append:d.value?t.append:null,activeClass:f.value?t.activeClass:null,event:f.value?t.event:null,exact:f.value?t.exact:null,exactActiveClass:f.value?t.exactActiveClass:null,replace:f.value?t.replace:null,routerComponentName:f.value?t.routerComponentName:null,routerTag:f.value?t.routerTag:null}))),y=(0,o.Fl)((()=>f.value?nu:t.href?"a":t.tag));return{computedClasses:m,computedAttrs:g,computedTag:y,clicked:t=>{if(r.value)return t.preventDefault(),void t.stopPropagation();e("click",t),u.value&&e("update:pressed",!a.value)},loadingBoolean:c}}});function iu(t,e,n,r,i,a){const l=(0,o.up)("b-spinner");return(0,o.wg)(),(0,o.j4)((0,o.LL)(t.computedTag),(0,o.dG)({class:["btn",t.computedClasses]},t.computedAttrs,{onClick:t.clicked}),{default:(0,o.w5)((()=>[t.loadingBoolean?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["btn-loading",{"mode-fill":"fill"===t.loadingMode,"mode-inline":"inline"===t.loadingMode}])},[(0,o.WI)(t.$slots,"loading",{},(()=>[(0,o.Wm)(l,{class:"btn-spinner",small:"lg"!==t.size},null,8,["small"])]))],2)):(0,o.kq)("",!0),(0,o._)("div",{class:(0,s.C_)(["btn-content",{"btn-loading-fill":t.loadingBoolean&&"fill"===t.loadingMode}])},[(0,o.WI)(t.$slots,"default")],2)])),_:3},16,["class","onClick"])}const ou=tu(ru,[["render",iu]]),su=(t,e=(0,i.iH)(1e3),n={})=>{const r=(0,i.iH)(!1),s=(0,i.iH)(0),a=(0,i.iH)(ks(t)),l=(0,i.iH)(ks(e)),c=(0,o.Fl)((()=>Math.ceil(a.value/l.value))),u=(0,o.Fl)((()=>f.value||r.value?Math.round(a.value-s.value*l.value):0)),{pause:h,resume:d,isActive:f}=Us((()=>s.value=s.value+1),e,n),p=()=>{r.value=!1,s.value=0,d()},m=()=>{r.value=!1,s.value=c.value};(0,o.m0)((()=>{const e=ks(t),n=a.value;e!==n&&(a.value=e,m(),p())})),(0,o.m0)((()=>{const t=ks(e),n=l.value;t!==n&&(l.value=t,m(),p())})),(0,o.m0)((()=>{s.value>c.value&&(s.value=c.value),s.value===c.value&&h()}));const g=()=>{!1!==f.value&&(r.value=!0,h())},y=()=>{s.value!==c.value&&(r.value=!1,d())};return{isActive:(0,i.OT)(f),isPaused:(0,i.OT)(r),restart:p,stop:m,pause:g,resume:y,value:u}},au=(0,o.aZ)({__name:"BAlert",props:{dismissLabel:{default:"Close"},dismissible:{default:!1},fade:{default:!1},modelValue:{type:[Boolean,Number],default:!1},variant:{default:"info"},closeContent:null,immediate:{default:!0},interval:{default:1e3},showOnPause:{default:!0}},emits:["closed","close-countdown","update:modelValue"],setup(t,{expose:e,emit:n}){const r=t,a=ec((0,i.Vh)(r,"dismissible")),l=ec((0,i.Vh)(r,"fade")),c=ec((0,i.Vh)(r,"immediate")),u=ec((0,i.Vh)(r,"showOnPause")),h=(0,o.Rr)(),d=(0,o.Fl)((()=>!Cl(h.close))),f=(0,o.Fl)((()=>[[`alert-${r.variant}`],{"alert-dismissible":a.value}])),{isActive:p,pause:m,restart:g,resume:y,stop:v,isPaused:w,value:b}=su("boolean"==typeof r.modelValue?0:(0,i.Vh)(r,"modelValue"),(0,i.Vh)(r,"interval"),{immediate:"number"==typeof r.modelValue&&c.value}),_=(0,o.Fl)((()=>"boolean"==typeof r.modelValue?r.modelValue:p.value||u.value&&w.value));(0,o.m0)((()=>n("close-countdown",b.value)));const S=()=>{"boolean"==typeof r.modelValue?n("update:modelValue",!1):(n("update:modelValue",0),v()),n("closed")};return(0,o.Jd)((()=>v())),e({pause:m,resume:y,restart:g,stop:v}),(e,n)=>((0,o.wg)(),(0,o.j4)(qc,{"no-fade":!(0,i.SU)(l),"trans-props":{enterToClass:"show"}},{default:(0,o.w5)((()=>[(0,i.SU)(_)?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["alert",(0,i.SU)(f)]),role:"alert","aria-live":"polite","aria-atomic":"true"},[(0,o.WI)(e.$slots,"default"),(0,i.SU)(a)?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,i.SU)(d)||t.closeContent?((0,o.wg)(),(0,o.j4)(ou,{key:0,type:"button",onClick:S},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"close",{},(()=>[(0,o.Uk)((0,s.zw)(t.closeContent),1)]))])),_:3})):((0,o.wg)(),(0,o.j4)(Xc,{key:1,"aria-label":t.dismissLabel,onClick:S},null,8,["aria-label"]))],64)):(0,o.kq)("",!0)],2)):(0,o.kq)("",!0)])),_:3},8,["no-fade"]))}}),lu=Symbol(),cu=(0,o.aZ)({__name:"BAvatarGroup",props:{overlap:{default:.3},rounded:{type:[Boolean,String],default:!1},size:null,square:{default:!1},tag:{default:"div"},variant:null},setup(t){const e=t,n=ec((0,i.Vh)(e,"square")),r=(0,o.Fl)((()=>fu(e.size))),a=(0,o.Fl)((()=>Math.min(Math.max(c(e.overlap),0),1)/2)),l=(0,o.Fl)((()=>{const t=r.value?`calc(${r.value} * ${a.value})`:null;return t?{paddingLeft:t,paddingRight:t}:{}})),c=t=>"string"==typeof t&&Fa(t)?ql(t,0):t||0;return(0,o.JJ)(lu,{overlapScale:a,size:e.size,square:n.value,rounded:e.rounded,variant:e.variant}),(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:"b-avatar-group",role:"group"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"b-avatar-group-inner",style:(0,s.j5)((0,i.SU)(l))},[(0,o.WI)(e.$slots,"default")],4)])),_:3}))}}),uu={key:0,class:"b-avatar-custom"},hu={key:1,class:"b-avatar-img"},du=["src","alt"],fu=t=>{const e="string"==typeof t&&Fa(t)?ql(t,0):t;return"number"==typeof e?`${e}px`:e||null},pu=(0,o.aZ)({__name:"BAvatar",props:{alt:{default:"avatar"},ariaLabel:null,badge:{type:[Boolean,String],default:!1},badgeLeft:{default:!1},badgeOffset:null,badgeTop:{default:!1},badgeVariant:{default:"primary"},button:{default:!1},buttonType:{default:"button"},disabled:{default:!1},icon:null,rounded:{type:[Boolean,String],default:"circle"},size:null,square:{default:!1},src:null,text:null,textVariant:null,variant:{default:"secondary"}},emits:["click","img-error"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),a=(0,o.f3)(lu,null),l=["sm",null,"lg"],c=.4,u=.7*c,h=ec((0,i.Vh)(n,"badgeLeft")),d=ec((0,i.Vh)(n,"badgeTop")),f=ec((0,i.Vh)(n,"button")),p=ec((0,i.Vh)(n,"disabled")),m=ec((0,i.Vh)(n,"square")),g=(0,o.Fl)((()=>!Cl(r.default))),y=(0,o.Fl)((()=>!Cl(r.badge))),v=(0,o.Fl)((()=>!!n.badge||""===n.badge||y.value)),w=(0,o.Fl)((()=>null!=a&&a.size?a.size:fu(n.size))),b=(0,o.Fl)((()=>null!=a&&a.variant?a.variant:n.variant)),_=(0,o.Fl)((()=>null!=a&&a.rounded?a.rounded:n.rounded)),S=(0,o.Fl)((()=>({type:f.value?n.buttonType:void 0,"aria-label":n.ariaLabel||null,disabled:p.value||null}))),E=(0,o.Fl)((()=>[`bg-${n.badgeVariant}`])),A=(0,o.Fl)((()=>!0===n.badge?"":n.badge)),x=(0,o.Fl)((()=>[[`text-${D(n.badgeVariant)}`]])),C=(0,o.Fl)((()=>({[`b-avatar-${n.size}`]:!!n.size&&-1!==l.indexOf(fu(n.size)),[`bg-${b.value}`]:!!b.value,badge:!f.value&&b.value&&g.value,rounded:""===_.value||!0===_.value,["rounded-circle"]:!m.value&&"circle"===_.value,["rounded-0"]:m.value||"0"===_.value,["rounded-1"]:!m.value&&"sm"===_.value,["rounded-3"]:!m.value&&"lg"===_.value,["rounded-top"]:!m.value&&"top"===_.value,["rounded-bottom"]:!m.value&&"bottom"===_.value,["rounded-start"]:!m.value&&"left"===_.value,["rounded-end"]:!m.value&&"right"===_.value,btn:f.value,[`btn-${b.value}`]:!!f.value&&!!b.value}))),T=(0,o.Fl)((()=>[[`text-${n.textVariant||D(b.value)}`]])),M=(0,o.Fl)((()=>{const t=n.badgeOffset||"0px";return{fontSize:(-1===l.indexOf(w.value||null)?`calc(${w.value} * ${u})`:"")||"",top:d.value?t:"",bottom:d.value?"":t,left:h.value?t:"",right:h.value?"":t}})),I=(0,o.Fl)((()=>{const t=-1===l.indexOf(w.value||null)?`calc(${w.value} * ${c})`:null;return t?{fontSize:t}:{}})),k=(0,o.Fl)((()=>{var t;const e=(null==(t=null==a?void 0:a.overlapScale)?void 0:t.value)||0,n=w.value&&e?`calc(${w.value} * -${e})`:null;return n?{marginLeft:n,marginRight:n}:{}})),O=(0,o.Fl)((()=>f.value?"button":"span")),R=(0,o.Fl)((()=>({...k.value,width:w.value,height:w.value}))),D=t=>"light"===t||"warning"===t?"dark":"light",N=t=>{!p.value&&f.value&&e("click",t)},P=t=>e("img-error",t);return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)((0,i.SU)(O)),(0,o.dG)({class:["b-avatar",(0,i.SU)(C)],style:(0,i.SU)(R)},(0,i.SU)(S),{onClick:N}),{default:(0,o.w5)((()=>[(0,i.SU)(g)?((0,o.wg)(),(0,o.iD)("span",uu,[(0,o.WI)(e.$slots,"default")])):t.src?((0,o.wg)(),(0,o.iD)("span",hu,[(0,o._)("img",{src:t.src,alt:t.alt,onError:P},null,40,du)])):t.text?((0,o.wg)(),(0,o.iD)("span",{key:2,class:(0,s.C_)(["b-avatar-text",(0,i.SU)(T)]),style:(0,s.j5)((0,i.SU)(I))},(0,s.zw)(t.text),7)):(0,o.kq)("",!0),(0,i.SU)(v)?((0,o.wg)(),(0,o.iD)("span",{key:3,class:(0,s.C_)(["b-avatar-badge",(0,i.SU)(E)]),style:(0,s.j5)((0,i.SU)(M))},[(0,i.SU)(y)?(0,o.WI)(e.$slots,"badge",{key:0}):((0,o.wg)(),(0,o.iD)("span",{key:1,class:(0,s.C_)((0,i.SU)(x))},(0,s.zw)((0,i.SU)(A)),3))],6)):(0,o.kq)("",!0)])),_:3},16,["class","style"]))}}),mu=Yl(Jc,["event","routerTag"]),gu=(0,o.aZ)({components:{BLink:nu},props:{pill:{type:[Boolean,String],default:!1},tag:{type:String,default:"span"},variant:{type:String,default:"secondary"},textIndicator:{type:[Boolean,String],default:!1},dotIndicator:{type:[Boolean,String],default:!1},...mu},setup(t){const e=ec((0,i.Vh)(t,"pill")),n=ec((0,i.Vh)(t,"textIndicator")),r=ec((0,i.Vh)(t,"dotIndicator")),s=ec((0,i.Vh)(t,"active")),a=ec((0,i.Vh)(t,"disabled")),l=(0,o.Fl)((()=>tc(t))),c=(0,o.Fl)((()=>l.value?nu:t.tag)),u=(0,o.Fl)((()=>[[`bg-${t.variant}`],{active:s.value,disabled:a.value,"text-dark":["warning","info","light"].includes(t.variant),"rounded-pill":e.value,"position-absolute top-0 start-100 translate-middle":n.value||r.value,"p-2 border border-light rounded-circle":r.value,"text-decoration-none":l.value}])),h=(0,o.Fl)((()=>l.value?Jl(t,mu):{}));return{computedClasses:u,computedLinkProps:h,computedTag:c}}});function yu(t,e,n,r,i,s){return(0,o.wg)(),(0,o.j4)((0,o.LL)(t.computedTag),(0,o.dG)({class:["badge",t.computedClasses]},t.computedLinkProps),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16,["class"])}const vu=tu(gu,[["render",yu]]),wu=Yl(Jc,["event","routerTag"]),bu=(0,o.aZ)({components:{BLink:nu},props:{...wu,active:{type:[Boolean,String],default:!1},ariaCurrent:{type:String,default:"location"},disabled:{type:[Boolean,String],default:!1},text:{type:String,required:!1}},emits:["click"],setup(t,{emit:e}){const n=ec((0,i.Vh)(t,"active")),r=ec((0,i.Vh)(t,"disabled")),s=(0,o.Fl)((()=>({active:n.value}))),a=(0,o.Fl)((()=>n.value?"span":nu)),l=(0,o.Fl)((()=>n.value?t.ariaCurrent:void 0));return{computedLinkProps:(0,o.Fl)((()=>"span"!==a.value?Jl(t,wu):{})),computedClasses:s,computedTag:a,computedAriaCurrent:l,clicked:t=>{if(r.value||n.value)return t.preventDefault(),void t.stopImmediatePropagation();r.value||e("click",t)}}}});function _u(t,e,n,r,i,a){return(0,o.wg)(),(0,o.iD)("li",{class:(0,s.C_)(["breadcrumb-item",t.computedClasses])},[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.computedTag),(0,o.dG)({"aria-current":t.computedAriaCurrent},t.computedLinkProps,{onClick:t.clicked}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["aria-current","onClick"]))],2)}const Su=tu(bu,[["render",_u]]),Eu={"aria-label":"breadcrumb"},Au={class:"breadcrumb"},xu=(0,o.aZ)({__name:"BBreadcrumb",props:{items:null},setup(t){const e=t,n=oc(),r=(0,o.Fl)((()=>{const t=e.items||(null==n?void 0:n.items)||[];let r=!1;return t.map(((e,n)=>("string"==typeof e&&(e={text:e},n<t.length-1&&(e.href="#")),e.active&&(r=!0),!e.active&&!r&&(e.active=n+1===t.length),e)))}));return(t,e)=>((0,o.wg)(),(0,o.iD)("nav",Eu,[(0,o._)("ol",Au,[(0,o.WI)(t.$slots,"prepend"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(r),((t,e)=>((0,o.wg)(),(0,o.j4)(Su,(0,o.dG)({key:e},t),{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.text),1)])),_:2},1040)))),128)),(0,o.WI)(t.$slots,"default"),(0,o.WI)(t.$slots,"append")])]))}}),Cu=(0,o.aZ)({__name:"BButtonGroup",props:{ariaLabel:{default:"Group"},size:null,tag:{default:"div"},vertical:{default:!1}},setup(t){const e=t,n=ec((0,i.Vh)(e,"vertical")),r=(0,o.Fl)((()=>({"btn-group":!n.value,[`btn-group-${e.size}`]:void 0!==e.size,"btn-group-vertical":n.value})));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)((0,i.SU)(r)),role:"group","aria-label":t.ariaLabel},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},8,["class","aria-label"]))}}),Tu=["role","aria-label"],Mu=(0,o.aZ)({__name:"BButtonToolbar",props:{ariaLabel:{default:"Group"},justify:{default:!1},role:{default:"toolbar"}},setup(t){const e=ec((0,i.Vh)(t,"justify")),n=(0,o.Fl)((()=>({"justify-content-between":e.value})));return(e,r)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)([(0,i.SU)(n),"btn-toolbar"]),role:t.role,"aria-label":t.ariaLabel},[(0,o.WI)(e.$slots,"default")],10,Tu))}}),Iu=(0,o.aZ)({__name:"BImg",props:{alt:null,blank:{default:!1},blankColor:{default:"transparent"},block:{default:!1},center:{default:!1},fluid:{default:!1},lazy:{default:!1},fluidGrow:{default:!1},height:null,left:{default:!1},start:{default:!1},right:{default:!1},end:{default:!1},rounded:{type:[Boolean,String],default:!1},sizes:null,src:null,srcset:null,thumbnail:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,r='<svg width="%{w}" height="%{h}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 %{w} %{h}" preserveAspectRatio="none"><rect width="100%" height="100%" style="fill:%{f};"></rect></svg>',s=ec((0,i.Vh)(n,"lazy")),a=ec((0,i.Vh)(n,"blank")),l=ec((0,i.Vh)(n,"block")),c=ec((0,i.Vh)(n,"center")),u=ec((0,i.Vh)(n,"fluid")),h=ec((0,i.Vh)(n,"fluidGrow")),d=ec((0,i.Vh)(n,"left")),f=ec((0,i.Vh)(n,"start")),p=ec((0,i.Vh)(n,"right")),m=ec((0,i.Vh)(n,"end")),g=ec((0,i.Vh)(n,"thumbnail")),y=(0,o.Fl)((()=>"string"==typeof n.srcset?n.srcset.split(",").filter((t=>t)).join(","):Array.isArray(n.srcset)?n.srcset.filter((t=>t)).join(","):void 0)),v=(0,o.Fl)((()=>"string"==typeof n.sizes?n.sizes.split(",").filter((t=>t)).join(","):Array.isArray(n.sizes)?n.sizes.filter((t=>t)).join(","):void 0)),w=(0,o.Fl)((()=>{const t=t=>void 0===t?void 0:"number"==typeof t?t:Number.parseInt(t,10)||void 0,e=t(n.width),r=t(n.height);if(a.value){if(void 0!==e&&void 0===r)return{height:e,width:e};if(void 0===e&&void 0!==r)return{height:r,width:r};if(void 0===e&&void 0===r)return{height:1,width:1}}return{width:e,height:r}})),b=(0,o.Fl)((()=>A(w.value.width,w.value.height,n.blankColor))),_=(0,o.Fl)((()=>({src:a.value?b.value:n.src,alt:n.alt,width:w.value.width||void 0,height:w.value.height||void 0,srcset:a.value?void 0:y.value,sizes:a.value?void 0:v.value,loading:s.value?"lazy":"eager"}))),S=(0,o.Fl)((()=>d.value||f.value?"float-start":p.value||m.value?"float-end":c.value?"mx-auto":void 0)),E=(0,o.Fl)((()=>({"img-thumbnail":g.value,"img-fluid":u.value||h.value,"w-100":h.value,rounded:""===n.rounded||!0===n.rounded,[`rounded-${n.rounded}`]:"string"==typeof n.rounded&&""!==n.rounded,[`${S.value}`]:void 0!==S.value,"d-block":l.value||c.value}))),A=(t,e,n)=>`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(r.replace("%{w}",String(t)).replace("%{h}",String(e)).replace("%{f}",n))}`;return(t,n)=>((0,o.wg)(),(0,o.iD)("img",(0,o.dG)({class:(0,i.SU)(E)},(0,i.SU)(_),{onLoad:n[0]||(n[0]=t=>e("load",t))}),null,16))}}),ku=(0,o.aZ)({__name:"BCardImg",props:{alt:null,blank:{default:!1},blankColor:null,bottom:{default:!1},lazy:{default:!1},height:null,left:{default:!1},start:{default:!1},right:{default:!1},end:{default:!1},sizes:null,src:null,srcset:null,top:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"bottom")),s=ec((0,i.Vh)(n,"end")),a=ec((0,i.Vh)(n,"left")),l=ec((0,i.Vh)(n,"right")),c=ec((0,i.Vh)(n,"start")),u=ec((0,i.Vh)(n,"top")),h=(0,o.Fl)((()=>u.value?"card-img-top":l.value||s.value?"card-img-right":r.value?"card-img-bottom":a.value||c.value?"card-img-left":"card-img")),d=(0,o.Fl)((()=>({alt:n.alt,height:n.height,src:n.src,lazy:n.lazy,width:n.width,blank:n.blank,blankColor:n.blankColor,sizes:n.sizes,srcset:n.srcset})));return(t,n)=>((0,o.wg)(),(0,o.j4)(Iu,(0,o.dG)({class:(0,i.SU)(h)},(0,i.SU)(d),{onLoad:n[0]||(n[0]=t=>e("load",t))}),null,16,["class"]))}}),Ou=["innerHTML"],Ru=(0,o.aZ)({__name:"BCardHeadFoot",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t,n=(0,o.Fl)((()=>({[`text-${e.textVariant}`]:void 0!==e.textVariant,[`bg-${e.bgVariant}`]:void 0!==e.bgVariant,[`border-${e.borderVariant}`]:void 0!==e.borderVariant})));return(e,r)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)((0,i.SU)(n))},{default:(0,o.w5)((()=>[t.html?((0,o.wg)(),(0,o.iD)("div",{key:0,innerHTML:t.html},null,8,Ou)):(0,o.WI)(e.$slots,"default",{key:1},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["class"]))}}),Du=(0,o.aZ)({__name:"BCardHeader",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t;return(t,n)=>((0,o.wg)(),(0,o.j4)(Ru,(0,o.dG)({class:"card-header"},e),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16))}}),Nu=(0,o.aZ)({__name:"BCardTitle",props:{text:null,tag:{default:"h4"}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:"card-title"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3}))}}),Pu=(0,o.aZ)({__name:"BCardSubtitle",props:{text:null,tag:{default:"h6"},textVariant:{default:"muted"}},setup(t){const e=t,n=(0,o.Fl)((()=>[`text-${e.textVariant}`]));return(e,r)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(["card-subtitle mb-2",(0,i.SU)(n)])},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["class"]))}}),Lu=(0,o.aZ)({__name:"BCardBody",props:{bodyBgVariant:null,bodyTag:{default:"div"},bodyTextVariant:null,overlay:{default:!1},subtitle:null,subtitleTag:{default:"h4"},subtitleTextVariant:null,title:null,titleTag:{default:"h4"},text:null},setup(t){const e=t,n=(0,o.Rr)(),r=ec((0,i.Vh)(e,"overlay")),a=(0,o.Fl)((()=>!Cl(n.title))),l=(0,o.Fl)((()=>!Cl(n.subtitle))),c=(0,o.Fl)((()=>({"card-img-overlay":r.value,[`text-${e.bodyTextVariant}`]:void 0!==e.bodyTextVariant,[`bg-${e.bodyBgVariant}`]:void 0!==e.bodyBgVariant})));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.bodyTag),{class:(0,s.C_)(["card-body",(0,i.SU)(c)])},{default:(0,o.w5)((()=>[t.title||(0,i.SU)(a)?((0,o.wg)(),(0,o.j4)(Nu,{key:0,tag:t.titleTag},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"title",{},(()=>[(0,o.Uk)((0,s.zw)(t.title),1)]))])),_:3},8,["tag"])):(0,o.kq)("",!0),t.subtitle||(0,i.SU)(l)?((0,o.wg)(),(0,o.j4)(Pu,{key:1,tag:t.subtitleTag,"text-variant":t.subtitleTextVariant},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"subtitle",{},(()=>[(0,o.Uk)((0,s.zw)(t.subtitle),1)]))])),_:3},8,["tag","text-variant"])):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["class"]))}}),Bu=(0,o.aZ)({__name:"BCardFooter",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t;return(n,r)=>((0,o.wg)(),(0,o.j4)(Ru,(0,o.dG)({class:"card-footer"},e),{default:(0,o.w5)((()=>[(0,o.WI)(n.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},16))}}),Uu=(0,o.aZ)({__name:"BCard",props:{align:null,bgVariant:null,bodyBgVariant:null,bodyClass:null,bodyTag:{default:"div"},bodyTextVariant:null,borderVariant:null,footer:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerHtml:{default:""},footerTag:{default:"div"},footerTextVariant:null,header:null,headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerHtml:{default:""},headerTag:{default:"div"},headerTextVariant:null,imgAlt:null,imgBottom:{default:!1},imgEnd:{default:!1},imgHeight:null,imgLeft:{default:!1},imgRight:{default:!1},imgSrc:null,imgStart:{default:!1},imgTop:{default:!1},imgWidth:null,noBody:{default:!1},overlay:{default:!1},subtitle:null,subtitleTag:{default:"h6"},subtitleTextVariant:{default:"muted"},tag:{default:"div"},textVariant:null,title:null,titleTag:{default:"h4"},bodyText:{default:""}},setup(t){const e=t,n=(0,o.Rr)(),r=ec((0,i.Vh)(e,"imgBottom")),a=ec((0,i.Vh)(e,"imgEnd")),l=ec((0,i.Vh)(e,"imgLeft")),c=ec((0,i.Vh)(e,"imgRight")),u=ec((0,i.Vh)(e,"imgStart")),h=ec((0,i.Vh)(e,"noBody")),d=(0,o.Fl)((()=>!Cl(n.header))),f=(0,o.Fl)((()=>!Cl(n.footer))),p=(0,o.Fl)((()=>({[`text-${e.align}`]:void 0!==e.align,[`text-${e.textVariant}`]:void 0!==e.textVariant,[`bg-${e.bgVariant}`]:void 0!==e.bgVariant,[`border-${e.borderVariant}`]:void 0!==e.borderVariant,"flex-row":l.value||u.value,"flex-row-reverse":a.value||c.value}))),m=(0,o.Fl)((()=>({bgVariant:e.headerBgVariant,borderVariant:e.headerBorderVariant,html:e.headerHtml,tag:e.headerTag,textVariant:e.headerTextVariant}))),g=(0,o.Fl)((()=>({overlay:e.overlay,bodyBgVariant:e.bodyBgVariant,bodyTag:e.bodyTag,bodyTextVariant:e.bodyTextVariant,subtitle:e.subtitle,subtitleTag:e.subtitleTag,subtitleTextVariant:e.subtitleTextVariant,title:e.title,titleTag:e.titleTag}))),y=(0,o.Fl)((()=>({bgVariant:e.footerBgVariant,borderVariant:e.footerBorderVariant,html:e.footerHtml,tag:e.footerTag,textVariant:e.footerTextVariant}))),v=(0,o.Fl)((()=>({src:e.imgSrc,alt:e.imgAlt,height:e.imgHeight,width:e.imgWidth,bottom:e.imgBottom,end:e.imgEnd,left:e.imgLeft,right:e.imgRight,start:e.imgStart,top:e.imgTop})));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(["card",(0,i.SU)(p)])},{default:(0,o.w5)((()=>[(0,i.SU)(r)?(0,o.kq)("",!0):(0,o.WI)(e.$slots,"img",{key:0},(()=>[t.imgSrc?((0,o.wg)(),(0,o.j4)(ku,(0,s.vs)((0,o.dG)({key:0},(0,i.SU)(v))),null,16)):(0,o.kq)("",!0)])),t.header||(0,i.SU)(d)||t.headerHtml?((0,o.wg)(),(0,o.j4)(Du,(0,o.dG)({key:1},(0,i.SU)(m),{class:t.headerClass}),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"header",{},(()=>[(0,o.Uk)((0,s.zw)(t.header),1)]))])),_:3},16,["class"])):(0,o.kq)("",!0),(0,i.SU)(h)?(0,o.WI)(e.$slots,"default",{key:3},(()=>[(0,o.Uk)((0,s.zw)(t.bodyText),1)])):((0,o.wg)(),(0,o.j4)(Lu,(0,o.dG)({key:2},(0,i.SU)(g),{class:t.bodyClass}),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.bodyText),1)]))])),_:3},16,["class"])),t.footer||(0,i.SU)(f)||t.footerHtml?((0,o.wg)(),(0,o.j4)(Bu,(0,o.dG)({key:4},(0,i.SU)(y),{class:t.footerClass}),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"footer",{},(()=>[(0,o.Uk)((0,s.zw)(t.footer),1)]))])),_:3},16,["class"])):(0,o.kq)("",!0),(0,i.SU)(r)?(0,o.WI)(e.$slots,"img",{key:5},(()=>[t.imgSrc?((0,o.wg)(),(0,o.j4)(ku,(0,s.vs)((0,o.dG)({key:0},(0,i.SU)(v))),null,16)):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:3},8,["class"]))}}),Fu=(0,o.aZ)({__name:"BCardGroup",props:{columns:{default:!1},deck:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=ec((0,i.Vh)(e,"columns")),r=ec((0,i.Vh)(e,"deck")),a=(0,o.Fl)((()=>r.value?"card-deck":n.value?"card-columns":"card-group")),l=(0,o.Fl)((()=>[a.value]));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)((0,i.SU)(l))},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},8,["class"]))}}),zu=(0,o.aZ)({__name:"BCardText",props:{text:null,tag:{default:"p"}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:"card-text"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3}))}}),Vu=["id"],Hu={key:0,class:"carousel-indicators"},ju=["data-bs-target","data-bs-slide-to","aria-label"],Wu={class:"carousel-inner"},Gu=["data-bs-target"],$u=(0,o._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),qu={class:"visually-hidden"},Yu=["data-bs-target"],Xu=(0,o._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),Zu={class:"visually-hidden"},Ku=Symbol(),Ju=(0,o.aZ)({__name:"BCarousel",props:{startingSlide:{default:0},id:null,imgHeight:null,imgWidth:null,background:null,modelValue:{default:0},controls:{default:!1},indicators:{default:!1},interval:{default:5e3},noTouch:{default:!1},noWrap:{default:!1},controlsPrevText:{default:"Previous"},controlsNextText:{default:"Next"},indicatorsButtonLabel:{default:"Slide"}},emits:["sliding-start","sliding-end"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),a=mc((0,i.Vh)(n,"id"),"carousel"),l=ec((0,i.Vh)(n,"controls")),c=ec((0,i.Vh)(n,"indicators")),u=ec((0,i.Vh)(n,"noTouch"));ec((0,i.Vh)(n,"noWrap"));const h=(0,i.iH)(),d=(0,i.iH)(),f=(0,i.iH)([]);return sc(h,"slide.bs.carousel",(t=>e("sliding-start",t))),sc(h,"slid.bs.carousel",(t=>e("sliding-end",t))),(0,o.bv)((()=>{d.value=new Ne(h.value,{wrap:!u.value,interval:n.interval,touch:!u.value}),r.default&&(f.value=r.default().filter((t=>{var e;return"BCarouselSlide"===(null==(e=t.type)?void 0:e.__name)})))})),(0,o.JJ)(Ku,{background:n.background,width:n.imgWidth,height:n.imgHeight}),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:(0,i.SU)(a),ref_key:"element",ref:h,class:"carousel slide","data-bs-ride":"carousel"},[(0,i.SU)(c)?((0,o.wg)(),(0,o.iD)("div",Hu,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.value,((e,n)=>((0,o.wg)(),(0,o.iD)("button",{key:n,type:"button","data-bs-target":`#${(0,i.SU)(a)}`,"data-bs-slide-to":n,class:(0,s.C_)(n===t.startingSlide?"active":""),"aria-current":"true","aria-label":`${t.indicatorsButtonLabel} ${n}`},null,10,ju)))),128))])):(0,o.kq)("",!0),(0,o._)("div",Wu,[(0,o.WI)(e.$slots,"default")]),(0,i.SU)(l)?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("button",{class:"carousel-control-prev",type:"button","data-bs-target":`#${(0,i.SU)(a)}`,"data-bs-slide":"prev"},[$u,(0,o._)("span",qu,(0,s.zw)(t.controlsPrevText),1)],8,Gu),(0,o._)("button",{class:"carousel-control-next",type:"button","data-bs-target":`#${(0,i.SU)(a)}`,"data-bs-slide":"next"},[Xu,(0,o._)("span",Zu,(0,s.zw)(t.controlsNextText),1)],8,Yu)],64)):(0,o.kq)("",!0)],8,Vu))}}),Qu=["data-bs-interval"],th=["innerHTML"],eh={key:1},nh=["innerHTML"],rh={key:1},ih=(0,o.aZ)({__name:"BCarouselSlide",props:{imgSrc:null,imgHeight:null,imgWidth:null,interval:null,active:{default:!1},background:null,caption:null,captionHtml:null,captionTag:{default:"h3"},contentTag:{default:"div"},contentVisibleUp:null,id:null,imgAlt:null,imgBlank:{default:!1},imgBlankColor:{default:"transparent"},text:null,textHtml:null,textTag:{default:"p"}},setup(t){const e=t,n=(0,o.Rr)(),r=(0,o.f3)(Ku,{}),a=ec((0,i.Vh)(e,"active")),l=(0,o.Fl)((()=>!Cl(n.default))),c=(0,o.Fl)((()=>({background:`${e.background||r.background||"rgb(171, 171, 171)"} none repeat scroll 0% 0%`}))),u=(0,o.Fl)((()=>({"d-none":void 0!==e.contentVisibleUp,[`d-${e.contentVisibleUp}-block`]:void 0!==e.contentVisibleUp}))),h=(0,o.Fl)((()=>r.width)),d=(0,o.Fl)((()=>r.height));return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["carousel-item",{active:(0,i.SU)(a)}]),"data-bs-interval":t.interval,style:(0,s.j5)((0,i.SU)(c))},[(0,o.WI)(e.$slots,"img",{},(()=>[(0,o.Wm)(Iu,{class:"d-block w-100",alt:t.imgAlt,src:t.imgSrc,width:t.imgWidth||(0,i.SU)(h),height:t.imgHeight||(0,i.SU)(d),blank:t.imgBlank,"blank-color":t.imgBlankColor},null,8,["alt","src","width","height","blank","blank-color"])])),t.caption||t.captionHtml||t.text||t.textHtml||(0,i.SU)(l)?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.contentTag),{key:0,class:(0,s.C_)(["carousel-caption",(0,i.SU)(u)])},{default:(0,o.w5)((()=>[t.caption||t.captionHtml?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.captionTag),{key:0},{default:(0,o.w5)((()=>[t.captionHtml?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:t.captionHtml},null,8,th)):((0,o.wg)(),(0,o.iD)("span",eh,(0,s.zw)(t.caption),1))])),_:1})):(0,o.kq)("",!0),t.text||t.textHtml?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.textTag),{key:1},{default:(0,o.w5)((()=>[t.textHtml?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:t.textHtml},null,8,nh)):((0,o.wg)(),(0,o.iD)("span",rh,(0,s.zw)(t.text),1))])),_:1})):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"default")])),_:3},8,["class"])):(0,o.kq)("",!0)],14,Qu))}}),oh=Ul("",[],{type:[Boolean,String,Number],default:!1}),sh=Ul("offset",[""],{type:[String,Number],default:null}),ah=Ul("order",[""],{type:[String,Number],default:null}),lh=(0,o.aZ)({name:"BCol",props:{col:{type:[Boolean,String],default:!1},cols:{type:[String,Number],default:null},...oh,offset:{type:[String,Number],default:null},...sh,order:{type:[String,Number],default:null},...ah,alignSelf:{type:String,default:null},tag:{type:String,default:"div"}},setup(t){const e=[{content:oh,propPrefix:"cols",classPrefix:"col"},{content:sh,propPrefix:"offset"},{content:ah,propPrefix:"order"}],n=ec((0,i.Vh)(t,"col")),r=(0,o.Fl)((()=>e.flatMap((e=>Fl(t,e.content,e.propPrefix,e.classPrefix)))));return{computedClasses:(0,o.Fl)((()=>[r.value,{col:n.value||!r.value.some((t=>/^col-/.test(t)))&&!t.cols,[`col-${t.cols}`]:!!t.cols,[`offset-${t.offset}`]:!!t.offset,[`order-${t.order}`]:!!t.order,[`align-self-${t.alignSelf}`]:!!t.alignSelf}]))}}});function ch(t,e,n,r,i,a){return(0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(t.computedClasses)},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},8,["class"])}const uh=tu(lh,[["render",ch]]),hh={autoHide:!0,delay:5e3,noCloseButton:!1,pos:"top-right",value:!0};class dh{constructor(t){ms(this,"vm"),ms(this,"containerPositions"),(0,i.PG)(t)?this.vm=t:this.vm=(0,i.qj)(t),this.containerPositions=(0,o.Fl)((()=>{const t=new Set([]);return this.vm.toasts.map((e=>{e.options.pos&&t.add(e.options.pos)})),t}))}toasts(t){return t?(0,o.Fl)((()=>this.vm.toasts.filter((e=>{if(e.options.pos===t&&e.options.value)return e})))):(0,o.Fl)((()=>this.vm.toasts))}remove(...t){this.vm.toasts=this.vm.toasts.filter((e=>{if(e.options.id&&!t.includes(e.options.id))return e}))}isRoot(){var t;return null!=(t=this.vm.root)&&t}show(t,e=hh){const n={id:zl(),...hh,...e},r={options:(0,i.qj)(n),content:t};return this.vm.toasts.push(r),r}info(t,e=hh){return this.show(t,{variant:"info",...e})}danger(t,e=hh){return this.show(t,{variant:"danger",...e})}warning(t,e=hh){return this.show(t,{variant:"warning",...e})}success(t,e=hh){return this.show(t,{variant:"success",...e})}hide(){}}class fh{constructor(){ms(this,"vms"),ms(this,"rootInstance"),ms(this,"useToast",vh),this.vms={}}getOrCreateViewModel(t){if(!t){if(this.rootInstance)return this.vms[this.rootInstance];const t={root:!0,toasts:[],container:void 0,id:Symbol("toast")};return this.rootInstance=t.id,this.vms[t.id]=t,t}if(t.root){if(this.rootInstance)return this.vms[this.rootInstance];this.rootInstance=t.id}return this.vms[t.id]=t,t}getVM(t){return!t&&this.rootInstance?this.vms[this.rootInstance]:t?this.vms[t]:void 0}}const ph=Symbol(),mh=Symbol(),gh={container:void 0,toasts:[],root:!1};function yh(){return(0,o.f3)(mh)}function vh(t,e=ph){const n=(0,o.f3)(yh());if(!t)return new dh(n.getOrCreateViewModel());const r={id:Symbol("toastInstance")},i={...gh,...r,...t},s=n.getOrCreateViewModel(i);return new dh(s)}const wh={install:(t,e={})=>{var n,r,i,o;t.provide(mh,null!=(r=null==(n=null==e?void 0:e.BToast)?void 0:n.injectkey)?r:ph),t.provide(null!=(o=null==(i=null==e?void 0:e.BToast)?void 0:i.injectkey)?o:ph,new fh)}},bh="toast-title",_h=1e3,Sh=(0,o.aZ)({components:{BLink:nu},props:{...Jc,delay:{type:Number,default:5e3},bodyClass:{type:String},body:{type:[Object,String]},headerClass:{type:String},headerTag:{type:String,default:"div"},animation:{type:[Boolean,String],default:!0},id:{type:String},isStatus:{type:[Boolean,String],default:!1},autoHide:{type:[Boolean,String],default:!0},noCloseButton:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noHoverPause:{type:[Boolean,String],default:!1},solid:{type:[Boolean,String],default:!1},static:{type:[Boolean,String],default:!1},title:{type:String},modelValue:{type:[Boolean,String],default:!1},toastClass:{type:Array},variant:{type:String}},emits:["destroyed","update:modelValue"],setup(t,{emit:e,slots:n}){ec((0,i.Vh)(t,"animation"));const r=ec((0,i.Vh)(t,"isStatus")),s=ec((0,i.Vh)(t,"autoHide")),a=ec((0,i.Vh)(t,"noCloseButton")),l=ec((0,i.Vh)(t,"noFade")),c=ec((0,i.Vh)(t,"noHoverPause"));ec((0,i.Vh)(t,"solid")),ec((0,i.Vh)(t,"static"));const u=ec((0,i.Vh)(t,"modelValue")),h=(0,i.iH)(!1),d=(0,i.iH)(!1),f=(0,i.iH)(!1),p=(0,o.Fl)((()=>({[`b-toast-${t.variant}`]:void 0!==t.variant,show:f.value||h.value})));let m,g,y;const v=()=>{typeof m>"u"||(clearTimeout(m),m=void 0)},w=(0,o.Fl)((()=>Math.max(Gl(t.delay,0),_h))),b=()=>{u.value&&(g=y=0,v(),d.value=!0,Nl((()=>{f.value=!1})))},_=()=>{v(),e("update:modelValue",!0),g=y=0,d.value=!1,(0,o.Y3)((()=>{Nl((()=>{f.value=!0}))}))},S=()=>{if(!s.value||c.value||!m||y)return;const t=Date.now()-g;t>0&&(v(),y=Math.max(w.value-t,_h))},E=()=>{(!s.value||c.value||!y)&&(y=g=0),A()};(0,o.YP)((()=>u.value),(t=>{t?_():b()}));const A=()=>{v(),s.value&&(m=setTimeout(b,y||w.value),g=Date.now(),y=0)},x=()=>{h.value=!0,e("update:modelValue",!0)},C=()=>{h.value=!1,A()},T=()=>{h.value=!0},M=()=>{h.value=!1,y=g=0,e("update:modelValue",!1)};(0,o.Ah)((()=>{v(),s.value&&e("destroyed",t.id)})),(0,o.bv)((()=>{(0,o.Y3)((()=>{u.value&&Nl((()=>{_()}))}))}));const I=()=>{(0,o.Y3)((()=>{Nl((()=>{b()}))}))};return()=>{const e=()=>{const e=[],r=Wl(bh,{hide:b},n);r?e.push((0,o.h)(r)):t.title&&e.push((0,o.h)("strong",{class:"me-auto"},t.title)),!a.value&&0!==e.length&&e.push((0,o.h)(Xc,{class:["btn-close"],onClick:()=>{b()}}));const i=[];if(e.length>0&&i.push((0,o.h)(t.headerTag,{class:"toast-header"},{default:()=>e})),Wl("default",{hide:b},n)||t.body){const e=(0,o.h)(tc(t)?"b-link":"div",{class:["toast-body",t.bodyClass],onClick:tc(t)?{click:I}:{}},Wl("default",{hide:b},n)||t.body);i.push(e)}return(0,o.h)("div",{class:["toast",t.toastClass,p.value],tabindex:"0"},i)};return(0,o.h)("div",{class:["b-toast"],id:t.id,role:d.value?null:r.value?"status":"alert","aria-live":d.value?null:r.value?"polite":"assertive","aria-atomic":d.value?null:"true",onmouseenter:S,onmouseleave:E},[(0,o.h)(qc,{noFade:l.value,onAfterEnter:C,onBeforeEnter:x,onAfterLeave:M,onBeforeLeave:T},(()=>[f.value?e():""]))])}}}),Eh=(0,o.aZ)({__name:"BToaster",props:{position:{default:"top-right"},instance:null},setup(t){const e=t,n={"top-left":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-right":"top-0 end-0","middle-left":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-right":"top-50 end-0 translate-middle-y","bottom-left":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-right":"bottom-0 end-0"},r=(0,o.Fl)((()=>n[e.position])),a=t=>{var n;null==(n=e.instance)||n.remove(t)};return(e,n)=>{var l;return(0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)([[(0,i.SU)(r)],"b-toaster position-fixed p-3"]),style:{"z-index":"11"}},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(null==(l=t.instance)?void 0:l.toasts(t.position).value,(t=>((0,o.wg)(),(0,o.j4)(Sh,{id:t.options.id,key:t.options.id,modelValue:t.options.value,"onUpdate:modelValue":e=>t.options.value=e,"auto-hide":t.options.autoHide,delay:t.options.delay,"no-close-button":t.options.noCloseButton,title:t.content.title,body:t.content.body,component:t.content.body,variant:t.options.variant,onDestroyed:a},null,8,["id","modelValue","onUpdate:modelValue","auto-hide","delay","no-close-button","title","body","component","variant"])))),128))],2)}}}),Ah=(0,o.aZ)({props:{gutterX:{type:String,default:null},gutterY:{type:String,default:null},fluid:{type:[Boolean,String],default:!1},toast:{type:Object},position:{type:String,required:!1}},setup(t,{slots:e,expose:n}){const r=(0,i.iH)();let s;const a=(0,o.Fl)((()=>({container:!t.fluid,["container-fluid"]:"boolean"==typeof t.fluid&&t.fluid,[`container-${t.fluid}`]:"string"==typeof t.fluid,[`gx-${t.gutterX}`]:null!==t.gutterX,[`gy-${t.gutterY}`]:null!==t.gutterY})));return(0,o.bv)((()=>{t.toast})),t.toast&&(s=vh({container:r,root:t.toast.root}),n({})),()=>{var n;const i=[];return null==s||s.containerPositions.value.forEach((t=>{i.push((0,o.h)(Eh,{key:t,instance:s,position:t}))})),(0,o.h)("div",{class:[a.value,t.position],ref:r},[...i,null==(n=e.default)?void 0:n.call(e)])}},methods:{}}),xh={class:"visually-hidden"},Ch=["aria-labelledby","role"],Th=(0,o.aZ)({__name:"BDropdown",props:{id:null,menuClass:null,size:null,splitClass:null,splitVariant:null,text:null,toggleClass:null,autoClose:{type:[Boolean,String],default:!0},block:{default:!1},boundary:{default:"clippingParents"},dark:{default:!1},disabled:{default:!1},isNav:{default:!1},dropup:{default:!1},dropright:{default:!1},dropleft:{default:!1},noFlip:{default:!1},offset:{default:0},popperOpts:{default:()=>({})},right:{default:!1},role:{default:"menu"},split:{default:!1},splitButtonType:{default:"button"},splitHref:{default:void 0},noCaret:{default:!1},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"}},emits:["show","shown","hide","hidden","click","toggle"],setup(t,{expose:e,emit:n}){const r=t,a=mc((0,i.Vh)(r,"id"),"dropdown"),l=ec((0,i.Vh)(r,"block")),c=ec((0,i.Vh)(r,"dark")),u=ec((0,i.Vh)(r,"dropup")),h=ec((0,i.Vh)(r,"dropright")),d=ec((0,i.Vh)(r,"isNav")),f=ec((0,i.Vh)(r,"dropleft")),p=ec((0,i.Vh)(r,"right")),m=ec((0,i.Vh)(r,"split")),g=ec((0,i.Vh)(r,"noCaret")),y=(0,i.iH)(),v=(0,i.iH)(),w=(0,i.iH)(),b=(0,o.Fl)((()=>({"d-grid":l.value,"d-flex":l.value&&m.value}))),_=(0,o.Fl)((()=>[m.value?r.splitClass:r.toggleClass,{"nav-link":d.value,"dropdown-toggle":!m.value,"dropdown-toggle-no-caret":g.value&&!m.value,"w-100":m.value&&l.value}])),S=(0,o.Fl)((()=>[r.menuClass,{"dropdown-menu-dark":c.value,"dropdown-menu-end":p.value}])),E=(0,o.Fl)((()=>({"data-bs-toggle":m.value?void 0:"dropdown","aria-expanded":!!m.value&&void 0,ref:m.value?void 0:v,href:m.value?r.splitHref:void 0}))),A=(0,o.Fl)((()=>({ref:m.value?v:void 0}))),x=()=>{var t;null==(t=w.value)||t.hide()},C=t=>{m.value&&n("click",t)};return sc(y,"show.bs.dropdown",(()=>n("show"))),sc(y,"shown.bs.dropdown",(()=>n("shown"))),sc(y,"hide.bs.dropdown",(()=>n("hide"))),sc(y,"hidden.bs.dropdown",(()=>n("hidden"))),(0,o.bv)((()=>{var t;w.value=new Hn(null==(t=v.value)?void 0:t.$el,{autoClose:r.autoClose,boundary:r.boundary,offset:r.offset?r.offset.toString():"",reference:r.offset||m.value?"parent":"toggle",popperConfig:t=>{const e={placement:"bottom-start",modifiers:r.noFlip?[{name:"flip",options:{fallbackPlacements:[]}}]:[]};return u.value?e.placement=p.value?"top-end":"top-start":h.value?e.placement="right-start":f.value?e.placement="left-start":p.value&&(e.placement="bottom-end"),jl(t,jl(e,r.popperOpts))}})})),e({hide:x}),(e,r)=>((0,o.wg)(),(0,o.iD)("div",{ref_key:"parent",ref:y,class:(0,s.C_)([(0,i.SU)(b),"btn-group"])},[(0,o.Wm)(ou,(0,o.dG)({id:(0,i.SU)(a),variant:t.splitVariant||t.variant,size:t.size,class:(0,i.SU)(_),disabled:t.disabled,type:t.splitButtonType},(0,i.SU)(E),{onClick:C}),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"button-content",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["id","variant","size","class","disabled","type"]),(0,i.SU)(m)?((0,o.wg)(),(0,o.j4)(ou,(0,o.dG)({key:0,variant:t.variant,size:t.size,disabled:t.disabled},(0,i.SU)(A),{class:[t.toggleClass,"dropdown-toggle-split dropdown-toggle"],"data-bs-toggle":"dropdown","aria-expanded":"false",onClick:r[0]||(r[0]=t=>n("toggle"))}),{default:(0,o.w5)((()=>[(0,o._)("span",xh,[(0,o.WI)(e.$slots,"toggle-text",{},(()=>[(0,o.Uk)((0,s.zw)(t.toggleText),1)]))])])),_:3},16,["variant","size","disabled","class"])):(0,o.kq)("",!0),(0,o._)("ul",{class:(0,s.C_)(["dropdown-menu",(0,i.SU)(S)]),"aria-labelledby":(0,i.SU)(a),role:t.role},[(0,o.WI)(e.$slots,"default")],10,Ch)],2))}}),Mh={role:"presentation"},Ih=(0,o.aZ)({__name:"BDropdownDivider",props:{tag:{default:"hr"}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.iD)("li",Mh,[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:"dropdown-divider",role:"separator","aria-orientation":"horizontal"}))]))}}),kh={},Oh={role:"presentation"},Rh={class:"px-4 py-3"};function Dh(t,e){return(0,o.wg)(),(0,o.iD)("li",Oh,[(0,o._)("form",Rh,[(0,o.WI)(t.$slots,"default")])])}const Nh=tu(kh,[["render",Dh]]),Ph={role:"presentation"},Lh=["id","aria-describedby"],Bh={inheritAttrs:!1},Uh=(0,o.aZ)({...Bh,__name:"BDropdownGroup",props:{id:null,ariaDescribedby:null,header:null,headerClass:null,headerTag:{default:"header"},headerVariant:null},setup(t){const e=t,n=(0,o.Fl)((()=>e.id?`${e.id}_group_dd_header`:void 0)),r=(0,o.Fl)((()=>"header"===e.headerTag?void 0:"heading")),a=(0,o.Fl)((()=>[e.headerClass,{[`text-${e.headerVariant}`]:void 0!==e.headerVariant}]));return(e,l)=>((0,o.wg)(),(0,o.iD)("li",Ph,[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.headerTag),{id:(0,i.SU)(n),class:(0,s.C_)(["dropdown-header",(0,i.SU)(a)]),role:(0,i.SU)(r)},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"header",{},(()=>[(0,o.Uk)((0,s.zw)(t.header),1)]))])),_:3},8,["id","class","role"])),(0,o._)("ul",(0,o.dG)({id:t.id,role:"group",class:"list-unstyled"},e.$attrs,{"aria-describedby":t.ariaDescribedby||(0,i.SU)(n)}),[(0,o.WI)(e.$slots,"default")],16,Lh)]))}}),Fh={},zh={class:"dropdown-header"};function Vh(t,e){return(0,o.wg)(),(0,o.iD)("li",null,[(0,o._)("h6",zh,[(0,o.WI)(t.$slots,"default")])])}const Hh=tu(Fh,[["render",Vh]]),jh={inheritAttrs:!1},Wh=(0,o.aZ)({...jh,__name:"BDropdownItem",props:{href:null,linkClass:null,active:{default:!1},disabled:{default:!1},rel:{default:void 0},target:{default:"_self"},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"active")),a=ec((0,i.Vh)(n,"disabled")),l=(0,o.l1)(),c=(0,o.Fl)((()=>[n.linkClass,{active:r.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}])),u=(0,o.Fl)((()=>n.href?"a":l.to?nu:"button")),h=(0,o.Fl)((()=>({disabled:a.value,"aria-current":r.value?"true":null,href:"a"===u.value?n.href:null,rel:n.rel,type:"button"===u.value?"button":null,target:n.target,...l.to?{activeClass:"active",...l}:{}}))),d=t=>e("click",t);return(t,e)=>((0,o.wg)(),(0,o.iD)("li",{role:"presentation",class:(0,s.C_)(t.$attrs.class)},[((0,o.wg)(),(0,o.j4)((0,o.LL)((0,i.SU)(u)),(0,o.dG)({class:["dropdown-item",(0,i.SU)(c)]},(0,i.SU)(h),{onClick:d}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16,["class"]))],2))}}),Gh=["disabled"],$h={inheritAttrs:!1},qh=(0,o.aZ)({...$h,__name:"BDropdownItemButton",props:{buttonClass:null,active:{default:!1},activeClass:{default:"active"},disabled:{default:!1},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"active")),a=ec((0,i.Vh)(n,"disabled")),l=(0,o.Fl)((()=>[n.buttonClass,{[n.activeClass]:r.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}])),c=t=>e("click",t);return(t,e)=>((0,o.wg)(),(0,o.iD)("li",{role:"presentation",class:(0,s.C_)(t.$attrs.class)},[(0,o._)("button",{role:"menu",type:"button",class:(0,s.C_)(["dropdown-item",(0,i.SU)(l)]),disabled:(0,i.SU)(a),onClick:c},[(0,o.WI)(t.$slots,"default")],10,Gh)],2))}}),Yh={role:"presentation"},Xh={class:"px-4 py-1 mb-0 text-muted"},Zh=(0,o.aZ)({__name:"BDropdownText",props:{text:{default:""}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.iD)("li",Yh,[(0,o._)("p",Xh,[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])]))}}),Kh=["id","novalidate","onSubmit"],Jh=(0,o.aZ)({__name:"BForm",props:{id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"floating")),l=ec((0,i.Vh)(n,"novalidate")),c=ec((0,i.Vh)(n,"validated")),u=(0,o.Fl)((()=>({"form-floating":r.value,"was-validated":c.value}))),h=t=>e("submit",t);return(e,n)=>((0,o.wg)(),(0,o.iD)("form",{id:t.id,novalidate:(0,i.SU)(l),class:(0,s.C_)((0,i.SU)(u)),onSubmit:(0,a.iM)(h,["prevent"])},[(0,o.WI)(e.$slots,"default")],42,Kh))}}),Qh={class:"form-floating"},td=["for"],ed=(0,o.aZ)({__name:"BFormFloatingLabel",props:{labelFor:null,label:null,text:null},setup(t){return(e,n)=>((0,o.wg)(),(0,o.iD)("div",Qh,[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)])),(0,o._)("label",{for:t.labelFor},[(0,o.WI)(e.$slots,"label",{},(()=>[(0,o.Uk)((0,s.zw)(t.label),1)]))],8,td)]))}}),nd=(0,o.aZ)({__name:"BFormInvalidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,text:null,role:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=ec((0,i.Vh)(e,"forceShow")),r=ec((0,i.Vh)(e,"state")),a=ec((0,i.Vh)(e,"tooltip")),l=(0,o.Fl)((()=>!0===n.value||!1===r.value)),c=(0,o.Fl)((()=>({"d-block":l.value,"invalid-feedback":!a.value,"invalid-tooltip":a.value}))),u=(0,o.Fl)((()=>({id:e.id,role:e.role,"aria-live":e.ariaLive,"aria-atomic":e.ariaLive?"true":void 0})));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),(0,o.dG)({class:(0,i.SU)(c)},(0,i.SU)(u)),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},16,["class"]))}}),rd=(0,o.aZ)({__name:"BFormRow",props:{tag:{default:"div"}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:"row d-flex flex-wrap"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3}))}}),id=(0,o.aZ)({__name:"BFormText",props:{id:null,inline:{default:!1},tag:{default:"small"},text:null,textVariant:{default:"muted"}},setup(t){const e=t,n=ec((0,i.Vh)(e,"inline")),r=(0,o.Fl)((()=>[[`text-${e.textVariant}`],{"form-text":!n.value}]));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:t.id,class:(0,s.C_)((0,i.SU)(r))},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["id","class"]))}}),od=(0,o.aZ)({__name:"BFormValidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,role:null,text:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=ec((0,i.Vh)(e,"forceShow")),r=ec((0,i.Vh)(e,"state")),a=ec((0,i.Vh)(e,"tooltip")),l=(0,o.Fl)((()=>!0===n.value||!0===r.value)),c=(0,o.Fl)((()=>({"d-block":l.value,"valid-feedback":!a.value,"valid-tooltip":a.value}))),u=(0,o.Fl)((()=>e.ariaLive?"true":void 0));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:t.id,role:t.role,"aria-live":t.ariaLive,"aria-atomic":(0,i.SU)(u),class:(0,s.C_)((0,i.SU)(c))},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3},8,["id","role","aria-live","aria-atomic","class"]))}}),sd=["id","disabled","required","name","form","aria-label","aria-labelledby","aria-required","value","indeterminate"],ad=["for"],ld={inheritAttrs:!1},cd=(0,o.aZ)({...ld,__name:"BFormCheckbox",props:{ariaLabel:null,ariaLabelledBy:null,form:null,indeterminate:null,name:null,id:{default:void 0},autofocus:{default:!1},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:void 0},size:{default:"md"},state:{default:void 0},uncheckedValue:{type:[Array,Set,Boolean,String,Object,Number],default:!1},value:{type:[Array,Set,Boolean,String,Object,Number],default:!0},modelValue:{type:[Array,Set,Boolean,String,Object,Number],default:void 0}},emits:["update:modelValue","input","change"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),l=mc((0,i.Vh)(n,"id"),"form-check"),c=ec((0,i.Vh)(n,"indeterminate")),u=ec((0,i.Vh)(n,"autofocus")),h=ec((0,i.Vh)(n,"plain")),d=ec((0,i.Vh)(n,"button")),f=ec((0,i.Vh)(n,"switch")),p=ec((0,i.Vh)(n,"disabled")),m=ec((0,i.Vh)(n,"inline")),g=ec((0,i.Vh)(n,"required")),y=ec((0,i.Vh)(n,"state")),v=(0,i.iH)(null),w=(0,i.iH)(!1),b=(0,o.Fl)((()=>!Cl(r.default))),_=(0,o.Fl)({get:()=>n.uncheckedValue?Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:n.modelValue===n.value:n.modelValue,set:t=>{let r=t;Array.isArray(n.modelValue)?n.uncheckedValue&&(r=n.modelValue,t?(r.indexOf(n.uncheckedValue)>-1&&r.splice(r.indexOf(n.uncheckedValue),1),r.push(n.value)):(r.indexOf(n.value)>-1&&r.splice(r.indexOf(n.value),1),r.push(n.uncheckedValue))):r=t?n.value:n.uncheckedValue,e("input",r),e("update:modelValue",r),e("change",r)}}),S=(0,o.Fl)((()=>Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:JSON.stringify(n.modelValue)===JSON.stringify(n.value))),E=(0,i.qj)({plain:(0,i.Vh)(h,"value"),button:(0,i.Vh)(d,"value"),inline:(0,i.Vh)(m,"value"),switch:(0,i.Vh)(f,"value"),size:(0,i.Vh)(n,"size"),state:(0,i.Vh)(y,"value"),buttonVariant:(0,i.Vh)(n,"buttonVariant")}),A=ac(E),x=lc(E),C=cc(E);return(0,o.bv)((()=>{u.value&&v.value.focus()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)((0,i.SU)(A))},[(0,o.wy)((0,o._)("input",(0,o.dG)({id:(0,i.SU)(l)},e.$attrs,{ref_key:"input",ref:v,"onUpdate:modelValue":n[0]||(n[0]=t=>(0,i.dq)(_)?_.value=t:null),class:(0,i.SU)(x),type:"checkbox",disabled:(0,i.SU)(p),required:!!t.name&&!!(0,i.SU)(g),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledBy,"aria-required":t.name&&(0,i.SU)(g)?"true":void 0,value:t.value,indeterminate:(0,i.SU)(c),onFocus:n[1]||(n[1]=t=>w.value=!0),onBlur:n[2]||(n[2]=t=>w.value=!1)}),null,16,sd),[[a.e8,(0,i.SU)(_)]]),(0,i.SU)(b)||!(0,i.SU)(h)?((0,o.wg)(),(0,o.iD)("label",{key:0,for:(0,i.SU)(l),class:(0,s.C_)([(0,i.SU)(C),{active:(0,i.SU)(S),focus:w.value}])},[(0,o.WI)(e.$slots,"default")],10,ad)):(0,o.kq)("",!0)],2))}}),ud=["id"],hd=["innerHTML"],dd=["textContent"],fd=(0,o.aZ)({__name:"BFormCheckboxGroup",props:{id:null,form:null,modelValue:{default:()=>[]},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},name:null,options:{default:()=>[]},plain:{default:!1},required:{default:!1},size:null,stacked:{default:!1},state:{default:void 0},switches:{default:!1},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),a="BFormCheckbox",l=mc((0,i.Vh)(n,"id"),"checkbox"),c=mc((0,i.Vh)(n,"name"),"checkbox");ec((0,i.Vh)(n,"autofocus"));const u=ec((0,i.Vh)(n,"buttons")),h=ec((0,i.Vh)(n,"disabled"));ec((0,i.Vh)(n,"plain"));const d=ec((0,i.Vh)(n,"required")),f=ec((0,i.Vh)(n,"stacked")),p=ec((0,i.Vh)(n,"state")),m=ec((0,i.Vh)(n,"switches")),g=ec((0,i.Vh)(n,"validated")),y=(0,o.Fl)({get:()=>n.modelValue,set:t=>{if(JSON.stringify(t)===JSON.stringify(n.modelValue))return;const r=n.options.filter((e=>t.map((t=>JSON.stringify(t))).includes(JSON.stringify("string"==typeof e?e:e[n.valueField])))).map((t=>"string"==typeof t?t:t[n.valueField]));e("input",r),e("update:modelValue",r),e("change",r)}}),v=(0,o.Fl)((()=>(r.first?dc(r.first(),a,h.value):[]).concat(n.options.map((t=>fc(t,n)))).concat(r.default?dc(r.default(),a,h.value):[]).map(((t,e)=>pc(t,e,n,c,l))).map((t=>({...t,props:{switch:m.value,...t.props}}))))),w=(0,i.qj)({required:(0,i.Vh)(d,"value"),ariaInvalid:(0,i.Vh)(n,"ariaInvalid"),state:(0,i.Vh)(p,"value"),validated:(0,i.Vh)(g,"value"),buttons:(0,i.Vh)(u,"value"),stacked:(0,i.Vh)(f,"value"),size:(0,i.Vh)(n,"size")}),b=uc(w),_=hc(w);return(t,e)=>((0,o.wg)(),(0,o.iD)("div",(0,o.dG)((0,i.SU)(b),{id:(0,i.SU)(l),role:"group",class:[(0,i.SU)(_),"bv-no-focus-ring"],tabindex:"-1"}),[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(v),((t,n)=>((0,o.wg)(),(0,o.j4)(cd,(0,o.dG)({key:n,modelValue:(0,i.SU)(y),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,i.dq)(y)?y.value=t:null)},t.props),{default:(0,o.w5)((()=>[t.html?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:t.html},null,8,hd)):((0,o.wg)(),(0,o.iD)("span",{key:1,textContent:(0,s.zw)(t.text)},null,8,dd))])),_:2},1040,["modelValue"])))),128))],16,ud))}}),pd=["input","select","textarea"],md=pd.map((t=>`${t}:not([disabled])`)).join(),gd=[...pd,"a","button","label"],yd="label",vd="invalid-feedback",wd="valid-feedback",bd="description",_d="default",Sd=(0,o.aZ)({components:{BCol:uh,BFormInvalidFeedback:nd,BFormRow:rd,BFormText:id,BFormValidFeedback:od},props:{contentCols:{type:[Boolean,String,Number],required:!1},contentColsLg:{type:[Boolean,String,Number],required:!1},contentColsMd:{type:[Boolean,String,Number],required:!1},contentColsSm:{type:[Boolean,String,Number],required:!1},contentColsXl:{type:[Boolean,String,Number],required:!1},description:{type:[String],required:!1},disabled:{type:[Boolean,String],default:!1},feedbackAriaLive:{type:String,default:"assertive"},id:{type:String,required:!1},invalidFeedback:{type:String,required:!1},label:{type:String,required:!1},labelAlign:{type:[Boolean,String,Number],required:!1},labelAlignLg:{type:[Boolean,String,Number],required:!1},labelAlignMd:{type:[Boolean,String,Number],required:!1},labelAlignSm:{type:[Boolean,String,Number],required:!1},labelAlignXl:{type:[Boolean,String,Number],required:!1},labelClass:{type:[Array,Object,String],required:!1},labelCols:{type:[Boolean,String,Number],required:!1},labelColsLg:{type:[Boolean,String,Number],required:!1},labelColsMd:{type:[Boolean,String,Number],required:!1},labelColsSm:{type:[Boolean,String,Number],required:!1},labelColsXl:{type:[Boolean,String,Number],required:!1},labelFor:{type:String,required:!1},labelSize:{type:String,required:!1},labelSrOnly:{type:[Boolean,String],default:!1},state:{type:[Boolean,String],default:null},tooltip:{type:[Boolean,String],default:!1},validFeedback:{type:String,required:!1},validated:{type:[Boolean,String],default:!1},floating:{type:[Boolean,String],default:!1}},setup(t,{attrs:e}){const n=ec((0,i.Vh)(t,"disabled")),r=ec((0,i.Vh)(t,"labelSrOnly")),s=ec((0,i.Vh)(t,"state")),a=ec((0,i.Vh)(t,"tooltip")),l=ec((0,i.Vh)(t,"validated")),c=ec((0,i.Vh)(t,"floating")),u=null,h=["xs","sm","md","lg","xl"],d=(t,e)=>h.reduce(((n,r)=>{const i=Kl("xs"===r?"":r,`${e}Align`),o=t[i]||null;return o&&("xs"===r?n.push(`text-${o}`):n.push(`text-${r}-${o}`)),n}),[]),f=(t,e)=>h.reduce(((n,r)=>{const i=Kl("xs"===r?"":r,`${e}Cols`);let o=t[i];return o=""===o||(o||!1),"boolean"!=typeof o&&"auto"!==o&&(o=$l(o,0),o=o>0&&o),o&&("xs"===r?n.cols=o:n[r||("boolean"==typeof o?"col":"cols")]=o),n}),{}),p=(0,i.iH)(),m=(e,n=null)=>{if(ol&&t.labelFor){const r=Tl(`#${el(t.labelFor)}`,p);if(r){const t="aria-describedby",i=(e||"").split($a),o=(n||"").split($a),s=(Il(r,t)||"").split($a).filter((t=>!o.includes(t))).concat(i).filter(((t,e,n)=>n.indexOf(t)===e)).filter((t=>t)).join(" ").trim();s?Ol(r,t,s):Rl(r,t)}}},g=(0,o.Fl)((()=>f(t,"content"))),y=(0,o.Fl)((()=>d(t,"label"))),v=(0,o.Fl)((()=>f(t,"label"))),w=(0,o.Fl)((()=>Object.keys(g.value).length>0||Object.keys(v.value).length>0)),b=(0,o.Fl)((()=>"boolean"==typeof s.value?s.value:null)),_=(0,o.Fl)((()=>{const t=b.value;return!0===t?"is-valid":!1===t?"is-invalid":null})),S=(0,o.Fl)((()=>Vl(e.ariaInvalid,s.value)));return(0,o.YP)((()=>u),((t,e)=>{t!==e&&m(t,e)})),(0,o.bv)((()=>{(0,o.Y3)((()=>{m(u)}))})),{disabledBoolean:n,labelSrOnlyBoolean:r,stateBoolean:s,tooltipBoolean:a,validatedBoolean:l,floatingBoolean:c,ariaDescribedby:u,computedAriaInvalid:S,contentColProps:g,isHorizontal:w,labelAlignClasses:y,labelColProps:v,onLegendClick:e=>{if(t.labelFor)return;const{target:n}=e,r=n?n.tagName:"";if(-1!==gd.indexOf(r))return;const i=Ml(md,p).filter(xl);1===i.length&&El(i[0])},stateClass:_}},render(){const t=this.$props,e=this.$slots,n=mc(),r=!t.labelFor;let s=null;const a=Wl(yd,{},e)||t.label,l=a?zl("_BV_label_"):null;if(a||this.isHorizontal){const e=r?"legend":"label";if(this.labelSrOnlyBoolean)a&&(s=(0,o.h)(e,{class:"visually-hidden",id:l,for:t.labelFor||null},a)),s=this.isHorizontal?(0,o.h)(uh,this.labelColProps,{default:()=>s}):(0,o.h)("div",{},[s]);else{const n={onClick:r?this.onLegendClick:null,...this.isHorizontal?this.labelColProps:{},tag:this.isHorizontal?e:null,id:l,for:t.labelFor||null,tabIndex:r?"-1":null,class:[this.isHorizontal?"col-form-label":"form-label",{"bv-no-focus-ring":r,"col-form-label":this.isHorizontal||r,"pt-0":!this.isHorizontal&&r,"d-block":!this.isHorizontal&&!r,[`col-form-label-${t.labelSize}`]:!!t.labelSize},this.labelAlignClasses,t.labelClass]};s=this.isHorizontal?(0,o.h)(uh,n,{default:()=>a}):(0,o.h)(e,n,a)}}let c=null;const u=Wl(vd,{},e)||this.invalidFeedback,h=u?zl("_BV_feedback_invalid_"):void 0;u&&(c=(0,o.h)(nd,{ariaLive:t.feedbackAriaLive,id:h,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>u}));let d=null;const f=Wl(wd,{},e)||this.validFeedback,p=f?zl("_BV_feedback_valid_"):void 0;f&&(d=(0,o.h)(od,{ariaLive:t.feedbackAriaLive,id:p,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>f}));let m=null;const g=Wl(bd,{},e)||this.description,y=g?zl("_BV_description_"):void 0;g&&(m=(0,o.h)(id,{id:y},{default:()=>g}));const v=this.ariaDescribedby=[y,!1===this.stateBoolean?h:null,!0===this.stateBoolean?p:null].filter((t=>t)).join(" ")||null,w=[Wl(_d,{ariaDescribedby:v,descriptionId:y,id:n,labelId:l},e)||"",c,d,m];!this.isHorizontal&&this.floatingBoolean&&w.push(s);let b=(0,o.h)("div",{ref:"content",class:[{"form-floating":!this.isHorizontal&&this.floatingBoolean}]},w);this.isHorizontal&&(b=(0,o.h)(uh,{ref:"content",...this.contentColProps},{default:()=>w}));const _={class:["mb-3",this.stateClass,{"was-validated":this.validatedBoolean}],id:mc((0,i.Vh)(t,"id")).value,disabled:r?this.disabledBoolean:null,role:r?null:"group","aria-invalid":this.computedAriaInvalid,"aria-labelledby":r&&this.isHorizontal?l:null};return this.isHorizontal&&!r?(0,o.h)(rd,_,{default:()=>[s,b]}):(0,o.h)(r?"fieldset":"div",_,this.isHorizontal&&r?[(0,o.h)(rd,null,{default:()=>[s,b]})]:this.isHorizontal||!this.floatingBoolean?[s,b]:[b])}}),Ed=["text","number","email","password","search","url","tel","date","time","range","color"],Ad=(0,o.aZ)({props:{...gc,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:t=>Ed.includes(t)}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const{input:n,computedId:r,computedAriaInvalid:s,onInput:a,onChange:l,onBlur:c,focus:u,blur:h}=yc(t,e),d=(0,i.iH)(!1),f=(0,o.Fl)((()=>{const e="range"===t.type,n="color"===t.type;return{"form-control-highlighted":d.value,"form-range":e,"form-control":n||!t.plaintext&&!e,"form-control-color":n,"form-control-plaintext":t.plaintext&&!e&&!n,[`form-control-${t.size}`]:!!t.size,"is-valid":!0===t.state,"is-invalid":!1===t.state}})),p=(0,o.Fl)((()=>Ed.includes(t.type)?t.type:"text"));return{computedClasses:f,localType:p,input:n,computedId:r,computedAriaInvalid:s,onInput:a,onChange:l,onBlur:c,focus:u,blur:h,highlight:()=>{!0!==d.value&&(d.value=!0,setTimeout((()=>{d.value=!1}),2e3))}}}}),xd=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];function Cd(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)("input",(0,o.dG)({id:t.computedId,ref:"input",class:t.computedClasses,name:t.name||void 0,form:t.form||void 0,type:t.localType,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,min:t.min,max:t.max,step:t.step,list:"password"!==t.type?t.list:void 0,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid},t.$attrs,{onInput:e[0]||(e[0]=e=>t.onInput(e)),onChange:e[1]||(e[1]=e=>t.onChange(e)),onBlur:e[2]||(e[2]=e=>t.onBlur(e))}),null,16,xd)}const Td=tu(Ad,[["render",Cd]]),Md=["id","disabled","required","name","form","aria-label","aria-labelledby","value","aria-required"],Id=["for"],kd=(0,o.aZ)({__name:"BFormRadio",props:{ariaLabel:null,ariaLabelledby:null,form:null,id:null,name:null,size:null,autofocus:{default:!1},modelValue:{type:[Boolean,String,Array,Object,Number],default:void 0},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:!1},state:{default:void 0},value:{type:[String,Boolean,Object,Number],default:!0}},emits:["input","change","update:modelValue"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),l=mc((0,i.Vh)(n,"id"),"form-check"),c=ec((0,i.Vh)(n,"autofocus")),u=ec((0,i.Vh)(n,"plain")),h=ec((0,i.Vh)(n,"button")),d=ec((0,i.Vh)(n,"switch")),f=ec((0,i.Vh)(n,"disabled")),p=ec((0,i.Vh)(n,"inline")),m=ec((0,i.Vh)(n,"required")),g=ec((0,i.Vh)(n,"state")),y=(0,i.iH)(null),v=(0,i.iH)(!1),w=(0,o.Fl)({get:()=>Array.isArray(n.modelValue)?n.modelValue[0]:n.modelValue,set:t=>{const r=!!t&&n.value,i=Array.isArray(n.modelValue)?[r]:r;e("input",i),e("change",i),e("update:modelValue",i)}}),b=(0,o.Fl)((()=>Array.isArray(n.modelValue)?(n.modelValue||[]).find((t=>t===n.value)):JSON.stringify(n.modelValue)===JSON.stringify(n.value))),_=(0,o.Fl)((()=>!Cl(r.default))),S=(0,i.qj)({plain:(0,i.Vh)(u,"value"),button:(0,i.Vh)(h,"value"),inline:(0,i.Vh)(p,"value"),switch:(0,i.Vh)(d,"value"),size:(0,i.Vh)(n,"size"),state:(0,i.Vh)(g,"value"),buttonVariant:(0,i.Vh)(n,"buttonVariant")}),E=ac(S),A=lc(S),x=cc(S);return(0,o.bv)((()=>{c.value&&null!==y.value&&y.value.focus()})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)((0,i.SU)(E))},[(0,o.wy)((0,o._)("input",(0,o.dG)({id:(0,i.SU)(l)},e.$attrs,{ref_key:"input",ref:y,"onUpdate:modelValue":n[0]||(n[0]=t=>(0,i.dq)(w)?w.value=t:null),class:(0,i.SU)(A),type:"radio",disabled:(0,i.SU)(f),required:!!t.name&&(0,i.SU)(m),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,value:t.value,"aria-required":!(!t.name||!(0,i.SU)(m))||void 0,onFocus:n[1]||(n[1]=t=>v.value=!0),onBlur:n[2]||(n[2]=t=>v.value=!1)}),null,16,Md),[[a.G2,(0,i.SU)(w)]]),(0,i.SU)(_)||!1===(0,i.SU)(u)?((0,o.wg)(),(0,o.iD)("label",{key:0,for:(0,i.SU)(l),class:(0,s.C_)([(0,i.SU)(x),{active:(0,i.SU)(b),focus:v.value}])},[(0,o.WI)(e.$slots,"default")],10,Id)):(0,o.kq)("",!0)],2))}}),Od=["id"],Rd=["innerHTML"],Dd=["textContent"],Nd=(0,o.aZ)({__name:"BFormRadioGroup",props:{size:null,form:null,id:null,name:null,modelValue:{type:[String,Boolean,Array,Object,Number],default:""},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},plain:{default:!1},required:{default:!1},stacked:{default:!1},state:{default:void 0},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),a="BFormRadio",l=mc((0,i.Vh)(n,"id"),"radio"),c=mc((0,i.Vh)(n,"name"),"checkbox");ec((0,i.Vh)(n,"autofocus"));const u=ec((0,i.Vh)(n,"buttons")),h=ec((0,i.Vh)(n,"disabled"));ec((0,i.Vh)(n,"plain"));const d=ec((0,i.Vh)(n,"required")),f=ec((0,i.Vh)(n,"stacked")),p=ec((0,i.Vh)(n,"state")),m=ec((0,i.Vh)(n,"validated")),g=(0,o.Fl)({get:()=>n.modelValue,set:t=>{e("input",t),e("update:modelValue",t),e("change",t)}}),y=(0,o.Fl)((()=>(r.first?dc(r.first(),a,h.value):[]).concat(n.options.map((t=>fc(t,n)))).concat(r.default?dc(r.default(),a,h.value):[]).map(((t,e)=>pc(t,e,n,c,l))).map((t=>({...t}))))),v=(0,i.qj)({required:(0,i.Vh)(d,"value"),ariaInvalid:(0,i.Vh)(n,"ariaInvalid"),state:(0,i.Vh)(p,"value"),validated:(0,i.Vh)(m,"value"),buttons:(0,i.Vh)(u,"value"),stacked:(0,i.Vh)(f,"value"),size:(0,i.Vh)(n,"size")}),w=uc(v),b=hc(v);return(t,e)=>((0,o.wg)(),(0,o.iD)("div",(0,o.dG)((0,i.SU)(w),{id:(0,i.SU)(l),role:"radiogroup",class:[(0,i.SU)(b),"bv-no-focus-ring"],tabindex:"-1"}),[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(y),((t,n)=>((0,o.wg)(),(0,o.j4)(kd,(0,o.dG)({key:n,modelValue:(0,i.SU)(g),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,i.dq)(g)?g.value=t:null)},t.props),{default:(0,o.w5)((()=>[t.html?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:t.html},null,8,Rd)):((0,o.wg)(),(0,o.iD)("span",{key:1,textContent:(0,s.zw)(t.text)},null,8,Dd))])),_:2},1040,["modelValue"])))),128))],16,Od))}}),Pd=["value","disabled"],Ld=(0,o.aZ)({__name:"BFormSelectOption",props:{value:null,disabled:{default:!1}},setup(t){const e=ec((0,i.Vh)(t,"disabled"));return(n,r)=>((0,o.wg)(),(0,o.iD)("option",{value:t.value,disabled:(0,i.SU)(e)},[(0,o.WI)(n.$slots,"default")],8,Pd))}}),Bd=["label"],Ud=(0,o.aZ)({__name:"BFormSelectOptionGroup",props:{label:null,disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},textField:{default:"text"},valueField:{default:"value"}},setup(t){const e=t,n=(0,o.Fl)((()=>bc(e.options,"BFormSelectOptionGroup",e)));return(e,r)=>((0,o.wg)(),(0,o.iD)("optgroup",{label:t.label},[(0,o.WI)(e.$slots,"first"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(n),((t,n)=>((0,o.wg)(),(0,o.j4)(Ld,(0,o.dG)({key:n,value:t.value,disabled:t.disabled},e.$attrs,{innerHTML:t.html||t.text}),null,16,["value","disabled","innerHTML"])))),128)),(0,o.WI)(e.$slots,"default")],8,Bd))}}),Fd=["id","name","form","multiple","size","disabled","required","aria-required","aria-invalid"],zd=(0,o.aZ)({__name:"BFormSelect",props:{ariaInvalid:{default:void 0},autofocus:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},form:null,htmlField:{default:"html"},id:null,labelField:{default:"label"},multiple:{default:!1},name:null,options:{default:()=>[]},optionsField:{default:"options"},plain:{default:!1},required:{default:!1},selectSize:{default:0},size:null,state:{default:void 0},textField:{default:"text"},valueField:{default:"value"},modelValue:{default:""}},emits:["input","update:modelValue","change"],setup(t,{expose:e,emit:n}){const r=t,s=mc((0,i.Vh)(r,"id"),"input"),l=ec((0,i.Vh)(r,"autofocus")),c=ec((0,i.Vh)(r,"disabled")),u=ec((0,i.Vh)(r,"multiple")),h=ec((0,i.Vh)(r,"plain")),d=ec((0,i.Vh)(r,"required")),f=ec((0,i.Vh)(r,"state")),p=(0,i.iH)(),m=(0,o.Fl)((()=>({"form-control":h.value,[`form-control-${r.size}`]:r.size&&h.value,"form-select":!h.value,[`form-select-${r.size}`]:r.size&&!h.value,"is-valid":!0===f.value,"is-invalid":!1===f.value}))),g=(0,o.Fl)((()=>{if(r.selectSize||h.value)return r.selectSize})),y=(0,o.Fl)((()=>Vl(r.ariaInvalid,f.value))),v=(0,o.Fl)((()=>bc(r.options,"BFormSelect",r))),w=(0,o.Fl)({get(){return r.modelValue},set(t){n("change",t),n("update:modelValue",t),n("input",t)}}),b=()=>{var t;c.value||null==(t=p.value)||t.focus()},_=()=>{var t;c.value||null==(t=p.value)||t.blur()},S=()=>{(0,o.Y3)((()=>{var t;l.value&&(null==(t=p.value)||t.focus())}))};return(0,o.bv)(S),(0,o.dl)(S),e({blur:_,focus:b}),(e,n)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",(0,o.dG)({id:(0,i.SU)(s),ref_key:"input",ref:p},e.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=t=>(0,i.dq)(w)?w.value=t:null),class:(0,i.SU)(m),name:t.name,form:t.form||void 0,multiple:(0,i.SU)(u)||void 0,size:(0,i.SU)(g),disabled:(0,i.SU)(c),required:(0,i.SU)(d),"aria-required":!!(0,i.SU)(d)||void 0,"aria-invalid":(0,i.SU)(y)}),[(0,o.WI)(e.$slots,"first"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(v),((t,e)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e},[Array.isArray(t.options)?((0,o.wg)(),(0,o.j4)(Ud,{key:0,label:t.label,options:t.options},null,8,["label","options"])):((0,o.wg)(),(0,o.j4)(Ld,{key:1,value:t.value,disabled:t.disabled,innerHTML:t.html||t.text},null,8,["value","disabled","innerHTML"]))],64)))),128)),(0,o.WI)(e.$slots,"default")],16,Fd)),[[a.bM,(0,i.SU)(w)]])}}),Vd=["id"],Hd=(0,o.aZ)({__name:"BFormTag",props:{id:null,title:null,disabled:{default:!1},noRemove:{default:!1},pill:{default:!1},removeLabel:{default:"Remove tag"},tag:{default:"span"},variant:{default:"secondary"}},emits:["remove"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),a=mc((0,i.Vh)(n,"id")),l=ec((0,i.Vh)(n,"disabled")),c=ec((0,i.Vh)(n,"noRemove")),u=ec((0,i.Vh)(n,"pill")),h=(0,o.Fl)((()=>{var t,e,i;return null!=(i=(null!=(e=null==(t=r.default)?void 0:t.call(r)[0].children)?e:"").toString()||n.title)?i:""})),d=(0,o.Fl)((()=>`${a.value}taglabel__`)),f=(0,o.Fl)((()=>[`bg-${n.variant}`,{"text-dark":["warning","info","light"].includes(n.variant),"rounded-pill":u.value,disabled:l.value}]));return(n,r)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:(0,i.SU)(a),title:(0,i.SU)(h),class:(0,s.C_)(["badge b-form-tag d-inline-flex align-items-center mw-100",(0,i.SU)(f)]),"aria-labelledby":(0,i.SU)(d)},{default:(0,o.w5)((()=>[(0,o._)("span",{id:(0,i.SU)(d),class:"b-form-tag-content flex-grow-1 text-truncate"},[(0,o.WI)(n.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)((0,i.SU)(h)),1)]))],8,Vd),(0,i.SU)(l)||(0,i.SU)(c)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(Xc,{key:0,"aria-keyshortcuts":"Delete","aria-label":t.removeLabel,class:"b-form-tag-remove",white:!["warning","info","light"].includes(t.variant),"aria-describedby":(0,i.SU)(d),"aria-controls":t.id,onClick:r[0]||(r[0]=t=>e("remove",(0,i.SU)(h)))},null,8,["aria-label","white","aria-describedby","aria-controls"]))])),_:3},8,["id","title","class","aria-labelledby"]))}}),jd=["id"],Wd=["id","for","aria-live"],Gd=["id","aria-live"],$d=["id"],qd=["aria-controls"],Yd={role:"group",class:"d-flex"},Xd=["id","disabled","value","type","placeholder","form","required"],Zd=["disabled"],Kd={"aria-live":"polite","aria-atomic":"true"},Jd={key:0,class:"d-block invalid-feedback"},Qd={key:1,class:"form-text text-muted"},tf={key:2,class:"form-text text-muted"},ef=["name","value"],nf=(0,o.aZ)({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{default:!1},autofocus:{default:!1},disabled:{default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:null,inputClass:null,inputId:null,inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:null,limit:null,limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:null,noAddOnEnter:{default:!1},noOuterFocus:{default:!1},noTagRemove:{default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{default:!1},required:{default:!1},separator:null,state:{default:void 0},size:null,tagClass:null,tagPills:{default:!1},tagRemoveLabel:null,tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(t,{emit:e}){const n=t,r=mc(),a=ec((0,i.Vh)(n,"addOnChange")),l=ec((0,i.Vh)(n,"autofocus")),c=ec((0,i.Vh)(n,"disabled")),u=ec((0,i.Vh)(n,"noAddOnEnter")),h=ec((0,i.Vh)(n,"noOuterFocus")),d=ec((0,i.Vh)(n,"noTagRemove")),f=ec((0,i.Vh)(n,"removeOnDelete")),p=ec((0,i.Vh)(n,"required")),m=ec((0,i.Vh)(n,"state")),g=ec((0,i.Vh)(n,"tagPills")),y=(0,i.iH)(null),v=(0,o.Fl)((()=>n.inputId||`${r.value}input__`)),w=(0,i.iH)(n.modelValue),b=(0,i.iH)(""),_=(0,i.iH)(!1),S=(0,i.iH)(!1),E=(0,i.iH)(""),A=(0,i.iH)([]),x=(0,i.iH)([]),C=(0,i.iH)([]),T=(0,o.Fl)((()=>({[`form-control-${n.size}`]:void 0!==n.size,disabled:c.value,focus:S.value,"is-invalid":!1===m.value,"is-valid":!0===m.value}))),M=(0,o.Fl)((()=>w.value.includes(b.value))),I=(0,o.Fl)((()=>""!==b.value&&!n.tagValidator(b.value))),k=(0,o.Fl)((()=>w.value.length===n.limit)),O=(0,o.Fl)((()=>!I.value&&!M.value)),R=(0,o.Fl)((()=>({addButtonText:n.addButtonText,addButtonVariant:n.addButtonVariant,addTag:z,disableAddButton:O.value,disabled:c.value,duplicateTagText:n.duplicateTagText,duplicateTags:C.value,form:n.form,inputAttrs:{...n.inputAttrs,disabled:c.value,form:n.form,id:v,value:b},inputHandlers:{input:B,keydown:F,change:U},inputId:v,inputType:n.inputType,invalidTagText:n.invalidTagText,invalidTags:x.value,isDuplicate:M.value,isInvalid:I.value,isLimitReached:k.value,limitTagsText:n.limitTagsText,limit:n.limit,noTagRemove:d.value,placeholder:n.placeholder,removeTag:V,required:p.value,separator:n.separator,size:n.size,state:m.value,tagClass:n.tagClass,tagPills:g.value,tagRemoveLabel:n.tagRemoveLabel,tagVariant:n.tagVariant,tags:w.value})));(0,o.YP)((()=>n.modelValue),(t=>{w.value=t}));const D=()=>{var t;l.value&&(null==(t=y.value)||t.focus())},N=t=>{c.value?t.target.blur():e("focusin",t)},P=t=>{c.value||h.value||(S.value=!0,e("focus",t))},L=t=>{S.value=!1,e("blur",t)},B=t=>{var r,i;const o="string"==typeof t?t:t.target.value;_.value=!1,(null==(r=n.separator)?void 0:r.includes(o.charAt(0)))&&o.length>0?y.value&&(y.value.value=""):(b.value=o,null!=(i=n.separator)&&i.includes(o.charAt(o.length-1))?z(o.slice(0,o.length-1)):(A.value=n.tagValidator(o)&&!M.value?[o]:[],x.value=n.tagValidator(o)?[]:[o],C.value=M.value?[o]:[],e("tag-state",A.value,x.value,C.value)))},U=t=>{a.value&&(B(t),M.value||z(b.value))},F=t=>{"Enter"!==t.key||u.value?("Backspace"===t.key||"Delete"===t.key)&&f.value&&""===b.value&&_.value&&w.value.length>0?V(w.value[w.value.length-1]):_.value=!0:z(b.value)},z=t=>{var r;if(t=(t||b.value).trim(),""===t||M.value||!n.tagValidator(t)||n.limit&&k.value)return;const i=[...n.modelValue,t];b.value="",_.value=!0,e("update:modelValue",i),e("input",i),null==(r=y.value)||r.focus()},V=t=>{var n;const r=w.value.indexOf(null!=(n=null==t?void 0:t.toString())?n:"");E.value=w.value.splice(r,1).toString(),e("update:modelValue",w.value)};return(0,o.bv)((()=>{D(),n.modelValue.length>0&&(_.value=!0)})),(0,o.dl)((()=>D())),(n,a)=>((0,o.wg)(),(0,o.iD)("div",{id:(0,i.SU)(r),class:(0,s.C_)(["b-form-tags form-control h-auto",(0,i.SU)(T)]),role:"group",tabindex:"-1",onFocusin:N,onFocusout:a[1]||(a[1]=t=>e("focusout",t))},[(0,o._)("output",{id:`${(0,i.SU)(r)}selected_tags__`,class:"visually-hidden",role:"status",for:(0,i.SU)(v),"aria-live":S.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},(0,s.zw)(w.value.join(", ")),9,Wd),(0,o._)("div",{id:`${(0,i.SU)(r)}removed_tags__`,role:"status","aria-live":S.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+(0,s.zw)(t.tagRemovedLabel)+") "+(0,s.zw)(E.value),9,Gd),(0,o.WI)(n.$slots,"default",(0,s.vs)((0,o.F4)((0,i.SU)(R))),(()=>[(0,o._)("ul",{id:`${(0,i.SU)(r)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.value,((e,r)=>(0,o.WI)(n.$slots,"tag",(0,s.vs)((0,o.dG)({key:r},{tag:e,tagClass:t.tagClass,tagVariant:t.tagVariant,tagPills:(0,i.SU)(g),removeTag:V})),(()=>[(0,o.Wm)(Hd,{class:(0,s.C_)(t.tagClass),tag:"li",variant:t.tagVariant,pill:t.tagPills,onRemove:V},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e),1)])),_:2},1032,["class","variant","pill"])])))),128)),(0,o._)("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${(0,i.SU)(r)}tag_list__`},[(0,o._)("div",Yd,[(0,o._)("input",(0,o.dG)({id:(0,i.SU)(v),ref_key:"input",ref:y,disabled:(0,i.SU)(c),value:b.value,type:t.inputType,placeholder:t.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},t.inputAttrs,{form:t.form,required:(0,i.SU)(p),onInput:B,onChange:U,onKeydown:F,onFocus:P,onBlur:L}),null,16,Xd),(0,i.SU)(O)?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:(0,s.C_)(["btn b-form-tags-button py-0",[`btn-${t.addButtonVariant}`,{"disabled invisible":0===b.value.length},t.inputClass]]),style:{"font-size":"90%"},disabled:(0,i.SU)(c)||0===b.value.length||(0,i.SU)(k),onClick:a[0]||(a[0]=t=>z(b.value))},[(0,o.WI)(n.$slots,"add-button-text",{},(()=>[(0,o.Uk)((0,s.zw)(t.addButtonText),1)]))],10,Zd)):(0,o.kq)("",!0)])],8,qd)],8,$d),(0,o._)("div",Kd,[(0,i.SU)(I)?((0,o.wg)(),(0,o.iD)("div",Jd,(0,s.zw)(t.invalidTagText)+": "+(0,s.zw)(b.value),1)):(0,o.kq)("",!0),(0,i.SU)(M)?((0,o.wg)(),(0,o.iD)("small",Qd,(0,s.zw)(t.duplicateTagText)+": "+(0,s.zw)(b.value),1)):(0,o.kq)("",!0),w.value.length===t.limit?((0,o.wg)(),(0,o.iD)("small",tf,"Tag limit reached")):(0,o.kq)("",!0)])])),t.name?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(w.value,((e,n)=>((0,o.wg)(),(0,o.iD)("input",{key:n,type:"hidden",name:t.name,value:e},null,8,ef)))),128)):(0,o.kq)("",!0)],42,jd))}}),rf=(0,o.aZ)({props:{...gc,noResize:{type:[Boolean,String],default:!1},rows:{type:[String,Number],required:!1,default:2},wrap:{type:String,default:"soft"}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const{input:n,computedId:r,computedAriaInvalid:s,onInput:a,onChange:l,onBlur:c,focus:u,blur:h}=yc(t,e),d=ec((0,i.Vh)(t,"noResize")),f=(0,o.Fl)((()=>({"form-control":!t.plaintext,"form-control-plaintext":t.plaintext,[`form-control-${t.size}`]:!!t.size,"is-valid":!0===t.state,"is-invalid":!1===t.state}))),p=(0,o.Fl)((()=>d.value?{resize:"none"}:void 0));return{input:n,computedId:r,computedAriaInvalid:s,onInput:a,onChange:l,onBlur:c,focus:u,blur:h,computedClasses:f,computedStyles:p}}}),of=["id","name","form","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"];function sf(t,e,n,r,i,s){return(0,o.wg)(),(0,o.iD)("textarea",(0,o.dG)({id:t.computedId,ref:"input",class:t.computedClasses,name:t.name||void 0,form:t.form||void 0,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid,rows:t.rows,style:t.computedStyles,wrap:t.wrap||void 0},t.$attrs,{onInput:e[0]||(e[0]=e=>t.onInput(e)),onChange:e[1]||(e[1]=e=>t.onChange(e)),onBlur:e[2]||(e[2]=e=>t.onBlur(e))}),null,16,of)}const af=tu(rf,[["render",sf]]),lf={key:0,class:"input-group-text"},cf=["innerHTML"],uf={key:1},hf={key:0,class:"input-group-text"},df=["innerHTML"],ff={key:1},pf=(0,o.aZ)({__name:"BInputGroup",props:{append:null,appendHtml:null,id:null,prepend:null,prependHtml:null,size:null,tag:{default:"div"}},setup(t){const e=t,n=(0,o.Fl)((()=>({"input-group-sm":"sm"===e.size,"input-group-lg":"lg"===e.size}))),r=(0,o.Fl)((()=>!!e.append||!!e.appendHtml)),a=(0,o.Fl)((()=>!!e.prepend||!!e.prependHtml));return(e,l)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:t.id,class:(0,s.C_)(["input-group",(0,i.SU)(n)]),role:"group"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"prepend",{},(()=>[(0,i.SU)(a)?((0,o.wg)(),(0,o.iD)("span",lf,[t.prependHtml?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:t.prependHtml},null,8,cf)):((0,o.wg)(),(0,o.iD)("span",uf,(0,s.zw)(t.prepend),1))])):(0,o.kq)("",!0)])),(0,o.WI)(e.$slots,"default"),(0,o.WI)(e.$slots,"append",{},(()=>[(0,i.SU)(r)?((0,o.wg)(),(0,o.iD)("span",hf,[t.appendHtml?((0,o.wg)(),(0,o.iD)("span",{key:0,innerHTML:t.appendHtml},null,8,df)):((0,o.wg)(),(0,o.iD)("span",ff,(0,s.zw)(t.append),1))])):(0,o.kq)("",!0)]))])),_:3},8,["id","class"]))}}),mf=(0,o.aZ)({__name:"BInputGroupText",props:{tag:{default:"div"},text:null},setup(t){return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:"input-group-text"},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))])),_:3}))}}),gf=(0,o.aZ)({__name:"BInputGroupAddon",props:{isText:{default:!1}},setup(t){const e=ec((0,i.Vh)(t,"isText"));return(t,n)=>(0,i.SU)(e)?((0,o.wg)(),(0,o.j4)(mf,{key:0},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3})):(0,o.WI)(t.$slots,"default",{key:1})}}),yf=(0,o.aZ)({__name:"BInputGroupAppend",props:{isText:{default:!1}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.j4)(gf,{"is-text":t.isText},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},8,["is-text"]))}}),vf=(0,o.aZ)({__name:"BInputGroupPrepend",props:{isText:{default:!1}},setup(t){return(e,n)=>((0,o.wg)(),(0,o.j4)(gf,{"is-text":t.isText},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},8,["is-text"]))}}),wf=Symbol(),bf=(0,o.aZ)({__name:"BListGroup",props:{flush:{default:!1},horizontal:{type:[Boolean,String],default:!1},numbered:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=ec((0,i.Vh)(e,"flush")),r=ec((0,i.Vh)(e,"numbered")),a=(0,o.Fl)((()=>{const t=!n.value&&e.horizontal;return{"list-group-flush":n.value,"list-group-horizontal":!0===t,[`list-group-horizontal-${t}`]:"string"==typeof t,"list-group-numbered":r.value}})),l=(0,o.Fl)((()=>!0===r.value?"ol":e.tag));return(0,o.JJ)(wf,{numbered:r.value}),(t,e)=>((0,o.wg)(),(0,o.j4)((0,o.LL)((0,i.SU)(l)),{class:(0,s.C_)(["list-group",(0,i.SU)(a)])},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},8,["class"]))}}),_f=(0,o.aZ)({__name:"BListGroupItem",props:{action:{default:!1},active:{default:!1},button:{default:!1},disabled:{default:!1},href:null,tag:{default:"div"},target:{default:"_self"},to:null,variant:null},setup(t){const e=t,n=(0,o.l1)(),r=(0,o.f3)(wf,null),s=ec((0,i.Vh)(e,"action")),a=ec((0,i.Vh)(e,"active")),l=ec((0,i.Vh)(e,"button")),c=ec((0,i.Vh)(e,"disabled")),u=(0,o.Fl)((()=>!l.value&&(!!e.href||!!e.to))),h=(0,o.Fl)((()=>null!=r&&r.numbered?"li":l.value?"button":u.value?nu:e.tag)),d=(0,o.Fl)((()=>s.value||u.value||l.value||["a","router-link","button","b-link"].includes(e.tag))),f=(0,o.Fl)((()=>({[`list-group-item-${e.variant}`]:void 0!==e.variant,"list-group-item-action":d.value,active:a.value,disabled:c.value}))),p=(0,o.Fl)((()=>{const t={};return l.value&&((!n||!n.type)&&(t.type="button"),c.value&&(t.disabled=!0)),t}));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)((0,i.SU)(h)),(0,o.dG)({class:["list-group-item",(0,i.SU)(f)],"aria-current":!!(0,i.SU)(a)||void 0,"aria-disabled":!!(0,i.SU)(c)||void 0,target:(0,i.SU)(u)?t.target:void 0,href:(0,i.SU)(l)?void 0:t.href,to:(0,i.SU)(l)?void 0:t.to},(0,i.SU)(p)),{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},16,["class","aria-current","aria-disabled","target","href","to"]))}}),Sf=["id","aria-labelledby","aria-describedby"],Ef=["id"],Af={inheritAttrs:!1},xf=(0,o.aZ)({...Af,__name:"BModal",props:{bodyBgVariant:null,bodyClass:null,bodyTextVariant:null,busy:{default:!1},lazy:{default:!1},buttonSize:{default:"md"},cancelDisabled:{default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{default:!1},contentClass:null,dialogClass:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerTextVariant:null,fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerCloseLabel:{default:"Close"},headerCloseWhite:{default:!1},headerTextVariant:null,hideBackdrop:{default:!1},hideFooter:{default:!1},hideHeader:{default:!1},hideHeaderClose:{default:!1},id:null,modalClass:null,modelValue:{default:!1},noCloseOnBackdrop:{default:!1},noCloseOnEsc:{default:!1},noFade:{default:!1},noFocus:{default:!1},okDisabled:{default:!1},okOnly:{default:!1},okTitle:{default:"Ok"},okVariant:{default:"primary"},scrollable:{default:!1},show:{default:!1},size:null,title:null,titleClass:null,titleSrOnly:{default:!1},titleTag:{default:"h5"},static:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden","hide-prevented","show-prevented","ok","cancel","close"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),l=mc((0,i.Vh)(n,"id"),"modal"),c=ec((0,i.Vh)(n,"busy")),u=ec((0,i.Vh)(n,"lazy")),h=ec((0,i.Vh)(n,"cancelDisabled")),d=ec((0,i.Vh)(n,"centered")),f=ec((0,i.Vh)(n,"hideBackdrop")),p=ec((0,i.Vh)(n,"hideFooter")),m=ec((0,i.Vh)(n,"hideHeader")),g=ec((0,i.Vh)(n,"hideHeaderClose")),y=ec((0,i.Vh)(n,"modelValue")),v=ec((0,i.Vh)(n,"noCloseOnBackdrop")),w=ec((0,i.Vh)(n,"noCloseOnEsc")),b=ec((0,i.Vh)(n,"noFade")),_=ec((0,i.Vh)(n,"noFocus")),S=ec((0,i.Vh)(n,"okDisabled")),E=ec((0,i.Vh)(n,"okOnly")),A=ec((0,i.Vh)(n,"scrollable")),x=ec((0,i.Vh)(n,"titleSrOnly")),C=ec((0,i.Vh)(n,"static")),T=(0,i.iH)(!1),M=(0,i.iH)(null),I=(0,i.iH)(!1),k=(0,o.Fl)((()=>[n.modalClass,{fade:!b.value,show:T.value}])),O=(0,o.Fl)((()=>!Cl(r["header-close"]))),R=(0,o.Fl)((()=>[n.dialogClass,{"modal-fullscreen":!0===n.fullscreen,[`modal-fullscreen-${n.fullscreen}-down`]:"string"==typeof n.fullscreen,[`modal-${n.size}`]:void 0!==n.size,"modal-dialog-centered":d.value,"modal-dialog-scrollable":A.value}])),D=(0,o.Fl)((()=>[n.bodyClass,{[`bg-${n.bodyBgVariant}`]:void 0!==n.bodyBgVariant,[`text-${n.bodyTextVariant}`]:void 0!==n.bodyTextVariant}])),N=(0,o.Fl)((()=>[n.headerClass,{[`bg-${n.headerBgVariant}`]:void 0!==n.headerBgVariant,[`border-${n.headerBorderVariant}`]:void 0!==n.headerBorderVariant,[`text-${n.headerTextVariant}`]:void 0!==n.headerTextVariant}])),P=(0,o.Fl)((()=>[n.footerClass,{[`bg-${n.footerBgVariant}`]:void 0!==n.footerBgVariant,[`border-${n.footerBorderVariant}`]:void 0!==n.footerBorderVariant,[`text-${n.footerTextVariant}`]:void 0!==n.footerTextVariant}])),L=(0,o.Fl)((()=>[n.titleClass,{["visually-hidden"]:x.value}])),B=(0,o.Fl)((()=>h.value||c.value)),U=(0,o.Fl)((()=>S.value||c.value)),F=(t,e={})=>new Ba(t,{cancelable:!1,target:M.value||null,relatedTarget:null,trigger:null,...e,componentId:l.value}),z=(t="")=>{const n=F("hide",{cancelable:""!==t,trigger:t});if("ok"===t&&e(t,n),"cancel"===t&&e(t,n),"close"===t&&e(t,n),e("hide",n),n.defaultPrevented||"backdrop"===t&&v.value||"esc"===t&&w.value)return e("update:modelValue",!0),void e("hide-prevented");e("update:modelValue",!1)},V=()=>{const t=F("show",{cancelable:!0});if(e("show",t),t.defaultPrevented)return e("update:modelValue",!1),void e("show-prevented");e("update:modelValue",!0)},H=()=>V(),j=()=>{T.value=!0,e("shown",F("shown")),!0===u.value&&(I.value=!0)},W=()=>{T.value=!1},G=()=>{e("hidden",F("hidden")),!0===u.value&&(I.value=!1)};return(0,o.YP)((()=>y.value),(t=>{!0===t&&!_.value&&(0,o.Y3)((()=>{null!==M.value&&M.value.focus()}))})),(e,n)=>((0,o.wg)(),(0,o.j4)(o.lR,{to:"body",disabled:(0,i.SU)(C)},[(0,o.Wm)(qc,{"no-fade":!0,"trans-props":{enterToClass:"show"},onBeforeEnter:H,onAfterEnter:j,onLeave:W,onAfterLeave:G},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",(0,o.dG)({id:(0,i.SU)(l),ref_key:"element",ref:M,class:["modal",(0,i.SU)(k)],role:"dialog","aria-labelledby":`${(0,i.SU)(l)}-label`,"aria-describedby":`${(0,i.SU)(l)}-body`,tabindex:"-1"},e.$attrs,{onKeyup:n[5]||(n[5]=(0,a.D2)((t=>z("esc")),["esc"]))}),[(0,o._)("div",{class:(0,s.C_)(["modal-dialog",(0,i.SU)(R)])},[!(0,i.SU)(u)||(0,i.SU)(u)&&I.value||(0,i.SU)(u)&&!0===(0,i.SU)(y)?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["modal-content",t.contentClass])},[(0,i.SU)(m)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["modal-header",(0,i.SU)(N)])},[(0,o.WI)(e.$slots,"header",{},(()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.titleTag),{id:`${(0,i.SU)(l)}-label`,class:(0,s.C_)(["modal-title",(0,i.SU)(L)])},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"title",{},(()=>[(0,o.Uk)((0,s.zw)(t.title),1)]),!0)])),_:3},8,["id","class"])),(0,i.SU)(g)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,i.SU)(O)?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",onClick:n[0]||(n[0]=t=>z("close"))},[(0,o.WI)(e.$slots,"header-close",{},void 0,!0)])):((0,o.wg)(),(0,o.j4)(Xc,{key:1,"aria-label":t.headerCloseLabel,white:t.headerCloseWhite,onClick:n[1]||(n[1]=t=>z("close"))},null,8,["aria-label","white"]))],64))]),!0)],2)),(0,o._)("div",{id:`${(0,i.SU)(l)}-body`,class:(0,s.C_)(["modal-body",(0,i.SU)(D)])},[(0,o.WI)(e.$slots,"default",{},void 0,!0)],10,Ef),(0,i.SU)(p)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,s.C_)(["modal-footer",(0,i.SU)(P)])},[(0,o.WI)(e.$slots,"footer",{},(()=>[(0,o.WI)(e.$slots,"cancel",{},(()=>[(0,i.SU)(E)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(ou,{key:0,type:"button",class:"btn",disabled:(0,i.SU)(B),size:t.buttonSize,variant:t.cancelVariant,onClick:n[2]||(n[2]=t=>z("cancel"))},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.cancelTitle),1)])),_:1},8,["disabled","size","variant"]))]),!0),(0,o.WI)(e.$slots,"ok",{},(()=>[(0,o.Wm)(ou,{type:"button",class:"btn",disabled:(0,i.SU)(U),size:t.buttonSize,variant:t.okVariant,onClick:n[3]||(n[3]=t=>z("ok"))},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(t.okTitle),1)])),_:1},8,["disabled","size","variant"])]),!0)]),!0)],2))],2)):(0,o.kq)("",!0)],2),(0,i.SU)(f)?(0,o.kq)("",!0):(0,o.WI)(e.$slots,"backdrop",{key:0},(()=>[(0,o._)("div",{class:"modal-backdrop fade show",onClick:n[4]||(n[4]=t=>z("backdrop"))})]),!0)],16,Sf),[[a.F8,(0,i.SU)(y)]])])),_:3})],8,["disabled"]))}}),Cf=tu(xf,[["__scopeId","data-v-116ecd66"]]),Tf=(0,o.aZ)({__name:"BNav",props:{align:null,cardHeader:{default:!1},fill:{default:!1},justified:{default:!1},pills:{default:!1},small:{default:!1},tabs:{default:!1},tag:{default:"ul"},vertical:{default:!1}},setup(t){const e=t,n=ec((0,i.Vh)(e,"cardHeader")),r=ec((0,i.Vh)(e,"fill")),a=ec((0,i.Vh)(e,"justified")),l=ec((0,i.Vh)(e,"pills")),c=ec((0,i.Vh)(e,"small")),u=ec((0,i.Vh)(e,"tabs")),h=ec((0,i.Vh)(e,"vertical")),d=Pa((0,i.Vh)(e,"align")),f=(0,o.Fl)((()=>({"nav-tabs":u.value,"nav-pills":l.value&&!u.value,"card-header-tabs":!h.value&&n.value&&u.value,"card-header-pills":!h.value&&n.value&&l.value&&!u.value,"flex-column":h.value,"nav-fill":!h.value&&r.value,"nav-justified":!h.value&&a.value,[d.value]:!h.value&&void 0!==e.align,small:c.value})));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(["nav",(0,i.SU)(f)])},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default")])),_:3},8,["class"]))}}),Mf=(0,o.aZ)({__name:"BNavForm",props:{role:null,id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,r=(0,o.Fl)((()=>({floating:n.floating,role:n.role,id:n.id,novalidate:n.novalidate,validated:n.validated}))),s=t=>e("submit",t);return(t,e)=>((0,o.wg)(),(0,o.j4)(Jh,(0,o.dG)((0,i.SU)(r),{class:"d-flex",onSubmit:(0,a.iM)(s,["prevent"])}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16,["onSubmit"]))}}),If=(0,o.aZ)({components:{BLink:nu},props:{...Yl(Jc,["event","routerTag"])},setup(t){return{disabledBoolean:ec((0,i.Vh)(t,"disabled"))}}}),kf={class:"nav-item"};function Of(t,e,n,r,i,s){const a=(0,o.up)("b-link");return(0,o.wg)(),(0,o.iD)("li",kf,[(0,o.Wm)(a,(0,o.dG)({class:"nav-link"},t.$props,{"active-class":"active",tabindex:t.disabledBoolean?-1:void 0,"aria-disabled":!!t.disabledBoolean||void 0}),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16,["tabindex","aria-disabled"])])}const Rf=tu(If,[["render",Of]]),Df={class:"nav-item dropdown"},Nf=(0,o.aZ)({__name:"BNavItemDropdown",props:{id:null,text:null,toggleClass:null,size:null,offset:null,autoClose:{type:[Boolean,String],default:!0},dark:{type:Boolean,default:!1},dropleft:{type:Boolean,default:!1},dropright:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},right:{type:Boolean,default:!1},left:{type:[Boolean,String],default:!1},split:{type:Boolean,default:!1},splitVariant:null,noCaret:{type:Boolean,default:!1},variant:{default:"link"}},setup(t){const e=t;return(t,n)=>((0,o.wg)(),(0,o.iD)("li",Df,[(0,o.Wm)(Th,(0,o.dG)(e,{"is-nav":""}),(0,o.Nv)({_:2},[(0,o.Ko)(t.$slots,((e,n,r)=>({name:n,fn:(0,o.w5)((e=>[(0,o.WI)(t.$slots,n,(0,s.vs)((0,o.F4)(e||{})))]))})))]),1040)]))}}),Pf={class:"navbar-text"},Lf=(0,o.aZ)({__name:"BNavText",props:{text:null},setup(t){return(e,n)=>((0,o.wg)(),(0,o.iD)("li",Pf,[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.text),1)]))]))}}),Bf=(0,o.aZ)({__name:"BNavbar",props:{fixed:null,print:{default:!1},sticky:null,tag:{default:"nav"},toggleable:{type:[Boolean,String],default:!1},dark:{default:!1},variant:null,container:{type:[String,Boolean],default:"fluid"}},setup(t){const e=t,n=ec((0,i.Vh)(e,"print")),r=ec((0,i.Vh)(e,"dark")),a=(0,o.Fl)((()=>"nav"===e.tag?void 0:"navigation")),l=(0,o.Fl)((()=>"string"==typeof e.toggleable?`navbar-expand-${e.toggleable}`:!1===e.toggleable?"navbar-expand":void 0)),c=(0,o.Fl)((()=>!0===e.container?"container":"container-fluid")),u=(0,o.Fl)((()=>({"d-print":n.value,[`sticky-${e.sticky}`]:void 0!==e.sticky,"navbar-dark":r.value,[`bg-${e.variant}`]:void 0!==e.variant,[`fixed-${e.fixed}`]:void 0!==e.fixed,[`${l.value}`]:void 0!==l.value})));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(["navbar",(0,i.SU)(u)]),role:(0,i.SU)(a)},{default:(0,o.w5)((()=>[!1!==t.container?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)((0,i.SU)(c))},[(0,o.WI)(e.$slots,"default")],2)):(0,o.WI)(e.$slots,"default",{key:1})])),_:3},8,["class","role"]))}}),Uf=Yl(Jc,["event","routerTag"]),Ff=(0,o.aZ)({components:{BLink:nu},props:{tag:{type:String,default:"div"},...Uf},setup(t){const e=(0,o.Fl)((()=>tc(t))),n=(0,o.Fl)((()=>e.value?nu:t.tag));return{computedLinkProps:(0,o.Fl)((()=>e.value?Jl(t,Uf):{})),computedTag:n}}});function zf(t,e,n,r,i,s){return(0,o.wg)(),(0,o.j4)((0,o.LL)(t.computedTag),(0,o.dG)({class:"navbar-brand"},t.computedLinkProps),{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},16)}const Vf=tu(Ff,[["render",zf]]),Hf=(0,o.aZ)({__name:"BNavbarNav",props:{align:null,fill:{default:!1},justified:{default:!1},small:{default:!1},tag:{default:"ul"}},setup(t){const e=t,n=ec((0,i.Vh)(e,"fill")),r=ec((0,i.Vh)(e,"justified")),a=ec((0,i.Vh)(e,"small")),l=Pa((0,i.Vh)(e,"align")),c=(0,o.Fl)((()=>({"nav-fill":n.value,"nav-justified":r.value,[l.value]:void 0!==e.align,small:a.value})));return(t,e)=>((0,o.wg)(),(0,o.iD)("ul",{class:(0,s.C_)(["navbar-nav",(0,i.SU)(c)])},[(0,o.WI)(t.$slots,"default")],2))}}),jf=(0,o._)("span",{class:"navbar-toggler-icon"},null,-1),Wf=(0,o.aZ)({__name:"BNavbarToggle",props:{disabled:{default:!1},label:{default:"Toggle navigation"},target:null},emits:["click"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"disabled")),s=(0,o.Fl)((()=>({disabled:r.value,"aria-label":n.label}))),a=(0,o.Fl)((()=>({disabled:r.value}))),l=t=>{r.value||e("click",t)};return(e,n)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("button",(0,o.dG)({class:["navbar-toggler",(0,i.SU)(a)],type:"button"},(0,i.SU)(s),{onClick:l}),[(0,o.WI)(e.$slots,"default",{},(()=>[jf]))],16)),[[(0,i.SU)(Oc),(0,i.SU)(r)?void 0:t.target]])}}),Gf=["data-bs-backdrop","data-bs-scroll"],$f={key:0,class:"offcanvas-header"},qf={id:"offcanvasLabel",class:"offcanvas-title"},Yf={class:"offcanvas-body"},Xf={key:1},Zf=(0,o.aZ)({__name:"BOffcanvas",props:{dismissLabel:{default:"Close"},modelValue:{default:!1},bodyScrolling:{default:!1},backdrop:{default:!0},placement:{default:"start"},title:null,noHeaderClose:{default:!1},noHeader:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,r=ec((0,i.Vh)(n,"modelValue")),a=ec((0,i.Vh)(n,"bodyScrolling")),l=ec((0,i.Vh)(n,"backdrop")),c=ec((0,i.Vh)(n,"noHeaderClose")),u=ec((0,i.Vh)(n,"noHeader")),h=(0,o.Rr)(),d=(0,i.iH)(),f=(0,i.iH)(),p=(0,o.Fl)((()=>!Cl(h.footer))),m=(0,o.Fl)((()=>[`offcanvas-${n.placement}`])),g=()=>{e("show"),e("update:modelValue",!0)},y=()=>{e("hide"),e("update:modelValue",!1)};return(0,o.YP)((()=>r.value),(t=>{var e,n;t?null==(e=f.value)||e.show(d.value):null==(n=f.value)||n.hide()})),sc(d,"shown.bs.offcanvas",(()=>e("shown"))),sc(d,"hidden.bs.offcanvas",(()=>e("hidden"))),sc(d,"show.bs.offcanvas",(()=>{g()})),sc(d,"hide.bs.offcanvas",(()=>{y()})),(0,o.bv)((()=>{var t;f.value=new si(d.value),r.value&&(null==(t=f.value)||t.show(d.value))})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{ref_key:"element",ref:d,class:(0,s.C_)(["offcanvas",(0,i.SU)(m)]),tabindex:"-1","aria-labelledby":"offcanvasLabel","data-bs-backdrop":(0,i.SU)(l),"data-bs-scroll":(0,i.SU)(a)},[(0,i.SU)(u)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",$f,[(0,o.WI)(e.$slots,"header",(0,s.vs)((0,o.F4)({visible:(0,i.SU)(r),placement:t.placement,hide:y})),(()=>[(0,o._)("h5",qf,[(0,o.WI)(e.$slots,"title",{},(()=>[(0,o.Uk)((0,s.zw)(t.title),1)]))]),(0,i.SU)(c)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(Xc,{key:0,class:"text-reset","data-bs-dismiss":"offcanvas","aria-label":t.dismissLabel},null,8,["aria-label"]))]))])),(0,o._)("div",Yf,[(0,o.WI)(e.$slots,"default")]),(0,i.SU)(p)?((0,o.wg)(),(0,o.iD)("div",Xf,[(0,o.WI)(e.$slots,"footer",(0,s.vs)((0,o.F4)({visible:(0,i.SU)(r),placement:t.placement,hide:y})))])):(0,o.kq)("",!0)],10,Gf))}}),Kf=(0,o.aZ)({__name:"BOverlay",props:{bgColor:null,blur:{default:"2px"},fixed:{default:!1},noCenter:{default:!1},noFade:{default:!1},noWrap:{default:!1},opacity:{default:.85},overlayTag:{default:"div"},rounded:{type:[Boolean,String],default:!1},show:{default:!1},spinnerSmall:{default:!1},spinnerType:{default:"border"},spinnerVariant:null,variant:{default:"light"},wrapTag:{default:"div"},zIndex:{default:10}},emits:["click","hidden","shown"],setup(t,{emit:e}){const n=t,r={top:0,left:0,bottom:0,right:0},a=ec((0,i.Vh)(n,"fixed")),l=ec((0,i.Vh)(n,"noCenter")),c=ec((0,i.Vh)(n,"noWrap")),u=ec((0,i.Vh)(n,"show")),h=ec((0,i.Vh)(n,"spinnerSmall")),d=(0,o.Fl)((()=>!0===n.rounded||""===n.rounded?"rounded":!1===n.rounded?"":`rounded-${n.rounded}`)),f=(0,o.Fl)((()=>n.variant&&!n.bgColor?`bg-${n.variant}`:"")),p=(0,o.Fl)((()=>u.value?"true":null)),m=(0,o.Fl)((()=>({type:n.spinnerType||void 0,variant:n.spinnerVariant||void 0,small:h.value}))),g=(0,o.Fl)((()=>({...r,zIndex:n.zIndex||10}))),y=(0,o.Fl)((()=>["b-overlay",{"position-absolute":!c.value||!a.value,"position-fixed":c.value&&a.value}])),v=(0,o.Fl)((()=>[f.value,d.value])),w=(0,o.Fl)((()=>({...r,opacity:n.opacity,backgroundColor:n.bgColor||void 0,backdropFilter:blur?`blur(${blur})`:void 0}))),b=(0,o.Fl)((()=>l.value?r:{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}));return(n,r)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.wrapTag),{class:"b-overlay-wrap position-relative","aria-busy":(0,i.SU)(p)},{default:(0,o.w5)((()=>[(0,o.WI)(n.$slots,"default"),(0,o.Wm)(qc,{"no-fade":t.noFade,"trans-props":{enterToClass:"show"},name:"fade",onOnAfterEnter:r[1]||(r[1]=t=>e("shown")),onOnAfterLeave:r[2]||(r[2]=t=>e("hidden"))},{default:(0,o.w5)((()=>[(0,i.SU)(u)?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.overlayTag),{key:0,class:(0,s.C_)((0,i.SU)(y)),style:(0,s.j5)((0,i.SU)(g)),onClick:r[0]||(r[0]=t=>e("click",t))},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,s.C_)(["position-absolute",(0,i.SU)(v)]),style:(0,s.j5)((0,i.SU)(w))},null,6),(0,o._)("div",{class:"position-absolute",style:(0,s.j5)((0,i.SU)(b))},[(0,o.WI)(n.$slots,"overlay",(0,s.vs)((0,o.F4)((0,i.SU)(m))),(()=>[(0,o.Wm)(Kc,(0,s.vs)((0,o.F4)((0,i.SU)(m))),null,16)]))],4)])),_:3},8,["class","style"])):(0,o.kq)("",!0)])),_:3},8,["no-fade"])])),_:3},8,["aria-busy"]))}}),Jf=5,Qf=20,tp=0,ep=3,np="ellipsis-text",rp="first-text",ip="last-text",op="next-text",sp="page",ap="prev-text",lp=t=>Math.max(Gl(t)||Qf,1),cp=t=>Math.max(Gl(t)||tp,0),up=(t,e)=>{const n=Gl(t)||1;return n>e?e:n<1?1:n},hp=(0,o.aZ)({name:"BPagination",props:{align:{type:String,default:"start"},ariaControls:{type:String,required:!1},ariaLabel:{type:String,default:"Pagination"},disabled:{type:[Boolean,String],default:!1},ellipsisClass:{type:[Array,String],default:()=>[]},ellipsisText:{type:String,default:"…"},firstClass:{type:[Array,String],default:()=>[]},firstNumber:{type:[Boolean,String],default:!1},firstText:{type:String,default:"«"},hideEllipsis:{type:[Boolean,String],default:!1},hideGotoEndButtons:{type:[Boolean,String],default:!1},labelFirstPage:{type:String,default:"Go to first page"},labelLastPage:{type:String,default:"Go to last page"},labelNextPage:{type:String,default:"Go to next page"},labelPage:{type:String,default:"Go to page"},labelPrevPage:{type:String,default:"Go to previous page"},lastClass:{type:[Array,String],default:()=>[]},lastNumber:{type:[Boolean,String],default:!1},lastText:{type:String,default:"»"},limit:{type:Number,default:Jf},modelValue:{type:Number,default:1},nextClass:{type:[Array,String],default:()=>[]},nextText:{type:String,default:"›"},pageClass:{type:[Array,String],default:()=>[]},perPage:{type:Number,default:Qf},pills:{type:[Boolean,String],default:!1},prevClass:{type:[Array,String],default:()=>[]},prevText:{type:String,default:"‹"},size:{type:String,required:!1},totalRows:{type:Number,default:tp}},emits:["update:modelValue","page-click"],setup(t,{emit:e,slots:n}){const r=ec((0,i.Vh)(t,"disabled")),s=ec((0,i.Vh)(t,"firstNumber")),a=ec((0,i.Vh)(t,"hideEllipsis")),l=ec((0,i.Vh)(t,"hideGotoEndButtons")),c=ec((0,i.Vh)(t,"lastNumber")),u=ec((0,i.Vh)(t,"pills")),h=(0,o.Fl)((()=>"fill"===t.align?"start":t.align)),d=Pa((0,i.Vh)(h,"value")),f=(0,o.Fl)((()=>Math.ceil(cp(t.totalRows)/lp(t.perPage)))),p=(0,o.Fl)((()=>{let e;return e=f.value-t.modelValue+2<t.limit&&t.limit>ep?f.value-g.value+1:t.modelValue-Math.floor(g.value/2),e<1?e=1:e>f.value-g.value&&(e=f.value-g.value+1),t.limit<=ep&&c.value&&f.value===e+g.value-1&&(e=Math.max(e-1,1)),e})),m=(0,o.Fl)((()=>{const e=f.value-t.modelValue;let n=!1;return e+2<t.limit&&t.limit>ep?t.limit>ep&&(n=!0):t.limit>ep&&(n=!(a.value&&!s.value)),p.value<=1&&(n=!1),n&&s.value&&p.value<4&&(n=!1),n})),g=(0,o.Fl)((()=>{let e=t.limit;return f.value<=t.limit?e=f.value:t.modelValue<t.limit-1&&t.limit>ep?((!a.value||c.value)&&(e=t.limit-(s.value?0:1)),e=Math.min(e,t.limit)):f.value-t.modelValue+2<t.limit&&t.limit>ep?(!a.value||s.value)&&(e=t.limit-(c.value?0:1)):t.limit>ep&&(e=t.limit-(a.value?0:2)),e})),y=(0,o.Fl)((()=>{const e=f.value-g.value;let n=!1;t.modelValue<t.limit-1&&t.limit>ep?(!a.value||c.value)&&(n=!0):t.limit>ep&&(n=!(a.value&&!c.value)),p.value>e&&(n=!1);const r=p.value+g.value-1;return n&&c.value&&r>f.value-3&&(n=!1),n})),v=(0,i.qj)({pageSize:lp(t.perPage),totalRows:cp(t.totalRows),numberOfPages:f.value}),w=(n,r)=>{if(r===t.modelValue)return;const{target:i}=n,o=new La("page-click",{cancelable:!0,target:i});e("page-click",o,r),!o.defaultPrevented&&e("update:modelValue",r)},b=(0,o.Fl)((()=>t.size?`pagination-${t.size}`:"")),_=(0,o.Fl)((()=>u.value?"b-pagination-pills":""));(0,o.YP)((()=>t.modelValue),(n=>{const r=up(n,f.value);r!==t.modelValue&&e("update:modelValue",r)})),(0,o.YP)(v,((n,r)=>{null!=n&&(r.pageSize!==n.pageSize&&r.totalRows===n.totalRows||r.numberOfPages!==n.numberOfPages&&t.modelValue>r.numberOfPages)&&e("update:modelValue",1)}));const S=(0,o.Fl)((()=>{const t=[];for(let e=0;e<g.value;e++)t.push({number:p.value+e,classes:null});return t}));return()=>{const e=[],i=S.value.map((t=>t.number)),a=e=>e===t.modelValue,u=t.modelValue<1,h="fill"===t.align,p=(e,i,s,l,c,d)=>{const p=r.value||a(d)||u||e<1||e>f.value,m=e<1?1:e>f.value?f.value:e,g={disabled:p,page:m,index:m-1},y=Wl(s,g,n)||l||"";return(0,o.h)("li",{class:["page-item",{disabled:p,"flex-fill":h,"d-flex":h&&!p},c]},(0,o.h)(p?"span":"button",{class:["page-link",{"flex-grow-1":!p&&h}],"aria-label":i,"aria-controls":t.ariaControls||null,"aria-disabled":p?"true":null,role:"menuitem",type:p?null:"button",tabindex:p?null:"-1",onClick:t=>{p||w(t,m)}},y))},g=e=>(0,o.h)("li",{class:["page-item","disabled","bv-d-xs-down-none",h?"flex-fill":"",t.ellipsisClass],role:"separator",key:"ellipsis-"+(e?"last":"first")},[(0,o.h)("span",{class:["page-link"]},Wl(np,{},n)||t.ellipsisText||"...")]),v=(e,i)=>{const s=a(e.number)&&!u,l=r.value?null:s||u&&0===i?"0":"-1",c={active:s,disabled:r.value,page:e.number,index:e.number-1,content:e.number},d=Wl(sp,c,n)||e.number,f=(0,o.h)(r.value?"span":"button",{class:["page-link",{"flex-grow-1":!r.value&&h}],"aria-controls":t.ariaControls||null,"aria-disabled":r.value?"true":null,"aria-label":t.labelPage?`${t.labelPage} ${e.number}`:null,role:"menuitemradio",type:r.value?null:"button",tabindex:l,onClick:t=>{r.value||w(t,e.number)}},d);return(0,o.h)("li",{class:["page-item",{disabled:r.value,active:s,"flex-fill":h,"d-flex":h&&!r.value},t.pageClass],role:"presentation",key:`page-${e.number}`},f)};if(!l.value&&!s.value){const n=p(1,t.labelFirstPage,rp,t.firstText,t.firstClass,1);e.push(n)}const E=p(t.modelValue-1,t.labelFirstPage,ap,t.prevText,t.prevClass,1);e.push(E),s.value&&1!==i[0]&&e.push(v({number:1},0)),m.value&&e.push(g(!1)),S.value.forEach(((t,n)=>{const r=m.value&&s.value&&1!==i[0]?1:0;e.push(v(t,n+r))})),y.value&&e.push(g(!0)),c.value&&i[i.length-1]!==f.value&&e.push(v({number:f.value},-1));const A=p(t.modelValue+1,t.labelNextPage,op,t.nextText,t.nextClass,f.value);if(e.push(A),!c.value&&!l.value){const n=p(f.value,t.labelLastPage,ip,t.lastText,t.lastClass,f.value);e.push(n)}return(0,o.h)("ul",{class:["pagination",b.value,d.value,_.value],role:"menubar","aria-disabled":r.value,"aria-label":t.ariaLabel||null},e)}}}),dp=(0,o.aZ)({__name:"BPlaceholder",props:{tag:{default:"span"},width:null,cols:null,variant:null,size:null,animation:null},setup(t){const e=t,n=(0,o.Fl)((()=>void 0===e.width?void 0:"number"==typeof e.width?e.width.toString():e.width.includes("%")?e.width.replaceAll("%",""):e.width)),r=(0,o.Fl)((()=>void 0===e.cols?void 0:"number"==typeof e.cols?e.cols.toString():e.cols)),a=(0,o.Fl)((()=>({[`col-${r.value}`]:void 0!==r.value&&void 0===n.value,[`bg-${e.variant}`]:void 0!==e.variant,[`placeholder-${e.size}`]:void 0!==e.size,[`placeholder-${e.animation}`]:void 0!==e.animation}))),l=(0,o.Fl)((()=>void 0===n.value?void 0:`width: ${n.value}%;`));return(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(["placeholder",(0,i.SU)(a)]),style:(0,s.j5)((0,i.SU)(l))},null,8,["class","style"]))}}),fp=(0,o.aZ)({__name:"BPlaceholderButton",props:{tag:{default:"div"},width:null,cols:null,variant:{default:"primary"},animation:null},setup(t){const e=t,n=(0,o.Fl)((()=>["btn",`btn-${e.variant}`,"disabled"])),r=(0,o.Fl)((()=>({animation:e.animation,width:e.width,cols:e.cols,tag:e.tag})));return(t,e)=>((0,o.wg)(),(0,o.j4)(dp,(0,o.dG)({class:(0,i.SU)(n)},(0,i.SU)(r)),null,16,["class"]))}}),pp=(0,o.aZ)({__name:"BPlaceholderCard",props:{noHeader:{default:!1},headerWidth:{default:100},headerVariant:null,headerAnimation:null,headerSize:null,noFooter:{default:!1},footerWidth:{default:100},footerVariant:null,footerAnimation:null,footerSize:null,animation:null,size:null,variant:null,noButton:{default:!1},imgBottom:{default:!1},imgSrc:null,imgBlankColor:{default:"#868e96"},imgHeight:{default:100},noImg:{default:!1}},setup(t){const e=t,n=ec((0,i.Vh)(e,"noButton")),r=ec((0,i.Vh)(e,"noHeader")),a=ec((0,i.Vh)(e,"noFooter")),l=ec((0,i.Vh)(e,"noImg")),c=(0,o.Fl)((()=>({width:e.headerWidth,variant:e.headerVariant,animation:e.headerAnimation,size:e.headerSize}))),u=(0,o.Fl)((()=>({width:e.footerWidth,animation:e.footerAnimation,size:n.value?e.footerSize:void 0,variant:e.footerVariant}))),h=(0,o.Fl)((()=>({blank:!e.imgSrc,blankColor:e.imgBlankColor,height:e.imgSrc?void 0:e.imgHeight,src:e.imgSrc,top:!e.imgBottom,bottom:e.imgBottom})));return(e,d)=>((0,o.wg)(),(0,o.j4)(Uu,{"img-bottom":t.imgBottom},(0,o.Nv)({default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Wm)(dp,{cols:"7"}),(0,o.Wm)(dp,{cols:"4"}),(0,o.Wm)(dp,{cols:"4"}),(0,o.Wm)(dp,{cols:"6"}),(0,o.Wm)(dp,{cols:"8"})]))])),_:2},[(0,i.SU)(l)?void 0:{name:"img",fn:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"img",{},(()=>[(0,o.Wm)(ku,(0,s.vs)((0,o.F4)((0,i.SU)(h))),null,16)]))])),key:"0"},(0,i.SU)(r)?void 0:{name:"header",fn:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"header",{},(()=>[(0,o.Wm)(dp,(0,s.vs)((0,o.F4)((0,i.SU)(c))),null,16)]))])),key:"1"},(0,i.SU)(a)?void 0:{name:"footer",fn:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"footer",{},(()=>[(0,i.SU)(n)?((0,o.wg)(),(0,o.j4)(dp,(0,s.vs)((0,o.dG)({key:1},(0,i.SU)(u))),null,16)):((0,o.wg)(),(0,o.j4)(fp,(0,s.vs)((0,o.dG)({key:0},(0,i.SU)(u))),null,16))]))])),key:"2"}]),1032,["img-bottom"]))}}),mp=(0,o.aZ)({__name:"BTableSimple",props:{bordered:{default:!1},borderless:{default:!1},borderVariant:null,captionTop:{default:!1},dark:{default:!1},hover:{default:!1},responsive:{type:[Boolean,String],default:!1},stacked:{type:[Boolean,String],default:!1},striped:{default:!1},small:{default:!1},tableClass:null,tableVariant:null,stickyHeader:{default:!1}},setup(t){const e=t,n=ec((0,i.Vh)(e,"captionTop")),r=ec((0,i.Vh)(e,"borderless")),a=ec((0,i.Vh)(e,"bordered")),l=ec((0,i.Vh)(e,"dark")),c=ec((0,i.Vh)(e,"hover")),u=ec((0,i.Vh)(e,"small")),h=ec((0,i.Vh)(e,"striped")),d=ec((0,i.Vh)(e,"stickyHeader")),f=(0,o.Fl)((()=>["table","b-table",{"table-bordered":a.value,"table-borderless":r.value,[`border-${e.borderVariant}`]:void 0!==e.borderVariant,"caption-top":n.value,"table-dark":l.value,"table-hover":c.value,"b-table-stacked":"boolean"==typeof e.stacked&&e.stacked,[`b-table-stacked-${e.stacked}`]:"string"==typeof e.stacked,"table-striped":h.value,"table-sm":u.value,[`table-${e.tableVariant}`]:void 0!==e.tableVariant},e.tableClass])),p=(0,o.Fl)((()=>[{"table-responsive":!0===e.responsive,[`table-responsive-${e.responsive}`]:"string"==typeof e.responsive,"b-table-sticky-header":d.value}]));return(e,n)=>t.responsive?((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,s.C_)((0,i.SU)(p))},[(0,o._)("table",{role:"table",class:(0,s.C_)((0,i.SU)(f))},[(0,o.WI)(e.$slots,"default")],2)],2)):((0,o.wg)(),(0,o.iD)("table",{key:0,role:"table",class:(0,s.C_)((0,i.SU)(f))},[(0,o.WI)(e.$slots,"default")],2))}}),gp=(0,o.aZ)({__name:"BPlaceholderTable",props:{rows:{default:3},columns:{default:5},cellWidth:{default:100},size:null,animation:null,variant:null,headerColumns:null,hideHeader:{default:!1},headerCellWidth:{default:100},headerSize:null,headerAnimation:null,headerVariant:null,footerColumns:null,showFooter:{default:!1},footerCellWidth:{default:100},footerSize:null,footerAnimation:null,footerVariant:null},setup(t){const e=t,n=(0,o.Fl)((()=>"string"==typeof e.columns?$l(e.columns,5):e.columns)),r=(0,o.Fl)((()=>"string"==typeof e.rows?$l(e.rows,3):e.rows)),a=(0,o.Fl)((()=>void 0===e.headerColumns?n.value:"string"==typeof e.headerColumns?$l(e.headerColumns,n.value):e.headerColumns)),l=(0,o.Fl)((()=>void 0===e.footerColumns?n.value:"string"==typeof e.footerColumns?$l(e.footerColumns,n.value):e.footerColumns)),c=(0,o.Fl)((()=>({size:e.size,variant:e.variant,animation:e.animation,width:e.cellWidth}))),u=(0,o.Fl)((()=>({size:e.headerSize,variant:e.headerVariant,animation:e.headerAnimation,width:e.headerCellWidth}))),h=(0,o.Fl)((()=>({size:e.footerSize,variant:e.footerVariant,animation:e.footerAnimation,width:e.footerCellWidth}))),d=ec((0,i.Vh)(e,"hideHeader")),f=ec((0,i.Vh)(e,"showFooter"));return(t,e)=>((0,o.wg)(),(0,o.j4)(mp,null,{default:(0,o.w5)((()=>[(0,i.SU)(d)?(0,o.kq)("",!0):(0,o.WI)(t.$slots,"thead",{key:0},(()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(a),((t,e)=>((0,o.wg)(),(0,o.iD)("th",{key:e},[(0,o.Wm)(dp,(0,s.vs)((0,o.F4)((0,i.SU)(u))),null,16)])))),128))])])])),(0,o.WI)(t.$slots,"default",{},(()=>[(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(r),((t,e)=>((0,o.wg)(),(0,o.iD)("tr",{key:e},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(n),((t,e)=>((0,o.wg)(),(0,o.iD)("td",{key:e},[(0,o.Wm)(dp,(0,s.vs)((0,o.F4)((0,i.SU)(c))),null,16)])))),128))])))),128))])])),(0,i.SU)(f)?(0,o.WI)(t.$slots,"tfoot",{key:1},(()=>[(0,o._)("tfoot",null,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(l),((t,e)=>((0,o.wg)(),(0,o.iD)("th",{key:e},[(0,o.Wm)(dp,(0,s.vs)((0,o.F4)((0,i.SU)(h))),null,16)])))),128))])])])):(0,o.kq)("",!0)])),_:3}))}}),yp=(0,o.aZ)({__name:"BPlaceholderWrapper",props:{loading:{default:!1}},setup(t){const e=ec((0,i.Vh)(t,"loading"));return(t,n)=>(0,i.SU)(e)?(0,o.WI)(t.$slots,"loading",{key:0}):(0,o.WI)(t.$slots,"default",{key:1})}}),vp=(0,o.aZ)({props:{container:{type:[String,Object],default:"body"},content:{type:String},id:{type:String},customClass:{type:String,default:""},noninteractive:{type:[Boolean,String],default:!1},placement:{type:String,default:"right"},target:{type:[String,Object],default:void 0},title:{type:String},delay:{type:[Number,Object],default:0},triggers:{type:String,default:"click"},show:{type:[Boolean,String],default:!1},variant:{type:String,default:void 0},html:{type:[Boolean,String],default:!0},sanitize:{type:[Boolean,String],default:!1},offset:{type:String,default:"0"}},emits:["show","shown","hide","hidden","inserted"],setup(t,{emit:e,slots:n}){ec((0,i.Vh)(t,"noninteractive"));const r=ec((0,i.Vh)(t,"show")),s=ec((0,i.Vh)(t,"html")),a=ec((0,i.Vh)(t,"sanitize")),l=(0,i.iH)(),c=(0,i.iH)(),u=(0,i.iH)(),h=(0,i.iH)(),d=(0,i.iH)(),f=(0,o.Fl)((()=>({[`b-popover-${t.variant}`]:void 0!==t.variant}))),p=t=>"string"==typeof t||t instanceof HTMLElement?t:typeof t<"u"?t.$el:void 0,m=t=>{if(t){if("string"==typeof t){const e=document.getElementById(t);return e||void 0}return t}},g=[{event:"show.bs.popover",handler:()=>e("show")},{event:"shown.bs.popover",handler:()=>e("shown")},{event:"hide.bs.popover",handler:()=>e("hide")},{event:"hidden.bs.popover",handler:()=>e("hidden")},{event:"inserted.bs.popover",handler:()=>e("inserted")}],y=t=>{for(const e of g)t.addEventListener(e.event,e.handler)},v=t=>{for(const e of g)t.removeEventListener(e.event,e.handler)},w=e=>{c.value=m(p(e)),c.value&&(y(c.value),u.value=new Xi(c.value,{customClass:t.customClass,container:p(t.container),trigger:t.triggers,placement:t.placement,title:t.title||n.title?h.value:"",content:d.value,html:s.value,delay:t.delay,sanitize:a.value,offset:t.offset}))};return(0,o.YP)((()=>t.target),(t=>{var e;null==(e=u.value)||e.dispose(),c.value instanceof HTMLElement&&v(c.value),w(t)})),(0,o.YP)((()=>r.value),((t,e)=>{var n,r;t!==e&&(t?null==(n=u.value)||n.show():null==(r=u.value)||r.hide())})),(0,o.bv)((()=>{var e,n,i;(0,o.Y3)((()=>{w(t.target)})),null==(n=null==(e=l.value)?void 0:e.parentNode)||n.removeChild(l.value),r.value&&(null==(i=u.value)||i.show())})),(0,o.Jd)((()=>{var t;null==(t=u.value)||t.dispose(),c.value instanceof HTMLElement&&v(c.value)})),{element:l,titleRef:h,contentRef:d,computedClasses:f}}}),wp=["id"],bp={ref:"titleRef"},_p={ref:"contentRef"};function Sp(t,e,n,r,i,a){return(0,o.wg)(),(0,o.iD)("div",{id:t.id,ref:"element",class:(0,s.C_)(["popover b-popover",t.computedClasses]),role:"tooltip",tabindex:"-1"},[(0,o._)("div",bp,[(0,o.WI)(t.$slots,"title",{},(()=>[(0,o.Uk)((0,s.zw)(t.title),1)]))],512),(0,o._)("div",_p,[(0,o.WI)(t.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)(t.content),1)]))],512)],10,wp)}const Ep=tu(vp,[["render",Sp]]),Ap=["aria-valuenow","aria-valuemax"],xp=(0,o.aZ)({__name:"BProgressBar",props:{animated:{default:!1},label:null,labelHtml:null,max:null,precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0},variant:null},setup(t){const e=t,n=(0,o.f3)(Cp),r=ec((0,i.Vh)(e,"animated")),a=ec((0,i.Vh)(e,"showProgress")),l=ec((0,i.Vh)(e,"showValue")),c=ec((0,i.Vh)(e,"striped")),u=(0,o.Fl)((()=>({"progress-bar-animated":r.value||(null==n?void 0:n.animated),"progress-bar-striped":c.value||(null==n?void 0:n.striped)||r.value||(null==n?void 0:n.animated),[`bg-${e.variant}`]:void 0!==e.variant}))),h=(0,o.Fl)((()=>"number"==typeof e.precision?e.precision:Number.parseFloat(e.precision))),d=(0,o.Fl)((()=>"number"==typeof e.value?e.value:Number.parseFloat(e.value))),f=(0,o.Fl)((()=>"number"==typeof e.max?e.max:void 0===e.max?void 0:Number.parseFloat(e.max))),p=(0,o.Fl)((()=>void 0!==e.labelHtml?e.labelHtml:l.value||(null==n?void 0:n.showValue)?d.value.toFixed(h.value):a.value||(null==n?void 0:n.showProgress)?(100*d.value/(f.value||100)).toFixed(h.value):void 0!==e.label?e.label:"")),m=(0,o.Fl)((()=>null!=n&&n.max?100*d.value/("number"==typeof n.max?n.max:Number.parseInt(n.max))+"%":e.max?100*d.value/("number"==typeof e.max?e.max:Number.parseInt(e.max))+"%":"string"==typeof e.value?e.value:`${e.value}%`));return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["progress-bar",(0,i.SU)(u)]),role:"progressbar","aria-valuenow":t.value,"aria-valuemin":"0","aria-valuemax":t.max,style:(0,s.j5)({width:(0,i.SU)(m)})},[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Uk)((0,s.zw)((0,i.SU)(p)),1)]))],14,Ap))}}),Cp=Symbol(),Tp=(0,o.aZ)({__name:"BProgress",props:{variant:null,max:null,height:null,animated:{default:!1},precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0}},setup(t){const e=t,n=ec((0,i.Vh)(e,"animated")),r=ec((0,i.Vh)(e,"showProgress")),a=ec((0,i.Vh)(e,"showValue")),l=ec((0,i.Vh)(e,"striped")),c=(0,o.Fl)((()=>({animated:e.animated,max:e.max,precision:e.precision,showProgress:e.showProgress,showValue:e.showValue,striped:e.striped,value:e.value,variant:e.variant})));return(0,o.JJ)(Cp,{animated:n.value,max:e.max,showProgress:r.value,showValue:a.value,striped:l.value}),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"progress",style:(0,s.j5)({height:t.height})},[(0,o.WI)(e.$slots,"default",{},(()=>[(0,o.Wm)(xp,(0,s.vs)((0,o.F4)((0,i.SU)(c))),null,16)]))],4))}}),Mp=Ul("cols",[""],{type:[String,Number],default:null}),Ip=(0,o.aZ)({name:"BRow",props:{tag:{type:String,default:"div"},gutterX:{type:String,default:null},gutterY:{type:String,default:null},noGutters:{type:[Boolean,String],default:!1},alignV:{type:String,default:null},alignH:{type:String,default:null},alignContent:{type:String,default:null},...Mp},setup(t){const e=ec((0,i.Vh)(t,"noGutters")),n=Pa((0,i.Vh)(t,"alignH")),r=(0,o.Fl)((()=>Fl(t,Mp,"cols","row-cols")));return{computedClasses:(0,o.Fl)((()=>[r.value,{[`gx-${t.gutterX}`]:null!==t.gutterX,[`gy-${t.gutterY}`]:null!==t.gutterY,"g-0":e.value,[`align-items-${t.alignV}`]:null!==t.alignV,[n.value]:null!==t.alignH,[`align-content-${t.alignContent}`]:null!==t.alignContent}]))}}});function kp(t,e,n,r,i,a){return(0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{class:(0,s.C_)(["row",t.computedClasses])},{default:(0,o.w5)((()=>[(0,o.WI)(t.$slots,"default")])),_:3},8,["class"])}const Op=tu(Ip,[["render",kp]]),Rp=(0,o.aZ)({__name:"BSkeleton",props:{height:null,width:null,size:null,animation:{default:"wave"},type:{default:"text"},variant:null},setup(t){const e=t,n=(0,o.Fl)((()=>[`b-skeleton-${e.type}`,{[`b-skeleton-animate-${e.animation}`]:"boolean"!=typeof e.animation&&e.animation,[`bg-${e.variant}`]:void 0!==e.variant}])),r=(0,o.Fl)((()=>({width:e.size||e.width,height:e.size||e.height})));return(t,e)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["b-skeleton",(0,i.SU)(n)]),style:(0,s.j5)((0,i.SU)(r))},null,6))}}),Dp=(0,o.aZ)({__name:"BSkeletonIcon",props:{animation:{default:"wave"}},setup(t){const e=t,n=(0,o.Fl)((()=>[`b-skeleton-animate-${e.animation}`]));return(t,e)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["b-skeleton-icon-wrapper position-relative d-inline-block overflow-hidden",(0,i.SU)(n)])},[(0,o.WI)(t.$slots,"default")],2))}}),Np={key:0},Pp={key:1},Lp=(0,o.aZ)({__name:"BSkeletonTable",props:{animation:{default:"wave"},columns:{default:5},hideHeader:{default:!1},rows:{default:3},showFooter:{default:!1},tableProps:null},setup(t){const e=t,n=ec((0,i.Vh)(e,"hideHeader")),r=ec((0,i.Vh)(e,"showFooter"));return(e,a)=>((0,o.wg)(),(0,o.j4)(mp,(0,s.vs)((0,o.F4)(t.tableProps)),{default:(0,o.w5)((()=>[(0,i.SU)(n)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("thead",Np,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.columns,((t,e)=>((0,o.wg)(),(0,o.iD)("th",{key:e},[(0,o.Wm)(Rp)])))),128))])])),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.rows,((e,n)=>((0,o.wg)(),(0,o.iD)("tr",{key:n},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.columns,((t,e)=>((0,o.wg)(),(0,o.iD)("td",{key:e},[(0,o.Wm)(Rp,{width:"75%"})])))),128))])))),128))]),(0,i.SU)(r)?((0,o.wg)(),(0,o.iD)("tfoot",Pp,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.columns,((t,e)=>((0,o.wg)(),(0,o.iD)("th",{key:e},[(0,o.Wm)(Rp)])))),128))])])):(0,o.kq)("",!0)])),_:1},16))}}),Bp=(0,o.aZ)({__name:"BSkeletonWrapper",props:{loading:{default:!1}},setup(t){const e=ec((0,i.Vh)(t,"loading"));return(t,n)=>(0,i.SU)(e)?(0,o.WI)(t.$slots,"loading",{key:0}):(0,o.WI)(t.$slots,"default",{key:1})}}),Up=["ar","az","ckb","fa","he","ks","lrc","mzn","ps","sd","te","ug","ur","yi"].map((t=>t.toLowerCase())),Fp=t=>{const e=Za(t).toLowerCase().replace(Xa,"").split("-"),n=e.slice(0,2).join("-"),r=e[0];return Up.includes(n)||Up.includes(r)},zp=t=>al?Ua(t)?t:{capture:!!t||!1}:!!(Ua(t)?t.capture:t),Vp=(t,e,n,r)=>{t&&t.addEventListener&&t.addEventListener(e,n,zp(r))},Hp=(t,e,n,r)=>{t&&t.removeEventListener&&t.removeEventListener(e,n,r)},jp=(t,e)=>{(t?Vp:Hp)(...e)},Wp=(t,{preventDefault:e=!0,propagation:n=!0,immediatePropagation:r=!1}={})=>{e&&t.preventDefault(),n&&t.stopPropagation(),r&&t.stopImmediatePropagation()},Gp="ArrowDown",$p="End",qp="Home",Yp="PageDown",Xp="PageUp",Zp="ArrowUp",Kp=1,Jp=100,Qp=1,tm=500,em=100,nm=10,rm=4,im=[Zp,Gp,qp,$p,Xp,Yp],om=(0,o.aZ)({props:{ariaControls:{type:String,required:!1},ariaLabel:{type:String,required:!1},labelIncrement:{type:String,default:"Increment"},labelDecrement:{type:String,default:"Decrement"},modelValue:{type:Number,default:null},name:{type:String,default:"BFormSpinbutton"},disabled:{type:[Boolean,String],default:!1},placeholder:{type:String,required:!1},locale:{type:String,default:"locale"},form:{type:String,required:!1},inline:{type:Boolean,default:!1},size:{type:String,required:!1},formatterFn:{type:Function},readonly:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},repeatDelay:{type:[String,Number],default:tm},repeatInterval:{type:[String,Number],default:em},repeatStepMultiplier:{type:[String,Number],default:rm},repeatThreshold:{type:[String,Number],default:nm},required:{type:[Boolean,String],default:!1},step:{type:[String,Number],default:Qp},min:{type:[String,Number],default:Kp},max:{type:[String,Number],default:Jp},wrap:{type:Boolean,default:!1},state:{type:[Boolean,String],default:null}},emits:["update:modelValue","change"],setup(t,{emit:e}){const n=(0,i.iH)(!1),r=(0,o.Fl)((()=>1)),s=()=>{e("change",l.value)},a=(0,i.iH)(null),l=(0,o.Fl)({get(){return Va(t.modelValue)?a.value:t.modelValue},set(n){Va(t.modelValue)?a.value=n:e("update:modelValue",n)}});let c,u,h=!1;const d=(0,o.Fl)((()=>ql(t.step,Qp))),f=(0,o.Fl)((()=>ql(t.min,Kp))),p=(0,o.Fl)((()=>{const e=ql(t.max,Jp),n=d.value,r=f.value;return Math.floor((e-r)/n)*n+r})),m=(0,o.Fl)((()=>{const e=Gl(t.repeatDelay,0);return e>0?e:tm})),g=(0,o.Fl)((()=>{const e=Gl(t.repeatInterval,0);return e>0?e:em})),y=(0,o.Fl)((()=>Math.max(Gl(t.repeatThreshold,nm),1))),v=(0,o.Fl)((()=>Math.max(Gl(t.repeatStepMultiplier,rm),1))),w=(0,o.Fl)((()=>{const t=d.value;return Math.floor(t)===t?0:(t.toString().split(".")[1]||"").length})),b=(0,o.Fl)((()=>Math.pow(10,w.value||0))),_=(0,o.Fl)((()=>{const{value:t}=l;return null===t?"":t.toFixed(w.value)})),S=(0,o.Fl)((()=>{const e=[t.locale];return new Intl.NumberFormat(e).resolvedOptions().locale})),E=(0,o.Fl)((()=>Fp(S.value))),A=()=>{const t=w.value;return new Intl.NumberFormat(S.value,{style:"decimal",useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:t,maximumFractionDigits:t,notation:"standard"}).format},x=(0,o.Fl)((()=>t.formatterFn?t.formatterFn:A())),C=(0,o.Fl)((()=>({role:"group",lang:S.value,tabindex:t.disabled?null:"-1",title:t.ariaLabel}))),T=(0,o.Fl)((()=>!Va(t.modelValue)||!Va(a.value))),M=(0,o.Fl)((()=>({dir:E.value,spinId:r.value,tabindex:t.disabled?null:"0",role:"spinbutton","aria-live":"off","aria-label":t.ariaLabel||null,"aria-controls":t.ariaControls||null,"aria-invalid":!1===t.state||!T.value&&t.required?"true":null,"aria-required":t.required?"true":null,"aria-valuemin":f.value,"aria-valuemax":p.value,"aria-valuenow":Va(l.value)?null:l.value,"aria-valuetext":Va(l.value)?null:x.value(l.value)}))),I=e=>{let{value:n}=l;if(!t.disabled&&!Va(n)){const r=d.value*e,i=f.value,o=p.value,s=b.value,{wrap:a}=t;n=Math.round((n-i)/r)*r+i+r,n=Math.round(n*s)/s,l.value=n>o?a?i:o:n<i?a?o:i:n}},k=(t=1)=>{Va(l.value)?l.value=f.value:I(1*t)},O=(e=1)=>{Va(l.value)?l.value=t.wrap?p.value:f.value:I(-1*e)},R=e=>{const{code:n,altKey:r,ctrlKey:i,metaKey:o}=e;if(!(t.disabled||t.readonly||r||i||o)&&im.includes(n)){if(Wp(e,{propagation:!1}),h)return;U(),[Zp,Gp].includes(n)?(h=!0,n===Zp?N(e,k):n===Gp&&N(e,O)):n===Xp?k(v.value):n===Yp?O(v.value):n===qp?l.value=f.value:n===$p&&(l.value=p.value)}},D=e=>{const{code:n,altKey:r,ctrlKey:i,metaKey:o}=e;t.disabled||t.readonly||r||i||o||im.includes(n)&&(Wp(e,{propagation:!1}),U(),h=!1,s())},N=(e,n)=>{const{type:r}=e||{};if(!t.disabled&&!t.readonly){if(P(e)&&"mousedown"===r&&e.button)return;U(),n(1);const t=y.value,i=v.value,o=m.value,s=g.value;c=setTimeout((()=>{let e=0;u=setInterval((()=>{n(e<t?1:i),e++}),s)}),o)}};function P(t){return"mouseup"===t.type||"mousedown"===t.type}const L=t=>{P(t)&&"mouseup"===t.type&&t.button||(Wp(t,{propagation:!1}),U(),B(!1),s())},B=t=>{try{jp(t,[document.body,"mouseup",L,!1]),jp(t,[document.body,"touchend",L,!1])}catch{return 0}},U=()=>{clearTimeout(c),clearInterval(u),c=void 0,u=void 0},F=(e,i,s,a,l,c,u)=>{const h=(0,o.h)(s,{props:{scale:n.value?1.5:1.25},attrs:{"aria-hidden":"true"}}),d={hasFocus:n.value},f=n=>{!t.disabled&&!t.readonly&&(Wp(n,{propagation:!1}),B(!0),N(n,e))};return(0,o.h)("button",{class:[{"py-0":!t.vertical},"btn","btn-sm","border-0","rounded-0"],tabindex:"-1",type:"button",disabled:t.disabled||t.readonly||c,"aria-disabled":t.disabled||t.readonly||c?"true":null,"aria-controls":r.value,"aria-label":i||null,"aria-keyshortcuts":l||null,onmousedown:f,ontouchstart:f},[Wl(u,d)||h])};return()=>{const e=F(k,t.labelIncrement,(0,o.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus",viewBox:"0 0 16 16"},(0,o.h)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),"inc","ArrowUp",!1,"increment"),r=F(O,t.labelDecrement,(0,o.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash",viewBox:"0 0 16 16"},(0,o.h)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})),"dec","ArrowDown",!1,"decrement"),i=[];t.name&&!t.disabled&&i.push((0,o.h)("input",{type:"hidden",name:t.name,form:t.form||null,value:_.value,key:"hidden"}));const s=(0,o.h)("output",{class:[{"d-flex":t.vertical},{"align-self-center":!t.vertical},{"align-items-center":t.vertical},{"border-top":t.vertical},{"border-bottom":t.vertical},{"border-start":!t.vertical},{"border-end":!t.vertical},"flex-grow-1"],...M.value,key:"output"},[(0,o.h)("bdi",T.value?x.value(l.value):t.placeholder||"")]);return(0,o.h)("div",{class:["b-form-spinbutton form-control",{disabled:t.disabled},{readonly:t.readonly},{focus:n},{"d-inline-flex":t.inline||t.vertical},{"d-flex":!t.inline&&!t.vertical},{"align-items-stretch":!t.vertical},{"flex-column":t.vertical},t.size?`form-control-${t.size}`:null],...C.value,onkeydown:R,onkeyup:D},t.vertical?[e,i,s,r]:[r,i,s,e])}}}),sm=["TD","TH","TR"],am=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),lm=t=>{if(!t||!t.target)return!1;const e=t.target;if("disabled"in e&&e.disabled||-1!==sm.indexOf(e.tagName))return!1;if(Bl(".dropdown-menu",e))return!0;const n="LABEL"===e.tagName?e:Bl("label",e);if(n){const t=Il(n,"for"),e=t?kl(t):Tl("input, select, textarea",n);if(e&&!e.disabled)return!0}return Pl(e,am)},cm=()=>{const t=(t,e)=>{const n=[];return null!=t&&t.length||!(null==e?void 0:e.length)?(Array.isArray(t)&&t.forEach((t=>{"string"==typeof t?n.push({key:t,label:Ka(t)}):Ua(t)&&t.key&&"string"==typeof t.key&&n.push({...t})})),n):(Object.keys(e[0]).forEach((t=>n.push({key:t,label:Ka(t)}))),n)},e=(0,i.iH)([]),n=(t,n,r,i)=>(e.value=Xl(n),"isFilterableTable"in i&&!0===i.isFilterableTable.value&&r.filter&&(e.value=s(e.value,r.filter,r.filterable)),"isSortable"in i&&!0===i.isSortable.value&&(e.value=o(t,e.value,{key:r.sortBy,desc:i.sortDescBoolean.value},r.sortCompare)),e.value),r=(0,i.iH)(void 0),o=(t,e,n,r)=>{if(!n||!n.key)return e;const i=n.key;return e.sort(((t,e)=>{if(void 0!==r)return r(t,e,n.key,n.desc);const o=t=>"object"==typeof t?JSON.stringify(t):t;return o(t[i])>o(e[i])?n.desc?-1:1:o(e[i])>o(t[i])?n.desc?1:-1:0}))},s=(t,e,n)=>t.filter((t=>Object.entries(t).filter((t=>{const[r,i]=t;return!(!i||"_"===r[0]||n.length>0&&!n.includes(r))&&("object"==typeof i?JSON.stringify(Object.values(i)):"string"==typeof i?i:i.toString()).toLowerCase().includes(e.toLowerCase())})).length>0));return{normaliseFields:t,mapItems:n,internalItems:e,updateInternalItems:async t=>{try{return e.value=await Zl(t),e.value}catch{return}},filterEvent:r,notifyFilteredItems:()=>{r.value&&r.value(e.value)},formatItem:(t,e)=>{const n=t[e.key];return e.formatter&&"function"==typeof e.formatter?e.formatter(n,e.key,t):t[e.key]}}},um=["title","abbr","onClick"],hm={class:"d-inline-flex flex-nowrap align-items-center gap-1"},dm={key:1},fm=["onClick","onDblclick","onMouseenter","onMouseleave"],pm={key:0,class:"b-table-stacked-label"},mm=["colspan"],gm=["colspan"],ym={class:"d-flex align-items-center justify-content-center gap-2"},vm=(0,o._)("strong",null,"Loading...",-1),wm={key:1,class:"b-table-empty-slot"},bm=["colspan"],_m={key:0},Sm=["title","abbr","onClick"],Em={key:1},Am={key:2},xm={key:3},Cm=(0,o.aZ)({__name:"BTable",props:{align:null,caption:null,captionTop:{default:!1},borderless:{default:!1},bordered:{default:!1},borderVariant:null,dark:{default:!1},fields:{default:()=>[]},footClone:{default:!1},hover:{default:!1},items:{default:()=>[]},provider:null,sortCompare:null,noProvider:null,noProviderPaging:null,noProviderSorting:null,noProviderFiltering:null,responsive:{type:[Boolean,String],default:!1},small:{default:!1},striped:{default:!1},stacked:{type:[Boolean,String],default:!1},labelStacked:{type:Boolean,default:!1},variant:null,sortBy:null,sortDesc:{default:!1},sortInternal:{default:!0},selectable:{default:!1},stickySelect:{default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"single"},selectionVariant:{default:"primary"},stickyHeader:{default:!1},busy:{default:!1},showEmpty:{default:!1},perPage:null,currentPage:{default:1},filter:null,filterable:null,emptyText:{default:"There are no records to show"},emptyFilteredText:{default:"There are no records matching your request"}},emits:["headClicked","rowClicked","rowDblClicked","rowHovered","rowUnhovered","rowSelected","rowUnselected","selection","update:busy","update:sortBy","update:sortDesc","sorted","filtered"],setup(t,{expose:e,emit:n}){const r=t,a=(0,o.Rr)(),l=cm(),c=ec((0,i.Vh)(r,"footClone")),u=ec((0,i.Vh)(r,"sortDesc")),h=ec((0,i.Vh)(r,"sortInternal")),d=ec((0,i.Vh)(r,"selectable")),f=ec((0,i.Vh)(r,"stickySelect")),p=ec((0,i.Vh)(r,"labelStacked")),m=ec((0,i.Vh)(r,"busy")),g=ec((0,i.Vh)(r,"showEmpty")),y=ec((0,i.Vh)(r,"noProviderPaging")),v=ec((0,i.Vh)(r,"noProviderSorting")),w=ec((0,i.Vh)(r,"noProviderFiltering")),b=(0,i.iH)(m.value);l.filterEvent.value=async t=>{if(M.value)return void await H();const e=await Zl(t);n("filtered",e)};const _=(0,i.iH)(new Set([])),S=(0,o.Fl)((()=>_.value.size>0)),E=(0,o.Fl)((()=>({[`align-${r.align}`]:void 0!==r.align,"b-table-selectable":d.value,[`b-table-select-${r.selectMode}`]:d.value,"b-table-selecting user-select-none":d.value&&S.value,"b-table-busy":b.value,"b-table-sortable":k.value,"b-table-sort-desc":k.value&&!0===u.value,"b-table-sort-asc":k.value&&!1===u.value}))),A=(0,o.Fl)((()=>({bordered:r.bordered,borderless:r.borderless,borderVariant:r.borderVariant,captionTop:r.captionTop,dark:r.dark,hover:r.hover,responsive:r.responsive,striped:r.striped,stacked:r.stacked,small:r.small,tableClass:E.value,tableVariant:r.variant,stickyHeader:r.stickyHeader}))),x=(0,o.Fl)((()=>l.normaliseFields(r.fields,r.items))),C=(0,o.Fl)((()=>x.value.length+(d.value?1:0))),T=(0,o.Fl)((()=>void 0!==r.filter&&""!==r.filter)),M=(0,o.Fl)((()=>void 0!==r.provider)),I=(0,o.Fl)((()=>d.value&&(!!r.selectHead||void 0!==a.selectHead))),k=(0,o.Fl)((()=>r.fields.filter((t=>"string"!=typeof t&&t.sortable)).length>0)),O=(0,o.Fl)((()=>k.value&&!0===h.value)),R=(0,o.Fl)((()=>{const t=M.value?l.internalItems.value:O.value?l.mapItems(r.fields,r.items,r,{isSortable:k,isFilterableTable:T,sortDescBoolean:u}):r.items;if(void 0!==r.perPage){const e=(r.currentPage-1)*r.perPage;return t.splice(e,r.perPage)}return t})),D=t=>"string"==typeof t?Ja(t):void 0!==t.label?t.label:"string"==typeof t.key?Ja(t.key):t.key,N=(t,e,r=!1)=>{const i="string"==typeof t?t:t.key;n("headClicked",i,t,e,r),F(t)},P=(t,e,r)=>{n("rowClicked",t,e,r),V(t,e,r.shiftKey)},L=(t,e,r)=>n("rowDblClicked",t,e,r),B=(t,e,r)=>n("rowHovered",t,e,r),U=(t,e,r)=>n("rowUnhovered",t,e,r),F=t=>{if(!k.value)return;const e="string"==typeof t?t:t.key,i="string"!=typeof t&&t.sortable;if(!0===k.value&&!0===i){const t=!u.value;e!==r.sortBy&&n("update:sortBy",e),n("update:sortDesc",t),n("sorted",e,t)}},z=()=>{!d.value||n("selection",Array.from(_.value))},V=(t,e,i=!1)=>{if(d.value){if(_.value.has(t))_.value.delete(t),n("rowUnselected",t);else if("single"===r.selectMode&&_.value.size>0&&(_.value.forEach((t=>n("rowUnselected",t))),_.value.clear()),"range"===r.selectMode&&_.value.size>0&&i){const t=Array.from(_.value).pop(),r=R.value.findIndex((e=>e===t)),i=Math.min(r,e),o=Math.max(r,e);R.value.slice(i,o+1).forEach((t=>{_.value.has(t)||(_.value.add(t),n("rowSelected",t))}))}else _.value.add(t),n("rowSelected",t);z()}},H=async()=>{if(!M.value||!r.provider||b.value)return;b.value=!0;const t=new Proxy({currentPage:r.currentPage,filter:r.filter,sortBy:r.sortBy,sortDesc:r.sortDesc,perPage:r.perPage},{get(t,e){return e in t?t[e]:void 0},set(){return console.error("BTable provider context is a read-only object."),!0}}),e=r.provider(t,l.updateInternalItems);if(void 0!==e){if(e instanceof Promise)try{const t=await e;return Array.isArray(t)?await l.updateInternalItems(t):void 0}finally{b.value&&(b.value=!1)}try{return await l.updateInternalItems(e)}finally{b.value&&(b.value=!1)}}},j=t=>{t._showDetails=!t._showDetails},W=t=>[t.class,t.thClass,t.variant?`table-${t.variant}`:void 0,{"b-table-sortable-column":k.value&&t.sortable,"b-table-sticky-column":t.stickyColumn}],G=(t,e)=>[t.class,t.tdClass,t.variant?`table-${t.variant}`:void 0,(null==e?void 0:e._cellVariants)&&(null==e?void 0:e._cellVariants[t.key])?`table-${null==e?void 0:e._cellVariants[t.key]}`:void 0,{"b-table-sticky-column":t.stickyColumn}],$=t=>[t._rowVariant?`table-${t._rowVariant}`:null,t._rowVariant?`table-${t._rowVariant}`:null,d.value&&_.value.has(t)?`selected table-${r.selectionVariant}`:null],q=()=>{if(!d.value)return;const t=_.value.size>0?Array.from(_.value):[];_.value=new Set([...R.value]),_.value.forEach((e=>{t.includes(e)||n("rowSelected",e)})),z()},Y=()=>{!d.value||(_.value.forEach((t=>{n("rowUnselected",t)})),_.value=new Set([]),z())},X=t=>{if(!d.value)return;const e=R.value[t];!e||_.value.has(e)||(_.value.add(e),n("rowSelected",e),z())},Z=t=>{if(!d.value)return;const e=R.value[t];!e||!_.value.has(e)||(_.value.delete(e),n("rowUnselected",e),z())},K=async(t,e,n)=>{if(e===n)return;const i=t=>r.noProvider&&r.noProvider.includes(t),o=!["currentPage","perPage"].includes(t),s=["currentPage","perPage"].includes(t)&&(i("paging")||!0===y.value),a=["filter"].includes(t)&&(i("filtering")||!0===w.value),c=["sortBy","sortDesc"].includes(t)&&(i("sorting")||!0===v.value);s||a||c||(await H(),o&&l.notifyFilteredItems())};return(0,o.YP)((()=>r.filter),((t,e)=>{t===e||M.value||t||Zl(r.items).then((t=>n("filtered",t)))})),(0,o.YP)((()=>b.value),(()=>b.value!==m.value&&n("update:busy",b.value))),(0,o.YP)((()=>m.value),(()=>b.value!==m.value&&(b.value=m.value))),(0,o.YP)((()=>r.filter),((t,e)=>K("filter",t,e))),(0,o.YP)((()=>r.currentPage),((t,e)=>K("currentPage",t,e))),(0,o.YP)((()=>r.perPage),((t,e)=>K("perPage",t,e))),(0,o.YP)((()=>r.sortBy),((t,e)=>K("sortBy",t,e))),(0,o.YP)((()=>r.sortDesc),((t,e)=>K("sortDesc",t,e))),(0,o.bv)((()=>{M.value&&H()})),e({selectAllRows:q,clearSelected:Y,selectRow:X,unselectRow:Z}),(e,n)=>((0,o.wg)(),(0,o.j4)(mp,(0,s.vs)((0,o.F4)((0,i.SU)(A))),{default:(0,o.w5)((()=>{var n;return[(0,o._)("thead",null,[e.$slots["thead-top"]?(0,o.WI)(e.$slots,"thead-top",{key:0}):(0,o.kq)("",!0),(0,o._)("tr",null,[(0,i.SU)(I)?((0,o.wg)(),(0,o.iD)("th",{key:0,class:(0,s.C_)(["b-table-selection-column",{"b-table-sticky-column":(0,i.SU)(f)}])},[(0,o.WI)(e.$slots,"select-head",{},(()=>[(0,o.Uk)((0,s.zw)("boolean"==typeof t.selectHead?"Selected":t.selectHead),1)]))],2)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(x),(n=>((0,o.wg)(),(0,o.iD)("th",(0,o.dG)({key:n.key,scope:"col",class:W(n),title:n.headerTitle,abbr:n.headerAbbr,style:n.thStyle},n.thAttr,{onClick:t=>N(n,t)}),[(0,o._)("div",hm,[(0,o.WI)(e.$slots,"sort-icon",{field:n,sortBy:t.sortBy,selected:n.key===t.sortBy,isDesc:(0,i.SU)(u),direction:(0,i.SU)(u)?"desc":"asc"},(()=>[(0,i.SU)(k)&&n.sortable?((0,o.wg)(),(0,o.iD)("span",{key:0,class:(0,s.C_)(["b-table-sort-icon",{sorted:n.key===t.sortBy,["sorted-"+((0,i.SU)(u)?"desc":"asc")]:n.key===t.sortBy}])},null,2)):(0,o.kq)("",!0)])),(0,o._)("div",null,[e.$slots["head("+n.key+")"]||e.$slots["head()"]?(0,o.WI)(e.$slots,e.$slots["head("+n.key+")"]?"head("+n.key+")":"head()",{key:0,label:n.label}):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(D(n)),1)],64))])])],16,um)))),128))]),e.$slots["thead-sub"]?((0,o.wg)(),(0,o.iD)("tr",dm,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(x),(t=>((0,o.wg)(),(0,o.iD)("td",{key:t.key,scope:"col",class:(0,s.C_)([t.class,t.thClass,t.variant?`table-${t.variant}`:""])},[e.$slots["thead-sub"]?(0,o.WI)(e.$slots,"thead-sub",(0,o.dG)({key:0,items:(0,i.SU)(x)},t)):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(t.label),1)],64))],2)))),128))])):(0,o.kq)("",!0)]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(R),((n,r)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:r},[(0,o._)("tr",{class:(0,s.C_)($(n)),onClick:t=>!(0,i.SU)(lm)(t)&&P(n,r,t),onDblclick:t=>!(0,i.SU)(lm)(t)&&L(n,r,t),onMouseenter:t=>!(0,i.SU)(lm)(t)&&B(n,r,t),onMouseleave:t=>!(0,i.SU)(lm)(t)&&U(n,r,t)},[(0,i.SU)(I)?((0,o.wg)(),(0,o.iD)("td",{key:0,class:(0,s.C_)(["b-table-selection-column",{"b-table-sticky-column":(0,i.SU)(f)}])},[(0,o.WI)(e.$slots,"select-cell",{},(()=>[(0,o._)("span",{class:(0,s.C_)(_.value.has(n)?"text-primary":"")},"🗹",2)]))],2)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(x),(a=>((0,o.wg)(),(0,o.iD)("td",(0,o.dG)({key:a.key},a.tdAttr,{class:G(a,n)}),[t.stacked&&(0,i.SU)(p)?((0,o.wg)(),(0,o.iD)("label",pm,(0,s.zw)(D(a)),1)):(0,o.kq)("",!0),e.$slots["cell("+a.key+")"]||e.$slots["cell()"]?(0,o.WI)(e.$slots,e.$slots["cell("+a.key+")"]?"cell("+a.key+")":"cell()",{key:1,value:n[a.key],index:r,item:n,field:a,items:t.items,toggleDetails:()=>j(n),detailsShowing:n._showDetails}):((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[(0,o.Uk)((0,s.zw)((0,i.SU)(l).formatItem(n,a)),1)],64))],16)))),128))],42,fm),!0===n._showDetails&&e.$slots["row-details"]?((0,o.wg)(),(0,o.iD)("tr",{key:0,class:(0,s.C_)($(n))},[(0,o._)("td",{colspan:(0,i.SU)(C)},[(0,o.WI)(e.$slots,"row-details",{item:n,toggleDetails:()=>j(n)})],8,mm)],2)):(0,o.kq)("",!0)],64)))),128)),b.value?((0,o.wg)(),(0,o.iD)("tr",{key:0,class:(0,s.C_)(["b-table-busy-slot",{"b-table-static-busy":0==(0,i.SU)(R).length}])},[(0,o._)("td",{colspan:(0,i.SU)(C)},[(0,o.WI)(e.$slots,"table-busy",{},(()=>[(0,o._)("div",ym,[(0,o.Wm)(Kc,{class:"align-middle"}),vm])]))],8,gm)],2)):(0,o.kq)("",!0),(0,i.SU)(g)&&0===(0,i.SU)(R).length?((0,o.wg)(),(0,o.iD)("tr",wm,[(0,o._)("td",{colspan:(0,i.SU)(C)},[(0,o.WI)(e.$slots,"empty",{items:(0,i.SU)(R),filtered:(0,i.SU)(T)},(()=>[(0,o.Uk)((0,s.zw)((0,i.SU)(T)?t.emptyFilteredText:t.emptyText),1)]))],8,bm)])):(0,o.kq)("",!0)]),(0,i.SU)(c)?((0,o.wg)(),(0,o.iD)("tfoot",_m,[(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(x),(t=>((0,o.wg)(),(0,o.iD)("th",(0,o.dG)({key:t.key},t.thAttr,{scope:"col",class:[t.class,t.thClass,t.variant?`table-${t.variant}`:""],title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,onClick:e=>N(t,e,!0)}),(0,s.zw)(t.label),17,Sm)))),128))])])):e.$slots["custom-foot"]?((0,o.wg)(),(0,o.iD)("tfoot",Em,[(0,o.WI)(e.$slots,"custom-foot",{fields:(0,i.SU)(x),items:t.items,columns:null==(n=(0,i.SU)(x))?void 0:n.length})])):(0,o.kq)("",!0),e.$slots["table-caption"]?((0,o.wg)(),(0,o.iD)("caption",Am,[(0,o.WI)(e.$slots,"table-caption")])):t.caption?((0,o.wg)(),(0,o.iD)("caption",xm,(0,s.zw)(t.caption),1)):(0,o.kq)("",!0)]})),_:3},16))}}),Tm=(0,o.aZ)({__name:"BTbody",props:{variant:null},setup(t){const e=t,n=(0,o.Fl)((()=>({[`thead-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,o.wg)(),(0,o.iD)("tbody",{role:"rowgroup",class:(0,s.C_)((0,i.SU)(n))},[(0,o.WI)(t.$slots,"default")],2))}}),Mm=["scope","colspan","rowspan","data-label"],Im={key:0},km=(0,o.aZ)({__name:"BTd",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=ec((0,i.Vh)(e,"stickyColumn")),r=(0,o.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&void 0===e.variant}))),a=(0,o.Fl)((()=>e.colspan?"colspan":e.rowspan?"rowspan":"col"));return(e,n)=>((0,o.wg)(),(0,o.iD)("td",{role:"cell",scope:(0,i.SU)(a),class:(0,s.C_)((0,i.SU)(r)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[t.stackedHeading?((0,o.wg)(),(0,o.iD)("div",Im,[(0,o.WI)(e.$slots,"default")])):(0,o.WI)(e.$slots,"default",{key:1})],10,Mm))}}),Om=(0,o.aZ)({__name:"BTfoot",props:{variant:null},setup(t){const e=t,n=(0,o.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,o.wg)(),(0,o.iD)("tfoot",{role:"rowgroup",class:(0,s.C_)((0,i.SU)(n))},[(0,o.WI)(t.$slots,"default")],2))}}),Rm=["scope","colspan","rowspan","data-label"],Dm={key:0},Nm=(0,o.aZ)({__name:"BTh",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=ec((0,i.Vh)(e,"stickyColumn")),r=(0,o.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&void 0===e.variant}))),a=(0,o.Fl)((()=>e.colspan?"colspan":e.rowspan?"rowspan":"col"));return(e,n)=>((0,o.wg)(),(0,o.iD)("th",{role:"columnheader",scope:(0,i.SU)(a),class:(0,s.C_)((0,i.SU)(r)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[void 0!==t.stackedHeading?((0,o.wg)(),(0,o.iD)("div",Dm,[(0,o.WI)(e.$slots,"default")])):(0,o.WI)(e.$slots,"default",{key:1})],10,Rm))}}),Pm=(0,o.aZ)({__name:"BThead",props:{variant:null},setup(t){const e=t,n=(0,o.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,o.wg)(),(0,o.iD)("thead",{role:"rowgroup",class:(0,s.C_)((0,i.SU)(n))},[(0,o.WI)(t.$slots,"default")],2))}}),Lm=(0,o.aZ)({__name:"BTr",props:{variant:null},setup(t){const e=t,n=(0,o.Fl)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,o.wg)(),(0,o.iD)("tr",{role:"row",class:(0,s.C_)((0,i.SU)(n))},[(0,o.WI)(t.$slots,"default")],2))}}),Bm=["id","data-bs-target","aria-controls","aria-selected","onClick"],Um=Symbol(),Fm=(0,o.aZ)({__name:"BTabs",props:{activeNavItemClass:null,activeTabClass:null,align:null,card:{default:!1},contentClass:null,end:{default:!1},fill:{default:!1},id:null,justified:{default:!1},lazy:{default:!1},navClass:null,navWrapperClass:null,noFade:{default:!1},noNavStyle:{default:!1},pills:{default:!1},small:{default:!1},tag:{default:"div"},vertical:{default:!1},modelValue:{default:-1}},emits:["update:modelValue","activate-tab","click"],setup(t,{emit:e}){const n=t,r=(0,o.Rr)(),l=ec((0,i.Vh)(n,"card")),c=ec((0,i.Vh)(n,"end")),u=ec((0,i.Vh)(n,"fill")),h=ec((0,i.Vh)(n,"justified")),d=ec((0,i.Vh)(n,"lazy")),f=ec((0,i.Vh)(n,"noFade")),p=ec((0,i.Vh)(n,"noNavStyle")),m=ec((0,i.Vh)(n,"pills")),g=ec((0,i.Vh)(n,"small")),y=ec((0,i.Vh)(n,"vertical")),v=(0,i.iH)(n.modelValue),w=(0,i.iH)(""),b=(0,o.Fl)({get:()=>v.value,set:t=>{v.value=t,_.value.length>0&&t>=0&&t<_.value.length?w.value=_.value[t].buttonId:w.value="",e("update:modelValue",t)}}),_=(0,o.Fl)((()=>{let t=[];return r.default&&(t=M(r).map(((t,e)=>{t.props||(t.props={});const i=t.props["button-id"]||zl("tab"),o=t.props.id||zl(),s=b.value>-1?e===b.value:""===t.props.active,a=t.props["title-item-class"],l=t.props["title-link-attributes"];return{buttonId:i,contentId:o,active:s,disabled:""===t.props.disabled||!0===t.props.disabled,navItemClasses:[{active:s,disabled:""===t.props.disabled||!0===t.props.disabled},s&&n.activeNavItemClass?n.activeNavItemClass:null,t.props["title-link-class"]],tabClasses:[{fade:!f.value},s&&n.activeTabClass?n.activeTabClass:null],target:`#${o}`,title:t.props.title,titleItemClass:a,titleLinkAttributes:l,onClick:t.props.onClick,tab:t,tabComponent:()=>M(r)[e]}}))),t})),S=(0,o.Fl)((()=>!((null==_?void 0:_.value)&&_.value.length>0))),E=(0,o.Fl)((()=>({"d-flex":y.value,"align-items-start":y.value}))),A=Pa((0,i.Vh)(n,"align")),x=(0,o.Fl)((()=>({"nav-pills":m.value,"flex-column me-3":y.value,[A.value]:void 0!==n.align,"nav-fill":u.value,"card-header-tabs":l.value,"nav-justified":h.value,"nav-tabs":!p.value&&!m.value,small:g.value}))),C=t=>{let r=!1;if(void 0!==t&&t>-1&&t<_.value.length&&!_.value[t].disabled&&(b.value<0||_.value[t].buttonId!==w.value)){const n=new La("activate-tab",{cancelable:!0});e("activate-tab",t,b.value,n),n.defaultPrevented||(b.value=t,r=!0)}return!r&&n.modelValue!==b.value&&e("update:modelValue",b.value),r},T=(t,e)=>{var n;C(e),e>=0&&!_.value[e].disabled&&(null==(n=_.value[e])?void 0:n.onClick)&&"function"==typeof _.value[e].onClick&&_.value[e].onClick(t)},M=t=>t&&t.default?t.default().reduce(((t,e)=>("symbol"==typeof e.type?t=t.concat(e.children):t.push(e),t)),[]).filter((t=>{var e;return"BTab"===(null==(e=t.type)?void 0:e.__name)})):[];return C(v.value),(0,o.YP)((()=>n.modelValue),((t,e)=>{if(t===e)return;if(t=Math.max(t,-1),e=Math.max(e,-1),_.value.length<=0)return void(b.value=-1);const n=t>e;let r=t;const i=_.value.length-1;for(;r>=0&&r<=i&&_.value[r].disabled;)r+=n?1:-1;r<0?C(0):r>=_.value.length?C(_.value.length-1):C(r)})),(0,o.YP)((()=>_.value),(()=>{let t=_.value.map((t=>t.active&&!t.disabled)).lastIndexOf(!0);t<0&&(b.value>=_.value.length?t=_.value.map((t=>!t.disabled)).lastIndexOf(!0):_.value[b.value]&&!_.value[b.value].disabled&&(t=b.value)),t<0&&(t=_.value.map((t=>!t.disabled)).indexOf(!0)),_.value.forEach(((e,n)=>e.active=n===t)),C(t)})),(0,o.bv)((()=>{if(b.value<0&&_.value.length>0&&!_.value.some((t=>t.active))){const t=_.value.map((t=>!t.disabled)).indexOf(!0);C(t>=0?t:-1)}})),(0,o.JJ)(Um,{lazy:d.value,card:l.value}),(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:t.id,class:(0,s.C_)(["tabs",(0,i.SU)(E)])},{default:(0,o.w5)((()=>[(0,i.SU)(c)?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["tab-content",t.contentClass])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(_),(({tabComponent:t,contentId:e,tabClasses:n,active:r},i)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t()),{id:e,key:i,class:(0,s.C_)(n),active:r},null,8,["id","class","active"])))),128)),(0,i.SU)(S)?((0,o.wg)(),(0,o.iD)("div",{key:"bv-empty-tab",class:(0,s.C_)(["tab-pane active",{"card-body":(0,i.SU)(l)}])},[(0,o.WI)(e.$slots,"empty")],2)):(0,o.kq)("",!0)],2)):(0,o.kq)("",!0),(0,o._)("div",{class:(0,s.C_)([t.navWrapperClass,{"card-header":(0,i.SU)(l),"ms-auto":t.vertical&&(0,i.SU)(c)}])},[(0,o._)("ul",{class:(0,s.C_)(["nav",[(0,i.SU)(x),t.navClass]]),role:"tablist"},[(0,o.WI)(e.$slots,"tabs-start"),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(_),(({tab:t,buttonId:e,contentId:n,navItemClasses:r,active:i,target:l},c)=>((0,o.wg)(),(0,o.iD)("li",{key:c,class:(0,s.C_)(["nav-item",t.props["title-item-class"]])},[(0,o._)("button",(0,o.dG)({id:e,class:["nav-link",r],"data-bs-toggle":"tab","data-bs-target":l,role:"tab","aria-controls":n,"aria-selected":i},t.props["title-link-attributes"],{onClick:(0,a.iM)((t=>T(t,c)),["stop","prevent"])}),[t.children&&t.children.title?((0,o.wg)(),(0,o.j4)((0,o.LL)(t.children.title),{key:0})):((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Uk)((0,s.zw)(t.props.title),1)],64))],16,Bm)],2)))),128)),(0,o.WI)(e.$slots,"tabs-end")],2)],2),(0,i.SU)(c)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,s.C_)(["tab-content",t.contentClass])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(_),(({tabComponent:t,contentId:e,tabClasses:n,active:r},i)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t()),{id:e,key:i,class:(0,s.C_)(n),active:r},null,8,["id","class","active"])))),128)),(0,i.SU)(S)?((0,o.wg)(),(0,o.iD)("div",{key:"bv-empty-tab",class:(0,s.C_)(["tab-pane active",{"card-body":(0,i.SU)(l)}])},[(0,o.WI)(e.$slots,"empty")],2)):(0,o.kq)("",!0)],2))])),_:3},8,["id","class"]))}}),zm=(0,o.aZ)({__name:"BTab",props:{id:null,title:null,active:{default:!1},buttonId:{default:void 0},disabled:{default:!1},lazy:{default:void 0},lazyOnce:{default:void 0},noBody:{type:[Boolean,String],default:!1},tag:{default:"div"},titleItemClass:null,titleLinkAttributes:{default:void 0},titleLinkClass:null},setup(t){const e=t,n=(0,o.f3)(Um,null),r=ec((0,i.Vh)(e,"active")),a=ec((0,i.Vh)(e,"disabled")),l=ec((0,i.Vh)(e,void 0!==e.lazyOnce?"lazyOnce":"lazy")),c=(0,i.iH)(!1),u=(0,o.Fl)((()=>!(!(null==n?void 0:n.lazy)&&!l.value))),h=(0,o.Fl)((()=>void 0!==e.lazyOnce)),d=(0,o.Fl)((()=>r.value&&!a.value)),f=(0,o.Fl)((()=>{const t=u.value&&h.value&&c.value;return d.value||!u.value||t})),p=(0,o.Fl)((()=>({active:r.value,show:r.value,"card-body":(null==n?void 0:n.card)&&!1===e.noBody})));return(0,o.YP)((()=>f.value),(t=>{t&&!c.value&&(c.value=!0)})),(e,n)=>((0,o.wg)(),(0,o.j4)((0,o.LL)(t.tag),{id:t.id,class:(0,s.C_)(["tab-pane",(0,i.SU)(p)]),role:"tabpanel","aria-labelledby":"profile-tab"},{default:(0,o.w5)((()=>[(0,i.SU)(f)?(0,o.WI)(e.$slots,"default",{key:0}):(0,o.kq)("",!0)])),_:3},8,["id","class"]))}}),Vm=Object.freeze(Object.defineProperty({__proto__:null,BAccordion:Ac,BAccordionItem:$c,BAlert:au,BAvatar:pu,BAvatarGroup:cu,BBadge:vu,BBreadcrumb:xu,BBreadcrumbItem:Su,BButton:ou,BButtonGroup:Cu,BButtonToolbar:Mu,BCloseButton:Xc,BCard:Uu,BCardBody:Lu,BCardFooter:Bu,BCardGroup:Fu,BCardHeader:Du,BCardImg:ku,BCardSubtitle:Pu,BCardText:zu,BCardTitle:Nu,BCarousel:Ju,BCarouselSlide:ih,BCol:uh,BCollapse:xc,BContainer:Ah,BDropdown:Th,BDropdownDivider:Ih,BDropdownForm:Nh,BDropdownGroup:Uh,BDropdownHeader:Hh,BDropdownItem:Wh,BDropdownItemButton:qh,BDropdownText:Zh,BForm:Jh,BFormFloatingLabel:ed,BFormInvalidFeedback:nd,BFormRow:rd,BFormText:id,BFormValidFeedback:od,BFormCheckbox:cd,BFormCheckboxGroup:fd,BFormGroup:Sd,BFormInput:Td,BFormRadio:kd,BFormRadioGroup:Nd,BFormSelect:zd,BFormSelectOption:Ld,BFormSelectOptionGroup:Ud,BFormTag:Hd,BFormTags:nf,BFormTextarea:af,BImg:Iu,BInputGroup:pf,BInputGroupAddon:gf,BInputGroupAppend:yf,BInputGroupPrepend:vf,BInputGroupText:mf,BLink:nu,BListGroup:bf,BListGroupItem:_f,BModal:Cf,BNav:Tf,BNavForm:Mf,BNavItem:Rf,BNavItemDropdown:Nf,BNavText:Lf,BNavbar:Bf,BNavbarBrand:Vf,BNavbarNav:Hf,BNavbarToggle:Wf,BOffcanvas:Zf,BOverlay:Kf,BPagination:hp,BPlaceholder:dp,BPlaceholderButton:fp,BPlaceholderCard:pp,BPlaceholderTable:gp,BPlaceholderWrapper:yp,BPopover:Ep,BProgress:Tp,BProgressBar:xp,BRow:Op,BSkeleton:Rp,BSkeletonIcon:Dp,BSkeletonTable:Lp,BSkeletonWrapper:Bp,BSpinner:Kc,BFormSpinButton:om,BTable:Cm,BTableSimple:mp,BTbody:Tm,BTd:km,BTfoot:Om,BTh:Nm,BThead:Pm,BTr:Lm,BTab:zm,BTabs:Fm,BToastContainer:Eh,BTransition:qc,BToast:Sh,BToaster:Eh,BToastPlugin:wh},Symbol.toStringTag,{value:"Module"})),Hm=Object.freeze(Object.defineProperty({__proto__:null,vBColorMode:Tc,vBPopover:Mc,vBToggle:Oc,vBTooltip:Lc,vBVisible:Vc},Symbol.toStringTag,{value:"Module"})),jm=(Symbol.toStringTag,Symbol.toStringTag,Symbol.toStringTag,{install(t,e={}){Object.entries(Vm).forEach((([e,n])=>{t.component(e,n)})),Object.entries(Hm).forEach((([e,n])=>{t.directive(e,n)})),ic(t)}})},411:function(t){"use strict";async function*e(t,e={}){const n=t.getReader();try{while(1){const t=await n.read();if(t.done)return;yield t.value}}finally{!0!==e.preventCancel&&n.cancel(),n.releaseLock()}}t.exports=e},8716:function(t,e,n){"use strict";n(7658);var r={single_source_shortest_paths:function(t,e,n){var i={},o={};o[e]=0;var s,a,l,c,u,h,d,f,p,m=r.PriorityQueue.make();m.push(e,0);while(!m.empty())for(l in s=m.pop(),a=s.value,c=s.cost,u=t[a]||{},u)u.hasOwnProperty(l)&&(h=u[l],d=c+h,f=o[l],p="undefined"===typeof o[l],(p||f>d)&&(o[l]=d,m.push(l,d),i[l]=a));if("undefined"!==typeof n&&"undefined"===typeof o[n]){var g=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(g)}return i},extract_shortest_path_from_predecessor_list:function(t,e){var n=[],r=e;while(r)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var i=r.single_source_shortest_paths(t,e,n);return r.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(t){var e,n=r.PriorityQueue,i={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=r},4700:function(t,e,n){"use strict";n(7658),n(3767),n(8585),n(8696),t.exports=function(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319&&n>r+1){var o=t.charCodeAt(r+1);o>=56320&&o<=57343&&(i=1024*(i-55296)+o-56320+65536,r+=1)}i<128?e.push(i):i<2048?(e.push(i>>6|192),e.push(63&i|128)):i<55296||i>=57344&&i<65536?(e.push(i>>12|224),e.push(i>>6&63|128),e.push(63&i|128)):i>=65536&&i<=1114111?(e.push(i>>18|240),e.push(i>>12&63|128),e.push(i>>6&63|128),e.push(63&i|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},9998:function(t){"use strict";function e(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}function n(t,n,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(t));const o=e(new n,r);return o}}t.exports=n},9150:function(t,e,n){"use strict";n(7658);const r=n(1946),{fromString:i}=n(6555);class o{constructor(t,e,n=0){this._options=t,this._popCount=0,this._parent=e,this._posAtParent=n,this._children=new r,this.key=null}async put(t,e){const n=await this._findNewBucketAndPos(t);await n.bucket._putAt(n,t,e)}async get(t){const e=await this._findChild(t);if(e)return e.value}async del(t){const e=await this._findPlace(t),n=e.bucket._at(e.pos);n&&n.key===t&&e.bucket._delAt(e.pos)}leafCount(){const t=this._children.compactArray();return t.reduce(((t,e)=>e instanceof o?t+e.leafCount():t+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const t=this._children.compactArray();for(const e of t)e instanceof o?yield*e.eachLeafSeries():yield e;return[]}serialize(t,e){const n=[];return e(this._children.reduce(((n,r,i)=>(r&&(r instanceof o?n.push(r.serialize(t,e)):n.push(t(r,i))),n)),n))}asyncTransform(t,e){return c(this,t,e)}toJSON(){return this.serialize(a,l)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(t){const e=await this._findPlace(t),n=e.bucket._at(e.pos);if(!(n instanceof o))return n&&n.key===t?n:void 0}async _findPlace(t){const e=this._options.hash("string"===typeof t?i(t):t),n=await e.take(this._options.bits),r=this._children.get(n);return r instanceof o?r._findPlace(e):{bucket:this,pos:n,hash:e,existingChild:r}}async _findNewBucketAndPos(t){const e=await this._findPlace(t);if(e.existingChild&&e.existingChild.key!==t){const t=new o(this._options,e.bucket,e.pos);e.bucket._putObjectAt(e.pos,t);const n=await t._findPlace(e.existingChild.hash);return n.bucket._putAt(n,e.existingChild.key,e.existingChild.value),t._findNewBucketAndPos(e.hash)}return e}_putAt(t,e,n){this._putObjectAt(t.pos,{key:e,value:n,hash:t.hash})}_putObjectAt(t,e){this._children.get(t)||this._popCount++,this._children.set(t,e)}_delAt(t){if(-1===t)throw new Error("Invalid position");this._children.get(t)&&this._popCount--,this._children.unset(t),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const t=this._children.find(s);if(t&&!(t instanceof o)){const e=t.hash;e.untake(this._options.bits);const n={pos:this._posAtParent,hash:e,bucket:this._parent};this._parent._putAt(n,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}_at(t){return this._children.get(t)}}function s(t){return Boolean(t)}function a(t,e){return t.key}function l(t){return t}async function c(t,e,n){const r=[];for(const i of t._children.compactArray())if(i instanceof o)await c(i,e,n);else{const n=await e(i);r.push({bitField:t._children.bitField(),children:n})}return n(r)}t.exports=o},8950:function(t){"use strict";const e=[255,254,252,248,240,224,192,128],n=[1,3,7,15,31,63,127,255];function r(t,e,n){const r=i(e,n);return(t&r)>>>e}function i(t,r){return e[t]&n[Math.min(r+t-1,7)]}t.exports=class{constructor(t){this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(t){let e=t,n=0;while(e&&this._haveBits()){const t=this._value[this._currentBytePos],i=this._currentBitPos+1,o=Math.min(i,e),s=r(t,i-o,o);n=(n<<o)+s,e-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(t){this._currentBitPos+=t;while(this._currentBitPos>7)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},3165:function(t,e,n){"use strict";n(3767),n(8585),n(8696),n(7658);const r=n(8950),{concat:i}=n(5489);function o(t){function e(e){return e instanceof s?e:new s(e,t)}return e}class s{constructor(t,e){if(!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=e,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(t){let e=t;while(this._availableBits<e)await this._produceMoreBits();let n=0;while(e>0){const t=this._buffers[this._currentBufferIndex],r=Math.min(t.availableBits(),e),i=t.take(r);n=(n<<r)+i,e-=r,this._availableBits-=r,0===t.availableBits()&&this._currentBufferIndex++}return n}untake(t){let e=t;while(e>0){const t=this._buffers[this._currentBufferIndex],n=Math.min(t.totalBits()-t.availableBits(),e);t.untake(n),e-=n,this._availableBits+=n,this._currentBufferIndex>0&&t.totalBits()===t.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const t=this._depth?i([this._value,Uint8Array.from([this._depth])]):this._value,e=await this._hashFn(t),n=new r(e);this._buffers.push(n),this._availableBits+=n.availableBits()}}t.exports=o,t.exports.InfiniteHash=s},9800:function(t,e,n){"use strict";const r=n(9150),i=n(3165);function o(t){if(!t||!t.hashFn)throw new Error("please define an options.hashFn");const e={bits:t.bits||8,hash:i(t.hashFn)};return new r(e)}t.exports={createHAMT:o,Bucket:r}},4405:function(t,e,n){"use strict";n.d(e,{t2:function(){return J}});var r;n(7658);(function(t){t[t["QR_CODE"]=0]="QR_CODE",t[t["AZTEC"]=1]="AZTEC",t[t["CODABAR"]=2]="CODABAR",t[t["CODE_39"]=3]="CODE_39",t[t["CODE_93"]=4]="CODE_93",t[t["CODE_128"]=5]="CODE_128",t[t["DATA_MATRIX"]=6]="DATA_MATRIX",t[t["MAXICODE"]=7]="MAXICODE",t[t["ITF"]=8]="ITF",t[t["EAN_13"]=9]="EAN_13",t[t["EAN_8"]=10]="EAN_8",t[t["PDF_417"]=11]="PDF_417",t[t["RSS_14"]=12]="RSS_14",t[t["RSS_EXPANDED"]=13]="RSS_EXPANDED",t[t["UPC_A"]=14]="UPC_A",t[t["UPC_E"]=15]="UPC_E",t[t["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(r||(r={}));var i,o,s=new Map([[r.QR_CODE,"QR_CODE"],[r.AZTEC,"AZTEC"],[r.CODABAR,"CODABAR"],[r.CODE_39,"CODE_39"],[r.CODE_93,"CODE_93"],[r.CODE_128,"CODE_128"],[r.DATA_MATRIX,"DATA_MATRIX"],[r.MAXICODE,"MAXICODE"],[r.ITF,"ITF"],[r.EAN_13,"EAN_13"],[r.EAN_8,"EAN_8"],[r.PDF_417,"PDF_417"],[r.RSS_14,"RSS_14"],[r.RSS_EXPANDED,"RSS_EXPANDED"],[r.UPC_A,"UPC_A"],[r.UPC_E,"UPC_E"],[r.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function a(t){return Object.values(r).includes(t)}(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["URL"]=1]="URL"})(i||(i={})),function(t){t[t["SCAN_TYPE_CAMERA"]=0]="SCAN_TYPE_CAMERA",t[t["SCAN_TYPE_FILE"]=1]="SCAN_TYPE_FILE"}(o||(o={}));var l,c=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[o.SCAN_TYPE_CAMERA,o.SCAN_TYPE_FILE],t}(),u=function(){function t(t,e){this.format=t,this.formatName=e}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!s.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,s.get(e))},t}(),h=function(){function t(){}return t.createFromText=function(t){var e={text:t};return{decodedText:t,result:e}},t.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},t}();(function(t){t[t["UNKWOWN_ERROR"]=0]="UNKWOWN_ERROR",t[t["IMPLEMENTATION_ERROR"]=1]="IMPLEMENTATION_ERROR",t[t["NO_CODE_FOUND_ERROR"]=2]="NO_CODE_FOUND_ERROR"})(l||(l={}));var d=function(){function t(){}return t.createFrom=function(t){return{errorMessage:t,type:l.UNKWOWN_ERROR}},t}(),f=function(){function t(t){this.verbose=t}return t.prototype.log=function(t){this.verbose&&console.log(t)},t.prototype.warn=function(t){this.verbose&&console.warn(t)},t.prototype.logError=function(t,e){(this.verbose||!0===e)&&console.error(t)},t.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},t}();function p(t){return"undefined"===typeof t||null===t}function m(t,e,n){return t>n?n:t<e?e:t}var g,y=function(){function t(){}return t.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},t.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),v=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(t){return"Last Match: ".concat(t)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),w=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),b=function(){function t(){}return t.isMediaStreamConstraintsValid=function(t,e){if("object"!==typeof t){var n=typeof t;return e.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(r),o=Object.keys(t),s=0,a=o;s<a.length;s++){var l=a[s];if(i.has(l))return e.logError("".concat(l," is not supported videoConstaints."),!0),!1}return!0},t}(),_=n(5176),S=function(){function t(t,e,n){if(this.formatMap=new Map([[r.QR_CODE,_.BarcodeFormat.QR_CODE],[r.AZTEC,_.BarcodeFormat.AZTEC],[r.CODABAR,_.BarcodeFormat.CODABAR],[r.CODE_39,_.BarcodeFormat.CODE_39],[r.CODE_93,_.BarcodeFormat.CODE_93],[r.CODE_128,_.BarcodeFormat.CODE_128],[r.DATA_MATRIX,_.BarcodeFormat.DATA_MATRIX],[r.MAXICODE,_.BarcodeFormat.MAXICODE],[r.ITF,_.BarcodeFormat.ITF],[r.EAN_13,_.BarcodeFormat.EAN_13],[r.EAN_8,_.BarcodeFormat.EAN_8],[r.PDF_417,_.BarcodeFormat.PDF_417],[r.RSS_14,_.BarcodeFormat.RSS_14],[r.RSS_EXPANDED,_.BarcodeFormat.RSS_EXPANDED],[r.UPC_A,_.BarcodeFormat.UPC_A],[r.UPC_E,_.BarcodeFormat.UPC_E],[r.UPC_EAN_EXTENSION,_.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=e,this.logger=n;var i=this.createZXingFormats(t),o=new Map;o.set(_.DecodeHintType.POSSIBLE_FORMATS,i),o.set(_.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(t){var e=this;return new Promise((function(n,r){try{n(e.decode(t))}catch(i){r(i)}}))},t.prototype.decode=function(t){var e=new _.MultiFormatReader(this.verbose,this.hints),n=new _.HTMLCanvasElementLuminanceSource(t),r=new _.BinaryBitmap(new _.HybridBinarizer(n)),i=e.decode(r);return{text:i.text,format:u.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach((function(e,n,r){t.set(e,n)})),t},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},t.prototype.createZXingFormats=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];this.formatMap.has(i)?e.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return e},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),E=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},A=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},x=function(){function t(e,n,i){if(this.formatMap=new Map([[r.QR_CODE,"qr_code"],[r.AZTEC,"aztec"],[r.CODABAR,"codabar"],[r.CODE_39,"code_39"],[r.CODE_93,"code_93"],[r.CODE_128,"code_128"],[r.DATA_MATRIX,"data_matrix"],[r.ITF,"itf"],[r.EAN_13,"ean_13"],[r.EAN_8,"ean_8"],[r.PDF_417,"pdf417"],[r.UPC_A,"upc_a"],[r.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return"undefined"!==typeof t},t.prototype.decodeAsync=function(t){return E(this,void 0,void 0,(function(){var e,n;return A(this,(function(r){switch(r.label){case 0:return[4,this.detector.detect(t)];case 1:if(e=r.sent(),!e||0===e.length)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(e),[2,{text:n.rawValue,format:u.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}}))}))},t.prototype.selectLargestBarcode=function(t){for(var e=null,n=0,r=0,i=t;r<i.length;r++){var o=i[r],s=o.boundingBox.width*o.boundingBox.height;s>n&&(n=s,e=o)}if(!e)throw"No largest barcode found";return e},t.prototype.createBarcodeDetectorFormats=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];this.formatMap.has(i)?e.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:e}},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach((function(e,n,r){t.set(e,n)})),t},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),C=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},T=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},M=function(){function t(t,e,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,e&&x.isSupported()?(this.primaryDecoder=new x(t,n,r),this.secondaryDecoder=new S(t,n,r)):this.primaryDecoder=new S(t,n,r)}return t.prototype.decodeAsync=function(t){return C(this,void 0,void 0,(function(){var e;return T(this,(function(n){switch(n.label){case 0:e=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(e),[7];case 4:return[2]}}))}))},t.prototype.decodeRobustlyAsync=function(t){return C(this,void 0,void 0,(function(){var e,n;return T(this,(function(r){switch(r.label){case 0:e=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(e),[7];case 5:return[2]}}))}))},t.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(t){if(this.verbose){var e=performance.now()-t;this.executionResults.push(e),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,e=0,n=this.executionResults;e<n.length;e++){var r=n[e];t+=r}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},O=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},R=function(){function t(t,e){this.name=t,this.track=e}return t.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},t.prototype.apply=function(t){var e={};e[this.name]=t;var n={advanced:[e]};return this.track.applyConstraints(n)},t.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var e=t[this.name];return e}return null},t}(),D=function(t){function e(e,n){return t.call(this,e,n)||this}return I(e,t),e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var e={};e[this.name]=t;var n={advanced:[e]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),e=t[this.name];return{min:e.min,max:e.max,step:e.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(R),N=function(t){function e(e){return t.call(this,"zoom",e)||this}return I(e,t),e}(D),P=function(t){function e(e){return t.call(this,"torch",e)||this}return I(e,t),e}(R),L=function(){function t(t){this.track=t}return t.prototype.zoomFeature=function(){return new N(this.track)},t.prototype.torchFeature=function(){return new P(this.track)},t}(),B=function(){function t(t,e,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=e,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return t.prototype.createVideoElement=function(t){var e=document.createElement("video");return e.style.width="".concat(t,"px"),e.style.display="block",e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},t.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var e=function(){var n=t.surface.clientWidth,r=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,r),t.surface.removeEventListener("playing",e)};this.surface.addEventListener("playing",e),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return k(this,void 0,void 0,(function(){var o,s;return O(this,(function(a){switch(a.label){case 0:return o=new t(e,n,i),r.aspectRatio?(s={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}}))}))},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(t){this.failIfClosed();var e=this,n=function(){setTimeout(t,200),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(t){return k(this,void 0,void 0,(function(){return O(this,(function(e){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]}))}))},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise((function(e,n){var r=t.mediaStream.getVideoTracks(),i=r.length,o=0;t.mediaStream.getVideoTracks().forEach((function(n){t.mediaStream.removeTrack(n),n.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),e())}))}))},t.prototype.getCapabilities=function(){return new L(this.getFirstTrackOrFail())},t}(),U=function(){function t(t){this.mediaStream=t}return t.prototype.render=function(t,e,n){return k(this,void 0,void 0,(function(){return O(this,(function(r){return[2,B.create(t,this.mediaStream,e,n)]}))}))},t.create=function(e){return k(this,void 0,void 0,(function(){var n,r;return O(this,(function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}}))}))},t}(),F=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},z=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},V=function(){function t(){}return t.failIfNotSupported=function(){return F(this,void 0,void 0,(function(){return z(this,(function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]}))}))},t.prototype.create=function(t){return F(this,void 0,void 0,(function(){return z(this,(function(e){return[2,U.create(t)]}))}))},t}(),H=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},j=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},W=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=y.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=y.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},t.getCamerasFromMediaDevices=function(){return H(this,void 0,void 0,(function(){var t,e,n,r,i,o,s;return j(this,(function(a){switch(a.label){case 0:return t=function(t){for(var e=t.getVideoTracks(),n=0,r=e;n<r.length;n++){var i=r[n];i.enabled=!1,i.stop(),t.removeTrack(i)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return e=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),r=[],i=0,o=n;i<o.length;i++)s=o[i],"videoinput"===s.kind&&r.push({id:s.deviceId,label:s.label});return t(e),[2,r]}}))}))},t.getCamerasFromMediaStreamTrack=function(){return new Promise((function(t,e){var n=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}t(n)},r=MediaStreamTrack;r.getSources(n)}))},t}();(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["NOT_STARTED"]=1]="NOT_STARTED",t[t["SCANNING"]=2]="SCANNING",t[t["PAUSED"]=3]="PAUSED"})(g||(g={}));var G,$=function(){function t(){this.state=g.NOT_STARTED,this.onGoingTransactionNewState=g.UNKNOWN}return t.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},t.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===g.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=g.UNKNOWN,this.directTransition(t)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===g.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=g.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==g.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(t){switch(this.state){case g.UNKNOWN:throw"Transition from unknown is not allowed";case g.NOT_STARTED:this.failIfNewStateIs(t,[g.PAUSED]);break;case g.SCANNING:break;case g.PAUSED:break}},t.prototype.failIfNewStateIs=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},t}(),q=function(){function t(t){this.stateManager=t}return t.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},t.prototype.directTransition=function(t){this.stateManager.directTransition(t)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===g.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==g.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===g.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===g.PAUSED},t}(),Y=function(){function t(){}return t.create=function(){return new q(new $)},t}(),X=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return X(e,t),e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(c),K=function(){function t(t,e){this.logger=e,this.fps=Z.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Z.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?b.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!p(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),J=function(){function t(t,e){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");var n;this.elementId=t,this.verbose=!1,"boolean"==typeof e?this.verbose=!0===e:e&&(n=e,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new f(this.verbose),this.qrcode=new M(this.getSupportedFormats(e),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Y.create()}return t.prototype.start=function(t,e,n,r){var i,o=this;if(!t)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var s=K.create(e,this.logger);this.clearElement();var a=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:Z.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,h=this.stateManagerProxy.startTransition(g.SCANNING);return new Promise((function(e,r){var a=l?s.videoConstraints:u.createVideoConstraints(t);if(!a)return h.cancel(),void r("videoConstraints should be defined");var c={};l&&!s.aspectRatio||(c.aspectRatio=s.aspectRatio);var d={onRenderSurfaceReady:function(t,e){u.setupUi(t,e,s),u.isScanning=!0,u.foreverScan(s,n,i)}};V.failIfNotSupported().then((function(t){t.create(a).then((function(t){return t.render(o.element,c,d).then((function(t){u.renderedCamera=t,h.execute(),e(null)})).catch((function(t){h.cancel(),r(t)}))})).catch((function(t){h.cancel(),r(y.errorGettingUserMedia(t))}))})).catch((function(t){h.cancel(),r(y.cameraStreamingNotSupported())}))}))},t.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(g.PAUSED),this.showPausedState(),(p(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,e=function(){t.stateManagerProxy.directTransition(g.SCANNING),t.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){e()})):e()},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var e=this.stateManagerProxy.startTransition(g.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var e=document.getElementById(Z.SHADED_REGION_ELEMENT_ID);e&&t.element.removeChild(e)}},r=this;return this.renderedCamera.close().then((function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),n(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),e.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()}))},t.prototype.scanFile=function(t,e){return this.scanFileV2(t,e).then((function(t){return t.decodedText}))},t.prototype.scanFileV2=function(t,e){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(p(e)&&(e=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var t=o.width,s=o.height,a=document.getElementById(n.elementId),l=a.clientWidth?a.clientWidth:Z.DEFAULT_WIDTH,c=Math.max(a.clientHeight?a.clientHeight:s,Z.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(t,s,l,c);if(e){var d=n.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",a.appendChild(d);var f=d.getContext("2d");if(!f)throw"Unable to get 2d context from canvas";f.canvas.width=l,f.canvas.height=c,f.drawImage(o,0,0,t,s,u.x,u.y,u.width,u.height)}var p=Z.FILE_SCAN_HIDDEN_CANVAS_PADDING,m=Math.max(o.width,u.width),g=Math.max(o.height,u.height),y=m+2*p,v=g+2*p,w=n.createCanvasElement(y,v);a.appendChild(w);var b=w.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=y,b.canvas.height=v,b.drawImage(o,0,0,t,s,p,p,m,g);try{n.qrcode.decodeRobustlyAsync(w).then((function(t){r(h.createFromQrcodeResult(t))})).catch(i)}catch(_){i("QR code parse error, error = ".concat(_))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)}))},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return W.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(t){if(!t)throw"videoConstaints is required argument.";if(!b.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},t.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(t){var e=[r.QR_CODE,r.AZTEC,r.CODABAR,r.CODE_39,r.CODE_93,r.CODE_128,r.DATA_MATRIX,r.MAXICODE,r.ITF,r.EAN_13,r.EAN_8,r.PDF_417,r.RSS_14,r.RSS_EXPANDED,r.UPC_A,r.UPC_E,r.UPC_EAN_EXTENSION];if(!t||"boolean"==typeof t)return e;if(!t.formatsToSupport)return e;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,o=t.formatsToSupport;i<o.length;i++){var s=o[i];a(s)?n.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(t){if(p(t))return!0;if(!p(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(p(t.experimentalFeatures))return!0;var e=t.experimentalFeatures;return!!p(e.useBarCodeDetectorIfSupported)||!1!==e.useBarCodeDetectorIfSupported},t.prototype.validateQrboxSize=function(t,e,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,e,i),s=function(t){if(t<Z.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Z.MIN_QR_BOX_SIZE,"px.")},a=function(e){return e>t&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),e=t),e};s(o.width),s(o.height),o.width=a(o.width)},t.prototype.validateQrboxConfig=function(t){if("number"!==typeof t&&"function"!==typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(t,e,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(t,e)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},t.prototype.setupUi=function(t,e,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,e,n);var r=p(n.qrbox)?{width:t,height:e}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(t,e,r);i.height>e&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=e,s={x:0,y:0,width:t,height:e},a=o?this.getShadedRegionBounds(t,e,i):s,l=this.createCanvasElement(a.width,a.height),c={willReadFrequently:!0},u=l.getContext("2d",c);u.canvas.width=a.width,u.canvas.height=a.height,this.element.append(l),o&&this.possiblyInsertShadingElement(this.element,t,e,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=u,this.canvasElement=l},t.prototype.createScannerPausedUiElement=function(t){var e=document.createElement("div");e.innerText=y.scannerPaused(),e.style.display="none",e.style.position="absolute",e.style.top="0px",e.style.zIndex="1",e.style.background="rgba(9, 9, 9, 0.46)",e.style.color="#FFECEC",e.style.textAlign="center",e.style.width="100%",t.appendChild(e),this.scannerPausedUiElement=e},t.prototype.scanContext=function(t,e){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(e){return t(e.text,h.createFromQrcodeResult(e)),n.possiblyUpdateShaders(!0),!0})).catch((function(t){n.possiblyUpdateShaders(!1);var r=y.codeParseError(t);return e(r,d.createFrom(r)),!1}))},t.prototype.foreverScan=function(t,e,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,s=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*o,l=this.qrRegion.height*s,c=this.qrRegion.x*o,u=this.qrRegion.y*s;this.context.drawImage(i,c,u,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){r.foreverScanTimeout=setTimeout((function(){r.foreverScan(t,e,n)}),r.getTimeoutFps(t.fps))};this.scanContext(e,n).then((function(i){i||!0===t.disableFlip?h():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(e,n).finally((function(){h()})))})).catch((function(t){r.logger.logError("Error happend while scanning context",t),h()}))}},t.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var e="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",o=function(t){if(t in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(t,"'")},s=Object.keys(t);if(1!==s.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(s.length," keys");var a=Object.keys(t)[0];if(a!==e&&a!==n)throw"Only '".concat(e,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==e){var l=t.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}var c=typeof l;throw"Invalid type of 'deviceId' = ".concat(c)}var u=t.facingMode;if("string"==typeof u){if(o(u))return{facingMode:u}}else{if("object"!=typeof u){var h=typeof u;throw"Invalid type of 'facingMode' = ".concat(h)}if(!(i in u))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(u["".concat(i)]))return{facingMode:{exact:u["".concat(i)]}}}}var d=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(d)},t.prototype.computeCanvasDrawConfig=function(t,e,n,r){if(t<=n&&e<=r){var i=(n-t)/2,o=(r-e)/2;return{x:i,y:o,width:t,height:e}}var s=t,a=e;return t>n&&(e*=n/t,t=n),e>r&&(t*=r/e,e=r),this.logger.log("Image downsampled from "+"".concat(s,"X").concat(a)+" to ".concat(t,"X").concat(e,".")),this.computeCanvasDrawConfig(t,e,n,r)},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},t.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(e){e.style.backgroundColor=t?Z.BORDER_SHADER_MATCH_COLOR:Z.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=t)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(t,e,n){var r=t,i=e,o=document.createElement("canvas");return o.style.width="".concat(r,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=p(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(t,e,n){if(n.width>t||n.height>e)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(e-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(t,e,n,r){if(!(e-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(e-r.width)/2,s=(n-r.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Z.SHADED_REGION_ELEMENT_ID),e-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var a=5,l=40;this.insertShaderBorders(i,l,a,-a,null,0,!0),this.insertShaderBorders(i,l,a,-a,null,0,!1),this.insertShaderBorders(i,l,a,null,-a,0,!0),this.insertShaderBorders(i,l,a,null,-a,0,!1),this.insertShaderBorders(i,a,l+a,-a,null,-a,!0),this.insertShaderBorders(i,a,l+a,null,-a,-a,!0),this.insertShaderBorders(i,a,l+a,-a,null,-a,!1),this.insertShaderBorders(i,a,l+a,null,-a,-a,!1),this.hasBorderShaders=!0}t.append(i)}},t.prototype.insertShaderBorders=function(t,e,n,r,i,o,s){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=Z.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(e,"px"),a.style.height="".concat(n,"px"),null!==r&&(a.style.top="".concat(r,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),s?a.style.left="".concat(o,"px"):a.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),t.appendChild(a)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(t){return 1e3/t},t}(),Q="data:image/svg+xml;base64,",tt=Q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",et=Q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",nt=Q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",it=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),ot=function(){function t(){this.data=it.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},t.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=it.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),st=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=w.poweredBy();var e=document.createElement("a");e.innerText="ScanApp",e.href="https://scanapp.org",e.target="new",e.style.color="white",this.infoDiv.appendChild(e);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=w.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),t.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),at=function(){function t(t,e){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=e,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(t){var e=this;this.infoIcon.alt="Info icon",this.infoIcon.src=nt,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(t){return e.onHoverIn()},this.infoIcon.onmouseout=function(t){return e.onHoverOut()},this.infoIcon.onclick=function(t){return e.onClick()},t.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=rt,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=nt,this.infoIcon.style.opacity="0.6")},t}(),lt=function(){function t(){var t=this;this.infoDiv=new st,this.infoIcon=new at((function(){t.infoDiv.show()}),(function(){t.infoDiv.hide()}))}return t.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},t}(),ct=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},ut=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ht=function(){function t(){}return t.hasPermissions=function(){return ct(this,void 0,void 0,(function(){var t,e,n,r;return ut(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)if(r=n[e],"videoinput"===r.kind&&r.label)return[2,!0];return[2,!1]}}))}))},t}(),dt=function(){function t(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(t){return t===o.SCAN_TYPE_CAMERA},t.isFileScanType=function(t){return t===o.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return c.DEFAULT_SUPPORTED_SCAN_TYPE;var e=c.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>e)throw"Max ".concat(e," values expected for ")+"supportedScanTypes";for(var n=0,r=t;n<r.length;n++){var i=r[n];if(!c.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return t},t}(),ft=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),pt=function(){function t(){}return t.createElement=function(t,e){var n=document.createElement(t);return n.id=e,n.classList.add(ft.ALL_ELEMENT_CLASS),"button"===t&&n.setAttribute("type","button"),n},t}(),mt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))},gt=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return l([t,e])}}function l(a){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(n=1,r&&(i=2&a[0]?r["return"]:a[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},yt=function(){function t(t,e,n){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return mt(this,void 0,void 0,(function(){var t,e;return gt(this,(function(n){switch(n.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return e=n.sent(),this.propagateFailure(t,e),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},t.prototype.updateUiBasedOnLatestSettings=function(t,e){t===e?(this.buttonController.setText(e?v.torchOffButton():v.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()},t.prototype.propagateFailure=function(t,e){var n=t?v.torchOnFailedMessage():v.torchOffFailedMessage();e&&(n+="; Error = "+e),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),vt=function(){function t(t,e){this.onTorchActionFailureCallback=e,this.torchButton=pt.createElement("button",ft.TORCH_BUTTON_ID),this.torchController=new yt(t,this,e)}return t.prototype.render=function(t,e){var n=this;this.torchButton.innerText=v.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;var r=this;this.torchButton.addEventListener("click",(function(t){return mt(n,void 0,void 0,(function(){return gt(this,(function(t){switch(t.label){case 0:return[4,r.torchController.flipState()];case 1:return t.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(ft.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(ft.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(ft.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(ft.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),t.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(t){this.torchController=new yt(t,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(t){this.torchButton.innerText=t},t.prototype.reset=function(){this.torchButton.innerText=v.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,i){var o=new t(n,i);return o.render(e,r),o},t}(),wt=function(){function t(t,e,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=e?"block":"none",t.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=pt.createElement("button",ft.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(t){r.click()})),r.append(this.fileSelectionButton),this.fileScanInput=pt.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",(function(t){if(null!=t&&null!=t.target){var e=t.target;if(!e.files||0!==e.files.length){var r=e.files,o=r[0],s=o.name;i.setImageNameToButton(s),n(o)}}}));var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var e=t.dataTransfer;if(e){var r=e.files;if(!r||0===r.length)return;for(var s=!1,a=0;a<r.length;++a){var l=r.item(a);if(l){var c=/image.*/;if(l.type.match(c)){s=!0;var u=l.name;i.setImageNameToButton(u),n(l),o.innerText=v.dragAndDropMessage();break}}}s||(o.innerText=v.dragAndDropMessageOnlyImages())}}))}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=v.dragAndDropMessage(),t.style.fontWeight="400",t},t.prototype.setImageNameToButton=function(t){var e=20;if(t.length>e){var n=t.substring(0,8),r=t.length,i=t.substring(r-8,r);t="".concat(n,"....").concat(i)}var o=v.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=o},t.prototype.setInitialValueToButton=function(){var t=v.fileSelectionChooseImage()+" - "+v.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var i=new t(e,n,r);return i},t}(),bt=function(){function t(t){this.selectElement=pt.createElement("select",ft.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return t.prototype.render=function(t){var e=document.createElement("span");e.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)e.style.display="none";else{var r=v.selectCamera();e.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,s=this.cameras;o<s.length;o++){var a=s[o],l=a.id,c=null==a.label?l:a.label;c&&""!==c||(c=[v.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}e.appendChild(this.selectElement),t.appendChild(e)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return!0===this.selectElement.disabled},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(t){for(var e=0,n=this.options;e<n.length;e++){var r=n[e];if(r.value===t)return!0}return!1},t.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},t.prototype.hasSingleItem=function(){return 1===this.cameras.length},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),_t=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=pt.createElement("input",ft.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(t,e){this.zoomElementContainer.style.display=e?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=v.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",(function(){return r.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return r.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var t=v.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(t,e,n,r){this.rangeInput.min=t.toString(),this.rangeInput.max=e.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}();function St(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function Et(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}(function(t){t[t["STATUS_DEFAULT"]=0]="STATUS_DEFAULT",t[t["STATUS_SUCCESS"]=1]="STATUS_SUCCESS",t[t["STATUS_WARNING"]=2]="STATUS_WARNING",t[t["STATUS_REQUESTING_PERMISSION"]=3]="STATUS_REQUESTING_PERMISSION"})(G||(G={}));(function(){function t(t,e,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(e),this.verbose=!0===n,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new dt(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new f(this.verbose),this.persistedDataManager=new ot,!0!==e.rememberLastUsedCamera&&this.persistedDataManager.reset()}t.prototype.render=function(t,e){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(e,r){if(t)t(e,r);else{if(n.lastMatchFound===e)return;n.lastMatchFound=e,n.setHeaderMessage(v.lastMatch(e),G.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(t,n){e&&e(t,n)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id=".concat(this.elementId," not found");r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new J(this.getScanRegionId(),Et(this.config,this.verbose))},t.prototype.pause=function(t){(p(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var t=this,e=function(){var e=document.getElementById(t.elementId);e&&(e.innerHTML="",t.resetBasicLayout(e))};return this.html5Qrcode?new Promise((function(n,r){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then((function(r){t.html5Qrcode?(t.html5Qrcode.clear(),e(),n()):n()})).catch((function(e){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",e),r(e)})):(t.html5Qrcode.clear(),e(),n()):n()})):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(t){return t?(t.fps||(t.fps=c.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!c.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=c.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=c.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:c.SCAN_DEFAULT_FPS,rememberLastUsedCamera:c.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:c.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var e=document.createElement("div"),n=this.getScanRegionId();e.id=n,e.style.width="100%",e.style.minHeight="100px",e.style.textAlign="center",t.appendChild(e),dt.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",t.appendChild(r),this.setupInitialDashboard(r)},t.prototype.resetBasicLayout=function(t){t.style.border="none"},t.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(t){var e=document.createElement("div");e.style.textAlign="left",e.style.margin="0px",t.appendChild(e);var n=new lt;n.renderInto(e);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",e.appendChild(r)},t.prototype.createSection=function(t){var e=document.createElement("div");e.id=this.getDashboardSectionId(),e.style.width="100%",e.style.padding="10px 0px 10px 0px",e.style.textAlign="left",t.appendChild(e)},t.prototype.createCameraListUi=function(t,e,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(v.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(t,e)};J.getCameras().then((function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(t.removeChild(e),r.renderCameraSelection(n)):(r.setHeaderMessage(v.noCameraFound(),G.STATUS_WARNING),i())})).catch((function(t){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(t,G.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)}))},t.prototype.createPermissionButton=function(t,e){var n=this,r=pt.createElement("button",this.getCameraPermissionButtonId());r.innerText=v.cameraPermissionTitle(),r.addEventListener("click",(function(){r.disabled=!0,n.createCameraListUi(t,e,r)})),e.appendChild(r)},t.prototype.createPermissionsUi=function(t,e){var n=this;dt.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?ht.hasPermissions().then((function(r){r?n.createCameraListUi(t,e):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,e))})).catch((function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,e)})):this.createPermissionButton(t,e)},t.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),e=document.createElement("div");t.appendChild(e);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=dt.isCameraScanType(this.currentScanType)?"block":"none",e.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(e)},t.prototype.renderFileScanUi=function(t){var e=dt.isFileScanType(this.currentScanType),n=this,r=function(t){if(!n.html5Qrcode)throw"html5Qrcode not defined";dt.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(v.loadingImage()),n.html5Qrcode.scanFileV2(t,!0).then((function(t){n.resetHeaderMessage(),n.qrCodeSuccessCallback(t.decodedText,t)})).catch((function(t){n.setHeaderMessage(t,G.STATUS_WARNING),n.qrCodeErrorCallback(t,d.createFrom(t))})))};this.fileSelectionUi=wt.create(t,e,r)},t.prototype.renderCameraSelection=function(t){var e=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=_t.create(r,!1),o=function(t){var n=t.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback((function(t){n.apply(t)}));var r=1;e.config.defaultZoomValueIfSupported&&(r=e.config.defaultZoomValueIfSupported),r=m(r,n.min(),n.max()),i.setValues(n.min(),n.max(),r,n.step()),i.show()}},s=bt.create(r,t),a=document.createElement("span"),l=pt.createElement("button",ft.CAMERA_START_BUTTON_ID);l.innerText=v.scanButtonStartScanningText(),a.appendChild(l);var c,u=pt.createElement("button",ft.CAMERA_STOP_BUTTON_ID);u.innerText=v.scanButtonStopScanningText(),u.style.display="none",u.disabled=!0,a.appendChild(u);var h=function(t){t.torchFeature().isSupported()?(c?c.updateTorchCapability(t.torchFeature()):c=vt.create(a,t.torchFeature(),{display:"none",marginLeft:"5px"},(function(t){n.setHeaderMessage(t,G.STATUS_WARNING)})),c.show()):c&&c.hide()};r.appendChild(a);var d=function(t){t||(l.style.display="none"),l.innerText=v.scanButtonStartScanningText(),l.style.opacity="1",l.disabled=!1,t&&(l.style.display="inline-block")};if(l.addEventListener("click",(function(t){l.innerText=v.scanButtonScanningStarting(),s.disable(),l.disabled=!0,l.style.opacity="0.5",e.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r=s.getValue();n.persistedDataManager.setLastUsedCameraId(r),n.html5Qrcode.start(r,St(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then((function(t){u.disabled=!1,u.style.display="inline-block",d(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===e.config.showTorchButtonIfSupported&&h(r),!0===e.config.showZoomSliderIfSupported&&o(r)})).catch((function(t){n.showHideScanTypeSwapLink(!0),s.enable(),d(!0),n.setHeaderMessage(t,G.STATUS_WARNING)}))})),s.hasSingleItem()&&l.click(),u.addEventListener("click",(function(t){if(!n.html5Qrcode)throw"html5Qrcode not defined";u.disabled=!0,n.html5Qrcode.stop().then((function(t){e.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),l.disabled=!1,u.style.display="none",l.style.display="inline-block",c&&(c.reset(),c.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()})).catch((function(t){u.disabled=!1,n.setHeaderMessage(t,G.STATUS_WARNING)}))})),n.persistedDataManager.getLastUsedCameraId()){var f=n.persistedDataManager.getLastUsedCameraId();s.hasValue(f)?(s.setValue(f),l.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var t=this,e=v.textIfCameraScanSelected(),n=v.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=pt.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=dt.isCameraScanType(this.currentScanType)?e:n,s.addEventListener("click",(function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,dt.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),s.innerText=n,t.currentScanType=o.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),s.innerText=e,t.currentScanType=o.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")})),i.appendChild(s),r.appendChild(i)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,e=this;this.persistedDataManager.hasCameraPermissions()&&ht.hasPermissions().then((function(n){if(n){var r=document.getElementById(e.getCameraPermissionButtonId());if(!r)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else e.persistedDataManager.setHasPermission(!1)})).catch((function(t){e.persistedDataManager.setHasPermission(!1)}))},t.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},t.prototype.setHeaderMessage=function(t,e){e||(e=G.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=t,n.style.display="block",e){case G.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case G.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case G.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return e.innerHTML="<br>",void e.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){e.innerHTML="<br>",e.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=tt,this.cameraScanImage.alt=v.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return e.innerHTML="<br>",void e.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){e.innerHTML="<br>",e.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=et,this.fileScanImage.alt=v.fileScanAltText()},t.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ft.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ft.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}})()},5176:function(t,e,n){n(3767),n(8585),n(8696),n(2801),n(7658),n(541),function(t,n){n(e)}(0,(function(t){"use strict";function e(t){return null===t||void 0===t}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function s(t,e){void 0===e&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var a,l=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),o(r,n.prototype),s(r),r}return i(e,t),e}(Error);class c extends l{constructor(t=undefined){super(t),this.message=t}getKind(){const t=this.constructor;return t.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class h extends c{}h.kind="IllegalArgumentException";class d{constructor(t){if(this.binarizer=t,null===t)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,n,r){const i=this.binarizer.getLuminanceSource().crop(t,e,n,r);return new d(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new d(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new d(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class m{static arraycopy(t,e,n,r,i){while(i--)n[r++]=t[e++]}static currentTimeMillis(){return Date.now()}}class g extends c{}g.kind="IndexOutOfBoundsException";class y extends g{constructor(t=undefined,e=undefined){super(e),this.index=t,this.message=e}}y.kind="ArrayIndexOutOfBoundsException";class v{static fill(t,e){for(let n=0,r=t.length;n<r;n++)t[n]=e}static fillWithin(t,e,n,r){v.rangeCheck(t.length,e,n);for(let i=e;i<n;i++)t[i]=r}static rangeCheck(t,e,n){if(e>n)throw new h("fromIndex("+e+") > toIndex("+n+")");if(e<0)throw new y(e);if(n>t)throw new y(n)}static asList(...t){return t}static create(t,e,n){let r=Array.from({length:t});return r.map((t=>Array.from({length:e}).fill(n)))}static createInt32Array(t,e,n){let r=Array.from({length:t});return r.map((t=>Int32Array.from({length:e}).fill(n)))}static equals(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(const n of t)e=31*e+n;return e}static fillUint8Array(t,e){for(let n=0;n!==t.length;n++)t[n]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){const n=new Uint8Array(e);return n.set(t),n}return t.slice(0,e)}static copyOfRange(t,e,n){const r=n-e,i=new Int32Array(r);return m.arraycopy(t,e,i,0,r),i}static binarySearch(t,e,n){void 0===n&&(n=v.numberComparator);let r=0,i=t.length-1;while(r<=i){const o=i+r>>1,s=n(e,t[o]);if(s>0)r=o+1;else{if(!(s<0))return o;i=o-1}}return-r-1}static numberComparator(t,e){return t-e}}class w{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let n=31;return e=t<<16,0!==e&&(n-=16,t=e),e=t<<8,0!==e&&(n-=8,t=e),e=t<<4,0!==e&&(n-=4,t=e),e=t<<2,0!==e&&(n-=2,t=e),n-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16===0&&(e+=16,t<<=16),t>>>24===0&&(e+=8,t<<=8),t>>>28===0&&(e+=4,t<<=4),t>>>30===0&&(e+=2,t<<=2),e-=t>>>31,e}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t+=t>>>8,t+=t>>>16,63&t}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e=undefined){return parseInt(t,e)}}w.MIN_VALUE_32_BITS=-2147483648,w.MAX_VALUE=Number.MAX_SAFE_INTEGER;class b{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===e||null===e?b.makeArray(t):e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){const e=b.makeArray(t);m.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return 0!==(this.bits[Math.floor(t/32)]&1<<(31&t))}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){const e=this.size;if(t>=e)return e;const n=this.bits;let r=Math.floor(t/32),i=n[r];i&=~((1<<(31&t))-1);const o=n.length;while(0===i){if(++r===o)return e;i=n[r]}const s=32*r+w.numberOfTrailingZeros(i);return s>e?e:s}getNextUnset(t){const e=this.size;if(t>=e)return e;const n=this.bits;let r=Math.floor(t/32),i=~n[r];i&=~((1<<(31&t))-1);const o=n.length;while(0===i){if(++r===o)return e;i=~n[r]}const s=32*r+w.numberOfTrailingZeros(i);return s>e?e:s}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new h;if(e===t)return;e--;const n=Math.floor(t/32),r=Math.floor(e/32),i=this.bits;for(let o=n;o<=r;o++){const s=o>n?0:31&t,a=o<r?31:31&e,l=(2<<a)-(1<<s);i[o]|=l}}clear(){const t=this.bits.length,e=this.bits;for(let n=0;n<t;n++)e[n]=0}isRange(t,e,n){if(e<t||t<0||e>this.size)throw new h;if(e===t)return!0;e--;const r=Math.floor(t/32),i=Math.floor(e/32),o=this.bits;for(let s=r;s<=i;s++){const a=s>r?0:31&t,l=s<i?31:31&e,c=(2<<l)-(1<<a)&4294967295;if((o[s]&c)!==(n?c:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let n=e;n>0;n--)this.appendBit(1===(t>>n-1&1))}appendBitArray(t){const e=t.size;this.ensureCapacity(this.size+e);for(let n=0;n<e;n++)this.appendBit(t.get(n))}xor(t){if(this.size!==t.size)throw new h("Sizes don't match");const e=this.bits;for(let n=0,r=e.length;n<r;n++)e[n]^=t.bits[n]}toBytes(t,e,n,r){for(let i=0;i<r;i++){let r=0;for(let e=0;e<8;e++)this.get(t)&&(r|=1<<7-e),t++;e[n+i]=r}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),n=e+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,t[e-i]=n}if(this.size!==32*n){const e=32*n-this.size;let r=t[0]>>>e;for(let i=1;i<n;i++){const n=t[i];r|=n<<32-e,t[i-1]=r,r=n>>>e}t[n-1]=r}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof b))return!1;const e=t;return this.size===e.size&&v.equals(this.bits,e.bits)}hashCode(){return 31*this.size+v.hashCode(this.bits)}toString(){let t="";for(let e=0,n=this.size;e<n;e++)0===(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new b(this.size,this.bits.slice())}}(function(t){t[t["OTHER"]=0]="OTHER",t[t["PURE_BARCODE"]=1]="PURE_BARCODE",t[t["POSSIBLE_FORMATS"]=2]="POSSIBLE_FORMATS",t[t["TRY_HARDER"]=3]="TRY_HARDER",t[t["CHARACTER_SET"]=4]="CHARACTER_SET",t[t["ALLOWED_LENGTHS"]=5]="ALLOWED_LENGTHS",t[t["ASSUME_CODE_39_CHECK_DIGIT"]=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t["ASSUME_GS1"]=7]="ASSUME_GS1",t[t["RETURN_CODABAR_START_END"]=8]="RETURN_CODABAR_START_END",t[t["NEED_RESULT_POINT_CALLBACK"]=9]="NEED_RESULT_POINT_CALLBACK",t[t["ALLOWED_EAN_EXTENSIONS"]=10]="ALLOWED_EAN_EXTENSIONS"})(a||(a={}));var _,S=a;class E extends c{static getFormatInstance(){return new E}}E.kind="FormatException",function(t){t[t["Cp437"]=0]="Cp437",t[t["ISO8859_1"]=1]="ISO8859_1",t[t["ISO8859_2"]=2]="ISO8859_2",t[t["ISO8859_3"]=3]="ISO8859_3",t[t["ISO8859_4"]=4]="ISO8859_4",t[t["ISO8859_5"]=5]="ISO8859_5",t[t["ISO8859_6"]=6]="ISO8859_6",t[t["ISO8859_7"]=7]="ISO8859_7",t[t["ISO8859_8"]=8]="ISO8859_8",t[t["ISO8859_9"]=9]="ISO8859_9",t[t["ISO8859_10"]=10]="ISO8859_10",t[t["ISO8859_11"]=11]="ISO8859_11",t[t["ISO8859_13"]=12]="ISO8859_13",t[t["ISO8859_14"]=13]="ISO8859_14",t[t["ISO8859_15"]=14]="ISO8859_15",t[t["ISO8859_16"]=15]="ISO8859_16",t[t["SJIS"]=16]="SJIS",t[t["Cp1250"]=17]="Cp1250",t[t["Cp1251"]=18]="Cp1251",t[t["Cp1252"]=19]="Cp1252",t[t["Cp1256"]=20]="Cp1256",t[t["UnicodeBigUnmarked"]=21]="UnicodeBigUnmarked",t[t["UTF8"]=22]="UTF8",t[t["ASCII"]=23]="ASCII",t[t["Big5"]=24]="Big5",t[t["GB18030"]=25]="GB18030",t[t["EUC_KR"]=26]="EUC_KR"}(_||(_={}));class A{constructor(t,e,n,...r){this.valueIdentifier=t,this.name=n,this.values="number"===typeof e?Int32Array.from([e]):e,this.otherEncodingNames=r,A.VALUE_IDENTIFIER_TO_ECI.set(t,this),A.NAME_TO_ECI.set(n,this);const i=this.values;for(let o=0,s=i.length;o!==s;o++){const t=i[o];A.VALUES_TO_ECI.set(t,this)}for(const o of r)A.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new E("incorect value");const e=A.VALUES_TO_ECI.get(t);if(void 0===e)throw new E("incorect value");return e}static getCharacterSetECIByName(t){const e=A.NAME_TO_ECI.get(t);if(void 0===e)throw new E("incorect value");return e}equals(t){if(!(t instanceof A))return!1;const e=t;return this.getName()===e.getName()}}A.VALUE_IDENTIFIER_TO_ECI=new Map,A.VALUES_TO_ECI=new Map,A.NAME_TO_ECI=new Map,A.Cp437=new A(_.Cp437,Int32Array.from([0,2]),"Cp437"),A.ISO8859_1=new A(_.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),A.ISO8859_2=new A(_.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),A.ISO8859_3=new A(_.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),A.ISO8859_4=new A(_.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),A.ISO8859_5=new A(_.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),A.ISO8859_6=new A(_.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),A.ISO8859_7=new A(_.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),A.ISO8859_8=new A(_.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),A.ISO8859_9=new A(_.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),A.ISO8859_10=new A(_.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),A.ISO8859_11=new A(_.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),A.ISO8859_13=new A(_.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),A.ISO8859_14=new A(_.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),A.ISO8859_15=new A(_.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),A.ISO8859_16=new A(_.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),A.SJIS=new A(_.SJIS,20,"SJIS","Shift_JIS"),A.Cp1250=new A(_.Cp1250,21,"Cp1250","windows-1250"),A.Cp1251=new A(_.Cp1251,22,"Cp1251","windows-1251"),A.Cp1252=new A(_.Cp1252,23,"Cp1252","windows-1252"),A.Cp1256=new A(_.Cp1256,24,"Cp1256","windows-1256"),A.UnicodeBigUnmarked=new A(_.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),A.UTF8=new A(_.UTF8,26,"UTF8","UTF-8"),A.ASCII=new A(_.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),A.Big5=new A(_.Big5,28,"Big5"),A.GB18030=new A(_.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),A.EUC_KR=new A(_.EUC_KR,30,"EUC_KR","EUC-KR");class x extends c{}x.kind="UnsupportedOperationException";class C{static decode(t,e){const n=this.encodingName(e);return this.customDecoder?this.customDecoder(t,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(t,n):new TextDecoder(n).decode(t)}static shouldDecodeOnFallback(t){return!C.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){const n=this.encodingName(e);return this.customEncoder?this.customEncoder(t,n):"undefined"===typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(t){return"string"===typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof A?t:A.getCharacterSetECIByName(t)}static decodeFallback(t,e){const n=this.encodingCharacterSet(e);if(C.isDecodeFallbackSupported(n)){let e="";for(let n=0,r=t.length;n<r;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+="%"+r}return decodeURIComponent(e)}if(n.equals(A.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new x(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(A.UTF8)||t.equals(A.ISO8859_1)||t.equals(A.ASCII)}static encodeFallback(t){const e=btoa(unescape(encodeURIComponent(t))),n=e.split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class T{static castAsNonUtf8Char(t,e=null){const n=e?e.getName():this.ISO88591;return C.decode(new Uint8Array([t]),n)}static guessEncoding(t,e){if(null!==e&&void 0!==e&&void 0!==e.get(S.CHARACTER_SET))return e.get(S.CHARACTER_SET).toString();const n=t.length;let r=!0,i=!0,o=!0,s=0,a=0,l=0,c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0;const y=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let v=0;v<n&&(r||i||o);v++){const e=255&t[v];o&&(s>0?0===(128&e)?o=!1:s--:0!==(128&e)&&(0===(64&e)?o=!1:(s++,0===(32&e)?a++:(s++,0===(16&e)?l++:(s++,0===(8&e)?c++:o=!1))))),r&&(e>127&&e<160?r=!1:e>159&&(e<192||215===e||247===e)&&g++),i&&(u>0?e<64||127===e||e>252?i=!1:u--:128===e||160===e||e>239?i=!1:e>160&&e<224?(h++,f=0,d++,d>p&&(p=d)):e>127?(u++,d=0,f++,f>m&&(m=f)):(d=0,f=0))}return o&&s>0&&(o=!1),i&&u>0&&(i=!1),o&&(y||a+l+c>0)?T.UTF8:i&&(T.ASSUME_SHIFT_JIS||p>=3||m>=3)?T.SHIFT_JIS:r&&i?2===p&&2===h||10*g>=n?T.SHIFT_JIS:T.ISO88591:r?T.ISO88591:i?T.SHIFT_JIS:o?T.UTF8:T.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let n=-1;function r(t,r,i,o,s,a){if("%%"===t)return"%";if(void 0===e[++n])return;t=o?parseInt(o.substr(1)):void 0;let l,c=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=e[n];break;case"c":l=e[n][0];break;case"f":l=parseFloat(e[n]).toFixed(t);break;case"p":l=parseFloat(e[n]).toPrecision(t);break;case"e":l=parseFloat(e[n]).toExponential(t);break;case"x":l=parseInt(e[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(e[n],c||10).toPrecision(t)).toFixed(0);break}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";while(l.length<u)l=void 0!==r?l+h:h+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,r)}static getBytes(t,e){return C.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}T.SHIFT_JIS=A.SJIS.getName(),T.GB2312="GB2312",T.ISO88591=A.ISO8859_1.getName(),T.EUC_JP="EUC_JP",T.UTF8=A.UTF8.getName(),T.PLATFORM_DEFAULT_ENCODING=T.UTF8,T.ASSUME_SHIFT_JIS=!1;class M{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return"string"===typeof t?this.value+=t.toString():this.encoding?this.value+=T.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,e,n){for(let r=e;e<e+n;r++)this.append(t[r]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class I{constructor(t,e,n,r){if(this.width=t,this.height=e,this.rowSize=n,this.bits=r,void 0!==e&&null!==e||(e=t),this.height=e,t<1||e<1)throw new h("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((t+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const e=t.length,n=t[0].length,r=new I(n,e);for(let i=0;i<e;i++){const e=t[i];for(let t=0;t<n;t++)e[t]&&r.set(t,i)}return r}static parseFromString(t,e,n){if(null===t)throw new h("stringRepresentation cannot be null");const r=new Array(t.length);let i=0,o=0,s=-1,a=0,l=0;while(l<t.length)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new h("row lengths do not match");o=i,a++}l++}else if(t.substring(l,l+e.length)===e)l+=e.length,r[i]=!0,i++;else{if(t.substring(l,l+n.length)!==n)throw new h("illegal character encountered: "+t.substring(l));l+=n.length,r[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new h("row lengths do not match");a++}const c=new I(s,a);for(let u=0;u<i;u++)r[u]&&c.set(Math.floor(u%s),Math.floor(u/s));return c}get(t,e){const n=e*this.rowSize+Math.floor(t/32);return 0!==(this.bits[n]>>>(31&t)&1)}set(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]|=1<<(31&t)&4294967295}unset(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]&=~(1<<(31&t)&4294967295)}flip(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]^=1<<(31&t)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new h("input matrix dimensions do not match");const e=new b(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*n,s=t.getRow(i,e).getBitArray();for(let t=0;t<n;t++)r[o+t]^=s[t]}}clear(){const t=this.bits,e=t.length;for(let n=0;n<e;n++)t[n]=0}setRegion(t,e,n,r){if(e<0||t<0)throw new h("Left and top must be nonnegative");if(r<1||n<1)throw new h("Height and width must be at least 1");const i=t+n,o=e+r;if(o>this.height||i>this.width)throw new h("The region must fit inside the matrix");const s=this.rowSize,a=this.bits;for(let l=e;l<o;l++){const e=l*s;for(let n=t;n<i;n++)a[e+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(t,e){null===e||void 0===e||e.getSize()<this.width?e=new b(this.width):e.clear();const n=this.rowSize,r=this.bits,i=t*n;for(let o=0;o<n;o++)e.setBulk(32*o,r[i+o]);return e}setRow(t,e){m.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),e=this.getHeight();let n=new b(t),r=new b(t);for(let i=0,o=Math.floor((e+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(e-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(e-1-i,n)}getEnclosingRectangle(){const t=this.width,e=this.height,n=this.rowSize,r=this.bits;let i=t,o=e,s=-1,a=-1;for(let l=0;l<e;l++)for(let t=0;t<n;t++){const e=r[l*n+t];if(0!==e){if(l<o&&(o=l),l>a&&(a=l),32*t<i){let n=0;while(0===(e<<31-n&4294967295))n++;32*t+n<i&&(i=32*t+n)}if(32*t+31>s){let n=31;while(e>>>n===0)n--;32*t+n>s&&(s=32*t+n)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){const t=this.rowSize,e=this.bits;let n=0;while(n<e.length&&0===e[n])n++;if(n===e.length)return null;const r=n/t;let i=n%t*32;const o=e[n];let s=0;while(0===(o<<31-s&4294967295))s++;return i+=s,Int32Array.from([i,r])}getBottomRightOnBit(){const t=this.rowSize,e=this.bits;let n=e.length-1;while(n>=0&&0===e[n])n--;if(n<0)return null;const r=Math.floor(n/t);let i=32*Math.floor(n%t);const o=e[n];let s=31;while(o>>>s===0)s--;return i+=s,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof I))return!1;const e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&v.equals(this.bits,e.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+v.hashCode(this.bits),t}toString(t="X ",e="  ",n="\n"){return this.buildToString(t,e,n)}buildToString(t,e,n){let r=new M;for(let i=0,o=this.height;i<o;i++){for(let n=0,o=this.width;n<o;n++)r.append(this.get(n,i)?t:e);r.append(n)}return r.toString()}clone(){return new I(this.width,this.height,this.rowSize,this.bits.slice())}}class k extends c{static getNotFoundInstance(){return new k}}k.kind="NotFoundException";class O extends p{constructor(t){super(t),this.luminances=O.EMPTY,this.buckets=new Int32Array(O.LUMINANCE_BUCKETS)}getBlackRow(t,e){const n=this.getLuminanceSource(),r=n.getWidth();void 0===e||null===e||e.getSize()<r?e=new b(r):e.clear(),this.initArrays(r);const i=n.getRow(t,this.luminances),o=this.buckets;for(let a=0;a<r;a++)o[(255&i[a])>>O.LUMINANCE_SHIFT]++;const s=O.estimateBlackPoint(o);if(r<3)for(let a=0;a<r;a++)(255&i[a])<s&&e.set(a);else{let t=255&i[0],n=255&i[1];for(let o=1;o<r-1;o++){const r=255&i[o+1];(4*n-t-r)/2<s&&e.set(o),t=n,n=r}}return e}getBlackMatrix(){const t=this.getLuminanceSource(),e=t.getWidth(),n=t.getHeight(),r=new I(e,n);this.initArrays(e);const i=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),o=t.getRow(r,this.luminances),s=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<s;t++){const e=255&o[t];i[e>>O.LUMINANCE_SHIFT]++}}const o=O.estimateBlackPoint(i),s=t.getMatrix();for(let a=0;a<n;a++){const t=a*e;for(let n=0;n<e;n++){const e=255&s[t+n];e<o&&r.set(n,a)}}return r}createBinarizer(t){return new O(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const e=this.buckets;for(let n=0;n<O.LUMINANCE_BUCKETS;n++)e[n]=0}static estimateBlackPoint(t){const e=t.length;let n=0,r=0,i=0;for(let c=0;c<e;c++)t[c]>i&&(r=c,i=t[c]),t[c]>n&&(n=t[c]);let o=0,s=0;for(let c=0;c<e;c++){const e=c-r,n=t[c]*e*e;n>s&&(o=c,s=n)}if(r>o){const t=r;r=o,o=t}if(o-r<=e/16)throw new k;let a=o-1,l=-1;for(let c=o-1;c>r;c--){const e=c-r,i=e*e*(o-c)*(n-t[c]);i>l&&(a=c,l=i)}return a<<O.LUMINANCE_SHIFT}}O.LUMINANCE_BITS=5,O.LUMINANCE_SHIFT=8-O.LUMINANCE_BITS,O.LUMINANCE_BUCKETS=1<<O.LUMINANCE_BITS,O.EMPTY=Uint8ClampedArray.from([0]);class R extends O{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const t=this.getLuminanceSource(),e=t.getWidth(),n=t.getHeight();if(e>=R.MINIMUM_DIMENSION&&n>=R.MINIMUM_DIMENSION){const r=t.getMatrix();let i=e>>R.BLOCK_SIZE_POWER;0!==(e&R.BLOCK_SIZE_MASK)&&i++;let o=n>>R.BLOCK_SIZE_POWER;0!==(n&R.BLOCK_SIZE_MASK)&&o++;const s=R.calculateBlackPoints(r,i,o,e,n),a=new I(e,n);R.calculateThresholdForBlock(r,i,o,e,n,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new R(t)}static calculateThresholdForBlock(t,e,n,r,i,o,s){const a=i-R.BLOCK_SIZE,l=r-R.BLOCK_SIZE;for(let c=0;c<n;c++){let i=c<<R.BLOCK_SIZE_POWER;i>a&&(i=a);const u=R.cap(c,2,n-3);for(let n=0;n<e;n++){let a=n<<R.BLOCK_SIZE_POWER;a>l&&(a=l);const c=R.cap(n,2,e-3);let h=0;for(let t=-2;t<=2;t++){const e=o[u+t];h+=e[c-2]+e[c-1]+e[c]+e[c+1]+e[c+2]}const d=h/25;R.thresholdBlock(t,a,i,d,r,s)}}}static cap(t,e,n){return t<e?e:t>n?n:t}static thresholdBlock(t,e,n,r,i,o){for(let s=0,a=n*i+e;s<R.BLOCK_SIZE;s++,a+=i)for(let i=0;i<R.BLOCK_SIZE;i++)(255&t[a+i])<=r&&o.set(e+i,n+s)}static calculateBlackPoints(t,e,n,r,i){const o=i-R.BLOCK_SIZE,s=r-R.BLOCK_SIZE,a=new Array(n);for(let l=0;l<n;l++){a[l]=new Int32Array(e);let n=l<<R.BLOCK_SIZE_POWER;n>o&&(n=o);for(let i=0;i<e;i++){let e=i<<R.BLOCK_SIZE_POWER;e>s&&(e=s);let o=0,c=255,u=0;for(let i=0,s=n*r+e;i<R.BLOCK_SIZE;i++,s+=r){for(let e=0;e<R.BLOCK_SIZE;e++){const n=255&t[s+e];o+=n,n<c&&(c=n),n>u&&(u=n)}if(u-c>R.MIN_DYNAMIC_RANGE)for(i++,s+=r;i<R.BLOCK_SIZE;i++,s+=r)for(let e=0;e<R.BLOCK_SIZE;e++)o+=255&t[s+e]}let h=o>>2*R.BLOCK_SIZE_POWER;if(u-c<=R.MIN_DYNAMIC_RANGE&&(h=c/2,l>0&&i>0)){const t=(a[l-1][i]+2*a[l][i-1]+a[l-1][i-1])/4;c<t&&(h=t)}a[l][i]=h}}return a}}R.BLOCK_SIZE_POWER=3,R.BLOCK_SIZE=1<<R.BLOCK_SIZE_POWER,R.BLOCK_SIZE_MASK=R.BLOCK_SIZE-1,R.MINIMUM_DIMENSION=5*R.BLOCK_SIZE,R.MIN_DYNAMIC_RANGE=24;class D{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,n,r){throw new x("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new x("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new x("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let e=new M;for(let n=0;n<this.height;n++){const r=this.getRow(n,t);for(let t=0;t<this.width;t++){const n=255&r[t];let i;i=n<64?"#":n<128?"+":n<192?".":" ",e.append(i)}e.append("\n")}return e.toString()}}class N extends D{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){const n=this.delegate.getRow(t,e),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(e);for(let r=0;r<e;r++)n[r]=255-(255&t[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,n,r){return new N(this.delegate.crop(t,e,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new N(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new N(this.delegate.rotateCounterClockwise45())}}class P extends D{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=P.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return P.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,n){const r=new Uint8ClampedArray(e*n);for(let i=0,o=0,s=t.length;i<s;i+=4,o++){let e;const n=t[i+3];if(0===n)e=255;else{const n=t[i],r=t[i+1],o=t[i+2];e=306*n+601*r+117*o+512>>10}r[o]=e}return r}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const n=this.getWidth(),r=t*n;return null===e?e=this.buffer.slice(r,r+n):(e.length<n&&(e=new Uint8ClampedArray(n)),e.set(this.buffer.slice(r,r+n))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,n,r){return super.crop(t,e,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement(),n=e.getContext("2d"),r=t*P.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return e.width=s,e.height=a,n.translate(s/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=P.makeBufferFromCanvasImageData(e),this}invert(){return new N(this)}}P.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(t,e,n){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B,U=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r["throw"](t))}catch(e){o(e)}}function l(t){t.done?n(t.value):i(t.value).then(s,a)}l((r=r.apply(t,e||[])).next())}))};class F{constructor(t,e=500,n){this.reader=t,this.timeBetweenScansMillis=e,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return U(this,void 0,void 0,(function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const n of t){const t="video"===n.kind?"videoinput":n.kind;if("videoinput"!==t)continue;const r=n.deviceId||n.id,i=n.label||`Video device ${e.length+1}`,o=n.groupId,s={deviceId:r,label:i,kind:t,groupId:o};e.push(s)}return e}))}getVideoInputDevices(){return U(this,void 0,void 0,(function*(){const t=yield this.listVideoInputDevices();return t.map((t=>new L(t.deviceId,t.label)))}))}findDeviceById(t){return U(this,void 0,void 0,(function*(){const e=yield this.listVideoInputDevices();return e?e.find((e=>e.deviceId===t)):null}))}decodeFromInputVideoDevice(t,e){return U(this,void 0,void 0,(function*(){return yield this.decodeOnceFromVideoDevice(t,e)}))}decodeOnceFromVideoDevice(t,e){return U(this,void 0,void 0,(function*(){let n;this.reset(),n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,e)}))}decodeOnceFromConstraints(t,e){return U(this,void 0,void 0,(function*(){const n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(n,e)}))}decodeOnceFromStream(t,e){return U(this,void 0,void 0,(function*(){this.reset();const n=yield this.attachStreamToVideo(t,e),r=yield this.decodeOnce(n);return r}))}decodeFromInputVideoDeviceContinuously(t,e,n){return U(this,void 0,void 0,(function*(){return yield this.decodeFromVideoDevice(t,e,n)}))}decodeFromVideoDevice(t,e,n){return U(this,void 0,void 0,(function*(){let r;r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,e,n)}))}decodeFromConstraints(t,e,n){return U(this,void 0,void 0,(function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(r,e,n)}))}decodeFromStream(t,e,n){return U(this,void 0,void 0,(function*(){this.reset();const r=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(r,n)}))}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return U(this,void 0,void 0,(function*(){const n=this.prepareVideoElement(e);return this.addVideoSource(n,t),this.videoElement=n,this.stream=t,yield this.playVideoOnLoadAsync(n),n}))}playVideoOnLoadAsync(t){return new Promise(((e,n)=>this.playVideoOnLoad(t,(()=>e()))))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return U(this,void 0,void 0,(function*(){if(this.isVideoPlaying(t))console.warn("Trying to play video that is already playing.");else try{yield t.play()}catch(e){console.warn("It was not possible to play the video.")}}))}getMediaElement(t,e){const n=document.getElementById(t);if(!n)throw new u(`element with id '${t}' not found`);if(n.nodeName.toLowerCase()!==e.toLowerCase())throw new u(`element with id '${t}' must be an ${e} element`);return n}decodeFromImage(t,e){if(!t&&!e)throw new u("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new u("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,n){if(void 0===t&&void 0===e)throw new u("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,n):this.decodeFromVideoElementContinuously(t,n)}decodeFromImageElement(t){if(!t)throw new u("An image element must be provided.");this.reset();const e=this.prepareImageElement(t);let n;return this.imageElement=e,n=this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e),n}decodeFromVideoElement(t){const e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){const n=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(n,e)}_decodeFromVideoElementSetup(t){if(!t)throw new u("A video element must be provided.");this.reset();const e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new u("An URL must be provided.");this.reset();const e=this.prepareImageElement();this.imageElement=e;const n=this._decodeOnLoadImage(e);return e.src=t,n}decodeFromVideoUrl(t){if(!t)throw new u("An URL must be provided.");this.reset();const e=this.prepareVideoElement(),n=this.decodeFromVideoElement(e);return e.src=t,n}decodeFromVideoUrlContinuously(t,e){if(!t)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,e);return n.src=t,r}_decodeOnLoadImage(t){return new Promise(((e,n)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,n),t.addEventListener("load",this.imageLoadedListener)}))}_decodeOnLoadVideo(t){return U(this,void 0,void 0,(function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)}))}_decodeOnLoadVideoContinuously(t,e){return U(this,void 0,void 0,(function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)}))}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return"undefined"===typeof t&&(e=document.createElement("img"),e.width=200,e.height=200),"string"===typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"===typeof document||(e=document.createElement("video"),e.width=200,e.height=200),"string"===typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode)return o(new k("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{const e=this.decode(t);i(e)}catch(s){const t=e&&s instanceof k,a=s instanceof f||s instanceof E,l=a&&n;if(t||l)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise(((t,e)=>r(t,e)))}decodeContinuously(t,e){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(t);e(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){e(null,r);const t=r instanceof f||r instanceof E,i=r instanceof k;(t||i)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(t){const e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}_isHTMLVideoElement(t){const e=t;return 0!==e.videoWidth}drawFrameOnCanvas(t,e,n){e||(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}drawImageOnCanvas(t,e,n=this.captureCanvasContext){e||(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t);this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const e=this.getCaptureCanvas(t),n=new P(e),r=new R(n);return new d(r)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const e=this.getCaptureCanvas(t),n=e.getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const e=document.createElement("canvas");let n,r;return"undefined"!==typeof t&&(t instanceof HTMLVideoElement?(n=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(n=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),e.style.width=n+"px",e.style.height=r+"px",e.width=n,e.height=r,e}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach((t=>t.stop())),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(n){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class z{constructor(t,e,n=(null==e?0:8*e.length),r,i,o=m.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=t,this.rawBytes=e,this.numBits=void 0===n||null===n?null===e||void 0===e?0:8*e.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?m.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(null===this.resultMetadata?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){const n=new Array(e.length+t.length);m.arraycopy(e,0,n,0,e.length),m.arraycopy(t,0,n,e.length,t.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}(function(t){t[t["AZTEC"]=0]="AZTEC",t[t["CODABAR"]=1]="CODABAR",t[t["CODE_39"]=2]="CODE_39",t[t["CODE_93"]=3]="CODE_93",t[t["CODE_128"]=4]="CODE_128",t[t["DATA_MATRIX"]=5]="DATA_MATRIX",t[t["EAN_8"]=6]="EAN_8",t[t["EAN_13"]=7]="EAN_13",t[t["ITF"]=8]="ITF",t[t["MAXICODE"]=9]="MAXICODE",t[t["PDF_417"]=10]="PDF_417",t[t["QR_CODE"]=11]="QR_CODE",t[t["RSS_14"]=12]="RSS_14",t[t["RSS_EXPANDED"]=13]="RSS_EXPANDED",t[t["UPC_A"]=14]="UPC_A",t[t["UPC_E"]=15]="UPC_E",t[t["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(B||(B={}));var V,H=B;(function(t){t[t["OTHER"]=0]="OTHER",t[t["ORIENTATION"]=1]="ORIENTATION",t[t["BYTE_SEGMENTS"]=2]="BYTE_SEGMENTS",t[t["ERROR_CORRECTION_LEVEL"]=3]="ERROR_CORRECTION_LEVEL",t[t["ISSUE_NUMBER"]=4]="ISSUE_NUMBER",t[t["SUGGESTED_PRICE"]=5]="SUGGESTED_PRICE",t[t["POSSIBLE_COUNTRY"]=6]="POSSIBLE_COUNTRY",t[t["UPC_EAN_EXTENSION"]=7]="UPC_EAN_EXTENSION",t[t["PDF417_EXTRA_METADATA"]=8]="PDF417_EXTRA_METADATA",t[t["STRUCTURED_APPEND_SEQUENCE"]=9]="STRUCTURED_APPEND_SEQUENCE",t[t["STRUCTURED_APPEND_PARITY"]=10]="STRUCTURED_APPEND_PARITY"})(V||(V={}));var j,W,G,$,q,Y,X=V;class Z{constructor(t,e,n,r,i=-1,o=-1){this.rawBytes=t,this.text=e,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===t||null===t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class K{exp(t){return this.expTable[t]}log(t){if(0===t)throw new h;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class J{constructor(t,e){if(0===e.length)throw new h;this.field=t;const n=e.length;if(n>1&&0===e[0]){let t=1;while(t<n&&0===e[t])t++;t===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-t),m.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);const e=this.coefficients;let n;if(1===t){n=0;for(let t=0,r=e.length;t!==r;t++){const r=e[t];n=K.addOrSubtract(n,r)}return n}n=e[0];const r=e.length,i=this.field;for(let o=1;o<r;o++)n=K.addOrSubtract(i.multiply(t,n),e[o]);return n}addOrSubtract(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,n=t.coefficients;if(e.length>n.length){const t=e;e=n,n=t}let r=new Int32Array(n.length);const i=n.length-e.length;m.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=K.addOrSubtract(e[o-i],n[o]);return new J(this.field,r)}multiply(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const e=this.coefficients,n=e.length,r=t.coefficients,i=r.length,o=new Int32Array(n+i-1),s=this.field;for(let a=0;a<n;a++){const t=e[a];for(let e=0;e<i;e++)o[a+e]=K.addOrSubtract(o[a+e],s.multiply(t,r[e]))}return new J(s,o)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;const e=this.coefficients.length,n=this.field,r=new Int32Array(e),i=this.coefficients;for(let o=0;o<e;o++)r[o]=n.multiply(i[o],t);return new J(n,r)}multiplyByMonomial(t,e){if(t<0)throw new h;if(0===e)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+t),o=this.field;for(let s=0;s<r;s++)i[s]=o.multiply(n[s],e);return new J(o,i)}divide(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new h("Divide by 0");const e=this.field;let n=e.getZero(),r=this;const i=t.getCoefficient(t.getDegree()),o=e.inverse(i);while(r.getDegree()>=t.getDegree()&&!r.isZero()){const i=r.getDegree()-t.getDegree(),s=e.multiply(r.getCoefficient(r.getDegree()),o),a=t.multiplyByMonomial(i,s),l=e.buildMonomial(i,s);n=n.addOrSubtract(l),r=r.addOrSubtract(a)}return[n,r]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let n=this.getCoefficient(e);if(0!==n){if(n<0?(t+=" - ",n=-n):t.length>0&&(t+=" + "),0===e||1!==n){const e=this.field.log(n);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class Q extends c{}Q.kind="ArithmeticException";class tt extends K{constructor(t,e,n){super(),this.primitive=t,this.size=e,this.generatorBase=n;const r=new Int32Array(e);let i=1;for(let s=0;s<e;s++)r[s]=i,i*=2,i>=e&&(i^=t,i&=e-1);this.expTable=r;const o=new Int32Array(e);for(let s=0;s<e-1;s++)o[r[s]]=s;this.logTable=o,this.zero=new J(this,Int32Array.from([0])),this.one=new J(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new h;if(0===e)return this.zero;const n=new Int32Array(t+1);return n[0]=e,new J(this,n)}inverse(t){if(0===t)throw new Q;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+w.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}tt.AZTEC_DATA_12=new tt(4201,4096,1),tt.AZTEC_DATA_10=new tt(1033,1024,1),tt.AZTEC_DATA_6=new tt(67,64,1),tt.AZTEC_PARAM=new tt(19,16,1),tt.QR_CODE_FIELD_256=new tt(285,256,0),tt.DATA_MATRIX_FIELD_256=new tt(301,256,1),tt.AZTEC_DATA_8=tt.DATA_MATRIX_FIELD_256,tt.MAXICODE_FIELD_64=tt.AZTEC_DATA_6;class et extends c{}et.kind="ReedSolomonException";class nt extends c{}nt.kind="IllegalStateException";class rt{constructor(t){this.field=t}decode(t,e){const n=this.field,r=new J(n,t),i=new Int32Array(e);let o=!0;for(let d=0;d<e;d++){const t=r.evaluateAt(n.exp(d+n.getGeneratorBase()));i[i.length-1-d]=t,0!==t&&(o=!1)}if(o)return;const s=new J(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(e,1),s,e),l=a[0],c=a[1],u=this.findErrorLocations(l),h=this.findErrorMagnitudes(c,u);for(let d=0;d<u.length;d++){const e=t.length-1-n.log(u[d]);if(e<0)throw new et("Bad error location");t[e]=tt.addOrSubtract(t[e],h[d])}}runEuclideanAlgorithm(t,e,n){if(t.getDegree()<e.getDegree()){const n=t;t=e,e=n}const r=this.field;let i=t,o=e,s=r.getZero(),a=r.getOne();while(o.getDegree()>=(n/2|0)){let t=i,e=s;if(i=o,s=a,i.isZero())throw new et("r_{i-1} was zero");o=t;let n=r.getZero();const l=i.getCoefficient(i.getDegree()),c=r.inverse(l);while(o.getDegree()>=i.getDegree()&&!o.isZero()){const t=o.getDegree()-i.getDegree(),e=r.multiply(o.getCoefficient(o.getDegree()),c);n=n.addOrSubtract(r.buildMonomial(t,e)),o=o.addOrSubtract(i.multiplyByMonomial(t,e))}if(a=n.multiply(s).addOrSubtract(e),o.getDegree()>=i.getDegree())throw new nt("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new et("sigmaTilde(0) was zero");const c=r.inverse(l),u=a.multiplyScalar(c),h=o.multiplyScalar(c);return[u,h]}findErrorLocations(t){const e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);const n=new Int32Array(e);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<e;o++)0===t.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==e)throw new et("Error locator degree does not match number of roots");return n}findErrorMagnitudes(t,e){const n=e.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const s=i.inverse(e[o]);let a=1;for(let t=0;t<n;t++)if(o!==t){const n=i.multiply(e[t],s),r=0===(1&n)?1|n:-2&n;a=i.multiply(a,r)}r[o]=i.multiply(t.evaluateAt(s),i.inverse(a)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],s))}return r}}(function(t){t[t["UPPER"]=0]="UPPER",t[t["LOWER"]=1]="LOWER",t[t["MIXED"]=2]="MIXED",t[t["DIGIT"]=3]="DIGIT",t[t["PUNCT"]=4]="PUNCT",t[t["BINARY"]=5]="BINARY"})(j||(j={}));class it{decode(t){this.ddata=t;let e=t.getBits(),n=this.extractBits(e),r=this.correctBits(n),i=it.convertBoolArrayToByteArray(r),o=it.getEncodedData(r),s=new Z(i,o,null,null);return s.setNumBits(r.length),s}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,n=j.UPPER,r=j.UPPER,i="",o=0;while(o<e)if(r===j.BINARY){if(e-o<5)break;let s=it.readCode(t,o,5);if(o+=5,0===s){if(e-o<11)break;s=it.readCode(t,o,11)+31,o+=11}for(let n=0;n<s;n++){if(e-o<8){o=e;break}const n=it.readCode(t,o,8);i+=T.castAsNonUtf8Char(n),o+=8}r=n}else{let s=r===j.DIGIT?4:5;if(e-o<s)break;let a=it.readCode(t,o,s);o+=s;let l=it.getCharacter(r,a);l.startsWith("CTRL_")?(n=r,r=it.getTable(l.charAt(5)),"L"===l.charAt(6)&&(n=r)):(i+=l,r=n)}return i}static getTable(t){switch(t){case"L":return j.LOWER;case"P":return j.PUNCT;case"M":return j.MIXED;case"D":return j.DIGIT;case"B":return j.BINARY;case"U":default:return j.UPPER}}static getCharacter(t,e){switch(t){case j.UPPER:return it.UPPER_TABLE[e];case j.LOWER:return it.LOWER_TABLE[e];case j.MIXED:return it.MIXED_TABLE[e];case j.PUNCT:return it.PUNCT_TABLE[e];case j.DIGIT:return it.DIGIT_TABLE[e];default:throw new nt("Bad table")}}correctBits(t){let e,n;this.ddata.getNbLayers()<=2?(n=6,e=tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,e=tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,e=tt.AZTEC_DATA_10):(n=12,e=tt.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=t.length/n;if(i<r)throw new E;let o=t.length%n,s=new Int32Array(i);for(let d=0;d<i;d++,o+=n)s[d]=it.readCode(t,o,n);try{let t=new rt(e);t.decode(s,i-r)}catch(h){throw new E(h)}let a=(1<<n)-1,l=0;for(let d=0;d<r;d++){let t=s[d];if(0===t||t===a)throw new E;1!==t&&t!==a-1||l++}let c=new Array(r*n-l),u=0;for(let d=0;d<r;d++){let t=s[d];if(1===t||t===a-1)c.fill(t>1,u,u+n-1),u+=n-1;else for(let e=n-1;e>=0;--e)c[u++]=0!==(t&1<<e)}return c}extractBits(t){let e=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(e?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,e));if(e)for(let s=0;s<i.length;s++)i[s]=s;else{let t=r+1+2*w.truncDivision(w.truncDivision(r,2)-1,15),e=r/2,n=w.truncDivision(t,2);for(let r=0;r<e;r++){let t=r+w.truncDivision(r,15);i[e-r-1]=n-t-1,i[e+r]=n+t+1}}for(let s=0,a=0;s<n;s++){let l=4*(n-s)+(e?9:12),c=2*s,u=r-1-c;for(let e=0;e<l;e++){let n=2*e;for(let r=0;r<2;r++)o[a+n+r]=t.get(i[c+r],i[c+e]),o[a+2*l+n+r]=t.get(i[c+e],i[u-r]),o[a+4*l+n+r]=t.get(i[u-r],i[u-e]),o[a+6*l+n+r]=t.get(i[u-e],i[c+r])}a+=8*l}return o}static readCode(t,e,n){let r=0;for(let i=e;i<e+n;i++)r<<=1,t[i]&&(r|=1);return r}static readByte(t,e){let n=t.length-e;return n>=8?it.readCode(t,e,8):it.readCode(t,e,n)<<8-n}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let n=0;n<e.length;n++)e[n]=it.readByte(t,8*n);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}it.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],it.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],it.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],it.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],it.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ot{constructor(){}static round(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,n,r){const i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}static sum(t){let e=0;for(let n=0,r=t.length;n!==r;n++){const r=t[n];e+=r}return e}}class st{static floatToIntBits(t){return t}}st.MAX_VALUE=Number.MAX_SAFE_INTEGER;class at{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof at){const e=t;return this.x===e.x&&this.y===e.y}return!1}hashCode(){return 31*st.floatToIntBits(this.x)+st.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const e=this.distance(t[0],t[1]),n=this.distance(t[1],t[2]),r=this.distance(t[0],t[2]);let i,o,s;if(n>=e&&n>=r?(o=t[0],i=t[1],s=t[2]):r>=n&&r>=e?(o=t[1],i=t[0],s=t[2]):(o=t[2],i=t[0],s=t[1]),this.crossProductZ(i,o,s)<0){const t=i;i=s,s=t}t[0]=i,t[1]=o,t[2]=s}static distance(t,e){return ot.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,n){const r=e.x,i=e.y;return(n.x-r)*(t.y-i)-(n.y-i)*(t.x-r)}}class lt{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class ct extends lt{constructor(t,e,n,r,i){super(t,e),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ut{constructor(t,e,n,r){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==e&&null!==e||(e=ut.INIT_SIZE),void 0!==n&&null!==n||(n=t.getWidth()/2|0),void 0!==r&&null!==r||(r=t.getHeight()/2|0);const i=e/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new k}detect(){let t=this.leftInit,e=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,s=!1,a=!1,l=!1,c=!1,u=!1;const h=this.width,d=this.height;while(o){o=!1;let f=!0;while((f||!a)&&e<h)f=this.containsBlackPoint(n,r,e,!1),f?(e++,o=!0,a=!0):a||e++;if(e>=h){i=!0;break}let p=!0;while((p||!l)&&r<d)p=this.containsBlackPoint(t,e,r,!0),p?(r++,o=!0,l=!0):l||r++;if(r>=d){i=!0;break}let m=!0;while((m||!c)&&t>=0)m=this.containsBlackPoint(n,r,t,!1),m?(t--,o=!0,c=!0):c||t--;if(t<0){i=!0;break}let g=!0;while((g||!u)&&n>=0)g=this.containsBlackPoint(t,e,n,!0),g?(n--,o=!0,u=!0):u||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){const i=e-t;let o=null;for(let e=1;null===o&&e<i;e++)o=this.getBlackPointOnSegment(t,r-e,t+e,r);if(null==o)throw new k;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,n+e,t+e,n);if(null==s)throw new k;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,n+t,e-t,n);if(null==a)throw new k;let l=null;for(let t=1;null===l&&t<i;t++)l=this.getBlackPointOnSegment(e,r-t,e-t,r);if(null==l)throw new k;return this.centerEdges(l,o,a,s)}throw new k}getBlackPointOnSegment(t,e,n,r){const i=ot.round(ot.distance(t,e,n,r)),o=(n-t)/i,s=(r-e)/i,a=this.image;for(let l=0;l<i;l++){const n=ot.round(t+l*o),r=ot.round(e+l*s);if(a.get(n,r))return new at(n,r)}return null}centerEdges(t,e,n,r){const i=t.getX(),o=t.getY(),s=e.getX(),a=e.getY(),l=n.getX(),c=n.getY(),u=r.getX(),h=r.getY(),d=ut.CORR;return i<this.width/2?[new at(u-d,h+d),new at(s+d,a+d),new at(l-d,c-d),new at(i+d,o-d)]:[new at(u+d,h+d),new at(s+d,a-d),new at(l-d,c+d),new at(i-d,o-d)]}containsBlackPoint(t,e,n,r){const i=this.image;if(r){for(let o=t;o<=e;o++)if(i.get(o,n))return!0}else for(let o=t;o<=e;o++)if(i.get(n,o))return!0;return!1}}ut.INIT_SIZE=10,ut.CORR=1;class ht{static checkAndNudgePoints(t,e){const n=t.getWidth(),r=t.getHeight();let i=!0;for(let o=0;o<e.length&&i;o+=2){const t=Math.floor(e[o]),s=Math.floor(e[o+1]);if(t<-1||t>n||s<-1||s>r)throw new k;i=!1,-1===t?(e[o]=0,i=!0):t===n&&(e[o]=n-1,i=!0),-1===s?(e[o+1]=0,i=!0):s===r&&(e[o+1]=r-1,i=!0)}i=!0;for(let o=e.length-2;o>=0&&i;o-=2){const t=Math.floor(e[o]),s=Math.floor(e[o+1]);if(t<-1||t>n||s<-1||s>r)throw new k;i=!1,-1===t?(e[o]=0,i=!0):t===n&&(e[o]=n-1,i=!0),-1===s?(e[o+1]=0,i=!0):s===r&&(e[o+1]=r-1,i=!0)}}}class dt{constructor(t,e,n,r,i,o,s,a,l){this.a11=t,this.a21=e,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,m){const g=dt.quadrilateralToSquare(t,e,n,r,i,o,s,a),y=dt.squareToQuadrilateral(l,c,u,h,d,f,p,m);return y.times(g)}transformPoints(t){const e=t.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let h=0;h<e;h+=2){const e=t[h],d=t[h+1],f=i*e+a*d+u;t[h]=(n*e+o*d+l)/f,t[h+1]=(r*e+s*d+c)/f}}transformPointsWithValues(t,e){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33,h=t.length;for(let d=0;d<h;d++){const h=t[d],f=e[d],p=i*h+a*f+u;t[d]=(n*h+o*f+l)/p,e[d]=(r*h+s*f+c)/p}}static squareToQuadrilateral(t,e,n,r,i,o,s,a){const l=t-n+i-s,c=e-r+o-a;if(0===l&&0===c)return new dt(n-t,i-n,t,r-e,o-r,e,0,0,1);{const u=n-i,h=s-i,d=r-o,f=a-o,p=u*f-h*d,m=(l*f-h*c)/p,g=(u*c-l*d)/p;return new dt(n-t+m*n,s-t+g*s,t,r-e+m*r,a-e+g*a,e,m,g,1)}}static quadrilateralToSquare(t,e,n,r,i,o,s,a){return dt.squareToQuadrilateral(t,e,n,r,i,o,s,a).buildAdjoint()}buildAdjoint(){return new dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new dt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class ft extends ht{sampleGrid(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,y,v){const w=dt.quadrilateralToQuadrilateral(r,i,o,s,a,l,c,u,h,d,f,p,m,g,y,v);return this.sampleGridWithTransform(t,e,n,w)}sampleGridWithTransform(t,e,n,r){if(e<=0||n<=0)throw new k;const i=new I(e,n),o=new Float32Array(2*e);for(let a=0;a<n;a++){const e=o.length,n=a+.5;for(let t=0;t<e;t+=2)o[t]=t/2+.5,o[t+1]=n;r.transformPoints(o),ht.checkAndNudgePoints(t,o);try{for(let n=0;n<e;n+=2)t.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,a)}catch(s){throw new k}}return i}}class pt{static setGridSampler(t){pt.gridSampler=t}static getInstance(){return pt.gridSampler}}pt.gridSampler=new ft;class mt{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new at(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class gt{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),n=this.getBullsEyeCorners(e);if(t){let t=n[0];n[0]=n[2],n[2]=t}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new ct(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new k;let e=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(n,e);let r=0;for(let o=0;o<4;o++){let t=n[(this.shift+o)%4];this.compact?(r<<=7,r+=t>>1&127):(r<<=10,r+=(t>>2&992)+(t>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(t,e){let n=0;t.forEach(((t,r,i)=>{let o=(t>>e-2<<1)+(1&t);n=(n<<3)+o})),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(w.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new k}getCorrectedParameterData(t,e){let n,r;e?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let l=n-1;l>=0;--l)o[l]=15&t,t>>=4;try{let t=new rt(tt.AZTEC_PARAM);t.decode(o,i)}catch(a){throw new k}let s=0;for(let l=0;l<r;l++)s=(s<<4)+o[l];return s}getBullsEyeCorners(t){let e=t,n=t,r=t,i=t,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,o,1,-1),s=this.getFirstDifferent(n,o,1,1),a=this.getFirstDifferent(r,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(l,t)*this.nbCenterLayers/(this.distancePoint(i,e)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(t,s,a,l))break}e=t,n=s,r=a,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new k;this.compact=5===this.nbCenterLayers;let s=new at(e.getX()+.5,e.getY()-.5),a=new at(n.getX()+.5,n.getY()+.5),l=new at(r.getX()-.5,r.getY()+.5),c=new at(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,n,r;try{let i=new ut(this.image).detect();t=i[0],e=i[1],n=i[2],r=i[3]}catch(s){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new mt(i+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new mt(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new mt(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new mt(i-7,o-7),!1,-1,-1).toResultPoint()}let i=ot.round((t.getX()+r.getX()+e.getX()+n.getX())/4),o=ot.round((t.getY()+r.getY()+e.getY()+n.getY())/4);try{let s=new ut(this.image,15,i,o).detect();t=s[0],e=s[1],n=s[2],r=s[3]}catch(s){t=this.getFirstDifferent(new mt(i+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new mt(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new mt(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new mt(i-7,o-7),!1,-1,-1).toResultPoint()}return i=ot.round((t.getX()+r.getX()+e.getX()+n.getX())/4),o=ot.round((t.getY()+r.getY()+e.getY()+n.getY())/4),new mt(i,o)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,n,r,i){let o=pt.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return o.sampleGrid(t,s,s,a,a,l,a,l,l,a,l,e.getX(),e.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(t,e,n){let r=0,i=this.distanceResultPoint(t,e),o=i/n,s=t.getX(),a=t.getY(),l=o*(e.getX()-t.getX())/i,c=o*(e.getY()-t.getY())/i;for(let u=0;u<n;u++)this.image.get(ot.round(s+u*l),ot.round(a+u*c))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(t,e,n,r){let i=3;t=new mt(t.getX()-i,t.getY()+i),e=new mt(e.getX()-i,e.getY()-i),n=new mt(n.getX()+i,n.getY()-i),r=new mt(r.getX()+i,r.getY()+i);let o=this.getColor(r,t);if(0===o)return!1;let s=this.getColor(t,e);return s===o&&(s=this.getColor(e,n),s===o&&(s=this.getColor(n,r),s===o))}getColor(t,e){let n=this.distancePoint(t,e),r=(e.getX()-t.getX())/n,i=(e.getY()-t.getY())/n,o=0,s=t.getX(),a=t.getY(),l=this.image.get(t.getX(),t.getY()),c=Math.ceil(n);for(let h=0;h<c;h++)s+=r,a+=i,this.image.get(ot.round(s),ot.round(a))!==l&&o++;let u=o/n;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(t,e,n,r){let i=t.getX()+n,o=t.getY()+r;while(this.isValid(i,o)&&this.image.get(i,o)===e)i+=n,o+=r;i-=n,o-=r;while(this.isValid(i,o)&&this.image.get(i,o)===e)i+=n;i-=n;while(this.isValid(i,o)&&this.image.get(i,o)===e)o+=r;return o-=r,new mt(i,o)}expandSquare(t,e,n){let r=n/(2*e),i=t[0].getX()-t[2].getX(),o=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,l=new at(s+r*i,a+r*o),c=new at(s-r*i,a-r*o);i=t[1].getX()-t[3].getX(),o=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,a=(t[1].getY()+t[3].getY())/2;let u=new at(s+r*i,a+r*o),h=new at(s-r*i,a-r*o),d=[l,u,c,h];return d}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=ot.round(t.getX()),n=ot.round(t.getY());return this.isValid(e,n)}distancePoint(t,e){return ot.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return ot.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(w.truncDivision(this.nbLayers-4,8)+1)+15}}class yt{decode(t,e=null){let n=null,r=new gt(t.getBlackMatrix()),i=null,o=null;try{let t=r.detectMirror(!1);i=t.getPoints(),this.reportFoundResultPoints(e,i),o=(new it).decode(t)}catch(c){n=c}if(null==o)try{let t=r.detectMirror(!0);i=t.getPoints(),this.reportFoundResultPoints(e,i),o=(new it).decode(t)}catch(c){if(null!=n)throw n;throw c}let s=new z(o.getText(),o.getRawBytes(),o.getNumBits(),i,H.AZTEC,m.currentTimeMillis()),a=o.getByteSegments();null!=a&&s.putMetadata(X.BYTE_SEGMENTS,a);let l=o.getECLevel();return null!=l&&s.putMetadata(X.ERROR_CORRECTION_LEVEL,l),s}reportFoundResultPoints(t,e){if(null!=t){let n=t.get(S.NEED_RESULT_POINT_CALLBACK);null!=n&&e.forEach(((t,e,r)=>{n.foundPossibleResultPoint(t)}))}}reset(){}}class vt extends F{constructor(t=500){super(new yt,t)}}class wt{decode(t,e){try{return this.doDecode(t,e)}catch(n){const r=e&&!0===e.get(S.TRY_HARDER);if(r&&t.isRotateSupported()){const n=t.rotateCounterClockwise(),r=this.doDecode(n,e),i=r.getResultMetadata();let o=270;null!==i&&!0===i.get(X.ORIENTATION)&&(o+=i.get(X.ORIENTATION)%360),r.putMetadata(X.ORIENTATION,o);const s=r.getResultPoints();if(null!==s){const t=n.getHeight();for(let e=0;e<s.length;e++)s[e]=new at(t-s[e].getY()-1,s[e].getX())}return r}throw new k}}reset(){}doDecode(t,e){const n=t.getWidth(),r=t.getHeight();let i=new b(n);const o=e&&!0===e.get(S.TRY_HARDER),s=Math.max(1,r>>(o?8:5));let a;a=o?r:15;const l=Math.trunc(r/2);for(let h=0;h<a;h++){const o=Math.trunc((h+1)/2),a=0===(1&h),d=l+s*(a?o:-o);if(d<0||d>=r)break;try{i=t.getBlackRow(d,i)}catch(c){continue}for(let t=0;t<2;t++){if(1===t&&(i.reverse(),e&&!0===e.get(S.NEED_RESULT_POINT_CALLBACK))){const t=new Map;e.forEach(((e,n)=>t.set(n,e))),t.delete(S.NEED_RESULT_POINT_CALLBACK),e=t}try{const r=this.decodeRow(d,i,e);if(1===t){r.putMetadata(X.ORIENTATION,180);const t=r.getResultPoints();null!==t&&(t[0]=new at(n-t[0].getX()-1,t[0].getY()),t[1]=new at(n-t[1].getX()-1,t[1].getY()))}return r}catch(u){}}}throw new k}static recordPattern(t,e,n){const r=n.length;for(let l=0;l<r;l++)n[l]=0;const i=t.getSize();if(e>=i)throw new k;let o=!t.get(e),s=0,a=e;while(a<i){if(t.get(a)!==o)n[s]++;else{if(++s===r)break;n[s]=1,o=!o}a++}if(s!==r&&(s!==r-1||a!==i))throw new k}static recordPatternInReverse(t,e,n){let r=n.length,i=t.get(e);while(e>0&&r>=0)t.get(--e)!==i&&(r--,i=!i);if(r>=0)throw new k;wt.recordPattern(t,e+1,n)}static patternMatchVariance(t,e,n){const r=t.length;let i=0,o=0;for(let l=0;l<r;l++)i+=t[l],o+=e[l];if(i<o)return Number.POSITIVE_INFINITY;const s=i/o;n*=s;let a=0;for(let l=0;l<r;l++){const r=t[l],i=e[l]*s,o=r>i?r-i:i-r;if(o>n)return Number.POSITIVE_INFINITY;a+=o}return a/i}}class bt extends wt{static findStartPattern(t){const e=t.getSize(),n=t.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,s=!1;const a=6;for(let l=n;l<e;l++)if(t.get(l)!==s)i[r]++;else{if(r===a-1){let e=bt.MAX_AVG_VARIANCE,n=-1;for(let t=bt.CODE_START_A;t<=bt.CODE_START_C;t++){const r=wt.patternMatchVariance(i,bt.CODE_PATTERNS[t],bt.MAX_INDIVIDUAL_VARIANCE);r<e&&(e=r,n=t)}if(n>=0&&t.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,n]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,s=!s}throw new k}static decodeCode(t,e,n){wt.recordPattern(t,n,e);let r=bt.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<bt.CODE_PATTERNS.length;o++){const t=bt.CODE_PATTERNS[o],n=this.patternMatchVariance(e,t,bt.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=o)}if(i>=0)return i;throw new k}decodeRow(t,e,n){const r=n&&!0===n.get(S.ASSUME_GS1),i=bt.findStartPattern(e),o=i[2];let s=0;const a=new Uint8Array(20);let l;switch(a[s++]=o,o){case bt.CODE_START_A:l=bt.CODE_CODE_A;break;case bt.CODE_START_B:l=bt.CODE_CODE_B;break;case bt.CODE_START_C:l=bt.CODE_CODE_C;break;default:throw new E}let c=!1,u=!1,h="",d=i[0],p=i[1];const m=Int32Array.from([0,0,0,0,0,0]);let g=0,y=0,v=o,w=0,b=!0,_=!1,A=!1;while(!c){const t=u;switch(u=!1,g=y,y=bt.decodeCode(e,m,p),a[s++]=y,y!==bt.CODE_STOP&&(b=!0),y!==bt.CODE_STOP&&(w++,v+=w*y),d=p,p+=m.reduce(((t,e)=>t+e),0),y){case bt.CODE_START_A:case bt.CODE_START_B:case bt.CODE_START_C:throw new E}switch(l){case bt.CODE_CODE_A:if(y<64)h+=A===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),A=!1;else if(y<96)h+=A===_?String.fromCharCode(y-64):String.fromCharCode(y+64),A=!1;else switch(y!==bt.CODE_STOP&&(b=!1),y){case bt.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case bt.CODE_FNC_2:case bt.CODE_FNC_3:break;case bt.CODE_FNC_4_A:!_&&A?(_=!0,A=!1):_&&A?(_=!1,A=!1):A=!0;break;case bt.CODE_SHIFT:u=!0,l=bt.CODE_CODE_B;break;case bt.CODE_CODE_B:l=bt.CODE_CODE_B;break;case bt.CODE_CODE_C:l=bt.CODE_CODE_C;break;case bt.CODE_STOP:c=!0;break}break;case bt.CODE_CODE_B:if(y<96)h+=A===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),A=!1;else switch(y!==bt.CODE_STOP&&(b=!1),y){case bt.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case bt.CODE_FNC_2:case bt.CODE_FNC_3:break;case bt.CODE_FNC_4_B:!_&&A?(_=!0,A=!1):_&&A?(_=!1,A=!1):A=!0;break;case bt.CODE_SHIFT:u=!0,l=bt.CODE_CODE_A;break;case bt.CODE_CODE_A:l=bt.CODE_CODE_A;break;case bt.CODE_CODE_C:l=bt.CODE_CODE_C;break;case bt.CODE_STOP:c=!0;break}break;case bt.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==bt.CODE_STOP&&(b=!1),y){case bt.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case bt.CODE_CODE_A:l=bt.CODE_CODE_A;break;case bt.CODE_CODE_B:l=bt.CODE_CODE_B;break;case bt.CODE_STOP:c=!0;break}break}t&&(l=l===bt.CODE_CODE_A?bt.CODE_CODE_B:bt.CODE_CODE_A)}const x=p-d;if(p=e.getNextUnset(p),!e.isRange(p,Math.min(e.getSize(),p+(p-d)/2),!1))throw new k;if(v-=w*g,v%103!==g)throw new f;const C=h.length;if(0===C)throw new k;C>0&&b&&(h=l===bt.CODE_CODE_C?h.substring(0,C-2):h.substring(0,C-1));const T=(i[1]+i[0])/2,M=d+x/2,I=a.length,O=new Uint8Array(I);for(let f=0;f<I;f++)O[f]=a[f];const R=[new at(T,t),new at(M,t)];return new z(h,O,0,R,H.CODE_128,(new Date).getTime())}}bt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],bt.MAX_AVG_VARIANCE=.25,bt.MAX_INDIVIDUAL_VARIANCE=.7,bt.CODE_SHIFT=98,bt.CODE_CODE_C=99,bt.CODE_CODE_B=100,bt.CODE_CODE_A=101,bt.CODE_FNC_1=102,bt.CODE_FNC_2=97,bt.CODE_FNC_3=96,bt.CODE_FNC_4_A=101,bt.CODE_FNC_4_B=100,bt.CODE_START_A=103,bt.CODE_START_B=104,bt.CODE_START_C=105,bt.CODE_STOP=106;class _t extends wt{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,o,s=_t.findAsteriskPattern(e,r),a=e.getNextSet(s[1]),l=e.getSize();do{_t.recordPattern(e,a,r);let t=_t.toNarrowWidePattern(r);if(t<0)throw new k;i=_t.patternToChar(t),this.decodeRowResult+=i,o=a;for(let e of r)a+=e;a=e.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c=0;for(let f of r)c+=f;let u,h=a-o-c;if(a!==l&&2*h<c)throw new k;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let n=0;n<t;n++)e+=_t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(t)!==_t.ALPHABET_STRING.charAt(e%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new k;u=this.extendedMode?_t.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(s[1]+s[0])/2,p=o+c/2;return new z(u,null,0,[new at(d,t),new at(p,t)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,e){let n=t.getSize(),r=t.getNextSet(0),i=0,o=r,s=!1,a=e.length;for(let l=r;l<n;l++)if(t.get(l)!==s)e[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(e)===_t.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=e[0]+e[1],e.copyWithin(0,2,2+i-1),e[i-1]=0,e[i]=0,i--}else i++;e[i]=1,s=!s}throw new k}static toNarrowWidePattern(t){let e,n=t.length,r=0;do{let i=2147483647;for(let e of t)e<i&&e>r&&(i=e);r=i,e=0;let o=0,s=0;for(let a=0;a<n;a++){let i=t[a];i>r&&(s|=1<<n-1-a,e++,o+=i)}if(3===e){for(let i=0;i<n&&e>0;i++){let n=t[i];if(n>r&&(e--,2*n>=o))return-1}return s}}while(e>3);return-1}static patternToChar(t){for(let e=0;e<_t.CHARACTER_ENCODINGS.length;e++)if(_t.CHARACTER_ENCODINGS[e]===t)return _t.ALPHABET_STRING.charAt(e);if(t===_t.ASTERISK_ENCODING)return"*";throw new k}static decodeExtended(t){let e=t.length,n="";for(let r=0;r<e;r++){let e=t.charAt(r);if("+"===e||"$"===e||"%"===e||"/"===e){let i=t.charAt(r+1),o="\0";switch(e){case"+":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new E;o=""}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new E;o=":"}break}n+=o,r++}else n+=e}return n}}_t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_t.ASTERISK_ENCODING=148;class St extends wt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,n){let r=this.decodeStart(e),i=this.decodeEnd(e),o=new M;St.decodeMiddle(e,r[1],i[0],o);let s=o.toString(),a=null;null!=n&&(a=n.get(S.ALLOWED_LENGTHS)),null==a&&(a=St.DEFAULT_ALLOWED_LENGTHS);let l=s.length,c=!1,u=0;for(let f of a){if(l===f){c=!0;break}f>u&&(u=f)}if(!c&&l>u&&(c=!0),!c)throw new E;const h=[new at(r[1],t),new at(i[0],t)];let d=new z(s,null,0,h,H.ITF,(new Date).getTime());return d}static decodeMiddle(t,e,n,r){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);i.fill(0),o.fill(0),s.fill(0);while(e<n){wt.recordPattern(t,e,i);for(let t=0;t<5;t++){let e=2*t;o[t]=i[e],s[t]=i[e+1]}let n=St.decodeDigit(o);r.append(n.toString()),n=this.decodeDigit(s),r.append(n.toString()),i.forEach((function(t){e+=t}))}}decodeStart(t){let e=St.skipWhiteSpace(t),n=St.findGuardPattern(t,e,St.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n}validateQuietZone(t,e){let n=10*this.narrowLineWidth;n=n<e?n:e;for(let r=e-1;n>0&&r>=0;r--){if(t.get(r))break;n--}if(0!==n)throw new k}static skipWhiteSpace(t){const e=t.getSize(),n=t.getNextSet(0);if(n===e)throw new k;return n}decodeEnd(t){t.reverse();try{let n,r=St.skipWhiteSpace(t);try{n=St.findGuardPattern(t,r,St.END_PATTERN_REVERSED[0])}catch(e){e instanceof k&&(n=St.findGuardPattern(t,r,St.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,n[0]);let i=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-i,n}finally{t.reverse()}}static findGuardPattern(t,e,n){let r=n.length,i=new Int32Array(r),o=t.getSize(),s=!1,a=0,l=e;i.fill(0);for(let c=e;c<o;c++)if(t.get(c)!==s)i[a]++;else{if(a===r-1){if(wt.patternMatchVariance(i,n,St.MAX_INDIVIDUAL_VARIANCE)<St.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],m.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new k}static decodeDigit(t){let e=St.MAX_AVG_VARIANCE,n=-1,r=St.PATTERNS.length;for(let i=0;i<r;i++){let r=St.PATTERNS[i],o=wt.patternMatchVariance(t,r,St.MAX_INDIVIDUAL_VARIANCE);o<e?(e=o,n=i):o===e&&(n=-1)}if(n>=0)return n%10;throw new k}}St.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],St.MAX_AVG_VARIANCE=.38,St.MAX_INDIVIDUAL_VARIANCE=.5,St.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],St.START_PATTERN=Int32Array.from([1,1,1,1]),St.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Et extends wt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,n=!1,r=0,i=Int32Array.from([0,0,0]);while(!n){i=Int32Array.from([0,0,0]),e=Et.findGuardPattern(t,r,!1,this.START_END_PATTERN,i);let o=e[0];r=e[1];let s=o-(r-o);s>=0&&(n=t.isRange(s,o,!1))}return e}static checkChecksum(t){return Et.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let n=parseInt(t.charAt(e-1),10);return Et.getStandardUPCEANChecksum(t.substring(0,e-1))===n}static getStandardUPCEANChecksum(t){let e=t.length,n=0;for(let r=e-1;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;n+=e}n*=3;for(let r=e-2;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;n+=e}return(1e3-n)%10}static decodeEnd(t,e){return Et.findGuardPattern(t,e,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,n,r){return this.findGuardPattern(t,e,n,r,new Int32Array(r.length))}static findGuardPattern(t,e,n,r,i){let o=t.getSize();e=n?t.getNextUnset(e):t.getNextSet(e);let s=0,a=e,l=r.length,c=n;for(let u=e;u<o;u++)if(t.get(u)!==c)i[s]++;else{if(s===l-1){if(wt.patternMatchVariance(i,r,Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=i[0]+i[1];let t=i.slice(2,i.length-1);for(let e=0;e<s-1;e++)i[e]=t[e];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new k}static decodeDigit(t,e,n,r){this.recordPattern(t,n,e);let i=this.MAX_AVG_VARIANCE,o=-1,s=r.length;for(let a=0;a<s;a++){let t=r[a],n=wt.patternMatchVariance(e,t,Et.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,o=a)}if(o>=0)return o;throw new k}}Et.MAX_AVG_VARIANCE=.48,Et.MAX_INDIVIDUAL_VARIANCE=.7,Et.START_END_PATTERN=Int32Array.from([1,1,1]),Et.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Et.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Et.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class At{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(e,n,r),o=r.toString(),s=At.parseExtensionString(o),a=[new at((n[0]+n[1])/2,t),new at(i,t)],l=new z(o,null,0,a,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1],s=0;for(let l=0;l<5&&o<i;l++){let e=Et.decodeDigit(t,r,o,Et.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<4-l),4!==l&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(5!==n.length)throw new k;let a=this.determineCheckDigit(s);if(At.extensionChecksum(n.toString())!==a)throw new k;return o}static extensionChecksum(t){let e=t.length,n=0;for(let r=e-2;r>=0;r-=2)n+=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=e-1;r>=0;r-=2)n+=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new k}static parseExtensionString(t){if(5!==t.length)return null;let e=At.parseExtension5String(t);return null==e?null:new Map([[X.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}let n=parseInt(t.substring(1)),r=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return e+r+"."+o}}class xt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(e,n,r),o=r.toString(),s=xt.parseExtensionString(o),a=[new at((n[0]+n[1])/2,t),new at(i,t)],l=new z(o,null,0,a,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1],s=0;for(let a=0;a<2&&o<i;a++){let e=Et.decodeDigit(t,r,o,Et.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<1-a),1!==a&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(2!==n.length)throw new k;if(parseInt(n.toString())%4!==s)throw new k;return o}static parseExtensionString(t){return 2!==t.length?null:new Map([[X.ISSUE_NUMBER,parseInt(t)]])}}class Ct{static decodeRow(t,e,n){let r=Et.findGuardPattern(e,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{let n=new At;return n.decodeRow(t,e,r)}catch(i){let n=new xt;return n.decodeRow(t,e,r)}}}Ct.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends Et{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map((t=>Int32Array.from(t)));for(let t=10;t<20;t++){let e=Tt.L_PATTERNS[t-10],n=new Int32Array(e.length);for(let t=0;t<e.length;t++)n[t]=e[e.length-t-1];Tt.L_AND_G_PATTERNS[t]=n}}decodeRow(t,e,n){let r=Tt.findStartGuardPattern(e),i=null==n?null:n.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=i){const e=new at((r[0]+r[1])/2,t);i.foundPossibleResultPoint(e)}let o=this.decodeMiddle(e,r,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(null!=i){const e=new at(s,t);i.foundPossibleResultPoint(e)}let l=this.decodeEnd(e,s);if(null!=i){const e=new at((l[0]+l[1])/2,t);i.foundPossibleResultPoint(e)}let c=l[1],u=c+(c-l[0]);if(u>=e.getSize()||!e.isRange(c,u,!1))throw new k;let h=a.toString();if(h.length<8)throw new E;if(!Tt.checkChecksum(h))throw new f;let d=(r[1]+r[0])/2,p=(l[1]+l[0])/2,m=this.getBarcodeFormat(),g=[new at(d,t),new at(p,t)],y=new z(h,null,0,g,m,(new Date).getTime()),v=0;try{let n=Ct.decodeRow(t,e,l[1]);y.putMetadata(X.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),v=n.getText().length}catch(b){}let w=null==n?null:n.get(S.ALLOWED_EAN_EXTENSIONS);if(null!=w){let t=!1;for(let e in w)if(v.toString()===e){t=!0;break}if(!t)throw new k}return y}decodeEnd(t,e){return Tt.findGuardPattern(t,e,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Tt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let n=parseInt(t.charAt(e-1),10);return Tt.getStandardUPCEANChecksum(t.substring(0,e-1))===n}static getStandardUPCEANChecksum(t){let e=t.length,n=0;for(let r=e-1;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;n+=e}n*=3;for(let r=e-2;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new E;n+=e}return(1e3-n)%10}}class Mt extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1],s=0;for(let l=0;l<6&&o<i;l++){let e=Tt.decodeDigit(t,r,o,Tt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<5-l)}n=Mt.determineFirstDigit(n,s);let a=Tt.findGuardPattern(t,o,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0));o=a[1];for(let l=0;l<6&&o<i;l++){let e=Tt.decodeDigit(t,r,o,Tt.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)o+=t}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(t,e){for(let n=0;n<10;n++)if(e===this.FIRST_DIGIT_ENCODINGS[n])return t=String.fromCharCode("0".charCodeAt(0)+n)+t,t;throw new k}}Mt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class It extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1];for(let a=0;a<4&&o<i;a++){let e=Tt.decodeDigit(t,r,o,Tt.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)o+=t}let s=Tt.findGuardPattern(t,o,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0));o=s[1];for(let a=0;a<4&&o<i;a++){let e=Tt.decodeDigit(t,r,o,Tt.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)o+=t}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return H.EAN_8}}class kt extends Tt{constructor(){super(...arguments),this.ean13Reader=new Mt}getBarcodeFormat(){return H.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,n))}decodeMiddle(t,e,n){return this.ean13Reader.decodeMiddle(t,e,n)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let n=new z(e.substring(1),null,null,t.getResultPoints(),H.UPC_A);return null!=t.getResultMetadata()&&n.putAllMetadata(t.getResultMetadata()),n}throw new k}reset(){this.ean13Reader.reset()}}class Ot extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,n){const r=this.decodeMiddleCounters.map((t=>t));r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=t.getSize();let o=e[1],s=0;for(let l=0;l<6&&o<i;l++){const e=Ot.decodeDigit(t,r,o,Ot.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<5-l)}let a=Ot.determineNumSysAndCheckDigit(n,s);return{rowOffset:o,resultString:a}}decodeEnd(t,e){return Ot.findGuardPatternWithoutCounters(t,e,!0,Ot.MIDDLE_END_PATTERN)}checkChecksum(t){return Tt.checkChecksum(Ot.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let e=String.fromCharCode("0".charCodeAt(0)+n),i=String.fromCharCode("0".charCodeAt(0)+r);return e+t+i}throw k.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(t){const e=t.slice(1,7).split("").map((t=>t.charCodeAt(0))),n=new M;n.append(t.charAt(0));let r=e[5];switch(r){case 0:case 1:case 2:n.appendChars(e,0,2),n.append(r),n.append("0000"),n.appendChars(e,2,3);break;case 3:n.appendChars(e,0,3),n.append("00000"),n.appendChars(e,3,2);break;case 4:n.appendChars(e,0,4),n.append("00000"),n.append(e[4]);break;default:n.appendChars(e,0,5),n.append("0000"),n.append(r);break}return t.length>=8&&n.append(t.charAt(7)),n.toString()}}Ot.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ot.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Rt extends wt{constructor(t){super();let n=null==t?null:t.get(S.POSSIBLE_FORMATS),r=[];e(n)?(r.push(new Mt),r.push(new kt),r.push(new It),r.push(new Ot)):(n.indexOf(H.EAN_13)>-1&&r.push(new Mt),n.indexOf(H.UPC_A)>-1&&r.push(new kt),n.indexOf(H.EAN_8)>-1&&r.push(new It),n.indexOf(H.UPC_E)>-1&&r.push(new Ot)),this.readers=r}decodeRow(t,e,n){for(let i of this.readers)try{const r=i.decodeRow(t,e,n),o=r.getBarcodeFormat()===H.EAN_13&&"0"===r.getText().charAt(0),s=null==n?null:n.get(S.POSSIBLE_FORMATS),a=null==s||s.includes(H.UPC_A);if(o&&a){const t=r.getRawBytes(),e=new z(r.getText().substring(1),t,t?t.length:null,r.getResultPoints(),H.UPC_A);return e.putAllMetadata(r.getResultMetadata()),e}return r}catch(r){}throw new k}reset(){for(let t of this.readers)t.reset()}}class Dt extends wt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let n=0;n<e.length;n++)if(wt.patternMatchVariance(t,e[n],Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return n;throw new k}static count(t){return ot.sum(new Int32Array(t))}static increment(t,e){let n=0,r=e[0];for(let i=1;i<t.length;i++)e[i]>r&&(r=e[i],n=i);t[n]++}static decrement(t,e){let n=0,r=e[0];for(let i=1;i<t.length;i++)e[i]<r&&(r=e[i],n=i);t[n]--}static isFinderPattern(t){let e=t[0]+t[1],n=e+t[2]+t[3],r=e/n;if(r>=Dt.MIN_FINDER_PATTERN_RATIO&&r<=Dt.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of t)r>n&&(n=r),r<e&&(e=r);return n<10*e}return!1}}Dt.MAX_AVG_VARIANCE=.2,Dt.MAX_INDIVIDUAL_VARIANCE=.45,Dt.MIN_FINDER_PATTERN_RATIO=9.5/12,Dt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Nt{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Nt))return!1;const e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pt{constructor(t,e,n,r,i){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new at(n,i)),this.resultPoints.push(new at(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Pt))return!1;const e=t;return this.value===e.value}hashCode(){return this.value}}class Lt{constructor(){}static getRSSvalue(t,e,n){let r=0;for(let a of t)r+=a;let i=0,o=0,s=t.length;for(let a=0;a<s-1;a++){let l;for(l=1,o|=1<<a;l<t[a];l++,o&=~(1<<a)){let t=Lt.combins(r-l-1,s-a-2);if(n&&0===o&&r-l-(s-a-1)>=s-a-1&&(t-=Lt.combins(r-l-(s-a),s-a-2)),s-a-1>1){let n=0;for(let t=r-l-(s-a-2);t>e;t--)n+=Lt.combins(r-l-t-1,s-a-3);t-=n*(s-1-a)}else r-l>e&&t--;i+=t}r-=l}return i}static combins(t,e){let n,r;t-e>e?(r=e,n=t-e):(r=t-e,n=e);let i=1,o=1;for(let s=t;s>n;s--)i*=s,o<=r&&(i/=o,o++);while(o<=r)i/=o,o++;return i}}class Bt{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let n=12*e,r=new b(n),i=0,o=t[0],s=o.getRightChar().getValue();for(let a=11;a>=0;--a)0!=(s&1<<a)&&r.set(i),i++;for(let a=1;a<t.length;++a){let e=t[a],n=e.getLeftChar().getValue();for(let t=11;t>=0;--t)0!=(n&1<<t)&&r.set(i),i++;if(null!=e.getRightChar()){let t=e.getRightChar().getValue();for(let e=11;e>=0;--e)0!=(t&1<<e)&&r.set(i),i++}}return r}}class Ut{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ft{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class zt extends Ft{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===zt.FNC1}}zt.FNC1="$";class Vt extends Ft{constructor(t,e,n){super(t),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ht extends Ft{constructor(t,e,n){if(super(t),e<0||e>10||n<0||n>10)throw new E;this.firstDigit=e,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ht.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ht.FNC1}isAnyFNC1(){return this.firstDigit===Ht.FNC1||this.secondDigit===Ht.FNC1}}Ht.FNC1=10;class jt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new k;let e=t.substring(0,2);for(let i of jt.TWO_DIGIT_DATA_LENGTH)if(i[0]===e)return i[1]===jt.VARIABLE_LENGTH?jt.processVariableAI(2,i[2],t):jt.processFixedAI(2,i[1],t);if(t.length<3)throw new k;let n=t.substring(0,3);for(let i of jt.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===jt.VARIABLE_LENGTH?jt.processVariableAI(3,i[2],t):jt.processFixedAI(3,i[1],t);for(let i of jt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===jt.VARIABLE_LENGTH?jt.processVariableAI(4,i[2],t):jt.processFixedAI(4,i[1],t);if(t.length<4)throw new k;let r=t.substring(0,4);for(let i of jt.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===jt.VARIABLE_LENGTH?jt.processVariableAI(4,i[2],t):jt.processFixedAI(4,i[1],t);throw new k}static processFixedAI(t,e,n){if(n.length<t)throw new k;let r=n.substring(0,t);if(n.length<t+e)throw new k;let i=n.substring(t,t+e),o=n.substring(t+e),s="("+r+")"+i,a=jt.parseFieldsInGeneralPurpose(o);return null==a?s:s+a}static processVariableAI(t,e,n){let r,i=n.substring(0,t);r=n.length<t+e?n.length:t+e;let o=n.substring(t,r),s=n.substring(r),a="("+i+")"+o,l=jt.parseFieldsInGeneralPurpose(s);return null==l?a:a+l}}jt.VARIABLE_LENGTH=[],jt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",jt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",jt.VARIABLE_LENGTH,20],["22",jt.VARIABLE_LENGTH,29],["30",jt.VARIABLE_LENGTH,8],["37",jt.VARIABLE_LENGTH,8],["90",jt.VARIABLE_LENGTH,30],["91",jt.VARIABLE_LENGTH,30],["92",jt.VARIABLE_LENGTH,30],["93",jt.VARIABLE_LENGTH,30],["94",jt.VARIABLE_LENGTH,30],["95",jt.VARIABLE_LENGTH,30],["96",jt.VARIABLE_LENGTH,30],["97",jt.VARIABLE_LENGTH,3],["98",jt.VARIABLE_LENGTH,30],["99",jt.VARIABLE_LENGTH,30]],jt.THREE_DIGIT_DATA_LENGTH=[["240",jt.VARIABLE_LENGTH,30],["241",jt.VARIABLE_LENGTH,30],["242",jt.VARIABLE_LENGTH,6],["250",jt.VARIABLE_LENGTH,30],["251",jt.VARIABLE_LENGTH,30],["253",jt.VARIABLE_LENGTH,17],["254",jt.VARIABLE_LENGTH,20],["400",jt.VARIABLE_LENGTH,30],["401",jt.VARIABLE_LENGTH,30],["402",17],["403",jt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",jt.VARIABLE_LENGTH,20],["421",jt.VARIABLE_LENGTH,15],["422",3],["423",jt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],jt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",jt.VARIABLE_LENGTH,15],["391",jt.VARIABLE_LENGTH,18],["392",jt.VARIABLE_LENGTH,15],["393",jt.VARIABLE_LENGTH,18],["703",jt.VARIABLE_LENGTH,30]],jt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",jt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",jt.VARIABLE_LENGTH,20],["8003",jt.VARIABLE_LENGTH,30],["8004",jt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",jt.VARIABLE_LENGTH,30],["8008",jt.VARIABLE_LENGTH,12],["8018",18],["8020",jt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",jt.VARIABLE_LENGTH,70],["8200",jt.VARIABLE_LENGTH,70]];class Wt{constructor(t){this.buffer=new M,this.information=t}decodeAllCodes(t,e){let n=e,r=null;do{let e=this.decodeGeneralPurposeField(n,r),i=jt.parseFieldsInGeneralPurpose(e.getNewString());if(null!=i&&t.append(i),r=e.isRemaining()?""+e.getRemainingValue():null,n===e.getNewPosition())break;n=e.getNewPosition()}while(1);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return new Ht(this.information.getSize(),0===e?Ht.FNC1:e-1,Ht.FNC1)}let e=this.extractNumericValueFromBitArray(t,7),n=(e-8)/11,r=(e-8)%11;return new Ht(t+7,n,r)}extractNumericValueFromBitArray(t,e){return Wt.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,n){let r=0;for(let i=0;i<n;++i)t.get(e+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Vt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Vt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let n=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());let r=n!==this.current.getPosition();if(!r&&!t)break}while(!t);return e.getDecodedInformation()}parseNumericBlock(){while(this.isStillNumeric(this.current.getPosition())){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return e=t.isSecondDigitFNC1()?new Vt(this.current.getPosition(),this.buffer.toString()):new Vt(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Ut(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let t=new Vt(this.current.getPosition(),this.buffer.toString());return new Ut(!0,t)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ut(!1)}parseIsoIec646Block(){while(this.isStillIsoIec646(this.current.getPosition())){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Vt(this.current.getPosition(),this.buffer.toString());return new Ut(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ut(!1)}parseAlphaBlock(){while(this.isStillAlpha(this.current.getPosition())){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Vt(this.current.getPosition(),this.buffer.toString());return new Ut(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ut(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<116)return!0;if(t+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,8);return r>=232&&r<253}decodeIsoIec646(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new zt(t+5,zt.FNC1);if(e>=5&&e<15)return new zt(t+5,"0"+(e-5));let n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new zt(t+7,""+(n+1));if(n>=90&&n<116)return new zt(t+7,""+(n+7));let r,i=this.extractNumericValueFromBitArray(t,8);switch(i){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new E}return new zt(t+8,r)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,6);return n>=16&&n<63}decodeAlphanumeric(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new zt(t+5,zt.FNC1);if(e>=5&&e<15)return new zt(t+5,"0"+(e-5));let n,r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new zt(t+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new nt("Decoding invalid alphanumeric value: "+r)}return new zt(t+6,n)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class Gt{constructor(t){this.information=t,this.generalDecoder=new Wt(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class $t extends Gt{constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let n=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,n)}encodeCompressedGtinWithoutAI(t,e,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*r,10);n/100===0&&t.append("0"),n/10===0&&t.append("0"),t.append(n)}$t.appendCheckDigit(t,n)}static appendCheckDigit(t,e){let n=0;for(let r=0;r<13;r++){let i=t.charAt(r+e).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),t.append(n)}}$t.GTIN_SIZE=40;class qt extends $t{constructor(t){super(t)}parseInformation(){let t=new M;t.append("(01)");let e=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(qt.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,qt.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,qt.HEADER_SIZE+44)}}qt.HEADER_SIZE=4;class Yt extends Gt{constructor(t){super(t)}parseInformation(){let t=new M;return this.getGeneralDecoder().decodeAllCodes(t,Yt.HEADER_SIZE)}}Yt.HEADER_SIZE=5;class Xt extends $t{constructor(t){super(t)}encodeCompressedWeight(t,e,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,n);this.addWeightCode(t,r);let i=this.checkWeight(r),o=1e5;for(let s=0;s<5;++s)i/o===0&&t.append("0"),o/=10;t.append(i)}}class Zt extends Xt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Zt.HEADER_SIZE+Xt.GTIN_SIZE+Zt.WEIGHT_SIZE)throw new k;let t=new M;return this.encodeCompressedGtin(t,Zt.HEADER_SIZE),this.encodeCompressedWeight(t,Zt.HEADER_SIZE+Xt.GTIN_SIZE,Zt.WEIGHT_SIZE),t.toString()}}Zt.HEADER_SIZE=5,Zt.WEIGHT_SIZE=15;class Kt extends Zt{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class Jt extends Zt{constructor(t){super(t)}addWeightCode(t,e){e<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Qt extends $t{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Qt.HEADER_SIZE+$t.GTIN_SIZE)throw new k;let t=new M;this.encodeCompressedGtin(t,Qt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Qt.HEADER_SIZE+$t.GTIN_SIZE,Qt.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Qt.HEADER_SIZE+$t.GTIN_SIZE+Qt.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()}}Qt.HEADER_SIZE=8,Qt.LAST_DIGIT_SIZE=2;class te extends $t{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<te.HEADER_SIZE+$t.GTIN_SIZE)throw new k;let t=new M;this.encodeCompressedGtin(t,te.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(te.HEADER_SIZE+$t.GTIN_SIZE,te.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(te.HEADER_SIZE+$t.GTIN_SIZE+te.LAST_DIGIT_SIZE,te.FIRST_THREE_DIGITS_SIZE);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(te.HEADER_SIZE+$t.GTIN_SIZE+te.LAST_DIGIT_SIZE+te.FIRST_THREE_DIGITS_SIZE,null);return t.append(r.getNewString()),t.toString()}}te.HEADER_SIZE=8,te.LAST_DIGIT_SIZE=2,te.FIRST_THREE_DIGITS_SIZE=10;class ee extends Xt{constructor(t,e,n){super(t),this.dateCode=n,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=ee.HEADER_SIZE+ee.GTIN_SIZE+ee.WEIGHT_SIZE+ee.DATE_SIZE)throw new k;let t=new M;return this.encodeCompressedGtin(t,ee.HEADER_SIZE),this.encodeCompressedWeight(t,ee.HEADER_SIZE+ee.GTIN_SIZE,ee.WEIGHT_SIZE),this.encodeCompressedDate(t,ee.HEADER_SIZE+ee.GTIN_SIZE+ee.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,ee.DATE_SIZE);if(38400==n)return;t.append("("),t.append(this.dateCode),t.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&t.append("0"),t.append(o),i/10==0&&t.append("0"),t.append(i),r/10==0&&t.append("0"),t.append(r)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}function ne(t){try{if(t.get(1))return new qt(t);if(!t.get(2))return new Yt(t);let e=Wt.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new Kt(t);case 5:return new Jt(t)}let n=Wt.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new Qt(t);case 13:return new te(t)}let r=Wt.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new ee(t,"310","11");case 57:return new ee(t,"320","11");case 58:return new ee(t,"310","13");case 59:return new ee(t,"320","13");case 60:return new ee(t,"310","15");case 61:return new ee(t,"320","15");case 62:return new ee(t,"310","17");case 63:return new ee(t,"320","17")}}catch(e){throw console.log(e),new nt("unknown decoder: "+t)}}ee.HEADER_SIZE=8,ee.WEIGHT_SIZE=20,ee.DATE_SIZE=16;class re{constructor(t,e,n,r){this.leftchar=t,this.rightchar=e,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof re&&(re.equalsOrNull(t.leftchar,e.leftchar)&&re.equalsOrNull(t.rightchar,e.rightchar)&&re.equalsOrNull(t.finderpattern,e.finderpattern))}static equalsOrNull(t,e){return null===t?null===e:re.equals(t,e)}hashCode(){let t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t}}class ie{constructor(t,e,n){this.pairs=t,this.rowNumber=e,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof ie&&(this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed)}checkEqualitity(t,e){if(!t||!e)return;let n;return t.forEach(((t,r)=>{e.forEach((e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(n=!0)}))})),n}}class oe extends Dt{constructor(t){super(...arguments),this.pairs=new Array(oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===t}decodeRow(t,e,n){this.pairs.length=0,this.startFromEven=!1;try{return oe.constructResult(this.decodeRow2pairs(t,e))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,oe.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let n,r=!1;while(!r)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(i){if(i instanceof k){if(!this.pairs.length)throw new k;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(t,!1),n){let t=this.checkRowsBoolean(!1);if(null!=t)return t;if(t=this.checkRowsBoolean(!0),null!=t)return t}throw new k}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let r=e;r<this.rows.length;r++){let e=this.rows[r];this.pairs.length=0;for(let n of t)this.pairs.push(n.getPairs());if(this.pairs.push(e.getPairs()),!oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(t);i.push(e);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new k}static isValidSequence(t){for(let e of oe.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let n=!0;for(let r=0;r<t.length;r++)if(t[r].getFinderPattern().getValue()!=e[r]){n=!1;break}if(n)return!0}return!1}storeRow(t,e){let n=0,r=!1,i=!1;while(n<this.rows.length){let e=this.rows[n];if(e.getRowNumber()>t){i=e.isEquivalent(this.pairs);break}r=e.isEquivalent(this.pairs),n++}i||r||oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new ie(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let n of e)if(n.getPairs().length!==t.length)for(let e of n.getPairs())for(let n of t)if(re.equals(e,n))break}static isPartialRow(t,e){for(let n of e){let e=!0;for(let r of t){let t=!1;for(let e of n.getPairs())if(r.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=Bt.buildBitArray(t),n=ne(e),r=n.parseInformation(),i=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),s=[i[0],i[1],o[0],o[1]];return new z(r,null,null,s,H.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),n=t.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let t=this.pairs.get(s);r+=t.getLeftChar().getChecksumPortion(),i++;let e=t.getRightChar();null!=e&&(r+=e.getChecksumPortion(),i++)}r%=211;let o=211*(i-4)+r;return o==e.getValue()}static getNextSecondBar(t,e){let n;return t.get(e)?(n=t.getNextUnset(e),n=t.getNextSet(n)):(n=t.getNextSet(e),n=t.getNextUnset(n)),n}retrieveNextPair(t,e,n){let r,i=e.length%2==0;this.startFromEven&&(i=!i);let o=!0,s=-1;do{this.findNextPair(t,e,s),r=this.parseFoundFinderPattern(t,n,i),null==r?s=oe.getNextSecondBar(t,this.startEnd[0]):o=!1}while(o);let a,l=this.decodeDataCharacter(t,r,i,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new k;try{a=this.decodeDataCharacter(t,r,i,!1)}catch(c){a=null,this.verbose&&console.log(c)}return new re(l,a,r,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,o=t.getSize();if(n>=0)i=n;else if(this.isEmptyPair(e))i=0;else{let t=e[e.length-1];i=t.getFinderPattern().getStartEnd()[1]}let s=e.length%2!=0;this.startFromEven&&(s=!s);let a=!1;while(i<o){if(a=!t.get(i),!a)break;i++}let l=0,c=i;for(let u=i;u<o;u++)if(t.get(u)!=a)r[l]++;else{if(3==l){if(s&&oe.reverseCounters(r),oe.isFinderPattern(r))return this.startEnd[0]=c,void(this.startEnd[1]=u);s&&oe.reverseCounters(r),c+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,l--}else l++;r[l]=1,a=!a}throw new k}static reverseCounters(t){let e=t.length;for(let n=0;n<e/2;++n){let r=t[n];t[n]=t[e-n-1],t[e-n-1]=r}}parseFoundFinderPattern(t,e,n){let r,i,o;if(n){let e=this.startEnd[0]-1;while(e>=0&&!t.get(e))e--;e++,r=this.startEnd[0]-e,i=e,o=this.startEnd[1]}else i=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let s,a=this.getDecodeFinderCounters();m.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{s=this.parseFinderValue(a,oe.FINDER_PATTERNS)}catch(l){return null}return new Pt(s,[i,o],i,o,e)}decodeDataCharacter(t,e,n,r){let i=this.getDataCharacterCounters();for(let x=0;x<i.length;x++)i[x]=0;if(r)oe.recordPatternInReverse(t,e.getStartEnd()[0],i);else{oe.recordPattern(t,e.getStartEnd()[1],i);for(let t=0,e=i.length-1;t<e;t++,e--){let n=i[t];i[t]=i[e],i[e]=n}}let o=17,s=ot.sum(new Int32Array(i))/o,a=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new k;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let x=0;x<i.length;x++){let t=1*i[x]/s,e=t+.5;if(e<1){if(t<.3)throw new k;e=1}else if(e>8){if(t>8.7)throw new k;e=8}let n=x/2;0==(1&x)?(l[n]=e,u[n]=t-e):(c[n]=e,h[n]=t-e)}this.adjustOddEvenCounts(o);let d=4*e.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let x=l.length-1;x>=0;x--){if(oe.isNotA1left(e,n,r)){let t=oe.WEIGHTS[d][2*x];p+=l[x]*t}f+=l[x]}let m=0;for(let x=c.length-1;x>=0;x--)if(oe.isNotA1left(e,n,r)){let t=oe.WEIGHTS[d][2*x+1];m+=c[x]*t}let g=p+m;if(0!=(1&f)||f>13||f<4)throw new k;let y=(13-f)/2,v=oe.SYMBOL_WIDEST[y],w=9-v,b=Lt.getRSSvalue(l,v,!0),_=Lt.getRSSvalue(c,w,!1),S=oe.EVEN_TOTAL_SUBSET[y],E=oe.GSUM[y],A=b*S+_+E;return new Nt(A,g)}static isNotA1left(t,e,n){return!(0==t.getValue()&&e&&n)}adjustOddEvenCounts(t){let e=ot.sum(new Int32Array(this.getOddCounts())),n=ot.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;e>13?i=!0:e<4&&(r=!0);let o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);let a=e+n-t,l=1==(1&e),c=0==(1&n);if(1==a)if(l){if(c)throw new k;i=!0}else{if(!c)throw new k;s=!0}else if(-1==a)if(l){if(c)throw new k;r=!0}else{if(!c)throw new k;o=!0}else{if(0!=a)throw new k;if(l){if(!c)throw new k;e<n?(r=!0,s=!0):(i=!0,o=!0)}else if(c)throw new k}if(r){if(i)throw new k;oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new k;oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}oe.SYMBOL_WIDEST=[7,5,4,3,1],oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],oe.GSUM=[0,348,1388,2948,3988],oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],oe.FINDER_PAT_A=0,oe.FINDER_PAT_B=1,oe.FINDER_PAT_C=2,oe.FINDER_PAT_D=3,oe.FINDER_PAT_E=4,oe.FINDER_PAT_F=5,oe.FINDER_PATTERN_SEQUENCES=[[oe.FINDER_PAT_A,oe.FINDER_PAT_A],[oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B],[oe.FINDER_PAT_A,oe.FINDER_PAT_C,oe.FINDER_PAT_B,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_C],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F]],oe.MAX_PAIRS=11;class se extends Nt{constructor(t,e,n){super(t,e),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ae extends Dt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,n){const r=this.decodePair(e,!1,t,n);ae.addOrTally(this.possibleLeftPairs,r),e.reverse();let i=this.decodePair(e,!0,t,n);ae.addOrTally(this.possibleRightPairs,i),e.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let t of this.possibleRightPairs)if(t.getCount()>1&&ae.checkChecksum(o,t))return ae.constructResult(o,t);throw new k}static addOrTally(t,e){if(null==e)return;let n=!1;for(let r of t)if(r.getValue()===e.getValue()){r.incrementCount(),n=!0;break}n||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let n=4537077*t.getValue()+e.getValue(),r=new String(n).toString(),i=new M;for(let l=13-r.length;l>0;l--)i.append("0");i.append(r);let o=0;for(let l=0;l<13;l++){let t=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&l)?3*t:t}o=10-o%10,10===o&&(o=0),i.append(o.toString());let s=t.getFinderPattern().getResultPoints(),a=e.getFinderPattern().getResultPoints();return new z(i.toString(),null,0,[s[0],s[1],a[0],a[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(t,e){let n=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,r=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(t,e,n,r){try{let i=this.findFinderPattern(t,e),o=this.parseFoundFinderPattern(t,n,e,i),s=null==r?null:r.get(S.NEED_RESULT_POINT_CALLBACK);if(null!=s){let r=(i[0]+i[1])/2;e&&(r=t.getSize()-1-r),s.foundPossibleResultPoint(new at(r,n))}let a=this.decodeDataCharacter(t,o,!0),l=this.decodeDataCharacter(t,o,!1);return new se(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(t,e,n){let r=this.getDataCharacterCounters();for(let m=0;m<r.length;m++)r[m]=0;if(n)wt.recordPatternInReverse(t,e.getStartEnd()[0],r);else{wt.recordPattern(t,e.getStartEnd()[1]+1,r);for(let t=0,e=r.length-1;t<e;t++,e--){let n=r[t];r[t]=r[e],r[e]=n}}let i=n?16:15,o=ot.sum(new Int32Array(r))/i,s=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let m=0;m<r.length;m++){let t=r[m]/o,e=Math.floor(t+.5);e<1?e=1:e>8&&(e=8);let n=Math.floor(m/2);0===(1&m)?(s[n]=e,l[n]=t-e):(a[n]=e,c[n]=t-e)}this.adjustOddEvenCounts(n,i);let u=0,h=0;for(let m=s.length-1;m>=0;m--)h*=9,h+=s[m],u+=s[m];let d=0,f=0;for(let m=a.length-1;m>=0;m--)d*=9,d+=a[m],f+=a[m];let p=h+3*d;if(n){if(0!==(1&u)||u>12||u<4)throw new k;let t=(12-u)/2,e=ae.OUTSIDE_ODD_WIDEST[t],n=9-e,r=Lt.getRSSvalue(s,e,!1),i=Lt.getRSSvalue(a,n,!0),o=ae.OUTSIDE_EVEN_TOTAL_SUBSET[t],l=ae.OUTSIDE_GSUM[t];return new Nt(r*o+i+l,p)}{if(0!==(1&f)||f>10||f<4)throw new k;let t=(10-f)/2,e=ae.INSIDE_ODD_WIDEST[t],n=9-e,r=Lt.getRSSvalue(s,e,!0),i=Lt.getRSSvalue(a,n,!1),o=ae.INSIDE_ODD_TOTAL_SUBSET[t],l=ae.INSIDE_GSUM[t];return new Nt(i*o+r+l,p)}}findFinderPattern(t,e){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=t.getSize(),i=!1,o=0;while(o<r){if(i=!t.get(o),e===i)break;o++}let s=0,a=o;for(let l=o;l<r;l++)if(t.get(l)!==i)n[s]++;else{if(3===s){if(Dt.isFinderPattern(n))return[a,l];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,s--}else s++;n[s]=1,i=!i}throw new k}parseFoundFinderPattern(t,e,n,r){let i=t.get(r[0]),o=r[0]-1;while(o>=0&&i!==t.get(o))o--;o++;const s=r[0]-o,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);m.arraycopy(a,0,l,1,a.length-1),l[0]=s;const c=this.parseFinderValue(l,ae.FINDER_PATTERNS);let u=o,h=r[1];return n&&(u=t.getSize()-1-u,h=t.getSize()-1-h),new Pt(c,[o,r[1]],u,h,e)}adjustOddEvenCounts(t,e){let n=ot.sum(new Int32Array(this.getOddCounts())),r=ot.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;t?(n>12?o=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(s=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(s=!0));let l=n+r-e,c=(1&n)===(t?1:0),u=1===(1&r);if(1===l)if(c){if(u)throw new k;o=!0}else{if(!u)throw new k;a=!0}else if(-1===l)if(c){if(u)throw new k;i=!0}else{if(!u)throw new k;s=!0}else{if(0!==l)throw new k;if(c){if(!u)throw new k;n<r?(i=!0,a=!0):(o=!0,s=!0)}else if(u)throw new k}if(i){if(o)throw new k;Dt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Dt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new k;Dt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Dt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ae.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ae.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ae.OUTSIDE_GSUM=[0,161,961,2015,2715],ae.INSIDE_GSUM=[0,336,1036,1516],ae.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ae.INSIDE_ODD_WIDEST=[2,4,6,8],ae.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class le extends wt{constructor(t,e){super(),this.readers=[],this.verbose=!0===e;const n=t?t.get(S.POSSIBLE_FORMATS):null,r=t&&void 0!==t.get(S.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(H.EAN_13)||n.includes(H.UPC_A)||n.includes(H.EAN_8)||n.includes(H.UPC_E))&&this.readers.push(new Rt(t)),n.includes(H.CODE_39)&&this.readers.push(new _t(r)),n.includes(H.CODE_128)&&this.readers.push(new bt),n.includes(H.ITF)&&this.readers.push(new St),n.includes(H.RSS_14)&&this.readers.push(new ae),n.includes(H.RSS_EXPANDED)&&this.readers.push(new oe(this.verbose))):(this.readers.push(new Rt(t)),this.readers.push(new _t),this.readers.push(new Rt(t)),this.readers.push(new bt),this.readers.push(new St),this.readers.push(new ae),this.readers.push(new oe(this.verbose)))}decodeRow(t,e,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(t,e,n)}catch(r){}throw new k}reset(){this.readers.forEach((t=>t.reset()))}}class ce extends F{constructor(t=500,e){super(new le(e),t,e)}}class ue{constructor(t,e,n){this.ecCodewords=t,this.ecBlocks=[e],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class he{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(t,e,n,r,i,o){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0;const a=o.getECCodewords(),l=o.getECBlocks();for(let c of l)s+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if(0!==(1&t)||0!==(1&e))throw new E;for(let n of de.VERSIONS)if(n.symbolSizeRows===t&&n.symbolSizeColumns===e)return n;throw new E}toString(){return""+this.versionNumber}static buildVersions(){return[new de(1,10,10,8,8,new ue(5,new he(1,3))),new de(2,12,12,10,10,new ue(7,new he(1,5))),new de(3,14,14,12,12,new ue(10,new he(1,8))),new de(4,16,16,14,14,new ue(12,new he(1,12))),new de(5,18,18,16,16,new ue(14,new he(1,18))),new de(6,20,20,18,18,new ue(18,new he(1,22))),new de(7,22,22,20,20,new ue(20,new he(1,30))),new de(8,24,24,22,22,new ue(24,new he(1,36))),new de(9,26,26,24,24,new ue(28,new he(1,44))),new de(10,32,32,14,14,new ue(36,new he(1,62))),new de(11,36,36,16,16,new ue(42,new he(1,86))),new de(12,40,40,18,18,new ue(48,new he(1,114))),new de(13,44,44,20,20,new ue(56,new he(1,144))),new de(14,48,48,22,22,new ue(68,new he(1,174))),new de(15,52,52,24,24,new ue(42,new he(2,102))),new de(16,64,64,14,14,new ue(56,new he(2,140))),new de(17,72,72,16,16,new ue(36,new he(4,92))),new de(18,80,80,18,18,new ue(48,new he(4,114))),new de(19,88,88,20,20,new ue(56,new he(4,144))),new de(20,96,96,22,22,new ue(68,new he(4,174))),new de(21,104,104,24,24,new ue(56,new he(6,136))),new de(22,120,120,18,18,new ue(68,new he(6,175))),new de(23,132,132,20,20,new ue(62,new he(8,163))),new de(24,144,144,22,22,new ue(62,new he(8,156),new he(2,155))),new de(25,8,18,6,16,new ue(7,new he(1,5))),new de(26,8,32,6,14,new ue(11,new he(1,10))),new de(27,12,26,10,24,new ue(14,new he(1,16))),new de(28,12,36,10,16,new ue(18,new he(1,22))),new de(29,16,36,14,16,new ue(24,new he(1,32))),new de(30,16,48,14,22,new ue(28,new he(1,49)))]}}de.VERSIONS=de.buildVersions();class fe{constructor(t){const e=t.getHeight();if(e<8||e>144||0!==(1&e))throw new E;this.version=fe.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new I(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const e=t.getHeight(),n=t.getWidth();return de.getVersionForDimensions(e,n)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let e=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let s=!1,a=!1,l=!1,c=!1;do{if(n!==i||0!==r||s)if(n!==i-2||0!==r||0===(3&o)||a)if(n!==i+4||2!==r||0!==(7&o)||l)if(n!==i-2||0!==r||4!==(7&o)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(t[e++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(t[e++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else t[e++]=255&this.readCorner4(i,o),n-=2,r+=2,c=!0;else t[e++]=255&this.readCorner3(i,o),n-=2,r+=2,l=!0;else t[e++]=255&this.readCorner2(i,o),n-=2,r+=2,a=!0;else t[e++]=255&this.readCorner1(i,o),n-=2,r+=2,s=!0}while(n<i||r<o);if(e!==this.version.getTotalCodewords())throw new E;return t}readModule(t,e,n,r){return t<0&&(t+=n,e+=4-(n+4&7)),e<0&&(e+=r,t+=4-(r+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,n,r){let i=0;return this.readModule(t-2,e-2,n,r)&&(i|=1),i<<=1,this.readModule(t-2,e-1,n,r)&&(i|=1),i<<=1,this.readModule(t-1,e-2,n,r)&&(i|=1),i<<=1,this.readModule(t-1,e-1,n,r)&&(i|=1),i<<=1,this.readModule(t-1,e,n,r)&&(i|=1),i<<=1,this.readModule(t,e-2,n,r)&&(i|=1),i<<=1,this.readModule(t,e-1,n,r)&&(i|=1),i<<=1,this.readModule(t,e,n,r)&&(i|=1),i}readCorner1(t,e){let n=0;return this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,1,t,e)&&(n|=1),n<<=1,this.readModule(t-1,2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(2,e-1,t,e)&&(n|=1),n<<=1,this.readModule(3,e-1,t,e)&&(n|=1),n}readCorner2(t,e){let n=0;return this.readModule(t-3,0,t,e)&&(n|=1),n<<=1,this.readModule(t-2,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(0,e-4,t,e)&&(n|=1),n<<=1,this.readModule(0,e-3,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n}readCorner3(t,e){let n=0;return this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(0,e-3,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-3,t,e)&&(n|=1),n<<=1,this.readModule(1,e-2,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n}readCorner4(t,e){let n=0;return this.readModule(t-3,0,t,e)&&(n|=1),n<<=1,this.readModule(t-2,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(2,e-1,t,e)&&(n|=1),n<<=1,this.readModule(3,e-1,t,e)&&(n|=1),n}extractDataRegion(t){const e=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new h("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=e/r|0,s=n/i|0,a=o*r,l=s*i,c=new I(l,a);for(let u=0;u<o;++u){const e=u*r;for(let n=0;n<s;++n){const o=n*i;for(let s=0;s<r;++s){const a=u*(r+2)+1+s,l=e+s;for(let e=0;e<i;++e){const r=n*(i+2)+1+e;if(t.get(r,a)){const t=o+e;c.set(t,l)}}}}}return c}}class pe{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){const n=e.getECBlocks();let r=0;const i=n.getECBlocks();for(let h of i)r+=h.getCount();const o=new Array(r);let s=0;for(let h of i)for(let t=0;t<h.getCount();t++){const t=h.getDataCodewords(),e=n.getECCodewords()+t;o[s++]=new pe(t,new Uint8Array(e))}const a=o[0].codewords.length,l=a-n.getECCodewords(),c=l-1;let u=0;for(let h=0;h<c;h++)for(let e=0;e<s;e++)o[e].codewords[h]=t[u++];const d=24===e.getVersionNumber(),f=d?8:s;for(let h=0;h<f;h++)o[h].codewords[l-1]=t[u++];const p=o[0].codewords.length;for(let h=l;h<p;h++)for(let e=0;e<s;e++){const n=d?(e+8)%s:e,r=d&&n>7?h-1:h;o[n].codewords[r]=t[u++]}if(u!==t.length)throw new h;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class me{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new h(""+t);let e=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,s=t<o?t:o,a=o-s,l=255>>8-s<<a;e=(i[r]&l)>>a,t-=s,n+=s,8===n&&(n=0,r++)}if(t>0){while(t>=8)e=e<<8|255&i[r],r++,t-=8;if(t>0){const o=8-t,s=255>>o<<o;e=e<<t|(i[r]&s)>>o,n+=t}}return this.bitOffset=n,this.byteOffset=r,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(function(t){t[t["PAD_ENCODE"]=0]="PAD_ENCODE",t[t["ASCII_ENCODE"]=1]="ASCII_ENCODE",t[t["C40_ENCODE"]=2]="C40_ENCODE",t[t["TEXT_ENCODE"]=3]="TEXT_ENCODE",t[t["ANSIX12_ENCODE"]=4]="ANSIX12_ENCODE",t[t["EDIFACT_ENCODE"]=5]="EDIFACT_ENCODE",t[t["BASE256_ENCODE"]=6]="BASE256_ENCODE"})(W||(W={}));class ge{static decode(t){const e=new me(t),n=new M,r=new M,i=new Array;let o=W.ASCII_ENCODE;do{if(o===W.ASCII_ENCODE)o=this.decodeAsciiSegment(e,n,r);else{switch(o){case W.C40_ENCODE:this.decodeC40Segment(e,n);break;case W.TEXT_ENCODE:this.decodeTextSegment(e,n);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,n);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(e,n);break;case W.BASE256_ENCODE:this.decodeBase256Segment(e,n,i);break;default:throw new E}o=W.ASCII_ENCODE}}while(o!==W.PAD_ENCODE&&e.available()>0);return r.length()>0&&n.append(r.toString()),new Z(t,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(t,e,n){let r=!1;do{let i=t.readBits(8);if(0===i)throw new E;if(i<=128)return r&&(i+=128),e.append(String.fromCharCode(i-1)),W.ASCII_ENCODE;if(129===i)return W.PAD_ENCODE;if(i<=229){const t=i-130;t<10&&e.append("0"),e.append(""+t)}else switch(i){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:r=!0;break;case 236:e.append("[)>05"),n.insert(0,"");break;case 237:e.append("[)>06"),n.insert(0,"");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;case 241:break;default:if(254!==i||0!==t.available())throw new E;break}}while(t.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(t,e){let n=!1;const r=[];let i=0;do{if(8===t.available())return;const o=t.readBits(8);if(254===o)return;this.parseTwoBytes(o,t.readBits(8),r);for(let t=0;t<3;t++){const o=r[t];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new E;{const t=this.C40_BASIC_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}}break;case 1:n?(e.append(String.fromCharCode(o+128)),n=!1):e.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const t=this.C40_SHIFT2_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}else switch(o){case 27:e.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new E}i=0;break;case 3:n?(e.append(String.fromCharCode(o+224)),n=!1):e.append(String.fromCharCode(o+96)),i=0;break;default:throw new E}}}while(t.available()>0)}static decodeTextSegment(t,e){let n=!1,r=[],i=0;do{if(8===t.available())return;const o=t.readBits(8);if(254===o)return;this.parseTwoBytes(o,t.readBits(8),r);for(let t=0;t<3;t++){const o=r[t];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new E;{const t=this.TEXT_BASIC_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}}break;case 1:n?(e.append(String.fromCharCode(o+128)),n=!1):e.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const t=this.TEXT_SHIFT2_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}else switch(o){case 27:e.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new E}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new E;{const t=this.TEXT_SHIFT3_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t),i=0}break;default:throw new E}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){const n=[];do{if(8===t.available())return;const r=t.readBits(8);if(254===r)return;this.parseTwoBytes(r,t.readBits(8),n);for(let t=0;t<3;t++){const r=n[t];switch(r){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(r<14)e.append(String.fromCharCode(r+44));else{if(!(r<40))throw new E;e.append(String.fromCharCode(r+51))}break}}}while(t.available()>0)}static parseTwoBytes(t,e,n){let r=(t<<8)+e-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(t,e){do{if(t.available()<=16)return;for(let n=0;n<4;n++){let n=t.readBits(6);if(31===n){const e=8-t.getBitOffset();return void(8!==e&&t.readBits(e))}0===(32&n)&&(n|=64),e.append(String.fromCharCode(n))}}while(t.available()>0)}static decodeBase256Segment(t,e,n){let r=1+t.getByteOffset();const i=this.unrandomize255State(t.readBits(8),r++);let o;if(o=0===i?t.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(t.readBits(8),r++),o<0)throw new E;const s=new Uint8Array(o);for(let l=0;l<o;l++){if(t.available()<8)throw new E;s[l]=this.unrandomize255State(t.readBits(8),r++)}n.push(s);try{e.append(C.decode(s,T.ISO88591))}catch(a){throw new nt("Platform does not support required encoding: "+a.message)}}static unrandomize255State(t,e){const n=149*e%255+1,r=t-n;return r>=0?r:r+256}}ge.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ge.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ge.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ge.TEXT_SHIFT2_SET_CHARS=ge.C40_SHIFT2_SET_CHARS,ge.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class ye{constructor(){this.rsDecoder=new rt(tt.DATA_MATRIX_FIELD_256)}decode(t){const e=new fe(t),n=e.getVersion(),r=e.readCodewords(),i=pe.getDataBlocks(r,n);let o=0;for(let l of i)o+=l.getNumDataCodewords();const s=new Uint8Array(o),a=i.length;for(let l=0;l<a;l++){const t=i[l],e=t.getCodewords(),n=t.getNumDataCodewords();this.correctErrors(e,n);for(let r=0;r<n;r++)s[r*a+l]=e[r]}return ge.decode(s)}correctErrors(t,e){const n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-e)}catch(r){throw new f}for(let i=0;i<e;i++)t[i]=n[i]}}class ve{constructor(t){this.image=t,this.rectangleDetector=new ut(this.image)}detect(){const t=this.rectangleDetector.detect();let e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new k;e=this.shiftToModuleCenter(e);const n=e[0],r=e[1],i=e[2],o=e[3];let s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1;1===(1&s)&&(s+=1),1===(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let l=ve.sampleGrid(this.image,n,r,i,o,s,a);return new lt(l,[n,r,i,o])}static shiftPoint(t,e,n){let r=(e.getX()-t.getX())/(n+1),i=(e.getY()-t.getY())/(n+1);return new at(t.getX()+r,t.getY()+i)}static moveAway(t,e,n){let r=t.getX(),i=t.getY();return r<e?r-=1:r+=1,i<n?i-=1:i+=1,new at(r,i)}detectSolid1(t){let e=t[0],n=t[1],r=t[3],i=t[2],o=this.transitionsBetween(e,n),s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,e),c=o,u=[i,e,n,r];return c>s&&(c=s,u[0]=e,u[1]=n,u[2]=r,u[3]=i),c>a&&(c=a,u[0]=n,u[1]=r,u[2]=i,u[3]=e),c>l&&(u[0]=r,u[1]=i,u[2]=e,u[3]=n),u}detectSolid2(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=this.transitionsBetween(e,i),s=ve.shiftPoint(n,r,4*(o+1)),a=ve.shiftPoint(r,n,4*(o+1)),l=this.transitionsBetween(s,e),c=this.transitionsBetween(a,i);return l<c?(t[0]=e,t[1]=n,t[2]=r,t[3]=i):(t[0]=n,t[1]=r,t[2]=i,t[3]=e),t}correctTopRight(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=this.transitionsBetween(e,i),s=this.transitionsBetween(n,i),a=ve.shiftPoint(e,n,4*(s+1)),l=ve.shiftPoint(r,n,4*(o+1));o=this.transitionsBetween(a,i),s=this.transitionsBetween(l,i);let c=new at(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),u=new at(i.getX()+(e.getX()-n.getX())/(s+1),i.getY()+(e.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(u)?u:null;if(!this.isValid(u))return c;let h=this.transitionsBetween(a,c)+this.transitionsBetween(l,c),d=this.transitionsBetween(a,u)+this.transitionsBetween(l,u);return h>d?c:u}shiftToModuleCenter(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=this.transitionsBetween(e,i)+1,s=this.transitionsBetween(r,i)+1,a=ve.shiftPoint(e,n,4*s),l=ve.shiftPoint(r,n,4*o);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(l,i)+1,1===(1&o)&&(o+=1),1===(1&s)&&(s+=1);let c,u,h=(e.getX()+n.getX()+r.getX()+i.getX())/4,d=(e.getY()+n.getY()+r.getY()+i.getY())/4;return e=ve.moveAway(e,h,d),n=ve.moveAway(n,h,d),r=ve.moveAway(r,h,d),i=ve.moveAway(i,h,d),a=ve.shiftPoint(e,n,4*s),a=ve.shiftPoint(a,i,4*o),c=ve.shiftPoint(n,e,4*s),c=ve.shiftPoint(c,r,4*o),l=ve.shiftPoint(r,i,4*s),l=ve.shiftPoint(l,n,4*o),u=ve.shiftPoint(i,r,4*s),u=ve.shiftPoint(u,e,4*o),[a,c,l,u]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,n,r,i,o,s){const a=pt.getInstance();return a.sampleGrid(t,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,e.getX(),e.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(t,e){let n=Math.trunc(t.getX()),r=Math.trunc(t.getY()),i=Math.trunc(e.getX()),o=Math.trunc(e.getY()),s=Math.abs(o-r)>Math.abs(i-n);if(s){let t=n;n=r,r=t,t=i,i=o,o=t}let a=Math.abs(i-n),l=Math.abs(o-r),c=-a/2,u=r<o?1:-1,h=n<i?1:-1,d=0,f=this.image.get(s?r:n,s?n:r);for(let p=n,m=r;p!==i;p+=h){let t=this.image.get(s?m:p,s?p:m);if(t!==f&&(d++,f=t),c+=l,c>0){if(m===o)break;m+=u,c-=a}}return d}}class we{constructor(){this.decoder=new ye}decode(t,e=null){let n,r;if(null!=e&&e.has(S.PURE_BARCODE)){const e=we.extractPureBits(t.getBlackMatrix());n=this.decoder.decode(e),r=we.NO_POINTS}else{const e=new ve(t.getBlackMatrix()).detect();n=this.decoder.decode(e.getBits()),r=e.getPoints()}const i=n.getRawBytes(),o=new z(n.getText(),i,8*i.length,r,H.DATA_MATRIX,m.currentTimeMillis()),s=n.getByteSegments();null!=s&&o.putMetadata(X.BYTE_SEGMENTS,s);const a=n.getECLevel();return null!=a&&o.putMetadata(X.ERROR_CORRECTION_LEVEL,a),o}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(null==e||null==n)throw new k;const r=this.moduleSize(e,t);let i=e[1];const o=n[1];let s=e[0];const a=n[0],l=(a-s+1)/r,c=(o-i+1)/r;if(l<=0||c<=0)throw new k;const u=r/2;i+=u,s+=u;const h=new I(l,c);for(let d=0;d<c;d++){const e=i+d*r;for(let n=0;n<l;n++)t.get(s+n*r,e)&&h.set(n,d)}return h}static moduleSize(t,e){const n=e.getWidth();let r=t[0];const i=t[1];while(r<n&&e.get(r,i))r++;if(r===n)throw new k;const o=r-t[0];if(0===o)throw new k;return o}}we.NO_POINTS=[];class be extends F{constructor(t=500){super(new we,t)}}(function(t){t[t["L"]=0]="L",t[t["M"]=1]="M",t[t["Q"]=2]="Q",t[t["H"]=3]="H"})(G||(G={}));class _e{constructor(t,e,n){this.value=t,this.stringValue=e,this.bits=n,_e.FOR_BITS.set(n,this),_e.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return _e.L;case"M":return _e.M;case"Q":return _e.Q;case"H":return _e.H;default:throw new u(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof _e))return!1;const e=t;return this.value===e.value}static forBits(t){if(t<0||t>=_e.FOR_BITS.size)throw new h;return _e.FOR_BITS.get(t)}}_e.FOR_BITS=new Map,_e.FOR_VALUE=new Map,_e.L=new _e(G.L,"L",1),_e.M=new _e(G.M,"M",0),_e.Q=new _e(G.Q,"Q",3),_e.H=new _e(G.H,"H",2);class Se{constructor(t){this.errorCorrectionLevel=_e.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return w.bitCount(t^e)}static decodeFormatInformation(t,e){const n=Se.doDecodeFormatInformation(t,e);return null!==n?n:Se.doDecodeFormatInformation(t^Se.FORMAT_INFO_MASK_QR,e^Se.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of Se.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===t||o===e)return new Se(i[1]);let s=Se.numBitsDiffering(t,o);s<n&&(r=i[1],n=s),t!==e&&(s=Se.numBitsDiffering(e,o),s<n&&(r=i[1],n=s))}return n<=3?new Se(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Se))return!1;const e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}Se.FORMAT_INFO_MASK_QR=21522,Se.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ee{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const e=this.ecBlocks;for(const n of e)t+=n.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ae{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xe{constructor(t,e,...n){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const s of o)r+=s.getCount()*(s.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new E;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new E}}static getVersionForNumber(t){if(t<1||t>40)throw new h;return xe.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<xe.VERSION_DECODE_INFO.length;r++){const i=xe.VERSION_DECODE_INFO[r];if(i===t)return xe.getVersionForNumber(r+7);const o=Se.numBitsDiffering(t,i);o<e&&(n=r+7,e=o)}return e<=3?xe.getVersionForNumber(n):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),e=new I(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const t=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||e.setRegion(this.alignmentPatternCenters[i]-2,t,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),xe.VERSIONS=[new xe(1,new Int32Array(0),new Ee(7,new Ae(1,19)),new Ee(10,new Ae(1,16)),new Ee(13,new Ae(1,13)),new Ee(17,new Ae(1,9))),new xe(2,Int32Array.from([6,18]),new Ee(10,new Ae(1,34)),new Ee(16,new Ae(1,28)),new Ee(22,new Ae(1,22)),new Ee(28,new Ae(1,16))),new xe(3,Int32Array.from([6,22]),new Ee(15,new Ae(1,55)),new Ee(26,new Ae(1,44)),new Ee(18,new Ae(2,17)),new Ee(22,new Ae(2,13))),new xe(4,Int32Array.from([6,26]),new Ee(20,new Ae(1,80)),new Ee(18,new Ae(2,32)),new Ee(26,new Ae(2,24)),new Ee(16,new Ae(4,9))),new xe(5,Int32Array.from([6,30]),new Ee(26,new Ae(1,108)),new Ee(24,new Ae(2,43)),new Ee(18,new Ae(2,15),new Ae(2,16)),new Ee(22,new Ae(2,11),new Ae(2,12))),new xe(6,Int32Array.from([6,34]),new Ee(18,new Ae(2,68)),new Ee(16,new Ae(4,27)),new Ee(24,new Ae(4,19)),new Ee(28,new Ae(4,15))),new xe(7,Int32Array.from([6,22,38]),new Ee(20,new Ae(2,78)),new Ee(18,new Ae(4,31)),new Ee(18,new Ae(2,14),new Ae(4,15)),new Ee(26,new Ae(4,13),new Ae(1,14))),new xe(8,Int32Array.from([6,24,42]),new Ee(24,new Ae(2,97)),new Ee(22,new Ae(2,38),new Ae(2,39)),new Ee(22,new Ae(4,18),new Ae(2,19)),new Ee(26,new Ae(4,14),new Ae(2,15))),new xe(9,Int32Array.from([6,26,46]),new Ee(30,new Ae(2,116)),new Ee(22,new Ae(3,36),new Ae(2,37)),new Ee(20,new Ae(4,16),new Ae(4,17)),new Ee(24,new Ae(4,12),new Ae(4,13))),new xe(10,Int32Array.from([6,28,50]),new Ee(18,new Ae(2,68),new Ae(2,69)),new Ee(26,new Ae(4,43),new Ae(1,44)),new Ee(24,new Ae(6,19),new Ae(2,20)),new Ee(28,new Ae(6,15),new Ae(2,16))),new xe(11,Int32Array.from([6,30,54]),new Ee(20,new Ae(4,81)),new Ee(30,new Ae(1,50),new Ae(4,51)),new Ee(28,new Ae(4,22),new Ae(4,23)),new Ee(24,new Ae(3,12),new Ae(8,13))),new xe(12,Int32Array.from([6,32,58]),new Ee(24,new Ae(2,92),new Ae(2,93)),new Ee(22,new Ae(6,36),new Ae(2,37)),new Ee(26,new Ae(4,20),new Ae(6,21)),new Ee(28,new Ae(7,14),new Ae(4,15))),new xe(13,Int32Array.from([6,34,62]),new Ee(26,new Ae(4,107)),new Ee(22,new Ae(8,37),new Ae(1,38)),new Ee(24,new Ae(8,20),new Ae(4,21)),new Ee(22,new Ae(12,11),new Ae(4,12))),new xe(14,Int32Array.from([6,26,46,66]),new Ee(30,new Ae(3,115),new Ae(1,116)),new Ee(24,new Ae(4,40),new Ae(5,41)),new Ee(20,new Ae(11,16),new Ae(5,17)),new Ee(24,new Ae(11,12),new Ae(5,13))),new xe(15,Int32Array.from([6,26,48,70]),new Ee(22,new Ae(5,87),new Ae(1,88)),new Ee(24,new Ae(5,41),new Ae(5,42)),new Ee(30,new Ae(5,24),new Ae(7,25)),new Ee(24,new Ae(11,12),new Ae(7,13))),new xe(16,Int32Array.from([6,26,50,74]),new Ee(24,new Ae(5,98),new Ae(1,99)),new Ee(28,new Ae(7,45),new Ae(3,46)),new Ee(24,new Ae(15,19),new Ae(2,20)),new Ee(30,new Ae(3,15),new Ae(13,16))),new xe(17,Int32Array.from([6,30,54,78]),new Ee(28,new Ae(1,107),new Ae(5,108)),new Ee(28,new Ae(10,46),new Ae(1,47)),new Ee(28,new Ae(1,22),new Ae(15,23)),new Ee(28,new Ae(2,14),new Ae(17,15))),new xe(18,Int32Array.from([6,30,56,82]),new Ee(30,new Ae(5,120),new Ae(1,121)),new Ee(26,new Ae(9,43),new Ae(4,44)),new Ee(28,new Ae(17,22),new Ae(1,23)),new Ee(28,new Ae(2,14),new Ae(19,15))),new xe(19,Int32Array.from([6,30,58,86]),new Ee(28,new Ae(3,113),new Ae(4,114)),new Ee(26,new Ae(3,44),new Ae(11,45)),new Ee(26,new Ae(17,21),new Ae(4,22)),new Ee(26,new Ae(9,13),new Ae(16,14))),new xe(20,Int32Array.from([6,34,62,90]),new Ee(28,new Ae(3,107),new Ae(5,108)),new Ee(26,new Ae(3,41),new Ae(13,42)),new Ee(30,new Ae(15,24),new Ae(5,25)),new Ee(28,new Ae(15,15),new Ae(10,16))),new xe(21,Int32Array.from([6,28,50,72,94]),new Ee(28,new Ae(4,116),new Ae(4,117)),new Ee(26,new Ae(17,42)),new Ee(28,new Ae(17,22),new Ae(6,23)),new Ee(30,new Ae(19,16),new Ae(6,17))),new xe(22,Int32Array.from([6,26,50,74,98]),new Ee(28,new Ae(2,111),new Ae(7,112)),new Ee(28,new Ae(17,46)),new Ee(30,new Ae(7,24),new Ae(16,25)),new Ee(24,new Ae(34,13))),new xe(23,Int32Array.from([6,30,54,78,102]),new Ee(30,new Ae(4,121),new Ae(5,122)),new Ee(28,new Ae(4,47),new Ae(14,48)),new Ee(30,new Ae(11,24),new Ae(14,25)),new Ee(30,new Ae(16,15),new Ae(14,16))),new xe(24,Int32Array.from([6,28,54,80,106]),new Ee(30,new Ae(6,117),new Ae(4,118)),new Ee(28,new Ae(6,45),new Ae(14,46)),new Ee(30,new Ae(11,24),new Ae(16,25)),new Ee(30,new Ae(30,16),new Ae(2,17))),new xe(25,Int32Array.from([6,32,58,84,110]),new Ee(26,new Ae(8,106),new Ae(4,107)),new Ee(28,new Ae(8,47),new Ae(13,48)),new Ee(30,new Ae(7,24),new Ae(22,25)),new Ee(30,new Ae(22,15),new Ae(13,16))),new xe(26,Int32Array.from([6,30,58,86,114]),new Ee(28,new Ae(10,114),new Ae(2,115)),new Ee(28,new Ae(19,46),new Ae(4,47)),new Ee(28,new Ae(28,22),new Ae(6,23)),new Ee(30,new Ae(33,16),new Ae(4,17))),new xe(27,Int32Array.from([6,34,62,90,118]),new Ee(30,new Ae(8,122),new Ae(4,123)),new Ee(28,new Ae(22,45),new Ae(3,46)),new Ee(30,new Ae(8,23),new Ae(26,24)),new Ee(30,new Ae(12,15),new Ae(28,16))),new xe(28,Int32Array.from([6,26,50,74,98,122]),new Ee(30,new Ae(3,117),new Ae(10,118)),new Ee(28,new Ae(3,45),new Ae(23,46)),new Ee(30,new Ae(4,24),new Ae(31,25)),new Ee(30,new Ae(11,15),new Ae(31,16))),new xe(29,Int32Array.from([6,30,54,78,102,126]),new Ee(30,new Ae(7,116),new Ae(7,117)),new Ee(28,new Ae(21,45),new Ae(7,46)),new Ee(30,new Ae(1,23),new Ae(37,24)),new Ee(30,new Ae(19,15),new Ae(26,16))),new xe(30,Int32Array.from([6,26,52,78,104,130]),new Ee(30,new Ae(5,115),new Ae(10,116)),new Ee(28,new Ae(19,47),new Ae(10,48)),new Ee(30,new Ae(15,24),new Ae(25,25)),new Ee(30,new Ae(23,15),new Ae(25,16))),new xe(31,Int32Array.from([6,30,56,82,108,134]),new Ee(30,new Ae(13,115),new Ae(3,116)),new Ee(28,new Ae(2,46),new Ae(29,47)),new Ee(30,new Ae(42,24),new Ae(1,25)),new Ee(30,new Ae(23,15),new Ae(28,16))),new xe(32,Int32Array.from([6,34,60,86,112,138]),new Ee(30,new Ae(17,115)),new Ee(28,new Ae(10,46),new Ae(23,47)),new Ee(30,new Ae(10,24),new Ae(35,25)),new Ee(30,new Ae(19,15),new Ae(35,16))),new xe(33,Int32Array.from([6,30,58,86,114,142]),new Ee(30,new Ae(17,115),new Ae(1,116)),new Ee(28,new Ae(14,46),new Ae(21,47)),new Ee(30,new Ae(29,24),new Ae(19,25)),new Ee(30,new Ae(11,15),new Ae(46,16))),new xe(34,Int32Array.from([6,34,62,90,118,146]),new Ee(30,new Ae(13,115),new Ae(6,116)),new Ee(28,new Ae(14,46),new Ae(23,47)),new Ee(30,new Ae(44,24),new Ae(7,25)),new Ee(30,new Ae(59,16),new Ae(1,17))),new xe(35,Int32Array.from([6,30,54,78,102,126,150]),new Ee(30,new Ae(12,121),new Ae(7,122)),new Ee(28,new Ae(12,47),new Ae(26,48)),new Ee(30,new Ae(39,24),new Ae(14,25)),new Ee(30,new Ae(22,15),new Ae(41,16))),new xe(36,Int32Array.from([6,24,50,76,102,128,154]),new Ee(30,new Ae(6,121),new Ae(14,122)),new Ee(28,new Ae(6,47),new Ae(34,48)),new Ee(30,new Ae(46,24),new Ae(10,25)),new Ee(30,new Ae(2,15),new Ae(64,16))),new xe(37,Int32Array.from([6,28,54,80,106,132,158]),new Ee(30,new Ae(17,122),new Ae(4,123)),new Ee(28,new Ae(29,46),new Ae(14,47)),new Ee(30,new Ae(49,24),new Ae(10,25)),new Ee(30,new Ae(24,15),new Ae(46,16))),new xe(38,Int32Array.from([6,32,58,84,110,136,162]),new Ee(30,new Ae(4,122),new Ae(18,123)),new Ee(28,new Ae(13,46),new Ae(32,47)),new Ee(30,new Ae(48,24),new Ae(14,25)),new Ee(30,new Ae(42,15),new Ae(32,16))),new xe(39,Int32Array.from([6,26,54,82,110,138,166]),new Ee(30,new Ae(20,117),new Ae(4,118)),new Ee(28,new Ae(40,47),new Ae(7,48)),new Ee(30,new Ae(43,24),new Ae(22,25)),new Ee(30,new Ae(10,15),new Ae(67,16))),new xe(40,Int32Array.from([6,30,58,86,114,142,170]),new Ee(30,new Ae(19,118),new Ae(6,119)),new Ee(28,new Ae(18,47),new Ae(31,48)),new Ee(30,new Ae(34,24),new Ae(34,25)),new Ee(30,new Ae(20,15),new Ae(61,16)))],function(t){t[t["DATA_MASK_000"]=0]="DATA_MASK_000",t[t["DATA_MASK_001"]=1]="DATA_MASK_001",t[t["DATA_MASK_010"]=2]="DATA_MASK_010",t[t["DATA_MASK_011"]=3]="DATA_MASK_011",t[t["DATA_MASK_100"]=4]="DATA_MASK_100",t[t["DATA_MASK_101"]=5]="DATA_MASK_101",t[t["DATA_MASK_110"]=6]="DATA_MASK_110",t[t["DATA_MASK_111"]=7]="DATA_MASK_111"}($||($={}));class Ce{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let n=0;n<e;n++)for(let r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}Ce.values=new Map([[$.DATA_MASK_000,new Ce($.DATA_MASK_000,((t,e)=>0===(t+e&1)))],[$.DATA_MASK_001,new Ce($.DATA_MASK_001,((t,e)=>0===(1&t)))],[$.DATA_MASK_010,new Ce($.DATA_MASK_010,((t,e)=>e%3===0))],[$.DATA_MASK_011,new Ce($.DATA_MASK_011,((t,e)=>(t+e)%3===0))],[$.DATA_MASK_100,new Ce($.DATA_MASK_100,((t,e)=>0===(Math.floor(t/2)+Math.floor(e/3)&1)))],[$.DATA_MASK_101,new Ce($.DATA_MASK_101,((t,e)=>t*e%6===0))],[$.DATA_MASK_110,new Ce($.DATA_MASK_110,((t,e)=>t*e%6<3))],[$.DATA_MASK_111,new Ce($.DATA_MASK_111,((t,e)=>0===(t+e+t*e%3&1)))]]);class Te{constructor(t){const e=t.getHeight();if(e<21||1!==(3&e))throw new E;this.bitMatrix=t}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let i=0;i<6;i++)t=this.copyBit(i,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let i=5;i>=0;i--)t=this.copyBit(8,i,t);const e=this.bitMatrix.getHeight();let n=0;const r=e-7;for(let i=e-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=e-8;i<e;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Se.decodeFormatInformation(t,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new E}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return xe.getVersionForNumber(e);let n=0;const r=t-11;for(let o=5;o>=0;o--)for(let e=t-9;e>=r;e--)n=this.copyBit(e,o,n);let i=xe.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let e=t-9;e>=r;e--)n=this.copyBit(o,e,n);if(i=xe.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;throw new E}copyBit(t,e,n){const r=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return r?n<<1|1:n<<1}readCodewords(){const t=this.readFormatInformation(),e=this.readVersion(),n=Ce.values.get(t.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=e.buildFunctionPattern();let o=!0;const s=new Uint8Array(e.getTotalCodewords());let a=0,l=0,c=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let t=0;t<r;t++){const e=o?r-1-t:t;for(let t=0;t<2;t++)i.get(u-t,e)||(c++,l<<=1,this.bitMatrix.get(u-t,e)&&(l|=1),8===c&&(s[a++]=l,c=0,l=0))}o=!o}if(a!==e.getTotalCodewords())throw new E;return s}remask(){if(null===this.parsedFormatInfo)return;const t=Ce.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let e=0,n=t.getWidth();e<n;e++)for(let r=e+1,i=t.getHeight();r<i;r++)t.get(e,r)!==t.get(r,e)&&(t.flip(r,e),t.flip(e,r))}}class Me{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,n){if(t.length!==e.getTotalCodewords())throw new h;const r=e.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const h of o)i+=h.getCount();const s=new Array(i);let a=0;for(const h of o)for(let t=0;t<h.getCount();t++){const t=h.getDataCodewords(),e=r.getECCodewordsPerBlock()+t;s[a++]=new Me(t,new Uint8Array(e))}const l=s[0].codewords.length;let c=s.length-1;while(c>=0){const t=s[c].codewords.length;if(t===l)break;c--}c++;const u=l-r.getECCodewordsPerBlock();let d=0;for(let h=0;h<u;h++)for(let e=0;e<a;e++)s[e].codewords[h]=t[d++];for(let h=c;h<a;h++)s[h].codewords[u]=t[d++];const f=s[0].codewords.length;for(let h=u;h<f;h++)for(let e=0;e<a;e++){const n=e<c?h:h+1;s[e].codewords[n]=t[d++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(function(t){t[t["TERMINATOR"]=0]="TERMINATOR",t[t["NUMERIC"]=1]="NUMERIC",t[t["ALPHANUMERIC"]=2]="ALPHANUMERIC",t[t["STRUCTURED_APPEND"]=3]="STRUCTURED_APPEND",t[t["BYTE"]=4]="BYTE",t[t["ECI"]=5]="ECI",t[t["KANJI"]=6]="KANJI",t[t["FNC1_FIRST_POSITION"]=7]="FNC1_FIRST_POSITION",t[t["FNC1_SECOND_POSITION"]=8]="FNC1_SECOND_POSITION",t[t["HANZI"]=9]="HANZI"})(q||(q={}));class Ie{constructor(t,e,n,r){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=n,this.bits=r,Ie.FOR_BITS.set(r,this),Ie.FOR_VALUE.set(t,this)}static forBits(t){const e=Ie.FOR_BITS.get(t);if(void 0===e)throw new h;return e}getCharacterCountBits(t){const e=t.getVersionNumber();let n;return n=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ie))return!1;const e=t;return this.value===e.value}toString(){return this.stringValue}}Ie.FOR_BITS=new Map,Ie.FOR_VALUE=new Map,Ie.TERMINATOR=new Ie(q.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ie.NUMERIC=new Ie(q.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ie.ALPHANUMERIC=new Ie(q.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ie.STRUCTURED_APPEND=new Ie(q.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ie.BYTE=new Ie(q.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ie.ECI=new Ie(q.ECI,"ECI",Int32Array.from([0,0,0]),7),Ie.KANJI=new Ie(q.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ie.FNC1_FIRST_POSITION=new Ie(q.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ie.FNC1_SECOND_POSITION=new Ie(q.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ie.HANZI=new Ie(q.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ke{static decode(t,e,n,r){const i=new me(t);let o=new M;const s=new Array;let a=-1,l=-1;try{let t,n=null,c=!1;do{if(i.available()<4)t=Ie.TERMINATOR;else{const e=i.readBits(4);t=Ie.forBits(e)}switch(t){case Ie.TERMINATOR:break;case Ie.FNC1_FIRST_POSITION:case Ie.FNC1_SECOND_POSITION:c=!0;break;case Ie.STRUCTURED_APPEND:if(i.available()<16)throw new E;a=i.readBits(8),l=i.readBits(8);break;case Ie.ECI:const u=ke.parseECIValue(i);if(n=A.getCharacterSetECIByValue(u),null===n)throw new E;break;case Ie.HANZI:const h=i.readBits(4),d=i.readBits(t.getCharacterCountBits(e));h===ke.GB2312_SUBSET&&ke.decodeHanziSegment(i,o,d);break;default:const f=i.readBits(t.getCharacterCountBits(e));switch(t){case Ie.NUMERIC:ke.decodeNumericSegment(i,o,f);break;case Ie.ALPHANUMERIC:ke.decodeAlphanumericSegment(i,o,f,c);break;case Ie.BYTE:ke.decodeByteSegment(i,o,f,n,s,r);break;case Ie.KANJI:ke.decodeKanjiSegment(i,o,f);break;default:throw new E}break}}while(t!==Ie.TERMINATOR)}catch(c){throw new E}return new Z(t,o.toString(),0===s.length?null:s,null===n?null:n.toString(),a,l)}static decodeHanziSegment(t,e,n){if(13*n>t.available())throw new E;const r=new Uint8Array(2*n);let i=0;while(n>0){const e=t.readBits(13);let o=e/96<<8&4294967295|e%96;o+=o<959?41377:42657,r[i]=o>>8&255,r[i+1]=255&o,i+=2,n--}try{e.append(C.decode(r,T.GB2312))}catch(o){throw new E(o)}}static decodeKanjiSegment(t,e,n){if(13*n>t.available())throw new E;const r=new Uint8Array(2*n);let i=0;while(n>0){const e=t.readBits(13);let o=e/192<<8&4294967295|e%192;o+=o<7936?33088:49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{e.append(C.decode(r,T.SHIFT_JIS))}catch(o){throw new E(o)}}static decodeByteSegment(t,e,n,r,i,o){if(8*n>t.available())throw new E;const s=new Uint8Array(n);for(let c=0;c<n;c++)s[c]=t.readBits(8);let a;a=null===r?T.guessEncoding(s,o):r.getName();try{e.append(C.decode(s,a))}catch(l){throw new E(l)}i.push(s)}static toAlphaNumericChar(t){if(t>=ke.ALPHANUMERIC_CHARS.length)throw new E;return ke.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,n,r){const i=e.length();while(n>1){if(t.available()<11)throw new E;const r=t.readBits(11);e.append(ke.toAlphaNumericChar(Math.floor(r/45))),e.append(ke.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(t.available()<6)throw new E;e.append(ke.toAlphaNumericChar(t.readBits(6)))}if(r)for(let o=i;o<e.length();o++)"%"===e.charAt(o)&&(o<e.length()-1&&"%"===e.charAt(o+1)?e.deleteCharAt(o+1):e.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(t,e,n){while(n>=3){if(t.available()<10)throw new E;const r=t.readBits(10);if(r>=1e3)throw new E;e.append(ke.toAlphaNumericChar(Math.floor(r/100))),e.append(ke.toAlphaNumericChar(Math.floor(r/10)%10)),e.append(ke.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(t.available()<7)throw new E;const n=t.readBits(7);if(n>=100)throw new E;e.append(ke.toAlphaNumericChar(Math.floor(n/10))),e.append(ke.toAlphaNumericChar(n%10))}else if(1===n){if(t.available()<4)throw new E;const n=t.readBits(4);if(n>=10)throw new E;e.append(ke.toAlphaNumericChar(n))}}static parseECIValue(t){const e=t.readBits(8);if(0===(128&e))return 127&e;if(128===(192&e)){const n=t.readBits(8);return(63&e)<<8&4294967295|n}if(192===(224&e)){const n=t.readBits(16);return(31&e)<<16&4294967295|n}throw new E}}ke.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ke.GB2312_SUBSET=1;class Oe{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;const e=t[0];t[0]=t[2],t[2]=e}}class Re{constructor(){this.rsDecoder=new rt(tt.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(I.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){const n=new Te(t);let r=null;try{return this.decodeBitMatrixParser(n,e)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const t=this.decodeBitMatrixParser(n,e);return t.setOther(new Oe(!0)),t}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(t,e){const n=t.readVersion(),r=t.readFormatInformation().getErrorCorrectionLevel(),i=t.readCodewords(),o=Me.getDataBlocks(i,n,r);let s=0;for(const c of o)s+=c.getNumDataCodewords();const a=new Uint8Array(s);let l=0;for(const c of o){const t=c.getCodewords(),e=c.getNumDataCodewords();this.correctErrors(t,e);for(let n=0;n<e;n++)a[l++]=t[n]}return ke.decode(a,n,r,e)}correctErrors(t,e){const n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-e)}catch(r){throw new f}for(let i=0;i<e;i++)t[i]=n[i]}}class De extends at{constructor(t,e,n){super(t,e),this.estimatedModuleSize=n}aboutEquals(t,e,n){if(Math.abs(e-this.getY())<=t&&Math.abs(n-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,n){const r=(this.getX()+e)/2,i=(this.getY()+t)/2,o=(this.estimatedModuleSize+n)/2;return new De(r,i,o)}}class Ne{constructor(t,e,n,r,i,o,s){this.image=t,this.startX=e,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,e=this.height,n=this.width,r=t+n,i=this.startY+e/2,o=new Int32Array(3),s=this.image;for(let a=0;a<e;a++){const e=i+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;let n=t;while(n<r&&!s.get(n,e))n++;let l=0;while(n<r){if(s.get(n,e))if(1===l)o[1]++;else if(2===l){if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,n);if(null!==t)return t}o[0]=o[2],o[1]=1,o[2]=0,l=1}else o[++l]++;else 1===l&&l++,o[l]++;n++}if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,r);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new k}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){const e=this.moduleSize,n=e/2;for(let r=0;r<3;r++)if(Math.abs(e-t[r])>=n)return!1;return!0}crossCheckVertical(t,e,n,r){const i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=t;while(a>=0&&i.get(e,a)&&s[1]<=n)s[1]++,a--;if(a<0||s[1]>n)return NaN;while(a>=0&&!i.get(e,a)&&s[0]<=n)s[0]++,a--;if(s[0]>n)return NaN;a=t+1;while(a<o&&i.get(e,a)&&s[1]<=n)s[1]++,a++;if(a===o||s[1]>n)return NaN;while(a<o&&!i.get(e,a)&&s[2]<=n)s[2]++,a++;if(s[2]>n)return NaN;const l=s[0]+s[1]+s[2];return 5*Math.abs(l-r)>=2*r?NaN:this.foundPatternCross(s)?Ne.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,n){const r=t[0]+t[1]+t[2],i=Ne.centerFromEnd(t,n),o=this.crossCheckVertical(e,i,2*t[1],r);if(!isNaN(o)){const e=(t[0]+t[1]+t[2])/3;for(const t of this.possibleCenters)if(t.aboutEquals(e,o,i))return t.combineEstimate(o,i,e);const n=new De(i,o,e);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Pe extends at{constructor(t,e,n,r){super(t,e),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,n){if(Math.abs(e-this.getY())<=t&&Math.abs(n-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,n){const r=this.count+1,i=(this.count*this.getX()+e)/r,o=(this.count*this.getY()+t)/r,s=(this.count*this.estimatedModuleSize+n)/r;return new Pe(i,o,s,r)}}class Le{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Be{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const e=null!==t&&void 0!==t&&void 0!==t.get(S.TRY_HARDER),n=null!==t&&void 0!==t&&void 0!==t.get(S.PURE_BARCODE),r=this.image,i=r.getHeight(),o=r.getWidth();let s=Math.floor(3*i/(4*Be.MAX_MODULES));(s<Be.MIN_SKIP||e)&&(s=Be.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let u=s-1;u<i&&!a;u+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let t=0;for(let e=0;e<o;e++)if(r.get(e,u))1===(1&t)&&t++,l[t]++;else if(0===(1&t))if(4===t)if(Be.foundPatternCross(l)){const r=this.handlePossibleCenter(l,u,e,n);if(!0!==r){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const t=this.findRowSkip();t>l[2]&&(u+=t-l[2]-s,e=o-1)}t=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,t=3;else l[++t]++;else l[t]++;if(Be.foundPatternCross(l)){const t=this.handlePossibleCenter(l,u,o,n);!0===t&&(s=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}}const c=this.selectBestPatterns();return at.orderBestPatterns(c),new Le(c)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let i=0;i<5;i++){const n=t[i];if(0===n)return!1;e+=n}if(e<7)return!1;const n=e/7,r=n/2;return Math.abs(n-t[0])<r&&Math.abs(n-t[1])<r&&Math.abs(3*n-t[2])<3*r&&Math.abs(n-t[3])<r&&Math.abs(n-t[4])<r}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,n,r){const i=this.getCrossCheckStateCount();let o=0;const s=this.image;while(t>=o&&e>=o&&s.get(e-o,t-o))i[2]++,o++;if(t<o||e<o)return!1;while(t>=o&&e>=o&&!s.get(e-o,t-o)&&i[1]<=n)i[1]++,o++;if(t<o||e<o||i[1]>n)return!1;while(t>=o&&e>=o&&s.get(e-o,t-o)&&i[0]<=n)i[0]++,o++;if(i[0]>n)return!1;const a=s.getHeight(),l=s.getWidth();o=1;while(t+o<a&&e+o<l&&s.get(e+o,t+o))i[2]++,o++;if(t+o>=a||e+o>=l)return!1;while(t+o<a&&e+o<l&&!s.get(e+o,t+o)&&i[3]<n)i[3]++,o++;if(t+o>=a||e+o>=l||i[3]>=n)return!1;while(t+o<a&&e+o<l&&s.get(e+o,t+o)&&i[4]<n)i[4]++,o++;if(i[4]>=n)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-r)<2*r&&Be.foundPatternCross(i)}crossCheckVertical(t,e,n,r){const i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount();let a=t;while(a>=0&&i.get(e,a))s[2]++,a--;if(a<0)return NaN;while(a>=0&&!i.get(e,a)&&s[1]<=n)s[1]++,a--;if(a<0||s[1]>n)return NaN;while(a>=0&&i.get(e,a)&&s[0]<=n)s[0]++,a--;if(s[0]>n)return NaN;a=t+1;while(a<o&&i.get(e,a))s[2]++,a++;if(a===o)return NaN;while(a<o&&!i.get(e,a)&&s[3]<n)s[3]++,a++;if(a===o||s[3]>=n)return NaN;while(a<o&&i.get(e,a)&&s[4]<n)s[4]++,a++;if(s[4]>=n)return NaN;const l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-r)>=2*r?NaN:Be.foundPatternCross(s)?Be.centerFromEnd(s,a):NaN}crossCheckHorizontal(t,e,n,r){const i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount();let a=t;while(a>=0&&i.get(a,e))s[2]++,a--;if(a<0)return NaN;while(a>=0&&!i.get(a,e)&&s[1]<=n)s[1]++,a--;if(a<0||s[1]>n)return NaN;while(a>=0&&i.get(a,e)&&s[0]<=n)s[0]++,a--;if(s[0]>n)return NaN;a=t+1;while(a<o&&i.get(a,e))s[2]++,a++;if(a===o)return NaN;while(a<o&&!i.get(a,e)&&s[3]<n)s[3]++,a++;if(a===o||s[3]>=n)return NaN;while(a<o&&i.get(a,e)&&s[4]<n)s[4]++,a++;if(s[4]>=n)return NaN;const l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-r)>=r?NaN:Be.foundPatternCross(s)?Be.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,n,r){const i=t[0]+t[1]+t[2]+t[3]+t[4];let o=Be.centerFromEnd(t,n),s=this.crossCheckVertical(e,Math.floor(o),t[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),t[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),t[2],i)))){const t=i/7;let e=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(t,s,o)){n[r]=i.combineEstimate(s,o,t),e=!0;break}}if(!e){const e=new Pe(o,s,t);n.push(e),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){const t=this.possibleCenters.length;if(t<=1)return 0;let e=null;for(const n of this.possibleCenters)if(n.getCount()>=Be.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-n.getX())-Math.abs(e.getY()-n.getY()))/2);e=n}return 0}haveMultiplyConfirmedCenters(){let t=0,e=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Be.CENTER_QUORUM&&(t++,e+=o.getEstimatedModuleSize());if(t<3)return!1;const r=e/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*e}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new k;const e=this.possibleCenters;let n;if(t>3){let r=0,i=0;for(const t of this.possibleCenters){const e=t.getEstimatedModuleSize();r+=e,i+=e*e}n=r/t;let o=Math.sqrt(i/t-n*n);e.sort(((t,e)=>{const r=Math.abs(e.getEstimatedModuleSize()-n),i=Math.abs(t.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0}));const s=Math.max(.2*n,o);for(let t=0;t<e.length&&e.length>3;t++){const r=e[t];Math.abs(r.getEstimatedModuleSize()-n)>s&&(e.splice(t,1),t--)}}if(e.length>3){let t=0;for(const n of e)t+=n.getEstimatedModuleSize();n=t/e.length,e.sort(((t,e)=>{if(e.getCount()===t.getCount()){const r=Math.abs(e.getEstimatedModuleSize()-n),i=Math.abs(t.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return e.getCount()-t.getCount()})),e.splice(3)}return[e[0],e[1],e[2]]}}Be.CENTER_QUORUM=2,Be.MIN_SKIP=3,Be.MAX_MODULES=57;class Ue{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null===t||void 0===t?null:t.get(S.NEED_RESULT_POINT_CALLBACK);const e=new Be(this.image,this.resultPointCallback),n=e.find(t);return this.processFinderPatternInfo(n)}processFinderPatternInfo(t){const e=t.getTopLeft(),n=t.getTopRight(),r=t.getBottomLeft(),i=this.calculateModuleSize(e,n,r);if(i<1)throw new k("No pattern found in proccess finder.");const o=Ue.computeDimension(e,n,r,i),s=xe.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7;let l=null;if(s.getAlignmentPatternCenters().length>0){const t=n.getX()-e.getX()+r.getX(),o=n.getY()-e.getY()+r.getY(),s=1-3/a,c=Math.floor(e.getX()+s*(t-e.getX())),u=Math.floor(e.getY()+s*(o-e.getY()));for(let e=4;e<=16;e<<=1)try{l=this.findAlignmentInRegion(i,c,u,e);break}catch(d){if(!(d instanceof k))throw d}}const c=Ue.createTransform(e,n,r,l,o),u=Ue.sampleGrid(this.image,c,o);let h;return h=null===l?[r,e,n]:[r,e,n,l],new lt(u,h)}static createTransform(t,e,n,r,i){const o=i-3.5;let s,a,l,c;return null!==r?(s=r.getX(),a=r.getY(),l=o-3,c=l):(s=e.getX()-t.getX()+n.getX(),a=e.getY()-t.getY()+n.getY(),l=o,c=o),dt.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,l,c,3.5,o,t.getX(),t.getY(),e.getX(),e.getY(),s,a,n.getX(),n.getY())}static sampleGrid(t,e,n){const r=pt.getInstance();return r.sampleGridWithTransform(t,n,n,e)}static computeDimension(t,e,n,r){const i=ot.round(at.distance(t,e)/r),o=ot.round(at.distance(t,n)/r);let s=Math.floor((i+o)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new k("Dimensions could be not found.")}return s}calculateModuleSize(t,e,n){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,n))/2}calculateModuleSizeOneWay(t,e){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,n,r){let i=this.sizeOfBlackWhiteBlackRun(t,e,n,r),o=1,s=t-(n-t);s<0?(o=t/(t-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);let a=Math.floor(e-(r-e)*o);return o=1,a<0?(o=e/(e-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),s=Math.floor(t+(s-t)*o),i+=this.sizeOfBlackWhiteBlackRun(t,e,s,a),i-1}sizeOfBlackWhiteBlackRun(t,e,n,r){const i=Math.abs(r-e)>Math.abs(n-t);if(i){let i=t;t=e,e=i,i=n,n=r,r=i}const o=Math.abs(n-t),s=Math.abs(r-e);let a=-o/2;const l=t<n?1:-1,c=e<r?1:-1;let u=0;const h=n+l;for(let d=t,f=e;d!==h;d+=l){const n=i?f:d,l=i?d:f;if(1===u===this.image.get(n,l)){if(2===u)return ot.distance(d,f,t,e);u++}if(a+=s,a>0){if(f===r)break;f+=c,a-=o}}return 2===u?ot.distance(n+l,r,t,e):NaN}findAlignmentInRegion(t,e,n,r){const i=Math.floor(r*t),o=Math.max(0,e-i),s=Math.min(this.image.getWidth()-1,e+i);if(s-o<3*t)throw new k("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),l=Math.min(this.image.getHeight()-1,n+i);if(l-a<3*t)throw new k("Alignment bottom exceeds estimated module size.");const c=new Ne(this.image,o,a,s-o,l-a,t,this.resultPointCallback);return c.find()}}class Fe{constructor(){this.decoder=new Re}getDecoder(){return this.decoder}decode(t,e){let n,r;if(void 0!==e&&null!==e&&void 0!==e.get(S.PURE_BARCODE)){const i=Fe.extractPureBits(t.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,e),r=Fe.NO_POINTS}else{const i=new Ue(t.getBlackMatrix()).detect(e);n=this.decoder.decodeBitMatrix(i.getBits(),e),r=i.getPoints()}n.getOther()instanceof Oe&&n.getOther().applyMirroredCorrection(r);const i=new z(n.getText(),n.getRawBytes(),void 0,r,H.QR_CODE,void 0),o=n.getByteSegments();null!==o&&i.putMetadata(X.BYTE_SEGMENTS,o);const s=n.getECLevel();return null!==s&&i.putMetadata(X.ERROR_CORRECTION_LEVEL,s),n.hasStructuredAppend()&&(i.putMetadata(X.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(X.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(null===e||null===n)throw new k;const r=this.moduleSize(e,t);let i=e[1],o=n[1],s=e[0],a=n[0];if(s>=a||i>=o)throw new k;if(o-i!==a-s&&(a=s+(o-i),a>=t.getWidth()))throw new k;const l=Math.round((a-s+1)/r),c=Math.round((o-i+1)/r);if(l<=0||c<=0)throw new k;if(c!==l)throw new k;const u=Math.floor(r/2);i+=u,s+=u;const h=s+Math.floor((l-1)*r)-a;if(h>0){if(h>u)throw new k;s-=h}const d=i+Math.floor((c-1)*r)-o;if(d>0){if(d>u)throw new k;i-=d}const f=new I(l,c);for(let p=0;p<c;p++){const e=i+Math.floor(p*r);for(let n=0;n<l;n++)t.get(s+Math.floor(n*r),e)&&f.set(n,p)}return f}static moduleSize(t,e){const n=e.getHeight(),r=e.getWidth();let i=t[0],o=t[1],s=!0,a=0;while(i<r&&o<n){if(s!==e.get(i,o)){if(5===++a)break;s=!s}i++,o++}if(i===r||o===n)throw new k;return(i-t[0])/7}}Fe.NO_POINTS=new Array;class ze{PDF417Common(){}static getBitCountSum(t){return ot.sum(t)}static toIntArray(t){if(null==t||!t.length)return ze.EMPTY_INT_ARRAY;const e=new Int32Array(t.length);let n=0;for(const r of t)e[n++]=r;return e}static getCodeword(t){const e=v.binarySearch(ze.SYMBOL_TABLE,262143&t);return e<0?-1:(ze.CODEWORD_TABLE[e]-1)%ze.NUMBER_OF_CODEWORDS}}ze.NUMBER_OF_CODEWORDS=929,ze.MAX_CODEWORDS_IN_BARCODE=ze.NUMBER_OF_CODEWORDS-1,ze.MIN_ROWS_IN_BARCODE=3,ze.MAX_ROWS_IN_BARCODE=90,ze.MODULES_IN_CODEWORD=17,ze.MODULES_IN_STOP_PATTERN=18,ze.BARS_IN_MODULE=8,ze.EMPTY_INT_ARRAY=new Int32Array([]),ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ve{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class He{static detectMultiple(t,e,n){let r=t.getBlackMatrix(),i=He.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=He.detect(n,r)),new Ve(r,i)}static detect(t,e){const n=new Array;let r=0,i=0,o=!1;while(r<e.getHeight()){const s=He.findVertices(e,r,i);if(null!=s[0]||null!=s[3]){if(o=!0,n.push(s),!t)break;null!=s[2]?(i=Math.trunc(s[2].getX()),r=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;for(const t of n)null!=t[1]&&(r=Math.trunc(Math.max(r,t[1].getY()))),null!=t[3]&&(r=Math.max(r,Math.trunc(t[3].getY())));r+=He.ROW_STEP}}return n}static findVertices(t,e,n){const r=t.getHeight(),i=t.getWidth(),o=new Array(8);return He.copyToResult(o,He.findRowsWithPattern(t,r,i,e,n,He.START_PATTERN),He.INDEXES_START_PATTERN),null!=o[4]&&(n=Math.trunc(o[4].getX()),e=Math.trunc(o[4].getY())),He.copyToResult(o,He.findRowsWithPattern(t,r,i,e,n,He.STOP_PATTERN),He.INDEXES_STOP_PATTERN),o}static copyToResult(t,e,n){for(let r=0;r<n.length;r++)t[n[r]]=e[r]}static findRowsWithPattern(t,e,n,r,i,o){const s=new Array(4);let a=!1;const l=new Int32Array(o.length);for(;r<e;r+=He.ROW_STEP){let e=He.findGuardPattern(t,i,r,n,!1,o,l);if(null!=e){while(r>0){const s=He.findGuardPattern(t,i,--r,n,!1,o,l);if(null==s){r++;break}e=s}s[0]=new at(e[0],r),s[1]=new at(e[1],r),a=!0;break}}let c=r+1;if(a){let r=0,i=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;c<e;c++){const e=He.findGuardPattern(t,i[0],c,n,!1,o,l);if(null!=e&&Math.abs(i[0]-e[0])<He.MAX_PATTERN_DRIFT&&Math.abs(i[1]-e[1])<He.MAX_PATTERN_DRIFT)i=e,r=0;else{if(r>He.SKIPPED_ROW_COUNT_MAX)break;r++}}c-=r+1,s[2]=new at(i[0],c),s[3]=new at(i[1],c)}return c-r<He.BARCODE_MIN_HEIGHT&&v.fill(s,null),s}static findGuardPattern(t,e,n,r,i,o,s){v.fillWithin(s,0,s.length,0);let a=e,l=0;while(t.get(a,n)&&a>0&&l++<He.MAX_PIXEL_DRIFT)a--;let c=a,u=0,h=o.length;for(let d=i;c<r;c++){let e=t.get(c,n);if(e!==d)s[u]++;else{if(u===h-1){if(He.patternMatchVariance(s,o,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return new Int32Array([a,c]);a+=s[0]+s[1],m.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,d=!d}}return u===h-1&&He.patternMatchVariance(s,o,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE?new Int32Array([a,c-1]):null}static patternMatchVariance(t,e,n){let r=t.length,i=0,o=0;for(let l=0;l<r;l++)i+=t[l],o+=e[l];if(i<o)return 1/0;let s=i/o;n*=s;let a=0;for(let l=0;l<r;l++){let r=t[l],i=e[l]*s,o=r>i?r-i:i-r;if(o>n)return 1/0;a+=o}return a/i}}He.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),He.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),He.MAX_AVG_VARIANCE=.42,He.MAX_INDIVIDUAL_VARIANCE=.8,He.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),He.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),He.MAX_PIXEL_DRIFT=3,He.MAX_PATTERN_DRIFT=5,He.SKIPPED_ROW_COUNT_MAX=25,He.ROW_STEP=5,He.BARCODE_MIN_HEIGHT=10;class je{constructor(t,e){if(0===e.length)throw new h;this.field=t;let n=e.length;if(n>1&&0===e[0]){let t=1;while(t<n&&0===e[t])t++;t===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-t),m.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)e=this.field.add(this.field.multiply(t,e),this.coefficients[r]);return e}add(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,n=t.coefficients;if(e.length>n.length){let t=e;e=n,n=t}let r=new Int32Array(n.length),i=n.length-e.length;m.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(e[o-i],n[o]);return new je(this.field,r)}subtract(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof je?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new je(this.field,new Int32Array([0]));let e=this.coefficients,n=e.length,r=t.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let s=0;s<n;s++){let t=e[s];for(let e=0;e<i;e++)o[s+e]=this.field.add(o[s+e],this.field.multiply(t,r[e]))}return new je(this.field,o)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let n=0;n<t;n++)e[n]=this.field.subtract(0,this.coefficients[n]);return new je(this.field,e)}multiplyScalar(t){if(0===t)return new je(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new je(this.field,n)}multiplyByMonomial(t,e){if(t<0)throw new h;if(0===e)return new je(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+t);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new je(this.field,r)}toString(){let t=new M;for(let e=this.getDegree();e>=0;e--){let n=this.getCoefficient(e);0!==n&&(n<0?(t.append(" - "),n=-n):t.length()>0&&t.append(" + "),0!==e&&1===n||t.append(n),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class We{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new h;return this.logTable[t]}inverse(t){if(0===t)throw new Q;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Ge extends We{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let n=1;for(let r=0;r<t;r++)this.expTable[r]=n,n=n*e%t;for(let r=0;r<t-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new je(this,new Int32Array([0])),this.one=new je(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new h;if(0===e)return this.zero;let n=new Int32Array(t+1);return n[0]=e,new je(this,n)}}Ge.PDF417_GF=new Ge(ze.NUMBER_OF_CODEWORDS,3);class $e{constructor(){this.field=Ge.PDF417_GF}decode(t,e,n){let r=new je(this.field,t),i=new Int32Array(e),o=!1;for(let f=e;f>0;f--){let t=r.evaluateAt(this.field.exp(f));i[e-f]=t,0!==t&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(null!=n)for(const f of n){let e=this.field.exp(t.length-1-f),n=new je(this.field,new Int32Array([this.field.subtract(0,e),1]));s=s.multiply(n)}let a=new je(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),c=l[0],u=l[1],h=this.findErrorLocations(c),d=this.findErrorMagnitudes(u,c,h);for(let p=0;p<h.length;p++){let e=t.length-1-this.field.log(h[p]);if(e<0)throw f.getChecksumInstance();t[e]=this.field.subtract(t[e],d[p])}return h.length}runEuclideanAlgorithm(t,e,n){if(t.getDegree()<e.getDegree()){let n=t;t=e,e=n}let r=t,i=e,o=this.field.getZero(),s=this.field.getOne();while(i.getDegree()>=Math.round(n/2)){let t=r,e=o;if(r=i,o=s,r.isZero())throw f.getChecksumInstance();i=t;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),l=this.field.inverse(a);while(i.getDegree()>=r.getDegree()&&!i.isZero()){let t=i.getDegree()-r.getDegree(),e=this.field.multiply(i.getCoefficient(i.getDegree()),l);n=n.add(this.field.buildMonomial(t,e)),i=i.subtract(r.multiplyByMonomial(t,e))}s=n.multiply(o).subtract(e).negative()}let a=s.getCoefficient(0);if(0===a)throw f.getChecksumInstance();let l=this.field.inverse(a),c=s.multiply(l),u=i.multiply(l);return[c,u]}findErrorLocations(t){let e=t.getDegree(),n=new Int32Array(e),r=0;for(let i=1;i<this.field.getSize()&&r<e;i++)0===t.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==e)throw f.getChecksumInstance();return n}findErrorMagnitudes(t,e,n){let r=e.getDegree(),i=new Int32Array(r);for(let l=1;l<=r;l++)i[r-l]=this.field.multiply(l,e.getCoefficient(l));let o=new je(this.field,i),s=n.length,a=new Int32Array(s);for(let l=0;l<s;l++){let e=this.field.inverse(n[l]),r=this.field.subtract(0,t.evaluateAt(e)),i=this.field.inverse(o.evaluateAt(e));a[l]=this.field.multiply(r,i)}return a}}class qe{constructor(t,e,n,r,i){t instanceof qe?this.constructor_2(t):this.constructor_1(t,e,n,r,i)}constructor_1(t,e,n,r,i){const o=null==e||null==n,s=null==r||null==i;if(o&&s)throw new k;o?(e=new at(0,r.getY()),n=new at(0,i.getY())):s&&(r=new at(t.getWidth()-1,e.getY()),i=new at(t.getWidth()-1,n.getY())),this.image=t,this.topLeft=e,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(e.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(e.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new qe(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(t>0){let e=n?this.topLeft:this.topRight,i=Math.trunc(e.getY()-t);i<0&&(i=0);let s=new at(e.getX(),i);n?r=s:o=s}if(e>0){let t=n?this.bottomLeft:this.bottomRight,r=Math.trunc(t.getY()+e);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let o=new at(t.getX(),r);n?i=o:s=o}return new qe(this.image,r,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ye{constructor(t,e,n,r){this.columnCount=t,this.errorCorrectionLevel=r,this.rowCountUpperPart=e,this.rowCountLowerPart=n,this.rowCount=e+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Xe{constructor(){this.buffer=""}static form(t,e){let n=-1;function r(t,r,i,o,s,a){if("%%"===t)return"%";if(void 0===e[++n])return;t=o?parseInt(o.substr(1)):void 0;let l,c=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=e[n];break;case"c":l=e[n][0];break;case"f":l=parseFloat(e[n]).toFixed(t);break;case"p":l=parseFloat(e[n]).toPrecision(t);break;case"e":l=parseFloat(e[n]).toExponential(t);break;case"x":l=parseInt(e[n]).toString(c||16);break;case"d":l=parseFloat(parseInt(e[n],c||10).toPrecision(t)).toFixed(0);break}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";while(l.length<u)l=void 0!==r?l+h:h+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,r)}format(t,...e){this.buffer+=Xe.form(t,e)}toString(){return this.buffer}}class Ze{constructor(t){this.boundingBox=new qe(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let n=1;n<Ze.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(t)-n;if(r>=0&&(e=this.codewords[r],null!=e))return e;if(r=this.imageRowToCodewordIndex(t)+n,r<this.codewords.length&&(e=this.codewords[r],null!=e))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Xe;let e=0;for(const n of this.codewords)null!=n?t.format("%3d: %3d|%3d%n",e++,n.getRowNumber(),n.getValue()):t.format("%3d:    |   %n",e++);return t.toString()}}Ze.MAX_NEARBY_DISTANCE=5;class Ke{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>t?(t=i.getValue(),e=[],e.push(i.getKey())):i.getValue()===t&&e.push(i.getKey())}return ze.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class Je extends Ze{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,c=0;for(let u=o;u<s;u++){if(null==e[u])continue;let n=e[u],r=n.getRowNumber()-a;if(0===r)c++;else if(1===r)l=Math.max(l,c),c=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=t.getRowCount()||r>u)e[u]=null;else{let t;t=l>2?(l-2)*r:r;let i=t>=u;for(let n=1;n<=t&&!i;n++)i=null!=e[u-n];i?e[u]=null:(a=n.getRowNumber(),c=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let n of this.getCodewords())if(null!=n){let t=n.getRowNumber();if(t>=e.length)continue;e[t]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),n=this._isLeft?e.getTopLeft():e.getTopRight(),r=this._isLeft?e.getBottomLeft():e.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.getCodewords(),a=-1;for(let l=i;l<o;l++){if(null==s[l])continue;let e=s[l];e.setRowNumberAsRowIndicatorColumn();let n=e.getRowNumber()-a;0===n||(1===n?a=e.getRowNumber():e.getRowNumber()>=t.getRowCount()?s[l]=null:a=e.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new Ke,n=new Ke,r=new Ke,i=new Ke;for(let s of t){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let t=s.getValue()%30,o=s.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:n.setValue(3*t+1);break;case 1:i.setValue(t/3),r.setValue(t%3);break;case 2:e.setValue(t+1);break}}if(0===e.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||e.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ze.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ze.MAX_ROWS_IN_BARCODE)return null;let o=new Ye(e.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(t,o),o}removeIncorrectCodewords(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(null==t[n])continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>e.getRowCount())t[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==e.getRowCountUpperPart()&&(t[n]=null);break;case 1:Math.trunc(i/3)===e.getErrorCorrectionLevel()&&i%3===e.getRowCountLowerPart()||(t[n]=null);break;case 2:i+1!==e.getColumnCount()&&(t[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Qe{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=ze.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let n=0;n<t.length;n++)null!=t[n]&&(t[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,t))}return t}adjustRowNumbersByRow(){this.adjustRowNumbersFromBothRI();let t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++)if(null!=t[n]&&null!=e[n]&&t[n].getRowNumber()===e[n].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let r=this.detectionResultColumns[e].getCodewords()[n];null!=r&&(r.setRowNumber(t[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++){if(null==e[n])continue;let r=e[n].getRowNumber(),i=0;for(let e=this.barcodeColumnCount+1;e>0&&i<this.ADJUST_ROW_NUMBER_SKIP;e--){let o=this.detectionResultColumns[e].getCodewords()[n];null!=o&&(i=Qe.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let n=0;n<e.length;n++){if(null==e[n])continue;let r=e[n].getRowNumber(),i=0;for(let e=1;e<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;e++){let o=this.detectionResultColumns[e].getCodewords()[n];null!=o&&(i=Qe.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,e,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(t)?(n.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,n){if(!this.detectionResultColumns[t-1])return;let r=n[e],i=this.detectionResultColumns[t-1].getCodewords(),o=i;null!=this.detectionResultColumns[t+1]&&(o=this.detectionResultColumns[t+1].getCodewords());let s=new Array(14);s[2]=i[e],s[3]=o[e],e>0&&(s[0]=n[e-1],s[4]=i[e-1],s[5]=o[e-1]),e>1&&(s[8]=n[e-2],s[10]=i[e-2],s[11]=o[e-2]),e<n.length-1&&(s[1]=n[e+1],s[6]=i[e+1],s[7]=o[e+1]),e<n.length-2&&(s[9]=n[e+2],s[12]=i[e+2],s[13]=o[e+2]);for(let a of s)if(Qe.adjustRowNumber(r,a))return}static adjustRowNumber(t,e){return null!=e&&(!(!e.hasValidRowNumber()||e.getBucket()!==t.getBucket())&&(t.setRowNumber(e.getRowNumber()),!0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new Xe;for(let n=0;n<t.getCodewords().length;n++){e.format("CW %3d:",n);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let r=this.detectionResultColumns[t].getCodewords()[n];null!=r?e.format(" %3d|%3d",r.getRowNumber(),r.getValue()):e.format("    |   ")}e.format("%n")}return e.toString()}}class tn{constructor(t,e,n,r){this.rowNumber=tn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==tn.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}tn.BARCODE_ROW_UNKNOWN=-1;class en{static initialize(){for(let t=0;t<ze.SYMBOL_TABLE.length;t++){let e=ze.SYMBOL_TABLE[t],n=1&e;for(let r=0;r<ze.BARS_IN_MODULE;r++){let i=0;while((1&e)===n)i+=1,e>>=1;n=1&e,en.RATIOS_TABLE[t]||(en.RATIOS_TABLE[t]=new Array(ze.BARS_IN_MODULE)),en.RATIOS_TABLE[t][ze.BARS_IN_MODULE-r-1]=Math.fround(i/ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=en.getDecodedCodewordValue(en.sampleBitCounts(t));return-1!==e?e:en.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=ot.sum(t),n=new Int32Array(ze.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<ze.MODULES_IN_CODEWORD;o++){let s=e/(2*ze.MODULES_IN_CODEWORD)+o*e/ze.MODULES_IN_CODEWORD;i+t[r]<=s&&(i+=t[r],r++),n[r]++}return n}static getDecodedCodewordValue(t){let e=en.getBitValue(t);return-1===ze.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let n=0;n<t.length;n++)for(let r=0;r<t[n];r++)e=e<<1|(n%2===0?1:0);return Math.trunc(e)}static getClosestDecodedValue(t){let e=ot.sum(t),n=new Array(ze.BARS_IN_MODULE);if(e>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(t[o]/e);let r=st.MAX_VALUE,i=-1;this.bSymbolTableReady||en.initialize();for(let o=0;o<en.RATIOS_TABLE.length;o++){let t=0,e=en.RATIOS_TABLE[o];for(let i=0;i<ze.BARS_IN_MODULE;i++){let o=Math.fround(e[i]-n[i]);if(t+=Math.fround(o*o),t>=r)break}t<r&&(r=t,i=ze.SYMBOL_TABLE[o])}return i}}en.bSymbolTableReady=!1,en.RATIOS_TABLE=new Array(ze.SYMBOL_TABLE.length).map((t=>new Array(ze.BARS_IN_MODULE)));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class rn{static parseLong(t,e=undefined){return parseInt(t,e)}}class on extends c{}on.kind="NullPointerException";class sn{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,n){if(null==t)throw new on;if(e<0||e>t.length||n<0||e+n>t.length||e+n<0)throw new g;if(0!==n)for(let r=0;r<n;r++)this.write(t[e+r])}flush(){}close(){}}class an extends c{}class ln extends sn{constructor(t=32){if(super(),this.count=0,t<0)throw new h("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length,n=e<<1;if(n-t<0&&(n=t),n<0){if(t<0)throw new an;n=w.MAX_VALUE}this.buf=v.copyOfUint8Array(this.buf,n)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,n){if(e<0||e>t.length||n<0||e+n-t.length>0)throw new g;this.ensureCapacity(this.count+n),m.arraycopy(t,e,this.buf,this.count,n),this.count+=n}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return v.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"===typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function cn(){if("undefined"!==typeof window)return window["BigInt"]||null;if("undefined"!==typeof n.g)return n.g["BigInt"]||null;if("undefined"!==typeof self)return self["BigInt"]||null;throw new Error("Can't search globals for BigInt!")}let un;function hn(t){if("undefined"===typeof un&&(un=cn()),null===un)throw new Error("BigInt is not supported!");return un(t)}function dn(){let t=[];t[0]=hn(1);let e=hn(900);t[1]=e;for(let n=2;n<16;n++)t[n]=t[n-1]*e;return t}(function(t){t[t["ALPHA"]=0]="ALPHA",t[t["LOWER"]=1]="LOWER",t[t["MIXED"]=2]="MIXED",t[t["PUNCT"]=3]="PUNCT",t[t["ALPHA_SHIFT"]=4]="ALPHA_SHIFT",t[t["PUNCT_SHIFT"]=5]="PUNCT_SHIFT"})(Y||(Y={}));class fn{static decode(t,e){let n=new M(""),r=A.ISO8859_1;n.enableDecoding(r);let i=1,o=t[i++],s=new nn;while(i<t[0]){switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(t,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(o,t,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(t,i,n);break;case fn.ECI_CHARSET:A.getCharacterSetECIByValue(t[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(t,i,s);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new E;default:i--,i=fn.textCompaction(t,i,n);break}if(!(i<t.length))throw E.getFormatInstance();o=t[i++]}if(0===n.length())throw E.getFormatInstance();let a=new Z(null,n.toString(),null,e);return a.setOther(s),a}static decodeMacroBlock(t,e,n){if(e+fn.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw E.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<fn.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)r[s]=t[e];n.setSegmentIndex(w.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new M;e=fn.textCompaction(t,e,i),n.setFileId(i.toString());let o=-1;t[e]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);while(e<t[0])switch(t[e]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new M;e=fn.textCompaction(t,e+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new M;e=fn.textCompaction(t,e+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new M;e=fn.textCompaction(t,e+1,o),n.setAddressee(o.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new M;e=fn.numericCompaction(t,e+1,s),n.setSegmentCount(w.parseInt(s.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new M;e=fn.numericCompaction(t,e+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new M;e=fn.numericCompaction(t,e+1,l),n.setChecksum(w.parseInt(l.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new M;e=fn.numericCompaction(t,e+1,c),n.setFileSize(rn.parseLong(c.toString()));break;default:throw E.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:e++,n.setLastSegment(!0);break;default:throw E.getFormatInstance()}if(-1!==o){let r=e-o;n.isLastSegment()&&r--,n.setOptionalData(v.copyOfRange(t,o,o+r))}return e}static textCompaction(t,e,n){let r=new Int32Array(2*(t[0]-e)),i=new Int32Array(2*(t[0]-e)),o=0,s=!1;while(e<t[0]&&!s){let n=t[e++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[o]=n/30,r[o+1]=n%30,o+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[o++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:e--,s=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=t[e++],i[o]=n,o++;break}}return fn.decodeTextCompaction(r,i,o,n),e}static decodeTextCompaction(t,e,n,r){let i=Y.ALPHA,o=Y.ALPHA,s=0;while(s<n){let n=t[s],a="";switch(i){case Y.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.LL:i=Y.LOWER;break;case fn.ML:i=Y.MIXED;break;case fn.PS:o=i,i=Y.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA;break}break;case Y.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case fn.AS:o=i,i=Y.ALPHA_SHIFT;break;case fn.ML:i=Y.MIXED;break;case fn.PS:o=i,i=Y.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA;break}break;case Y.MIXED:if(n<fn.PL)a=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=Y.PUNCT;break;case 26:a=" ";break;case fn.LL:i=Y.LOWER;break;case fn.AL:i=Y.ALPHA;break;case fn.PS:o=i,i=Y.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA;break}break;case Y.PUNCT:if(n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=Y.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA;break}break;case Y.ALPHA_SHIFT:if(i=o,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA;break}break;case Y.PUNCT_SHIFT:if(i=o,n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=Y.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA;break}break}""!==a&&r.append(a),s++}}static byteCompaction(t,e,n,r,i){let o=new ln,s=0,a=0,l=!1;switch(t){case fn.BYTE_COMPACTION_MODE_LATCH:let t=new Int32Array(6),n=e[r++];while(r<e[0]&&!l)switch(t[s++]=n,a=900*a+n,n=e[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break;default:if(s%5===0&&s>0){for(let t=0;t<6;++t)o.write(Number(hn(a)>>hn(8*(5-t))));a=0,s=0}break}r===e[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(t[s++]=n);for(let e=0;e<s;e++)o.write(t[e]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:while(r<e[0]&&!l){let t=e[r++];if(t<fn.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+t;else switch(t){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,l=!0;break}if(s%5===0&&s>0){for(let t=0;t<6;++t)o.write(Number(hn(a)>>hn(8*(5-t))));a=0,s=0}}break}return i.append(C.decode(o.toByteArray(),n)),r}static numericCompaction(t,e,n){let r=0,i=!1,o=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);while(e<t[0]&&!i){let s=t[e++];if(e===t[0]&&(i=!0),s<fn.TEXT_COMPACTION_MODE_LATCH)o[r]=s,r++;else switch(s){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:e--,i=!0;break}(r%fn.MAX_NUMERIC_CODEWORDS===0||s===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(o,r)),r=0)}return e}static decodeBase900toBase10(t,e){let n=hn(0);for(let i=0;i<e;i++)n+=fn.EXP900[e-i-1]*hn(t[i]);let r=n.toString();if("1"!==r.charAt(0))throw new E;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=cn()?dn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(t,e,n,r,i,o,s){let a,l=new qe(t,e,n,r,i),c=null,u=null;for(let f=!0;;f=!1){if(null!=e&&(c=pn.getRowIndicatorColumn(t,l,e,!0,o,s)),null!=r&&(u=pn.getRowIndicatorColumn(t,l,r,!1,o,s)),a=pn.merge(c,u),null==a)throw k.getNotFoundInstance();let n=a.getBoundingBox();if(!f||null==n||!(n.getMinY()<l.getMinY()||n.getMaxY()>l.getMaxY()))break;l=n}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,c),a.setDetectionResultColumn(h,u);let d=null!=c;for(let f=1;f<=h;f++){let e,n=d?f:h-f;if(void 0!==a.getDetectionResultColumn(n))continue;e=0===n||n===h?new Je(l,0===n):new Ze(l),a.setDetectionResultColumn(n,e);let r=-1,i=r;for(let c=l.getMinY();c<=l.getMaxY();c++){if(r=pn.getStartColumn(a,n,c,d),r<0||r>l.getMaxX()){if(-1===i)continue;r=i}let u=pn.detectCodeword(t,l.getMinX(),l.getMaxX(),d,r,c,o,s);null!=u&&(e.setCodeword(c,u),i=r,o=Math.min(o,u.getWidth()),s=Math.max(s,u.getWidth()))}}return pn.createDecoderResult(a)}static merge(t,e){if(null==t&&null==e)return null;let n=pn.getBarcodeMetadata(t,e);if(null==n)return null;let r=qe.merge(pn.adjustBoundingBox(t),pn.adjustBoundingBox(e));return new Qe(n,r)}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let n=pn.getMax(e),r=0;for(let s of e)if(r+=n-s,s>0)break;let i=t.getCodewords();for(let s=0;r>0&&null==i[s];s++)r--;let o=0;for(let s=e.length-1;s>=0;s--)if(o+=n-e[s],e[s]>0)break;for(let s=i.length-1;o>0&&null==i[s];s--)o--;return t.getBoundingBox().addMissingRows(r,o,t.isLeft())}static getMax(t){let e=-1;for(let n of t)e=Math.max(e,n);return e}static getBarcodeMetadata(t,e){let n,r;return null==t||null==(n=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(r=e.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(t,e,n,r,i,o){let s=new Je(e,r);for(let a=0;a<2;a++){let l=0===a?1:-1,c=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=e.getMaxY()&&a>=e.getMinY();a+=l){let e=pn.detectCodeword(t,0,t.getWidth(),r,c,a,i,o);null!=e&&(s.setCodeword(a,e),c=r?e.getStartX():e.getEndX())}}return s}static adjustCodewordCount(t,e){let n=e[0][1],r=n.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-pn.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===r.length){if(i<1||i>ze.MAX_CODEWORDS_IN_BARCODE)throw k.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(t){let e=pn.createBarcodeMatrix(t);pn.adjustCodewordCount(t,e);let n=new Array,r=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],o=new Array;for(let a=0;a<t.getBarcodeRowCount();a++)for(let s=0;s<t.getBarcodeColumnCount();s++){let l=e[a][s+1].getValue(),c=a*t.getBarcodeColumnCount()+s;0===l.length?n.push(c):1===l.length?r[c]=l[0]:(o.push(c),i.push(l))}let s=new Array(i.length);for(let a=0;a<s.length;a++)s[a]=i[a];return pn.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),r,ze.toIntArray(n),ze.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(t,e,n,r,i){let o=new Int32Array(r.length),s=100;while(s-- >0){for(let t=0;t<o.length;t++)e[r[t]]=i[t][o[t]];try{return pn.decodeCodewords(e,t,n)}catch(a){let t=a instanceof f;if(!t)throw a}if(0===o.length)throw f.getChecksumInstance();for(let t=0;t<o.length;t++){if(o[t]<i[t].length-1){o[t]++;break}if(o[t]=0,t===o.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},(()=>new Array(t.getBarcodeColumnCount()+2)));for(let r=0;r<e.length;r++)for(let t=0;t<e[r].length;t++)e[r][t]=new Ke;let n=0;for(let r of t.getDetectionResultColumns()){if(null!=r)for(let t of r.getCodewords())if(null!=t){let r=t.getRowNumber();if(r>=0){if(r>=e.length)continue;e[r][n].setValue(t.getValue())}}n++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,n,r){let i=r?1:-1,o=null;if(pn.isValidBarcodeColumn(t,e-i)&&(o=t.getDetectionResultColumn(e-i).getCodeword(n)),null!=o)return r?o.getEndX():o.getStartX();if(o=t.getDetectionResultColumn(e).getCodewordNearby(n),null!=o)return r?o.getStartX():o.getEndX();if(pn.isValidBarcodeColumn(t,e-i)&&(o=t.getDetectionResultColumn(e-i).getCodewordNearby(n)),null!=o)return r?o.getEndX():o.getStartX();let s=0;while(pn.isValidBarcodeColumn(t,e-i)){e-=i;for(let n of t.getDetectionResultColumn(e).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*s*(n.getEndX()-n.getStartX());s++}return r?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,n,r,i,o,s,a){i=pn.adjustCodewordStartColumn(t,e,n,r,i,o);let l,c=pn.getModuleBitCount(t,e,n,r,i,o);if(null==c)return null;let u=ot.sum(c);if(r)l=i+u;else{for(let t=0;t<c.length/2;t++){let e=c[t];c[t]=c[c.length-1-t],c[c.length-1-t]=e}l=i,i=l-u}if(!pn.checkCodewordSkew(u,s,a))return null;let h=en.getDecodedValue(c),d=ze.getCodeword(h);return-1===d?null:new tn(i,l,pn.getCodewordBucketNumber(h),d)}static getModuleBitCount(t,e,n,r,i,o){let s=i,a=new Int32Array(8),l=0,c=r?1:-1,u=r;while((r?s<n:s>=e)&&l<a.length)t.get(s,o)===u?(a[l]++,s+=c):(l++,u=!u);return l===a.length||s===(r?n:e)&&l===a.length-1?a:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,n,r,i,o){let s=i,a=r?-1:1;for(let l=0;l<2;l++){while((r?s>=e:s<n)&&r===t.get(s,o)){if(Math.abs(i-s)>pn.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,r=!r}return s}static checkCodewordSkew(t,e,n){return e-pn.CODEWORD_SKEW_SIZE<=t&&t<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,n){if(0===t.length)throw E.getFormatInstance();let r=1<<e+1,i=pn.correctErrors(t,n,r);pn.verifyCodewordCount(t,r);let o=fn.decode(t,""+e);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(t,e,n){if(null!=e&&e.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(t,n,e)}static verifyCodewordCount(t,e){if(t.length<4)throw E.getFormatInstance();let n=t[0];if(n>t.length)throw E.getFormatInstance();if(0===n){if(!(e<t.length))throw E.getFormatInstance();t[0]=t.length-e}}static getBitCountForCodeword(t){let e=new Int32Array(8),n=0,r=e.length-1;while(1){if((1&t)!==n&&(n=1&t,r--,r<0))break;e[r]++,t>>=1}return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new Xe;for(let n=0;n<t.length;n++){e.format("Row %2d: ",n);for(let r=0;r<t[n].length;r++){let i=t[n][r];0===i.getValue().length?e.format("        ",null):e.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}e.format("%n")}return e.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new $e;class mn{decode(t,e=null){let n=mn.decode(t,e,!1);if(null==n||0===n.length||null==n[0])throw k.getNotFoundInstance();return n[0]}decodeMultiple(t,e=null){try{return mn.decode(t,e,!0)}catch(n){if(n instanceof E||n instanceof f)throw k.getNotFoundInstance();throw n}}static decode(t,e,n){const r=new Array,i=He.detectMultiple(t,e,n);for(const o of i.getPoints()){const t=pn.decode(i.getBits(),o[4],o[5],o[6],o[7],mn.getMinCodewordWidth(o),mn.getMaxCodewordWidth(o)),e=new z(t.getText(),t.getRawBytes(),void 0,o,H.PDF_417);e.putMetadata(X.ERROR_CORRECTION_LEVEL,t.getECLevel());const n=t.getOther();null!=n&&e.putMetadata(X.PDF417_EXTRA_METADATA,n),r.push(e)}return r.map((t=>t))}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?w.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(mn.getMaxWidth(t[0],t[4]),mn.getMaxWidth(t[6],t[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.max(mn.getMaxWidth(t[1],t[5]),mn.getMaxWidth(t[7],t[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(mn.getMinWidth(t[0],t[4]),mn.getMinWidth(t[6],t[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.min(mn.getMinWidth(t[1],t[5]),mn.getMinWidth(t[7],t[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class gn extends c{}gn.kind="ReaderException";class yn{constructor(t,e){this.verbose=!0===t,e&&this.setHints(e)}decode(t,e){return e&&this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const n=!e(t)&&!0===t.get(S.TRY_HARDER),r=e(t)?null:t.get(S.POSSIBLE_FORMATS),i=new Array;if(!e(r)){const e=r.some((t=>t===H.UPC_A||t===H.UPC_E||t===H.EAN_13||t===H.EAN_8||t===H.CODABAR||t===H.CODE_39||t===H.CODE_93||t===H.CODE_128||t===H.ITF||t===H.RSS_14||t===H.RSS_EXPANDED));e&&!n&&i.push(new le(t,this.verbose)),r.includes(H.QR_CODE)&&i.push(new Fe),r.includes(H.DATA_MATRIX)&&i.push(new we),r.includes(H.AZTEC)&&i.push(new yt),r.includes(H.PDF_417)&&i.push(new mn),e&&n&&i.push(new le(t,this.verbose))}0===i.length&&(n||i.push(new le(t,this.verbose)),i.push(new Fe),i.push(new we),i.push(new yt),i.push(new mn),n&&i.push(new le(t,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new gn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(t,this.hints)}catch(e){if(e instanceof gn)continue}throw new k("No MultiFormat Readers were able to detect the code.")}}class vn extends F{constructor(t=null,e=500){const n=new yn;n.setHints(t),super(n,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class wn extends F{constructor(t=500){super(new mn,t)}}class bn extends F{constructor(t=500){super(new Fe,t)}}var _n;(function(t){t[t["ERROR_CORRECTION"]=0]="ERROR_CORRECTION",t[t["CHARACTER_SET"]=1]="CHARACTER_SET",t[t["DATA_MATRIX_SHAPE"]=2]="DATA_MATRIX_SHAPE",t[t["MIN_SIZE"]=3]="MIN_SIZE",t[t["MAX_SIZE"]=4]="MAX_SIZE",t[t["MARGIN"]=5]="MARGIN",t[t["PDF417_COMPACT"]=6]="PDF417_COMPACT",t[t["PDF417_COMPACTION"]=7]="PDF417_COMPACTION",t[t["PDF417_DIMENSIONS"]=8]="PDF417_DIMENSIONS",t[t["AZTEC_LAYERS"]=9]="AZTEC_LAYERS",t[t["QR_VERSION"]=10]="QR_VERSION"})(_n||(_n={}));var Sn=_n;class En{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new J(t,Int32Array.from([1])))}buildGenerator(t){const e=this.cachedGenerators;if(t>=e.length){let n=e[e.length-1];const r=this.field;for(let i=e.length;i<=t;i++){const t=n.multiply(new J(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));e.push(t),n=t}}return e[t]}encode(t,e){if(0===e)throw new h("No error correction bytes");const n=t.length-e;if(n<=0)throw new h("No data bytes provided");const r=this.buildGenerator(e),i=new Int32Array(n);m.arraycopy(t,0,i,0,n);let o=new J(this.field,i);o=o.multiplyByMonomial(e,1);const s=o.divide(r)[1],a=s.getCoefficients(),l=e-a.length;for(let c=0;c<l;c++)t[n+c]=0;m.arraycopy(a,0,t,n+l,a.length)}}class An{constructor(){}static applyMaskPenaltyRule1(t){return An.applyMaskPenaltyRule1Internal(t,!0)+An.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0;const n=t.getArray(),r=t.getWidth(),i=t.getHeight();for(let o=0;o<i-1;o++){const t=n[o];for(let i=0;i<r-1;i++){const r=t[i];r===t[i+1]&&r===n[o+1][i]&&r===n[o+1][i+1]&&e++}}return An.N2*e}static applyMaskPenaltyRule3(t){let e=0;const n=t.getArray(),r=t.getWidth(),i=t.getHeight();for(let o=0;o<i;o++)for(let t=0;t<r;t++){const s=n[o];t+6<r&&1===s[t]&&0===s[t+1]&&1===s[t+2]&&1===s[t+3]&&1===s[t+4]&&0===s[t+5]&&1===s[t+6]&&(An.isWhiteHorizontal(s,t-4,t)||An.isWhiteHorizontal(s,t+7,t+11))&&e++,o+6<i&&1===n[o][t]&&0===n[o+1][t]&&1===n[o+2][t]&&1===n[o+3][t]&&1===n[o+4][t]&&0===n[o+5][t]&&1===n[o+6][t]&&(An.isWhiteVertical(n,t,o-4,o)||An.isWhiteVertical(n,t,o+7,o+11))&&e++}return e*An.N3}static isWhiteHorizontal(t,e,n){e=Math.max(e,0),n=Math.min(n,t.length);for(let r=e;r<n;r++)if(1===t[r])return!1;return!0}static isWhiteVertical(t,e,n,r){n=Math.max(n,0),r=Math.min(r,t.length);for(let i=n;i<r;i++)if(1===t[i][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0;const n=t.getArray(),r=t.getWidth(),i=t.getHeight();for(let a=0;a<i;a++){const t=n[a];for(let n=0;n<r;n++)1===t[n]&&e++}const o=t.getHeight()*t.getWidth(),s=Math.floor(10*Math.abs(2*e-o)/o);return s*An.N4}static getDataMaskBit(t,e,n){let r,i;switch(t){case 0:r=n+e&1;break;case 1:r=1&n;break;case 2:r=e%3;break;case 3:r=(n+e)%3;break;case 4:r=Math.floor(n/2)+Math.floor(e/3)&1;break;case 5:i=n*e,r=(1&i)+i%3;break;case 6:i=n*e,r=(1&i)+i%3&1;break;case 7:i=n*e,r=i%3+(n+e&1)&1;break;default:throw new h("Invalid mask pattern: "+t)}return 0===r}static applyMaskPenaltyRule1Internal(t,e){let n=0;const r=e?t.getHeight():t.getWidth(),i=e?t.getWidth():t.getHeight(),o=t.getArray();for(let s=0;s<r;s++){let t=0,r=-1;for(let a=0;a<i;a++){const i=e?o[s][a]:o[a][s];i===r?t++:(t>=5&&(n+=An.N1+(t-5)),t=1,r=i)}t>=5&&(n+=An.N1+(t-5))}return n}}An.N1=3,An.N2=3,An.N3=40,An.N4=10;class xn{constructor(t,e){this.width=t,this.height=e;const n=new Array(e);for(let r=0;r!==e;r++)n[r]=new Uint8Array(t);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,n){this.bytes[e][t]=n}setBoolean(t,e,n){this.bytes[e][t]=n?1:0}clear(t){for(const e of this.bytes)v.fill(e,t)}equals(t){if(!(t instanceof xn))return!1;const e=t;if(this.width!==e.width)return!1;if(this.height!==e.height)return!1;for(let n=0,r=this.height;n<r;++n){const t=this.bytes[n],r=e.bytes[n];for(let e=0,n=this.width;e<n;++e)if(t[e]!==r[e])return!1}return!0}toString(){const t=new M;for(let e=0,n=this.height;e<n;++e){const n=this.bytes[e];for(let e=0,r=this.width;e<r;++e)switch(n[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append("\n")}return t.toString()}}class Cn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new M;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Cn.NUM_MASK_PATTERNS}}Cn.NUM_MASK_PATTERNS=8;class Tn extends c{}Tn.kind="WriterException";class Mn{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,n,r,i){Mn.clearMatrix(i),Mn.embedBasicPatterns(n,i),Mn.embedTypeInfo(e,r,i),Mn.maybeEmbedVersionInfo(n,i),Mn.embedDataBits(t,r,i)}static embedBasicPatterns(t,e){Mn.embedPositionDetectionPatternsAndSeparators(e),Mn.embedDarkDotAtLeftBottomCorner(e),Mn.maybeEmbedPositionAdjustmentPatterns(t,e),Mn.embedTimingPatterns(e)}static embedTypeInfo(t,e,n){const r=new b;Mn.makeTypeInfoBits(t,e,r);for(let i=0,o=r.getSize();i<o;++i){const t=r.get(r.getSize()-1-i),e=Mn.TYPE_INFO_COORDINATES[i],o=e[0],s=e[1];if(n.setBoolean(o,s,t),i<8){const e=n.getWidth()-i-1,r=8;n.setBoolean(e,r,t)}else{const e=8,r=n.getHeight()-7+(i-8);n.setBoolean(e,r,t)}}}static maybeEmbedVersionInfo(t,e){if(t.getVersionNumber()<7)return;const n=new b;Mn.makeVersionInfoBits(t,n);let r=17;for(let i=0;i<6;++i)for(let t=0;t<3;++t){const o=n.get(r);r--,e.setBoolean(i,e.getHeight()-11+t,o),e.setBoolean(e.getHeight()-11+t,i,o)}}static embedDataBits(t,e,n){let r=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;while(o>0){6===o&&(o-=1);while(s>=0&&s<n.getHeight()){for(let i=0;i<2;++i){const a=o-i;if(!Mn.isEmpty(n.get(a,s)))continue;let l;r<t.getSize()?(l=t.get(r),++r):l=!1,255!==e&&An.getDataMaskBit(e,a,s)&&(l=!l),n.setBoolean(a,s,l)}s+=i}i=-i,s+=i,o-=2}if(r!==t.getSize())throw new Tn("Not all bits consumed: "+r+"/"+t.getSize())}static findMSBSet(t){return 32-w.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new h("0 polynomial");const n=Mn.findMSBSet(e);t<<=n-1;while(Mn.findMSBSet(t)>=n)t^=e<<Mn.findMSBSet(t)-n;return t}static makeTypeInfoBits(t,e,n){if(!Cn.isValidMaskPattern(e))throw new Tn("Invalid mask pattern");const r=t.getBits()<<3|e;n.appendBits(r,5);const i=Mn.calculateBCHCode(r,Mn.TYPE_INFO_POLY);n.appendBits(i,10);const o=new b;if(o.appendBits(Mn.TYPE_INFO_MASK_PATTERN,15),n.xor(o),15!==n.getSize())throw new Tn("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);const n=Mn.calculateBCHCode(t.getVersionNumber(),Mn.VERSION_INFO_POLY);if(e.appendBits(n,12),18!==e.getSize())throw new Tn("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){const n=(e+1)%2;Mn.isEmpty(t.get(e,6))&&t.setNumber(e,6,n),Mn.isEmpty(t.get(6,e))&&t.setNumber(6,e,n)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new Tn;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,n){for(let r=0;r<8;++r){if(!Mn.isEmpty(n.get(t+r,e)))throw new Tn;n.setNumber(t+r,e,0)}}static embedVerticalSeparationPattern(t,e,n){for(let r=0;r<7;++r){if(!Mn.isEmpty(n.get(t,e+r)))throw new Tn;n.setNumber(t,e+r,0)}}static embedPositionAdjustmentPattern(t,e,n){for(let r=0;r<5;++r){const i=Mn.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(t+o,e+r,i[o])}}static embedPositionDetectionPattern(t,e,n){for(let r=0;r<7;++r){const i=Mn.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(t+o,e+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(t){const e=Mn.POSITION_DETECTION_PATTERN[0].length;Mn.embedPositionDetectionPattern(0,0,t),Mn.embedPositionDetectionPattern(t.getWidth()-e,0,t),Mn.embedPositionDetectionPattern(0,t.getWidth()-e,t);const n=8;Mn.embedHorizontalSeparationPattern(0,n-1,t),Mn.embedHorizontalSeparationPattern(t.getWidth()-n,n-1,t),Mn.embedHorizontalSeparationPattern(0,t.getWidth()-n,t);const r=7;Mn.embedVerticalSeparationPattern(r,0,t),Mn.embedVerticalSeparationPattern(t.getHeight()-r-1,0,t),Mn.embedVerticalSeparationPattern(r,t.getHeight()-r,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(t.getVersionNumber()<2)return;const n=t.getVersionNumber()-1,r=Mn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const t=r[i];if(t>=0)for(let n=0;n!==o;n++){const i=r[n];i>=0&&Mn.isEmpty(e.get(i,t))&&Mn.embedPositionAdjustmentPattern(i-2,t-2,e)}}}}Mn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Mn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Mn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Mn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Mn.VERSION_INFO_POLY=7973,Mn.TYPE_INFO_POLY=1335,Mn.TYPE_INFO_MASK_PATTERN=21522;class In{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kn{constructor(){}static calculateMaskPenalty(t){return An.applyMaskPenaltyRule1(t)+An.applyMaskPenaltyRule2(t)+An.applyMaskPenaltyRule3(t)+An.applyMaskPenaltyRule4(t)}static encode(t,e,n=null){let r=kn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(Sn.CHARACTER_SET);i&&(r=n.get(Sn.CHARACTER_SET).toString());const o=this.chooseMode(t,r),s=new b;if(o===Ie.BYTE&&(i||kn.DEFAULT_BYTE_MODE_ENCODING!==r)){const t=A.getCharacterSetECIByName(r);void 0!==t&&this.appendECI(t,s)}this.appendModeInfo(o,s);const a=new b;let l;if(this.appendBytes(t,o,a,r),null!==n&&void 0!==n.get(Sn.QR_VERSION)){const t=Number.parseInt(n.get(Sn.QR_VERSION).toString(),10);l=xe.getVersionForNumber(t);const r=this.calculateBitsNeeded(o,s,a,l);if(!this.willFit(r,l,e))throw new Tn("Data too big for requested version")}else l=this.recommendVersion(e,o,s,a);const c=new b;c.appendBitArray(s);const u=o===Ie.BYTE?a.getSizeInBytes():t.length;this.appendLengthInfo(u,l,o,c),c.appendBitArray(a);const h=l.getECBlocksForLevel(e),d=l.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),d,h.getNumBlocks()),p=new Cn;p.setECLevel(e),p.setMode(o),p.setVersion(l);const m=l.getDimensionForVersion(),g=new xn(m,m),y=this.chooseMaskPattern(f,e,l,g);return p.setMaskPattern(y),Mn.buildMatrix(f,e,l,y,g),p.setMatrix(g),p}static recommendVersion(t,e,n,r){const i=this.calculateBitsNeeded(e,n,r,xe.getVersionForNumber(1)),o=this.chooseVersion(i,t),s=this.calculateBitsNeeded(e,n,r,o);return this.chooseVersion(s,t)}static calculateBitsNeeded(t,e,n,r){return e.getSize()+t.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(t){return t<kn.ALPHANUMERIC_TABLE.length?kn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(A.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return Ie.KANJI;let n=!1,r=!1;for(let i=0,o=t.length;i<o;++i){const e=t.charAt(i);if(kn.isDigit(e))n=!0;else{if(-1===this.getAlphanumericCode(e.charCodeAt(0)))return Ie.BYTE;r=!0}}return r?Ie.ALPHANUMERIC:n?Ie.NUMERIC:Ie.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=C.encode(t,A.SJIS)}catch(r){return!1}const n=e.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const t=255&e[i];if((t<129||t>159)&&(t<224||t>235))return!1}return!0}static chooseMaskPattern(t,e,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<Cn.NUM_MASK_PATTERNS;s++){Mn.buildMatrix(t,e,n,s,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,o=s)}return o}static chooseVersion(t,e){for(let n=1;n<=40;n++){const r=xe.getVersionForNumber(n);if(kn.willFit(t,r,e))return r}throw new Tn("Data too big")}static willFit(t,e,n){const r=e.getTotalCodewords(),i=e.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=r-o,a=(t+7)/8;return s>=a}static terminateBits(t,e){const n=8*t;if(e.getSize()>n)throw new Tn("data bits cannot fit in the QR Code"+e.getSize()+" > "+n);for(let o=0;o<4&&e.getSize()<n;++o)e.appendBit(!1);const r=7&e.getSize();if(r>0)for(let o=r;o<8;o++)e.appendBit(!1);const i=t-e.getSizeInBytes();for(let o=0;o<i;++o)e.appendBits(0===(1&o)?236:17,8);if(e.getSize()!==n)throw new Tn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,n,r,i,o){if(r>=n)throw new Tn("Block ID too large");const s=t%n,a=n-s,l=Math.floor(t/n),c=l+1,u=Math.floor(e/n),h=u+1,d=l-u,f=c-h;if(d!==f)throw new Tn("EC bytes mismatch");if(n!==a+s)throw new Tn("RS blocks mismatch");if(t!==(u+d)*a+(h+f)*s)throw new Tn("Total bytes mismatch");r<a?(i[0]=u,o[0]=d):(i[0]=h,o[0]=f)}static interleaveWithECBytes(t,e,n,r){if(t.getSizeInBytes()!==n)throw new Tn("Number of bits and data bytes does not match");let i=0,o=0,s=0;const a=new Array;for(let c=0;c<r;++c){const l=new Int32Array(1),u=new Int32Array(1);kn.getNumDataBytesAndNumECBytesForBlockID(e,n,r,c,l,u);const h=l[0],d=new Uint8Array(h);t.toBytes(8*i,d,0,h);const f=kn.generateECBytes(d,u[0]);a.push(new In(d,f)),o=Math.max(o,h),s=Math.max(s,f.length),i+=l[0]}if(n!==i)throw new Tn("Data bytes does not match offset");const l=new b;for(let c=0;c<o;++c)for(const t of a){const e=t.getDataBytes();c<e.length&&l.appendBits(e[c],8)}for(let c=0;c<s;++c)for(const t of a){const e=t.getErrorCorrectionBytes();c<e.length&&l.appendBits(e[c],8)}if(e!==l.getSizeInBytes())throw new Tn("Interleaving error: "+e+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(t,e){const n=t.length,r=new Int32Array(n+e);for(let o=0;o<n;o++)r[o]=255&t[o];new En(tt.QR_CODE_FIELD_256).encode(r,e);const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=r[n+o];return i}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,n,r){const i=n.getCharacterCountBits(e);if(t>=1<<i)throw new Tn(t+" is bigger than "+((1<<i)-1));r.appendBits(t,i)}static appendBytes(t,e,n,r){switch(e){case Ie.NUMERIC:kn.appendNumericBytes(t,n);break;case Ie.ALPHANUMERIC:kn.appendAlphanumericBytes(t,n);break;case Ie.BYTE:kn.append8BitBytes(t,n,r);break;case Ie.KANJI:kn.appendKanjiBytes(t,n);break;default:throw new Tn("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const e=kn.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){const n=t.length;let r=0;while(r<n){const i=kn.getDigit(t.charAt(r));if(r+2<n){const n=kn.getDigit(t.charAt(r+1)),o=kn.getDigit(t.charAt(r+2));e.appendBits(100*i+10*n+o,10),r+=3}else if(r+1<n){const n=kn.getDigit(t.charAt(r+1));e.appendBits(10*i+n,7),r+=2}else e.appendBits(i,4),r++}}static appendAlphanumericBytes(t,e){const n=t.length;let r=0;while(r<n){const i=kn.getAlphanumericCode(t.charCodeAt(r));if(-1===i)throw new Tn;if(r+1<n){const n=kn.getAlphanumericCode(t.charCodeAt(r+1));if(-1===n)throw new Tn;e.appendBits(45*i+n,11),r+=2}else e.appendBits(i,6),r++}}static append8BitBytes(t,e,n){let r;try{r=C.encode(t,n)}catch(i){throw new Tn(i)}for(let o=0,s=r.length;o!==s;o++){const t=r[o];e.appendBits(t,8)}}static appendKanjiBytes(t,e){let n;try{n=C.encode(t,A.SJIS)}catch(i){throw new Tn(i)}const r=n.length;for(let o=0;o<r;o+=2){const t=255&n[o],r=255&n[o+1],i=t<<8&4294967295|r;let s=-1;if(i>=33088&&i<=40956?s=i-33088:i>=57408&&i<=60351&&(s=i-49472),-1===s)throw new Tn("Invalid byte sequence");const a=192*(s>>8)+(255&s);e.appendBits(a,13)}}static appendECI(t,e){e.appendBits(Ie.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}kn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kn.DEFAULT_BYTE_MODE_ENCODING=A.UTF8.getName();class On{write(t,e,n,r=null){if(0===t.length)throw new h("Found empty contents");if(e<0||n<0)throw new h("Requested dimensions are too small: "+e+"x"+n);let i=_e.L,o=On.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(Sn.ERROR_CORRECTION)&&(i=_e.fromString(r.get(Sn.ERROR_CORRECTION).toString())),void 0!==r.get(Sn.MARGIN)&&(o=Number.parseInt(r.get(Sn.MARGIN).toString(),10)));const s=kn.encode(t,i,r);return this.renderResult(s,e,n,o)}writeToDom(t,e,n,r,i=null){"string"===typeof t&&(t=document.querySelector(t));const o=this.write(e,n,r,i);t&&t.appendChild(o)}renderResult(t,e,n,r){const i=t.getMatrix();if(null===i)throw new nt;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,l=s+2*r,c=Math.max(e,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-o*h)/2),f=Math.floor((u-s*h)/2),p=this.createSVGElement(c,u);for(let m=0,g=f;m<s;m++,g+=h)for(let t=0,e=d;t<o;t++,e+=h)if(1===i.get(t,m)){const t=this.createSvgRectElement(e,g,h,h);p.appendChild(t)}return p}createSVGElement(t,e){const n=document.createElementNS(On.SVG_NS,"svg");return n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString()),n}createSvgRectElement(t,e,n,r){const i=document.createElementNS(On.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",e.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}On.QUIET_ZONE_SIZE=4,On.SVG_NS="http://www.w3.org/2000/svg";class Rn{encode(t,e,n,r,i){if(0===t.length)throw new h("Found empty contents");if(e!==H.QR_CODE)throw new h("Can only encode QR_CODE, but got "+e);if(n<0||r<0)throw new h(`Requested dimensions are too small: ${n}x${r}`);let o=_e.L,s=Rn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(Sn.ERROR_CORRECTION)&&(o=_e.fromString(i.get(Sn.ERROR_CORRECTION).toString())),void 0!==i.get(Sn.MARGIN)&&(s=Number.parseInt(i.get(Sn.MARGIN).toString(),10)));const a=kn.encode(t,o,i);return Rn.renderResult(a,n,r,s)}static renderResult(t,e,n,r){const i=t.getMatrix();if(null===i)throw new nt;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,l=s+2*r,c=Math.max(e,a),u=Math.max(n,l),h=Math.min(Math.floor(c/a),Math.floor(u/l)),d=Math.floor((c-o*h)/2),f=Math.floor((u-s*h)/2),p=new I(c,u);for(let m=0,g=f;m<s;m++,g+=h)for(let t=0,e=d;t<o;t++,e+=h)1===i.get(t,m)&&p.setRegion(e,g,h,h);return p}}Rn.QUIET_ZONE_SIZE=4;class Dn{encode(t,e,n,r,i){let o;switch(e){case H.QR_CODE:o=new Rn;break;default:throw new h("No encoder available for format "+e)}return o.encode(t,e,n,r,i)}}class Nn extends D{constructor(t,e,n,r,i,o,s,a){if(super(o,s),this.yuvData=t,this.dataWidth=e,this.dataHeight=n,this.left=r,this.top=i,r+o>e||i+s>n)throw new h("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(o,s)}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const n=this.getWidth();(null===e||void 0===e||e.length<n)&&(e=new Uint8ClampedArray(n));const r=(t+this.top)*this.dataWidth+this.left;return m.arraycopy(this.yuvData,r,e,0,n),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;const n=t*e,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return m.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<e;o++){const e=o*t;m.arraycopy(this.yuvData,i,r,e,t),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(t,e,n,r){return new Nn(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,n,r,!1)}renderThumbnail(){const t=this.getWidth()/Nn.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/Nn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*e),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<e;o++){const e=o*t;for(let o=0;o<t;o++){const t=255&r[i+o*Nn.THUMBNAIL_SCALE_FACTOR];n[e+o]=4278190080|65793*t}i+=this.dataWidth*Nn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Nn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Nn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<e;r++,i+=this.dataWidth){const e=i+t/2;for(let r=i,o=i+t-1;r<e;r++,o--){const t=n[r];n[r]=n[o],n[o]=t}}}invert(){return new N(this)}}Nn.THUMBNAIL_SCALE_FACTOR=2;class Pn extends D{constructor(t,e,n,r,i,o,s){if(super(e,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=s,4===t.BYTES_PER_ELEMENT){const r=e*n,i=new Uint8ClampedArray(r);for(let e=0;e<r;e++){const n=t[e],r=n>>16&255,o=n>>7&510,s=255&n;i[e]=(r+o+s)/4&255}this.luminances=i}else this.luminances=t;if(void 0===r&&(this.dataWidth=e),void 0===i&&(this.dataHeight=n),void 0===o&&(this.left=0),void 0===s&&(this.top=0),this.left+e>this.dataWidth||this.top+n>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const n=this.getWidth();(null===e||void 0===e||e.length<n)&&(e=new Uint8ClampedArray(n));const r=(t+this.top)*this.dataWidth+this.left;return m.arraycopy(this.luminances,r,e,0,n),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;const n=t*e,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return m.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<e;o++){const e=o*t;m.arraycopy(this.luminances,i,r,e,t),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(t,e,n,r){return new Pn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new N(this)}}class Ln extends A{static forName(t){return this.getCharacterSetECIByName(t)}}class Bn{}Bn.ISO_8859_1=A.ISO8859_1;class Un{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Fn{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class zn{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Vn extends zn{constructor(t,e,n){super(t),this.value=e,this.bitCount=n}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new Vn(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Vn(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+w.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Hn extends Vn{constructor(t,e,n){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=n}appendTo(t,e){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):0===n?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+n],8)}addBinaryShift(t,e){return new Hn(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jn(t,e,n){return new Hn(t,e,n)}function Wn(t,e,n){return new Vn(t,e,n)}const Gn=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],$n=0,qn=1,Yn=2,Xn=3,Zn=4,Kn=new Vn(null,0,0),Jn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Qn(t){for(let e of t)v.fill(e,-1);return t[$n][Zn]=0,t[qn][Zn]=0,t[qn][$n]=28,t[Xn][Zn]=0,t[Yn][Zn]=0,t[Yn][$n]=15,t}const tr=Qn(v.createInt32Array(6,6));class er{constructor(t,e,n,r){this.token=t,this.mode=e,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let n=this.bitCount,r=this.token;if(t!==this.mode){let e=Jn[this.mode][t];r=Wn(r,65535&e,e>>16),n+=e>>16}let i=t===Yn?4:5;return r=Wn(r,e,i),new er(r,t,0,n+i)}shiftAndAppend(t,e){let n=this.token,r=this.mode===Yn?4:5;return n=Wn(n,tr[this.mode][t],r),n=Wn(n,e,5),new er(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(t){let e=this.token,n=this.mode,r=this.bitCount;if(this.mode===Zn||this.mode===Yn){let t=Jn[n][$n];e=Wn(e,65535&t,t>>16),r+=t>>16,n=$n}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new er(e,n,this.binaryShiftByteCount+1,r+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(t+1)),o}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return e=jn(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new er(e,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(Jn[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=er.calculateBinaryShiftCost(t)-er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())e.unshift(r);let n=new b;for(const r of e)r.appendTo(n,t);return n}toString(){return T.format("%s bits=%d bytes=%d",Gn[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}function nr(t){const e=T.getCharCode(" "),n=T.getCharCode("."),r=T.getCharCode(",");t[$n][e]=1;const i=T.getCharCode("Z"),o=T.getCharCode("A");for(let d=o;d<=i;d++)t[$n][d]=d-o+2;t[qn][e]=1;const s=T.getCharCode("z"),a=T.getCharCode("a");for(let d=a;d<=s;d++)t[qn][d]=d-a+2;t[Yn][e]=1;const l=T.getCharCode("9"),c=T.getCharCode("0");for(let d=c;d<=l;d++)t[Yn][d]=d-c+2;t[Yn][r]=12,t[Yn][n]=13;const u=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(let d=0;d<u.length;d++)t[Xn][T.getCharCode(u[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)T.getCharCode(h[d])>0&&(t[Zn][T.getCharCode(h[d])]=d);return t}er.INITIAL_STATE=new er(Kn,$n,0,0);const rr=nr(v.createInt32Array(5,256));class ir{constructor(t){this.text=t}encode(){const t=T.getCharCode(" "),e=T.getCharCode("\n");let n=Fn.singletonList(er.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let r,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case T.getCharCode("\r"):r=o===e?2:0;break;case T.getCharCode("."):r=o===t?3:0;break;case T.getCharCode(","):r=o===t?4:0;break;case T.getCharCode(":"):r=o===t?5:0;break;default:r=0}r>0?(n=ir.updateStateListForPair(n,i,r),i++):n=this.updateStateListForChar(n,i)}const r=Fn.min(n,((t,e)=>t.getBitCount()-e.getBitCount()));return r.toBitArray(this.text)}updateStateListForChar(t,e){const n=[];for(let r of t)this.updateStateForChar(r,e,n);return ir.simplifyStates(n)}updateStateForChar(t,e,n){let r=255&this.text[e],i=rr[t.getMode()][r]>0,o=null;for(let s=0;s<=Zn;s++){let a=rr[s][r];if(a>0){if(null==o&&(o=t.endBinaryShift(e)),!i||s===t.getMode()||s===Yn){const t=o.latchAndAppend(s,a);n.push(t)}if(!i&&tr[t.getMode()][s]>=0){const t=o.shiftAndAppend(s,a);n.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===rr[t.getMode()][r]){let r=t.addBinaryShiftChar(e);n.push(r)}}static updateStateListForPair(t,e,n){const r=[];for(let i of t)this.updateStateForPair(i,e,n,r);return this.simplifyStates(r)}static updateStateForPair(t,e,n,r){let i=t.endBinaryShift(e);if(r.push(i.latchAndAppend(Zn,n)),t.getMode()!==Zn&&r.push(i.shiftAndAppend(Zn,n)),3===n||4===n){let t=i.latchAndAppend(Yn,16-n).latchAndAppend(Yn,1);r.push(t)}if(t.getBinaryShiftByteCount()>0){let n=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);r.push(n)}}static simplifyStates(t){let e=[];for(const n of t){let t=!0;for(const r of e){if(r.isBetterThanOrEqualTo(n)){t=!1;break}n.isBetterThanOrEqualTo(r)&&(e=e.filter((t=>t!==r)))}t&&e.push(n)}return e}}class or{constructor(){}static encodeBytes(t){return or.encode(t,or.DEFAULT_EC_PERCENT,or.DEFAULT_AZTEC_LAYERS)}static encode(t,e,n){let r,i,o,s,a,l=new ir(t).encode(),c=w.truncDivision(l.getSize()*e,100)+11,u=l.getSize()+c;if(n!==or.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?or.MAX_NB_BITS_COMPACT:or.MAX_NB_BITS))throw new h(T.format("Illegal value %s for layers",n));o=or.totalBitsInLayer(i,r),s=or.WORD_SIZE[i];let t=o-o%s;if(a=or.stuffBits(l,s),a.getSize()+c>t)throw new h("Data to large for user specified layer");if(r&&a.getSize()>64*s)throw new h("Data to large for user specified layer")}else{s=0,a=null;for(let t=0;;t++){if(t>or.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(r=t<=3,i=r?t+1:t,o=or.totalBitsInLayer(i,r),u>o)continue;null!=a&&s===or.WORD_SIZE[i]||(s=or.WORD_SIZE[i],a=or.stuffBits(l,s));let e=o-o%s;if(!(r&&a.getSize()>64*s)&&a.getSize()+c<=e)break}}let d,f=or.generateCheckWords(a,o,s),p=a.getSize()/s,m=or.generateModeMessage(r,i,p),g=(r?11:14)+4*i,y=new Int32Array(g);if(r){d=g;for(let t=0;t<y.length;t++)y[t]=t}else{d=g+1+2*w.truncDivision(w.truncDivision(g,2)-1,15);let t=w.truncDivision(g,2),e=w.truncDivision(d,2);for(let n=0;n<t;n++){let r=n+w.truncDivision(n,15);y[t-n-1]=e-r-1,y[t+n]=e+r+1}}let v=new I(d);for(let h=0,w=0;h<i;h++){let t=4*(i-h)+(r?9:12);for(let e=0;e<t;e++){let n=2*e;for(let r=0;r<2;r++)f.get(w+n+r)&&v.set(y[2*h+r],y[2*h+e]),f.get(w+2*t+n+r)&&v.set(y[2*h+e],y[g-1-2*h-r]),f.get(w+4*t+n+r)&&v.set(y[g-1-2*h-r],y[g-1-2*h-e]),f.get(w+6*t+n+r)&&v.set(y[g-1-2*h-e],y[2*h+r])}w+=8*t}if(or.drawModeMessage(v,r,d,m),r)or.drawBullsEye(v,w.truncDivision(d,2),5);else{or.drawBullsEye(v,w.truncDivision(d,2),7);for(let t=0,e=0;t<w.truncDivision(g,2)-1;t+=15,e+=16)for(let n=1&w.truncDivision(d,2);n<d;n+=2)v.set(w.truncDivision(d,2)-e,n),v.set(w.truncDivision(d,2)+e,n),v.set(n,w.truncDivision(d,2)-e),v.set(n,w.truncDivision(d,2)+e)}let b=new Un;return b.setCompact(r),b.setSize(d),b.setLayers(i),b.setCodeWords(p),b.setMatrix(v),b}static drawBullsEye(t,e,n){for(let r=0;r<n;r+=2)for(let n=e-r;n<=e+r;n++)t.set(n,e-r),t.set(n,e+r),t.set(e-r,n),t.set(e+r,n);t.set(e-n,e-n),t.set(e-n+1,e-n),t.set(e-n,e-n+1),t.set(e+n,e-n),t.set(e+n,e-n+1),t.set(e+n,e+n-1)}static generateModeMessage(t,e,n){let r=new b;return t?(r.appendBits(e-1,2),r.appendBits(n-1,6),r=or.generateCheckWords(r,28,4)):(r.appendBits(e-1,5),r.appendBits(n-1,11),r=or.generateCheckWords(r,40,4)),r}static drawModeMessage(t,e,n,r){let i=w.truncDivision(n,2);if(e)for(let o=0;o<7;o++){let e=i-3+o;r.get(o)&&t.set(e,i-5),r.get(o+7)&&t.set(i+5,e),r.get(20-o)&&t.set(e,i+5),r.get(27-o)&&t.set(i-5,e)}else for(let o=0;o<10;o++){let e=i-5+o+w.truncDivision(o,5);r.get(o)&&t.set(e,i-7),r.get(o+10)&&t.set(i+7,e),r.get(29-o)&&t.set(e,i+7),r.get(39-o)&&t.set(i-7,e)}}static generateCheckWords(t,e,n){let r=t.getSize()/n,i=new En(or.getGF(n)),o=w.truncDivision(e,n),s=or.bitsToWords(t,n,o);i.encode(s,o-r);let a=e%n,l=new b;l.appendBits(0,a);for(const c of Array.from(s))l.appendBits(c,n);return l}static bitsToWords(t,e,n){let r,i,o=new Int32Array(n);for(r=0,i=t.getSize()/e;r<i;r++){let n=0;for(let i=0;i<e;i++)n|=t.get(r*e+i)?1<<e-i-1:0;o[r]=n}return o}static getGF(t){switch(t){case 4:return tt.AZTEC_PARAM;case 6:return tt.AZTEC_DATA_6;case 8:return tt.AZTEC_DATA_8;case 10:return tt.AZTEC_DATA_10;case 12:return tt.AZTEC_DATA_12;default:throw new h("Unsupported word size "+t)}}static stuffBits(t,e){let n=new b,r=t.getSize(),i=(1<<e)-2;for(let o=0;o<r;o+=e){let s=0;for(let n=0;n<e;n++)(o+n>=r||t.get(o+n))&&(s|=1<<e-1-n);(s&i)===i?(n.appendBits(s&i,e),o--):0===(s&i)?(n.appendBits(1|s,e),o--):n.appendBits(s,e)}return n}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}or.DEFAULT_EC_PERCENT=33,or.DEFAULT_AZTEC_LAYERS=0,or.MAX_NB_BITS=32,or.MAX_NB_BITS_COMPACT=4,or.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sr{encode(t,e,n,r){return this.encodeWithHints(t,e,n,r,null)}encodeWithHints(t,e,n,r,i){let o=Bn.ISO_8859_1,s=or.DEFAULT_EC_PERCENT,a=or.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(Sn.CHARACTER_SET)&&(o=Ln.forName(i.get(Sn.CHARACTER_SET).toString())),i.has(Sn.ERROR_CORRECTION)&&(s=w.parseInt(i.get(Sn.ERROR_CORRECTION).toString())),i.has(Sn.AZTEC_LAYERS)&&(a=w.parseInt(i.get(Sn.AZTEC_LAYERS).toString()))),sr.encodeLayers(t,e,n,r,o,s,a)}static encodeLayers(t,e,n,r,i,o,s){if(e!==H.AZTEC)throw new h("Can only encode AZTEC, but got "+e);let a=or.encode(T.getBytes(t,i),o,s);return sr.renderResult(a,n,r)}static renderResult(t,e,n){let r=t.getMatrix();if(null==r)throw new nt;let i=r.getWidth(),o=r.getHeight(),s=Math.max(e,i),a=Math.max(n,o),l=Math.min(s/i,a/o),c=(s-i*l)/2,u=(a-o*l)/2,h=new I(s,a);for(let d=0,f=u;d<o;d++,f+=l)for(let t=0,e=c;t<i;t++,e+=l)r.get(t,d)&&h.setRegion(e,f,l,l);return h}}t.AbstractExpandedDecoder=Gt,t.ArgumentException=u,t.ArithmeticException=Q,t.AztecCode=Un,t.AztecCodeReader=yt,t.AztecCodeWriter=sr,t.AztecDecoder=it,t.AztecDetector=gt,t.AztecDetectorResult=ct,t.AztecEncoder=or,t.AztecHighLevelEncoder=ir,t.AztecPoint=mt,t.BarcodeFormat=H,t.Binarizer=p,t.BinaryBitmap=d,t.BitArray=b,t.BitMatrix=I,t.BitSource=me,t.BrowserAztecCodeReader=vt,t.BrowserBarcodeReader=ce,t.BrowserCodeReader=F,t.BrowserDatamatrixCodeReader=be,t.BrowserMultiFormatReader=vn,t.BrowserPDF417Reader=wn,t.BrowserQRCodeReader=bn,t.BrowserQRCodeSvgWriter=On,t.CharacterSetECI=A,t.ChecksumException=f,t.Code128Reader=bt,t.Code39Reader=_t,t.DataMatrixDecodedBitStreamParser=ge,t.DataMatrixReader=we,t.DecodeHintType=S,t.DecoderResult=Z,t.DefaultGridSampler=ft,t.DetectorResult=lt,t.EAN13Reader=Mt,t.EncodeHintType=Sn,t.Exception=c,t.FormatException=E,t.GenericGF=tt,t.GenericGFPoly=J,t.GlobalHistogramBinarizer=O,t.GridSampler=ht,t.GridSamplerInstance=pt,t.HTMLCanvasElementLuminanceSource=P,t.HybridBinarizer=R,t.ITFReader=St,t.IllegalArgumentException=h,t.IllegalStateException=nt,t.InvertedLuminanceSource=N,t.LuminanceSource=D,t.MathUtils=ot,t.MultiFormatOneDReader=le,t.MultiFormatReader=yn,t.MultiFormatWriter=Dn,t.NotFoundException=k,t.OneDReader=wt,t.PDF417DecodedBitStreamParser=fn,t.PDF417DecoderErrorCorrection=$e,t.PDF417Reader=mn,t.PDF417ResultMetadata=nn,t.PerspectiveTransform=dt,t.PlanarYUVLuminanceSource=Nn,t.QRCodeByteMatrix=xn,t.QRCodeDataMask=Ce,t.QRCodeDecodedBitStreamParser=ke,t.QRCodeDecoderErrorCorrectionLevel=_e,t.QRCodeDecoderFormatInformation=Se,t.QRCodeEncoder=kn,t.QRCodeEncoderQRCode=Cn,t.QRCodeMaskUtil=An,t.QRCodeMatrixUtil=Mn,t.QRCodeMode=Ie,t.QRCodeReader=Fe,t.QRCodeVersion=xe,t.QRCodeWriter=Rn,t.RGBLuminanceSource=Pn,t.RSS14Reader=ae,t.RSSExpandedReader=oe,t.ReaderException=gn,t.ReedSolomonDecoder=rt,t.ReedSolomonEncoder=En,t.ReedSolomonException=et,t.Result=z,t.ResultMetadataType=X,t.ResultPoint=at,t.StringUtils=T,t.UnsupportedOperationException=x,t.VideoInputDevice=L,t.WhiteRectangleDetector=ut,t.WriterException=Tn,t.ZXingArrays=v,t.ZXingCharset=Ln,t.ZXingInteger=w,t.ZXingStandardCharsets=Bn,t.ZXingStringBuilder=M,t.ZXingStringEncoding=C,t.ZXingSystem=m,t.createAbstractExpandedDecoder=ne,Object.defineProperty(t,"__esModule",{value:!0})}))},7055:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),e+=s+h>=1?d/l:d*Math.pow(2,1-h),e*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*m}},9051:function(t,e,n){"use strict";n(7658);const{Buffer:r}=n(1547),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let n=0;n<this._bufs.length;n++){const r=e+this._bufs[n].length;if(t<r||n===this._bufs.length-1)return[n,t-e];e=r}},o.prototype._reverseOffset=function(t){const e=t[0];let n=t[1];for(let r=0;r<e;r++)n+=this._bufs[r].length;return n},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,n,i){if(("number"!==typeof n||n<0)&&(n=0),("number"!==typeof i||i>this.length)&&(i=this.length),n>=this.length)return t||r.alloc(0);if(i<=0)return t||r.alloc(0);const o=!!t,s=this._offset(n),a=i-n;let l=a,c=o&&e||0,u=s[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,c),c+=this._bufs[e].length;return t}if(l<=this._bufs[s[0]].length-u)return o?this._bufs[s[0]].copy(t,e,u,u+l):this._bufs[s[0]].slice(u,u+l);o||(t=r.allocUnsafe(a));for(let r=s[0];r<this._bufs.length;r++){const e=this._bufs[r].length-u;if(!(l>e)){this._bufs[r].copy(t,c,u,u+l),c+=e;break}this._bufs[r].copy(t,c,u),c+=e,l-=e,u&&(u=0)}return t.length>c?t.slice(0,c):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const n=this._offset(t),r=this._offset(e),i=this._bufs.slice(n[0],r[0]+1);return 0===r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!==n[1]&&(i[0]=i[0].slice(n[1])),this._new(i)},o.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(r.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(r.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,n){if(void 0===n&&"string"===typeof e&&(n=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=r.from([t]):"string"===typeof t?t=r.from(t,n):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=r.from(t.buffer,t.byteOffset,t.byteLength):r.isBuffer(t)||(t=r.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const n=e.length-s;if(n>=t.length){const n=e.indexOf(t,s);if(-1!==n)return this._reverseOffset([o,n]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let n=0;n<e.length;n++)if(this.get(t+n)!==e[n])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,n){return this.slice(t,t+n)[e](0,n)}:o.prototype[e]=function(n=0){return this.slice(n,n+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},1547:function(t,e,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */n(3767),n(8585),n(8696),n(7658);const r=n(1271),i=n(7055),o="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function l(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return u(t,e,n)}function u(t,e,n){if("string"===typeof t)return p(t,e);if(ArrayBuffer.isView(t))return g(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(st(t,ArrayBuffer)||t&&st(t.buffer,ArrayBuffer))return y(t,e,n);if("undefined"!==typeof SharedArrayBuffer&&(st(t,SharedArrayBuffer)||t&&st(t.buffer,SharedArrayBuffer)))return y(t,e,n);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const i=v(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,n){return h(t),t<=0?l(t):void 0!==e?"string"===typeof n?l(t).fill(e,n):l(t).fill(e):l(t)}function f(t){return h(t),l(t<0?0:0|w(t))}function p(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|_(t,e);let r=l(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function m(t){const e=t.length<0?0:0|w(t.length),n=l(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function g(t){if(st(t,Uint8Array)){const e=new Uint8Array(t);return y(e.buffer,e.byteOffset,e.byteLength)}return m(t)}function y(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function v(t){if(c.isBuffer(t)){const e=0|w(t.length),n=l(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!==typeof t.length||at(t.length)?l(0):m(t):"Buffer"===t.type&&Array.isArray(t.data)?m(t.data):void 0}function w(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),c.alloc(+t)}function _(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||st(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return et(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return it(t).length;default:if(i)return r?-1:et(t).length;e=(""+e).toLowerCase(),i=!0}}function S(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return B(this,e,n);case"utf8":case"utf-8":return R(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function E(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function A(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,at(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:x(t,e,n,r,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):x(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,r,i){let o,s=1,a=t.length,l=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(c(t,o+r)!==c(e,r)){n=!1;break}if(n)return o}return-1}function C(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(at(r))return s;t[n+s]=r}return s}function T(t,e,n,r){return ot(et(e,t.length-n),t,n,r)}function M(t,e,n,r){return ot(nt(e),t,n,r)}function I(t,e,n,r){return ot(it(e),t,n,r)}function k(t,e,n,r){return ot(rt(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function R(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;while(i<n){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,l;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128===(192&n)&&(l=(31&e)<<6|63&n,l>127&&(o=l));break;case 3:n=t[i+1],r=t[i+2],128===(192&n)&&128===(192&r)&&(l=(15&e)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return N(r)}e.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return d(t,e,n)},c.allocUnsafe=function(t){return f(t)},c.allocUnsafeSlow=function(t){return f(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(st(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),st(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(st(e,Uint8Array))i+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},c.byteLength=_,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)E(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?R(this,0,t):S.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,i){if(st(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;let o=i-r,s=n-e;const a=Math.min(o,s),l=this.slice(r,i),u=t.slice(e,n);for(let c=0;c<a;++c)if(l[c]!==u[c]){o=l[c],s=u[c];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return A(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return A(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return C(this,t,e,n);case"utf8":case"utf-8":return T(this,t,e,n);case"ascii":case"latin1":case"binary":return M(this,t,e,n);case"base64":return I(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const D=4096;function N(t){const e=t.length;if(e<=D)return String.fromCharCode.apply(String,t);let n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=D));return n}function P(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function B(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=e;o<n;++o)i+=lt[t[o]];return i}function U(t,e,n){const r=t.slice(e,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function F(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function V(t,e,n,r,i){Z(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function H(t,e,n,r,i){Z(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function j(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(t,e,n,r,o){return e=+e,n>>>=0,o||j(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function G(t,e,n,r,o){return e=+e,n>>>=0,o||j(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);let r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);let r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=ct((function(t){t>>>=0,K(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||J(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=ct((function(t){t>>>=0,K(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||J(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);let r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||F(t,e,this.length);let r=e,i=1,o=this[t+--r];while(r>0&&(i*=256))o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=ct((function(t){t>>>=0,K(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||J(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=ct((function(t){t>>>=0,K(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||J(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;z(this,t,e,n,r,0)}let i=1,o=0;this[e]=255&t;while(++o<n&&(i*=256))this[e+o]=t/i&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;z(this,t,e,n,r,0)}let i=n-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=ct((function(t,e=0){return V(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=ct((function(t,e=0){return H(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;this[e]=255&t;while(++i<n&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=ct((function(t,e=0){return V(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=ct((function(t,e=0){return H(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return W(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return W(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return G(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return G(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},c.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=c.isBuffer(t)?t:c.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const $={};function q(t,e,n){$[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function Y(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function X(t,e,n){K(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||J(e,t.length-(n+1))}function Z(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new $.ERR_OUT_OF_RANGE("value",i,t)}X(r,i,o)}function K(t,e){if("number"!==typeof t)throw new $.ERR_INVALID_ARG_TYPE(e,"number",t)}function J(t,e,n){if(Math.floor(t)!==t)throw K(t,n),new $.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new $.ERR_BUFFER_OUT_OF_BOUNDS;throw new $.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=Y(String(n)):"bigint"===typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=Y(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function tt(t){if(t=t.split("=")[0],t=t.trim().replace(Q,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function et(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function nt(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function rt(t,e){let n,r,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function it(t){return r.toByteArray(tt(t))}function ot(t,e,n,r){let i;for(i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function st(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function at(t){return t!==t}const lt=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function ct(t){return"undefined"===typeof BigInt?ut:t}function ut(){throw new Error("BigInt not supported")}},7192:function(t,e,n){"use strict";n(7658);const r=async t=>{const e=[];for await(const n of t)e.push(n);return e};t.exports=r},1131:function(t,e,n){"use strict";async function*r(t,e=1){let n=[];e<1&&(e=1);for await(const r of t){n.push(r);while(n.length>=e)yield n.slice(0,e),n=n.slice(e)}while(n.length)yield n.slice(0,e),n=n.slice(e)}n(7658),t.exports=r},9164:function(t){"use strict";const e=async t=>{for await(const e of t);};t.exports=e},3726:function(t){"use strict";const e=async function*(t,e){for await(const n of t)await e(n)&&(yield n)};t.exports=e},7290:function(t){"use strict";const e=async t=>{let e;for await(const n of t)e=n;return e};t.exports=e},9927:function(t){"use strict";const e=async function*(t,e){for await(const n of t)yield e(n)};t.exports=e},8806:function(t,e,n){"use strict";const r=n(1131);async function*i(t,e=1){for await(const n of r(t,e)){const t=n.map((t=>t().then((t=>({ok:!0,value:t})),(t=>({ok:!1,err:t})))));for(let e=0;e<t.length;e++){const n=await t[e];if(!n.ok)throw n.err;yield n.value}}}t.exports=i},4395:function(t,e,n){"use strict";function r(t){const[e,n]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>e.next(),push:t=>{r.push(t)},next:()=>r.length?{done:!1,value:r.shift()}:e.next(),[n](){return this}}}n(7658),t.exports=r},2100:function(t){const e=(...t)=>{let e;while(t.length)e=t.shift()(e);return e},n=t=>t&&("function"===typeof t[Symbol.asyncIterator]||"function"===typeof t[Symbol.iterator]||"function"===typeof t.next),r=t=>t&&"function"===typeof t.sink&&n(t.source),i=t=>e=>(t.sink(e),t.source),o=(...t)=>{if(r(t[0])){const e=t[0];t[0]=()=>e.source}else if(n(t[0])){const e=t[0];t[0]=()=>e}if(t.length>1&&r(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)r(t[e])&&(t[e]=i(t[e]));return e(...t)};t.exports=o,t.exports.pipe=o,t.exports.rawPipe=e,t.exports.isIterable=n,t.exports.isDuplex=r},6855:function(t){"use strict";const e=async function*(t,e){let n=0;if(!(e<1))for await(const r of t)if(yield r,n++,n===e)return};t.exports=e},535:function(t,e,n){"use strict";n(7658);const r=n(1800),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:o}=Object,s=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0}),a=this,l={concatArrays:!1,ignoreUndefined:!1},c=t=>{const e=[];for(const n in t)i.call(t,n)&&e.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(t);for(const r of n)o.call(t,r)&&e.push(r)}return e};function u(t){return Array.isArray(t)?h(t):r(t)?d(t):t}function h(t){const e=t.slice(0,0);return c(t).forEach((n=>{s(e,n,u(t[n]))})),e}function d(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return c(t).forEach((n=>{s(e,n,u(t[n]))})),e}const f=(t,e,n,r)=>(n.forEach((n=>{"undefined"===typeof e[n]&&r.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?s(t,n,m(t[n],e[n],r)):s(t,n,u(e[n])))})),t),p=(t,e,n)=>{let r=t.slice(0,0),o=0;return[t,e].forEach((e=>{const a=[];for(let n=0;n<e.length;n++)i.call(e,n)&&(a.push(String(n)),s(r,o++,e===t?e[n]:u(e[n])));r=f(r,e,c(e).filter((t=>!a.includes(t))),n)})),r};function m(t,e,n){return n.concatArrays&&Array.isArray(t)&&Array.isArray(e)?p(t,e,n):r(e)&&r(t)?f(t,e,c(e),n):u(e)}t.exports=function(...t){const e=m(u(l),this!==a&&this||{},l);let n={_:{}};for(const i of t)if(void 0!==i){if(!r(i))throw new TypeError("`"+i+"` is not an Option Object");n=m(n,{_:i},e)}return n._}},1800:function(t){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},716:function(t,e,n){t.exports=n(55)},55:function(t,e){(function(n,r){"use strict";var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(t){if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return!1;for(var e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)return!1;return!0}function s(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function a(t,e){return t<<e|t>>>32-e}function l(t){return t^=t>>>16,t=s(t,2246822507),t^=t>>>13,t=s(t,3266489909),t^=t>>>16,t}function c(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function h(t,e){return e%=64,32===e?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function d(t,e){return e%=64,0===e?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function f(t,e){return[t[0]^e[0],t[1]^e[1]]}function p(t){return t=f(t,[0,t[0]>>>1]),t=u(t,[4283543511,3981806797]),t=f(t,[0,t[0]>>>1]),t=u(t,[3301882366,444984403]),t=f(t,[0,t[0]>>>1]),t}i.x86.hash32=function(t,e){if(i.inputValidation&&!o(t))return r;e=e||0;for(var n=t.length%4,c=t.length-n,u=e,h=0,d=3432918353,f=461845907,p=0;p<c;p+=4)h=t[p]|t[p+1]<<8|t[p+2]<<16|t[p+3]<<24,h=s(h,d),h=a(h,15),h=s(h,f),u^=h,u=a(u,13),u=s(u,5)+3864292196;switch(h=0,n){case 3:h^=t[p+2]<<16;case 2:h^=t[p+1]<<8;case 1:h^=t[p],h=s(h,d),h=a(h,15),h=s(h,f),u^=h}return u^=t.length,u=l(u),u>>>0},i.x86.hash128=function(t,e){if(i.inputValidation&&!o(t))return r;e=e||0;for(var n=t.length%16,c=t.length-n,u=e,h=e,d=e,f=e,p=0,m=0,g=0,y=0,v=597399067,w=2869860233,b=951274213,_=2716044179,S=0;S<c;S+=16)p=t[S]|t[S+1]<<8|t[S+2]<<16|t[S+3]<<24,m=t[S+4]|t[S+5]<<8|t[S+6]<<16|t[S+7]<<24,g=t[S+8]|t[S+9]<<8|t[S+10]<<16|t[S+11]<<24,y=t[S+12]|t[S+13]<<8|t[S+14]<<16|t[S+15]<<24,p=s(p,v),p=a(p,15),p=s(p,w),u^=p,u=a(u,19),u+=h,u=s(u,5)+1444728091,m=s(m,w),m=a(m,16),m=s(m,b),h^=m,h=a(h,17),h+=d,h=s(h,5)+197830471,g=s(g,b),g=a(g,17),g=s(g,_),d^=g,d=a(d,15),d+=f,d=s(d,5)+2530024501,y=s(y,_),y=a(y,18),y=s(y,v),f^=y,f=a(f,13),f+=u,f=s(f,5)+850148119;switch(p=0,m=0,g=0,y=0,n){case 15:y^=t[S+14]<<16;case 14:y^=t[S+13]<<8;case 13:y^=t[S+12],y=s(y,_),y=a(y,18),y=s(y,v),f^=y;case 12:g^=t[S+11]<<24;case 11:g^=t[S+10]<<16;case 10:g^=t[S+9]<<8;case 9:g^=t[S+8],g=s(g,b),g=a(g,17),g=s(g,_),d^=g;case 8:m^=t[S+7]<<24;case 7:m^=t[S+6]<<16;case 6:m^=t[S+5]<<8;case 5:m^=t[S+4],m=s(m,w),m=a(m,16),m=s(m,b),h^=m;case 4:p^=t[S+3]<<24;case 3:p^=t[S+2]<<16;case 2:p^=t[S+1]<<8;case 1:p^=t[S],p=s(p,v),p=a(p,15),p=s(p,w),u^=p}return u^=t.length,h^=t.length,d^=t.length,f^=t.length,u+=h,u+=d,u+=f,h+=u,d+=u,f+=u,u=l(u),h=l(h),d=l(d),f=l(f),u+=h,u+=d,u+=f,h+=u,d+=u,f+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},i.x64.hash128=function(t,e){if(i.inputValidation&&!o(t))return r;e=e||0;for(var n=t.length%16,s=t.length-n,a=[0,e],l=[0,e],m=[0,0],g=[0,0],y=[2277735313,289559509],v=[1291169091,658871167],w=0;w<s;w+=16)m=[t[w+4]|t[w+5]<<8|t[w+6]<<16|t[w+7]<<24,t[w]|t[w+1]<<8|t[w+2]<<16|t[w+3]<<24],g=[t[w+12]|t[w+13]<<8|t[w+14]<<16|t[w+15]<<24,t[w+8]|t[w+9]<<8|t[w+10]<<16|t[w+11]<<24],m=u(m,y),m=h(m,31),m=u(m,v),a=f(a,m),a=h(a,27),a=c(a,l),a=c(u(a,[0,5]),[0,1390208809]),g=u(g,v),g=h(g,33),g=u(g,y),l=f(l,g),l=h(l,31),l=c(l,a),l=c(u(l,[0,5]),[0,944331445]);switch(m=[0,0],g=[0,0],n){case 15:g=f(g,d([0,t[w+14]],48));case 14:g=f(g,d([0,t[w+13]],40));case 13:g=f(g,d([0,t[w+12]],32));case 12:g=f(g,d([0,t[w+11]],24));case 11:g=f(g,d([0,t[w+10]],16));case 10:g=f(g,d([0,t[w+9]],8));case 9:g=f(g,[0,t[w+8]]),g=u(g,v),g=h(g,33),g=u(g,y),l=f(l,g);case 8:m=f(m,d([0,t[w+7]],56));case 7:m=f(m,d([0,t[w+6]],48));case 6:m=f(m,d([0,t[w+5]],40));case 5:m=f(m,d([0,t[w+4]],32));case 4:m=f(m,d([0,t[w+3]],24));case 3:m=f(m,d([0,t[w+2]],16));case 2:m=f(m,d([0,t[w+1]],8));case 1:m=f(m,[0,t[w]]),m=u(m,y),m=h(m,31),m=u(m,v),a=f(a,m)}return a=f(a,[0,t.length]),l=f(l,[0,t.length]),a=c(a,l),l=c(l,a),a=p(a),l=p(l),a=c(a,l),l=c(l,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i})()},1610:function(t,e,n){function r(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!==typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i="undefined"===typeof n;if(i)return e=Object.create(null),t;if(e[n]){var o="function"!==typeof r;if(o)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,r)}return t}}}function i(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}n(7658),t.exports=function(t){i(t);var e=r(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},4854:function(t,e,n){n(7658),t.exports=i,t.exports.simulator=n(6599);var r=n(1610);function i(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var i=e&&e.createSimulator||n(6599),s=i(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var a=t.version>19?R:O;e&&"function"===typeof e.nodeMass&&(a=e.nodeMass);var l=new Map,c={},u=0,h=s.settings.springTransform||o;S(),w();var d=!1,f={step:function(){if(0===u)return p(!0),!0;var t=s.step();f.lastMove=t,f.fire("step");var e=t/u,n=e<=.01;return p(n),n},getNodePosition:function(t){return k(t).pos},setNodePosition:function(t){var e=k(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=c[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return s.getBBox()},forEachBody:m,pinNode:function(t,e){var n=k(t.id);n.isPinned=!!e},isNodePinned:function(t){return k(t.id).isPinned},dispose:function(){t.off("changed",_),f.fire("disposed")},getBody:v,getSpring:y,getForceVectorLength:g,simulator:s,graph:t,lastMove:0};return r(f),f;function p(t){d!==t&&(d=t,b(t))}function m(t){l.forEach(t)}function g(){var t=0,e=0;return m((function(n){t+=Math.abs(n.force.x),e+=Math.abs(n.force.y)})),Math.sqrt(t*t+e*e)}function y(e,n){var r;if(void 0===n)r="object"!==typeof e?e:e.id;else{var i=t.hasLink(e,n);if(!i)return;r=i.id}return c[r]}function v(t){return l.get(t)}function w(){t.on("changed",_)}function b(t){f.fire("stable",t)}function _(e){for(var n=0;n<e.length;++n){var r=e[n];"add"===r.changeType?(r.node&&E(r.node.id),r.link&&x(r.link)):"remove"===r.changeType&&(r.node&&A(r.node),r.link&&C(r.link))}u=t.getNodesCount()}function S(){u=0,t.forEachNode((function(t){E(t.id),u+=1})),t.forEachLink(x)}function E(e){var n=l.get(e);if(!n){var r=t.getNode(e);if(!r)throw new Error("initBody() was called with unknown node id");var i=r.position;if(!i){var o=T(r);i=s.getBestNewBodyPosition(o)}n=s.addBodyAt(i),n.id=e,l.set(e,n),M(e),I(r)&&(n.isPinned=!0)}}function A(t){var e=t.id,n=l.get(e);n&&(l.delete(e),s.removeBody(n))}function x(t){M(t.fromId),M(t.toId);var e=l.get(t.fromId),n=l.get(t.toId),r=s.addSpring(e,n,t.length);h(t,r),c[t.id]=r}function C(e){var n=c[e.id];if(n){var r=t.getNode(e.fromId),i=t.getNode(e.toId);r&&M(r.id),i&&M(i.id),delete c[e.id],s.removeSpring(n)}}function T(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),r=0;r<n;++r){var i=t.links[r],o=i.fromId!==t.id?l.get(i.fromId):l.get(i.toId);o&&o.pos&&e.push(o)}return e}function M(t){var e=l.get(t);if(e.mass=a(t),Number.isNaN(e.mass))throw new Error("Node mass should be a number")}function I(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function k(t){var e=l.get(t);return e||(E(t),e=l.get(t)),e}function O(e){var n=t.getLinks(e);return n?1+n.length/3:1}function R(e){var n=t.getLinks(e);return n?1+n.size/3:1}}function o(){}},4760:function(t,e,n){n(7658);const r=n(5155);t.exports=function(t){return e;function e(e,n){let i=n&&n.indent||0,o=n&&void 0!==n.join?n.join:"\n",s=Array(i+1).join(" "),a=[];for(let l=0;l<t;++l){let t=r(l),n=0===l?"":s;a.push(n+e.replace(/{var}/g,t))}return a.join(o)}}},2354:function(t,e,n){t.exports=i,t.exports.generateFunctionBody=o;const r=n(4760);function i(t){let e=o(t);return new Function("bodies","settings","random",e)}function o(t){let e=r(t),n=`\n  var boundingBox = {\n    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}\n  };\n\n  return {\n    box: boundingBox,\n\n    update: updateBoundingBox,\n\n    reset: resetBoundingBox,\n\n    getBestNewPosition: function (neighbors) {\n      var ${e("base_{var} = 0",{join:", "})};\n\n      if (neighbors.length) {\n        for (var i = 0; i < neighbors.length; ++i) {\n          let neighborPos = neighbors[i].pos;\n          ${e("base_{var} += neighborPos.{var};",{indent:10})}\n        }\n\n        ${e("base_{var} /= neighbors.length;",{indent:8})}\n      } else {\n        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}\n      }\n\n      var springLength = settings.springLength;\n      return {\n        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}\n      };\n    }\n  };\n\n  function updateBoundingBox() {\n    var i = bodies.length;\n    if (i === 0) return; // No bodies - no borders.\n\n    ${e("var max_{var} = -Infinity;",{indent:4})}\n    ${e("var min_{var} = Infinity;",{indent:4})}\n\n    while(i--) {\n      // this is O(n), it could be done faster with quadtree, if we check the root node bounds\n      var bodyPos = bodies[i].pos;\n      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}\n      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}\n    }\n\n    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}\n    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}\n  }\n\n  function resetBoundingBox() {\n    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}\n  }\n`;return n}},3791:function(t,e,n){const r=n(4760);function i(t,e){let n=o(t,e),{Body:r}=new Function(n)();return r}function o(t,e){let n=`\n${a(t,e)}\n${s(t,e)}\nreturn {Body: Body, Vector: Vector};\n`;return n}function s(t){let e=r(t),n=e("{var}",{join:", "});return`\nfunction Body(${n}) {\n  this.isPinned = false;\n  this.pos = new Vector(${n});\n  this.force = new Vector();\n  this.velocity = new Vector();\n  this.mass = 1;\n\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.reset = function() {\n  this.force.reset();\n  this.springCount = 0;\n  this.springLength = 0;\n}\n\nBody.prototype.setPosition = function (${n}) {\n  ${e("this.pos.{var} = {var} || 0;",{indent:2})}\n};`}function a(t,e){let n=r(t),i="";e&&(i=`${n("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`);let o=n("{var}",{join:", "});return`function Vector(${o}) {\n  ${i}\n    if (typeof arguments[0] === 'object') {\n      // could be another vector\n      let v = arguments[0];\n      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}\n      ${n("this.{var} = v.{var};",{indent:4})}\n    } else {\n      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}\n    }\n  }\n  \n  Vector.prototype.reset = function () {\n    ${n("this.{var} = ",{join:""})}0;\n  };`}t.exports=i,t.exports.generateCreateBodyFunctionBody=o,t.exports.getVectorCode=a,t.exports.getBodyCode=s},905:function(t,e,n){const r=n(4760);function i(t){let e=o(t);return new Function("options",e)}function o(t){let e=r(t),n=`\n  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');\n\n  return {\n    update: function(body) {\n      ${e("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}\n    }\n  };\n`;return n}t.exports=i,t.exports.generateCreateDragForceFunctionBody=o},1709:function(t,e,n){const r=n(4760);function i(t){let e=o(t);return new Function("options","random",e)}function o(t){let e=r(t),n=`\n  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');\n  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');\n\n  return {\n    /**\n     * Updates forces acting on a spring\n     */\n    update: function (spring) {\n      var body1 = spring.from;\n      var body2 = spring.to;\n      var length = spring.length < 0 ? options.springLength : spring.length;\n      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}\n      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n      if (r === 0) {\n        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n      }\n\n      var d = r - length;\n      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;\n\n      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};\n      body1.springCount += 1;\n      body1.springLength += r;\n\n      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};\n      body2.springCount += 1;\n      body2.springLength += r;\n    }\n  };\n`;return n}t.exports=i,t.exports.generateCreateSpringForceFunctionBody=o},5670:function(t,e,n){const r=n(4760);function i(t){let e=o(t);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function o(t){let e=r(t),n=`\n  var length = bodies.length;\n  if (length === 0) return 0;\n\n  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}\n\n  for (var i = 0; i < length; ++i) {\n    var body = bodies[i];\n    if (body.isPinned) continue;\n\n    if (adaptiveTimeStepWeight && body.springCount) {\n      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);\n    }\n\n    var coeff = timeStep / body.mass;\n\n    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}\n    ${e("var v{var} = body.velocity.{var};",{indent:4})}\n    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});\n\n    if (v > 1) {\n      // We normalize it so that we move within timeStep range. \n      // for the case when v <= 1 - we let velocity to fade out.\n      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}\n    }\n\n    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}\n\n    ${e("body.pos.{var} += d{var};",{indent:4})}\n\n    ${e("t{var} += Math.abs(d{var});",{indent:4})}\n  }\n\n  return (${e("t{var} * t{var}",{join:" + "})})/length;\n`;return n}t.exports=i,t.exports.generateIntegratorFunctionBody=o},7099:function(t,e,n){n(7658);const r=n(4760),i=n(5155);function o(t){let e=s(t);return new Function(e)()}function s(t){let e=r(t),n=Math.pow(2,t),o=`\n${h()}\n${u(t)}\n${a(t)}\n${c(t)}\n${l(t)}\n\nfunction createQuadTree(options, random) {\n  options = options || {};\n  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;\n  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;\n\n  var gravity = options.gravity;\n  var updateQueue = [];\n  var insertStack = new InsertStack();\n  var theta = options.theta;\n\n  var nodesCache = [];\n  var currentInCache = 0;\n  var root = newNode();\n\n  return {\n    insertBodies: insertBodies,\n\n    /**\n     * Gets root node if it is present\n     */\n    getRoot: function() {\n      return root;\n    },\n\n    updateBodyForce: update,\n\n    options: function(newOptions) {\n      if (newOptions) {\n        if (typeof newOptions.gravity === 'number') {\n          gravity = newOptions.gravity;\n        }\n        if (typeof newOptions.theta === 'number') {\n          theta = newOptions.theta;\n        }\n\n        return this;\n      }\n\n      return {\n        gravity: gravity,\n        theta: theta\n      };\n    }\n  };\n\n  function newNode() {\n    // To avoid pressure on GC we reuse nodes.\n    var node = nodesCache[currentInCache];\n    if (node) {\n${f("      node.")}\n      node.body = null;\n      node.mass = ${e("node.mass_{var} = ",{join:""})}0;\n      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;\n    } else {\n      node = new QuadNode();\n      nodesCache[currentInCache] = node;\n    }\n\n    ++currentInCache;\n    return node;\n  }\n\n  function update(sourceBody) {\n    var queue = updateQueue;\n    var v;\n    ${e("var d{var};",{indent:4})}\n    var r; \n    ${e("var f{var} = 0;",{indent:4})}\n    var queueLength = 1;\n    var shiftIdx = 0;\n    var pushIdx = 1;\n\n    queue[0] = root;\n\n    while (queueLength) {\n      var node = queue[shiftIdx];\n      var body = node.body;\n\n      queueLength -= 1;\n      shiftIdx += 1;\n      var differentBody = (body !== sourceBody);\n      if (body && differentBody) {\n        // If the current node is a leaf node (and it is not source body),\n        // calculate the force exerted by the current node on body, and add this\n        // amount to body's net force.\n        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Poor man's protection against zero distance.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n\n        // This is standard gravitation force calculation but we divide\n        // by r^3 to save two operations when normalizing force vector.\n        v = gravity * body.mass * sourceBody.mass / (r * r * r);\n        ${e("f{var} += v * d{var};",{indent:8})}\n      } else if (differentBody) {\n        // Otherwise, calculate the ratio s / r,  where s is the width of the region\n        // represented by the internal node, and r is the distance between the body\n        // and the node's center-of-mass\n        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}\n        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n\n        if (r === 0) {\n          // Sorry about code duplication. I don't want to create many functions\n          // right away. Just want to see performance first.\n          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}\n          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});\n        }\n        // If s / r < θ, treat this internal node as a single body, and calculate the\n        // force it exerts on sourceBody, and add this amount to sourceBody's net force.\n        if ((node.max_${i(0)} - node.min_${i(0)}) / r < theta) {\n          // in the if statement above we consider node's width only\n          // because the region was made into square during tree creation.\n          // Thus there is no difference between using width or height.\n          v = gravity * node.mass * sourceBody.mass / (r * r * r);\n          ${e("f{var} += v * d{var};",{indent:10})}\n        } else {\n          // Otherwise, run the procedure recursively on each of the current node's children.\n\n          // I intentionally unfolded this loop, to save several CPU cycles.\n${d()}\n        }\n      }\n    }\n\n    ${e("sourceBody.force.{var} += f{var};",{indent:4})}\n  }\n\n  function insertBodies(bodies) {\n    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}\n    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}\n    var i = bodies.length;\n\n    // To reduce quad tree depth we are looking for exact bounding box of all particles.\n    while (i--) {\n      var pos = bodies[i].pos;\n      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}\n      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}\n    }\n\n    // Makes the bounds square.\n    var maxSideLength = -Infinity;\n    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}\n\n    currentInCache = 0;\n    root = newNode();\n    ${e("root.min_{var} = {var}min;",{indent:4})}\n    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}\n\n    i = bodies.length - 1;\n    if (i >= 0) {\n      root.body = bodies[i];\n    }\n    while (i--) {\n      insert(bodies[i], root);\n    }\n  }\n\n  function insert(newBody) {\n    insertStack.reset();\n    insertStack.push(root, newBody);\n\n    while (!insertStack.isEmpty()) {\n      var stackItem = insertStack.pop();\n      var node = stackItem.node;\n      var body = stackItem.body;\n\n      if (!node.body) {\n        // This is internal node. Update the total mass of the node and center-of-mass.\n        ${e("var {var} = body.pos.{var};",{indent:8})}\n        node.mass += body.mass;\n        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}\n\n        // Recursively insert the body in the appropriate quadrant.\n        // But first find the appropriate quadrant.\n        var quadIdx = 0; // Assume we are in the 0's quad.\n        ${e("var min_{var} = node.min_{var};",{indent:8})}\n        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}\n\n${s(8)}\n\n        var child = getChild(node, quadIdx);\n\n        if (!child) {\n          // The node is internal but this quadrant is not taken. Add\n          // subnode to it.\n          child = newNode();\n          ${e("child.min_{var} = min_{var};",{indent:10})}\n          ${e("child.max_{var} = max_{var};",{indent:10})}\n          child.body = body;\n\n          setChild(node, quadIdx, child);\n        } else {\n          // continue searching in this quadrant.\n          insertStack.push(child, body);\n        }\n      } else {\n        // We are trying to add to the leaf node.\n        // We have to convert current leaf into internal node\n        // and continue adding two nodes.\n        var oldBody = node.body;\n        node.body = null; // internal nodes do not cary bodies\n\n        if (isSamePosition(oldBody.pos, body.pos)) {\n          // Prevent infinite subdivision by bumping one node\n          // anywhere in this quadrant\n          var retriesCount = 3;\n          do {\n            var offset = random.nextDouble();\n            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}\n\n            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}\n            retriesCount -= 1;\n            // Make sure we don't bump it out of the box. If we do, next iteration should fix it\n          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));\n\n          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {\n            // This is very bad, we ran out of precision.\n            // if we do not return from the method we'll get into\n            // infinite loop here. So we sacrifice correctness of layout, and keep the app running\n            // Next layout iteration should get larger bounding box in the first step and fix this\n            return;\n          }\n        }\n        // Next iteration should subdivide node further.\n        insertStack.push(node, oldBody);\n        insertStack.push(node, body);\n      }\n    }\n  }\n}\nreturn createQuadTree;\n\n`;return o;function s(e){let n=[],r=Array(e+1).join(" ");for(let o=0;o<t;++o)n.push(r+`if (${i(o)} > max_${i(o)}) {`),n.push(r+`  quadIdx = quadIdx + ${Math.pow(2,o)};`),n.push(r+`  min_${i(o)} = max_${i(o)};`),n.push(r+`  max_${i(o)} = node.max_${i(o)};`),n.push(r+"}");return n.join("\n")}function d(){let t=Array(11).join(" "),e=[];for(let r=0;r<n;++r)e.push(t+`if (node.quad${r}) {`),e.push(t+`  queue[pushIdx] = node.quad${r};`),e.push(t+"  queueLength += 1;"),e.push(t+"  pushIdx += 1;"),e.push(t+"}");return e.join("\n")}function f(t){let e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}}function a(t){let e=r(t);return`\n  function isSamePosition(point1, point2) {\n    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}\n  \n    return ${e("d{var} < 1e-8",{join:" && "})};\n  }  \n`}function l(t){var e=Math.pow(2,t);return`\nfunction setChild(node, idx, child) {\n  ${n()}\n}`;function n(){let t=[];for(let n=0;n<e;++n){let e=0===n?"  ":"  else ";t.push(`${e}if (idx === ${n}) node.quad${n} = child;`)}return t.join("\n")}}function c(t){return`function getChild(node, idx) {\n${e()}\n  return null;\n}`;function e(){let e=[],n=Math.pow(2,t);for(let t=0;t<n;++t)e.push(`  if (idx === ${t}) return node.quad${t};`);return e.join("\n")}}function u(t){let e=r(t),n=Math.pow(2,t);var i=`\nfunction QuadNode() {\n  // body stored inside this node. In quad tree only leaf nodes (by construction)\n  // contain bodies:\n  this.body = null;\n\n  // Child nodes are stored in quads. Each quad is presented by number:\n  // 0 | 1\n  // -----\n  // 2 | 3\n${o("  this.")}\n\n  // Total mass of current node\n  this.mass = 0;\n\n  // Center of mass coordinates\n  ${e("this.mass_{var} = 0;",{indent:2})}\n\n  // bounding box coordinates\n  ${e("this.min_{var} = 0;",{indent:2})}\n  ${e("this.max_{var} = 0;",{indent:2})}\n}\n`;return i;function o(t){let e=[];for(let r=0;r<n;++r)e.push(`${t}quad${r} = null;`);return e.join("\n")}}function h(){return"\n/**\n * Our implementation of QuadTree is non-recursive to avoid GC hit\n * This data structure represent stack of elements\n * which we are trying to insert into quad tree.\n */\nfunction InsertStack () {\n    this.stack = [];\n    this.popIdx = 0;\n}\n\nInsertStack.prototype = {\n    isEmpty: function() {\n        return this.popIdx === 0;\n    },\n    push: function (node, body) {\n        var item = this.stack[this.popIdx];\n        if (!item) {\n            // we are trying to avoid memory pressure: create new element\n            // only when absolutely necessary\n            this.stack[this.popIdx] = new InsertStackElement(node, body);\n        } else {\n            item.node = node;\n            item.body = body;\n        }\n        ++this.popIdx;\n    },\n    pop: function () {\n        if (this.popIdx > 0) {\n            return this.stack[--this.popIdx];\n        }\n    },\n    reset: function () {\n        this.popIdx = 0;\n    }\n};\n\nfunction InsertStackElement(node, body) {\n    this.node = node; // QuadTree node\n    this.body = body; // physical body which needs to be inserted to node\n}\n"}t.exports=o,t.exports.generateQuadTreeFunctionBody=s,t.exports.getInsertStackCode=h,t.exports.getQuadNodeCode=u,t.exports.isSamePosition=a,t.exports.getChildBodyCode=c,t.exports.setChildBodyCode=l},5155:function(t){t.exports=function(t){return 0===t?"x":1===t?"y":2===t?"z":"c"+(t+1)}},6599:function(t,e,n){n(7658),t.exports=u;var r=n(3791),i=n(7099),o=n(2354),s=n(905),a=n(1709),l=n(5670),c={};function u(t){var e=n(3366),u=n(3232),d=n(1610);if(t){if(void 0!==t.springCoeff)throw new Error("springCoeff was renamed to springCoefficient");if(void 0!==t.dragCoeff)throw new Error("dragCoeff was renamed to dragCoefficient")}t=u(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var f=c[t.dimensions];if(!f){var p=t.dimensions;f={Body:r(p,t.debug),createQuadTree:i(p),createBounds:o(p),createDragForce:s(p),createSpringForce:a(p),integrate:l(p)},c[p]=f}var m=f.Body,g=f.createQuadTree,y=f.createBounds,v=f.createDragForce,w=f.createSpringForce,b=f.integrate,_=t=>new m(t),S=n(1857).random(42),E=[],A=[],x=g(t,S),C=y(E,t,S),T=w(t,S),M=v(t),I=0,k=[],O=new Map,R=0;P("nbody",U),P("spring",F);var D={bodies:E,quadTree:x,springs:A,settings:t,addForce:P,removeForce:L,getForces:B,step:function(){for(var e=0;e<k.length;++e)k[e](R);var n=b(E,t.timeStep,t.adaptiveTimeStepWeight);return R+=1,n},addBody:function(t){if(!t)throw new Error("Body is required");return E.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=_(t);return E.push(e),e},removeBody:function(t){if(t){var e=E.indexOf(t);if(!(e<0))return E.splice(e,1),0===E.length&&C.reset(),!0}},addSpring:function(t,n,r,i){if(!t||!n)throw new Error("Cannot add null spring to force simulator");"number"!==typeof r&&(r=-1);var o=new e(t,n,r,i>=0?i:-1);return A.push(o),o},getTotalMovement:function(){return I},removeSpring:function(t){if(t){var e=A.indexOf(t);return e>-1?(A.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return C.getBestNewPosition(t)},getBBox:N,getBoundingBox:N,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(e){return void 0!==e?(t.gravity=e,x.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,x.options({theta:e}),this):t.theta},random:S};return h(t,D),d(D),D;function N(){return C.update(),C.box}function P(t,e){if(O.has(t))throw new Error("Force "+t+" is already added");O.set(t,e),k.push(e)}function L(t){var e=k.indexOf(O.get(t));e<0||(k.splice(e,1),O.delete(t))}function B(){return O}function U(){if(0!==E.length){x.insertBodies(E);var t=E.length;while(t--){var e=E[t];e.isPinned||(e.reset(),x.updateBodyForce(e),M.update(e))}}}function F(){var t=A.length;while(t--)T.update(A[t])}}function h(t,e){for(var n in t)d(t,e,n)}function d(t,e,n){if(t.hasOwnProperty(n)&&"function"!==typeof e[n]){var r=Number.isFinite(t[n]);e[n]=r?function(r){if(void 0!==r){if(!Number.isFinite(r))throw new Error("Value of "+n+" should be a valid number.");return t[n]=r,e}return t[n]}:function(r){return void 0!==r?(t[n]=r,e):t[n]}}}},3366:function(t){function e(t,e,n,r){this.from=t,this.to=e,this.length=n,this.coefficient=r}t.exports=e},4747:function(t,e,n){n(7658),t.exports=i;var r=n(1610);function i(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!==typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,i={},c=0,u=t.multigraph?x:A,h=[],d=B,f=B,p=B,m=B,g={version:20,addNode:b,addLink:E,removeLink:I,removeNode:S,getNode:_,getNodeCount:C,getLinkCount:T,getEdgeCount:T,getLinksCount:T,getNodesCount:C,getLinks:M,forEachNode:z,forEachLinkedNode:N,forEachLink:D,beginUpdate:p,endUpdate:m,clear:R,hasLink:O,hasNode:_,getLink:O};return r(g),y(),g;function y(){var t=g.on;function e(){return g.beginUpdate=p=U,g.endUpdate=m=F,d=v,f=w,g.on=t,t.apply(g,arguments)}g.on=e}function v(t,e){h.push({link:t,changeType:e})}function w(t,e){h.push({node:t,changeType:e})}function b(t,n){if(void 0===t)throw new Error("Invalid node identifier");p();var r=_(t);return r?(r.data=n,f(r,"update")):(r=new o(t,n),f(r,"add")),e.set(t,r),m(),r}function _(t){return e.get(t)}function S(t){var n=_(t);if(!n)return!1;p();var r=n.links;return r&&(r.forEach(k),n.links=null),e.delete(t),f(n,"remove"),m(),!0}function E(t,e,r){p();var i=_(t)||b(t),o=_(e)||b(e),a=u(t,e,r),l=n.has(a.id);return n.set(a.id,a),s(i,a),t!==e&&s(o,a),d(a,l?"update":"add"),m(),a}function A(t,e,r){var i=l(t,e),o=n.get(i);return o?(o.data=r,o):new a(t,e,r,i)}function x(t,e,n){var r=l(t,e),o=i.hasOwnProperty(r);if(o||O(t,e)){o||(i[r]=0);var s="@"+ ++i[r];r=l(t+s,e+s)}return new a(t,e,n,r)}function C(){return e.size}function T(){return n.size}function M(t){var e=_(t);return e?e.links:null}function I(t,e){return void 0!==e&&(t=O(t,e)),k(t)}function k(t){if(!t)return!1;if(!n.get(t.id))return!1;p(),n.delete(t.id);var e=_(t.fromId),r=_(t.toId);return e&&e.links.delete(t),r&&r.links.delete(t),d(t,"remove"),m(),!0}function O(t,e){if(void 0!==t&&void 0!==e)return n.get(l(t,e))}function R(){p(),z((function(t){S(t.id)})),m()}function D(t){if("function"===typeof t){var e=n.values(),r=e.next();while(!r.done){if(t(r.value))return!0;r=e.next()}}}function N(t,e,n){var r=_(t);if(r&&r.links&&"function"===typeof e)return n?L(r.links,t,e):P(r.links,t,e)}function P(t,n,r){var i,o=t.values(),s=o.next();while(!s.done){var a=s.value,l=a.fromId===n?a.toId:a.fromId;if(i=r(e.get(l),a),i)return!0;s=o.next()}}function L(t,n,r){var i,o=t.values(),s=o.next();while(!s.done){var a=s.value;if(a.fromId===n&&(i=r(e.get(a.toId),a),i))return!0;s=o.next()}}function B(){}function U(){c+=1}function F(){c-=1,0===c&&h.length>0&&(g.fire("changed",h),h.length=0)}function z(t){if("function"!==typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);var n=e.values(),r=n.next();while(!r.done){if(t(r.value))return!0;r=n.next()}}}function o(t,e){this.id=t,this.links=null,this.data=e}function s(t,e){t.links?t.links.add(e):t.links=new Set([e])}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function l(t,e){return t.toString()+"👉 "+e.toString()}},3232:function(t){function e(t,n){var r;if(t||(t={}),n)for(r in n)if(n.hasOwnProperty(r)){var i=t.hasOwnProperty(r),o=typeof n[r],s=!i||typeof t[r]!==o;s?t[r]=n[r]:"object"===o&&(t[r]=e(t[r],n[r]))}return t}t.exports=e},1857:function(t){function e(t){var e="number"===typeof t?t:+new Date;return new n(e)}function n(t){this.seed=t}function r(){var t,e,n;do{e=2*this.nextDouble()-1,n=2*this.nextDouble()-1,t=e*e+n*n}while(t>=1||0===t);return e*Math.sqrt(-2*Math.log(t)/t)}function i(){var t=1.5,e=Math.pow(o(1+t)*Math.sin(Math.PI*t/2)/(o((1+t)/2)*t*Math.pow(2,(t-1)/2)),1/t);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),1/t)}function o(t){return Math.sqrt(2*Math.PI/t)*Math.pow(1/Math.E*(t+1/(12*t-1/(10*t))),t)}function s(){var t=this.seed;return t=t+2127912214+(t<<12)&4294967295,t=4294967295&(3345072700^t^t>>>19),t=t+374761393+(t<<5)&4294967295,t=4294967295&(t+3550635116^t<<9),t=t+4251993797+(t<<3)&4294967295,t=4294967295&(3042594569^t^t>>>16),this.seed=t,(268435455&t)/268435456}function a(t){return Math.floor(this.nextDouble()*t)}function l(t,n){var r=n||e();if("function"!==typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:o,shuffle:i};function i(){var e,n,i;for(e=t.length-1;e>0;--e)n=r.next(e+1),i=t[n],t[n]=t[e],t[e]=i;return t}function o(e){var n,i,o;for(n=t.length-1;n>0;--n)i=r.next(n+1),o=t[i],t[i]=t[n],t[n]=o,e(o);t.length&&e(t[0])}}t.exports=e,t.exports.random=e,t.exports.randomIterator=l,n.prototype.next=a,n.prototype.nextDouble=s,n.prototype.uniform=s,n.prototype.gaussian=r,n.prototype.levy=i},9437:function(t,e,n){"use strict";const r=n(5711),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,({message:t}=t)):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const s=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},a=t=>i.includes(t),l=(t,e)=>new Promise(((n,i)=>{e={onFailedAttempt:()=>{},retries:10,...e};const l=r.operation(e);l.attempt((async r=>{try{n(await t(r))}catch(c){if(!(c instanceof Error))return void i(new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`));if(c instanceof o)l.stop(),i(c.originalError);else if(c instanceof TypeError&&!a(c.message))l.stop(),i(c);else{s(c,r,e);try{await e.onFailedAttempt(c)}catch(c){return void i(c)}l.retry(c)||i(l.mainError())}}}))}));t.exports=l,t.exports["default"]=l,t.exports.AbortError=o},6425:function(t,e,n){"use strict";t.exports=n(9507)},9507:function(t,e,n){"use strict";var r=e;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(7156),r.BufferWriter=n(8252),r.Reader=n(9799),r.BufferReader=n(8894),r.util=n(7102),r.rpc=n(7753),r.roots=n(358),r.configure=i,i()},9799:function(t,e,n){"use strict";n(3767),n(8585),n(8696),t.exports=l;var r,i=n(7102),o=i.LongBits,s=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function l(t){this.buf=t,this.pos=0,this.len=t.length}var c="undefined"!==typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new l(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new l(t);throw Error("illegal buffer")},u=function(){return i.Buffer?function(t){return(l.create=function(t){return i.Buffer.isBuffer(t)?new r(t):c(t)})(t)}:c};function h(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return t}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},l.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},l.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},l.prototype.skip=function(t){if("number"===typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(t=7&this.uint32()))this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},l._configure=function(t){r=t,l.create=u(),r._configure();var e=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},8894:function(t,e,n){"use strict";t.exports=o;var r=n(9799);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(7102);function o(t){r.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},358:function(t){"use strict";t.exports={}},7753:function(t,e,n){"use strict";var r=e;r.Service=n(964)},964:function(t,e,n){"use strict";t.exports=i;var r=n(7102);function i(t,e,n){if("function"!==typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(t,a,e,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,n){if(t)return a.emit("error",t,e),s(t);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",n,e),s(null,n)}a.end(!0)}))}catch(l){return a.emit("error",l,e),void setTimeout((function(){s(l)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},6350:function(t,e,n){"use strict";t.exports=i;var r=n(7102);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"===typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===s?o:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},7102:function(t,e,n){"use strict";n(3767),n(8585),n(8696);var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function o(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(5186),r.base64=n(8673),r.EventEmitter=n(8825),r.float=n(2913),r.inquire=n(6332),r.utf8=n(9561),r.pool=n(1168),r.LongBits=n(6350),r.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"===typeof t||t instanceof String},r.isObject=function(t){return t&&"object"===typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"===typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"===typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},7156:function(t,e,n){"use strict";t.exports=h;var r,i=n(7102),o=i.LongBits,s=i.base64,a=i.utf8;function l(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function c(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function f(t,e,n){e[n]=255&t}function p(t,e,n){while(t>127)e[n++]=127&t|128,t>>>=7;e[n]=t}function m(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,n){while(t.hi)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;while(t.lo>127)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function y(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new l(t,e,n),this.len+=e,this},m.prototype=Object.create(l.prototype),m.prototype.fn=p,h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new m((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(g,10,o.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=o.from(t);return this._push(g,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(g,e.length(),e)},h.prototype.bool=function(t){return this._push(f,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=o.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var v=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(i.isString(t)){var n=h.alloc(e=s.length(t));s.decode(t,n,0),t=n}return this.uint32(e)._push(v,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},h.prototype.finish=function(){var t=this.head.next,e=this.constructor.alloc(this.len),n=0;while(t)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},h._configure=function(t){r=t,h.create=d(),r._configure()}},8252:function(t,e,n){"use strict";n(3767),n(8585),n(8696),t.exports=o;var r=n(7156);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(7102);function o(){r.call(this)}function s(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},o._configure()},8385:function(t,e,n){const r=n(890),i=n(4553),o=n(8258),s=n(8593);function a(t,e,n,o,s){const a=[].slice.call(arguments,1),l=a.length,c="function"===typeof a[l-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(n=e,e=o=void 0):2!==l||e.getContext||(o=n,n=e,e=void 0),new Promise((function(r,s){try{const s=i.create(n,o);r(t(s,e,o))}catch(a){s(a)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(s=n,n=e,e=o=void 0):3===l&&(e.getContext&&"undefined"===typeof s?(s=o,o=void 0):(s=o,o=n,n=e,e=void 0));try{const r=i.create(n,o);s(null,t(r,e,o))}catch(u){s(u)}}e.create=i.create,e.toCanvas=a.bind(null,o.render),e.toDataURL=a.bind(null,o.renderToDataURL),e.toString=a.bind(null,(function(t,e,n){return s.render(t,n)}))},890:function(t){t.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},9070:function(t,e,n){n(7658);const r=n(4288).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=r(t),i=145===n?26:2*Math.ceil((n-13)/(2*e-2)),o=[n-7];for(let r=1;r<e-1;r++)o[r]=o[r-1]-i;return o.push(6),o.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),i=r.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||n.push([r[e],r[t]]);return n}},6355:function(t,e,n){const r=n(5461),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(t){this.mode=r.ALPHANUMERIC,this.data=t}o.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*i.indexOf(this.data[e]);n+=i.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},t.exports=o},495:function(t,e,n){function r(){this.buffer=[],this.length=0}n(7658),r.prototype={get:function(t){const e=Math.floor(t/8);return 1===(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1===(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=r},3880:function(t,e,n){function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}n(3767),n(8585),n(8696),r.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)},r.prototype.get=function(t,e){return this.data[t*this.size+e]},r.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},r.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=r},7591:function(t,e,n){n(3767),n(8585),n(8696);const r=n(4700),i=n(5461);function o(t){this.mode=i.BYTE,"string"===typeof t&&(t=r(t)),this.data=new Uint8Array(t)}o.getBitsLength=function(t){return 8*t},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},t.exports=o},9757:function(t,e,n){const r=n(2839),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return i[4*(t-1)+0];case r.M:return i[4*(t-1)+1];case r.Q:return i[4*(t-1)+2];case r.H:return i[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}}},2839:function(t,e){function n(t){if("string"!==typeof t)throw new Error("Param is not a string");const n=t.toLowerCase();switch(n){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&"undefined"!==typeof t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,r){if(e.isValid(t))return t;try{return n(t)}catch(i){return r}}},3375:function(t,e,n){const r=n(4288).getSymbolSize,i=7;e.getPositions=function(t){const e=r(t);return[[0,0],[e-i,0],[0,e-i]]}},7874:function(t,e,n){const r=n(4288),i=1335,o=21522,s=r.getBCHDigit(i);e.getEncodedBits=function(t,e){const n=t.bit<<3|e;let a=n<<10;while(r.getBCHDigit(a)-s>=0)a^=i<<r.getBCHDigit(a)-s;return(n<<10|a)^o}},7512:function(t,e,n){n(3767),n(8585),n(8696);const r=new Uint8Array(512),i=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)r[e]=t,i[t]=e,t<<=1,256&t&&(t^=285);for(let e=255;e<512;e++)r[e]=r[e-255]})(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return i[t]},e.exp=function(t){return r[t]},e.mul=function(t,e){return 0===t||0===e?0:r[i[t]+i[e]]}},9176:function(t,e,n){const r=n(5461),i=n(4288);function o(t){this.mode=r.KANJI,this.data=t}o.getBitsLength=function(t){return 13*t},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=i.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}},t.exports=o},1840:function(t,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};function r(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return r%3===0;case e.Patterns.PATTERN011:return(n+r)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case e.Patterns.PATTERN101:return n*r%2+n*r%3===0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let r=0,i=0,o=0,s=null,a=null;for(let l=0;l<e;l++){i=o=0,s=a=null;for(let c=0;c<e;c++){let e=t.get(l,c);e===s?i++:(i>=5&&(r+=n.N1+(i-5)),s=e,i=1),e=t.get(c,l),e===a?o++:(o>=5&&(r+=n.N1+(o-5)),a=e,o=1)}i>=5&&(r+=n.N1+(i-5)),o>=5&&(r+=n.N1+(o-5))}return r},e.getPenaltyN2=function(t){const e=t.size;let r=0;for(let n=0;n<e-1;n++)for(let i=0;i<e-1;i++){const e=t.get(n,i)+t.get(n,i+1)+t.get(n+1,i)+t.get(n+1,i+1);4!==e&&0!==e||r++}return r*n.N2},e.getPenaltyN3=function(t){const e=t.size;let r=0,i=0,o=0;for(let n=0;n<e;n++){i=o=0;for(let s=0;s<e;s++)i=i<<1&2047|t.get(n,s),s>=10&&(1488===i||93===i)&&r++,o=o<<1&2047|t.get(s,n),s>=10&&(1488===o||93===o)&&r++}return r*n.N3},e.getPenaltyN4=function(t){let e=0;const r=t.data.length;for(let n=0;n<r;n++)e+=t.data[n];const i=Math.abs(Math.ceil(100*e/r/5)-10);return i*n.N4},e.applyMask=function(t,e){const n=e.size;for(let i=0;i<n;i++)for(let o=0;o<n;o++)e.isReserved(o,i)||e.xor(o,i,r(t,o,i))},e.getBestMask=function(t,n){const r=Object.keys(e.Patterns).length;let i=0,o=1/0;for(let s=0;s<r;s++){n(s),e.applyMask(s,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),r<o&&(o=r,i=s)}return i}},5461:function(t,e,n){const r=n(5057),i=n(3555);function o(t){if("string"!==typeof t)throw new Error("Param is not a string");const n=t.toLowerCase();switch(n){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return i.testNumeric(t)?e.NUMERIC:i.testAlphanumeric(t)?e.ALPHANUMERIC:i.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return o(t)}catch(r){return n}}},9186:function(t,e,n){const r=n(5461);function i(t){this.mode=r.NUMERIC,this.data=t.toString()}i.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*i+1))},t.exports=i},823:function(t,e,n){n(3767),n(8585),n(8696);const r=n(7512);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let i=0;i<t.length;i++)for(let o=0;o<e.length;o++)n[i+o]^=r.mul(t[i],e[o]);return n},e.mod=function(t,e){let n=new Uint8Array(t);while(n.length-e.length>=0){const t=n[0];for(let o=0;o<e.length;o++)n[o]^=r.mul(e[o],t);let i=0;while(i<n.length&&0===n[i])i++;n=n.slice(i)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let i=0;i<t;i++)n=e.mul(n,new Uint8Array([1,r.exp(i)]));return n}},4553:function(t,e,n){n(3767),n(8585),n(8696);const r=n(4288),i=n(2839),o=n(495),s=n(3880),a=n(9070),l=n(3375),c=n(1840),u=n(9757),h=n(4365),d=n(9693),f=n(7874),p=n(5461),m=n(8439);function g(t,e){const n=t.size,r=l.getPositions(e);for(let i=0;i<r.length;i++){const e=r[i][0],o=r[i][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||n<=e+r))for(let i=-1;i<=7;i++)o+i<=-1||n<=o+i||(r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4?t.set(e+r,o+i,!0,!0):t.set(e+r,o+i,!1,!0))}}function y(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2===0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}function v(t,e){const n=a.getPositions(e);for(let r=0;r<n.length;r++){const e=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?t.set(e+n,i+r,!0,!0):t.set(e+n,i+r,!1,!0)}}function w(t,e){const n=t.size,r=d.getEncodedBits(e);let i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+n-8-3,s=1===(r>>a&1),t.set(i,o,s,!0),t.set(o,i,s,!0)}function b(t,e,n){const r=t.size,i=f.getEncodedBits(e,n);let o,s;for(o=0;o<15;o++)s=1===(i>>o&1),o<6?t.set(o,8,s,!0):o<8?t.set(o+1,8,s,!0):t.set(r-15+o,8,s,!0),o<8?t.set(8,r-o-1,s,!0):o<9?t.set(8,15-o-1+1,s,!0):t.set(8,15-o-1,s,!0);t.set(r-8,8,1,!0)}function _(t,e){const n=t.size;let r=-1,i=n-1,o=7,s=0;for(let a=n-1;a>0;a-=2){6===a&&a--;while(1){for(let n=0;n<2;n++)if(!t.isReserved(i,a-n)){let r=!1;s<e.length&&(r=1===(e[s]>>>o&1)),t.set(i,a-n,r),o--,-1===o&&(s++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}}function S(t,e,n){const i=new o;n.forEach((function(e){i.put(e.mode.bit,4),i.put(e.getLength(),p.getCharCountIndicator(e.mode,t)),e.write(i)}));const s=r.getSymbolTotalCodewords(t),a=u.getTotalCodewordsCount(t,e),l=8*(s-a);i.getLengthInBits()+4<=l&&i.put(0,4);while(i.getLengthInBits()%8!==0)i.putBit(0);const c=(l-i.getLengthInBits())/8;for(let r=0;r<c;r++)i.put(r%2?17:236,8);return E(i,t,e)}function E(t,e,n){const i=r.getSymbolTotalCodewords(e),o=u.getTotalCodewordsCount(e,n),s=i-o,a=u.getBlocksCount(e,n),l=i%a,c=a-l,d=Math.floor(i/a),f=Math.floor(s/a),p=f+1,m=d-f,g=new h(m);let y=0;const v=new Array(a),w=new Array(a);let b=0;const _=new Uint8Array(t.buffer);for(let r=0;r<a;r++){const t=r<c?f:p;v[r]=_.slice(y,y+t),w[r]=g.encode(v[r]),y+=t,b=Math.max(b,t)}const S=new Uint8Array(i);let E,A,x=0;for(E=0;E<b;E++)for(A=0;A<a;A++)E<v[A].length&&(S[x++]=v[A][E]);for(E=0;E<m;E++)for(A=0;A<a;A++)S[x++]=w[A][E];return S}function A(t,e,n,i){let o;if(Array.isArray(t))o=m.fromArray(t);else{if("string"!==typeof t)throw new Error("Invalid data");{let r=e;if(!r){const e=m.rawSplit(t);r=d.getBestVersionForData(e,n)}o=m.fromString(t,r||40)}}const a=d.getBestVersionForData(o,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else e=a;const l=S(e,n,o),u=r.getSymbolSize(e),h=new s(u);return g(h,e),y(h),v(h,e),b(h,n,0),e>=7&&w(h,e),_(h,l),isNaN(i)&&(i=c.getBestMask(h,b.bind(null,h,n))),c.applyMask(i,h),b(h,n,i),{modules:h,version:e,errorCorrectionLevel:n,maskPattern:i,segments:o}}e.create=function(t,e){if("undefined"===typeof t||""===t)throw new Error("No input text");let n,o,s=i.M;return"undefined"!==typeof e&&(s=i.from(e.errorCorrectionLevel,i.M),n=d.from(e.version),o=c.from(e.maskPattern),e.toSJISFunc&&r.setToSJISFunction(e.toSJISFunc)),A(t,n,s,o)}},4365:function(t,e,n){n(3767),n(8585),n(8696);const r=n(823);function i(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=r.mod(e,this.genPoly),i=this.degree-n.length;if(i>0){const t=new Uint8Array(this.degree);return t.set(n,i),t}return n},t.exports=i},3555:function(t,e){const n="[0-9]+",r="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";e.KANJI=new RegExp(i,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(o,"g"),e.NUMERIC=new RegExp(n,"g"),e.ALPHANUMERIC=new RegExp(r,"g");const s=new RegExp("^"+i+"$"),a=new RegExp("^"+n+"$"),l=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return s.test(t)},e.testNumeric=function(t){return a.test(t)},e.testAlphanumeric=function(t){return l.test(t)}},8439:function(t,e,n){n(7658);const r=n(5461),i=n(9186),o=n(6355),s=n(7591),a=n(9176),l=n(3555),c=n(4288),u=n(8716);function h(t){return unescape(encodeURIComponent(t)).length}function d(t,e,n){const r=[];let i;while(null!==(i=t.exec(n)))r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function f(t){const e=d(l.NUMERIC,r.NUMERIC,t),n=d(l.ALPHANUMERIC,r.ALPHANUMERIC,t);let i,o;c.isKanjiModeEnabled()?(i=d(l.BYTE,r.BYTE,t),o=d(l.KANJI,r.KANJI,t)):(i=d(l.BYTE_KANJI,r.BYTE,t),o=[]);const s=e.concat(n,i,o);return s.sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function p(t,e){switch(e){case r.NUMERIC:return i.getBitsLength(t);case r.ALPHANUMERIC:return o.getBitsLength(t);case r.KANJI:return a.getBitsLength(t);case r.BYTE:return s.getBitsLength(t)}}function m(t){return t.reduce((function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}function g(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];switch(i.mode){case r.NUMERIC:e.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:e.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:e.push([i,{data:i.data,mode:r.BYTE,length:h(i.data)}]);break;case r.BYTE:e.push([{data:i.data,mode:r.BYTE,length:h(i.data)}])}}return e}function y(t,e){const n={},i={start:{}};let o=["start"];for(let s=0;s<t.length;s++){const a=t[s],l=[];for(let t=0;t<a.length;t++){const c=a[t],u=""+s+t;l.push(u),n[u]={node:c,lastCount:0},i[u]={};for(let t=0;t<o.length;t++){const s=o[t];n[s]&&n[s].node.mode===c.mode?(i[s][u]=p(n[s].lastCount+c.length,c.mode)-p(n[s].lastCount,c.mode),n[s].lastCount+=c.length):(n[s]&&(n[s].lastCount=c.length),i[s][u]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,e))}}o=l}for(let r=0;r<o.length;r++)i[o[r]].end=0;return{map:i,table:n}}function v(t,e){let n;const l=r.getBestModeForData(t);if(n=r.from(e,l),n!==r.BYTE&&n.bit<l.bit)throw new Error('"'+t+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(l));switch(n!==r.KANJI||c.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(t);case r.ALPHANUMERIC:return new o(t);case r.KANJI:return new a(t);case r.BYTE:return new s(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"===typeof e?t.push(v(e,null)):e.data&&t.push(v(e.data,e.mode)),t}),[])},e.fromString=function(t,n){const r=f(t,c.isKanjiModeEnabled()),i=g(r),o=y(i,n),s=u.find_path(o.map,"start","end"),a=[];for(let e=1;e<s.length-1;e++)a.push(o.table[s[e]].node);return e.fromArray(m(a))},e.rawSplit=function(t){return e.fromArray(f(t,c.isKanjiModeEnabled()))}},4288:function(t,e){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){let e=0;while(0!==t)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!==typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return"undefined"!==typeof n},e.toSJIS=function(t){return n(t)}},5057:function(t,e){e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},9693:function(t,e,n){const r=n(4288),i=n(9757),o=n(2839),s=n(5461),a=n(5057),l=7973,c=r.getBCHDigit(l);function u(t,n,r){for(let i=1;i<=40;i++)if(n<=e.getCapacity(i,r,t))return i}function h(t,e){return s.getCharCountIndicator(t,e)+4}function d(t,e){let n=0;return t.forEach((function(t){const r=h(t.mode,e);n+=r+t.getBitsLength()})),n}function f(t,n){for(let r=1;r<=40;r++){const i=d(t,r);if(i<=e.getCapacity(r,n,s.MIXED))return r}}e.from=function(t,e){return a.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!a.isValid(t))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=s.BYTE);const o=r.getSymbolTotalCodewords(t),l=i.getTotalCodewordsCount(t,e),c=8*(o-l);if(n===s.MIXED)return c;const u=c-h(n,t);switch(n){case s.NUMERIC:return Math.floor(u/10*3);case s.ALPHANUMERIC:return Math.floor(u/11*2);case s.KANJI:return Math.floor(u/13);case s.BYTE:default:return Math.floor(u/8)}},e.getBestVersionForData=function(t,e){let n;const r=o.from(e,o.M);if(Array.isArray(t)){if(t.length>1)return f(t,r);if(0===t.length)return 1;n=t[0]}else n=t;return u(n.mode,n.getLength(),r)},e.getEncodedBits=function(t){if(!a.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;while(r.getBCHDigit(e)-c>=0)e^=l<<r.getBCHDigit(e)-c;return t<<12|e}},8258:function(t,e,n){const r=n(8920);function i(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}function o(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}e.render=function(t,e,n){let s=n,a=e;"undefined"!==typeof s||e&&e.getContext||(s=e,e=void 0),e||(a=o()),s=r.getOptions(s);const l=r.getImageWidth(t.modules.size,s),c=a.getContext("2d"),u=c.createImageData(l,l);return r.qrToImageData(u.data,t,s),i(c,a,l),c.putImageData(u,0,0),a},e.renderToDataURL=function(t,n,r){let i=r;"undefined"!==typeof i||n&&n.getContext||(i=n,n=void 0),i||(i={});const o=e.render(t,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}},8593:function(t,e,n){const r=n(8920);function i(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(t,e,n){let r=t+e;return"undefined"!==typeof n&&(r+=" "+n),r}function s(t,e,n){let r="",i=0,s=!1,a=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),u=Math.floor(l/e);c||s||(s=!0),t[l]?(a++,l>0&&c>0&&t[l-1]||(r+=s?o("M",c+n,.5+u+n):o("m",i,0),i=0,s=!1),c+1<e&&t[l+1]||(r+=o("h",a),a=0)):i++}return r}e.render=function(t,e,n){const o=r.getOptions(e),a=t.modules.size,l=t.modules.data,c=a+2*o.margin,u=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+i(o.color.dark,"stroke")+' d="'+s(l,a,o.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',f=o.width?'width="'+o.width+'" height="'+o.width+'" ':"",p='<svg xmlns="http://www.w3.org/2000/svg" '+f+d+' shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"===typeof n&&n(null,p),p}},8920:function(t,e,n){function r(t){if("number"===typeof t&&(t=t.toString()),"string"!==typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}n(7658),e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e="undefined"===typeof t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:n,scale:n?4:i,margin:e,color:{dark:r(t.color.dark||"#000000ff"),light:r(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const i=n.modules.size,o=n.modules.data,s=e.getScale(i,r),a=Math.floor((i+2*r.margin)*s),l=r.margin*s,c=[r.color.light,r.color.dark];for(let e=0;e<a;e++)for(let n=0;n<a;n++){let u=4*(e*a+n),h=r.color.light;if(e>=l&&n>=l&&e<a-l&&n<a-l){const t=Math.floor((e-l)/s),r=Math.floor((n-l)/s);h=c[o[t*i+r]?1:0]}t[u++]=h.r,t[u++]=h.g,t[u++]=h.b,t[u]=h.a}}},3864:function(t,e,n){n(3767),n(8585),n(8696);const{instantiate:r}=n(5713);function i(t={}){if(!i.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([e],{type:"application/wasm"})),t)}i.supported="undefined"!==typeof WebAssembly,t.exports=i},7393:function(t,e,n){const r=n(2282),i=n(3864),o=async(t,e,n,o,s)=>{const a=await i();return new r(a,t,e,n,o,s)};t.exports={Rabin:r,create:o}},2282:function(t,e,n){n(3767),n(8585),n(8696);class r{constructor(t,e=12,n=8192,r=32768,i=64,o){this.bits=e,this.min=n,this.max=r,this.asModule=t,this.rabin=new t.Rabin(e,n,r,i,o),this.polynomial=o}fingerprint(t){const{__retain:e,__release:n,__allocArray:r,__getInt32Array:i,Int32Array_ID:o,Uint8Array_ID:s}=this.asModule,a=new Int32Array(Math.ceil(t.length/this.min)),l=e(r(o,a)),c=e(r(s,t)),u=this.rabin.fingerprint(c,l),h=i(u);n(c),n(l);const d=h.indexOf(0);return d>=0?h.subarray(0,d):h}}t.exports=r},5431:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(t,e){void 0===e&&(e={});var n=e.registrationOptions;void 0===n&&(n={}),delete e.registrationOptions;var o=function(t){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];e&&e[t]&&e[t].apply(e,n)};"serviceWorker"in navigator&&r.then((function(){i()?(l(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)}))):(a(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)})))}))}function s(t,e){navigator.onLine||t("offline"),t("error",e)}function a(t,e,n){navigator.serviceWorker.register(t,n).then((function(t){e("registered",t),t.waiting?e("updated",t):t.onupdatefound=function(){e("updatefound",t);var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?e("updated",t):e("cached",t))}}})).catch((function(t){return s(e,t)}))}function l(t,e,n){fetch(t).then((function(r){404===r.status?(e("error",new Error("Service worker not found at "+t)),c()):-1===r.headers.get("content-type").indexOf("javascript")?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),c()):a(t,e,n)})).catch((function(t){return s(e,t)}))}function c(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){return s(emit,t)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(t){return window.addEventListener("load",t)})):{then:function(t){return window.addEventListener("load",t)}})},5711:function(t,e,n){t.exports=n(7334)},7334:function(t,e,n){n(7658);var r=n(8463);e.operation=function(t){var n=e.timeouts(t);return new r(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in t)e[n]=t[n];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<e.retries;i++)r.push(this.createTimeout(i,e));return t&&t.forever&&!r.length&&r.push(this.createTimeout(i,e)),r.sort((function(t,e){return t-e})),r},e.createTimeout=function(t,e){var n=e.randomize?Math.random()+1:1,r=Math.round(n*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout),r},e.wrap=function(t,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],t)"function"===typeof t[i]&&r.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=t[s];t[s]=function(r){var i=e.operation(n),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(t){i.retry(t)||(t&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){r.apply(t,o)}))}.bind(t,a),t[s].options=n}}},8463:function(t,e,n){function r(t,e){"boolean"===typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}n(7658),n(541),t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=n&&(e=i,n=s)}return e}},1946:function(t,e,n){"use strict";n(7658),n(541);const r=7;function i(t,e){return t+o(e)}function o(t){let e=t;return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),16843009*(e+(e>>4)&252645135)>>24}function s(t,e){return t[0]-e[0]}function a(t){return t[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(t,e){let n=this._internalPositionFor(t,!1);if(void 0===e)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(t),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(t),this._changedData=!0):r=!0,this._setInternalPos(n,t,e,r),this._changedLength=!0}}unset(t){this.set(t,void 0)}get(t){this._sortData();const e=this._internalPositionFor(t,!0);if(-1!==e)return this._data[e][1]}push(t){return this.set(this.length,t),this.length}get length(){if(this._sortData(),this._changedLength){const t=this._data[this._data.length-1];this._length=t?t[0]+1:0,this._changedLength=!1}return this._length}forEach(t){let e=0;while(e<this.length)t(this.get(e),e,this),e++}map(t){let e=0,n=new Array(this.length);while(e<this.length)n[e]=t(this.get(e),e,this),e++;return n}reduce(t,e){let n=0,r=e;while(n<this.length){const e=this.get(n);r=t(r,e,n),n++}return r}find(t){let e,n,r=0;while(r<this.length&&!e)n=this.get(r),e=t(n),r++;return e?n:void 0}_internalPositionFor(t,e){const n=this._bytePosFor(t,e);if(n>=this._bitArrays.length)return-1;const s=this._bitArrays[n],a=t-n*r,l=(s&1<<a)>0;if(!l)return-1;const c=this._bitArrays.slice(0,n).reduce(i,0),u=~(4294967295<<a+1),h=o(s&u),d=c+h-1;return d}_bytePosFor(t,e){const n=Math.floor(t/r),i=n+1;while(!e&&this._bitArrays.length<i)this._bitArrays.push(0);return n}_setBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]|=1<<t-e*r}_unsetBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]&=~(1<<t-e*r)}_setInternalPos(t,e,n,r){const i=this._data,o=[e,n];if(r)this._sortData(),i[t]=o;else{if(i.length)if(i[i.length-1][0]>=e)i.push(o);else if(i[0][0]<=e)i.unshift(o);else{const t=Math.round(i.length/2);this._data=i.slice(0,t).concat(o).concat(i.slice(t))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(t){this._data.splice(t,1)}_sortData(){this._changedData&&this._data.sort(s),this._changedData=!1}bitField(){const t=[];let e,n=8,r=0,i=0;const o=this._bitArrays.slice();while(o.length||r){0===r&&(e=o.shift(),r=7);const s=Math.min(r,n),a=~(255<<s),l=e&a;i|=l<<8-n,e>>>=s,r-=s,n-=s,n&&(r||o.length)||(t.push(i),i=0,n=8)}for(var s=t.length-1;s>0;s--){const e=t[s];if(0!==e)break;t.pop()}return t}compactArray(){return this._sortData(),this._data.map(a)}}},1978:function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=!1),n&&(e/=t,t=1);var r,i=[],o=0,s=0,a=function(){var n=o+e,l=Date.now();if(l<n)return void 0!==r&&clearTimeout(r),void(r=setTimeout(a,n-l));o=l,s=0;for(var c=0,u=i.splice(0,t);c<u.length;c++){var h=u[c];s++,h()}r=i.length?setTimeout(a,e):void 0};return function(n){return new Promise((function(l,c){var u=function(){return Promise.resolve().then(n).then(l).catch(c)},h=Date.now();void 0===r&&h-o>e&&(o=h,s=0),s++<t?u():(i.push(u),void 0===r&&(r=setTimeout(a,o+e-h)))}))}}n(7658),Object.defineProperty(e,"__esModule",{value:!0}),t.exports=r,e["default"]=r},3029:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});const r="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:r};n(3767),n(8585),n(8696);let o;const s=new Uint8Array(16);function a(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(s)}n(7658);const l=[];for(let d=0;d<256;++d)l.push((d+256).toString(16).slice(1));function c(t,e=0){return l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]}function u(t,e,n){if(i.randomUUID&&!e&&!t)return i.randomUUID();t=t||{};const r=t.random||(t.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return c(r)}var h=u},2706:function(t){t.exports=r;var e=128,n=127;function r(t,i){var o,s=0,a=(i=i||0,0),l=i,c=t.length;do{if(l>=c||a>49)throw r.bytes=0,new RangeError("Could not decode varint");o=t[l++],s+=a<28?(o&n)<<a:(o&n)*Math.pow(2,a),a+=7}while(o>=e);return r.bytes=l-i,s}},799:function(t){t.exports=o;var e=128,n=127,r=~n,i=Math.pow(2,31);function o(t,n,s){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw o.bytes=0,new RangeError("Could not encode varint");n=n||[],s=s||0;var a=s;while(t>=i)n[s++]=255&t|e,t/=128;while(t&r)n[s++]=255&t|e,t>>>=7;return n[s]=0|t,o.bytes=s-a+1,n}},2611:function(t,e,n){t.exports={encode:n(799),decode:n(2706),encodingLength:n(3303)}},3303:function(t){var e=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),i=Math.pow(2,28),o=Math.pow(2,35),s=Math.pow(2,42),a=Math.pow(2,49),l=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(t){return t<e?1:t<n?2:t<r?3:t<i?4:t<o?5:t<s?6:t<a?7:t<l?8:t<c?9:10}},89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},65:function(t,e,n){"use strict";n.d(e,{MT:function(){return tt}});n(7658),n(541);var r=n(3396),i=n(4870);function o(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const a="function"===typeof Proxy,l="devtools-plugin:setup",c="plugin:settings:set";let u,h;function d(){var t;return void 0!==u||("undefined"!==typeof window&&window.performance?(u=!0,h=window.performance):"undefined"!==typeof n.g&&(null===(t=n.g.perf_hooks)||void 0===t?void 0:t.performance)?(u=!0,h=n.g.perf_hooks.performance):u=!1),u}function f(){return d()?h.now():Date.now()}class p{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const s in t.settings){const e=t.settings[s];n[s]=e.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let i=Object.assign({},n);try{const t=localStorage.getItem(r),e=JSON.parse(t);Object.assign(i,e)}catch(o){}this.fallbacks={getSettings(){return i},setSettings(t){try{localStorage.setItem(r,JSON.stringify(t))}catch(o){}i=t},now(){return f()}},e&&e.on(c,((t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)})),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise((n=>{this.targetQueue.push({method:e,args:t,resolve:n})}))})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function m(t,e){const n=t,r=s(),i=o(),c=a&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const t=c?new p(n,i):null,o=r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[];o.push({pluginDescriptor:n,setupFn:e,proxy:t}),t&&e(t.proxiedTarget)}else i.emit(l,t,e)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var g="store";function y(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function v(t){return null!==t&&"object"===typeof t}function w(t){return t&&"function"===typeof t.then}function b(t,e){return function(){return t(e)}}function _(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function S(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;A(t,n,[],t._modules.root,!0),E(t,n,e)}function E(t,e,n){var o=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,l={},c={},u=(0,i.B)(!0);u.run((function(){y(a,(function(e,n){l[n]=b(e,t),c[n]=(0,r.Fl)((function(){return l[n]()})),Object.defineProperty(t.getters,n,{get:function(){return c[n].value},enumerable:!0})}))})),t._state=(0,i.qj)({data:e}),t._scope=u,t.strict&&k(t),o&&n&&t._withCommit((function(){o.data=null})),s&&s.stop()}function A(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!o&&!i){var a=O(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit((function(){a[l]=r.state}))}var c=r.context=x(t,s,n);r.forEachMutation((function(e,n){var r=s+n;T(t,r,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;M(t,r,i,c)})),r.forEachGetter((function(e,n){var r=s+n;I(t,r,e,c)})),r.forEachChild((function(r,o){A(t,e,n.concat(o),r,i)}))}function x(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=R(n,r,i),s=o.payload,a=o.options,l=o.type;return a&&a.root||(l=e+l),t.dispatch(l,s)},commit:r?t.commit:function(n,r,i){var o=R(n,r,i),s=o.payload,a=o.options,l=o.type;a&&a.root||(l=e+l),t.commit(l,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return C(t,e)}},state:{get:function(){return O(t.state,n)}}}),i}function C(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function T(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,r.state,e)}))}function M(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return w(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}function I(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)})}function k(t){(0,r.YP)((function(){return t._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function O(t,e){return e.reduce((function(t,e){return t[e]}),t)}function R(t,e,n){return v(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var D="vuex bindings",N="vuex:mutations",P="vuex:actions",L="vuex",B=0;function U(t,e){m({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[D]},(function(n){n.addTimelineLayer({id:N,label:"Vuex Mutations",color:F}),n.addTimelineLayer({id:P,label:"Vuex Actions",color:F}),n.addInspector({id:L,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&n.inspectorId===L)if(n.filter){var r=[];G(r,e._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[W(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&n.inspectorId===L){var r=n.nodeId;C(e,r),n.state=$(Y(e._modules,r),"root"===r?e.getters:e._makeLocalGettersCache,r)}})),n.on.editInspectorState((function(n){if(n.app===t&&n.inspectorId===L){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),e._withCommit((function(){n.set(e._state.data,i,n.state.value)}))}})),e.subscribe((function(t,e){var r={};t.payload&&(r.payload=t.payload),r.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(L),n.sendInspectorState(L),n.addTimelineEvent({layerId:N,event:{time:Date.now(),title:t.type,data:r}})})),e.subscribeAction({before:function(t,e){var r={};t.payload&&(r.payload=t.payload),t._id=B++,t._time=Date.now(),r.state=e,n.addTimelineEvent({layerId:P,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:r}})},after:function(t,e){var r={},i=Date.now()-t._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},t.payload&&(r.payload=t.payload),r.state=e,n.addTimelineEvent({layerId:P,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:r}})}})}))}var F=8702998,z=6710886,V=16777215,H={label:"namespaced",textColor:V,backgroundColor:z};function j(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function W(t,e){return{id:e||"root",label:j(e),tags:t.namespaced?[H]:[],children:Object.keys(t._children).map((function(n){return W(t._children[n],e+n+"/")}))}}function G(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[H]:[]}),Object.keys(e._children).forEach((function(i){G(t,e._children[i],n,r+i+"/")}))}function $(t,e,n){e="root"===n?e:e[n];var r=Object.keys(e),i={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};if(r.length){var o=q(e);i.getters=Object.keys(o).map((function(t){return{key:t.endsWith("/")?j(t):t,editable:!1,value:X((function(){return o[t]}))}}))}return i}function q(t){var e={};return Object.keys(t).forEach((function(n){var r=n.split("/");if(r.length>1){var i=e,o=r.pop();r.forEach((function(t){i[t]||(i[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),i=i[t]._custom.value})),i[o]=X((function(){return t[n]}))}else e[n]=X((function(){return t[n]}))})),e}function Y(t,e){var n=e.split("/").filter((function(t){return t}));return n.reduce((function(t,r,i){var o=t[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+e+'".');return i===n.length-1?o:o._children}),"root"===e?t:t.root._children)}function X(t){try{return t()}catch(e){return e}}var Z=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},K={namespaced:{configurable:!0}};K.namespaced.get=function(){return!!this._rawModule.namespaced},Z.prototype.addChild=function(t,e){this._children[t]=e},Z.prototype.removeChild=function(t){delete this._children[t]},Z.prototype.getChild=function(t){return this._children[t]},Z.prototype.hasChild=function(t){return t in this._children},Z.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},Z.prototype.forEachChild=function(t){y(this._children,t)},Z.prototype.forEachGetter=function(t){this._rawModule.getters&&y(this._rawModule.getters,t)},Z.prototype.forEachAction=function(t){this._rawModule.actions&&y(this._rawModule.actions,t)},Z.prototype.forEachMutation=function(t){this._rawModule.mutations&&y(this._rawModule.mutations,t)},Object.defineProperties(Z.prototype,K);var J=function(t){this.register([],t,!1)};function Q(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return void 0;Q(t.concat(r),e.getChild(r),n.modules[r])}}J.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},J.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},J.prototype.update=function(t){Q([],this.root,t)},J.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new Z(e,n);if(0===t.length)this.root=i;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],i)}e.modules&&y(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},J.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},J.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};function tt(t){return new et(t)}var et=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1);var i=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new J(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,s=this,a=s.dispatch,l=s.commit;this.dispatch=function(t,e){return a.call(o,t,e)},this.commit=function(t,e,n){return l.call(o,t,e,n)},this.strict=r;var c=this._modules.root.state;A(this,c,[],this._modules.root),E(this,c),n.forEach((function(t){return t(e)}))},nt={state:{configurable:!0}};et.prototype.install=function(t,e){t.provide(e||g,this),t.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&U(t,this)},nt.state.get=function(){return this._state.data},nt.state.set=function(t){0},et.prototype.commit=function(t,e,n){var r=this,i=R(t,e,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(a,r.state)})))},et.prototype.dispatch=function(t,e){var n=this,r=R(t,e),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(c){0}var l=a.length>1?Promise.all(a.map((function(t){return t(o)}))):a[0](o);return new Promise((function(t,e){l.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(c){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(c){0}e(t)}))}))}},et.prototype.subscribe=function(t,e){return _(t,this._subscribers,e)},et.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return _(n,this._actionSubscribers,e)},et.prototype.watch=function(t,e,n){var i=this;return(0,r.YP)((function(){return t(i.state,i.getters)}),e,Object.assign({},n))},et.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},et.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),A(this,this.state,t,this._modules.get(t),n.preserveState),E(this,this.state)},et.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=O(e.state,t.slice(0,-1));delete n[t[t.length-1]]})),S(this)},et.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},et.prototype.hotUpdate=function(t){this._modules.update(t),S(this,!0)},et.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(et.prototype,nt);ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=st(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.commit;if(t){var o=st(this.$store,"mapMutations",t);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||st(this.$store,"mapGetters",t))return this.$store.getters[i]},n[r].vuex=!0})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=st(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n}));function rt(t){return it(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function it(t){return Array.isArray(t)||v(t)}function ot(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function st(t,e,n){var r=t._modulesNamespaceMap[n];return r}},4727:function(t,e,n){"use strict";t.exports=n.p+"img/remixicon.symbol.dcd23fd4.svg"},490:function(t,e,n){"use strict";n.d(e,{Z:function(){return Db}});n(7658),n(3767),n(8585),n(8696),n(541);
/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const r="153",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,a=1,l=2,c=1,u=2,h=3,d=0,f=1,p=2,m=0,g=1,y=2,v=3,w=4,b=5,_=100,S=101,E=102,A=103,x=104,C=200,T=201,M=202,I=203,k=204,O=205,R=206,D=207,N=208,P=209,L=210,B=0,U=1,F=2,z=3,V=4,H=5,j=6,W=7,G=0,$=1,q=2,Y=0,X=1,Z=2,K=3,J=4,Q=5,tt=300,et=301,nt=302,rt=303,it=304,ot=306,st=1e3,at=1001,lt=1002,ct=1003,ut=1004,ht=1005,dt=1006,ft=1007,pt=1008,mt=1009,gt=1010,yt=1011,vt=1012,wt=1013,bt=1014,_t=1015,St=1016,Et=1017,At=1018,xt=1020,Ct=1021,Tt=1023,Mt=1024,It=1025,kt=1026,Ot=1027,Rt=1028,Dt=1029,Nt=1030,Pt=1031,Lt=1033,Bt=33776,Ut=33777,Ft=33778,zt=33779,Vt=35840,Ht=35841,jt=35842,Wt=35843,Gt=36196,$t=37492,qt=37496,Yt=37808,Xt=37809,Zt=37810,Kt=37811,Jt=37812,Qt=37813,te=37814,ee=37815,ne=37816,re=37817,ie=37818,oe=37819,se=37820,ae=37821,le=36492,ce=36283,ue=36284,he=36285,de=36286,fe=2300,pe=2301,me=2302,ge=2400,ye=2401,ve=2402,we=3e3,be=3001,_e=3200,Se=3201,Ee=0,Ae=1,xe="",Ce="srgb",Te="srgb-linear",Me="display-p3",Ie=7680,ke=519,Oe=512,Re=513,De=514,Ne=515,Pe=516,Le=517,Be=518,Ue=519,Fe=35044,ze="300 es",Ve=1035,He=2e3,je=2001;class We{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners,r=n[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,r=e.length;n<r;n++)e[n].call(this,t);t.target=null}}}const Ge=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let $e=1234567;const qe=Math.PI/180,Ye=180/Math.PI;function Xe(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=Ge[255&t]+Ge[t>>8&255]+Ge[t>>16&255]+Ge[t>>24&255]+"-"+Ge[255&e]+Ge[e>>8&255]+"-"+Ge[e>>16&15|64]+Ge[e>>24&255]+"-"+Ge[63&n|128]+Ge[n>>8&255]+"-"+Ge[n>>16&255]+Ge[n>>24&255]+Ge[255&r]+Ge[r>>8&255]+Ge[r>>16&255]+Ge[r>>24&255];return i.toLowerCase()}function Ze(t,e,n){return Math.max(e,Math.min(n,t))}function Ke(t,e){return(t%e+e)%e}function Je(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Qe(t,e,n){return t!==e?(n-t)/(e-t):0}function tn(t,e,n){return(1-n)*t+n*e}function en(t,e,n,r){return tn(t,e,1-Math.exp(-n*r))}function nn(t,e=1){return e-Math.abs(Ke(t,2*e)-e)}function rn(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function on(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))}function sn(t,e){return t+Math.floor(Math.random()*(e-t+1))}function an(t,e){return t+Math.random()*(e-t)}function ln(t){return t*(.5-Math.random())}function cn(t){void 0!==t&&($e=t);let e=$e+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}function un(t){return t*qe}function hn(t){return t*Ye}function dn(t){return 0===(t&t-1)&&0!==t}function fn(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function pn(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function mn(t,e,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((e+r)/2),u=s((e+r)/2),h=o((e-r)/2),d=s((e-r)/2),f=o((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":t.set(a*u,l*h,l*d,a*c);break;case"YZY":t.set(l*d,a*u,l*h,a*c);break;case"ZXZ":t.set(l*h,l*d,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*f,a*c);break;case"YXY":t.set(l*f,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function gn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function yn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}const vn={DEG2RAD:qe,RAD2DEG:Ye,generateUUID:Xe,clamp:Ze,euclideanModulo:Ke,mapLinear:Je,inverseLerp:Qe,lerp:tn,damp:en,pingpong:nn,smoothstep:rn,smootherstep:on,randInt:sn,randFloat:an,randFloatSpread:ln,seededRandom:cn,degToRad:un,radToDeg:hn,isPowerOfTwo:dn,ceilPowerOfTwo:fn,floorPowerOfTwo:pn,setQuaternionFromProperEuler:mn,normalize:yn,denormalize:gn};class wn{constructor(t=0,e=0){wn.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ze(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bn{constructor(t,e,n,r,i,o,s,a,l){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,l)}set(t,e,n,r,i,o,s,a,l){const c=this.elements;return c[0]=t,c[1]=r,c[2]=s,c[3]=e,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],y=r[1],v=r[4],w=r[7],b=r[2],_=r[5],S=r[8];return i[0]=o*p+s*y+a*b,i[3]=o*m+s*v+a*_,i[6]=o*g+s*w+a*S,i[1]=l*p+c*y+u*b,i[4]=l*m+c*v+u*_,i[7]=l*g+c*w+u*S,i[2]=h*p+d*y+f*b,i[5]=h*m+d*v+f*_,i[8]=h*g+d*w+f*S,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*o*c-e*s*l-n*i*c+n*s*a+r*i*l-r*o*a}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=c*o-s*l,h=s*a-c*i,d=l*i-o*a,f=e*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*l-c*n)*p,t[2]=(s*n-r*o)*p,t[3]=h*p,t[4]=(c*e-r*a)*p,t[5]=(r*i-s*e)*p,t[6]=d*p,t[7]=(n*a-l*e)*p,t[8]=(o*e-n*i)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+t,-r*l,r*a,-r*(-l*o+a*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(_n.makeScale(t,e)),this}rotate(t){return this.premultiply(_n.makeRotation(-t)),this}translate(t,e){return this.premultiply(_n.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const _n=new bn;function Sn(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function En(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const An={};function xn(t){t in An||(An[t]=!0,console.warn(t))}function Cn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Tn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const Mn=(new bn).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),In=(new bn).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function kn(t){return t.convertSRGBToLinear().applyMatrix3(In)}function On(t){return t.applyMatrix3(Mn).convertLinearToSRGB()}const Rn={[Te]:t=>t,[Ce]:t=>t.convertSRGBToLinear(),[Me]:kn},Dn={[Te]:t=>t,[Ce]:t=>t.convertLinearToSRGB(),[Me]:On},Nn={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Te},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(!1===this.enabled||e===n||!e||!n)return t;const r=Rn[e],i=Dn[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Pn;class Ln{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"===typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Pn&&(Pn=En("canvas")),Pn.width=t.width,Pn.height=t.height;const n=Pn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Pn}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const e=En("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),i=r.data;for(let t=0;t<i.length;t++)i[t]=255*Cn(i[t]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*Cn(e[t]/255)):e[t]=Cn(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Bn=0;class Un{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Bn++}),this.uuid=Xe(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Fn(r[e].image)):t.push(Fn(r[e]))}else t=Fn(r);n.url=t}return e||(t.images[this.uuid]=n),n}}function Fn(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Ln.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let zn=0;class Vn extends We{constructor(t=Vn.DEFAULT_IMAGE,e=Vn.DEFAULT_MAPPING,n=at,r=at,i=dt,o=pt,s=Tt,a=mt,l=Vn.DEFAULT_ANISOTROPY,c=xe){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:zn++}),this.uuid=Xe(),this.name="",this.source=new Un(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new wn(0,0),this.repeat=new wn(1,1),this.center=new wn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(xn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===be?Ce:xe),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case st:t.x=t.x-Math.floor(t.x);break;case at:t.x=t.x<0?0:1;break;case lt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case st:t.y=t.y-Math.floor(t.y);break;case at:t.y=t.y<0?0:1;break;case lt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return xn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ce?be:we}set encoding(t){xn("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===be?Ce:xe}}Vn.DEFAULT_IMAGE=null,Vn.DEFAULT_MAPPING=tt,Vn.DEFAULT_ANISOTROPY=1;class Hn{constructor(t=0,e=0,n=0,r=1){Hn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,i;const o=.01,s=.1,a=t.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(d+1)/2,y=(g+1)/2,v=(c+h)/4,w=(u+p)/4,b=(f+m)/4;return t>a&&t>y?t<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(t),r=v/n,i=w/n):a>y?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=v/r,i=b/r):y<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(y),n=w/i,r=b/i),this.set(n,r,i,e),this}let y=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(y)<.001&&(y=1),this.x=(m-f)/y,this.y=(u-p)/y,this.z=(h-c)/y,this.w=Math.acos((l+d+g-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class jn extends We{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Hn(0,0,t,e),this.scissorTest=!1,this.viewport=new Hn(0,0,t,e);const r={width:t,height:e,depth:1};void 0!==n.encoding&&(xn("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===be?Ce:xe),this.texture=new Vn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:dt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Un(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wn extends Vn{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ct,this.minFilter=ct,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Gn extends Vn{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=ct,this.minFilter=ct,this.wrapR=at,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $n{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===s)return t[e+0]=a,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===s)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||a!==h||l!==d||c!==f){let t=1-s;const e=a*h+l*d+c*f+u*p,n=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,e*n);t=Math.sin(t*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*t+h*i,l=l*t+d*i,c=c*t+f*i,u=u*t+p*i,t===1-s){const t=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=t,l*=t,c*=t,u*=t}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return t[e]=s*f+c*u+a*d-l*h,t[e+1]=a*f+c*h+l*u-s*d,t[e+2]=l*f+c*d+s*h-a*u,t[e+3]=c*f-s*u-a*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,i=t._z,o=t._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),h=a(n/2),d=a(r/2),f=a(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],i=e[8],o=e[1],s=e[5],a=e[9],l=e[2],c=e[6],u=e[10],h=n+s+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-a)*t,this._y=(i-l)*t,this._z=(o-r)*t}else if(n>s&&n>u){const t=2*Math.sqrt(1+n-s-u);this._w=(c-a)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(i+l)/t}else if(s>u){const t=2*Math.sqrt(1+s-n-u);this._w=(i-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+u-n-s);this._w=(o-r)/t,this._x=(i+l)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ze(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*r+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(i),n*Math.cos(i),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class qn{constructor(t=0,e=0,n=0){qn.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Xn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Xn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*r-s*n,c=a*n+s*e-i*r,u=a*r+i*n-o*e,h=-i*e-o*n-s*r;return this.x=l*a+h*-i+c*-s-u*-o,this.y=c*a+h*-o+u*-i-l*-s,this.z=u*a+h*-s+l*-o-c*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Yn.copy(this).projectOnVector(t),this.sub(Yn)}reflect(t){return this.sub(Yn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ze(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yn=new qn,Xn=new $n;class Zn{constructor(t=new qn(1/0,1/0,1/0),e=new qn(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Jn.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Jn.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Jn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),Qn.copy(t.boundingBox),Qn.applyMatrix4(t.matrixWorld),this.union(Qn);else{const n=t.geometry;if(void 0!==n)if(e&&void 0!==n.attributes&&void 0!==n.attributes.position){const e=n.attributes.position;for(let n=0,r=e.count;n<r;n++)Jn.fromBufferAttribute(e,n).applyMatrix4(t.matrixWorld),this.expandByPoint(Jn)}else null===n.boundingBox&&n.computeBoundingBox(),Qn.copy(n.boundingBox),Qn.applyMatrix4(t.matrixWorld),this.union(Qn)}const n=t.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Jn),Jn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(sr),ar.subVectors(this.max,sr),tr.subVectors(t.a,sr),er.subVectors(t.b,sr),nr.subVectors(t.c,sr),rr.subVectors(er,tr),ir.subVectors(nr,er),or.subVectors(tr,nr);let e=[0,-rr.z,rr.y,0,-ir.z,ir.y,0,-or.z,or.y,rr.z,0,-rr.x,ir.z,0,-ir.x,or.z,0,-or.x,-rr.y,rr.x,0,-ir.y,ir.x,0,-or.y,or.x,0];return!!ur(e,tr,er,nr,ar)&&(e=[1,0,0,0,1,0,0,0,1],!!ur(e,tr,er,nr,ar)&&(lr.crossVectors(rr,ir),e=[lr.x,lr.y,lr.z],ur(e,tr,er,nr,ar)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Jn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Jn).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Kn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Kn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Kn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Kn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Kn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Kn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Kn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Kn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Kn)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Kn=[new qn,new qn,new qn,new qn,new qn,new qn,new qn,new qn],Jn=new qn,Qn=new Zn,tr=new qn,er=new qn,nr=new qn,rr=new qn,ir=new qn,or=new qn,sr=new qn,ar=new qn,lr=new qn,cr=new qn;function ur(t,e,n,r,i){for(let o=0,s=t.length-3;o<=s;o+=3){cr.fromArray(t,o);const s=i.x*Math.abs(cr.x)+i.y*Math.abs(cr.y)+i.z*Math.abs(cr.z),a=e.dot(cr),l=n.dot(cr),c=r.dot(cr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const hr=new Zn,dr=new qn,fr=new qn;class pr{constructor(t=new qn,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):hr.setFromPoints(t).getCenter(n);let r=0;for(let i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;dr.subVectors(t,this.center);const e=dr.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(dr,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(fr.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(dr.copy(t.center).add(fr)),this.expandByPoint(dr.copy(t.center).sub(fr))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const mr=new qn,gr=new qn,yr=new qn,vr=new qn,wr=new qn,br=new qn,_r=new qn;class Sr{constructor(t=new qn,e=new qn(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,mr)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=mr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(mr.copy(this.origin).addScaledVector(this.direction,e),mr.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){gr.copy(t).add(e).multiplyScalar(.5),yr.copy(e).sub(t).normalize(),vr.copy(this.origin).sub(gr);const i=.5*t.distanceTo(e),o=-this.direction.dot(yr),s=vr.dot(this.direction),a=-vr.dot(yr),l=vr.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*a-s,h=o*s-a,f=i*c,u>=0)if(h>=-f)if(h<=f){const t=1/c;u*=t,h*=t,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+l}else h=i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h=-i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h<=-f?(u=Math.max(0,-(-o*i+s)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+l):(u=Math.max(0,-(o*i+s)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(gr).addScaledVector(yr,h),d}intersectSphere(t,e){mr.subVectors(t.center,this.origin);const n=mr.dot(this.direction),r=mr.dot(mr)-n*n,i=t.radius*t.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const n=t.normal.dot(this.direction);return n*e<0}intersectBox(t,e){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),c>=0?(i=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(s=(t.min.z-h.z)*u,a=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,a=(t.min.z-h.z)*u),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,mr)}intersectTriangle(t,e,n,r,i){wr.subVectors(e,t),br.subVectors(n,t),_r.crossVectors(wr,br);let o,s=this.direction.dot(_r);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}vr.subVectors(this.origin,t);const a=o*this.direction.dot(br.crossVectors(vr,br));if(a<0)return null;const l=o*this.direction.dot(wr.cross(vr));if(l<0)return null;if(a+l>s)return null;const c=-o*vr.dot(_r);return c<0?null:this.at(c/s,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Er{constructor(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,m){Er.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,m)}set(t,e,n,r,i,o,s,a,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Er).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Ar.setFromMatrixColumn(t,0).length(),i=1/Ar.setFromMatrixColumn(t,1).length(),o=1/Ar.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===t.order){const t=o*c,n=o*u,r=s*c,i=s*u;e[0]=a*c,e[4]=-a*u,e[8]=l,e[1]=n+r*l,e[5]=t-i*l,e[9]=-s*a,e[2]=i-t*l,e[6]=r+n*l,e[10]=o*a}else if("YXZ"===t.order){const t=a*c,n=a*u,r=l*c,i=l*u;e[0]=t+i*s,e[4]=r*s-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-s,e[2]=n*s-r,e[6]=i+t*s,e[10]=o*a}else if("ZXY"===t.order){const t=a*c,n=a*u,r=l*c,i=l*u;e[0]=t-i*s,e[4]=-o*u,e[8]=r+n*s,e[1]=n+r*s,e[5]=o*c,e[9]=i-t*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){const t=o*c,n=o*u,r=s*c,i=s*u;e[0]=a*c,e[4]=r*l-n,e[8]=t*l+i,e[1]=a*u,e[5]=i*l+t,e[9]=n*l-r,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*c,e[4]=i-t*u,e[8]=r*u+n,e[1]=u,e[5]=o*c,e[9]=-s*c,e[2]=-l*c,e[6]=n*u+r,e[10]=t-i*u}else if("XZY"===t.order){const t=o*a,n=o*l,r=s*a,i=s*l;e[0]=a*c,e[4]=-u,e[8]=l*c,e[1]=t*u+i,e[5]=o*c,e[9]=n*u-r,e[2]=r*u-n,e[6]=s*c,e[10]=i*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Cr,t,Tr)}lookAt(t,e,n){const r=this.elements;return kr.subVectors(t,e),0===kr.lengthSq()&&(kr.z=1),kr.normalize(),Mr.crossVectors(n,kr),0===Mr.lengthSq()&&(1===Math.abs(n.z)?kr.x+=1e-4:kr.z+=1e-4,kr.normalize(),Mr.crossVectors(n,kr)),Mr.normalize(),Ir.crossVectors(kr,Mr),r[0]=Mr.x,r[4]=Ir.x,r[8]=kr.x,r[1]=Mr.y,r[5]=Ir.y,r[9]=kr.y,r[2]=Mr.z,r[6]=Ir.z,r[10]=kr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],w=n[11],b=n[15],_=r[0],S=r[4],E=r[8],A=r[12],x=r[1],C=r[5],T=r[9],M=r[13],I=r[2],k=r[6],O=r[10],R=r[14],D=r[3],N=r[7],P=r[11],L=r[15];return i[0]=o*_+s*x+a*I+l*D,i[4]=o*S+s*C+a*k+l*N,i[8]=o*E+s*T+a*O+l*P,i[12]=o*A+s*M+a*R+l*L,i[1]=c*_+u*x+h*I+d*D,i[5]=c*S+u*C+h*k+d*N,i[9]=c*E+u*T+h*O+d*P,i[13]=c*A+u*M+h*R+d*L,i[2]=f*_+p*x+m*I+g*D,i[6]=f*S+p*C+m*k+g*N,i[10]=f*E+p*T+m*O+g*P,i[14]=f*A+p*M+m*R+g*L,i[3]=y*_+v*x+w*I+b*D,i[7]=y*S+v*C+w*k+b*N,i[11]=y*E+v*T+w*O+b*P,i[15]=y*A+v*M+w*R+b*L,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14],f=t[3],p=t[7],m=t[11],g=t[15];return f*(+i*a*u-r*l*u-i*s*h+n*l*h+r*s*d-n*a*d)+p*(+e*a*d-e*l*h+i*o*h-r*o*d+r*l*c-i*a*c)+m*(+e*l*u-e*s*d-i*o*u+n*o*d+i*s*c-n*l*c)+g*(-r*s*c-e*a*u+e*s*h+r*o*u-n*o*h+n*a*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],y=u*m*l-p*h*l+p*a*d-s*m*d-u*a*g+s*h*g,v=f*h*l-c*m*l-f*a*d+o*m*d+c*a*g-o*h*g,w=c*p*l-f*u*l+f*s*d-o*p*d-c*s*g+o*u*g,b=f*u*a-c*p*a-f*s*h+o*p*h+c*s*m-o*u*m,_=e*y+n*v+r*w+i*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/_;return t[0]=y*S,t[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*S,t[2]=(s*m*i-p*a*i+p*r*l-n*m*l-s*r*g+n*a*g)*S,t[3]=(u*a*i-s*h*i-u*r*l+n*h*l+s*r*d-n*a*d)*S,t[4]=v*S,t[5]=(c*m*i-f*h*i+f*r*d-e*m*d-c*r*g+e*h*g)*S,t[6]=(f*a*i-o*m*i-f*r*l+e*m*l+o*r*g-e*a*g)*S,t[7]=(o*h*i-c*a*i+c*r*l-e*h*l-o*r*d+e*a*d)*S,t[8]=w*S,t[9]=(f*u*i-c*p*i-f*n*d+e*p*d+c*n*g-e*u*g)*S,t[10]=(o*p*i-f*s*i+f*n*l-e*p*l-o*n*g+e*s*g)*S,t[11]=(c*s*i-o*u*i-c*n*l+e*u*l+o*n*d-e*s*d)*S,t[12]=b*S,t[13]=(c*p*r-f*u*r+f*n*h-e*p*h-c*n*m+e*u*m)*S,t[14]=(f*s*r-o*p*r-f*n*a+e*p*a+o*n*m-e*s*m)*S,t[15]=(o*u*r-c*s*r+c*n*a-e*u*a-o*n*h+e*s*h)*S,this}scale(t){const e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,i,o){return this.set(1,n,i,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,l=i+i,c=o+o,u=s+s,h=i*l,d=i*c,f=i*u,p=o*c,m=o*u,g=s*u,y=a*l,v=a*c,w=a*u,b=n.x,_=n.y,S=n.z;return r[0]=(1-(p+g))*b,r[1]=(d+w)*b,r[2]=(f-v)*b,r[3]=0,r[4]=(d-w)*_,r[5]=(1-(h+g))*_,r[6]=(m+y)*_,r[7]=0,r[8]=(f+v)*S,r[9]=(m-y)*S,r[10]=(1-(h+p))*S,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let i=Ar.set(r[0],r[1],r[2]).length();const o=Ar.set(r[4],r[5],r[6]).length(),s=Ar.set(r[8],r[9],r[10]).length(),a=this.determinant();a<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],xr.copy(this);const l=1/i,c=1/o,u=1/s;return xr.elements[0]*=l,xr.elements[1]*=l,xr.elements[2]*=l,xr.elements[4]*=c,xr.elements[5]*=c,xr.elements[6]*=c,xr.elements[8]*=u,xr.elements[9]*=u,xr.elements[10]*=u,e.setFromRotationMatrix(xr),n.x=i,n.y=o,n.z=s,this}makePerspective(t,e,n,r,i,o,s=He){const a=this.elements,l=2*i/(e-t),c=2*i/(n-r),u=(e+t)/(e-t),h=(n+r)/(n-r);let d,f;if(s===He)d=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(s!==je)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-o/(o-i),f=-o*i/(o-i)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,r,i,o,s=He){const a=this.elements,l=1/(e-t),c=1/(n-r),u=1/(o-i),h=(e+t)*l,d=(n+r)*c;let f,p;if(s===He)f=(o+i)*u,p=-2*u;else{if(s!==je)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);f=i*u,p=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=p,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Ar=new qn,xr=new Er,Cr=new qn(0,0,0),Tr=new qn(1,1,1),Mr=new qn,Ir=new qn,kr=new qn,Or=new Er,Rr=new $n;class Dr{constructor(t=0,e=0,n=0,r=Dr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,r=this._order){return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const r=t.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(e){case"XYZ":this._y=Math.asin(Ze(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ze(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Ze(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Ze(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Ze(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Ze(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Or.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Or,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Rr.setFromEuler(this),this.setFromQuaternion(Rr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Dr.DEFAULT_ORDER="XYZ";class Nr{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return 0!==(this.mask&(1<<t|0))}}let Pr=0;const Lr=new qn,Br=new $n,Ur=new Er,Fr=new qn,zr=new qn,Vr=new qn,Hr=new $n,jr=new qn(1,0,0),Wr=new qn(0,1,0),Gr=new qn(0,0,1),$r={type:"added"},qr={type:"removed"};class Yr extends We{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pr++}),this.uuid=Xe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yr.DEFAULT_UP.clone();const t=new qn,e=new Dr,n=new $n,r=new qn(1,1,1);function i(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Er},normalMatrix:{value:new bn}}),this.matrix=new Er,this.matrixWorld=new Er,this.matrixAutoUpdate=Yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Nr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Br.setFromAxisAngle(t,e),this.quaternion.multiply(Br),this}rotateOnWorldAxis(t,e){return Br.setFromAxisAngle(t,e),this.quaternion.premultiply(Br),this}rotateX(t){return this.rotateOnAxis(jr,t)}rotateY(t){return this.rotateOnAxis(Wr,t)}rotateZ(t){return this.rotateOnAxis(Gr,t)}translateOnAxis(t,e){return Lr.copy(t).applyQuaternion(this.quaternion),this.position.add(Lr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(jr,t)}translateY(t){return this.translateOnAxis(Wr,t)}translateZ(t){return this.translateOnAxis(Gr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ur.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Fr.copy(t):Fr.set(t,e,n);const r=this.parent;this.updateWorldMatrix(!0,!1),zr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ur.lookAt(zr,Fr,this.up):Ur.lookAt(Fr,zr,this.up),this.quaternion.setFromRotationMatrix(Ur),r&&(Ur.extractRotation(r.matrixWorld),Br.setFromRotationMatrix(Ur),this.quaternion.premultiply(Br.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent($r)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(qr)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(qr)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ur.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ur.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ur),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n],i=r.getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e){let n=[];this[t]===e&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(t,e);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zr,t,Vr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zr,Hr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,r=e.length;n<r;n++){const r=e[n];!0!==r.matrixWorldAutoUpdate&&!0!==t||r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){const n=t[e];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,r=n.length;e<r;e++){const r=n[e];i(t.shapes,r)}else i(t.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,r=this.material.length;n<r;n++)e.push(i(t.materials,this.material[n]));r.material=e}else r.material=i(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];r.animations.push(i(t.animations,n))}}if(e){const e=o(t.geometries),r=o(t.materials),i=o(t.textures),s=o(t.images),a=o(t.shapes),l=o(t.skeletons),c=o(t.animations),u=o(t.nodes);e.length>0&&(n.geometries=e),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}Yr.DEFAULT_UP=new qn(0,1,0),Yr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xr=new qn,Zr=new qn,Kr=new qn,Jr=new qn,Qr=new qn,ti=new qn,ei=new qn,ni=new qn,ri=new qn,ii=new qn;let oi=!1;class si{constructor(t=new qn,e=new qn,n=new qn){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Xr.subVectors(t,e),r.cross(Xr);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(t,e,n,r,i){Xr.subVectors(r,e),Zr.subVectors(n,e),Kr.subVectors(t,e);const o=Xr.dot(Xr),s=Xr.dot(Zr),a=Xr.dot(Kr),l=Zr.dot(Zr),c=Zr.dot(Kr),u=o*l-s*s;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*a-s*c)*h,f=(o*c-s*a)*h;return i.set(1-d-f,f,d)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Jr),Jr.x>=0&&Jr.y>=0&&Jr.x+Jr.y<=1}static getUV(t,e,n,r,i,o,s,a){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),this.getInterpolation(t,e,n,r,i,o,s,a)}static getInterpolation(t,e,n,r,i,o,s,a){return this.getBarycoord(t,e,n,r,Jr),a.setScalar(0),a.addScaledVector(i,Jr.x),a.addScaledVector(o,Jr.y),a.addScaledVector(s,Jr.z),a}static isFrontFacing(t,e,n,r){return Xr.subVectors(n,e),Zr.subVectors(t,e),Xr.cross(Zr).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Xr.subVectors(this.c,this.b),Zr.subVectors(this.a,this.b),.5*Xr.cross(Zr).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return si.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return si.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,i){return!1===oi&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),oi=!0),si.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}getInterpolation(t,e,n,r,i){return si.getInterpolation(t,this.a,this.b,this.c,e,n,r,i)}containsPoint(t){return si.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return si.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,i=this.c;let o,s;Qr.subVectors(r,n),ti.subVectors(i,n),ni.subVectors(t,n);const a=Qr.dot(ni),l=ti.dot(ni);if(a<=0&&l<=0)return e.copy(n);ri.subVectors(t,r);const c=Qr.dot(ri),u=ti.dot(ri);if(c>=0&&u<=c)return e.copy(r);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),e.copy(n).addScaledVector(Qr,o);ii.subVectors(t,i);const d=Qr.dot(ii),f=ti.dot(ii);if(f>=0&&d<=f)return e.copy(i);const p=d*l-a*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(n).addScaledVector(ti,s);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return ei.subVectors(i,r),s=(u-c)/(u-c+(d-f)),e.copy(r).addScaledVector(ei,s);const g=1/(m+p+h);return o=p*g,s=h*g,e.copy(n).addScaledVector(Qr,o).addScaledVector(ti,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ai=0;class li extends We{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ai++}),this.uuid=Xe(),this.name="",this.type="Material",this.blending=g,this.side=d,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=k,this.blendDst=O,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=z,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ke,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ie,this.stencilZFail=Ie,this.stencilZPass=Ie,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!==t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const n in t){const r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==g&&(n.blending=this.blending),this.side!==d&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=r(t.textures),i=r(t.images);e.length>0&&(n.textures=e),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let r=0;r!==t;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}const ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ui={h:0,s:0,l:0},hi={h:0,s:0,l:0};function di(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class fi{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ce){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Nn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Nn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Nn.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Nn.workingColorSpace){if(t=Ke(t,1),e=Ze(e,0,1),n=Ze(n,0,1),0===e)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=di(i,r,t+1/3),this.g=di(i,r,t),this.b=di(i,r,t-1/3)}return Nn.toWorkingColorSpace(this,r),this}setStyle(t,e=Ce){function n(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let i;const o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,e);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,e);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,e);if(6===i)return this.setHex(parseInt(n,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ce){const n=ci[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Cn(t.r),this.g=Cn(t.g),this.b=Cn(t.b),this}copyLinearToSRGB(t){return this.r=Tn(t.r),this.g=Tn(t.g),this.b=Tn(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ce){return Nn.fromWorkingColorSpace(pi.copy(this),t),65536*Math.round(Ze(255*pi.r,0,255))+256*Math.round(Ze(255*pi.g,0,255))+Math.round(Ze(255*pi.b,0,255))}getHexString(t=Ce){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Nn.workingColorSpace){Nn.fromWorkingColorSpace(pi.copy(this),e);const n=pi.r,r=pi.g,i=pi.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const t=o-s;switch(l=c<=.5?t/(o+s):t/(2-o-s),o){case n:a=(r-i)/t+(r<i?6:0);break;case r:a=(i-n)/t+2;break;case i:a=(n-r)/t+4;break}a/=6}return t.h=a,t.s=l,t.l=c,t}getRGB(t,e=Nn.workingColorSpace){return Nn.fromWorkingColorSpace(pi.copy(this),e),t.r=pi.r,t.g=pi.g,t.b=pi.b,t}getStyle(t=Ce){Nn.fromWorkingColorSpace(pi.copy(this),t);const e=pi.r,n=pi.g,r=pi.b;return t!==Ce?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(ui),ui.h+=t,ui.s+=e,ui.l+=n,this.setHSL(ui.h,ui.s,ui.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(ui),t.getHSL(hi);const n=tn(ui.h,hi.h,e),r=tn(ui.s,hi.s,e),i=tn(ui.l,hi.l,e);return this.setHSL(n,r,i),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,i=t.elements;return this.r=i[0]*e+i[3]*n+i[6]*r,this.g=i[1]*e+i[4]*n+i[7]*r,this.b=i[2]*e+i[5]*n+i[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const pi=new fi;fi.NAMES=ci;class mi extends li{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const gi=new qn,yi=new wn;class vi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=Fe,this.updateRange={offset:0,count:-1},this.gpuType=_t,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)yi.fromBufferAttribute(this,e),yi.applyMatrix3(t),this.setXY(e,yi.x,yi.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyMatrix3(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyMatrix4(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.applyNormalMatrix(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)gi.fromBufferAttribute(this,e),gi.transformDirection(t),this.setXYZ(e,gi.x,gi.y,gi.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=gn(e,this.array)),e}setX(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=gn(e,this.array)),e}setY(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=gn(e,this.array)),e}setZ(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=gn(e,this.array)),e}setW(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),r=yn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,i){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),r=yn(r,this.array),i=yn(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Fe&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class wi extends vi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class bi extends vi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class _i extends vi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Si=0;const Ei=new Er,Ai=new Yr,xi=new qn,Ci=new Zn,Ti=new Zn,Mi=new qn;class Ii extends We{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Si++}),this.uuid=Xe(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Sn(t)?bi:wi)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new bn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ei.makeRotationFromQuaternion(t),this.applyMatrix4(Ei),this}rotateX(t){return Ei.makeRotationX(t),this.applyMatrix4(Ei),this}rotateY(t){return Ei.makeRotationY(t),this.applyMatrix4(Ei),this}rotateZ(t){return Ei.makeRotationZ(t),this.applyMatrix4(Ei),this}translate(t,e,n){return Ei.makeTranslation(t,e,n),this.applyMatrix4(Ei),this}scale(t,e,n){return Ei.makeScale(t,e,n),this.applyMatrix4(Ei),this}lookAt(t){return Ai.lookAt(t),Ai.updateMatrix(),this.applyMatrix4(Ai.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xi).negate(),this.translate(xi.x,xi.y,xi.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new _i(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Zn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new qn(-1/0,-1/0,-1/0),new qn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){const t=e[n];Ci.setFromBufferAttribute(t),this.morphTargetsRelative?(Mi.addVectors(this.boundingBox.min,Ci.min),this.boundingBox.expandByPoint(Mi),Mi.addVectors(this.boundingBox.max,Ci.max),this.boundingBox.expandByPoint(Mi)):(this.boundingBox.expandByPoint(Ci.min),this.boundingBox.expandByPoint(Ci.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new qn,1/0);if(t){const n=this.boundingSphere.center;if(Ci.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const n=e[t];Ti.setFromBufferAttribute(n),this.morphTargetsRelative?(Mi.addVectors(Ci.min,Ti.min),Ci.expandByPoint(Mi),Mi.addVectors(Ci.max,Ti.max),Ci.expandByPoint(Mi)):(Ci.expandByPoint(Ti.min),Ci.expandByPoint(Ti.max))}Ci.getCenter(n);let r=0;for(let e=0,i=t.count;e<i;e++)Mi.fromBufferAttribute(t,e),r=Math.max(r,n.distanceToSquared(Mi));if(e)for(let i=0,o=e.length;i<o;i++){const o=e[i],s=this.morphTargetsRelative;for(let e=0,i=o.count;e<i;e++)Mi.fromBufferAttribute(o,e),s&&(xi.fromBufferAttribute(t,e),Mi.add(xi)),r=Math.max(r,n.distanceToSquared(Mi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,i=e.normal.array,o=e.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new vi(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let x=0;x<s;x++)l[x]=new qn,c[x]=new qn;const u=new qn,h=new qn,d=new qn,f=new wn,p=new wn,m=new wn,g=new qn,y=new qn;function v(t,e,n){u.fromArray(r,3*t),h.fromArray(r,3*e),d.fromArray(r,3*n),f.fromArray(o,2*t),p.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),y.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),l[t].add(g),l[e].add(g),l[n].add(g),c[t].add(y),c[e].add(y),c[n].add(y))}let w=this.groups;0===w.length&&(w=[{start:0,count:n.length}]);for(let x=0,C=w.length;x<C;++x){const t=w[x],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)v(n[i+0],n[i+1],n[i+2])}const b=new qn,_=new qn,S=new qn,E=new qn;function A(t){S.fromArray(i,3*t),E.copy(S);const e=l[t];b.copy(e),b.sub(S.multiplyScalar(S.dot(e))).normalize(),_.crossVectors(E,e);const n=_.dot(c[t]),r=n<0?-1:1;a[4*t]=b.x,a[4*t+1]=b.y,a[4*t+2]=b.z,a[4*t+3]=r}for(let x=0,C=w.length;x<C;++x){const t=w[x],e=t.start,r=t.count;for(let i=e,o=e+r;i<o;i+=3)A(n[i+0]),A(n[i+1]),A(n[i+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new vi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const r=new qn,i=new qn,o=new qn,s=new qn,a=new qn,l=new qn,c=new qn,u=new qn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);r.fromBufferAttribute(e,d),i.fromBufferAttribute(e,f),o.fromBufferAttribute(e,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),s.add(c),a.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)r.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Mi.fromBufferAttribute(t,e),Mi.normalize(),t.setXYZ(e,Mi.x,Mi.y,Mi.z)}toNonIndexed(){function t(t,e){const n=t.array,r=t.itemSize,i=t.normalized,o=new n.constructor(e.length*r);let s=0,a=0;for(let l=0,c=e.length;l<c;l++){s=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*r;for(let t=0;t<r;t++)o[a++]=n[s++]}return new vi(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ii,n=this.index.array,r=this.attributes;for(const s in r){const i=r[s],o=t(i,n);e.setAttribute(s,o)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let e=0,i=o.length;e<i;e++){const i=o[e],s=t(i,n);r.push(s)}e.morphAttributes[s]=r}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const t=o[s];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const r={};let i=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n.push(i.toJSON(t.data))}n.length>0&&(r[a]=n,i=!0)}i&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const l in r){const t=r[l];this.setAttribute(l,t.clone(e))}const i=t.morphAttributes;for(const l in i){const t=[],n=i[l];for(let r=0,i=n.length;r<i;r++)t.push(n[r].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,c=o.length;l<c;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ki=new Er,Oi=new Sr,Ri=new pr,Di=new qn,Ni=new qn,Pi=new qn,Li=new qn,Bi=new qn,Ui=new qn,Fi=new wn,zi=new wn,Vi=new wn,Hi=new qn,ji=new qn,Wi=new qn,Gi=new qn,$i=new qn;class qi extends Yr{constructor(t=new Ii,e=new mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}getVertexPosition(t,e){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(r,t);const s=this.morphTargetInfluences;if(i&&s){Ui.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(Bi.fromBufferAttribute(a,t),o?Ui.addScaledVector(Bi,r):Ui.addScaledVector(Bi.sub(e),r))}e.add(Ui)}return e}raycast(t,e){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Ri.copy(n.boundingSphere),Ri.applyMatrix4(i),Oi.copy(t.ray).recast(t.near),!1===Ri.containsPoint(Oi.origin)){if(null===Oi.intersectSphere(Ri,Di))return;if(Oi.origin.distanceToSquared(Di)>(t.far-t.near)**2)return}ki.copy(i).invert(),Oi.copy(t.ray).applyMatrix4(ki),null!==n.boundingBox&&!1===Oi.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,Oi)}}_computeIntersections(t,e,n){let r;const i=this.geometry,o=this.material,s=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==s)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const i=h[f],a=o[i.materialIndex],p=Math.max(i.start,d.start),m=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));for(let o=p,h=m;o<h;o+=3){const h=s.getX(o),d=s.getX(o+1),f=s.getX(o+2);r=Xi(this,a,t,n,l,c,u,h,d,f),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);for(let h=i,d=a;h<d;h+=3){const i=s.getX(h),a=s.getX(h+1),d=s.getX(h+2);r=Xi(this,o,t,n,l,c,u,i,a,d),r&&(r.faceIndex=Math.floor(h/3),e.push(r))}}else if(void 0!==a)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const i=h[f],s=o[i.materialIndex],p=Math.max(i.start,d.start),m=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));for(let o=p,a=m;o<a;o+=3){const a=o,h=o+1,d=o+2;r=Xi(this,s,t,n,l,c,u,a,h,d),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,e.push(r))}}else{const i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);for(let a=i,h=s;a<h;a+=3){const i=a,s=a+1,h=a+2;r=Xi(this,o,t,n,l,c,u,i,s,h),r&&(r.faceIndex=Math.floor(a/3),e.push(r))}}}}function Yi(t,e,n,r,i,o,s,a){let l;if(l=e.side===f?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,e.side===d,a),null===l)return null;$i.copy(a),$i.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo($i);return c<n.near||c>n.far?null:{distance:c,point:$i.clone(),object:t}}function Xi(t,e,n,r,i,o,s,a,l,c){t.getVertexPosition(a,Ni),t.getVertexPosition(l,Pi),t.getVertexPosition(c,Li);const u=Yi(t,e,n,r,Ni,Pi,Li,Gi);if(u){i&&(Fi.fromBufferAttribute(i,a),zi.fromBufferAttribute(i,l),Vi.fromBufferAttribute(i,c),u.uv=si.getInterpolation(Gi,Ni,Pi,Li,Fi,zi,Vi,new wn)),o&&(Fi.fromBufferAttribute(o,a),zi.fromBufferAttribute(o,l),Vi.fromBufferAttribute(o,c),u.uv1=si.getInterpolation(Gi,Ni,Pi,Li,Fi,zi,Vi,new wn),u.uv2=u.uv1),s&&(Hi.fromBufferAttribute(s,a),ji.fromBufferAttribute(s,l),Wi.fromBufferAttribute(s,c),u.normal=si.getInterpolation(Gi,Ni,Pi,Li,Hi,ji,Wi,new qn),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const t={a:a,b:l,c:c,normal:new qn,materialIndex:0};si.getNormal(Ni,Pi,Li,t.normal),u.face=t}return u}class Zi extends Ii{constructor(t=1,e=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[];let h=0,d=0;function f(t,e,n,r,i,o,f,p,m,g,y){const v=o/m,w=f/g,b=o/2,_=f/2,S=p/2,E=m+1,A=g+1;let x=0,C=0;const T=new qn;for(let s=0;s<A;s++){const o=s*w-_;for(let a=0;a<E;a++){const h=a*v-b;T[t]=h*r,T[e]=o*i,T[n]=S,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(a/m),u.push(1-s/g),x+=1}}for(let s=0;s<g;s++)for(let t=0;t<m;t++){const e=h+t+E*s,n=h+t+E*(s+1),r=h+(t+1)+E*(s+1),i=h+(t+1)+E*s;a.push(e,n,i),a.push(n,r,i),C+=6}s.addGroup(d,C,y),d+=C,h+=x}f("z","y","x",-1,-1,n,e,t,o,i,0),f("z","y","x",1,-1,n,e,-t,o,i,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,i,4),f("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new _i(l,3)),this.setAttribute("normal",new _i(c,3)),this.setAttribute("uv",new _i(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zi(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ki(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Ji(t){const e={};for(let n=0;n<t.length;n++){const r=Ki(t[n]);for(const t in r)e[t]=r[t]}return e}function Qi(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function to(t){return null===t.getRenderTarget()?t.outputColorSpace:Te}const eo={clone:Ki,merge:Ji};var no="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ro="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";class io extends li{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=no,this.fragmentShader=ro,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ki(t.uniforms),this.uniformsGroups=Qi(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r],i=n.value;i&&i.isTexture?e.uniforms[r]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[r]={type:"m4",value:i.toArray()}:e.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class oo extends Yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Er,this.projectionMatrix=new Er,this.projectionMatrixInverse=new Er,this.coordinateSystem=He}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class so extends oo{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Ye*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*qe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Ye*Math.atan(Math.tan(.5*qe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*qe*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/t,e-=o.offsetY*n/s,r*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const ao=-90,lo=1;class co extends Yr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;const r=new so(ao,lo,t,e);r.layers=this.layers,this.add(r);const i=new so(ao,lo,t,e);i.layers=this.layers,this.add(i);const o=new so(ao,lo,t,e);o.layers=this.layers,this.add(o);const s=new so(ao,lo,t,e);s.layers=this.layers,this.add(s);const a=new so(ao,lo,t,e);a.layers=this.layers,this.add(a);const l=new so(ao,lo,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,i,o,s,a]=e;for(const l of e)this.remove(l);if(t===He)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==je)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,i,o,s,a,l]=this.children,c=t.getRenderTarget(),u=t.toneMapping,h=t.xr.enabled;t.toneMapping=Y,t.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,i),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(c),t.toneMapping=u,t.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class uo extends Vn{constructor(t,e,n,r,i,o,s,a,l,c){t=void 0!==t?t:[],e=void 0!==e?e:et,super(t,e,n,r,i,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class ho extends jn{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];void 0!==e.encoding&&(xn("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),e.colorSpace=e.encoding===be?Ce:xe),this.texture=new uo(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:dt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Zi(5,5,5),i=new io({name:"CubemapFromEquirect",uniforms:Ki(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:f,blending:m});i.uniforms.tEquirect.value=e;const o=new qi(r,i),s=e.minFilter;e.minFilter===pt&&(e.minFilter=dt);const a=new co(1,10,this);return a.update(t,o),e.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const i=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(i)}}const fo=new qn,po=new qn,mo=new bn;class go{constructor(t=new qn(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=fo.subVectors(n,e).cross(po.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(fo),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:e.copy(t.start).addScaledVector(n,i)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||mo.getNormalMatrix(t),r=this.coplanarPoint(fo).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const yo=new pr,vo=new qn;class wo{constructor(t=new go,e=new go,n=new go,r=new go,i=new go,o=new go){this.planes=[t,e,n,r,i,o]}set(t,e,n,r,i,o){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=He){const n=this.planes,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],g=r[12],y=r[13],v=r[14],w=r[15];if(n[0].setComponents(a-i,h-l,m-d,w-g).normalize(),n[1].setComponents(a+i,h+l,m+d,w+g).normalize(),n[2].setComponents(a+o,h+c,m+f,w+y).normalize(),n[3].setComponents(a-o,h-c,m-f,w-y).normalize(),n[4].setComponents(a-s,h-u,m-p,w-v).normalize(),e===He)n[5].setComponents(a+s,h+u,m+p,w+v).normalize();else{if(e!==je)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(s,u,p,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),yo.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),yo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(yo)}intersectsSprite(t){return yo.center.set(0,0,0),yo.radius=.7071067811865476,yo.applyMatrix4(t.matrixWorld),this.intersectsSphere(yo)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let i=0;i<6;i++){const t=e[i].distanceToPoint(n);if(t<r)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(vo.x=r.normal.x>0?t.max.x:t.min.x,vo.y=r.normal.y>0?t.max.y:t.min.y,vo.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(vo)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function bo(){let t=null,e=!1,n=null,r=null;function i(e,o){n(e,o),r=t.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function _o(t,e){const n=e.isWebGL2,r=new WeakMap;function i(e,r){const i=e.array,o=e.usage,s=t.createBuffer();let a;if(t.bindBuffer(r,s),t.bufferData(r,i,o),e.onUploadCallback(),i instanceof Float32Array)a=t.FLOAT;else if(i instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=t.HALF_FLOAT}else a=t.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=t.SHORT;else if(i instanceof Uint32Array)a=t.UNSIGNED_INT;else if(i instanceof Int32Array)a=t.INT;else if(i instanceof Int8Array)a=t.BYTE;else if(i instanceof Uint8Array)a=t.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=t.UNSIGNED_BYTE}return{buffer:s,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function o(e,r,i){const o=r.array,s=r.updateRange;t.bindBuffer(i,e),-1===s.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}function s(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))}function l(t,e){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);void 0===n?r.set(t,i(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:s,remove:a,update:l}}class So extends Ii{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const i=t/2,o=e/2,s=Math.floor(n),a=Math.floor(r),l=s+1,c=a+1,u=t/s,h=e/a,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const t=g*h-o;for(let e=0;e<l;e++){const n=e*u-i;f.push(n,-t,0),p.push(0,0,1),m.push(e/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let t=0;t<s;t++){const e=t+l*g,n=t+l*(g+1),r=t+1+l*(g+1),i=t+1+l*g;d.push(e,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new _i(f,3)),this.setAttribute("normal",new _i(p,3)),this.setAttribute("uv",new _i(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new So(t.width,t.height,t.widthSegments,t.heightSegments)}}var Eo="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",Ao="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",xo="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",Co="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",To="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",Mo="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Io="vec3 transformed = vec3( position );",ko="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Oo="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",Ro="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",Do="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",No="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Po="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",Lo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",Bo="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Uo="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Fo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",zo="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Vo="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Ho="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",jo="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Wo="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Go="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",$o="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",qo="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Yo="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Xo="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zo="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Ko="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Jo="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",Qo="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",ts="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",es="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",ns="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",rs="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",is="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",os="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",ss="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",as="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",ls="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",cs="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",us="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",hs="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",ds="#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",fs="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",ps="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",ms="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",gs="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",ys="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",vs="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",ws="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",bs="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",_s="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Ss="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Es="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",As="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",xs="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Cs="#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",Ts="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Ms="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Is="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",ks="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",Os="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Rs="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",Ds="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",Ns="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",Ps="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",Ls="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Bs="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",Us="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Fs="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",zs="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",Vs="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",Hs="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",js="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Ws="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",Gs="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",$s="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",qs="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",Ys="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Xs="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Zs="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Ks="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Js="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",Qs="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",ta="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",ea="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",na="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",ra="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",ia="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",oa="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",sa="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",aa="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",la="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ca="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ua="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",ha="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",da="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",fa="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",pa="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ma="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",ga="#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",ya="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif";const va="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",wa="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ba="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",_a="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Sa="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Ea="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Aa="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",xa="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ca="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Ta="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Ma="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Ia="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ka="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Oa="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ra="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Da="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Na="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Pa="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",La="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ba="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ua="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Fa="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",za="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Va="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ha="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",ja="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Wa="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ga="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",$a="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",qa="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Ya="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Xa="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Za="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ka="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Ja={alphamap_fragment:Eo,alphamap_pars_fragment:Ao,alphatest_fragment:xo,alphatest_pars_fragment:Co,aomap_fragment:To,aomap_pars_fragment:Mo,begin_vertex:Io,beginnormal_vertex:ko,bsdfs:Oo,iridescence_fragment:Ro,bumpmap_pars_fragment:Do,clipping_planes_fragment:No,clipping_planes_pars_fragment:Po,clipping_planes_pars_vertex:Lo,clipping_planes_vertex:Bo,color_fragment:Uo,color_pars_fragment:Fo,color_pars_vertex:zo,color_vertex:Vo,common:Ho,cube_uv_reflection_fragment:jo,defaultnormal_vertex:Wo,displacementmap_pars_vertex:Go,displacementmap_vertex:$o,emissivemap_fragment:qo,emissivemap_pars_fragment:Yo,encodings_fragment:Xo,encodings_pars_fragment:Zo,envmap_fragment:Ko,envmap_common_pars_fragment:Jo,envmap_pars_fragment:Qo,envmap_pars_vertex:ts,envmap_physical_pars_fragment:ds,envmap_vertex:es,fog_vertex:ns,fog_pars_vertex:rs,fog_fragment:is,fog_pars_fragment:os,gradientmap_pars_fragment:ss,lightmap_fragment:as,lightmap_pars_fragment:ls,lights_lambert_fragment:cs,lights_lambert_pars_fragment:us,lights_pars_begin:hs,lights_toon_fragment:fs,lights_toon_pars_fragment:ps,lights_phong_fragment:ms,lights_phong_pars_fragment:gs,lights_physical_fragment:ys,lights_physical_pars_fragment:vs,lights_fragment_begin:ws,lights_fragment_maps:bs,lights_fragment_end:_s,logdepthbuf_fragment:Ss,logdepthbuf_pars_fragment:Es,logdepthbuf_pars_vertex:As,logdepthbuf_vertex:xs,map_fragment:Cs,map_pars_fragment:Ts,map_particle_fragment:Ms,map_particle_pars_fragment:Is,metalnessmap_fragment:ks,metalnessmap_pars_fragment:Os,morphcolor_vertex:Rs,morphnormal_vertex:Ds,morphtarget_pars_vertex:Ns,morphtarget_vertex:Ps,normal_fragment_begin:Ls,normal_fragment_maps:Bs,normal_pars_fragment:Us,normal_pars_vertex:Fs,normal_vertex:zs,normalmap_pars_fragment:Vs,clearcoat_normal_fragment_begin:Hs,clearcoat_normal_fragment_maps:js,clearcoat_pars_fragment:Ws,iridescence_pars_fragment:Gs,output_fragment:$s,packing:qs,premultiplied_alpha_fragment:Ys,project_vertex:Xs,dithering_fragment:Zs,dithering_pars_fragment:Ks,roughnessmap_fragment:Js,roughnessmap_pars_fragment:Qs,shadowmap_pars_fragment:ta,shadowmap_pars_vertex:ea,shadowmap_vertex:na,shadowmask_pars_fragment:ra,skinbase_vertex:ia,skinning_pars_vertex:oa,skinning_vertex:sa,skinnormal_vertex:aa,specularmap_fragment:la,specularmap_pars_fragment:ca,tonemapping_fragment:ua,tonemapping_pars_fragment:ha,transmission_fragment:da,transmission_pars_fragment:fa,uv_pars_fragment:pa,uv_pars_vertex:ma,uv_vertex:ga,worldpos_vertex:ya,background_vert:va,background_frag:wa,backgroundCube_vert:ba,backgroundCube_frag:_a,cube_vert:Sa,cube_frag:Ea,depth_vert:Aa,depth_frag:xa,distanceRGBA_vert:Ca,distanceRGBA_frag:Ta,equirect_vert:Ma,equirect_frag:Ia,linedashed_vert:ka,linedashed_frag:Oa,meshbasic_vert:Ra,meshbasic_frag:Da,meshlambert_vert:Na,meshlambert_frag:Pa,meshmatcap_vert:La,meshmatcap_frag:Ba,meshnormal_vert:Ua,meshnormal_frag:Fa,meshphong_vert:za,meshphong_frag:Va,meshphysical_vert:Ha,meshphysical_frag:ja,meshtoon_vert:Wa,meshtoon_frag:Ga,points_vert:$a,points_frag:qa,shadow_vert:Ya,shadow_frag:Xa,sprite_vert:Za,sprite_frag:Ka},Qa={common:{diffuse:{value:new fi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new wn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new fi(16777215)},opacity:{value:1},center:{value:new wn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}}},tl={basic:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.fog]),vertexShader:Ja.meshbasic_vert,fragmentShader:Ja.meshbasic_frag},lambert:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Ja.meshlambert_vert,fragmentShader:Ja.meshlambert_frag},phong:{uniforms:Ji([Qa.common,Qa.specularmap,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},specular:{value:new fi(1118481)},shininess:{value:30}}]),vertexShader:Ja.meshphong_vert,fragmentShader:Ja.meshphong_frag},standard:{uniforms:Ji([Qa.common,Qa.envmap,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.roughnessmap,Qa.metalnessmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ja.meshphysical_vert,fragmentShader:Ja.meshphysical_frag},toon:{uniforms:Ji([Qa.common,Qa.aomap,Qa.lightmap,Qa.emissivemap,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.gradientmap,Qa.fog,Qa.lights,{emissive:{value:new fi(0)}}]),vertexShader:Ja.meshtoon_vert,fragmentShader:Ja.meshtoon_frag},matcap:{uniforms:Ji([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,Qa.fog,{matcap:{value:null}}]),vertexShader:Ja.meshmatcap_vert,fragmentShader:Ja.meshmatcap_frag},points:{uniforms:Ji([Qa.points,Qa.fog]),vertexShader:Ja.points_vert,fragmentShader:Ja.points_frag},dashed:{uniforms:Ji([Qa.common,Qa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ja.linedashed_vert,fragmentShader:Ja.linedashed_frag},depth:{uniforms:Ji([Qa.common,Qa.displacementmap]),vertexShader:Ja.depth_vert,fragmentShader:Ja.depth_frag},normal:{uniforms:Ji([Qa.common,Qa.bumpmap,Qa.normalmap,Qa.displacementmap,{opacity:{value:1}}]),vertexShader:Ja.meshnormal_vert,fragmentShader:Ja.meshnormal_frag},sprite:{uniforms:Ji([Qa.sprite,Qa.fog]),vertexShader:Ja.sprite_vert,fragmentShader:Ja.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ja.background_vert,fragmentShader:Ja.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ja.backgroundCube_vert,fragmentShader:Ja.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ja.cube_vert,fragmentShader:Ja.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ja.equirect_vert,fragmentShader:Ja.equirect_frag},distanceRGBA:{uniforms:Ji([Qa.common,Qa.displacementmap,{referencePosition:{value:new qn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ja.distanceRGBA_vert,fragmentShader:Ja.distanceRGBA_frag},shadow:{uniforms:Ji([Qa.lights,Qa.fog,{color:{value:new fi(0)},opacity:{value:1}}]),vertexShader:Ja.shadow_vert,fragmentShader:Ja.shadow_frag}};tl.physical={uniforms:Ji([tl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new wn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new fi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new wn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new fi(0)},specularColor:{value:new fi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn},anisotropyVector:{value:new wn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bn}}]),vertexShader:Ja.meshphysical_vert,fragmentShader:Ja.meshphysical_frag};const el={r:0,b:0,g:0};function nl(t,e,n,r,i,o,s){const a=new fi(0);let l,c,u=!0===o?0:1,h=null,p=0,m=null;function g(o,g){let v=!1,w=!0===g.isScene?g.background:null;if(w&&w.isTexture){const t=g.backgroundBlurriness>0;w=(t?n:e).get(w)}null===w?y(a,u):w&&w.isColor&&(y(w,1),v=!0);const b=t.xr,_=b.getEnvironmentBlendMode();switch(_){case"opaque":v=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,s),v=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,s),v=!0;break}(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),w&&(w.isCubeTexture||w.mapping===ot)?(void 0===c&&(c=new qi(new Zi(1,1,1),new io({name:"BackgroundCubeMaterial",uniforms:Ki(tl.backgroundCube.uniforms),vertexShader:tl.backgroundCube.vertexShader,fragmentShader:tl.backgroundCube.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=w.colorSpace!==Ce,h===w&&p===w.version&&m===t.toneMapping||(c.material.needsUpdate=!0,h=w,p=w.version,m=t.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(void 0===l&&(l=new qi(new So(2,2),new io({name:"BackgroundMaterial",uniforms:Ki(tl.background.uniforms),vertexShader:tl.background.vertexShader,fragmentShader:tl.background.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=w,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=w.colorSpace!==Ce,!0===w.matrixAutoUpdate&&w.updateMatrix(),l.material.uniforms.uvTransform.value.copy(w.matrix),h===w&&p===w.version&&m===t.toneMapping||(l.material.needsUpdate=!0,h=w,p=w.version,m=t.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}function y(e,n){e.getRGB(el,to(t)),r.buffers.color.setClear(el.r,el.g,el.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),u=e,y(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,y(a,u)},render:g}}function rl(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=g(null);let c=l,u=!1;function h(e,r,i,o,a){let l=!1;if(s){const t=m(o,i,r);c!==t&&(c=t,f(c.object)),l=y(e,o,i,a),l&&v(e,o,i,a)}else{const t=!0===r.wireframe;c.geometry===o.id&&c.program===i.id&&c.wireframe===t||(c.geometry=o.id,c.program=i.id,c.wireframe=t,l=!0)}null!==a&&n.update(a,t.ELEMENT_ARRAY_BUFFER),(l||u)&&(u=!1,A(e,r,i,o),null!==a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(a).buffer))}function d(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function f(e){return r.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function p(e){return r.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function m(t,e,n){const r=!0===n.wireframe;let i=a[t.id];void 0===i&&(i={},a[t.id]=i);let o=i[e.id];void 0===o&&(o={},i[e.id]=o);let s=o[r];return void 0===s&&(s=g(d()),o[r]=s),s}function g(t){const e=[],n=[],r=[];for(let o=0;o<i;o++)e[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function y(t,e,n,r){const i=c.attributes,o=e.attributes;let s=0;const a=n.getAttributes();for(const l in a){const e=a[l];if(e.location>=0){const e=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}function v(t,e,n,r){const i={},o=e.attributes;let s=0;const a=n.getAttributes();for(const l in a){const e=a[l];if(e.location>=0){let e=o[l];void 0===e&&("instanceMatrix"===l&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===l&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}function w(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function b(t){_(t,0)}function _(n,i){const o=c.newAttributes,s=c.enabledAttributes,a=c.attributeDivisors;if(o[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),a[n]!==i){const o=r.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function S(){const e=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function E(e,n,r,i,o,s,a){!0===a?t.vertexAttribIPointer(e,n,r,o,s):t.vertexAttribPointer(e,n,r,i,o,s)}function A(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;w();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const e in c){const o=c[e];if(o.location>=0){let s=l[e];if(void 0===s&&("instanceMatrix"===e&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===e&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const e=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,h=c.type,d=c.bytesPerElement,f=!0===r.isWebGL2&&(h===t.INT||h===t.UNSIGNED_INT||s.gpuType===wt);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let t=0;t<o.locationSize;t++)_(o.location+t,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<o.locationSize;t++)b(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)E(o.location+t,l/o.locationSize,h,e,r*d,(c+l/o.locationSize*t)*d,f)}else{if(s.isInstancedBufferAttribute){for(let t=0;t<o.locationSize;t++)_(o.location+t,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let t=0;t<o.locationSize;t++)b(o.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<o.locationSize;t++)E(o.location+t,l/o.locationSize,h,e,l*d,l/o.locationSize*t*d,f)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(o.location,n);break;case 3:t.vertexAttrib3fv(o.location,n);break;case 4:t.vertexAttrib4fv(o.location,n);break;default:t.vertexAttrib1fv(o.location,n)}}}}S()}function x(){M();for(const t in a){const e=a[t];for(const t in e){const n=e[t];for(const t in n)p(n[t].object),delete n[t];delete e[t]}delete a[t]}}function C(t){if(void 0===a[t.id])return;const e=a[t.id];for(const n in e){const t=e[n];for(const e in t)p(t[e].object),delete t[e];delete e[n]}delete a[t.id]}function T(t){for(const e in a){const n=a[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)p(r[t].object),delete r[t];delete n[t.id]}}function M(){I(),u=!0,c!==l&&(c=l,f(c.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:M,resetDefaultState:I,dispose:x,releaseStatesOfGeometry:C,releaseStatesOfProgram:T,initAttributes:w,enableAttribute:b,disableUnusedAttributes:S}}function il(t,e,n,r){const i=r.isWebGL2;let o;function s(t){o=t}function a(e,r){t.drawArrays(o,e,r),n.update(r,o,1)}function l(r,s,a){if(0===a)return;let l,c;if(i)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,s,a),n.update(s,o,a)}this.setMode=s,this.render=a,this.renderInstances=l}function ol(t,e,n){let r;function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===t.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),y=t.getParameter(t.MAX_VARYING_VECTORS),v=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),w=d>0,b=s||e.has("OES_texture_float"),_=w&&b,S=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:y,maxFragmentUniforms:v,vertexTextures:w,floatFragmentTextures:b,floatVertexTextures:_,maxSamples:S}}function sl(t){const e=this;let n=null,r=0,i=!1,o=!1;const s=new go,a=new bn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(t,n,r,i){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const e=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=r;n!==o;++n,l+=4)s.copy(t[n]).applyMatrix4(i,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==r||i;return i=e,r=t.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){n=u(t,e,0)},this.setState=function(e,s,a){const h=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!i||null===h||0===h.length||o&&!f)o?u(null):c();else{const t=o?0:r,e=4*t;let i=p.clippingState||null;l.value=i,i=u(h,s,e,a);for(let r=0;r!==e;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function al(t){let e=new WeakMap;function n(t,e){return e===rt?t.mapping=et:e===it&&(t.mapping=nt),t}function r(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(o===rt||o===it){if(e.has(r)){const t=e.get(r).texture;return n(t,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new ho(o.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class ll extends oo{constructor(t=-1,e=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=t*this.view.offsetX,o=i+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const cl=4,ul=[.125,.215,.35,.446,.526,.582],hl=20,dl=new ll,fl=new fi;let pl=null;const ml=(1+Math.sqrt(5))/2,gl=1/ml,yl=[new qn(1,1,1),new qn(-1,1,1),new qn(1,1,-1),new qn(-1,1,-1),new qn(0,ml,gl),new qn(0,ml,-gl),new qn(gl,0,ml),new qn(-gl,0,ml),new qn(ml,gl,0),new qn(-ml,gl,0)];class vl{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){pl=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Al(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=El(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(pl),t.scissorTest=!1,_l(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===et||t.mapping===nt?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),pl=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:dt,minFilter:dt,generateMipmaps:!1,type:St,format:Tt,colorSpace:Te,depthBuffer:!1},r=bl(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=bl(t,e,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=wl(r)),this._blurMaterial=Sl(r,t,e)}return r}_compileMaterial(t){const e=new qi(this._lodPlanes[0],t);this._renderer.compile(e,dl)}_sceneToCubeUV(t,e,n,r){const i=90,o=1,s=new so(i,o,e,n),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,h=c.toneMapping;c.getClearColor(fl),c.toneMapping=Y,c.autoClear=!1;const d=new mi({name:"PMREM.Background",side:f,depthWrite:!1,depthTest:!1}),p=new qi(new Zi,d);let m=!1;const g=t.background;g?g.isColor&&(d.color.copy(g),t.background=null,m=!0):(d.color.copy(fl),m=!0);for(let f=0;f<6;f++){const e=f%3;0===e?(s.up.set(0,a[f],0),s.lookAt(l[f],0,0)):1===e?(s.up.set(0,0,a[f]),s.lookAt(0,l[f],0)):(s.up.set(0,a[f],0),s.lookAt(0,0,l[f]));const n=this._cubeSize;_l(r,e*n,f>2?n:0,n,n),c.setRenderTarget(r),m&&c.render(p,s),c.render(t,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=h,c.autoClear=u,t.background=g}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===et||t.mapping===nt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Al()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=El());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new qi(this._lodPlanes[0],i),s=i.uniforms;s["envMap"].value=t;const a=this._cubeSize;_l(e,0,0,3*a,2*a),n.setRenderTarget(e),n.render(o,dl)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=yl[(r-1)%yl.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)}_halfBlur(t,e,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new qi(this._lodPlanes[r],l),h=l.uniforms,d=this._sizeLods[n]-1,f=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*hl-1),p=i/f,m=isFinite(i)?1+Math.floor(c*p):hl;m>hl&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${hl}`);const g=[];let y=0;for(let S=0;S<hl;++S){const t=S/p,e=Math.exp(-t*t/2);g.push(e),0===S?y+=e:S<m&&(y+=2*e)}for(let S=0;S<g.length;S++)g[S]=g[S]/y;h["envMap"].value=t.texture,h["samples"].value=m,h["weights"].value=g,h["latitudinal"].value="latitudinal"===o,s&&(h["poleAxis"].value=s);const{_lodMax:v}=this;h["dTheta"].value=f,h["mipInt"].value=v-n;const w=this._sizeLods[r],b=3*w*(r>v-cl?r-v+cl:0),_=4*(this._cubeSize-w);_l(e,b,_,3*w,2*w),a.setRenderTarget(e),a.render(u,dl)}}function wl(t){const e=[],n=[],r=[];let i=t;const o=t-cl+1+ul.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>t-cl?a=ul[s-t+cl-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,y=new Float32Array(p*f*d),v=new Float32Array(m*f*d),w=new Float32Array(g*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,r=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];y.set(r,p*f*t),v.set(h,m*f*t);const i=[t,t,t,t,t,t];w.set(i,g*f*t)}const b=new Ii;b.setAttribute("position",new vi(y,p)),b.setAttribute("uv",new vi(v,m)),b.setAttribute("faceIndex",new vi(w,g)),e.push(b),i>cl&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function bl(t,e,n){const r=new jn(t,e,n);return r.texture.mapping=ot,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _l(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Sl(t,e,n){const r=new Float32Array(hl),i=new qn(0,1,0),o=new io({name:"SphericalGaussianBlur",defines:{n:hl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:xl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1});return o}function El(){return new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:xl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function Al(){return new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:xl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:m,depthTest:!1,depthWrite:!1})}function xl(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Cl(t){let e=new WeakMap,n=null;function r(r){if(r&&r.isTexture){const s=r.mapping,a=s===rt||s===it,l=s===et||s===nt;if(a||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=e.get(r);return null===n&&(n=new vl(t)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),e.set(r,i),i.texture}if(e.has(r))return e.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||l&&s&&i(s)){null===n&&(n=new vl(t));const i=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,i),r.addEventListener("dispose",o),i.texture}return null}}}return r}function i(t){let e=0;const n=6;for(let r=0;r<n;r++)void 0!==t[r]&&e++;return e===n}function o(t){const n=t.target;n.removeEventListener("dispose",o);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}function s(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}return{get:r,dispose:s}}function Tl(t){const e={};function n(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Ml(t,e,n,r){const i={},o=new WeakMap;function s(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);for(const n in a.morphAttributes){const t=a.morphAttributes[n];for(let n=0,r=t.length;n<r;n++)e.remove(t[n])}a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(e.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t,e){return!0===i[e.id]||(e.addEventListener("dispose",s),i[e.id]=!0,n.memory.geometries++),e}function l(n){const r=n.attributes;for(const o in r)e.update(r[o],t.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)e.update(n[r],t.ARRAY_BUFFER)}}function c(t){const n=[],r=t.index,i=t.attributes.position;let s=0;if(null!==r){const t=r.array;s=r.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],i=t[e+1],o=t[e+2];n.push(r,i,i,o,o,r)}}else{const t=i.array;s=i.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,i=e+2;n.push(t,r,r,i,i,t)}}const a=new(Sn(n)?bi:wi)(n,1);a.version=s;const l=o.get(t);l&&e.remove(l),o.set(t,a)}function u(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&c(t)}else c(t);return o.get(t)}return{get:a,update:l,getWireframeAttribute:u}}function Il(t,e,n,r){const i=r.isWebGL2;let o,s,a;function l(t){o=t}function c(t){s=t.type,a=t.bytesPerElement}function u(e,r){t.drawElements(o,r,s,e*a),n.update(r,o,1)}function h(r,l,c){if(0===c)return;let u,h;if(i)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,s,r*a,c),n.update(l,o,c)}this.setMode=l,this.setIndex=c,this.render=u,this.renderInstances=h}function kl(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(e,r,i){switch(n.calls++,r){case t.TRIANGLES:n.triangles+=i*(e/3);break;case t.LINES:n.lines+=i*(e/2);break;case t.LINE_STRIP:n.lines+=i*(e-1);break;case t.LINE_LOOP:n.lines+=i*e;break;case t.POINTS:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Ol(t,e){return t[0]-e[0]}function Rl(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Dl(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new Hn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(l,c,u){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==d?d.length:0;let p=o.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const y=void 0!==c.morphAttributes.position,v=void 0!==c.morphAttributes.normal,w=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],_=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let E=0;!0===y&&(E=1),!0===v&&(E=2),!0===w&&(E=3);let A=c.attributes.position.count*E,x=1;A>e.maxTextureSize&&(x=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const C=new Float32Array(A*x*4*f),T=new Wn(C,A,x,f);T.type=_t,T.needsUpdate=!0;const M=4*E;for(let k=0;k<f;k++){const O=b[k],R=_[k],D=S[k],N=A*x*4*k;for(let P=0;P<O.count;P++){const L=P*M;!0===y&&(s.fromBufferAttribute(O,P),C[N+L+0]=s.x,C[N+L+1]=s.y,C[N+L+2]=s.z,C[N+L+3]=0),!0===v&&(s.fromBufferAttribute(R,P),C[N+L+4]=s.x,C[N+L+5]=s.y,C[N+L+6]=s.z,C[N+L+7]=0),!0===w&&(s.fromBufferAttribute(D,P),C[N+L+8]=s.x,C[N+L+9]=s.y,C[N+L+10]=s.z,C[N+L+11]=4===D.itemSize?s.w:1)}}function I(){T.dispose(),o.delete(c),c.removeEventListener("dispose",I)}p={count:f,texture:T,size:new wn(A,x)},o.set(c,p),c.addEventListener("dispose",I)}let m=0;for(let B=0;B<h.length;B++)m+=h[B];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(t,"morphTargetBaseInfluence",g),u.getUniforms().setValue(t,"morphTargetInfluences",h),u.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}else{const U=void 0===h?0:h.length;let F=r[c.id];if(void 0===F||F.length!==U){F=[];for(let W=0;W<U;W++)F[W]=[W,0];r[c.id]=F}for(let G=0;G<U;G++){const $=F[G];$[0]=G,$[1]=h[G]}F.sort(Rl);for(let q=0;q<8;q++)q<U&&F[q][1]?(a[q][0]=F[q][0],a[q][1]=F[q][1]):(a[q][0]=Number.MAX_SAFE_INTEGER,a[q][1]=0);a.sort(Ol);const z=c.morphAttributes.position,V=c.morphAttributes.normal;let H=0;for(let Y=0;Y<8;Y++){const X=a[Y],Z=X[0],K=X[1];Z!==Number.MAX_SAFE_INTEGER&&K?(z&&c.getAttribute("morphTarget"+Y)!==z[Z]&&c.setAttribute("morphTarget"+Y,z[Z]),V&&c.getAttribute("morphNormal"+Y)!==V[Z]&&c.setAttribute("morphNormal"+Y,V[Z]),i[Y]=K,H+=K):(z&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),V&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const j=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(t,"morphTargetBaseInfluence",j),u.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Nl(t,e,n,r){let i=new WeakMap;function o(o){const s=r.render.frame,l=o.geometry,c=e.get(o,l);return i.get(c)!==s&&(e.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),n.update(o.instanceMatrix,t.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,t.ARRAY_BUFFER)),c}function s(){i=new WeakMap}function a(t){const e=t.target;e.removeEventListener("dispose",a),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:o,dispose:s}}const Pl=new Vn,Ll=new Wn,Bl=new Gn,Ul=new uo,Fl=[],zl=[],Vl=new Float32Array(16),Hl=new Float32Array(9),jl=new Float32Array(4);function Wl(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=Fl[i];if(void 0===o&&(o=new Float32Array(i),Fl[i]=o),0!==e){r.toArray(o,0);for(let r=1,i=0;r!==e;++r)i+=n,t[r].toArray(o,i)}return o}function Gl(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function $l(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function ql(t,e){let n=zl[e];void 0===n&&(n=new Int32Array(e),zl[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Yl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Xl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gl(n,e))return;t.uniform2fv(this.addr,e),$l(n,e)}}function Zl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Gl(n,e))return;t.uniform3fv(this.addr,e),$l(n,e)}}function Kl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gl(n,e))return;t.uniform4fv(this.addr,e),$l(n,e)}}function Jl(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Gl(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),$l(n,e)}else{if(Gl(n,r))return;jl.set(r),t.uniformMatrix2fv(this.addr,!1,jl),$l(n,r)}}function Ql(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Gl(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),$l(n,e)}else{if(Gl(n,r))return;Hl.set(r),t.uniformMatrix3fv(this.addr,!1,Hl),$l(n,r)}}function tc(t,e){const n=this.cache,r=e.elements;if(void 0===r){if(Gl(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),$l(n,e)}else{if(Gl(n,r))return;Vl.set(r),t.uniformMatrix4fv(this.addr,!1,Vl),$l(n,r)}}function ec(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function nc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gl(n,e))return;t.uniform2iv(this.addr,e),$l(n,e)}}function rc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gl(n,e))return;t.uniform3iv(this.addr,e),$l(n,e)}}function ic(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gl(n,e))return;t.uniform4iv(this.addr,e),$l(n,e)}}function oc(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function sc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gl(n,e))return;t.uniform2uiv(this.addr,e),$l(n,e)}}function ac(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gl(n,e))return;t.uniform3uiv(this.addr,e),$l(n,e)}}function lc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gl(n,e))return;t.uniform4uiv(this.addr,e),$l(n,e)}}function cc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||Pl,i)}function uc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Bl,i)}function hc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Ul,i)}function dc(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Ll,i)}function fc(t){switch(t){case 5126:return Yl;case 35664:return Xl;case 35665:return Zl;case 35666:return Kl;case 35674:return Jl;case 35675:return Ql;case 35676:return tc;case 5124:case 35670:return ec;case 35667:case 35671:return nc;case 35668:case 35672:return rc;case 35669:case 35673:return ic;case 5125:return oc;case 36294:return sc;case 36295:return ac;case 36296:return lc;case 35678:case 36198:case 36298:case 36306:case 35682:return cc;case 35679:case 36299:case 36307:return uc;case 35680:case 36300:case 36308:case 36293:return hc;case 36289:case 36303:case 36311:case 36292:return dc}}function pc(t,e){t.uniform1fv(this.addr,e)}function mc(t,e){const n=Wl(e,this.size,2);t.uniform2fv(this.addr,n)}function gc(t,e){const n=Wl(e,this.size,3);t.uniform3fv(this.addr,n)}function yc(t,e){const n=Wl(e,this.size,4);t.uniform4fv(this.addr,n)}function vc(t,e){const n=Wl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function wc(t,e){const n=Wl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function bc(t,e){const n=Wl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function _c(t,e){t.uniform1iv(this.addr,e)}function Sc(t,e){t.uniform2iv(this.addr,e)}function Ec(t,e){t.uniform3iv(this.addr,e)}function Ac(t,e){t.uniform4iv(this.addr,e)}function xc(t,e){t.uniform1uiv(this.addr,e)}function Cc(t,e){t.uniform2uiv(this.addr,e)}function Tc(t,e){t.uniform3uiv(this.addr,e)}function Mc(t,e){t.uniform4uiv(this.addr,e)}function Ic(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Pl,o[s])}function kc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Bl,o[s])}function Oc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Ul,o[s])}function Rc(t,e,n){const r=this.cache,i=e.length,o=ql(n,i);Gl(r,o)||(t.uniform1iv(this.addr,o),$l(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Ll,o[s])}function Dc(t){switch(t){case 5126:return pc;case 35664:return mc;case 35665:return gc;case 35666:return yc;case 35674:return vc;case 35675:return wc;case 35676:return bc;case 5124:case 35670:return _c;case 35667:case 35671:return Sc;case 35668:case 35672:return Ec;case 35669:case 35673:return Ac;case 5125:return xc;case 36294:return Cc;case 36295:return Tc;case 36296:return Mc;case 35678:case 36198:case 36298:case 36306:case 35682:return Ic;case 35679:case 36299:case 36307:return kc;case 35680:case 36300:case 36308:case 36293:return Oc;case 36289:case 36303:case 36311:case 36292:return Rc}}class Nc{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=fc(e.type)}}class Pc{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=Dc(e.type)}}class Lc{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(t,e[o.id],n)}}}const Bc=/(\w+)(\])?(\[|\.)?/g;function Uc(t,e){t.seq.push(e),t.map[e.id]=e}function Fc(t,e,n){const r=t.name,i=r.length;Bc.lastIndex=0;while(1){const o=Bc.exec(r),s=Bc.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===i){Uc(n,void 0===c?new Nc(a,t,e):new Pc(a,t,e));break}{const t=n.map;let e=t[a];void 0===e&&(e=new Lc(a),Uc(n,e)),n=e}}}class zc{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=t.getActiveUniform(e,r),i=t.getUniformLocation(e,n.name);Fc(n,i,this)}}setValue(t,e,n,r){const i=this.map[e];void 0!==i&&i.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let i=0,o=e.length;i!==o;++i){const o=e[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const i=t[r];i.id in e&&n.push(i)}return n}}function Vc(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let Hc=0;function jc(t,e){const n=t.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let s=i;s<o;s++){const t=s+1;r.push(`${t===e?">":" "} ${t}: ${n[s]}`)}return r.join("\n")}function Wc(t){switch(t){case Te:return["Linear","( value )"];case Ce:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Gc(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+jc(t.getShaderSource(e),r)}return i}function $c(t,e){const n=Wc(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qc(t,e){let n;switch(e){case X:n="Linear";break;case Z:n="Reinhard";break;case K:n="OptimizedCineon";break;case J:n="ACESFilmic";break;case Q:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Yc(t){const e=[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(Kc).join("\n")}function Xc(t){const e=[];for(const n in t){const r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}function Zc(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i),o=r.name;let s=1;r.type===t.FLOAT_MAT2&&(s=2),r.type===t.FLOAT_MAT3&&(s=3),r.type===t.FLOAT_MAT4&&(s=4),n[o]={type:r.type,location:t.getAttribLocation(e,o),locationSize:s}}return n}function Kc(t){return""!==t}function Jc(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Qc(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tu=/^[ \t]*#include +<([\w\d./]+)>/gm;function eu(t){return t.replace(tu,nu)}function nu(t,e){const n=Ja[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return eu(n)}const ru=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iu(t){return t.replace(ru,ou)}function ou(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function su(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function au(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===c?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===u?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===h&&(e="SHADOWMAP_TYPE_VSM"),e}function lu(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case et:case nt:e="ENVMAP_TYPE_CUBE";break;case ot:e="ENVMAP_TYPE_CUBE_UV";break}return e}function cu(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case nt:e="ENVMAP_MODE_REFRACTION";break}return e}function uu(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case G:e="ENVMAP_BLENDING_MULTIPLY";break;case $:e="ENVMAP_BLENDING_MIX";break;case q:e="ENVMAP_BLENDING_ADD";break}return e}function hu(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,r=1/e,i=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:i,texelHeight:r,maxMip:n}}function du(t,e,n,r){const i=t.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=au(n),c=lu(n),u=cu(n),h=uu(n),d=hu(n),f=n.isWebGL2?"":Yc(n),p=Xc(o),m=i.createProgram();let g,y,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Kc).join("\n"),g.length>0&&(g+="\n"),y=[f,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(Kc).join("\n"),y.length>0&&(y+="\n")):(g=[su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Kc).join("\n"),y=[f,su(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Y?"#define TONE_MAPPING":"",n.toneMapping!==Y?Ja["tonemapping_pars_fragment"]:"",n.toneMapping!==Y?qc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ja["encodings_pars_fragment"],$c("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Kc).join("\n")),s=eu(s),s=Jc(s,n),s=Qc(s,n),a=eu(a),a=Jc(a,n),a=Qc(a,n),s=iu(s),a=iu(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#define varying in",n.glslVersion===ze?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ze?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const w=v+g+s,b=v+y+a,_=Vc(i,i.VERTEX_SHADER,w),S=Vc(i,i.FRAGMENT_SHADER,b);if(i.attachShader(m,_),i.attachShader(m,S),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),t.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),n=i.getShaderInfoLog(_).trim(),r=i.getShaderInfoLog(S).trim();let o=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(o=!1,"function"===typeof t.debug.onShaderError)t.debug.onShaderError(i,m,_,S);else{const t=Gc(i,_,"vertex"),n=Gc(i,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==n&&""!==r||(s=!1);s&&(this.diagnostics={runnable:o,programLog:e,vertexShader:{log:n,prefix:g},fragmentShader:{log:r,prefix:y}})}let E,A;return i.deleteShader(_),i.deleteShader(S),this.getUniforms=function(){return void 0===E&&(E=new zc(i,m)),E},this.getAttributes=function(){return void 0===A&&(A=Zc(i,m)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Hc++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=S,this}let fu=0;class pu{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new mu(t),e.set(t,n)),n}}class mu{constructor(t){this.id=fu++,this.code=t,this.usedTimes=0}}function gu(t,e,n,r,i,o,s){const a=new Nr,l=new pu,c=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let m=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(t){return 0===t?"uv":`uv${t}`}function w(o,a,c,w,b){const _=w.fog,S=b.geometry,E=o.isMeshStandardMaterial?w.environment:null,A=(o.isMeshStandardMaterial?n:e).get(o.envMap||E),x=A&&A.mapping===ot?A.image.height:null,C=y[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const T=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,M=void 0!==T?T.length:0;let I,k,O,R,D=0;if(void 0!==S.morphAttributes.position&&(D=1),void 0!==S.morphAttributes.normal&&(D=2),void 0!==S.morphAttributes.color&&(D=3),C){const t=tl[C];I=t.vertexShader,k=t.fragmentShader}else I=o.vertexShader,k=o.fragmentShader,l.update(o),O=l.getVertexShaderID(o),R=l.getFragmentShaderID(o);const N=t.getRenderTarget(),P=!0===b.isInstancedMesh,L=!!o.map,B=!!o.matcap,U=!!A,F=!!o.aoMap,z=!!o.lightMap,V=!!o.bumpMap,H=!!o.normalMap,j=!!o.displacementMap,W=!!o.emissiveMap,G=!!o.metalnessMap,$=!!o.roughnessMap,q=o.anisotropy>0,X=o.clearcoat>0,Z=o.iridescence>0,K=o.sheen>0,J=o.transmission>0,Q=q&&!!o.anisotropyMap,tt=X&&!!o.clearcoatMap,et=X&&!!o.clearcoatNormalMap,nt=X&&!!o.clearcoatRoughnessMap,rt=Z&&!!o.iridescenceMap,it=Z&&!!o.iridescenceThicknessMap,st=K&&!!o.sheenColorMap,at=K&&!!o.sheenRoughnessMap,lt=!!o.specularMap,ct=!!o.specularColorMap,ut=!!o.specularIntensityMap,ht=J&&!!o.transmissionMap,dt=J&&!!o.thicknessMap,ft=!!o.gradientMap,pt=!!o.alphaMap,mt=o.alphaTest>0,gt=!!o.extensions,yt=!!S.attributes.uv1,vt=!!S.attributes.uv2,wt=!!S.attributes.uv3,bt={isWebGL2:u,shaderID:C,shaderType:o.type,shaderName:o.name,vertexShader:I,fragmentShader:k,defines:o.defines,customVertexShaderID:O,customFragmentShaderID:R,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:P,instancingColor:P&&null!==b.instanceColor,supportsVertexTextures:d,outputColorSpace:null===N?t.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:Te,map:L,matcap:B,envMap:U,envMapMode:U&&A.mapping,envMapCubeUVHeight:x,aoMap:F,lightMap:z,bumpMap:V,normalMap:H,displacementMap:d&&j,emissiveMap:W,normalMapObjectSpace:H&&o.normalMapType===Ae,normalMapTangentSpace:H&&o.normalMapType===Ee,metalnessMap:G,roughnessMap:$,anisotropy:q,anisotropyMap:Q,clearcoat:X,clearcoatMap:tt,clearcoatNormalMap:et,clearcoatRoughnessMap:nt,iridescence:Z,iridescenceMap:rt,iridescenceThicknessMap:it,sheen:K,sheenColorMap:st,sheenRoughnessMap:at,specularMap:lt,specularColorMap:ct,specularIntensityMap:ut,transmission:J,transmissionMap:ht,thicknessMap:dt,gradientMap:ft,opaque:!1===o.transparent&&o.blending===g,alphaMap:pt,alphaTest:mt,combine:o.combine,mapUv:L&&v(o.map.channel),aoMapUv:F&&v(o.aoMap.channel),lightMapUv:z&&v(o.lightMap.channel),bumpMapUv:V&&v(o.bumpMap.channel),normalMapUv:H&&v(o.normalMap.channel),displacementMapUv:j&&v(o.displacementMap.channel),emissiveMapUv:W&&v(o.emissiveMap.channel),metalnessMapUv:G&&v(o.metalnessMap.channel),roughnessMapUv:$&&v(o.roughnessMap.channel),anisotropyMapUv:Q&&v(o.anisotropyMap.channel),clearcoatMapUv:tt&&v(o.clearcoatMap.channel),clearcoatNormalMapUv:et&&v(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nt&&v(o.clearcoatRoughnessMap.channel),iridescenceMapUv:rt&&v(o.iridescenceMap.channel),iridescenceThicknessMapUv:it&&v(o.iridescenceThicknessMap.channel),sheenColorMapUv:st&&v(o.sheenColorMap.channel),sheenRoughnessMapUv:at&&v(o.sheenRoughnessMap.channel),specularMapUv:lt&&v(o.specularMap.channel),specularColorMapUv:ct&&v(o.specularColorMap.channel),specularIntensityMapUv:ut&&v(o.specularIntensityMap.channel),transmissionMapUv:ht&&v(o.transmissionMap.channel),thicknessMapUv:dt&&v(o.thicknessMap.channel),alphaMapUv:pt&&v(o.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(H||q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,vertexUv1s:yt,vertexUv2s:vt,vertexUv3s:wt,pointsUvs:!0===b.isPoints&&!!S.attributes.uv&&(L||pt),fog:!!_,useFog:!0===o.fog,fogExp2:_&&_.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:M,morphTextureStride:D,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:Y,useLegacyLights:t.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===p,flipSided:o.side===f,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:gt&&!0===o.extensions.derivatives,extensionFragDepth:gt&&!0===o.extensions.fragDepth,extensionDrawBuffers:gt&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:gt&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()};return bt}function b(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(_(n,e),S(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()}function _(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function S(t,e){a.disableAll(),e.isWebGL2&&a.enable(0),e.supportsVertexTextures&&a.enable(1),e.instancing&&a.enable(2),e.instancingColor&&a.enable(3),e.matcap&&a.enable(4),e.envMap&&a.enable(5),e.normalMapObjectSpace&&a.enable(6),e.normalMapTangentSpace&&a.enable(7),e.clearcoat&&a.enable(8),e.iridescence&&a.enable(9),e.alphaTest&&a.enable(10),e.vertexColors&&a.enable(11),e.vertexAlphas&&a.enable(12),e.vertexUv1s&&a.enable(13),e.vertexUv2s&&a.enable(14),e.vertexUv3s&&a.enable(15),e.vertexTangents&&a.enable(16),e.anisotropy&&a.enable(17),t.push(a.mask),a.disableAll(),e.fog&&a.enable(0),e.useFog&&a.enable(1),e.flatShading&&a.enable(2),e.logarithmicDepthBuffer&&a.enable(3),e.skinning&&a.enable(4),e.morphTargets&&a.enable(5),e.morphNormals&&a.enable(6),e.morphColors&&a.enable(7),e.premultipliedAlpha&&a.enable(8),e.shadowMapEnabled&&a.enable(9),e.useLegacyLights&&a.enable(10),e.doubleSided&&a.enable(11),e.flipSided&&a.enable(12),e.useDepthPacking&&a.enable(13),e.dithering&&a.enable(14),e.transmission&&a.enable(15),e.sheen&&a.enable(16),e.opaque&&a.enable(17),e.pointsUvs&&a.enable(18),t.push(a.mask)}function E(t){const e=y[t.type];let n;if(e){const t=tl[e];n=eo.clone(t.uniforms)}else n=t.uniforms;return n}function A(e,n){let r;for(let t=0,i=c.length;t<i;t++){const e=c[t];if(e.cacheKey===n){r=e,++r.usedTimes;break}}return void 0===r&&(r=new du(t,n,e,o),c.push(r)),r}function x(t){if(0===--t.usedTimes){const e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}}function C(t){l.remove(t)}function T(){l.dispose()}return{getParameters:w,getProgramCacheKey:b,getUniforms:E,acquireProgram:A,releaseProgram:x,releaseShaderCache:C,programs:c,dispose:T}}function yu(){let t=new WeakMap;function e(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function r(e,n,r){t.get(e)[n]=r}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function vu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function wu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function bu(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function s(n,r,i,o,s,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),e++,l}function a(t,e,o,a,l,c){const u=s(t,e,o,a,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)}function l(t,e,o,a,l,c){const u=s(t,e,o,a,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)}function c(t,e){n.length>1&&n.sort(t||vu),r.length>1&&r.sort(e||wu),i.length>1&&i.sort(e||wu)}function u(){for(let n=e,r=t.length;n<r;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:u,sort:c}}function _u(){let t=new WeakMap;function e(e,n){const r=t.get(e);let i;return void 0===r?(i=new bu,t.set(e,[i])):n>=r.length?(i=new bu,r.push(i)):i=r[n],i}function n(){t=new WeakMap}return{get:e,dispose:n}}function Su(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new qn,color:new fi};break;case"SpotLight":n={position:new qn,direction:new qn,color:new fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new qn,color:new fi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new qn,skyColor:new fi,groundColor:new fi};break;case"RectAreaLight":n={color:new fi,position:new qn,halfWidth:new qn,halfHeight:new qn};break}return t[e.id]=n,n}}}function Eu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Au=0;function xu(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Cu(t,e){const n=new Su,r=Eu(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)i.probe.push(new qn);const o=new qn,s=new Er,a=new Er;function l(o,s){let a=0,l=0,c=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,w=0;o.sort(xu);const b=!0===s?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],s=e.color,_=e.intensity,S=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=s.r*_*b,l+=s.g*_*b,c+=s.b*_*b;else if(e.isLightProbe)for(let t=0;t<9;t++)i.probe[t].addScaledVector(e.sh.coefficients[t],_);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=E,i.directionalShadowMatrix[u]=e.shadow.matrix,m++}i.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(_*b),t.distance=S,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,i.spot[d]=t;const o=e.shadow;if(e.map&&(i.spotLightMap[v]=e.map,v++,o.updateMatrices(e),e.castShadow&&w++),i.spotLightMatrix[d]=o.matrix,e.castShadow){const t=r.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,i.spotShadow[d]=t,i.spotShadowMap[d]=E,y++}d++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(s).multiplyScalar(_),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),i.rectArea[f]=t,f++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*b),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=r.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=E,i.pointShadowMatrix[h]=e.shadow.matrix,g++}i.point[h]=t,h++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(_*b),t.groundColor.copy(e.groundColor).multiplyScalar(_*b),i.hemi[p]=t,p++}}f>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=Qa.LTC_FLOAT_1,i.rectAreaLTC2=Qa.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Qa.LTC_HALF_1,i.rectAreaLTC2=Qa.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const _=i.hash;_.directionalLength===u&&_.pointLength===h&&_.spotLength===d&&_.rectAreaLength===f&&_.hemiLength===p&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===y&&_.numSpotMaps===v||(i.directional.length=u,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=y+v-w,i.spotLightMap.length=v,i.numSpotLightShadowsWithMaps=w,_.directionalLength=u,_.pointLength=h,_.spotLength=d,_.rectAreaLength=f,_.hemiLength=p,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=y,_.numSpotMaps=v,i.version=Au++)}function c(t,e){let n=0,r=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),a.identity(),s.copy(e.matrixWorld),s.premultiply(h),a.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),c++}else if(e.isPointLight){const t=i.point[r];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),r++}else if(e.isHemisphereLight){const t=i.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}}return{setup:l,setupView:c,state:i}}function Tu(t,e){const n=new Cu(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(t){r.push(t)}function a(t){i.push(t)}function l(t){n.setup(r,t)}function c(t){n.setupView(r,t)}const u={lightsArray:r,shadowsArray:i,lights:n};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function Mu(t,e){let n=new WeakMap;function r(r,i=0){const o=n.get(r);let s;return void 0===o?(s=new Tu(t,e),n.set(r,[s])):i>=o.length?(s=new Tu(t,e),o.push(s)):s=o[i],s}function i(){n=new WeakMap}return{get:r,dispose:i}}class Iu extends li{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ku extends li{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Ou="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Ru="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Du(t,e,n){let r=new wo;const i=new wn,o=new wn,s=new Hn,a=new Iu({depthPacking:Se}),l=new ku,u={},g=n.maxTextureSize,y={[d]:f,[f]:d,[p]:p},v=new io({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new wn},radius:{value:4}},vertexShader:Ou,fragmentShader:Ru}),w=v.clone();w.defines.HORIZONTAL_PASS=1;const b=new Ii;b.setAttribute("position",new vi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new qi(b,v),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c;let E=this.type;function A(n,r){const o=e.update(_);v.defines.VSM_SAMPLES!==n.blurSamples&&(v.defines.VSM_SAMPLES=n.blurSamples,w.defines.VSM_SAMPLES=n.blurSamples,v.needsUpdate=!0,w.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new jn(i.x,i.y)),v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,o,v,_,null),w.uniforms.shadow_pass.value=n.mapPass.texture,w.uniforms.resolution.value=n.mapSize,w.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,o,w,_,null)}function x(e,n,r,i){let o=null;const s=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?l:a,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const t=o.uuid,e=n.uuid;let r=u[t];void 0===r&&(r={},u[t]=r);let i=r[e];void 0===i&&(i=o.clone(),r[e]=i),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===h?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:y[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){const e=t.properties.get(o);e.light=r}return o}function C(n,i,o,s,a){if(!1===n.visible)return;const l=n.layers.test(i.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===h)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=e.update(n),i=n.material;if(Array.isArray(i)){const e=r.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=i[c.materialIndex];if(u&&u.visible){const e=x(n,u,s,a);t.renderBufferDirect(o,null,r,e,n,c)}}}else if(i.visible){const e=x(n,i,s,a);t.renderBufferDirect(o,null,r,e,n,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)C(c[t],i,o,s,a)}this.render=function(e,n,a){if(!1===S.enabled)return;if(!1===S.autoUpdate&&!1===S.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),d=t.state;d.setBlending(m),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=E!==h&&this.type===h,p=E===h&&this.type!==h;for(let m=0,y=e.length;m<y;m++){const l=e[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const u=c.getFrameExtents();if(i.multiply(u),o.copy(c.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(o.x=Math.floor(g/u.x),i.x=o.x*u.x,c.mapSize.x=o.x),i.y>g&&(o.y=Math.floor(g/u.y),i.y=o.y*u.y,c.mapSize.y=o.y)),null===c.map||!0===f||!0===p){const t=this.type!==h?{minFilter:ct,magFilter:ct}:{};null!==c.map&&c.map.dispose(),c.map=new jn(i.x,i.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const y=c.getViewportCount();for(let t=0;t<y;t++){const e=c.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(s),c.updateMatrices(l,t),r=c.getFrustum(),C(n,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===h&&A(c,a),c.needsUpdate=!1}E=this.type,S.needsUpdate=!1,t.setRenderTarget(l,c,u)}}function Nu(t,e,n){const r=n.isWebGL2;function i(){let e=!1;const n=new Hn;let r=null;const i=new Hn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s,a){!0===a&&(e*=s,r*=s,o*=s),n.set(e,r,o,s),!1===i.equals(n)&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}}function o(){let e=!1,n=null,r=null,i=null;return{setTest:function(e){e?At(t.DEPTH_TEST):xt(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){switch(e){case B:t.depthFunc(t.NEVER);break;case U:t.depthFunc(t.ALWAYS);break;case F:t.depthFunc(t.LESS);break;case z:t.depthFunc(t.LEQUAL);break;case V:t.depthFunc(t.EQUAL);break;case H:t.depthFunc(t.GEQUAL);break;case j:t.depthFunc(t.GREATER);break;case W:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function c(){let e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(n){e||(n?At(t.STENCIL_TEST):xt(t.STENCIL_TEST))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&l===r||(t.stencilOp(e,n,r),s=e,a=n,l=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null}}}const u=new i,h=new o,d=new c,G=new WeakMap,$=new WeakMap;let q={},Y={},X=new WeakMap,Z=[],K=null,J=!1,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=!1,at=null,lt=null,ct=null,ut=null,ht=null;const dt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ft=!1,pt=0;const mt=t.getParameter(t.VERSION);-1!==mt.indexOf("WebGL")?(pt=parseFloat(/^WebGL (\d)/.exec(mt)[1]),ft=pt>=1):-1!==mt.indexOf("OpenGL ES")&&(pt=parseFloat(/^OpenGL ES (\d)/.exec(mt)[1]),ft=pt>=2);let gt=null,yt={};const vt=t.getParameter(t.SCISSOR_BOX),wt=t.getParameter(t.VIEWPORT),bt=(new Hn).fromArray(vt),_t=(new Hn).fromArray(wt);function St(e,n,i,o){const s=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let l=0;l<i;l++)!r||e!==t.TEXTURE_3D&&e!==t.TEXTURE_2D_ARRAY?t.texImage2D(n+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage3D(n,0,t.RGBA,1,1,o,0,t.RGBA,t.UNSIGNED_BYTE,s);return a}const Et={};function At(e){!0!==q[e]&&(t.enable(e),q[e]=!0)}function xt(e){!1!==q[e]&&(t.disable(e),q[e]=!1)}function Ct(e,n){return Y[e]!==n&&(t.bindFramebuffer(e,n),Y[e]=n,r&&(e===t.DRAW_FRAMEBUFFER&&(Y[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(Y[t.DRAW_FRAMEBUFFER]=n)),!0)}function Tt(r,i){let o=Z,s=!1;if(r)if(o=X.get(i),void 0===o&&(o=[],X.set(i,o)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(o.length!==e.length||o[0]!==t.COLOR_ATTACHMENT0){for(let n=0,r=e.length;n<r;n++)o[n]=t.COLOR_ATTACHMENT0+n;o.length=e.length,s=!0}}else o[0]!==t.COLOR_ATTACHMENT0&&(o[0]=t.COLOR_ATTACHMENT0,s=!0);else o[0]!==t.BACK&&(o[0]=t.BACK,s=!0);s&&(n.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function Mt(e){return K!==e&&(t.useProgram(e),K=e,!0)}Et[t.TEXTURE_2D]=St(t.TEXTURE_2D,t.TEXTURE_2D,1),Et[t.TEXTURE_CUBE_MAP]=St(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Et[t.TEXTURE_2D_ARRAY]=St(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Et[t.TEXTURE_3D]=St(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),At(t.DEPTH_TEST),h.setFunc(z),Dt(!1),Nt(a),At(t.CULL_FACE),Ot(m);const It={[_]:t.FUNC_ADD,[S]:t.FUNC_SUBTRACT,[E]:t.FUNC_REVERSE_SUBTRACT};if(r)It[A]=t.MIN,It[x]=t.MAX;else{const t=e.get("EXT_blend_minmax");null!==t&&(It[A]=t.MIN_EXT,It[x]=t.MAX_EXT)}const kt={[C]:t.ZERO,[T]:t.ONE,[M]:t.SRC_COLOR,[k]:t.SRC_ALPHA,[L]:t.SRC_ALPHA_SATURATE,[N]:t.DST_COLOR,[R]:t.DST_ALPHA,[I]:t.ONE_MINUS_SRC_COLOR,[O]:t.ONE_MINUS_SRC_ALPHA,[P]:t.ONE_MINUS_DST_COLOR,[D]:t.ONE_MINUS_DST_ALPHA};function Ot(e,n,r,i,o,s,a,l){if(e!==m){if(!1===J&&(At(t.BLEND),J=!0),e===b)o=o||n,s=s||r,a=a||i,n===tt&&o===rt||(t.blendEquationSeparate(It[n],It[o]),tt=n,rt=o),r===et&&i===nt&&s===it&&a===ot||(t.blendFuncSeparate(kt[r],kt[i],kt[s],kt[a]),et=r,nt=i,it=s,ot=a),Q=e,st=!1;else if(e!==Q||l!==st){if(tt===_&&rt===_||(t.blendEquation(t.FUNC_ADD),tt=_,rt=_),l)switch(e){case g:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case y:t.blendFunc(t.ONE,t.ONE);break;case v:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case w:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case g:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case y:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case v:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case w:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}et=null,nt=null,it=null,ot=null,Q=e,st=l}}else!0===J&&(xt(t.BLEND),J=!1)}function Rt(e,n){e.side===p?xt(t.CULL_FACE):At(t.CULL_FACE);let r=e.side===f;n&&(r=!r),Dt(r),e.blending===g&&!1===e.transparent?Ot(m):Ot(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),h.setFunc(e.depthFunc),h.setTest(e.depthTest),h.setMask(e.depthWrite),u.setMask(e.colorWrite);const i=e.stencilWrite;d.setTest(i),i&&(d.setMask(e.stencilWriteMask),d.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),d.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Lt(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?At(t.SAMPLE_ALPHA_TO_COVERAGE):xt(t.SAMPLE_ALPHA_TO_COVERAGE)}function Dt(e){at!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),at=e)}function Nt(e){e!==s?(At(t.CULL_FACE),e!==lt&&(e===a?t.cullFace(t.BACK):e===l?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):xt(t.CULL_FACE),lt=e}function Pt(e){e!==ct&&(ft&&t.lineWidth(e),ct=e)}function Lt(e,n,r){e?(At(t.POLYGON_OFFSET_FILL),ut===n&&ht===r||(t.polygonOffset(n,r),ut=n,ht=r)):xt(t.POLYGON_OFFSET_FILL)}function Bt(e){e?At(t.SCISSOR_TEST):xt(t.SCISSOR_TEST)}function Ut(e){void 0===e&&(e=t.TEXTURE0+dt-1),gt!==e&&(t.activeTexture(e),gt=e)}function Ft(e,n,r){void 0===r&&(r=null===gt?t.TEXTURE0+dt-1:gt);let i=yt[r];void 0===i&&(i={type:void 0,texture:void 0},yt[r]=i),i.type===e&&i.texture===n||(gt!==r&&(t.activeTexture(r),gt=r),t.bindTexture(e,n||Et[e]),i.type=e,i.texture=n)}function zt(){const e=yt[gt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Vt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Ht(){try{t.compressedTexImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function jt(){try{t.texSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Wt(){try{t.texSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Gt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function $t(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function qt(){try{t.texStorage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Yt(){try{t.texStorage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Xt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Zt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Kt(e){!1===bt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),bt.copy(e))}function Jt(e){!1===_t.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),_t.copy(e))}function Qt(e,n){let r=$.get(n);void 0===r&&(r=new WeakMap,$.set(n,r));let i=r.get(e);void 0===i&&(i=t.getUniformBlockIndex(n,e.name),r.set(e,i))}function te(e,n){const r=$.get(n),i=r.get(e);G.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),G.set(n,i))}function ee(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),!0===r&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),q={},gt=null,yt={},Y={},X=new WeakMap,Z=[],K=null,J=!1,Q=null,tt=null,et=null,nt=null,rt=null,it=null,ot=null,st=!1,at=null,lt=null,ct=null,ut=null,ht=null,bt.set(0,0,t.canvas.width,t.canvas.height),_t.set(0,0,t.canvas.width,t.canvas.height),u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:At,disable:xt,bindFramebuffer:Ct,drawBuffers:Tt,useProgram:Mt,setBlending:Ot,setMaterial:Rt,setFlipSided:Dt,setCullFace:Nt,setLineWidth:Pt,setPolygonOffset:Lt,setScissorTest:Bt,activeTexture:Ut,bindTexture:Ft,unbindTexture:zt,compressedTexImage2D:Vt,compressedTexImage3D:Ht,texImage2D:Xt,texImage3D:Zt,updateUBOMapping:Qt,uniformBlockBinding:te,texStorage2D:qt,texStorage3D:Yt,texSubImage2D:jt,texSubImage3D:Wt,compressedTexSubImage2D:Gt,compressedTexSubImage3D:$t,scissor:Kt,viewport:Jt,reset:ee}}function Pu(t,e,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ot){}function v(t,e){return y?new OffscreenCanvas(t,e):En("canvas")}function w(t,e,n,r){let i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const r=e?pn:Math.floor,o=r(i*t.width),s=r(i*t.height);void 0===m&&(m=v(o,s));const a=n?v(o,s):m;a.width=o,a.height=s;const l=a.getContext("2d");return l.drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),a}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return dn(t.width)&&dn(t.height)}function _(t){return!a&&(t.wrapS!==at||t.wrapT!==at||t.minFilter!==ct&&t.minFilter!==dt)}function S(t,e){return t.generateMipmaps&&e&&t.minFilter!==ct&&t.minFilter!==dt}function E(e){t.generateMipmap(e)}function A(n,r,i,o,s=!1){if(!1===a)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===t.RED&&(i===t.FLOAT&&(l=t.R32F),i===t.HALF_FLOAT&&(l=t.R16F),i===t.UNSIGNED_BYTE&&(l=t.R8)),r===t.RG&&(i===t.FLOAT&&(l=t.RG32F),i===t.HALF_FLOAT&&(l=t.RG16F),i===t.UNSIGNED_BYTE&&(l=t.RG8)),r===t.RGBA&&(i===t.FLOAT&&(l=t.RGBA32F),i===t.HALF_FLOAT&&(l=t.RGBA16F),i===t.UNSIGNED_BYTE&&(l=o===Ce&&!1===s?t.SRGB8_ALPHA8:t.RGBA8),i===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),i===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)),l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function x(t,e,n){return!0===S(t,n)||t.isFramebufferTexture&&t.minFilter!==ct&&t.minFilter!==dt?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function C(e){return e===ct||e===ut||e===ht?t.NEAREST:t.LINEAR}function T(t){const e=t.target;e.removeEventListener("dispose",T),I(e),e.isVideoTexture&&p.delete(e)}function M(t){const e=t.target;e.removeEventListener("dispose",M),O(e)}function I(t){const e=r.get(t);if(void 0===e.__webglInit)return;const n=t.source,i=g.get(n);if(i){const r=i[e.__cacheKey];r.usedTimes--,0===r.usedTimes&&k(t),0===Object.keys(i).length&&g.delete(n)}r.remove(t)}function k(e){const n=r.get(e);t.deleteTexture(n.__webglTexture);const i=e.source,o=g.get(i);delete o[n.__cacheKey],s.memory.textures--}function O(e){const n=e.texture,i=r.get(e),o=r.get(n);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[r]);else{if(t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const e=r.get(n[a]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),s.memory.textures--),r.remove(n[a])}r.remove(n),r.remove(e)}let R=0;function D(){R=0}function N(){const t=R;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),R+=1,t}function P(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}function L(e,i){const o=r.get(e);if(e.isVideoTexture&&rt(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void G(o,e,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+i)}function B(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?G(o,e,i):n.bindTexture(t.TEXTURE_2D_ARRAY,o.__webglTexture,t.TEXTURE0+i)}function U(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?G(o,e,i):n.bindTexture(t.TEXTURE_3D,o.__webglTexture,t.TEXTURE0+i)}function F(e,i){const o=r.get(e);e.version>0&&o.__version!==e.version?$(o,e,i):n.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture,t.TEXTURE0+i)}const z={[st]:t.REPEAT,[at]:t.CLAMP_TO_EDGE,[lt]:t.MIRRORED_REPEAT},V={[ct]:t.NEAREST,[ut]:t.NEAREST_MIPMAP_NEAREST,[ht]:t.NEAREST_MIPMAP_LINEAR,[dt]:t.LINEAR,[ft]:t.LINEAR_MIPMAP_NEAREST,[pt]:t.LINEAR_MIPMAP_LINEAR},H={[Oe]:t.NEVER,[Ue]:t.ALWAYS,[Re]:t.LESS,[Ne]:t.LEQUAL,[De]:t.EQUAL,[Be]:t.GEQUAL,[Pe]:t.GREATER,[Le]:t.NOTEQUAL};function j(n,o,s){if(s?(t.texParameteri(n,t.TEXTURE_WRAP_S,z[o.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,z[o.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,z[o.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,V[o.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,V[o.minFilter])):(t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),o.wrapS===at&&o.wrapT===at||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,t.TEXTURE_MAG_FILTER,C(o.magFilter)),t.texParameteri(n,t.TEXTURE_MIN_FILTER,C(o.minFilter)),o.minFilter!==ct&&o.minFilter!==dt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,H[o.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const s=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===ct)return;if(o.minFilter!==ht&&o.minFilter!==pt)return;if(o.type===_t&&!1===e.has("OES_texture_float_linear"))return;if(!1===a&&o.type===St&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function W(e,n){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let o=g.get(i);void 0===o&&(o={},g.set(i,o));const a=P(n);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[e.__cacheKey];void 0!==i&&(o[e.__cacheKey].usedTimes--,0===i.usedTimes&&k(n)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return r}function G(e,i,s){let l=t.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=t.TEXTURE_3D);const c=W(e,i),h=i.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+s);const d=r.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=_(i)&&!1===b(i.image);let r=w(i.image,e,!1,u);r=it(i,r);const f=b(r)||a,p=o.convert(i.format,i.colorSpace);let m,g=o.convert(i.type),y=A(i.internalFormat,p,g,i.colorSpace);j(l,i,f);const v=i.mipmaps,C=a&&!0!==i.isVideoTexture,T=void 0===d.__version||!0===c,M=x(i,r,f);if(i.isDepthTexture)y=t.DEPTH_COMPONENT,a?y=i.type===_t?t.DEPTH_COMPONENT32F:i.type===bt?t.DEPTH_COMPONENT24:i.type===xt?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT16:i.type===_t&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===kt&&y===t.DEPTH_COMPONENT&&i.type!==vt&&i.type!==bt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=bt,g=o.convert(i.type)),i.format===Ot&&y===t.DEPTH_COMPONENT&&(y=t.DEPTH_STENCIL,i.type!==xt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=xt,g=o.convert(i.type))),T&&(C?n.texStorage2D(t.TEXTURE_2D,1,y,r.width,r.height):n.texImage2D(t.TEXTURE_2D,0,y,r.width,r.height,0,p,g,null));else if(i.isDataTexture)if(v.length>0&&f){C&&T&&n.texStorage2D(t.TEXTURE_2D,M,y,v[0].width,v[0].height);for(let e=0,r=v.length;e<r;e++)m=v[e],C?n.texSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(t.TEXTURE_2D,e,y,m.width,m.height,0,p,g,m.data);i.generateMipmaps=!1}else C?(T&&n.texStorage2D(t.TEXTURE_2D,M,y,r.width,r.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,r.width,r.height,p,g,r.data)):n.texImage2D(t.TEXTURE_2D,0,y,r.width,r.height,0,p,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){C&&T&&n.texStorage3D(t.TEXTURE_2D_ARRAY,M,y,v[0].width,v[0].height,r.depth);for(let e=0,o=v.length;e<o;e++)m=v[e],i.format!==Tt?null!==p?C?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,y,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,m.width,m.height,r.depth,p,g,m.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,y,m.width,m.height,r.depth,0,p,g,m.data)}else{C&&T&&n.texStorage2D(t.TEXTURE_2D,M,y,v[0].width,v[0].height);for(let e=0,r=v.length;e<r;e++)m=v[e],i.format!==Tt?null!==p?C?n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(t.TEXTURE_2D,e,y,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(t.TEXTURE_2D,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(t.TEXTURE_2D,e,y,m.width,m.height,0,p,g,m.data)}else if(i.isDataArrayTexture)C?(T&&n.texStorage3D(t.TEXTURE_2D_ARRAY,M,y,r.width,r.height,r.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,y,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isData3DTexture)C?(T&&n.texStorage3D(t.TEXTURE_3D,M,y,r.width,r.height,r.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):n.texImage3D(t.TEXTURE_3D,0,y,r.width,r.height,r.depth,0,p,g,r.data);else if(i.isFramebufferTexture){if(T)if(C)n.texStorage2D(t.TEXTURE_2D,M,y,r.width,r.height);else{let e=r.width,i=r.height;for(let r=0;r<M;r++)n.texImage2D(t.TEXTURE_2D,r,y,e,i,0,p,g,null),e>>=1,i>>=1}}else if(v.length>0&&f){C&&T&&n.texStorage2D(t.TEXTURE_2D,M,y,v[0].width,v[0].height);for(let e=0,r=v.length;e<r;e++)m=v[e],C?n.texSubImage2D(t.TEXTURE_2D,e,0,0,p,g,m):n.texImage2D(t.TEXTURE_2D,e,y,p,g,m);i.generateMipmaps=!1}else C?(T&&n.texStorage2D(t.TEXTURE_2D,M,y,r.width,r.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,p,g,r)):n.texImage2D(t.TEXTURE_2D,0,y,p,g,r);S(i,f)&&E(l),d.__version=h.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function $(e,i,s){if(6!==i.image.length)return;const l=W(e,i),u=i.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+s);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(t.TEXTURE0+s),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,i.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const e=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=e||r?r?i.image[t].image:i.image[t]:w(i.image[t],!1,!0,c),d[t]=it(i,d[t]);const f=d[0],p=b(f)||a,m=o.convert(i.format,i.colorSpace),g=o.convert(i.type),y=A(i.internalFormat,m,g,i.colorSpace),v=a&&!0!==i.isVideoTexture,_=void 0===h.__version||!0===l;let C,T=x(i,f,p);if(j(t.TEXTURE_CUBE_MAP,i,p),e){v&&_&&n.texStorage2D(t.TEXTURE_CUBE_MAP,T,y,f.width,f.height);for(let e=0;e<6;e++){C=d[e].mipmaps;for(let r=0;r<C.length;r++){const o=C[r];i.format!==Tt?null!==m?v?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,m,o.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,y,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,0,0,o.width,o.height,m,g,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r,y,o.width,o.height,0,m,g,o.data)}}}else{C=i.mipmaps,v&&_&&(C.length>0&&T++,n.texStorage2D(t.TEXTURE_CUBE_MAP,T,y,d[0].width,d[0].height));for(let e=0;e<6;e++)if(r){v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,d[e].width,d[e].height,m,g,d[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,y,d[e].width,d[e].height,0,m,g,d[e].data);for(let r=0;r<C.length;r++){const i=C[r],o=i.image[e].image;v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,o.width,o.height,m,g,o.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,y,o.width,o.height,0,m,g,o.data)}}else{v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,m,g,d[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,y,m,g,d[e]);for(let r=0;r<C.length;r++){const i=C[r];v?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,m,g,i.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,y,m,g,i.image[e])}}}S(i,p)&&E(t.TEXTURE_CUBE_MAP),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}e.__version=i.version}function q(e,i,s,a,l){const c=o.convert(s.format,s.colorSpace),u=o.convert(s.type),h=A(s.internalFormat,c,u,s.colorSpace),f=r.get(i);f.__hasExternalTextures||(l===t.TEXTURE_3D||l===t.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(t.FRAMEBUFFER,e),nt(i)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,a,l,r.get(s).__webglTexture,0,et(i)):(l===t.TEXTURE_2D||l>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,a,l,r.get(s).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Y(e,n,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer&&!n.stencilBuffer){let i=t.DEPTH_COMPONENT16;if(r||nt(n)){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===_t?i=t.DEPTH_COMPONENT32F:e.type===bt&&(i=t.DEPTH_COMPONENT24));const r=et(n);nt(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,r,i,n.width,n.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,r,i,n.width,n.height)}else t.renderbufferStorage(t.RENDERBUFFER,i,n.width,n.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)}else if(n.depthBuffer&&n.stencilBuffer){const i=et(n);r&&!1===nt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):nt(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,i,t.DEPTH24_STENCIL8,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<e.length;i++){const s=e[i],a=o.convert(s.format,s.colorSpace),l=o.convert(s.type),c=A(s.internalFormat,a,l,s.colorSpace),u=et(n);r&&!1===nt(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,u,c,n.width,n.height):nt(n)?d.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,u,c,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,c,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function X(e,i){const o=i&&i.isWebGLCubeRenderTarget;if(o)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),L(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,a=et(i);if(i.depthTexture.format===kt)nt(i)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==Ot)throw new Error("Unknown depthTexture format");nt(i)?d.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,s,0)}}function Z(e){const i=r.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");X(i.__webglFramebuffer,e)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=t.createRenderbuffer(),Y(i.__webglDepthbuffer[r],e,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),Y(i.__webglDepthbuffer,e,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function K(e,n,i){const o=r.get(e);void 0!==n&&q(o.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),void 0!==i&&Z(e)}function J(e){const l=e.texture,c=r.get(e),u=r.get(l);e.addEventListener("dispose",M),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,s.memory.textures++);const h=!0===e.isWebGLCubeRenderTarget,d=!0===e.isWebGLMultipleRenderTargets,f=b(e)||a;if(h){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else{if(c.__webglFramebuffer=t.createFramebuffer(),d)if(i.drawBuffers){const n=e.texture;for(let e=0,i=n.length;e<i;e++){const i=r.get(n[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&e.samples>0&&!1===nt(e)){const r=d?l:[l];c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=o.convert(i.format,i.colorSpace),a=o.convert(i.type),l=A(i.internalFormat,s,a,i.colorSpace,!0===e.isXRRenderTarget),u=et(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,c.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),Y(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(h){n.bindTexture(t.TEXTURE_CUBE_MAP,u.__webglTexture),j(t.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)q(c.__webglFramebuffer[n],e,l,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n);S(l,f)&&E(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const i=e.texture;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r.get(s);n.bindTexture(t.TEXTURE_2D,a.__webglTexture),j(t.TEXTURE_2D,s,f),q(c.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+o,t.TEXTURE_2D),S(s,f)&&E(t.TEXTURE_2D)}n.unbindTexture()}else{let r=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(a?r=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),j(r,l,f),q(c.__webglFramebuffer,e,l,t.COLOR_ATTACHMENT0,r),S(l,f)&&E(r),n.unbindTexture()}e.depthBuffer&&Z(e)}function Q(e){const i=b(e)||a,o=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=o.length;s<a;s++){const a=o[s];if(S(a,i)){const i=e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),E(i),n.unbindTexture()}}}function tt(e){if(a&&e.samples>0&&!1===nt(e)){const i=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,s=e.height;let a=t.COLOR_BUFFER_BIT;const l=[],c=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=r.get(e),h=!0===e.isWebGLMultipleRenderTargets;if(h)for(let e=0;e<i.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&(a|=t.STENCIL_BUFFER_BIT)),h&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===d&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[c]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[c])),h){const e=r.get(i[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,o,s,0,0,o,s,a,t.NEAREST),f&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<i.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const o=r.get(i[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,o,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}}function et(t){return Math.min(h,t.samples)}function nt(t){const n=r.get(t);return a&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function rt(t){const e=s.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}function it(t,n){const r=t.colorSpace,i=t.format,o=t.type;return!0===t.isCompressedTexture||t.format===Ve||r!==Te&&r!==xe&&(r===Ce?!1===a?!0===e.has("EXT_sRGB")&&i===Tt?(t.format=Ve,t.minFilter=dt,t.generateMipmaps=!1):n=Ln.sRGBToLinear(n):i===Tt&&o===mt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=N,this.resetTextureUnits=D,this.setTexture2D=L,this.setTexture2DArray=B,this.setTexture3D=U,this.setTextureCube=F,this.rebindTextures=K,this.setupRenderTarget=J,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=q,this.useMultisampledRTT=nt}function Lu(t,e,n){const r=n.isWebGL2;function i(n,i=xe){let o;if(n===mt)return t.UNSIGNED_BYTE;if(n===Et)return t.UNSIGNED_SHORT_4_4_4_4;if(n===At)return t.UNSIGNED_SHORT_5_5_5_1;if(n===gt)return t.BYTE;if(n===yt)return t.SHORT;if(n===vt)return t.UNSIGNED_SHORT;if(n===wt)return t.INT;if(n===bt)return t.UNSIGNED_INT;if(n===_t)return t.FLOAT;if(n===St)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(n===Ct)return t.ALPHA;if(n===Tt)return t.RGBA;if(n===Mt)return t.LUMINANCE;if(n===It)return t.LUMINANCE_ALPHA;if(n===kt)return t.DEPTH_COMPONENT;if(n===Ot)return t.DEPTH_STENCIL;if(n===Ve)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===Rt)return t.RED;if(n===Dt)return t.RED_INTEGER;if(n===Nt)return t.RG;if(n===Pt)return t.RG_INTEGER;if(n===Lt)return t.RGBA_INTEGER;if(n===Bt||n===Ut||n===Ft||n===zt)if(i===Ce){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Bt)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ut)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ft)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===zt)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Bt)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ut)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ft)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===zt)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Vt||n===Ht||n===jt||n===Wt){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===Vt)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ht)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===jt)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Wt)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Gt)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===$t||n===qt){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===$t)return i===Ce?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===qt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Yt||n===Xt||n===Zt||n===Kt||n===Jt||n===Qt||n===te||n===ee||n===ne||n===re||n===ie||n===oe||n===se||n===ae){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Yt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Xt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Zt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Kt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Jt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Qt)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===te)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ee)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ne)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===re)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ie)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===oe)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===se)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ae)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===le){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===le)return i===Ce?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===ce||n===ue||n===he||n===de){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===le)return o.COMPRESSED_RED_RGTC1_EXT;if(n===ue)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===he)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===de)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===xt?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[n]?t[n]:null}return{convert:i}}class Bu extends so{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Uu extends Yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Fu={type:"move"};class zu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Uu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Uu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new qn,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new qn),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Uu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new qn,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new qn),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n),r=this._getHandJoint(l,o);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=t.radius),r.visible=null!==t}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(i=e.getPose(t.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Fu)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Uu;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Vu extends Vn{constructor(t,e,n,r,i,o,s,a,l,c){if(c=void 0!==c?c:kt,c!==kt&&c!==Ot)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===kt&&(n=bt),void 0===n&&c===Ot&&(n=xt),super(null,r,i,o,s,a,c,n,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:ct,this.minFilter=void 0!==a?a:ct,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Hu extends We{constructor(t,e){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=e.getContextAttributes();let m=null,g=null;const y=[],v=[];let w=null;const b=new so;b.layers.enable(1),b.viewport=new Hn;const _=new so;_.layers.enable(2),_.viewport=new Hn;const S=[b,_],E=new Bu;E.layers.enable(1),E.layers.enable(2);let A=null,x=null;function C(t){const e=v.indexOf(t.inputSource);if(-1===e)return;const n=y[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||o),n.dispatchEvent({type:t.type,data:t.inputSource}))}function T(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",M);for(let t=0;t<y.length;t++){const e=v[t];null!==e&&(v[t]=null,y[t].disconnect(e))}A=null,x=null,t.setRenderTarget(m),d=null,h=null,u=null,r=null,g=null,L.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function M(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],r=v.indexOf(n);r>=0&&(v[r]=null,y[r].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let r=v.indexOf(n);if(-1===r){for(let t=0;t<y.length;t++){if(t>=v.length){v.push(n),r=t;break}if(null===v[t]){v[t]=n,r=t;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(t){w=t},this.getController=function(t){let e=y[t];return void 0===e&&(e=new zu,y[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=y[t];return void 0===e&&(e=new zu,y[t]=e),e.getGripSpace()},this.getHand=function(t){let e=y[t];return void 0===e&&(e=new zu,y[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=t.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",T),r.addEventListener("inputsourceschange",M),!0!==p.xrCompatible&&await e.makeXRCompatible(),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,e,n),r.updateRenderState({baseLayer:d}),g=new jn(d.framebufferWidth,d.framebufferHeight,{format:Tt,type:mt,colorSpace:t.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,o=null,s=null;p.depth&&(s=p.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=p.stencil?Ot:kt,o=p.stencil?xt:bt);const a={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,e),h=u.createProjectionLayer(a),r.updateRenderState({layers:[h]}),g=new jn(h.textureWidth,h.textureHeight,{format:Tt,type:mt,depthTexture:new Vu(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:t.outputColorSpace,samples:p.antialias?4:0});const l=t.properties.get(g);l.__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await r.requestReferenceSpace(s),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const I=new qn,k=new qn;function O(t,e,n){I.setFromMatrixPosition(e.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const r=I.distanceTo(k),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=s*u,f=s*h,p=r/(-u+h),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const g=s+p,y=a+p,v=d-m,w=f+(r-m),b=l*a/y*g,_=c*a/y*g;t.projectionMatrix.makePerspective(v,w,b,_,g,y),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}function R(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function D(t,e){const n=w;null===e?n.matrix.copy(t.matrixWorld):(n.matrix.copy(e.matrixWorld),n.matrix.invert(),n.matrix.multiply(t.matrixWorld)),n.matrix.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0);const r=n.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);n.projectionMatrix.copy(t.projectionMatrix),n.projectionMatrixInverse.copy(t.projectionMatrixInverse),n.isPerspectiveCamera&&(n.fov=2*Ye*Math.atan(1/n.projectionMatrix.elements[5]),n.zoom=1)}this.updateCameraXR=function(t){if(null===r)return t;w&&(t=w),E.near=_.near=b.near=t.near,E.far=_.far=b.far=t.far,A===E.near&&x===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,x=E.far);const e=t.parent,n=E.cameras;R(E,e);for(let r=0;r<n.length;r++)R(n[r],e);return 2===n.length?O(E,b,_):E.projectionMatrix.copy(b.projectionMatrix),w&&D(E,e),E},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(t){a=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)};let N=null;function P(e,r){if(c=r.getViewerPose(l||o),f=r,null!==c){const e=c.views;null!==d&&(t.setRenderTargetFramebuffer(g,d.framebuffer),t.setRenderTarget(g));let n=!1;e.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(null!==d)o=d.getViewport(i);else{const e=u.getViewSubImage(h,i);o=e.viewport,0===r&&(t.setRenderTargetTextures(g,e.colorTexture,h.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(g))}let s=S[r];void 0===s&&(s=new so,s.layers.enable(r),s.viewport=new Hn,S[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(E.matrix.copy(s.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(s)}}for(let t=0;t<y.length;t++){const e=v[t],n=y[t];null!==e&&void 0!==n&&n.update(e,r,l||o)}N&&N(e,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null}const L=new bo;L.setAnimationLoop(P),this.setAnimationLoop=function(t){N=t},this.dispose=function(){}}}function ju(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function r(e,n){n.color.getRGB(e.fogColor.value,to(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)}function i(t,e,n,r,i){e.isMeshBasicMaterial||e.isMeshLambertMaterial?o(t,e):e.isMeshToonMaterial?(o(t,e),h(t,e)):e.isMeshPhongMaterial?(o(t,e),u(t,e)):e.isMeshStandardMaterial?(o(t,e),d(t,e),e.isMeshPhysicalMaterial&&p(t,e,i)):e.isMeshMatcapMaterial?(o(t,e),m(t,e)):e.isMeshDepthMaterial?o(t,e):e.isMeshDistanceMaterial?(o(t,e),g(t,e)):e.isMeshNormalMaterial?o(t,e):e.isLineBasicMaterial?(s(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?l(t,e,n,r):e.isSpriteMaterial?c(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function o(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===f&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===f&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=e.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const e=!0===t.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*e,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function l(t,e,r,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*i,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function c(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function u(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function h(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function d(t,r){t.metalness.value=r.metalness,r.metalnessMap&&(t.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,t.metalnessMapTransform)),t.roughness.value=r.roughness,r.roughnessMap&&(t.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,t.roughnessMapTransform));const i=e.get(r).envMap;i&&(t.envMapIntensity.value=r.envMapIntensity)}function p(t,e,r){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===f&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}function m(t,e){e.matcap&&(t.matcap.value=e.matcap)}function g(t,n){const r=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Wu(t,e,n,r){let i={},o={},s=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(t,e){const n=e.program;r.uniformBlockBinding(t,n)}function c(t,n){let s=i[t.id];void 0===s&&(p(t),s=u(t),i[t.id]=s,t.addEventListener("dispose",g));const a=n.program;r.updateUBOMapping(t,a);const l=e.render.frame;o[t.id]!==l&&(d(t),o[t.id]=l)}function u(e){const n=h();e.__bindingPointIndex=n;const r=t.createBuffer(),i=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,r),r}function h(){for(let t=0;t<a;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(e){const n=i[e.id],r=e.uniforms,o=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const e=r[i];if(!0===f(e,i,o)){const n=e.__offset,r=Array.isArray(e.value)?e.value:[e.value];let i=0;for(let o=0;o<r.length;o++){const s=r[o],a=m(s);"number"===typeof s?(e.__data[0]=s,t.bufferSubData(t.UNIFORM_BUFFER,n+i,e.__data)):s.isMatrix3?(e.__data[0]=s.elements[0],e.__data[1]=s.elements[1],e.__data[2]=s.elements[2],e.__data[3]=s.elements[0],e.__data[4]=s.elements[3],e.__data[5]=s.elements[4],e.__data[6]=s.elements[5],e.__data[7]=s.elements[0],e.__data[8]=s.elements[6],e.__data[9]=s.elements[7],e.__data[10]=s.elements[8],e.__data[11]=s.elements[0]):(s.toArray(e.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,n,e.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function f(t,e,n){const r=t.value;if(void 0===n[e]){if("number"===typeof r)n[e]=r;else{const t=Array.isArray(r)?r:[r],i=[];for(let e=0;e<t.length;e++)i.push(t[e].clone());n[e]=i}return!0}if("number"===typeof r){if(n[e]!==r)return n[e]=r,!0}else{const t=Array.isArray(n[e])?n[e]:[n[e]],i=Array.isArray(r)?r:[r];for(let e=0;e<t.length;e++){const n=t[e];if(!1===n.equals(i[e]))return n.copy(i[e]),!0}}return!1}function p(t){const e=t.uniforms;let n=0;const r=16;let i=0;for(let o=0,s=e.length;o<s;o++){const t=e[o],s={boundary:0,storage:0},a=Array.isArray(t.value)?t.value:[t.value];for(let e=0,n=a.length;e<n;e++){const t=a[e],n=m(t);s.boundary+=n.boundary,s.storage+=n.storage}if(t.__data=new Float32Array(s.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,o>0){i=n%r;const e=r-i;0!==i&&e-s.boundary<0&&(n+=r-i,t.__offset=n)}n+=s.storage}return i=n%r,i>0&&(n+=r-i),t.__size=n,t.__cache={},this}function m(t){const e={boundary:0,storage:0};return"number"===typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function g(e){const n=e.target;n.removeEventListener("dispose",g);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),t.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}function y(){for(const e in i)t.deleteBuffer(i[e]);s=[],i={},o={}}return{bind:l,update:c,dispose:y}}function Gu(){const t=En("canvas");return t.style.display="block",t}class $u{constructor(t={}){const{canvas:e=Gu(),context:n=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=t;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:s;const g=new Uint32Array(4),y=new Int32Array(4);let v=null,w=null;const b=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Ce,this.useLegacyLights=!0,this.toneMapping=Y,this.toneMappingExposure=1;const S=this;let E=!1,A=0,x=0,C=null,T=-1,M=null;const I=new Hn,k=new Hn;let O=null;const R=new fi(0);let D=0,N=e.width,P=e.height,L=1,B=null,U=null;const F=new Hn(0,0,N,P),z=new Hn(0,0,N,P);let V=!1;const H=new wo;let j=!1,W=!1,G=null;const $=new Er,q=new wn,X=new qn,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===C?L:1}let J,Q,tt,et,nt,rt,it,ot,st,at,lt,ct,ut,ht,dt,ft,gt,yt,wt,Ct,Mt,It,kt,Ot,Rt=n;function Nt(t,n){for(let r=0;r<t.length;r++){const i=t[r],o=e.getContext(i,n);if(null!==o)return o}return null}try{const t={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${r}`),e.addEventListener("webglcontextlost",Ft,!1),e.addEventListener("webglcontextrestored",zt,!1),e.addEventListener("webglcontextcreationerror",Vt,!1),null===Rt){const e=["webgl2","webgl","experimental-webgl"];if(!0===S.isWebGL1Renderer&&e.shift(),Rt=Nt(e,t),null===Rt)throw Nt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Rt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Rt.getShaderPrecisionFormat&&(Rt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(se){throw console.error("THREE.WebGLRenderer: "+se.message),se}function Bt(){J=new Tl(Rt),Q=new ol(Rt,J,t),J.init(Q),It=new Lu(Rt,J,Q),tt=new Nu(Rt,J,Q),et=new kl(Rt),nt=new yu,rt=new Pu(Rt,J,tt,nt,Q,It,et),it=new al(S),ot=new Cl(S),st=new _o(Rt,Q),kt=new rl(Rt,J,st,Q),at=new Ml(Rt,st,et,kt),lt=new Nl(Rt,at,st,et),wt=new Dl(Rt,Q,rt),ft=new sl(nt),ct=new gu(S,it,ot,J,Q,kt,ft),ut=new ju(S,nt),ht=new _u,dt=new Mu(J,Q),yt=new nl(S,it,ot,tt,lt,m,l),gt=new Du(S,lt,Q),Ot=new Wu(Rt,et,Q,tt),Ct=new il(Rt,J,et,Q),Mt=new Il(Rt,J,et,Q),et.programs=ct.programs,S.capabilities=Q,S.extensions=J,S.properties=nt,S.renderLists=ht,S.shadowMap=gt,S.state=tt,S.info=et}Bt();const Ut=new Hu(S,Rt);function Ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function zt(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const t=et.autoReset,e=gt.enabled,n=gt.autoUpdate,r=gt.needsUpdate,i=gt.type;Bt(),et.autoReset=t,gt.enabled=e,gt.autoUpdate=n,gt.needsUpdate=r,gt.type=i}function Vt(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Ht(t){const e=t.target;e.removeEventListener("dispose",Ht),jt(e)}function jt(t){Wt(t),nt.remove(t)}function Wt(t){const e=nt.get(t).programs;void 0!==e&&(e.forEach((function(t){ct.releaseProgram(t)})),t.isShaderMaterial&&ct.releaseShaderCache(t))}this.xr=Ut,this.getContext=function(){return Rt},this.getContextAttributes=function(){return Rt.getContextAttributes()},this.forceContextLoss=function(){const t=J.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=J.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(t){void 0!==t&&(L=t,this.setSize(N,P,!1))},this.getSize=function(t){return t.set(N,P)},this.setSize=function(t,n,r=!0){Ut.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=t,P=n,e.width=Math.floor(t*L),e.height=Math.floor(n*L),!0===r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(N*L,P*L).floor()},this.setDrawingBufferSize=function(t,n,r){N=t,P=n,L=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(I)},this.getViewport=function(t){return t.copy(F)},this.setViewport=function(t,e,n,r){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,r),tt.viewport(I.copy(F).multiplyScalar(L).floor())},this.getScissor=function(t){return t.copy(z)},this.setScissor=function(t,e,n,r){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,e,n,r),tt.scissor(k.copy(z).multiplyScalar(L).floor())},this.getScissorTest=function(){return V},this.setScissorTest=function(t){tt.setScissorTest(V=t)},this.setOpaqueSort=function(t){B=t},this.setTransparentSort=function(t){U=t},this.getClearColor=function(t){return t.copy(yt.getClearColor())},this.setClearColor=function(){yt.setClearColor.apply(yt,arguments)},this.getClearAlpha=function(){return yt.getClearAlpha()},this.setClearAlpha=function(){yt.setClearAlpha.apply(yt,arguments)},this.clear=function(t=!0,e=!0,n=!0){let r=0;if(t){let t=!1;if(null!==C){const e=C.texture.format;t=e===Lt||e===Pt||e===Dt}if(t){const t=C.texture.type,e=t===mt||t===bt||t===vt||t===xt||t===Et||t===At,n=yt.getClearColor(),r=yt.getClearAlpha(),i=n.r,o=n.g,s=n.b,a=nt.get(C).__webglFramebuffer;e?(g[0]=i,g[1]=o,g[2]=s,g[3]=r,Rt.clearBufferuiv(Rt.COLOR,a,g)):(y[0]=i,y[1]=o,y[2]=s,y[3]=r,Rt.clearBufferiv(Rt.COLOR,a,y))}else r|=Rt.COLOR_BUFFER_BIT}e&&(r|=Rt.DEPTH_BUFFER_BIT),n&&(r|=Rt.STENCIL_BUFFER_BIT),Rt.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ft,!1),e.removeEventListener("webglcontextrestored",zt,!1),e.removeEventListener("webglcontextcreationerror",Vt,!1),ht.dispose(),dt.dispose(),nt.dispose(),it.dispose(),ot.dispose(),lt.dispose(),kt.dispose(),Ot.dispose(),ct.dispose(),Ut.dispose(),Ut.removeEventListener("sessionstart",qt),Ut.removeEventListener("sessionend",Yt),G&&(G.dispose(),G=null),Xt.stop()},this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=Z);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=re(t,e,n,r,i);tt.setMaterial(r,s);let l=n.index,c=1;!0===r.wireframe&&(l=at.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;kt.setup(i,r,a,n,l);let g=Ct;if(null!==l&&(m=st.get(l),g=Mt,g.setIndex(m)),i.isMesh)!0===r.wireframe?(tt.setLineWidth(r.wireframeLinewidth*K()),g.setMode(Rt.LINES)):g.setMode(Rt.TRIANGLES);else if(i.isLine){let t=r.linewidth;void 0===t&&(t=1),tt.setLineWidth(t*K()),i.isLineSegments?g.setMode(Rt.LINES):i.isLineLoop?g.setMode(Rt.LINE_LOOP):g.setMode(Rt.LINE_STRIP)}else i.isPoints?g.setMode(Rt.POINTS):i.isSprite&&g.setMode(Rt.TRIANGLES);if(i.isInstancedMesh)g.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);g.renderInstances(d,p,e)}else g.render(d,p)},this.compile=function(t,e){function n(t,e,n){!0===t.transparent&&t.side===p&&!1===t.forceSinglePass?(t.side=f,t.needsUpdate=!0,ee(t,e,n),t.side=d,t.needsUpdate=!0,ee(t,e,n),t.side=p):ee(t,e,n)}w=dt.get(t),w.init(),_.push(w),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(w.pushLight(t),t.castShadow&&w.pushShadow(t))})),w.setupLights(S.useLegacyLights),t.traverse((function(e){const r=e.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];n(o,t,e)}else n(r,t,e)})),_.pop(),w=null};let Gt=null;function $t(t){Gt&&Gt(t)}function qt(){Xt.stop()}function Yt(){Xt.start()}const Xt=new bo;function Zt(t,e,n,r){if(!1===t.visible)return;const i=t.layers.test(e.layers);if(i)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)w.pushLight(t),t.castShadow&&w.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||H.intersectsSprite(t)){r&&X.setFromMatrixPosition(t.matrixWorld).applyMatrix4($);const e=lt.update(t),i=t.material;i.visible&&v.push(t,e,i,n,X.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||H.intersectsObject(t))){t.isSkinnedMesh&&t.skeleton.frame!==et.render.frame&&(t.skeleton.update(),t.skeleton.frame=et.render.frame);const e=lt.update(t),i=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),X.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),X.copy(e.boundingSphere.center)),X.applyMatrix4(t.matrixWorld).applyMatrix4($)),Array.isArray(i)){const r=e.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&v.push(t,e,a,n,X.z,s)}}else i.visible&&v.push(t,e,i,n,X.z,null)}const o=t.children;for(let s=0,a=o.length;s<a;s++)Zt(o[s],e,n,r)}function Kt(t,e,n,r){const i=t.opaque,o=t.transmissive,s=t.transparent;w.setupLightsView(n),!0===j&&ft.setGlobalState(S.clippingPlanes,n),o.length>0&&Jt(i,o,e,n),r&&tt.viewport(I.copy(r)),i.length>0&&Qt(i,e,n),o.length>0&&Qt(o,e,n),s.length>0&&Qt(s,e,n),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Jt(t,e,n,r){const i=Q.isWebGL2;null===G&&(G=new jn(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?St:mt,minFilter:pt,samples:i&&!0===a?4:0})),S.getDrawingBufferSize(q),i?G.setSize(q.x,q.y):G.setSize(pn(q.x),pn(q.y));const o=S.getRenderTarget();S.setRenderTarget(G),S.getClearColor(R),D=S.getClearAlpha(),D<1&&S.setClearColor(16777215,.5),S.clear();const s=S.toneMapping;S.toneMapping=Y,Qt(t,n,r),rt.updateMultisampleRenderTarget(G),rt.updateRenderTargetMipmap(G);let l=!1;for(let a=0,c=e.length;a<c;a++){const t=e[a],i=t.object,o=t.geometry,s=t.material,c=t.group;if(s.side===p&&i.layers.test(r.layers)){const t=s.side;s.side=f,s.needsUpdate=!0,te(i,n,r,o,s,c),s.side=t,s.needsUpdate=!0,l=!0}}!0===l&&(rt.updateMultisampleRenderTarget(G),rt.updateRenderTargetMipmap(G)),S.setRenderTarget(o),S.setClearColor(R,D),S.toneMapping=s}function Qt(t,e,n){const r=!0===e.isScene?e.overrideMaterial:null;for(let i=0,o=t.length;i<o;i++){const o=t[i],s=o.object,a=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&te(s,e,n,a,l,c)}}function te(t,e,n,r,i,o){t.onBeforeRender(S,e,n,r,i,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),i.onBeforeRender(S,e,n,r,t,o),!0===i.transparent&&i.side===p&&!1===i.forceSinglePass?(i.side=f,i.needsUpdate=!0,S.renderBufferDirect(n,e,r,i,t,o),i.side=d,i.needsUpdate=!0,S.renderBufferDirect(n,e,r,i,t,o),i.side=p):S.renderBufferDirect(n,e,r,i,t,o),t.onAfterRender(S,e,n,r,i,o)}function ee(t,e,n){!0!==e.isScene&&(e=Z);const r=nt.get(t),i=w.state.lights,o=w.state.shadowsArray,s=i.state.version,a=ct.getParameters(t,i.state,o,e,n),l=ct.getProgramCacheKey(a);let c=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?ot:it).get(t.envMap||r.environment),void 0===c&&(t.addEventListener("dispose",Ht),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return ne(t,a),u}else a.uniforms=ct.getUniforms(t),t.onBuild(n,a,S),t.onBeforeCompile(a,S),u=ct.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const h=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ft.uniform),ne(t,a),r.needsLights=oe(t),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),f=zc.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function ne(t,e){const n=nt.get(t);n.outputColorSpace=e.outputColorSpace,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function re(t,e,n,r,i){!0!==e.isScene&&(e=Z),rt.resetTextureUnits();const o=e.fog,s=r.isMeshStandardMaterial?e.environment:null,a=null===C?S.outputColorSpace:!0===C.isXRRenderTarget?C.texture.colorSpace:Te,l=(r.isMeshStandardMaterial?ot:it).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=r.toneMapped?S.toneMapping:Y,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,y=nt.get(r),v=w.state.lights;if(!0===j&&(!0===W||t!==M)){const e=t===M&&r.id===T;ft.setState(r,t,e)}let b=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==v.state.version||y.outputColorSpace!==a||i.isInstancedMesh&&!1===y.instancing?b=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?b=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===r.fog&&y.fog!==o?b=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ft.numPlanes&&y.numIntersection===ft.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==f||y.toneMapping!==p||!0===Q.isWebGL2&&y.morphTargetsCount!==g)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,y.__version=r.version);let _=y.currentProgram;!0===b&&(_=ee(r,e,i));let E=!1,A=!1,x=!1;const I=_.getUniforms(),k=y.uniforms;if(tt.useProgram(_.program)&&(E=!0,A=!0,x=!0),r.id!==T&&(T=r.id,A=!0),E||M!==t){if(I.setValue(Rt,"projectionMatrix",t.projectionMatrix),Q.logarithmicDepthBuffer&&I.setValue(Rt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),M!==t&&(M=t,A=!0,x=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const e=I.map.cameraPosition;void 0!==e&&e.setValue(Rt,X.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(Rt,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&I.setValue(Rt,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){I.setOptional(Rt,i,"bindMatrix"),I.setOptional(Rt,i,"bindMatrixInverse");const t=i.skeleton;t&&(Q.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),I.setValue(Rt,"boneTexture",t.boneTexture,rt),I.setValue(Rt,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;if((void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===Q.isWebGL2)&&wt.update(i,n,_),(A||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,I.setValue(Rt,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(k.envMap.value=l,k.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),A&&(I.setValue(Rt,"toneMappingExposure",S.toneMappingExposure),y.needsLights&&ie(k,x),o&&!0===r.fog&&ut.refreshFogUniforms(k,o),ut.refreshMaterialUniforms(k,r,L,P,G),zc.upload(Rt,y.uniformsList,k,rt)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(zc.upload(Rt,y.uniformsList,k,rt),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&I.setValue(Rt,"center",i.center),I.setValue(Rt,"modelViewMatrix",i.modelViewMatrix),I.setValue(Rt,"normalMatrix",i.normalMatrix),I.setValue(Rt,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const t=r.uniformsGroups;for(let e=0,n=t.length;e<n;e++)if(Q.isWebGL2){const n=t[e];Ot.update(n,_),Ot.bind(n,_)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _}function ie(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function oe(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Xt.setAnimationLoop($t),"undefined"!==typeof self&&Xt.setContext(self),this.setAnimationLoop=function(t){Gt=t,Ut.setAnimationLoop(t),null===t?Xt.stop():Xt.start()},Ut.addEventListener("sessionstart",qt),Ut.addEventListener("sessionend",Yt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===E)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Ut.enabled&&!0===Ut.isPresenting&&(e=Ut.updateCameraXR(e)),!0===t.isScene&&t.onBeforeRender(S,t,e,C),w=dt.get(t,_.length),w.init(),_.push(w),$.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),H.setFromProjectionMatrix($),W=this.localClippingEnabled,j=ft.init(this.clippingPlanes,W),v=ht.get(t,b.length),v.init(),b.push(v),Zt(t,e,0,S.sortObjects),v.finish(),!0===S.sortObjects&&v.sort(B,U),!0===j&&ft.beginShadows();const n=w.state.shadowsArray;if(gt.render(n,t,e),!0===j&&ft.endShadows(),!0===this.info.autoReset&&this.info.reset(),this.info.render.frame++,yt.render(v,t),w.setupLights(S.useLegacyLights),e.isArrayCamera){const n=e.cameras;for(let e=0,r=n.length;e<r;e++){const r=n[e];Kt(v,t,r,r.viewport)}}else Kt(v,t,e);null!==C&&(rt.updateMultisampleRenderTarget(C),rt.updateRenderTargetMipmap(C)),!0===t.isScene&&t.onAfterRender(S,t,e),kt.resetDefaultState(),T=-1,M=null,_.pop(),w=_.length>0?_[_.length-1]:null,b.pop(),v=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(t,e,n){nt.get(t.texture).__webglTexture=e,nt.get(t.depthTexture).__webglTexture=n;const r=nt.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){const n=nt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){C=t,A=e,x=n;let r=!0,i=null,o=!1,s=!1;if(t){const n=nt.get(t);void 0!==n.__useDefaultFramebuffer?(tt.bindFramebuffer(Rt.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?rt.setupRenderTarget(t):n.__hasExternalTextures&&rt.rebindTextures(t,nt.get(t.texture).__webglTexture,nt.get(t.depthTexture).__webglTexture);const a=t.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(s=!0);const l=nt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=l[e],o=!0):i=Q.isWebGL2&&t.samples>0&&!1===rt.useMultisampledRTT(t)?nt.get(t).__webglMultisampledFramebuffer:l,I.copy(t.viewport),k.copy(t.scissor),O=t.scissorTest}else I.copy(F).multiplyScalar(L).floor(),k.copy(z).multiplyScalar(L).floor(),O=V;const a=tt.bindFramebuffer(Rt.FRAMEBUFFER,i);if(a&&Q.drawBuffers&&r&&tt.drawBuffers(t,i),tt.viewport(I),tt.scissor(k),tt.setScissorTest(O),o){const r=nt.get(t.texture);Rt.framebufferTexture2D(Rt.FRAMEBUFFER,Rt.COLOR_ATTACHMENT0,Rt.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,n)}else if(s){const r=nt.get(t.texture),i=e||0;Rt.framebufferTextureLayer(Rt.FRAMEBUFFER,Rt.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}T=-1},this.readRenderTargetPixels=function(t,e,n,r,i,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=nt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){tt.bindFramebuffer(Rt.FRAMEBUFFER,a);try{const s=t.texture,a=s.format,l=s.type;if(a!==Tt&&It.convert(a)!==Rt.getParameter(Rt.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===St&&(J.has("EXT_color_buffer_half_float")||Q.isWebGL2&&J.has("EXT_color_buffer_float"));if(l!==mt&&It.convert(l)!==Rt.getParameter(Rt.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==_t||!(Q.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Rt.readPixels(e,n,r,i,It.convert(a),It.convert(l),o)}finally{const t=null!==C?nt.get(C).__webglFramebuffer:null;tt.bindFramebuffer(Rt.FRAMEBUFFER,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r);rt.setTexture2D(e,0),Rt.copyTexSubImage2D(Rt.TEXTURE_2D,n,0,0,t.x,t.y,i,o),tt.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r=0){const i=e.image.width,o=e.image.height,s=It.convert(n.format),a=It.convert(n.type);rt.setTexture2D(n,0),Rt.pixelStorei(Rt.UNPACK_FLIP_Y_WEBGL,n.flipY),Rt.pixelStorei(Rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Rt.pixelStorei(Rt.UNPACK_ALIGNMENT,n.unpackAlignment),e.isDataTexture?Rt.texSubImage2D(Rt.TEXTURE_2D,r,t.x,t.y,i,o,s,a,e.image.data):e.isCompressedTexture?Rt.compressedTexSubImage2D(Rt.TEXTURE_2D,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):Rt.texSubImage2D(Rt.TEXTURE_2D,r,t.x,t.y,s,a,e.image),0===r&&n.generateMipmaps&&Rt.generateMipmap(Rt.TEXTURE_2D),tt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r,i=0){if(S.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,a=t.max.z-t.min.z+1,l=It.convert(r.format),c=It.convert(r.type);let u;if(r.isData3DTexture)rt.setTexture3D(r,0),u=Rt.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");rt.setTexture2DArray(r,0),u=Rt.TEXTURE_2D_ARRAY}Rt.pixelStorei(Rt.UNPACK_FLIP_Y_WEBGL,r.flipY),Rt.pixelStorei(Rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Rt.pixelStorei(Rt.UNPACK_ALIGNMENT,r.unpackAlignment);const h=Rt.getParameter(Rt.UNPACK_ROW_LENGTH),d=Rt.getParameter(Rt.UNPACK_IMAGE_HEIGHT),f=Rt.getParameter(Rt.UNPACK_SKIP_PIXELS),p=Rt.getParameter(Rt.UNPACK_SKIP_ROWS),m=Rt.getParameter(Rt.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;Rt.pixelStorei(Rt.UNPACK_ROW_LENGTH,g.width),Rt.pixelStorei(Rt.UNPACK_IMAGE_HEIGHT,g.height),Rt.pixelStorei(Rt.UNPACK_SKIP_PIXELS,t.min.x),Rt.pixelStorei(Rt.UNPACK_SKIP_ROWS,t.min.y),Rt.pixelStorei(Rt.UNPACK_SKIP_IMAGES,t.min.z),n.isDataTexture||n.isData3DTexture?Rt.texSubImage3D(u,i,e.x,e.y,e.z,o,s,a,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Rt.compressedTexSubImage3D(u,i,e.x,e.y,e.z,o,s,a,l,g.data)):Rt.texSubImage3D(u,i,e.x,e.y,e.z,o,s,a,l,c,g),Rt.pixelStorei(Rt.UNPACK_ROW_LENGTH,h),Rt.pixelStorei(Rt.UNPACK_IMAGE_HEIGHT,d),Rt.pixelStorei(Rt.UNPACK_SKIP_PIXELS,f),Rt.pixelStorei(Rt.UNPACK_SKIP_ROWS,p),Rt.pixelStorei(Rt.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&Rt.generateMipmap(u),tt.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?rt.setTextureCube(t,0):t.isData3DTexture?rt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?rt.setTexture2DArray(t,0):rt.setTexture2D(t,0),tt.unbindTexture()},this.resetState=function(){A=0,x=0,C=null,tt.reset(),kt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return He}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ce?be:we}set outputEncoding(t){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=t===be?Ce:Te}}class qu extends $u{}qu.prototype.isWebGL1Renderer=!0;class Yu extends Yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Xu extends li{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fi(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Zu=new qn,Ku=new qn,Ju=new Er,Qu=new Sr,th=new pr;class eh extends Yr{constructor(t=new Ii,e=new Xu){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,r=e.count;t<r;t++)Zu.fromBufferAttribute(e,t-1),Ku.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=Zu.distanceTo(Ku);t.setAttribute("lineDistance",new _i(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),th.copy(n.boundingSphere),th.applyMatrix4(r),th.radius+=i,!1===t.ray.intersectsSphere(th))return;Ju.copy(r).invert(),Qu.copy(t.ray).applyMatrix4(Ju);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new qn,c=new qn,u=new qn,h=new qn,d=this.isLineSegments?2:1,f=n.index,p=n.attributes,m=p.position;if(null!==f){const n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=d){const n=f.getX(i),r=f.getX(i+1);l.fromBufferAttribute(m,n),c.fromBufferAttribute(m,r);const o=Qu.distanceSqToSegment(l,c,h,u);if(o>a)continue;h.applyMatrix4(this.matrixWorld);const s=t.ray.origin.distanceTo(h);s<t.near||s>t.far||e.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{const n=Math.max(0,o.start),r=Math.min(m.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=d){l.fromBufferAttribute(m,i),c.fromBufferAttribute(m,i+1);const n=Qu.distanceSqToSegment(l,c,h,u);if(n>a)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry,e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}}class nh{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),i=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),i+=n.distanceTo(r),e.push(i),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const i=n.length;let o;o=e||t*n[i-1];let s,a=0,l=i-1;while(a<=l)if(r=Math.floor(a+(l-a)/2),s=n[r]-o,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r],u=n[r+1],h=u-c,d=(o-c)/h,f=(r+d)/(i-1);return f}getTangent(t,e){const n=1e-4;let r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=e||(o.isVector2?new wn:new qn);return a.copy(s).sub(o).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new qn,r=[],i=[],o=[],s=new qn,a=new Er;for(let d=0;d<=t;d++){const e=d/t;r[d]=this.getTangentAt(e,new qn)}i[0]=new qn,o[0]=new qn;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=t;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),s.crossVectors(r[d-1],r[d]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(Ze(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(a.makeRotationAxis(s,t))}o[d].crossVectors(r[d],i[d])}if(!0===e){let e=Math.acos(Ze(i[0].dot(i[t]),-1,1));e/=t,r[0].dot(s.crossVectors(i[0],i[t]))>0&&(e=-e);for(let n=1;n<=t;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],e*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class rh extends nh{constructor(t=0,e=0,n=1,r=1,i=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(t,e){const n=e||new wn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;while(i<0)i+=r;while(i>r)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const s=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*t-r*e+this.aX,l=n*e+r*t+this.aY}return n.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class ih extends rh{constructor(t,e,n,r,i,o){super(t,e,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function oh(){let t=0,e=0,n=0,r=0;function i(i,o,s,a){t=i,e=s,n=-3*i+3*o-2*s-a,r=2*i-2*o+s+a}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,s,a){let l=(e-t)/o-(n-t)/(o+s)+(n-e)/s,c=(n-e)/s-(r-e)/(s+a)+(r-n)/a;l*=s,c*=s,i(e,n,l,c)},calc:function(i){const o=i*i,s=o*i;return t+e*i+n*o+r*s}}}const sh=new qn,ah=new oh,lh=new oh,ch=new oh;class uh extends nh{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new qn){const n=e,r=this.points,i=r.length,o=(i-(this.closed?0:1))*t;let s,a,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(sh.subVectors(r[0],r[1]).add(r[0]),s=sh);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(sh.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=sh),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(a),t);n<1e-4&&(n=1),e<1e-4&&(e=n),r<1e-4&&(r=n),ah.initNonuniformCatmullRom(s.x,u.x,h.x,a.x,e,n,r),lh.initNonuniformCatmullRom(s.y,u.y,h.y,a.y,e,n,r),ch.initNonuniformCatmullRom(s.z,u.z,h.z,a.z,e,n,r)}else"catmullrom"===this.curveType&&(ah.initCatmullRom(s.x,u.x,h.x,a.x,this.tension),lh.initCatmullRom(s.y,u.y,h.y,a.y,this.tension),ch.initCatmullRom(s.z,u.z,h.z,a.z,this.tension));return n.set(ah.calc(c),lh.calc(c),ch.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new qn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function hh(t,e,n,r,i){const o=.5*(r-e),s=.5*(i-n),a=t*t,l=t*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*t+n}function dh(t,e){const n=1-t;return n*n*e}function fh(t,e){return 2*(1-t)*t*e}function ph(t,e){return t*t*e}function mh(t,e,n,r){return dh(t,e)+fh(t,n)+ph(t,r)}function gh(t,e){const n=1-t;return n*n*n*e}function yh(t,e){const n=1-t;return 3*n*n*t*e}function vh(t,e){return 3*(1-t)*t*t*e}function wh(t,e){return t*t*t*e}function bh(t,e,n,r,i){return gh(t,e)+yh(t,n)+vh(t,r)+wh(t,i)}class _h extends nh{constructor(t=new wn,e=new wn,n=new wn,r=new wn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new wn){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(bh(t,r.x,i.x,o.x,s.x),bh(t,r.y,i.y,o.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Sh extends nh{constructor(t=new qn,e=new qn,n=new qn,r=new qn){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new qn){const n=e,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(bh(t,r.x,i.x,o.x,s.x),bh(t,r.y,i.y,o.y,s.y),bh(t,r.z,i.z,o.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Eh extends nh{constructor(t=new wn,e=new wn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new wn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new wn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ah extends nh{constructor(t=new qn,e=new qn){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new qn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new qn){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class xh extends nh{constructor(t=new wn,e=new wn,n=new wn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new wn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(mh(t,r.x,i.x,o.x),mh(t,r.y,i.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ch extends nh{constructor(t=new qn,e=new qn,n=new qn){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new qn){const n=e,r=this.v0,i=this.v1,o=this.v2;return n.set(mh(t,r.x,i.x,o.x),mh(t,r.y,i.y,o.y),mh(t,r.z,i.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Th extends nh{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new wn){const n=e,r=this.points,i=(r.length-1)*t,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(hh(s,a.x,l.x,c.x,u.x),hh(s,a.y,l.y,c.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new wn).fromArray(n))}return this}}var Mh=Object.freeze({__proto__:null,ArcCurve:ih,CatmullRomCurve3:uh,CubicBezierCurve:_h,CubicBezierCurve3:Sh,EllipseCurve:rh,LineCurve:Eh,LineCurve3:Ah,QuadraticBezierCurve:xh,QuadraticBezierCurve3:Ch,SplineCurve:Th});class Ih extends Ii{constructor(t=1,e=1,n=1,r=32,i=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function y(){const o=new qn,y=new qn;let v=0;const w=(e-t)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,v=g*(e-t)+t;for(let t=0;t<=r;t++){const e=t/r,i=e*a+s,l=Math.sin(i),p=Math.cos(i);y.x=v*l,y.y=-g*n+m,y.z=v*p,u.push(y.x,y.y,y.z),o.set(l,w,p).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-g),c.push(f++)}p.push(c)}for(let t=0;t<r;t++)for(let e=0;e<i;e++){const n=p[e][t],r=p[e+1][t],i=p[e+1][t+1],o=p[e][t+1];c.push(n,r,o),c.push(r,i,o),v+=6}l.addGroup(g,v,0),g+=v}function v(n){const i=f,o=new wn,p=new qn;let y=0;const v=!0===n?t:e,w=!0===n?1:-1;for(let t=1;t<=r;t++)u.push(0,m*w,0),h.push(0,w,0),d.push(.5,.5),f++;const b=f;for(let t=0;t<=r;t++){const e=t/r,n=e*a+s,i=Math.cos(n),l=Math.sin(n);p.x=v*l,p.y=m*w,p.z=v*i,u.push(p.x,p.y,p.z),h.push(0,w,0),o.x=.5*i+.5,o.y=.5*l*w+.5,d.push(o.x,o.y),f++}for(let t=0;t<r;t++){const e=i+t,r=b+t;!0===n?c.push(r,r+1,e):c.push(r+1,r,e),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}y(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new _i(u,3)),this.setAttribute("normal",new _i(h,3)),this.setAttribute("uv",new _i(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ih(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class kh extends Ih{constructor(t=1,e=1,n=32,r=1,i=!1,o=0,s=2*Math.PI){super(0,t,e,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}static fromJSON(t){return new kh(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Oh extends Ii{constructor(t=1,e=32,n=16,r=0,i=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new qn,h=new qn,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],y=g/n;let v=0;0===g&&0===o?v=.5/e:g===n&&a===Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const a=n/e;u.x=-t*Math.cos(r+a*i)*Math.sin(o+y*s),u.y=t*Math.cos(o+y*s),u.z=t*Math.sin(r+a*i)*Math.sin(o+y*s),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(a+v,1-y),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let t=0;t<e;t++){const e=c[g][t+1],r=c[g][t],i=c[g+1][t],s=c[g+1][t+1];(0!==g||o>0)&&d.push(e,r,s),(g!==n-1||a<Math.PI)&&d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new _i(f,3)),this.setAttribute("normal",new _i(p,3)),this.setAttribute("uv",new _i(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Oh(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Rh extends Ii{constructor(t=new Ch(new qn(-1,-1,0),new qn(-1,1,0),new qn(1,1,0)),e=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i};const o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new qn,a=new qn,l=new wn;let c=new qn;const u=[],h=[],d=[],f=[];function p(){for(let t=0;t<e;t++)m(t);m(!1===i?e:0),y(),g()}function m(i){c=t.getPointAt(i/e,c);const l=o.normals[i],d=o.binormals[i];for(let t=0;t<=r;t++){const e=t/r*Math.PI*2,i=Math.sin(e),o=-Math.cos(e);a.x=o*l.x+i*d.x,a.y=o*l.y+i*d.y,a.z=o*l.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=c.x+n*a.x,s.y=c.y+n*a.y,s.z=c.z+n*a.z,u.push(s.x,s.y,s.z)}}function g(){for(let t=1;t<=e;t++)for(let e=1;e<=r;e++){const n=(r+1)*(t-1)+(e-1),i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;f.push(n,i,s),f.push(i,o,s)}}function y(){for(let t=0;t<=e;t++)for(let n=0;n<=r;n++)l.x=t/e,l.y=n/r,d.push(l.x,l.y)}p(),this.setIndex(f),this.setAttribute("position",new _i(u,3)),this.setAttribute("normal",new _i(h,3)),this.setAttribute("uv",new _i(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Rh((new Mh[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class Dh extends li{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ee,this.normalScale=new wn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=G,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Nh(t,e,n){return Lh(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)}function Ph(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function Lh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}class Bh{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{let o;n:{r:if(!(t<r)){for(let o=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}if(t>=i)break t;{const s=e[1];t<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}while(n<o){const r=n+o>>>1;t<e[r]?o=r:n=r+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r;for(let o=0;o!==r;++o)e[o]=n[i+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Uh extends Bh{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ge,endingEnd:ge}}intervalChanged_(t,e,n){const r=this.parameterPositions;let i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case ye:i=t,s=2*e-n;break;case ve:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case ye:o=t,a=2*n-e;break;case ve:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-e)/(r-e),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,w=d*m-d*p;for(let b=0;b!==s;++b)i[b]=g*o[c+b]+y*o[l+b]+v*o[a+b]+w*o[u+b];return i}}class Fh extends Bh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,c=(n-e)/(r-e),u=1-c;for(let h=0;h!==s;++h)i[h]=o[l+h]*u+o[a+h]*c;return i}}class zh extends Bh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Vh{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Ph(e,this.TimeBufferType),this.values=Ph(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Ph(t.times,Array),values:Ph(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new zh(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Fh(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Uh(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case fe:e=this.InterpolantFactoryMethodDiscrete;break;case pe:e=this.InterpolantFactoryMethodLinear;break;case me:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fe;case this.InterpolantFactoryMethodLinear:return pe;case this.InterpolantFactoryMethodSmooth:return me}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let i=0,o=r-1;while(i!==r&&n[i]<t)++i;while(-1!==o&&n[o]>e)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=Nh(n,i,o),this.values=Nh(this.values,i*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let s=0;s!==i;s++){const e=n[s];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,e,o),t=!1;break}o=e}if(void 0!==r&&Lh(r))for(let s=0,a=r.length;s!==a;++s){const e=r[s];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,e),t=!1;break}}return t}optimize(){const t=Nh(this.times),e=Nh(this.values),n=this.getValueSize(),r=this.getInterpolation()===me,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s],l=t[s+1];if(a!==l&&(1!==s||a!==t[0]))if(r)i=!0;else{const t=s*n,r=t-n,o=t+n;for(let s=0;s!==n;++s){const n=e[t+s];if(n!==e[r+s]||n!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const r=s*n,i=o*n;for(let t=0;t!==n;++t)e[i+t]=e[r+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*n,r=o*n,s=0;s!==n;++s)e[r+s]=e[t+s];++o}return o!==t.length?(this.times=Nh(t,0,o),this.values=Nh(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Nh(this.times,0),e=Nh(this.values,0),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}Vh.prototype.TimeBufferType=Float32Array,Vh.prototype.ValueBufferType=Float32Array,Vh.prototype.DefaultInterpolation=pe;class Hh extends Vh{}Hh.prototype.ValueTypeName="bool",Hh.prototype.ValueBufferType=Array,Hh.prototype.DefaultInterpolation=fe,Hh.prototype.InterpolantFactoryMethodLinear=void 0,Hh.prototype.InterpolantFactoryMethodSmooth=void 0;class jh extends Vh{}jh.prototype.ValueTypeName="color";class Wh extends Vh{}Wh.prototype.ValueTypeName="number";class Gh extends Bh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(r-e);let l=t*s;for(let c=l+s;l!==c;l+=4)$n.slerpFlat(i,0,o,l-s,o,l,a);return i}}class $h extends Vh{InterpolantFactoryMethodLinear(t){return new Gh(this.times,this.values,this.getValueSize(),t)}}$h.prototype.ValueTypeName="quaternion",$h.prototype.DefaultInterpolation=pe,$h.prototype.InterpolantFactoryMethodSmooth=void 0;class qh extends Vh{}qh.prototype.ValueTypeName="string",qh.prototype.ValueBufferType=Array,qh.prototype.DefaultInterpolation=fe,qh.prototype.InterpolantFactoryMethodLinear=void 0,qh.prototype.InterpolantFactoryMethodSmooth=void 0;class Yh extends Vh{}Yh.prototype.ValueTypeName="vector";const Xh={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Zh{constructor(t,e,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return i?i(t):t},this.setURLModifier=function(t){return i=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],r=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}}}const Kh=new Zh;class Jh{constructor(t){this.manager=void 0!==t?t:Kh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}class Qh extends Error{constructor(t,e){super(t),this.response=e}}class td extends Jh{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const i=this,o=Xh.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;const s=En("img");function a(){c(),Xh.add(t,this),e&&e(this),i.manager.itemEnd(t)}function l(e){c(),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}function c(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(t),s.src=t,s}}class ed extends Jh{constructor(t){super(t)}load(t,e,n,r){const i=new Vn,o=new td(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){i.image=t,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}class nd extends Yr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new fi(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const rd=new Er,id=new qn,od=new qn;class sd{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new wn(512,512),this.map=null,this.mapPass=null,this.matrix=new Er,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wo,this._frameExtents=new wn(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;id.setFromMatrixPosition(t.matrixWorld),e.position.copy(id),od.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(od),e.updateMatrixWorld(),rd.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rd),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(rd)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class ad extends sd{constructor(){super(new ll(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ld extends nd{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yr.DEFAULT_UP),this.updateMatrix(),this.target=new Yr,this.shadow=new ad}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class cd extends nd{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class ud{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=hd();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function hd(){return("undefined"===typeof performance?Date:performance).now()}const dd="\\[\\]\\.:\\/",fd=new RegExp("["+dd+"]","g"),pd="[^"+dd+"]",md="[^"+dd.replace("\\.","")+"]",gd=/((?:WC+[\/:])*)/.source.replace("WC",pd),yd=/(WCOD+)?/.source.replace("WCOD",md),vd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pd),wd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pd),bd=new RegExp("^"+gd+yd+vd+wd+"$"),_d=["material","materials","bones","map"];class Sd{constructor(t,e,n){const r=n||Ed.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class Ed{constructor(t,e,n){this.path=e,this.parsedPath=n||Ed.parseTrackName(e),this.node=Ed.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new Ed.Composite(t,e,n):new Ed(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(fd,"")}static parseTrackName(t){const e=bd.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=n.nodeName.substring(r+1);-1!==_d.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e||i.uuid===e)return i;const o=n(i.children);if(o)return o}return null},r=n(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)t[e++]=n[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(t||(t=Ed.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===r){r=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==r){if(void 0===t[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[r]}}const o=t[r];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ed.Composite=Sd,Ed.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ed.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ed.prototype.GetterByBindingType=[Ed.prototype._getValue_direct,Ed.prototype._getValue_array,Ed.prototype._getValue_arrayElement,Ed.prototype._getValue_toArray],Ed.prototype.SetterByBindingTypeAndVersioning=[[Ed.prototype._setValue_direct,Ed.prototype._setValue_direct_setNeedsUpdate,Ed.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ed.prototype._setValue_array,Ed.prototype._setValue_array_setNeedsUpdate,Ed.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ed.prototype._setValue_arrayElement,Ed.prototype._setValue_arrayElement_setNeedsUpdate,Ed.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ed.prototype._setValue_fromArray,Ed.prototype._setValue_fromArray_setNeedsUpdate,Ed.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class Ad{constructor(t,e,n=0,r=1/0){this.ray=new Sr(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new Nr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return Cd(t,this,n,e),n.sort(xd),n}intersectObjects(t,e=!0,n=[]){for(let r=0,i=t.length;r<i;r++)Cd(t[r],this,n,e);return n.sort(xd),n}}function xd(t,e){return t.distance-e.distance}function Cd(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r){const r=t.children;for(let t=0,i=r.length;t<i;t++)Cd(r[t],e,n,!0)}}class Td{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Ze(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r);const Md=new go,Id=new Ad,kd=new wn,Od=new qn,Rd=new qn,Dd=new qn,Nd=new Er;class Pd extends We{constructor(t,e,n){super(),n.style.touchAction="none";let r=null,i=null;const o=[],s=this;function a(){n.addEventListener("pointermove",d),n.addEventListener("pointerdown",f),n.addEventListener("pointerup",p),n.addEventListener("pointerleave",p)}function l(){n.removeEventListener("pointermove",d),n.removeEventListener("pointerdown",f),n.removeEventListener("pointerup",p),n.removeEventListener("pointerleave",p),n.style.cursor=""}function c(){l()}function u(){return t}function h(){return Id}function d(a){if(!1!==s.enabled){if(m(a),Id.setFromCamera(kd,e),r)return Id.ray.intersectPlane(Md,Rd)&&r.position.copy(Rd.sub(Od).applyMatrix4(Nd)),void s.dispatchEvent({type:"drag",object:r});if("mouse"===a.pointerType||"pen"===a.pointerType)if(o.length=0,Id.setFromCamera(kd,e),Id.intersectObjects(t,!0,o),o.length>0){const t=o[0].object;Md.setFromNormalAndCoplanarPoint(e.getWorldDirection(Md.normal),Dd.setFromMatrixPosition(t.matrixWorld)),i!==t&&null!==i&&(s.dispatchEvent({type:"hoveroff",object:i}),n.style.cursor="auto",i=null),i!==t&&(s.dispatchEvent({type:"hoveron",object:t}),n.style.cursor="pointer",i=t)}else null!==i&&(s.dispatchEvent({type:"hoveroff",object:i}),n.style.cursor="auto",i=null)}}function f(i){!1!==s.enabled&&(m(i),o.length=0,Id.setFromCamera(kd,e),Id.intersectObjects(t,!0,o),o.length>0&&(r=!0===s.transformGroup?t[0]:o[0].object,Md.setFromNormalAndCoplanarPoint(e.getWorldDirection(Md.normal),Dd.setFromMatrixPosition(r.matrixWorld)),Id.ray.intersectPlane(Md,Rd)&&(Nd.copy(r.parent.matrixWorld).invert(),Od.copy(Rd).sub(Dd.setFromMatrixPosition(r.matrixWorld))),n.style.cursor="move",s.dispatchEvent({type:"dragstart",object:r})))}function p(){!1!==s.enabled&&(r&&(s.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=i?"pointer":"auto")}function m(t){const e=n.getBoundingClientRect();kd.x=(t.clientX-e.left)/e.width*2-1,kd.y=-(t.clientY-e.top)/e.height*2+1}a(),this.enabled=!0,this.transformGroup=!1,this.activate=a,this.deactivate=l,this.dispose=c,this.getObjects=u,this.getRaycaster=h}}var Ld={value:()=>{}};function Bd(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ud(r)}function Ud(t){this._=t}function Fd(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function zd(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Vd(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ld,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ud.prototype=Bd.prototype={constructor:Ud,on:function(t,e){var n,r=this._,i=Fd(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++o<s)if(n=(t=i[o]).type)r[n]=Vd(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Vd(r[n],t.name,null);return this}while(++o<s)if((n=(t=i[o]).type)&&(n=zd(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ud(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Hd,jd,Wd=Bd,Gd=0,$d=0,qd=0,Yd=1e3,Xd=0,Zd=0,Kd=0,Jd="object"===typeof performance&&performance.now?performance:Date,Qd="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tf(){return Zd||(Qd(ef),Zd=Jd.now()+Kd)}function ef(){Zd=0}function nf(){this._call=this._time=this._next=null}function rf(t,e,n){var r=new nf;return r.restart(t,e,n),r}function of(){tf(),++Gd;var t,e=Hd;while(e)(t=Zd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gd}function sf(){Zd=(Xd=Jd.now())+Kd,Gd=$d=0;try{of()}finally{Gd=0,lf(),Zd=0}}function af(){var t=Jd.now(),e=t-Xd;e>Yd&&(Kd-=e,Xd=t)}function lf(){var t,e,n=Hd,r=1/0;while(n)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Hd=e);jd=t,cf(r)}function cf(t){if(!Gd){$d&&($d=clearTimeout($d));var e=t-Zd;e>24?(t<1/0&&($d=setTimeout(sf,t-Jd.now()-Kd)),qd&&(qd=clearInterval(qd))):(qd||(Xd=Jd.now(),qd=setInterval(af,Yd)),Gd=1,Qd(sf))}}nf.prototype=rf.prototype={constructor:nf,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?tf():+n)+(null==e?0:+e),this._next||jd===this||(jd?jd._next=this:Hd=this,jd=this),this._call=t,this._time=n,cf()},stop:function(){this._call&&(this._call=null,this._time=1/0,cf())}};const uf=1664525,hf=1013904223,df=4294967296;function ff(){let t=1;return()=>(t=(uf*t+hf)%df)/df}var pf=3;function mf(t){return t.x}function gf(t){return t.y}function yf(t){return t.z}var vf=10,wf=Math.PI*(3-Math.sqrt(5)),bf=20*Math.PI/(9+Math.sqrt(221));function _f(t,e){e=e||2;var n,r=Math.min(pf,Math.max(1,Math.round(e))),i=1,o=.001,s=1-Math.pow(o,1/300),a=0,l=.6,c=new Map,u=rf(f),h=Wd("tick","end"),d=ff();function f(){p(),h.call("tick",n),i<o&&(u.stop(),h.call("end",n))}function p(e){var o,u,h=t.length;void 0===e&&(e=1);for(var d=0;d<e;++d)for(i+=(a-i)*s,c.forEach((function(t){t(i)})),o=0;o<h;++o)u=t[o],null==u.fx?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),r>1&&(null==u.fy?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0)),r>2&&(null==u.fz?u.z+=u.vz*=l:(u.z=u.fz,u.vz=0));return n}function m(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),null!=e.fz&&(e.z=e.fz),isNaN(e.x)||r>1&&isNaN(e.y)||r>2&&isNaN(e.z)){var o=vf*(r>2?Math.cbrt(.5+n):r>1?Math.sqrt(.5+n):n),s=n*wf,a=n*bf;1===r?e.x=o:2===r?(e.x=o*Math.cos(s),e.y=o*Math.sin(s)):(e.x=o*Math.sin(s)*Math.cos(a),e.y=o*Math.cos(s),e.z=o*Math.sin(s)*Math.sin(a))}(isNaN(e.vx)||r>1&&isNaN(e.vy)||r>2&&isNaN(e.vz))&&(e.vx=0,r>1&&(e.vy=0),r>2&&(e.vz=0))}}function g(e){return e.initialize&&e.initialize(t,d,r),e}return null==t&&(t=[]),m(),n={tick:p,restart:function(){return u.restart(f),n},stop:function(){return u.stop(),n},numDimensions:function(t){return arguments.length?(r=Math.min(pf,Math.max(1,Math.round(t))),c.forEach(g),n):r},nodes:function(e){return arguments.length?(t=e,m(),c.forEach(g),n):t},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(o=+t,n):o},alphaDecay:function(t){return arguments.length?(s=+t,n):+s},alphaTarget:function(t){return arguments.length?(a=+t,n):a},velocityDecay:function(t){return arguments.length?(l=1-t,n):1-l},randomSource:function(t){return arguments.length?(d=t,c.forEach(g),n):d},force:function(t,e){return arguments.length>1?(null==e?c.delete(t):c.set(t,g(e)),n):c.get(t)},find:function(){var e,n,i,o,s,a,l=Array.prototype.slice.call(arguments),c=l.shift()||0,u=(r>1?l.shift():null)||0,h=(r>2?l.shift():null)||0,d=l.shift()||1/0,f=0,p=t.length;for(d*=d,f=0;f<p;++f)s=t[f],e=c-s.x,n=u-(s.y||0),i=h-(s.z||0),o=e*e+n*n+i*i,o<d&&(a=s,d=o);return a},on:function(t,e){return arguments.length>1?(h.on(t,e),n):h.on(t)}}}function Sf(t){return function(){return t}}function Ef(t){return 1e-6*(t()-.5)}function Af(t){return t.index}function xf(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Cf(t){var e,n,r,i,o,s,a,l=Af,c=d,u=Sf(30),h=1;function d(t){return 1/Math.min(o[t.source.index],o[t.target.index])}function f(r){for(var o=0,l=t.length;o<h;++o)for(var c,u,d,f,p,m=0,g=0,y=0,v=0;m<l;++m)c=t[m],u=c.source,d=c.target,g=d.x+d.vx-u.x-u.vx||Ef(a),i>1&&(y=d.y+d.vy-u.y-u.vy||Ef(a)),i>2&&(v=d.z+d.vz-u.z-u.vz||Ef(a)),f=Math.sqrt(g*g+y*y+v*v),f=(f-n[m])/f*r*e[m],g*=f,y*=f,v*=f,d.vx-=g*(p=s[m]),i>1&&(d.vy-=y*p),i>2&&(d.vz-=v*p),u.vx+=g*(p=1-p),i>1&&(u.vy+=y*p),i>2&&(u.vz+=v*p)}function p(){if(r){var i,a,c=r.length,u=t.length,h=new Map(r.map(((t,e)=>[l(t,e,r),t])));for(i=0,o=new Array(c);i<u;++i)a=t[i],a.index=i,"object"!==typeof a.source&&(a.source=xf(h,a.source)),"object"!==typeof a.target&&(a.target=xf(h,a.target)),o[a.source.index]=(o[a.source.index]||0)+1,o[a.target.index]=(o[a.target.index]||0)+1;for(i=0,s=new Array(u);i<u;++i)a=t[i],s[i]=o[a.source.index]/(o[a.source.index]+o[a.target.index]);e=new Array(u),m(),n=new Array(u),g()}}function m(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}function g(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,...e){r=t,a=e.find((t=>"function"===typeof t))||Math.random,i=e.find((t=>[1,2,3].includes(t)))||2,p()},f.links=function(e){return arguments.length?(t=e,p(),f):t},f.id=function(t){return arguments.length?(l=t,f):l},f.iterations=function(t){return arguments.length?(h=+t,f):h},f.strength=function(t){return arguments.length?(c="function"===typeof t?t:Sf(+t),m(),f):c},f.distance=function(t){return arguments.length?(u="function"===typeof t?t:Sf(+t),g(),f):u},f}function Tf(t){const e=+this._x.call(null,t);return Mf(this.cover(e),e,t)}function Mf(t,e,n){if(isNaN(e))return t;var r,i,o,s,a,l,c=t._root,u={data:n},h=t._x0,d=t._x1;if(!c)return t._root=u,t;while(c.length)if((s=e>=(i=(h+d)/2))?h=i:d=i,r=c,!(c=c[a=+s]))return r[a]=u,t;if(o=+t._x.call(null,c.data),e===o)return u.next=c,r?r[a]=u:t._root=u,t;do{r=r?r[a]=new Array(2):t._root=new Array(2),(s=e>=(i=(h+d)/2))?h=i:d=i}while((a=+s)===(l=+(o>=i)));return r[l]=c,r[a]=u,t}function If(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let r=1/0,i=-1/0;for(let o,s=0;s<e;++s)isNaN(o=+this._x.call(null,t[s]))||(n[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let o=0;o<e;++o)Mf(this,n[o],t[o]);return this}function kf(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{var r,i,o=n-e||1,s=this._root;while(e>t||t>=n)switch(i=+(t<e),r=new Array(2),r[i]=s,s=r,o*=2,i){case 0:n=e+o;break;case 1:e=n-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=e,this._x1=n,this}function Of(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Rf(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Df(t,e,n){this.node=t,this.x0=e,this.x1=n}function Nf(t,e){var n,r,i,o,s,a=this._x0,l=this._x1,c=[],u=this._root;u&&c.push(new Df(u,a,l)),null==e?e=1/0:(a=t-e,l=t+e);while(o=c.pop())if(!(!(u=o.node)||(r=o.x0)>l||(i=o.x1)<a))if(u.length){var h=(r+i)/2;c.push(new Df(u[1],h,i),new Df(u[0],r,h)),(s=+(t>=h))&&(o=c[c.length-1],c[c.length-1]=c[c.length-1-s],c[c.length-1-s]=o)}else{var d=Math.abs(t-+this._x.call(null,u.data));d<e&&(e=d,a=t-d,l=t+d,n=u.data)}return n}function Pf(t){if(isNaN(o=+this._x.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u=this._root,h=this._x0,d=this._x1;if(!u)return this;if(u.length)while(1){if((a=o>=(s=(h+d)/2))?h=s:d=s,e=u,!(u=u[l=+a]))return this;if(!u.length)break;e[l+1&1]&&(n=e,c=l)}while(u.data!==t)if(r=u,!(u=u.next))return this;return(i=u.next)&&delete u.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(u=e[0]||e[1])&&u===(e[1]||e[0])&&!u.length&&(n?n[c]=u:this._root=u),this):(this._root=i,this)}function Lf(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Bf(){return this._root}function Uf(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function Ff(t){var e,n,r,i,o=[],s=this._root;s&&o.push(new Df(s,this._x0,this._x1));while(e=o.pop())if(!t(s=e.node,r=e.x0,i=e.x1)&&s.length){var a=(r+i)/2;(n=s[1])&&o.push(new Df(n,a,i)),(n=s[0])&&o.push(new Df(n,r,a))}return this}function zf(t){var e,n=[],r=[];this._root&&n.push(new Df(this._root,this._x0,this._x1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.x1,l=(s+a)/2;(o=i[0])&&n.push(new Df(o,s,l)),(o=i[1])&&n.push(new Df(o,l,a))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.x1);return this}function Vf(t){return t[0]}function Hf(t){return arguments.length?(this._x=t,this):this._x}function jf(t,e){var n=new Wf(null==e?Vf:e,NaN,NaN);return null==t?n:n.addAll(t)}function Wf(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function Gf(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var $f=jf.prototype=Wf.prototype;function qf(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Yf(this.cover(e,n),e,n,t)}function Yf(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,l,c,u,h,d,f=t._root,p={data:r},m=t._x0,g=t._y0,y=t._x1,v=t._y1;if(!f)return t._root=p,t;while(f.length)if((c=e>=(o=(m+y)/2))?m=o:y=o,(u=n>=(s=(g+v)/2))?g=s:v=s,i=f,!(f=f[h=u<<1|c]))return i[h]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+y)/2))?m=o:y=o,(u=n>=(s=(g+v)/2))?g=s:v=s}while((h=u<<1|c)===(d=(l>=s)<<1|a>=o));return i[d]=f,i[h]=p,t}function Xf(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<o;++n)Yf(this,s[n],a[n],t[n]);return this}function Zf(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{var s,a,l=i-n||1,c=this._root;while(n>t||t>=i||r>e||e>=o)switch(a=(e<r)<<1|t<n,s=new Array(4),s[a]=c,c=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Kf(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function Jf(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Qf(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function tp(t,e,n){var r,i,o,s,a,l,c,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;m&&p.push(new Qf(m,u,h,d,f)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,f=e+n,n*=n);while(l=p.pop())if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>f||(s=l.x1)<u||(a=l.y1)<h))if(m.length){var g=(i+s)/2,y=(o+a)/2;p.push(new Qf(m[3],g,y,s,a),new Qf(m[2],i,y,g,a),new Qf(m[1],g,o,s,y),new Qf(m[0],i,o,g,y)),(c=(e>=y)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var v=t-+this._x.call(null,m.data),w=e-+this._y.call(null,m.data),b=v*v+w*w;if(b<n){var _=Math.sqrt(n=b);u=t-_,h=e-_,d=t+_,f=e+_,r=m.data}}return r}function ep(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)while(1){if((c=o>=(a=(p+g)/2))?p=a:g=a,(u=s>=(l=(m+y)/2))?m=l:y=l,e=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}while(f.data!==t)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)}function np(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function rp(){return this._root}function ip(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function op(t){var e,n,r,i,o,s,a=[],l=this._root;l&&a.push(new Qf(l,this._x0,this._y0,this._x1,this._y1));while(e=a.pop())if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&l.length){var c=(r+o)/2,u=(i+s)/2;(n=l[3])&&a.push(new Qf(n,c,u,o,s)),(n=l[2])&&a.push(new Qf(n,r,u,c,s)),(n=l[1])&&a.push(new Qf(n,c,i,o,u)),(n=l[0])&&a.push(new Qf(n,r,i,c,u))}return this}function sp(t){var e,n=[],r=[];this._root&&n.push(new Qf(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.x1,c=e.y1,u=(s+l)/2,h=(a+c)/2;(o=i[0])&&n.push(new Qf(o,s,a,u,h)),(o=i[1])&&n.push(new Qf(o,u,a,l,h)),(o=i[2])&&n.push(new Qf(o,s,h,u,c)),(o=i[3])&&n.push(new Qf(o,u,h,l,c))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function ap(t){return t[0]}function lp(t){return arguments.length?(this._x=t,this):this._x}function cp(t){return t[1]}function up(t){return arguments.length?(this._y=t,this):this._y}function hp(t,e,n){var r=new dp(null==e?ap:e,null==n?cp:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function dp(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function fp(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}$f.copy=function(){var t,e,n=new Wf(this._x,this._x0,this._x1),r=this._root;if(!r)return n;if(!r.length)return n._root=Gf(r),n;t=[{source:r,target:n._root=new Array(2)}];while(r=t.pop())for(var i=0;i<2;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(2)}):r.target[i]=Gf(e));return n},$f.add=Tf,$f.addAll=If,$f.cover=kf,$f.data=Of,$f.extent=Rf,$f.find=Nf,$f.remove=Pf,$f.removeAll=Lf,$f.root=Bf,$f.size=Uf,$f.visit=Ff,$f.visitAfter=zf,$f.x=Hf;var pp=hp.prototype=dp.prototype;function mp(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return gp(this.cover(e,n,r),e,n,r,t)}function gp(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var o,s,a,l,c,u,h,d,f,p,m,g,y=t._root,v={data:i},w=t._x0,b=t._y0,_=t._z0,S=t._x1,E=t._y1,A=t._z1;if(!y)return t._root=v,t;while(y.length)if((d=e>=(s=(w+S)/2))?w=s:S=s,(f=n>=(a=(b+E)/2))?b=a:E=a,(p=r>=(l=(_+A)/2))?_=l:A=l,o=y,!(y=y[m=p<<2|f<<1|d]))return o[m]=v,t;if(c=+t._x.call(null,y.data),u=+t._y.call(null,y.data),h=+t._z.call(null,y.data),e===c&&n===u&&r===h)return v.next=y,o?o[m]=v:t._root=v,t;do{o=o?o[m]=new Array(8):t._root=new Array(8),(d=e>=(s=(w+S)/2))?w=s:S=s,(f=n>=(a=(b+E)/2))?b=a:E=a,(p=r>=(l=(_+A)/2))?_=l:A=l}while((m=p<<2|f<<1|d)===(g=(h>=l)<<2|(u>=a)<<1|c>=s));return o[g]=y,o[m]=v,t}function yp(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let o=1/0,s=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h,d,f,p,m=0;m<e;++m)isNaN(d=+this._x.call(null,h=t[m]))||isNaN(f=+this._y.call(null,h))||isNaN(p=+this._z.call(null,h))||(n[m]=d,r[m]=f,i[m]=p,d<o&&(o=d),d>l&&(l=d),f<s&&(s=f),f>c&&(c=f),p<a&&(a=p),p>u&&(u=p));if(o>l||s>c||a>u)return this;this.cover(o,s,a).cover(l,c,u);for(let h=0;h<e;++h)gp(this,n[h],r[h],i[h],t[h]);return this}function vp(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._z0,s=this._x1,a=this._y1,l=this._z1;if(isNaN(r))s=(r=Math.floor(t))+1,a=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1;else{var c,u,h=s-r||1,d=this._root;while(r>t||t>=s||i>e||e>=a||o>n||n>=l)switch(u=(n<o)<<2|(e<i)<<1|t<r,c=new Array(8),c[u]=d,d=c,h*=2,u){case 0:s=r+h,a=i+h,l=o+h;break;case 1:r=s-h,a=i+h,l=o+h;break;case 2:s=r+h,i=a-h,l=o+h;break;case 3:r=s-h,i=a-h,l=o+h;break;case 4:s=r+h,a=i+h,o=l-h;break;case 5:r=s-h,a=i+h,o=l-h;break;case 6:s=r+h,i=a-h,o=l-h;break;case 7:r=s-h,i=a-h,o=l-h;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=l,this}function wp(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function bp(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function _p(t,e,n,r,i,o,s){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=o,this.z1=s}function Sp(t,e,n,r){var i,o,s,a,l,c,u,h,d,f=this._x0,p=this._y0,m=this._z0,g=this._x1,y=this._y1,v=this._z1,w=[],b=this._root;b&&w.push(new _p(b,f,p,m,g,y,v)),null==r?r=1/0:(f=t-r,p=e-r,m=n-r,g=t+r,y=e+r,v=n+r,r*=r);while(h=w.pop())if(!(!(b=h.node)||(o=h.x0)>g||(s=h.y0)>y||(a=h.z0)>v||(l=h.x1)<f||(c=h.y1)<p||(u=h.z1)<m))if(b.length){var _=(o+l)/2,S=(s+c)/2,E=(a+u)/2;w.push(new _p(b[7],_,S,E,l,c,u),new _p(b[6],o,S,E,_,c,u),new _p(b[5],_,s,E,l,S,u),new _p(b[4],o,s,E,_,S,u),new _p(b[3],_,S,a,l,c,E),new _p(b[2],o,S,a,_,c,E),new _p(b[1],_,s,a,l,S,E),new _p(b[0],o,s,a,_,S,E)),(d=(n>=E)<<2|(e>=S)<<1|t>=_)&&(h=w[w.length-1],w[w.length-1]=w[w.length-1-d],w[w.length-1-d]=h)}else{var A=t-+this._x.call(null,b.data),x=e-+this._y.call(null,b.data),C=n-+this._z.call(null,b.data),T=A*A+x*x+C*C;if(T<r){var M=Math.sqrt(r=T);f=t-M,p=e-M,m=n-M,g=t+M,y=e+M,v=n+M,i=b.data}}return i}function Ep(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t))||isNaN(a=+this._z.call(null,t)))return this;var e,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g=this._root,y=this._x0,v=this._y0,w=this._z0,b=this._x1,_=this._y1,S=this._z1;if(!g)return this;if(g.length)while(1){if((h=o>=(l=(y+b)/2))?y=l:b=l,(d=s>=(c=(v+_)/2))?v=c:_=c,(f=a>=(u=(w+S)/2))?w=u:S=u,e=g,!(g=g[p=f<<2|d<<1|h]))return this;if(!g.length)break;(e[p+1&7]||e[p+2&7]||e[p+3&7]||e[p+4&7]||e[p+5&7]||e[p+6&7]||e[p+7&7])&&(n=e,m=p)}while(g.data!==t)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):e?(i?e[p]=i:delete e[p],(g=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&g===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!g.length&&(n?n[m]=g:this._root=g),this):(this._root=i,this)}function Ap(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function xp(){return this._root}function Cp(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function Tp(t){var e,n,r,i,o,s,a,l,c=[],u=this._root;u&&c.push(new _p(u,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=c.pop())if(!t(u=e.node,r=e.x0,i=e.y0,o=e.z0,s=e.x1,a=e.y1,l=e.z1)&&u.length){var h=(r+s)/2,d=(i+a)/2,f=(o+l)/2;(n=u[7])&&c.push(new _p(n,h,d,f,s,a,l)),(n=u[6])&&c.push(new _p(n,r,d,f,h,a,l)),(n=u[5])&&c.push(new _p(n,h,i,f,s,d,l)),(n=u[4])&&c.push(new _p(n,r,i,f,h,d,l)),(n=u[3])&&c.push(new _p(n,h,d,o,s,a,f)),(n=u[2])&&c.push(new _p(n,r,d,o,h,a,f)),(n=u[1])&&c.push(new _p(n,h,i,o,s,d,f)),(n=u[0])&&c.push(new _p(n,r,i,o,h,d,f))}return this}function Mp(t){var e,n=[],r=[];this._root&&n.push(new _p(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));while(e=n.pop()){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.z0,c=e.x1,u=e.y1,h=e.z1,d=(s+c)/2,f=(a+u)/2,p=(l+h)/2;(o=i[0])&&n.push(new _p(o,s,a,l,d,f,p)),(o=i[1])&&n.push(new _p(o,d,a,l,c,f,p)),(o=i[2])&&n.push(new _p(o,s,f,l,d,u,p)),(o=i[3])&&n.push(new _p(o,d,f,l,c,u,p)),(o=i[4])&&n.push(new _p(o,s,a,p,d,f,h)),(o=i[5])&&n.push(new _p(o,d,a,p,c,f,h)),(o=i[6])&&n.push(new _p(o,s,f,p,d,u,h)),(o=i[7])&&n.push(new _p(o,d,f,p,c,u,h))}r.push(e)}while(e=r.pop())t(e.node,e.x0,e.y0,e.z0,e.x1,e.y1,e.z1);return this}function Ip(t){return t[0]}function kp(t){return arguments.length?(this._x=t,this):this._x}function Op(t){return t[1]}function Rp(t){return arguments.length?(this._y=t,this):this._y}function Dp(t){return t[2]}function Np(t){return arguments.length?(this._z=t,this):this._z}function Pp(t,e,n,r){var i=new Lp(null==e?Ip:e,null==n?Op:n,null==r?Dp:r,NaN,NaN,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Lp(t,e,n,r,i,o,s,a,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=o,this._x1=s,this._y1=a,this._z1=l,this._root=void 0}function Bp(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}pp.copy=function(){var t,e,n=new dp(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=fp(r),n;t=[{source:r,target:n._root=new Array(4)}];while(r=t.pop())for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=fp(e));return n},pp.add=qf,pp.addAll=Xf,pp.cover=Zf,pp.data=Kf,pp.extent=Jf,pp.find=tp,pp.remove=ep,pp.removeAll=np,pp.root=rp,pp.size=ip,pp.visit=op,pp.visitAfter=sp,pp.x=lp,pp.y=up;var Up=Pp.prototype=Lp.prototype;function Fp(){var t,e,n,r,i,o,s=Sf(-30),a=1,l=1/0,c=.81;function u(r){var o,s=t.length,a=(1===e?jf(t,mf):2===e?hp(t,mf,gf):3===e?Pp(t,mf,gf,yf):null).visitAfter(d);for(i=r,o=0;o<s;++o)n=t[o],a.visit(f)}function h(){if(t){var e,n,r=t.length;for(o=new Array(r),e=0;e<r;++e)n=t[e],o[n.index]=+s(n,e,t)}}function d(t){var n,r,i,s,a,l,c=0,u=0,h=t.length;if(h){for(i=s=a=l=0;l<h;++l)(n=t[l])&&(r=Math.abs(n.value))&&(c+=n.value,u+=r,i+=r*(n.x||0),s+=r*(n.y||0),a+=r*(n.z||0));c*=Math.sqrt(4/h),t.x=i/u,e>1&&(t.y=s/u),e>2&&(t.z=a/u)}else{n=t,n.x=n.data.x,e>1&&(n.y=n.data.y),e>2&&(n.z=n.data.z);do{c+=o[n.data.index]}while(n=n.next)}t.value=c}function f(t,s,u,h,d){if(!t.value)return!0;var f=[u,h,d][e-1],p=t.x-n.x,m=e>1?t.y-n.y:0,g=e>2?t.z-n.z:0,y=f-s,v=p*p+m*m+g*g;if(y*y/c<v)return v<l&&(0===p&&(p=Ef(r),v+=p*p),e>1&&0===m&&(m=Ef(r),v+=m*m),e>2&&0===g&&(g=Ef(r),v+=g*g),v<a&&(v=Math.sqrt(a*v)),n.vx+=p*t.value*i/v,e>1&&(n.vy+=m*t.value*i/v),e>2&&(n.vz+=g*t.value*i/v)),!0;if(!(t.length||v>=l)){(t.data!==n||t.next)&&(0===p&&(p=Ef(r),v+=p*p),e>1&&0===m&&(m=Ef(r),v+=m*m),e>2&&0===g&&(g=Ef(r),v+=g*g),v<a&&(v=Math.sqrt(a*v)));do{t.data!==n&&(y=o[t.data.index]*i/v,n.vx+=p*y,e>1&&(n.vy+=m*y),e>2&&(n.vz+=g*y))}while(t=t.next)}}return u.initialize=function(n,...i){t=n,r=i.find((t=>"function"===typeof t))||Math.random,e=i.find((t=>[1,2,3].includes(t)))||2,h()},u.strength=function(t){return arguments.length?(s="function"===typeof t?t:Sf(+t),h(),u):s},u.distanceMin=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.distanceMax=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u.theta=function(t){return arguments.length?(c=t*t,u):Math.sqrt(c)},u}function zp(t,e,n){var r,i=1;function o(){var o,s,a=r.length,l=0,c=0,u=0;for(o=0;o<a;++o)s=r[o],l+=s.x||0,c+=s.y||0,u+=s.z||0;for(l=(l/a-t)*i,c=(c/a-e)*i,u=(u/a-n)*i,o=0;o<a;++o)s=r[o],l&&(s.x-=l),c&&(s.y-=c),u&&(s.z-=u)}return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.z=function(t){return arguments.length?(n=+t,o):n},o.strength=function(t){return arguments.length?(i=+t,o):i},o}function Vp(t,e,n,r){var i,o,s,a,l=Sf(.1);function c(t){for(var l=0,c=i.length;l<c;++l){var u=i[l],h=u.x-e||1e-6,d=(u.y||0)-n||1e-6,f=(u.z||0)-r||1e-6,p=Math.sqrt(h*h+d*d+f*f),m=(a[l]-p)*s[l]*t/p;u.vx+=h*m,o>1&&(u.vy+=d*m),o>2&&(u.vz+=f*m)}}function u(){if(i){var e,n=i.length;for(s=new Array(n),a=new Array(n),e=0;e<n;++e)a[e]=+t(i[e],e,i),s[e]=isNaN(a[e])?0:+l(i[e],e,i)}}return"function"!==typeof t&&(t=Sf(+t)),null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),c.initialize=function(t,...e){i=t,o=e.find((t=>[1,2,3].includes(t)))||2,u()},c.strength=function(t){return arguments.length?(l="function"===typeof t?t:Sf(+t),u(),c):l},c.radius=function(e){return arguments.length?(t="function"===typeof e?e:Sf(+e),u(),c):t},c.x=function(t){return arguments.length?(e=+t,c):e},c.y=function(t){return arguments.length?(n=+t,c):n},c.z=function(t){return arguments.length?(r=+t,c):r},c}Up.copy=function(){var t,e,n=new Lp(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),r=this._root;if(!r)return n;if(!r.length)return n._root=Bp(r),n;t=[{source:r,target:n._root=new Array(8)}];while(r=t.pop())for(var i=0;i<8;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(8)}):r.target[i]=Bp(e));return n},Up.add=mp,Up.addAll=yp,Up.cover=vp,Up.data=wp,Up.extent=bp,Up.find=Sp,Up.remove=Ep,Up.removeAll=Ap,Up.root=xp,Up.size=Cp,Up.visit=Tp,Up.visitAfter=Mp,Up.x=kp,Up.y=Rp,Up.z=Np;var Hp=n(4747),jp=n(4854);function Wp(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Gp=Wp,$p="object"==typeof global&&global&&global.Object===Object&&global,qp=$p,Yp="object"==typeof self&&self&&self.Object===Object&&self,Xp=qp||Yp||Function("return this")(),Zp=Xp,Kp=function(){return Zp.Date.now()},Jp=Kp,Qp=/\s/;function tm(t){var e=t.length;while(e--&&Qp.test(t.charAt(e)));return e}var em=tm,nm=/^\s+/;function rm(t){return t?t.slice(0,em(t)+1).replace(nm,""):t}var im=rm,om=Zp.Symbol,sm=om,am=Object.prototype,lm=am.hasOwnProperty,cm=am.toString,um=sm?sm.toStringTag:void 0;function hm(t){var e=lm.call(t,um),n=t[um];try{t[um]=void 0;var r=!0}catch(o){}var i=cm.call(t);return r&&(e?t[um]=n:delete t[um]),i}var dm=hm,fm=Object.prototype,pm=fm.toString;function mm(t){return pm.call(t)}var gm=mm,ym="[object Null]",vm="[object Undefined]",wm=sm?sm.toStringTag:void 0;function bm(t){return null==t?void 0===t?vm:ym:wm&&wm in Object(t)?dm(t):gm(t)}var _m=bm;function Sm(t){return null!=t&&"object"==typeof t}var Em=Sm,Am="[object Symbol]";function xm(t){return"symbol"==typeof t||Em(t)&&_m(t)==Am}var Cm=xm,Tm=NaN,Mm=/^[-+]0x[0-9a-f]+$/i,Im=/^0b[01]+$/i,km=/^0o[0-7]+$/i,Om=parseInt;function Rm(t){if("number"==typeof t)return t;if(Cm(t))return Tm;if(Gp(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Gp(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=im(t);var n=Im.test(t);return n||km.test(t)?Om(t.slice(2),n?2:8):Mm.test(t)?Tm:+t}var Dm=Rm,Nm="Expected a function",Pm=Math.max,Lm=Math.min;function Bm(t,e,n){var r,i,o,s,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(Nm);function f(e){var n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n),s}function p(t){return c=t,a=setTimeout(y,e),u?f(t):s}function m(t){var n=t-l,r=t-c,i=e-n;return h?Lm(i,o-r):i}function g(t){var n=t-l,r=t-c;return void 0===l||n>=e||n<0||h&&r>=o}function y(){var t=Jp();if(g(t))return v(t);a=setTimeout(y,m(t))}function v(t){return a=void 0,d&&r?f(t):(r=i=void 0,s)}function w(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0}function b(){return void 0===a?s:v(Jp())}function _(){var t=Jp(),n=g(t);if(r=arguments,i=this,l=t,n){if(void 0===a)return p(l);if(h)return clearTimeout(a),a=setTimeout(y,e),f(l)}return void 0===a&&(a=setTimeout(y,e)),s}return e=Dm(e)||0,Gp(n)&&(u=!!n.leading,h="maxWait"in n,o=h?Pm(Dm(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),_.cancel=w,_.flush=b,_}var Um=Bm;function Fm(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function zm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xm(r.key),r)}}function Hm(t,e,n){return e&&Vm(t.prototype,e),n&&Vm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jm(t,e){return Wm(t)||Fm(t,e)||Gm(t,e)||qm()}function Wm(t){if(Array.isArray(t))return t}function Gm(t,e){if(t){if("string"===typeof t)return $m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$m(t,e):void 0}}function $m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ym(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Xm(t){var e=Ym(t,"string");return"symbol"===typeof e?e:String(e)}var Zm=Hm((function t(e,n){var r=n["default"],i=void 0===r?null:r,o=n.triggerUpdate,s=void 0===o||o,a=n.onChange,l=void 0===a?function(t,e){}:a;zm(this,t),this.name=e,this.defaultVal=i,this.triggerUpdate=s,this.onChange=l}));function Km(t){var e=t.stateInit,n=void 0===e?function(){return{}}:e,r=t.props,i=void 0===r?{}:r,o=t.methods,s=void 0===o?{}:o,a=t.aliases,l=void 0===a?{}:a,c=t.init,u=void 0===c?function(){}:c,h=t.update,d=void 0===h?function(){}:h,f=Object.keys(i).map((function(t){return new Zm(t,i[t])}));return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},n instanceof Function?n(t):n,{initialised:!1}),r={};function i(e){return o(e,t),a(),i}var o=function(t,n){u.call(i,t,e,n),e.initialised=!0},a=Um((function(){e.initialised&&(d.call(i,e,r),r={})}),1);return f.forEach((function(t){function n(t){var n=t.name,o=t.triggerUpdate,s=void 0!==o&&o,l=t.onChange,c=void 0===l?function(t,e){}:l,u=t.defaultVal,h=void 0===u?null:u;return function(t){var o=e[n];if(!arguments.length)return o;var l=void 0===t?h:t;return e[n]=l,c.call(i,l,e,o),!r.hasOwnProperty(n)&&(r[n]=o),s&&a(),i}}i[t.name]=n(t)})),Object.keys(s).forEach((function(t){i[t]=function(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=s[t]).call.apply(n,[i,e].concat(o))}})),Object.entries(l).forEach((function(t){var e=jm(t,2),n=e[0],r=e[1];return i[n]=i[r]})),i.resetProps=function(){return f.forEach((function(t){i[t.name](t.defaultVal)})),i},i.resetProps(),e._rerender=a,i}}var Jm=function(t){return t instanceof Function?t:"string"===typeof t?function(e){return e[t]}:function(e){return t}};function Qm(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function tg(t,e){let n;if(void 0===e)for(const r of t)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function eg(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function ng(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function rg(t,e){if(null==t)return{};var n,r,i=ng(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ig(t,e){return ag(t)||eg(t,e)||cg(t,e)||dg()}function og(t){return sg(t)||lg(t)||cg(t)||hg()}function sg(t){if(Array.isArray(t))return ug(t)}function ag(t){if(Array.isArray(t))return t}function lg(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function cg(t,e){if(t){if("string"===typeof t)return ug(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ug(t,e):void 0}}function ug(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hg(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fg(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function pg(t){var e=fg(t,"string");return"symbol"===typeof e?e:String(e)}var mg=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(e instanceof Array?e.length?e:[void 0]:[e]).map((function(t){return{keyAccessor:t,isProp:!(t instanceof Function)}})),o=t.reduce((function(t,e){var r=t,o=e;return i.forEach((function(t,e){var s,a=t.keyAccessor,l=t.isProp;if(l){var c=o,u=c[a],h=rg(c,[a].map(pg));s=u,o=h}else s=a(o,e);e+1<i.length?(r.hasOwnProperty(s)||(r[s]={}),r=r[s]):n?(r.hasOwnProperty(s)||(r[s]=[]),r[s].push(o)):r[s]=o})),t}),{});n instanceof Function&&function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(e).forEach((function(t){return e[t]=n(e[t])})):Object.values(e).forEach((function(e){return t(e,r+1)}))}(o);var s=o;return r&&(s=[],function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?s.push({keys:n,vals:e}):Object.entries(e).forEach((function(e){var r=ig(e,2),i=r[0],o=r[1];return t(o,[].concat(og(n),[i]))}))}(o),e instanceof Array&&0===e.length&&1===s.length&&(s[0].keys=[])),s};function gg(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function yg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yg(Object(n),!0).forEach((function(e){wg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wg(t,e,n){return e=Rg(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bg(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function _g(t,e){if(null==t)return{};var n,r,i=bg(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Sg(t,e){return xg(t)||gg(t,e)||Tg(t,e)||kg()}function Eg(t){return Ag(t)||Cg(t)||Tg(t)||Ig()}function Ag(t){if(Array.isArray(t))return Mg(t)}function xg(t){if(Array.isArray(t))return t}function Cg(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Tg(t,e){if(t){if("string"===typeof t)return Mg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mg(t,e):void 0}}function Mg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ig(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Og(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Rg(t){var e=Og(t,"string");return"symbol"===typeof e?e:String(e)}var Dg=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function Ng(t,e,n){var r={enter:[],update:[],exit:[]};if(n){var i=mg(t,n,!1),o=mg(e,n,!1),s=Object.assign({},i,o);Object.entries(s).forEach((function(t){var e=Sg(t,2),n=e[0],s=e[1],a=i.hasOwnProperty(n)?o.hasOwnProperty(n)?"update":"exit":"enter";r[a].push("update"===a?[i[n],o[n]]:s)}))}else{var a=new Set(t),l=new Set(e);new Set([].concat(Eg(a),Eg(l))).forEach((function(t){var e=a.has(t)?l.has(t)?"update":"exit":"enter";r[e].push("update"===e?[t,t]:t)}))}return r}function Pg(t,e,n){var r=n.objBindAttr,i=void 0===r?"__obj":r,o=n.dataBindAttr,s=void 0===o?"__data":o,a=n.idAccessor,l=n.purge,c=void 0!==l&&l,u=function(t){return t.hasOwnProperty(s)},h=e.filter((function(t){return!u(t)})),d=e.filter(u).map((function(t){return t[s]})),f=t,p=c?{enter:f,exit:d,update:[]}:Ng(d,f,a);return p.update=p.update.map((function(t){var e=Sg(t,2),n=e[0],r=e[1];return n!==r&&(r[i]=n[i],r[i][s]=r),r})),p.exit=p.exit.concat(h.map((function(t){return wg({},i,t)}))),p}function Lg(t,e,n,r,i){var o=i.createObj,s=void 0===o?function(t){return{}}:o,a=i.updateObj,l=void 0===a?function(t,e){}:a,c=i.exitObj,u=void 0===c?function(t){}:c,h=i.objBindAttr,d=void 0===h?"__obj":h,f=i.dataBindAttr,p=void 0===f?"__data":f,m=_g(i,Dg),g=Pg(t,e,vg({objBindAttr:d,dataBindAttr:p},m)),y=g.enter,v=g.update,w=g.exit;w.forEach((function(t){var e=t[d];delete t[d],u(e),r(e)}));var b=S(y),_=[].concat(Eg(y),Eg(v));function S(t){var e=[];return t.forEach((function(t){var n=s(t);n&&(n[p]=t,t[d]=n,e.push(n))})),e}function E(t){t.forEach((function(t){var e=t[d];e&&(e[p]=t,l(e,t))}))}E(_),b.forEach(n)}class Bg extends Map{constructor(t,e=Hg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[n,r]of t)this.set(n,r)}get(t){return super.get(Fg(this,t))}has(t){return super.has(Fg(this,t))}set(t,e){return super.set(zg(this,t),e)}delete(t){return super.delete(Vg(this,t))}}class Ug extends Set{constructor(t,e=Hg){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(Fg(this,t))}add(t){return super.add(zg(this,t))}delete(t){return super.delete(Vg(this,t))}}function Fg({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zg({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Vg({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Hg(t){return null!==t&&"object"===typeof t?t.valueOf():t}function jg(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Wg=Symbol("implicit");function Gg(){var t=new Bg,e=[],n=[],r=Wg;function i(i){let o=t.get(i);if(void 0===o){if(r!==Wg)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Bg;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Gg(e,n).unknown(r)},jg.apply(i,arguments),i}function $g(t){var e=t.length/6|0,n=new Array(e),r=0;while(r<e)n[r]="#"+t.slice(6*r,6*++r);return n}var qg=$g("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Yg(t){return Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yg(t)}var Xg=/^\s+/,Zg=/\s+$/;function Kg(t,e){if(t=t||"",e=e||{},t instanceof Kg)return t;if(!(this instanceof Kg))return new Kg(t,e);var n=Jg(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Jg(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return"string"==typeof t&&(t=Ny(t)),"object"==Yg(t)&&(Dy(t.r)&&Dy(t.g)&&Dy(t.b)?(e=Qg(t.r,t.g,t.b),s=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):Dy(t.h)&&Dy(t.s)&&Dy(t.v)?(r=Iy(t.s),i=Iy(t.v),e=ry(t.h,r,i),s=!0,a="hsv"):Dy(t.h)&&Dy(t.s)&&Dy(t.l)&&(r=Iy(t.s),o=Iy(t.l),e=ey(t.h,r,o),s=!0,a="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=Sy(n),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function Qg(t,e,n){return{r:255*Ey(t,255),g:255*Ey(e,255),b:255*Ey(n,255)}}function ty(t,e,n){t=Ey(t,255),e=Ey(e,255),n=Ey(n,255);var r,i,o=Math.max(t,e,n),s=Math.min(t,e,n),a=(o+s)/2;if(o==s)r=i=0;else{var l=o-s;switch(i=a>.5?l/(2-o-s):l/(o+s),o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4;break}r/=6}return{h:r,s:i,l:a}}function ey(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=Ey(t,360),e=Ey(e,100),n=Ey(n,100),0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=s(l,a,t+1/3),i=s(l,a,t),o=s(l,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}function ny(t,e,n){t=Ey(t,255),e=Ey(e,255),n=Ey(n,255);var r,i,o=Math.max(t,e,n),s=Math.min(t,e,n),a=o,l=o-s;if(i=0===o?0:l/o,o==s)r=0;else{switch(o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4;break}r/=6}return{h:r,s:i,v:a}}function ry(t,e,n){t=6*Ey(t,360),e=Ey(e,100),n=Ey(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),l=r%6,c=[n,s,o,o,a,n][l],u=[a,n,n,s,o,o][l],h=[o,o,a,n,n,s][l];return{r:255*c,g:255*u,b:255*h}}function iy(t,e,n,r){var i=[My(Math.round(t).toString(16)),My(Math.round(e).toString(16)),My(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function oy(t,e,n,r,i){var o=[My(Math.round(t).toString(16)),My(Math.round(e).toString(16)),My(Math.round(n).toString(16)),My(ky(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function sy(t,e,n,r){var i=[My(ky(r)),My(Math.round(t).toString(16)),My(Math.round(e).toString(16)),My(Math.round(n).toString(16))];return i.join("")}function ay(t,e){e=0===e?0:e||10;var n=Kg(t).toHsl();return n.s-=e/100,n.s=Ay(n.s),Kg(n)}function ly(t,e){e=0===e?0:e||10;var n=Kg(t).toHsl();return n.s+=e/100,n.s=Ay(n.s),Kg(n)}function cy(t){return Kg(t).desaturate(100)}function uy(t,e){e=0===e?0:e||10;var n=Kg(t).toHsl();return n.l+=e/100,n.l=Ay(n.l),Kg(n)}function hy(t,e){e=0===e?0:e||10;var n=Kg(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),Kg(n)}function dy(t,e){e=0===e?0:e||10;var n=Kg(t).toHsl();return n.l-=e/100,n.l=Ay(n.l),Kg(n)}function fy(t,e){var n=Kg(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,Kg(n)}function py(t){var e=Kg(t).toHsl();return e.h=(e.h+180)%360,Kg(e)}function my(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Kg(t).toHsl(),r=[Kg(t)],i=360/e,o=1;o<e;o++)r.push(Kg({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function gy(t){var e=Kg(t).toHsl(),n=e.h;return[Kg(t),Kg({h:(n+72)%360,s:e.s,l:e.l}),Kg({h:(n+216)%360,s:e.s,l:e.l})]}function yy(t,e,n){e=e||6,n=n||30;var r=Kg(t).toHsl(),i=360/n,o=[Kg(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(Kg(r));return o}function vy(t,e){e=e||6;var n=Kg(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;while(e--)s.push(Kg({h:r,s:i,v:o})),o=(o+a)%1;return s}Kg.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r,i,o,s=this.toRgb();return t=s.r/255,e=s.g/255,n=s.b/255,r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*o},setAlpha:function(t){return this._a=Sy(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=ny(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=ny(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=ty(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=ty(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return iy(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return oy(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Ey(this._r,255))+"%",g:Math.round(100*Ey(this._g,255))+"%",b:Math.round(100*Ey(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Ey(this._r,255))+"%, "+Math.round(100*Ey(this._g,255))+"%, "+Math.round(100*Ey(this._b,255))+"%)":"rgba("+Math.round(100*Ey(this._r,255))+"%, "+Math.round(100*Ey(this._g,255))+"%, "+Math.round(100*Ey(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(by[iy(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+sy(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=Kg(t);n="#"+sy(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!e&&r&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return i?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Kg(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(uy,arguments)},brighten:function(){return this._applyModification(hy,arguments)},darken:function(){return this._applyModification(dy,arguments)},desaturate:function(){return this._applyModification(ay,arguments)},saturate:function(){return this._applyModification(ly,arguments)},greyscale:function(){return this._applyModification(cy,arguments)},spin:function(){return this._applyModification(fy,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(yy,arguments)},complement:function(){return this._applyCombination(py,arguments)},monochromatic:function(){return this._applyCombination(vy,arguments)},splitcomplement:function(){return this._applyCombination(gy,arguments)},triad:function(){return this._applyCombination(my,[3])},tetrad:function(){return this._applyCombination(my,[4])}},Kg.fromRatio=function(t,e){if("object"==Yg(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:Iy(t[r]));t=n}return Kg(t,e)},Kg.equals=function(t,e){return!(!t||!e)&&Kg(t).toRgbString()==Kg(e).toRgbString()},Kg.random=function(){return Kg.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Kg.mix=function(t,e,n){n=0===n?0:n||50;var r=Kg(t).toRgb(),i=Kg(e).toRgb(),o=n/100,s={r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a};return Kg(s)},Kg.readability=function(t,e){var n=Kg(t),r=Kg(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Kg.isReadable=function(t,e,n){var r,i,o=Kg.readability(t,e);switch(i=!1,r=Py(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7;break}return i},Kg.mostReadable=function(t,e,n){var r,i,o,s,a=null,l=0;n=n||{},i=n.includeFallbackColors,o=n.level,s=n.size;for(var c=0;c<e.length;c++)r=Kg.readability(t,e[c]),r>l&&(l=r,a=Kg(e[c]));return Kg.isReadable(t,a,{level:o,size:s})||!i?a:(n.includeFallbackColors=!1,Kg.mostReadable(t,["#fff","#000"],n))};var wy=Kg.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},by=Kg.hexNames=_y(wy);function _y(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Sy(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Ey(t,e){Cy(t)&&(t="100%");var n=Ty(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Ay(t){return Math.min(1,Math.max(0,t))}function xy(t){return parseInt(t,16)}function Cy(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function Ty(t){return"string"===typeof t&&-1!=t.indexOf("%")}function My(t){return 1==t.length?"0"+t:""+t}function Iy(t){return t<=1&&(t=100*t+"%"),t}function ky(t){return Math.round(255*parseFloat(t)).toString(16)}function Oy(t){return xy(t)/255}var Ry=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Dy(t){return!!Ry.CSS_UNIT.exec(t)}function Ny(t){t=t.replace(Xg,"").replace(Zg,"").toLowerCase();var e,n=!1;if(wy[t])t=wy[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=Ry.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=Ry.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Ry.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=Ry.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Ry.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=Ry.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Ry.hex8.exec(t))?{r:xy(e[1]),g:xy(e[2]),b:xy(e[3]),a:Oy(e[4]),format:n?"name":"hex8"}:(e=Ry.hex6.exec(t))?{r:xy(e[1]),g:xy(e[2]),b:xy(e[3]),format:n?"name":"hex"}:(e=Ry.hex4.exec(t))?{r:xy(e[1]+""+e[1]),g:xy(e[2]+""+e[2]),b:xy(e[3]+""+e[3]),a:Oy(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=Ry.hex3.exec(t))&&{r:xy(e[1]+""+e[1]),g:xy(e[2]+""+e[2]),b:xy(e[3]+""+e[3]),format:n?"name":"hex"}}function Py(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}function Ly(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function By(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Uy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?By(Object(n),!0).forEach((function(e){jy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):By(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fy(t){return Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(t)}function zy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uv(r.key),r)}}function Hy(t,e,n){return e&&Vy(t.prototype,e),n&&Vy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jy(t,e,n){return e=uv(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wy(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$y(t,e)}function Gy(t){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gy(t)}function $y(t,e){return $y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$y(t,e)}function qy(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Yy(t,e,n){return Yy=qy()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&$y(o,n.prototype),o},Yy.apply(null,arguments)}function Xy(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Zy(t,e){if(null==t)return{};var n,r,i=Xy(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ky(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jy(t,e){if(e&&("object"===typeof e||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ky(t)}function Qy(t){var e=qy();return function(){var n,r=Gy(t);if(e){var i=Gy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jy(this,n)}}function tv(t,e){return rv(t)||Ly(t,e)||ov(t,e)||lv()}function ev(t){return nv(t)||iv(t)||ov(t)||av()}function nv(t){if(Array.isArray(t))return sv(t)}function rv(t){if(Array.isArray(t))return t}function iv(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ov(t,e){if(t){if("string"===typeof t)return sv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sv(t,e):void 0}}function sv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function av(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lv(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cv(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function uv(t){var e=cv(t,"string");return"symbol"===typeof e?e:String(e)}var hv=function t(e){e instanceof Array?e.forEach(t):(e.map&&e.map.dispose(),e.dispose())},dv=function t(e){e.geometry&&e.geometry.dispose(),e.material&&hv(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(t)},fv=function(t){while(t.children.length){var e=t.children[0];t.remove(e),dv(e)}},pv=["objFilter"];function mv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.objFilter,i=void 0===r?function(){return!0}:r,o=Zy(n,pv);return Lg(t,e.children.filter(i),(function(t){return e.add(t)}),(function(t){e.remove(t),fv(t)}),Uy({objBindAttr:"__threeObj"},o))}var gv=function(t){return isNaN(t)?parseInt(Kg(t).toHex(),16):t},yv=function(t){return isNaN(t)?Kg(t).getAlpha():1},vv=Gg(qg);function wv(t,e,n){e&&"string"===typeof n&&t.filter((function(t){return!t[n]})).forEach((function(t){t[n]=vv(e(t))}))}function bv(t,e){var n=t.nodes,r=t.links,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.nodeFilter,s=void 0===o?function(){return!0}:o,a=i.onLoopError,l=void 0===a?function(t){throw"Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "),".")}:a,c={};n.forEach((function(t){return c[e(t)]={data:t,out:[],depth:-1,skip:!s(t)}})),r.forEach((function(t){var n=t.source,r=t.target,i=l(n),o=l(r);if(!c.hasOwnProperty(i))throw"Missing source node with id: ".concat(i);if(!c.hasOwnProperty(o))throw"Missing target node with id: ".concat(o);var s=c[i],a=c[o];function l(t){return"object"===Fy(t)?e(t):t}s.out.push(a)}));var u=[];d(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(ev(Object.entries(c).filter((function(t){var e=tv(t,2),n=e[1];return!n.skip})).map((function(t){var e=tv(t,2),n=e[0],r=e[1];return jy({},n,r.depth)})))));return h;function d(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=function(){var i=t[o];if(-1!==n.indexOf(i)){var s=[].concat(ev(n.slice(n.indexOf(i))),[i]).map((function(t){return e(t.data)}));return u.some((function(t){return t.length===s.length&&t.every((function(t,e){return t===s[e]}))}))||(u.push(s),l(s)),"continue"}r>i.depth&&(i.depth=r,d(i.out,[].concat(ev(n),[i]),r+(i.skip?0:1)))},o=0,s=t.length;o<s;o++)i()}}var _v=window.THREE?window.THREE:{Group:Uu,Mesh:qi,MeshLambertMaterial:Dh,Color:fi,BufferGeometry:Ii,BufferAttribute:vi,Matrix4:Er,Vector3:qn,SphereGeometry:Oh,CylinderGeometry:Ih,TubeGeometry:Rh,ConeGeometry:kh,Line:eh,LineBasicMaterial:Xu,QuadraticBezierCurve3:Ch,CubicBezierCurve3:Sh,Box3:Zn},Sv={graph:Hp,forcelayout:jp},Ev=2,Av=(new _v.BufferGeometry).setAttribute?"setAttribute":"addAttribute",xv=(new _v.BufferGeometry).applyMatrix4?"applyMatrix4":"applyMatrix",Cv=Km({props:{jsonUrl:{onChange:function(t,e){var n=this;t&&!e.fetchingJson&&(e.fetchingJson=!0,e.onLoading(),fetch(t).then((function(t){return t.json()})).then((function(t){e.fetchingJson=!1,e.onFinishLoading(t),n.graphData(t)})))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(t,e){e.engineRunning=!1}},numDimensions:{default:3,onChange:function(t,e){var n=e.d3ForceLayout.force("charge");function r(t,e){t.forEach((function(t){delete t[e],delete t["v".concat(e)]}))}n&&n.strength(t>2?-60:-30),t<3&&r(e.graphData.nodes,"z"),t<2&&r(e.graphData.nodes,"y")}},dagMode:{onChange:function(t,e){!t&&"d3"===e.forceEngine&&(e.graphData.nodes||[]).forEach((function(t){return t.fx=t.fy=t.fz=void 0}))}},dagLevelDistance:{},dagNodeFilter:{default:function(t){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaDecay(t)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.alphaTarget(t)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(t,e){e.d3ForceLayout.velocityDecay(t)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(t){return t._flushObjects=!0,t._rerender(),this},d3Force:function(t,e,n){return void 0===n?t.d3ForceLayout.force(e):(t.d3ForceLayout.force(e,n),this)},d3ReheatSimulation:function(t){return t.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(t){return t.cntTicks=0,t.startTickTime=new Date,t.engineRunning=!0,this},tickFrame:function(t){var e="ngraph"!==t.forceEngine;return t.engineRunning&&n(),r(),i(),this;function n(){++t.cntTicks>t.cooldownTicks||new Date-t.startTickTime>t.cooldownTime||e&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin?(t.engineRunning=!1,t.onEngineStop()):(t.layout[e?"tick":"step"](),t.onEngineTick());var n=Jm(t.nodeThreeObjectExtend);t.graphData.nodes.forEach((function(r){var i=r.__threeObj;if(i){var o=e?r:t.layout.getNodePosition(r[t.nodeId]),s=n(r);t.nodePositionUpdate&&t.nodePositionUpdate(s?i.children[0]:i,{x:o.x,y:o.y,z:o.z},r)&&!s||(i.position.x=o.x,i.position.y=o.y||0,i.position.z=o.z||0)}}));var r=Jm(t.linkWidth),i=Jm(t.linkCurvature),o=Jm(t.linkCurveRotation),s=Jm(t.linkThreeObjectExtend);function a(n){var r=e?n:t.layout.getLinkPosition(t.layout.graph.getLink(n.source,n.target).id),s=r[e?"source":"from"],a=r[e?"target":"to"];if(s&&a&&s.hasOwnProperty("x")&&a.hasOwnProperty("x")){var l=i(n);if(l){var c,u=new _v.Vector3(s.x,s.y||0,s.z||0),h=new _v.Vector3(a.x,a.y||0,a.z||0),d=u.distanceTo(h),f=o(n);if(d>0){var p=a.x-s.x,m=a.y-s.y||0,g=(new _v.Vector3).subVectors(h,u),y=g.clone().multiplyScalar(l).cross(0!==p||0!==m?new _v.Vector3(0,0,1):new _v.Vector3(0,1,0)).applyAxisAngle(g.normalize(),f).add((new _v.Vector3).addVectors(u,h).divideScalar(2));c=new _v.QuadraticBezierCurve3(u,y,h)}else{var v=70*l,w=-f,b=w+Math.PI/2;c=new _v.CubicBezierCurve3(u,new _v.Vector3(v*Math.cos(b),v*Math.sin(b),0).add(u),new _v.Vector3(v*Math.cos(w),v*Math.sin(w),0).add(u),h)}n.__curve=c}else n.__curve=null}}t.graphData.links.forEach((function(n){var i=n.__lineObj;if(i){var o=e?n:t.layout.getLinkPosition(t.layout.graph.getLink(n.source,n.target).id),l=o[e?"source":"from"],c=o[e?"target":"to"];if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){a(n);var u=s(n);if(!t.linkPositionUpdate||!t.linkPositionUpdate(u?i.children[1]:i,{start:{x:l.x,y:l.y,z:l.z},end:{x:c.x,y:c.y,z:c.z}},n)||u){var h=30,d=n.__curve,f=i.children.length?i.children[0]:i;if("Line"===f.type){if(d)f.geometry.setFromPoints(d.getPoints(h));else{var p=f.geometry.getAttribute("position");p&&p.array&&6===p.array.length||f.geometry[Av]("position",p=new _v.BufferAttribute(new Float32Array(6),3)),p.array[0]=l.x,p.array[1]=l.y||0,p.array[2]=l.z||0,p.array[3]=c.x,p.array[4]=c.y||0,p.array[5]=c.z||0,p.needsUpdate=!0}f.geometry.computeBoundingSphere()}else if("Mesh"===f.type)if(d){f.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(f.position.set(0,0,0),f.rotation.set(0,0,0),f.scale.set(1,1,1));var m=Math.ceil(10*r(n))/10,g=m/2,y=new _v.TubeGeometry(d,h,g,t.linkResolution,!1);f.geometry.dispose(),f.geometry=y}else{if(!f.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var v=Math.ceil(10*r(n))/10,w=v/2,b=new _v.CylinderGeometry(w,w,1,t.linkResolution,1,!1);b[xv]((new _v.Matrix4).makeTranslation(0,.5,0)),b[xv]((new _v.Matrix4).makeRotationX(Math.PI/2)),f.geometry.dispose(),f.geometry=b}var _=new _v.Vector3(l.x,l.y||0,l.z||0),S=new _v.Vector3(c.x,c.y||0,c.z||0),E=_.distanceTo(S);f.position.x=_.x,f.position.y=_.y,f.position.z=_.z,f.scale.z=E,f.parent.localToWorld(S),f.lookAt(S)}}}}}))}function r(){var n=Jm(t.linkDirectionalArrowRelPos),r=Jm(t.linkDirectionalArrowLength),i=Jm(t.nodeVal);t.graphData.links.forEach((function(o){var s=o.__arrowObj;if(s){var a=e?o:t.layout.getLinkPosition(t.layout.graph.getLink(o.source,o.target).id),l=a[e?"source":"from"],c=a[e?"target":"to"];if(l&&c&&l.hasOwnProperty("x")&&c.hasOwnProperty("x")){var u=Math.cbrt(Math.max(0,i(l)||1))*t.nodeRelSize,h=Math.cbrt(Math.max(0,i(c)||1))*t.nodeRelSize,d=r(o),f=n(o),p=o.__curve?function(t){return o.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",l,c,t),y:e("y",l,c,t),z:e("z",l,c,t)}},m=o.__curve?o.__curve.getLength():Math.sqrt(["x","y","z"].map((function(t){return Math.pow((c[t]||0)-(l[t]||0),2)})).reduce((function(t,e){return t+e}),0)),g=u+d+(m-u-h-d)*f,y=p(g/m),v=p((g-d)/m);["x","y","z"].forEach((function(t){return s.position[t]=v[t]}));var w=Yy(_v.Vector3,ev(["x","y","z"].map((function(t){return y[t]}))));s.parent.localToWorld(w),s.lookAt(w)}}}))}function i(){var n=Jm(t.linkDirectionalParticleSpeed);t.graphData.links.forEach((function(r){var i=r.__photonsObj&&r.__photonsObj.children,o=r.__singleHopPhotonsObj&&r.__singleHopPhotonsObj.children;if(o&&o.length||i&&i.length){var s=e?r:t.layout.getLinkPosition(t.layout.graph.getLink(r.source,r.target).id),a=s[e?"source":"from"],l=s[e?"target":"to"];if(a&&l&&a.hasOwnProperty("x")&&l.hasOwnProperty("x")){var c=n(r),u=r.__curve?function(t){return r.__curve.getPoint(t)}:function(t){var e=function(t,e,n,r){return e[t]+(n[t]-e[t])*r||0};return{x:e("x",a,l,t),y:e("y",a,l,t),z:e("z",a,l,t)}},h=[].concat(ev(i||[]),ev(o||[]));h.forEach((function(t,e){var n="singleHopPhotons"===t.parent.__linkThreeObjType;if(t.hasOwnProperty("__progressRatio")||(t.__progressRatio=n?0:e/i.length),t.__progressRatio+=c,t.__progressRatio>=1){if(n)return t.parent.remove(t),void fv(t);t.__progressRatio=t.__progressRatio%1}var r=t.__progressRatio,o=u(r);["x","y","z"].forEach((function(e){return t.position[e]=o[e]}))}))}}}))}},emitParticle:function(t,e){if(e&&t.graphData.links.includes(e)){if(!e.__singleHopPhotonsObj){var n=new _v.Group;n.__linkThreeObjType="singleHopPhotons",e.__singleHopPhotonsObj=n,t.graphScene.add(n)}var r=Jm(t.linkDirectionalParticleWidth),i=Math.ceil(10*r(e))/10/2,o=t.linkDirectionalParticleResolution,s=new _v.SphereGeometry(i,o,o),a=Jm(t.linkColor),l=Jm(t.linkDirectionalParticleColor),c=l(e)||a(e)||"#f0f0f0",u=new _v.Color(gv(c)),h=3*t.linkOpacity,d=new _v.MeshLambertMaterial({color:u,transparent:!0,opacity:h});e.__singleHopPhotonsObj.add(new _v.Mesh(s,d))}return this},getGraphBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!t.initialised)return null;var n=function t(n){var r=[];if(n.geometry){n.geometry.computeBoundingBox();var i=new _v.Box3;i.copy(n.geometry.boundingBox).applyMatrix4(n.matrixWorld),r.push(i)}return r.concat.apply(r,ev((n.children||[]).filter((function(t){return!t.hasOwnProperty("__graphObjType")||"node"===t.__graphObjType&&e(t.__data)})).map(t)))}(t.graphScene);return n.length?Object.assign.apply(Object,ev(["x","y","z"].map((function(t){return jy({},t,[Qm(n,(function(e){return e.min[t]})),tg(n,(function(e){return e.max[t]}))])})))):null}},stateInit:function(){return{d3ForceLayout:_f().force("link",Cf()).force("charge",Fp()).force("center",zp()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(t,e){e.graphScene=t},update:function(t,e){var n=function(t){return t.some((function(t){return e.hasOwnProperty(t)}))};if(t.engineRunning=!1,t.onUpdate(),null!==t.nodeAutoColorBy&&n(["nodeAutoColorBy","graphData","nodeColor"])&&wv(t.graphData.nodes,Jm(t.nodeAutoColorBy),t.nodeColor),null!==t.linkAutoColorBy&&n(["linkAutoColorBy","graphData","linkColor"])&&wv(t.graphData.links,Jm(t.linkAutoColorBy),t.linkColor),t._flushObjects||n(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var r=Jm(t.nodeThreeObject),i=Jm(t.nodeThreeObjectExtend),o=Jm(t.nodeVal),s=Jm(t.nodeColor),a=Jm(t.nodeVisibility),l={},c={};mv(t.graphData.nodes.filter(a),t.graphScene,{purge:t._flushObjects||n(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(t){return"node"===t.__graphObjType},createObj:function(e){var n,o=r(e),s=i(e);return o&&t.nodeThreeObject===o&&(o=o.clone()),o&&!s?n=o:(n=new _v.Mesh,n.__graphDefaultObj=!0,o&&s&&n.add(o)),n.__graphObjType="node",n},updateObj:function(e,n){if(e.__graphDefaultObj){var r=o(n)||1,i=Math.cbrt(r)*t.nodeRelSize,a=t.nodeResolution;e.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&e.geometry.parameters.radius===i&&e.geometry.parameters.widthSegments===a||(l.hasOwnProperty(r)||(l[r]=new _v.SphereGeometry(i,a,a)),e.geometry.dispose(),e.geometry=l[r]);var u=s(n),h=new _v.Color(gv(u||"#ffffaa")),d=t.nodeOpacity*yv(u);"MeshLambertMaterial"===e.material.type&&e.material.color.equals(h)&&e.material.opacity===d||(c.hasOwnProperty(u)||(c[u]=new _v.MeshLambertMaterial({color:h,transparent:!0,opacity:d})),e.material.dispose(),e.material=c[u])}}})}if(t._flushObjects||n(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var u=Jm(t.linkThreeObject),h=Jm(t.linkThreeObjectExtend),d=Jm(t.linkMaterial),f=Jm(t.linkVisibility),p=Jm(t.linkColor),m=Jm(t.linkWidth),g={},y={},v={},w=t.graphData.links.filter(f);if(mv(w,t.graphScene,{objBindAttr:"__lineObj",purge:t._flushObjects||n(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(t){return"link"===t.__graphObjType},exitObj:function(t){var e=t.__data&&t.__data.__singleHopPhotonsObj;e&&(e.parent.remove(e),fv(e),delete t.__data.__singleHopPhotonsObj)},createObj:function(e){var n,r,i=u(e),o=h(e);if(i&&t.linkThreeObject===i&&(i=i.clone()),!i||o){var s=!!m(e);if(s)n=new _v.Mesh;else{var a=new _v.BufferGeometry;a[Av]("position",new _v.BufferAttribute(new Float32Array(6),3)),n=new _v.Line(a)}}return i?o?(r=new _v.Group,r.__graphDefaultObj=!0,r.add(n),r.add(i)):r=i:(r=n,r.__graphDefaultObj=!0),r.renderOrder=10,r.__graphObjType="link",r},updateObj:function(e,n){if(e.__graphDefaultObj){var r=e.children.length?e.children[0]:e,i=Math.ceil(10*m(n))/10,o=!!i;if(o){var s=i/2,a=t.linkResolution;if(!r.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||r.geometry.parameters.radiusTop!==s||r.geometry.parameters.radialSegments!==a){if(!g.hasOwnProperty(i)){var l=new _v.CylinderGeometry(s,s,1,a,1,!1);l[xv]((new _v.Matrix4).makeTranslation(0,.5,0)),l[xv]((new _v.Matrix4).makeRotationX(Math.PI/2)),g[i]=l}r.geometry.dispose(),r.geometry=g[i]}}var c=d(n);if(c)r.material=c;else{var u=p(n),h=new _v.Color(gv(u||"#f0f0f0")),f=t.linkOpacity*yv(u),w=o?"MeshLambertMaterial":"LineBasicMaterial";if(r.material.type!==w||!r.material.color.equals(h)||r.material.opacity!==f){var b=o?y:v;b.hasOwnProperty(u)||(b[u]=new _v[w]({color:h,transparent:f<1,opacity:f,depthWrite:f>=1})),r.material.dispose(),r.material=b[u]}}}}}),t.linkDirectionalArrowLength||e.hasOwnProperty("linkDirectionalArrowLength")){var b=Jm(t.linkDirectionalArrowLength),_=Jm(t.linkDirectionalArrowColor);mv(w.filter(b),t.graphScene,{objBindAttr:"__arrowObj",objFilter:function(t){return"arrow"===t.__linkThreeObjType},createObj:function(){var t=new _v.Mesh(void 0,new _v.MeshLambertMaterial({transparent:!0}));return t.__linkThreeObjType="arrow",t},updateObj:function(e,n){var r=b(n),i=t.linkDirectionalArrowResolution;if(!e.geometry.type.match(/^Cone(Buffer)?Geometry$/)||e.geometry.parameters.height!==r||e.geometry.parameters.radialSegments!==i){var o=new _v.ConeGeometry(.25*r,r,i);o.translate(0,r/2,0),o.rotateX(Math.PI/2),e.geometry.dispose(),e.geometry=o}var s=_(n)||p(n)||"#f0f0f0";e.material.color=new _v.Color(gv(s)),e.material.opacity=3*t.linkOpacity*yv(s)}})}if(t.linkDirectionalParticles||e.hasOwnProperty("linkDirectionalParticles")){var S=Jm(t.linkDirectionalParticles),E=Jm(t.linkDirectionalParticleWidth),A=Jm(t.linkDirectionalParticleColor),x={},C={};mv(w.filter(S),t.graphScene,{objBindAttr:"__photonsObj",objFilter:function(t){return"photons"===t.__linkThreeObjType},createObj:function(){var t=new _v.Group;return t.__linkThreeObjType="photons",t},updateObj:function(e,n){var r,i=Math.round(Math.abs(S(n))),o=!!e.children.length&&e.children[0],s=Math.ceil(10*E(n))/10/2,a=t.linkDirectionalParticleResolution;o&&o.geometry.parameters.radius===s&&o.geometry.parameters.widthSegments===a?r=o.geometry:(C.hasOwnProperty(s)||(C[s]=new _v.SphereGeometry(s,a,a)),r=C[s],o&&o.geometry.dispose());var l,c=A(n)||p(n)||"#f0f0f0",u=new _v.Color(gv(c)),h=3*t.linkOpacity;o&&o.material.color.equals(u)&&o.material.opacity===h?l=o.material:(x.hasOwnProperty(c)||(x[c]=new _v.MeshLambertMaterial({color:u,transparent:!0,opacity:h})),l=x[c],o&&o.material.dispose()),mv(ev(new Array(i)).map((function(t,e){return{idx:e}})),e,{idAccessor:function(t){return t.idx},createObj:function(){return new _v.Mesh(r,l)},updateObj:function(t){t.geometry=r,t.material=l}})}})}}if(t._flushObjects=!1,n(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){t.engineRunning=!1,t.graphData.links.forEach((function(e){e.source=e[t.linkSource],e.target=e[t.linkTarget]}));var T,M="ngraph"!==t.forceEngine;if(M){(T=t.d3ForceLayout).stop().alpha(1).numDimensions(t.numDimensions).nodes(t.graphData.nodes);var I=t.d3ForceLayout.force("link");I&&I.id((function(e){return e[t.nodeId]})).links(t.graphData.links);var k=t.dagMode&&bv(t.graphData,(function(e){return e[t.nodeId]}),{nodeFilter:t.dagNodeFilter,onLoopError:t.onDagError||void 0}),O=Math.max.apply(Math,ev(Object.values(k||[]))),R=t.dagLevelDistance||t.graphData.nodes.length/(O||1)*Ev*(-1!==["radialin","radialout"].indexOf(t.dagMode)?.7:1);if(t.dagMode){var D=function(e,n){return function(r){return e?(k[r[t.nodeId]]-O/2)*R*(n?-1:1):void 0}},N=D(-1!==["lr","rl"].indexOf(t.dagMode),"rl"===t.dagMode),P=D(-1!==["td","bu"].indexOf(t.dagMode),"td"===t.dagMode),L=D(-1!==["zin","zout"].indexOf(t.dagMode),"zout"===t.dagMode);t.graphData.nodes.filter(t.dagNodeFilter).forEach((function(t){t.fx=N(t),t.fy=P(t),t.fz=L(t)}))}t.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(t.dagMode)?Vp((function(e){var n=k[e[t.nodeId]]||-1;return("radialin"===t.dagMode?O-n:n)*R})).strength((function(e){return t.dagNodeFilter(e)?1:0})):null)}else{var B=Sv.graph();t.graphData.nodes.forEach((function(e){B.addNode(e[t.nodeId])})),t.graphData.links.forEach((function(t){B.addLink(t.source,t.target)})),T=Sv.forcelayout(B,Uy({dimensions:t.numDimensions},t.ngraphPhysics)),T.graph=B}for(var U=0;U<t.warmupTicks&&!(M&&t.d3AlphaMin>0&&t.d3ForceLayout.alpha()<t.d3AlphaMin);U++)T[M?"tick":"step"]();t.layout=T,this.resetCountdown()}t.engineRunning=!0,t.onFinishUpdate()}});function Tv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e){Wy(i,e);var r=Qy(i);function i(){var e;zy(this,i);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return e=r.call.apply(r,[this].concat(s)),e.__kapsuleInstance=t().apply(void 0,[].concat(ev(n?[Ky(e)]:[]),s)),e}return Hy(i)}(e);return Object.keys(t()).forEach((function(t){return r.prototype[t]=function(){var e,n=(e=this.__kapsuleInstance)[t].apply(e,arguments);return n===this.__kapsuleInstance?this:n}})),r}var Mv=window.THREE?window.THREE:{Group:Uu},Iv=Tv(Cv,Mv.Group,!0);const kv={type:"change"},Ov={type:"start"},Rv={type:"end"};class Dv extends We{constructor(t,e){super();const n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.target=new qn;const o=1e-6,s=new qn;let a=1,l=r.NONE,c=r.NONE,u=0,h=0,d=0;const f=new qn,p=new wn,m=new wn,g=new qn,y=new wn,v=new wn,w=new wn,b=new wn,_=[],S={};this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,this.handleResize=function(){const t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height};const E=function(){const t=new wn;return function(e,r){return t.set((e-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),t}}(),A=function(){const t=new wn;return function(e,r){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),t}}();function x(t){!1!==n.enabled&&(0===_.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",C),n.domElement.addEventListener("pointerup",T)),F(t),"touch"===t.pointerType?P(t):O(t))}function C(t){!1!==n.enabled&&("touch"===t.pointerType?L(t):R(t))}function T(t){!1!==n.enabled&&("touch"===t.pointerType?B(t):D(),z(t),0===_.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",C),n.domElement.removeEventListener("pointerup",T)))}function M(t){z(t)}function I(t){!1!==n.enabled&&(window.removeEventListener("keydown",I),c===r.NONE&&(t.code!==n.keys[r.ROTATE]||n.noRotate?t.code!==n.keys[r.ZOOM]||n.noZoom?t.code!==n.keys[r.PAN]||n.noPan||(c=r.PAN):c=r.ZOOM:c=r.ROTATE))}function k(){!1!==n.enabled&&(c=r.NONE,window.addEventListener("keydown",I))}function O(t){if(l===r.NONE)switch(t.button){case n.mouseButtons.LEFT:l=r.ROTATE;break;case n.mouseButtons.MIDDLE:l=r.ZOOM;break;case n.mouseButtons.RIGHT:l=r.PAN;break}const e=c!==r.NONE?c:l;e!==r.ROTATE||n.noRotate?e!==r.ZOOM||n.noZoom?e!==r.PAN||n.noPan||(w.copy(E(t.pageX,t.pageY)),b.copy(w)):(y.copy(E(t.pageX,t.pageY)),v.copy(y)):(m.copy(A(t.pageX,t.pageY)),p.copy(m)),n.dispatchEvent(Ov)}function R(t){const e=c!==r.NONE?c:l;e!==r.ROTATE||n.noRotate?e!==r.ZOOM||n.noZoom?e!==r.PAN||n.noPan||b.copy(E(t.pageX,t.pageY)):v.copy(E(t.pageX,t.pageY)):(p.copy(m),m.copy(A(t.pageX,t.pageY)))}function D(){l=r.NONE,n.dispatchEvent(Rv)}function N(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.deltaMode){case 2:y.y-=.025*t.deltaY;break;case 1:y.y-=.01*t.deltaY;break;default:y.y-=25e-5*t.deltaY;break}n.dispatchEvent(Ov),n.dispatchEvent(Rv)}}function P(t){switch(V(t),_.length){case 1:l=r.TOUCH_ROTATE,m.copy(A(_[0].pageX,_[0].pageY)),p.copy(m);break;default:l=r.TOUCH_ZOOM_PAN;const t=_[0].pageX-_[1].pageX,e=_[0].pageY-_[1].pageY;h=u=Math.sqrt(t*t+e*e);const n=(_[0].pageX+_[1].pageX)/2,i=(_[0].pageY+_[1].pageY)/2;w.copy(E(n,i)),b.copy(w);break}n.dispatchEvent(Ov)}function L(t){switch(V(t),_.length){case 1:p.copy(m),m.copy(A(t.pageX,t.pageY));break;default:const e=H(t),n=t.pageX-e.x,r=t.pageY-e.y;h=Math.sqrt(n*n+r*r);const i=(t.pageX+e.x)/2,o=(t.pageY+e.y)/2;b.copy(E(i,o));break}}function B(t){switch(_.length){case 0:l=r.NONE;break;case 1:l=r.TOUCH_ROTATE,m.copy(A(t.pageX,t.pageY)),p.copy(m);break;case 2:l=r.TOUCH_ZOOM_PAN;for(let e=0;e<_.length;e++)if(_[e].pointerId!==t.pointerId){const t=S[_[e].pointerId];m.copy(A(t.x,t.y)),p.copy(m);break}break}n.dispatchEvent(Rv)}function U(t){!1!==n.enabled&&t.preventDefault()}function F(t){_.push(t)}function z(t){delete S[t.pointerId];for(let e=0;e<_.length;e++)if(_[e].pointerId==t.pointerId)return void _.splice(e,1)}function V(t){let e=S[t.pointerId];void 0===e&&(e=new wn,S[t.pointerId]=e),e.set(t.pageX,t.pageY)}function H(t){const e=t.pointerId===_[0].pointerId?_[1]:_[0];return S[e.pointerId]}this.rotateCamera=function(){const t=new qn,e=new $n,r=new qn,i=new qn,o=new qn,s=new qn;return function(){s.set(m.x-p.x,m.y-p.y,0);let a=s.length();a?(f.copy(n.object.position).sub(n.target),r.copy(f).normalize(),i.copy(n.object.up).normalize(),o.crossVectors(i,r).normalize(),i.setLength(m.y-p.y),o.setLength(m.x-p.x),s.copy(i.add(o)),t.crossVectors(s,f).normalize(),a*=n.rotateSpeed,e.setFromAxisAngle(t,a),f.applyQuaternion(e),n.object.up.applyQuaternion(e),g.copy(t),d=a):!n.staticMoving&&d&&(d*=Math.sqrt(1-n.dynamicDampingFactor),f.copy(n.object.position).sub(n.target),e.setFromAxisAngle(g,d),f.applyQuaternion(e),n.object.up.applyQuaternion(e)),p.copy(m)}}(),this.zoomCamera=function(){let t;l===r.TOUCH_ZOOM_PAN?(t=u/h,u=h,n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom=vn.clamp(n.object.zoom/t,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(t=1+(v.y-y.y)*n.zoomSpeed,1!==t&&t>0&&(n.object.isPerspectiveCamera?f.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom=vn.clamp(n.object.zoom/t,n.minZoom,n.maxZoom),a!==n.object.zoom&&n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?y.copy(v):y.y+=(v.y-y.y)*this.dynamicDampingFactor)},this.panCamera=function(){const t=new wn,e=new qn,r=new qn;return function(){if(t.copy(b).sub(w),t.lengthSq()){if(n.object.isOrthographicCamera){const e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,r=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;t.x*=e,t.y*=r}t.multiplyScalar(f.length()*n.panSpeed),r.copy(f).cross(n.object.up).setLength(t.x),r.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?w.copy(b):w.add(t.subVectors(b,w).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(f.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,f.setLength(n.maxDistance)),y.copy(v)),f.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,f.setLength(n.minDistance)),y.copy(v)))},this.update=function(){f.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,f),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),s.distanceToSquared(n.object.position)>o&&(n.dispatchEvent(kv),s.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(s.distanceToSquared(n.object.position)>o||a!==n.object.zoom)&&(n.dispatchEvent(kv),s.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){l=r.NONE,c=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),f.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(kv),s.copy(n.object.position),a=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",U),n.domElement.removeEventListener("pointerdown",x),n.domElement.removeEventListener("pointercancel",M),n.domElement.removeEventListener("wheel",N),n.domElement.removeEventListener("pointermove",C),n.domElement.removeEventListener("pointerup",T),window.removeEventListener("keydown",I),window.removeEventListener("keyup",k)},this.domElement.addEventListener("contextmenu",U),this.domElement.addEventListener("pointerdown",x),this.domElement.addEventListener("pointercancel",M),this.domElement.addEventListener("wheel",N,{passive:!1}),window.addEventListener("keydown",I),window.addEventListener("keyup",k),this.handleResize(),this.update()}}const Nv={type:"change"},Pv={type:"start"},Lv={type:"end"};class Bv extends We{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new qn,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.ROTATE,MIDDLE:i.DOLLY,RIGHT:i.PAN},this.touches={ONE:o.ROTATE,TWO:o.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",rt),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Nv),n.update(),s=r.NONE},this.update=function(){const e=new qn,i=(new $n).setFromUnitVectors(t.up,new qn(0,1,0)),o=i.clone().invert(),f=new qn,p=new $n,m=new qn,g=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(i),l.setFromVector3(e),n.autoRotate&&s===r.NONE&&C(A()),n.enableDamping?(l.theta+=c.theta*n.dampingFactor,l.phi+=c.phi*n.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);let y=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(y)&&isFinite(v)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),v<-Math.PI?v+=g:v>Math.PI&&(v-=g),l.theta=y<=v?Math.max(y,Math.min(v,l.theta)):l.theta>(y+v)/2?Math.max(y,l.theta):Math.min(v,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=u,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),e.setFromSpherical(l),e.applyQuaternion(o),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),h.set(0,0,0)),u=1,!!(d||f.distanceToSquared(n.object.position)>a||8*(1-p.dot(n.object.quaternion))>a||m.distanceToSquared(n.target)>0)&&(n.dispatchEvent(Nv),f.copy(n.object.position),p.copy(n.object.quaternion),m.copy(n.target),d=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",st),n.domElement.removeEventListener("pointerdown",K),n.domElement.removeEventListener("pointercancel",Q),n.domElement.removeEventListener("wheel",nt),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",Q),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",rt),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,l=new Td,c=new Td;let u=1;const h=new qn;let d=!1;const f=new wn,p=new wn,m=new wn,g=new wn,y=new wn,v=new wn,w=new wn,b=new wn,_=new wn,S=[],E={};function A(){return 2*Math.PI/60/60*n.autoRotateSpeed}function x(){return Math.pow(.95,n.zoomSpeed)}function C(t){c.theta-=t}function T(t){c.phi-=t}const M=function(){const t=new qn;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),h.add(t)}}(),I=function(){const t=new qn;return function(e,r){!0===n.screenSpacePanning?t.setFromMatrixColumn(r,1):(t.setFromMatrixColumn(r,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),h.add(t)}}(),k=function(){const t=new qn;return function(e,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let s=t.length();s*=Math.tan(n.object.fov/2*Math.PI/180),M(2*e*s/i.clientHeight,n.object.matrix),I(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(e*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),I(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function O(t){n.object.isPerspectiveCamera?u/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(t){n.object.isPerspectiveCamera?u*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(t){f.set(t.clientX,t.clientY)}function N(t){w.set(t.clientX,t.clientY)}function P(t){g.set(t.clientX,t.clientY)}function L(t){p.set(t.clientX,t.clientY),m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;C(2*Math.PI*m.x/e.clientHeight),T(2*Math.PI*m.y/e.clientHeight),f.copy(p),n.update()}function B(t){b.set(t.clientX,t.clientY),_.subVectors(b,w),_.y>0?O(x()):_.y<0&&R(x()),w.copy(b),n.update()}function U(t){y.set(t.clientX,t.clientY),v.subVectors(y,g).multiplyScalar(n.panSpeed),k(v.x,v.y),g.copy(y),n.update()}function F(t){t.deltaY<0?R(x()):t.deltaY>0&&O(x()),n.update()}function z(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?C(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?C(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):k(-n.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),n.update())}function V(){if(1===S.length)f.set(S[0].pageX,S[0].pageY);else{const t=.5*(S[0].pageX+S[1].pageX),e=.5*(S[0].pageY+S[1].pageY);f.set(t,e)}}function H(){if(1===S.length)g.set(S[0].pageX,S[0].pageY);else{const t=.5*(S[0].pageX+S[1].pageX),e=.5*(S[0].pageY+S[1].pageY);g.set(t,e)}}function j(){const t=S[0].pageX-S[1].pageX,e=S[0].pageY-S[1].pageY,n=Math.sqrt(t*t+e*e);w.set(0,n)}function W(){n.enableZoom&&j(),n.enablePan&&H()}function G(){n.enableZoom&&j(),n.enableRotate&&V()}function $(t){if(1==S.length)p.set(t.pageX,t.pageY);else{const e=ut(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);p.set(n,r)}m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;C(2*Math.PI*m.x/e.clientHeight),T(2*Math.PI*m.y/e.clientHeight),f.copy(p)}function q(t){if(1===S.length)y.set(t.pageX,t.pageY);else{const e=ut(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);y.set(n,r)}v.subVectors(y,g).multiplyScalar(n.panSpeed),k(v.x,v.y),g.copy(y)}function Y(t){const e=ut(t),r=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(r*r+i*i);b.set(0,o),_.set(0,Math.pow(b.y/w.y,n.zoomSpeed)),O(_.y),w.copy(b)}function X(t){n.enableZoom&&Y(t),n.enablePan&&q(t)}function Z(t){n.enableZoom&&Y(t),n.enableRotate&&$(t)}function K(t){!1!==n.enabled&&(0===S.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",J),n.domElement.addEventListener("pointerup",Q)),at(t),"touch"===t.pointerType?it(t):tt(t))}function J(t){!1!==n.enabled&&("touch"===t.pointerType?ot(t):et(t))}function Q(t){lt(t),0===S.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",Q)),n.dispatchEvent(Lv),s=r.NONE}function tt(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case i.DOLLY:if(!1===n.enableZoom)return;N(t),s=r.DOLLY;break;case i.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;P(t),s=r.PAN}else{if(!1===n.enableRotate)return;D(t),s=r.ROTATE}break;case i.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;D(t),s=r.ROTATE}else{if(!1===n.enablePan)return;P(t),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(Pv)}function et(t){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;L(t);break;case r.DOLLY:if(!1===n.enableZoom)return;B(t);break;case r.PAN:if(!1===n.enablePan)return;U(t);break}}function nt(t){!1!==n.enabled&&!1!==n.enableZoom&&s===r.NONE&&(t.preventDefault(),n.dispatchEvent(Pv),F(t),n.dispatchEvent(Lv))}function rt(t){!1!==n.enabled&&!1!==n.enablePan&&z(t)}function it(t){switch(ct(t),S.length){case 1:switch(n.touches.ONE){case o.ROTATE:if(!1===n.enableRotate)return;V(),s=r.TOUCH_ROTATE;break;case o.PAN:if(!1===n.enablePan)return;H(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case o.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;W(),s=r.TOUCH_DOLLY_PAN;break;case o.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;G(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(Pv)}function ot(t){switch(ct(t),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;$(t),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;q(t),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;X(t),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;Z(t),n.update();break;default:s=r.NONE}}function st(t){!1!==n.enabled&&t.preventDefault()}function at(t){S.push(t)}function lt(t){delete E[t.pointerId];for(let e=0;e<S.length;e++)if(S[e].pointerId==t.pointerId)return void S.splice(e,1)}function ct(t){let e=E[t.pointerId];void 0===e&&(e=new wn,E[t.pointerId]=e),e.set(t.pageX,t.pageY)}function ut(t){const e=t.pointerId===S[0].pointerId?S[1]:S[0];return E[e.pointerId]}n.domElement.addEventListener("contextmenu",st),n.domElement.addEventListener("pointerdown",K),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",nt,{passive:!1}),this.update()}}const Uv={type:"change"};class Fv extends We{constructor(t,e){super(),this.object=t,this.domElement=e,this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;const n=this,r=1e-6,i=new $n,o=new qn;this.tmpQuaternion=new $n,this.status=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new qn(0,0,0),this.rotationVector=new qn(0,0,0),this.keydown=function(t){if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()},this.pointerdown=function(t){if(this.dragToLook)this.status++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}},this.pointermove=function(t){if(!this.dragToLook||this.status>0){const e=this.getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector()}},this.pointerup=function(t){if(this.dragToLook)this.status--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){const e=t*n.movementSpeed,s=t*n.rollSpeed;n.object.translateX(n.moveVector.x*e),n.object.translateY(n.moveVector.y*e),n.object.translateZ(n.moveVector.z*e),n.tmpQuaternion.set(n.rotationVector.x*s,n.rotationVector.y*s,n.rotationVector.z*s,1).normalize(),n.object.quaternion.multiply(n.tmpQuaternion),(o.distanceToSquared(n.object.position)>r||8*(1-i.dot(n.object.quaternion))>r)&&(n.dispatchEvent(Uv),i.copy(n.object.quaternion),o.copy(n.object.position))},this.updateMovementVector=function(){const t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",zv),this.domElement.removeEventListener("pointerdown",a),this.domElement.removeEventListener("pointermove",s),this.domElement.removeEventListener("pointerup",l),window.removeEventListener("keydown",c),window.removeEventListener("keyup",u)};const s=this.pointermove.bind(this),a=this.pointerdown.bind(this),l=this.pointerup.bind(this),c=this.keydown.bind(this),u=this.keyup.bind(this);this.domElement.addEventListener("contextmenu",zv),this.domElement.addEventListener("pointerdown",a),this.domElement.addEventListener("pointermove",s),this.domElement.addEventListener("pointerup",l),window.addEventListener("keydown",c),window.addEventListener("keyup",u),this.updateMovementVector(),this.updateRotationVector()}}function zv(t){t.preventDefault()}const Vv={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class Hv{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const jv=new ll(-1,1,1,-1,0,1),Wv=new Ii;Wv.setAttribute("position",new _i([-1,3,0,-1,-1,0,3,-1,0],3)),Wv.setAttribute("uv",new _i([0,2,0,0,2,0],2));class Gv{constructor(t){this._mesh=new qi(Wv,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,jv)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class $v extends Hv{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof io?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=eo.clone(t.uniforms),this.material=new io({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Gv(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class qv extends Hv{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),i=t.state;let o,s;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,s=1):(o=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class Yv extends Hv{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class Xv{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new wn);this._width=n.width,this._height=n.height,e=new jn(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:St}),e.texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new $v(Vv),this.clock=new ud}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,i=this.passes.length;r<i;r++){const e=this.passes[r];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),e.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==qv&&(e instanceof qv?n=!0:e instanceof Yv&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new wn);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Zv extends Hv{constructor(t,e,n,r,i){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new fi}render(t,e,n){const r=t.autoClear;let i,o;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}function Kv(){return Kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kv.apply(this,arguments)}function Jv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qv(t,e){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qv(t,e)}function tw(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Qv(t,e)}function ew(t){return ew=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ew(t)}function nw(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function rw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function iw(t,e,n){return iw=rw()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&Qv(o,n.prototype),o},iw.apply(null,arguments)}function ow(t){var e="function"===typeof Map?new Map:void 0;return ow=function(t){if(null===t||!nw(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return iw(t,arguments,ew(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Qv(n,t)},ow(t)}var sw=function(t){function e(e){var n;return n=t.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+e+" for more information.")||this,Jv(n)}return tw(e,t),e}(ow(Error));function aw(t){return Math.round(255*t)}function lw(t,e,n){return aw(t)+","+aw(e)+","+aw(n)}function cw(t,e,n,r){if(void 0===r&&(r=lw),0===e)return r(n,n,n);var i=(t%360+360)%360/60,o=(1-Math.abs(2*n-1))*e,s=o*(1-Math.abs(i%2-1)),a=0,l=0,c=0;i>=0&&i<1?(a=o,l=s):i>=1&&i<2?(a=s,l=o):i>=2&&i<3?(l=o,c=s):i>=3&&i<4?(l=s,c=o):i>=4&&i<5?(a=s,c=o):i>=5&&i<6&&(a=o,c=s);var u=n-o/2,h=a+u,d=l+u,f=c+u;return r(h,d,f)}var uw={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function hw(t){if("string"!==typeof t)return t;var e=t.toLowerCase();return uw[e]?"#"+uw[e]:t}var dw=/^#[a-fA-F0-9]{6}$/,fw=/^#[a-fA-F0-9]{8}$/,pw=/^#[a-fA-F0-9]{3}$/,mw=/^#[a-fA-F0-9]{4}$/,gw=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,yw=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,vw=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ww=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function bw(t){if("string"!==typeof t)throw new sw(3);var e=hw(t);if(e.match(dw))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(fw)){var n=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:n}}if(e.match(pw))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(mw)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=gw.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var o=yw.exec(e.substring(0,50));if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])>1?parseFloat(""+o[4])/100:parseFloat(""+o[4])};var s=vw.exec(e);if(s){var a=parseInt(""+s[1],10),l=parseInt(""+s[2],10)/100,c=parseInt(""+s[3],10)/100,u="rgb("+cw(a,l,c)+")",h=gw.exec(u);if(!h)throw new sw(4,e,u);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var d=ww.exec(e.substring(0,50));if(d){var f=parseInt(""+d[1],10),p=parseInt(""+d[2],10)/100,m=parseInt(""+d[3],10)/100,g="rgb("+cw(f,p,m)+")",y=gw.exec(g);if(!y)throw new sw(4,e,g);return{red:parseInt(""+y[1],10),green:parseInt(""+y[2],10),blue:parseInt(""+y[3],10),alpha:parseFloat(""+d[4])>1?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new sw(5)}var _w=function(t){return 7===t.length&&t[1]===t[2]&&t[3]===t[4]&&t[5]===t[6]?"#"+t[1]+t[3]+t[5]:t},Sw=_w;function Ew(t){var e=t.toString(16);return 1===e.length?"0"+e:e}function Aw(t,e,n){if("number"===typeof t&&"number"===typeof e&&"number"===typeof n)return Sw("#"+Ew(t)+Ew(e)+Ew(n));if("object"===typeof t&&void 0===e&&void 0===n)return Sw("#"+Ew(t.red)+Ew(t.green)+Ew(t.blue));throw new sw(6)}function xw(t,e,n,r){if("string"===typeof t&&"number"===typeof e){var i=bw(t);return"rgba("+i.red+","+i.green+","+i.blue+","+e+")"}if("number"===typeof t&&"number"===typeof e&&"number"===typeof n&&"number"===typeof r)return r>=1?Aw(t,e,n):"rgba("+t+","+e+","+n+","+r+")";if("object"===typeof t&&void 0===e&&void 0===n&&void 0===r)return t.alpha>=1?Aw(t.red,t.green,t.blue):"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")";throw new sw(7)}function Cw(t,e,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=e?t.apply(this,r):Cw(t,e,r)}}function Tw(t){return Cw(t,t.length,[])}function Mw(t,e,n){return Math.max(t,Math.min(e,n))}function Iw(t,e){if("transparent"===e)return e;var n=bw(e),r="number"===typeof n.alpha?n.alpha:1,i=Kv({},n,{alpha:Mw(0,1,(100*r+100*parseFloat(t))/100)});return xw(i)}var kw=Tw(Iw),Ow=kw;var Rw=Object.freeze({Linear:Object.freeze({None:function(t){return t},In:function(t){return this.None(t)},Out:function(t){return this.None(t)},InOut:function(t){return this.None(t)}}),Quadratic:Object.freeze({In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}}),Cubic:Object.freeze({In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}}),Quartic:Object.freeze({In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}}),Quintic:Object.freeze({In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}}),Sinusoidal:Object.freeze({In:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.sin(Math.PI*(.5-t)))}}),Exponential:Object.freeze({In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}}),Circular:Object.freeze({In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}}),Elastic:Object.freeze({In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}}),Back:Object.freeze({In:function(t){var e=1.70158;return 1===t?1:t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return 0===t?0:--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}}),Bounce:Object.freeze({In:function(t){return 1-Rw.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Rw.Bounce.In(2*t):.5*Rw.Bounce.Out(2*t-1)+.5}}),generatePow:function(t){return void 0===t&&(t=4),t=t<Number.EPSILON?Number.EPSILON:t,t=t>1e4?1e4:t,{In:function(e){return Math.pow(e,t)},Out:function(e){return 1-Math.pow(1-e,t)},InOut:function(e){return e<.5?Math.pow(2*e,t)/2:(1-Math.pow(2-2*e,t))/2+.5}}}}),Dw=function(){return performance.now()},Nw=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map((function(e){return t._tweens[e]}))},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},t.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},t.prototype.update=function(t,e){void 0===t&&(t=Dw()),void 0===e&&(e=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;while(n.length>0){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],o=!e;i&&!1===i.update(t,o)&&!e&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),Pw={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=Pw.Utils.Linear;return e<0?o(t[0],t[1],r):e>1?o(t[n],t[n-1],n-r):o(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=Pw.Utils.Bernstein,s=0;s<=r;s++)n+=i(1-e,r-s)*i(e,s)*t[s]*o(r,s);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=Pw.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=Pw.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var r=e;r>1;r--)n*=r;return t[e]=n,n}}(),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),s=.5*(r-e),a=i*i,l=i*a;return(2*e-2*n+o+s)*l+(-3*e+3*n-2*o-s)*a+o*i+e}}},Lw=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),Bw=new Nw,Uw=function(){function t(t,e){void 0===e&&(e=Bw),this._object=t,this._group=e,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Rw.Linear.None,this._interpolationFunction=Pw.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Lw.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(t,e){if(void 0===e&&(e=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=t,this._propertiesAreSetUp=!1,this._duration=e,this},t.prototype.duration=function(t){return void 0===t&&(t=1e3),this._duration=t,this},t.prototype.dynamic=function(t){return void 0===t&&(t=!1),this._isDynamic=t,this},t.prototype.start=function(t,e){if(void 0===t&&(t=Dw()),void 0===e&&(e=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,!this._propertiesAreSetUp||e){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var i in this._valuesEnd)r[i]=this._valuesEnd[i];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,e)}return this},t.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},t.prototype._setupProperties=function(t,e,n,r,i){for(var o in n){var s=t[o],a=Array.isArray(s),l=a?"array":typeof s,c=!a&&Array.isArray(n[o]);if("undefined"!==l&&"function"!==l){if(c){var u=n[o];if(0===u.length)continue;for(var h=[s],d=0,f=u.length;d<f;d+=1){var p=this._handleRelativeValue(s,u[d]);if(isNaN(p)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(p)}c&&(n[o]=h)}if("object"!==l&&!a||!s||c)("undefined"===typeof e[o]||i)&&(e[o]=s),a||(e[o]*=1),r[o]=c?n[o].slice().reverse():e[o]||0;else{e[o]=a?[]:{};var m=s;for(var g in m)e[o][g]=m[g];r[o]=a?[]:{};u=n[o];if(!this._isDynamic){var y={};for(var g in u)y[g]=u[g];n[o]=u=y}this._setupProperties(m,e[o],u,r[o],i)}}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(t){return void 0===t&&(t=Dw()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this)),this},t.prototype.resume=function(t){return void 0===t&&(t=Dw()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop();return this},t.prototype.group=function(t){return void 0===t&&(t=Bw),this._group=t,this},t.prototype.delay=function(t){return void 0===t&&(t=0),this._delayTime=t,this},t.prototype.repeat=function(t){return void 0===t&&(t=0),this._initialRepeat=t,this._repeat=t,this},t.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},t.prototype.yoyo=function(t){return void 0===t&&(t=!1),this._yoyo=t,this},t.prototype.easing=function(t){return void 0===t&&(t=Rw.Linear.None),this._easingFunction=t,this},t.prototype.interpolation=function(t){return void 0===t&&(t=Pw.Linear),this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},t.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t,e){if(void 0===t&&(t=Dw()),void 0===e&&(e=!0),this._isPaused)return!0;var n,r,i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>i)return!1;e&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(t-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[n]||(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,a=this._chainedTweens.length;s<a;s++)this._chainedTweens[s].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(t,e,n,r){for(var i in n)if(void 0!==e[i]){var o=e[i]||0,s=n[i],a=Array.isArray(t[i]),l=Array.isArray(s),c=!a&&l;c?t[i]=this._interpolationFunction(s,r):"object"===typeof s&&s?this._updateProperties(t[i],o,s,r):(s=this._handleRelativeValue(o,s),"number"===typeof s&&(t[i]=o+(s-o)*r))}},t.prototype._handleRelativeValue=function(t,e){return"string"!==typeof e?e:"+"===e.charAt(0)||"-"===e.charAt(0)?t+parseFloat(e):parseFloat(e)},t.prototype._swapEndStartRepeatValues=function(t){var e=this._valuesStartRepeat[t],n=this._valuesEnd[t];this._valuesStartRepeat[t]="string"===typeof n?this._valuesStartRepeat[t]+parseFloat(n):this._valuesEnd[t],this._valuesEnd[t]=e},t}(),Fw="20.0.3",zw=Lw.nextId,Vw=Bw,Hw=Vw.getAll.bind(Vw),jw=Vw.removeAll.bind(Vw),Ww=Vw.add.bind(Vw),Gw=Vw.remove.bind(Vw),$w=Vw.update.bind(Vw),qw={Easing:Rw,Group:Nw,Interpolation:Pw,now:Dw,Sequence:Lw,nextId:zw,Tween:Uw,VERSION:Fw,getAll:Hw,removeAll:jw,add:Ww,remove:Gw,update:$w};function Yw(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var Xw=".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}";function Zw(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Kw(t,e,n){return e=lb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jw(t,e){return eb(t)||Zw(t,e)||rb(t,e)||sb()}function Qw(t){return tb(t)||nb(t)||rb(t)||ob()}function tb(t){if(Array.isArray(t))return ib(t)}function eb(t){if(Array.isArray(t))return t}function nb(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function rb(t,e){if(t){if("string"===typeof t)return ib(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ib(t,e):void 0}}function ib(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ob(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ab(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function lb(t){var e=ab(t,"string");return"symbol"===typeof e?e:String(e)}Yw(Xw);var cb=window.THREE?window.THREE:{WebGLRenderer:$u,Scene:Yu,PerspectiveCamera:so,Raycaster:Ad,SRGBColorSpace:Ce,TextureLoader:ed,Vector2:wn,Vector3:qn,Box3:Zn,Color:fi,Mesh:qi,SphereGeometry:Oh,MeshBasicMaterial:mi,BackSide:f,EventDispatcher:We,MOUSE:i,Quaternion:$n,Spherical:Td,Clock:ud},ub=Km({props:{width:{default:window.innerWidth,onChange:function(t,e,n){isNaN(t)&&(e.width=n)}},height:{default:window.innerHeight,onChange:function(t,e,n){isNaN(t)&&(e.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},enablePointerInteraction:{default:!0,onChange:function(t,e){e.hoverObj=null,e.toolTipElem&&(e.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(t){if(t.initialised){if(t.controls.update&&t.controls.update(t.clock.getDelta()),t.postProcessingComposer?t.postProcessingComposer.render():t.renderer.render(t.scene,t.camera),t.extraRenderers.forEach((function(e){return e.render(t.scene,t.camera)})),t.enablePointerInteraction){var e=null;if(t.hoverDuringDrag||!t.isPointerDragging){var n=this.intersectingObjects(t.pointerPos.x,t.pointerPos.y).filter((function(e){return t.hoverFilter(e.object)})).sort((function(e,n){return t.hoverOrderComparator(e.object,n.object)})),r=n.length?n[0]:null;e=r?r.object:null,t.intersectionPoint=r?r.point:null}e!==t.hoverObj&&(t.onHover(e,t.hoverObj),t.toolTipElem.innerHTML=e&&Jm(t.tooltipContent)(e)||"",t.hoverObj=e)}qw.update()}return this},getPointerPos:function(t){var e=t.pointerPos,n=e.x,r=e.y;return{x:n,y:r}},cameraPosition:function(t,e,n,r){var i=t.camera;if(e&&t.initialised){var o=e,s=n||{x:0,y:0,z:0};if(r){var a=Object.assign({},i.position),l=h();new qw.Tween(a).to(o,r).easing(qw.Easing.Quadratic.Out).onUpdate(c).start(),new qw.Tween(l).to(s,r/3).easing(qw.Easing.Quadratic.Out).onUpdate(u).start()}else c(o),u(s);return this}return Object.assign({},i.position,{lookAt:h()});function c(t){var e=t.x,n=t.y,r=t.z;void 0!==e&&(i.position.x=e),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function u(e){var n=new cb.Vector3(e.x,e.y,e.z);t.controls.target?t.controls.target=n:i.lookAt(n)}function h(){return Object.assign(new cb.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,i),e,n)},fitToBbox:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=t.camera;if(e){var o=new cb.Vector3(0,0,0),s=2*Math.max.apply(Math,Qw(Object.entries(e).map((function(t){var e=Jw(t,2),n=e[0],r=e[1];return Math.max.apply(Math,Qw(r.map((function(t){return Math.abs(o[n]-t)}))))})))),a=(1-2*r/t.height)*i.fov,l=s/Math.atan(a*Math.PI/180),c=l/i.aspect,u=Math.max(l,c);if(u>0){var h=o.clone().sub(i.position).normalize().multiplyScalar(-u);this.cameraPosition(h,o,n)}}return this},getBbox:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new cb.Box3(new cb.Vector3(0,0,0),new cb.Vector3(0,0,0)),r=t.objects.filter(e);return r.length?(r.forEach((function(t){return n.expandByObject(t)})),Object.assign.apply(Object,Qw(["x","y","z"].map((function(t){return Kw({},t,[n.min[t],n.max[t]])}))))):null},getScreenCoords:function(t,e,n,r){var i=new cb.Vector3(e,n,r);return i.project(this.camera()),{x:(i.x+1)*t.width/2,y:-(i.y-1)*t.height/2}},getSceneCoords:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new cb.Vector2(e/t.width*2-1,-n/t.height*2+1),o=new cb.Raycaster;return o.setFromCamera(i,t.camera),Object.assign({},o.ray.at(r,new cb.Vector3))},intersectingObjects:function(t,e,n){var r=new cb.Vector2(e/t.width*2-1,-n/t.height*2+1),i=new cb.Raycaster;return i.params.Line.threshold=t.lineHoverPrecision,i.setFromCamera(r,t.camera),i.intersectObjects(t.objects,!0)},renderer:function(t){return t.renderer},scene:function(t){return t.scene},camera:function(t){return t.camera},postProcessingComposer:function(t){return t.postProcessingComposer},controls:function(t){return t.controls},tbControls:function(t){return t.controls}},stateInit:function(){return{scene:new cb.Scene,camera:new cb.PerspectiveCamera,clock:new cb.Clock}},init:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.controlType,i=void 0===r?"trackball":r,o=n.rendererConfig,s=void 0===o?{}:o,a=n.extraRenderers,l=void 0===a?[]:a,c=n.waitForLoadComplete,u=void 0===c||c;t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.className="scene-container",e.container.style.position="relative",e.container.appendChild(e.navInfo=document.createElement("div")),e.navInfo.className="scene-nav-info",e.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",e.navInfo.style.display=e.showNavInfo?null:"none",e.toolTipElem=document.createElement("div"),e.toolTipElem.classList.add("scene-tooltip"),e.container.appendChild(e.toolTipElem),e.pointerPos=new cb.Vector2,e.pointerPos.x=-2,e.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(t){return e.container.addEventListener(t,(function(n){if("pointerdown"===t&&(e.isPointerPressed=!0),!e.isPointerDragging&&"pointermove"===n.type&&(n.pressure>0||e.isPointerPressed)&&("touch"!==n.pointerType||void 0===n.movementX||[n.movementX,n.movementY].some((function(t){return Math.abs(t)>1})))&&(e.isPointerDragging=!0),e.enablePointerInteraction){var r=i(e.container);e.pointerPos.x=n.pageX-r.left,e.pointerPos.y=n.pageY-r.top,e.toolTipElem.style.top="".concat(e.pointerPos.y,"px"),e.toolTipElem.style.left="".concat(e.pointerPos.x,"px"),e.toolTipElem.style.transform="translate(-".concat(e.pointerPos.x/e.width*100,"%, ").concat(e.height-e.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function i(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+r,left:e.left+n}}}),{passive:!0})})),e.container.addEventListener("pointerup",(function(t){e.isPointerPressed=!1,e.isPointerDragging&&(e.isPointerDragging=!1,!e.clickAfterDrag)||requestAnimationFrame((function(){0===t.button&&e.onClick(e.hoverObj||null,t,e.intersectionPoint),2===t.button&&e.onRightClick&&e.onRightClick(e.hoverObj||null,t,e.intersectionPoint)}))}),{passive:!0,capture:!0}),e.container.addEventListener("contextmenu",(function(t){e.onRightClick&&t.preventDefault()})),e.renderer=new cb.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},s)),e.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),e.container.appendChild(e.renderer.domElement),e.extraRenderers=l,e.extraRenderers.forEach((function(t){t.domElement.style.position="absolute",t.domElement.style.top="0px",t.domElement.style.pointerEvents="none",e.container.appendChild(t.domElement)})),e.postProcessingComposer=new Xv(e.renderer),e.postProcessingComposer.addPass(new Zv(e.scene,e.camera)),e.controls=new{trackball:Dv,orbit:Bv,fly:Fv}[i](e.camera,e.renderer.domElement),"fly"===i&&(e.controls.movementSpeed=300,e.controls.rollSpeed=Math.PI/6,e.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(e.controls.minDistance=.1,e.controls.maxDistance=e.skyRadius,e.controls.addEventListener("start",(function(){e.controlsEngaged=!0})),e.controls.addEventListener("change",(function(){e.controlsEngaged&&(e.controlsDragging=!0)})),e.controls.addEventListener("end",(function(){e.controlsEngaged=!1,e.controlsDragging=!1}))),[e.renderer,e.postProcessingComposer].concat(Qw(e.extraRenderers)).forEach((function(t){return t.setSize(e.width,e.height)})),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix(),e.camera.position.z=1e3,e.scene.add(e.skysphere=new cb.Mesh),e.skysphere.visible=!1,e.loadComplete=e.scene.visible=!u,window.scene=e.scene},update:function(t,e){if(t.width&&t.height&&(e.hasOwnProperty("width")||e.hasOwnProperty("height"))&&(t.container.style.width="".concat(t.width,"px"),t.container.style.height="".concat(t.height,"px"),[t.renderer,t.postProcessingComposer].concat(Qw(t.extraRenderers)).forEach((function(e){return e.setSize(t.width,t.height)})),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix()),e.hasOwnProperty("skyRadius")&&t.skyRadius&&(t.controls.hasOwnProperty("maxDistance")&&e.skyRadius&&(t.controls.maxDistance=Math.min(t.controls.maxDistance,t.skyRadius)),t.camera.far=2.5*t.skyRadius,t.camera.updateProjectionMatrix(),t.skysphere.geometry=new cb.SphereGeometry(t.skyRadius)),e.hasOwnProperty("backgroundColor")){var n=bw(t.backgroundColor).alpha;void 0===n&&(n=1),t.renderer.setClearColor(new cb.Color(Ow(1,t.backgroundColor)),n)}function r(){t.loadComplete=t.scene.visible=!0}e.hasOwnProperty("backgroundImageUrl")&&(t.backgroundImageUrl?(new cb.TextureLoader).load(t.backgroundImageUrl,(function(e){e.colorSpace=cb.SRGBColorSpace,t.skysphere.material=new cb.MeshBasicMaterial({map:e,side:cb.BackSide}),t.skysphere.visible=!0,t.onBackgroundImageLoaded&&setTimeout(t.onBackgroundImageLoaded),!t.loadComplete&&r()})):(t.skysphere.visible=!1,t.skysphere.material.map=null,!t.loadComplete&&r())),e.hasOwnProperty("showNavInfo")&&(t.navInfo.style.display=t.showNavInfo?null:"none"),e.hasOwnProperty("objects")&&((e.objects||[]).forEach((function(e){return t.scene.remove(e)})),t.objects.forEach((function(e){return t.scene.add(e)})))}});function hb(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}var db=".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}";function fb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fb(Object(n),!0).forEach((function(e){mb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mb(t,e,n){return e=Eb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gb(t){return yb(t)||vb(t)||wb(t)||_b()}function yb(t){if(Array.isArray(t))return bb(t)}function vb(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wb(t,e){if(t){if("string"===typeof t)return bb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bb(t,e):void 0}}function bb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sb(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Eb(t){var e=Sb(t,"string");return"symbol"===typeof e?e:String(e)}function Ab(t,e){var n=new e;return n._destructor&&n._destructor(),{linkProp:function(e){return{default:n[e](),onChange:function(n,r){r[t][e](n)},triggerUpdate:!1}},linkMethod:function(e){return function(n){for(var r=n[t],i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var a=r[e].apply(r,o);return a===r?this:a}}}}hb(db);var xb=window.THREE?window.THREE:{AmbientLight:cd,DirectionalLight:ld,Vector3:qn},Cb=170,Tb=Ab("forceGraph",Iv),Mb=Object.assign.apply(Object,gb(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map((function(t){return mb({},t,Tb.linkProp(t))})))),Ib=Object.assign.apply(Object,gb(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map((function(t){return mb({},t,Tb.linkMethod(t))})))),kb=Ab("renderObjs",ub),Ob=Object.assign.apply(Object,gb(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map((function(t){return mb({},t,kb.linkProp(t))})))),Rb=Object.assign.apply(Object,gb(["cameraPosition","postProcessingComposer"].map((function(t){return mb({},t,kb.linkMethod(t))}))).concat([{graph2ScreenCoords:kb.linkMethod("getScreenCoords"),screen2GraphCoords:kb.linkMethod("getSceneCoords")}])),Db=Km({props:pb(pb({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(t,e){return e.renderObjs.lineHoverPrecision(t)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(t,e){var n=e.renderObjs.controls();n&&(n.enabled=t,t&&n.domElement&&n.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},Mb),Ob),methods:pb(pb({zoomToFit:function(t,e,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return t.renderObjs.fitToBbox((r=t.forceGraph).getGraphBbox.apply(r,o),e,n),this},pauseAnimation:function(t){return null!==t.animationFrameRequestId&&(cancelAnimationFrame(t.animationFrameRequestId),t.animationFrameRequestId=null),this},resumeAnimation:function(t){return null===t.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(t){t.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),t.forceGraph.tickFrame(),t.renderObjs.tick(),t.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(t){return t.renderObjs.scene()},camera:function(t){return t.renderObjs.camera()},renderer:function(t){return t.renderObjs.renderer()},controls:function(t){return t.renderObjs.controls()},tbControls:function(t){return t.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},Ib),Rb),stateInit:function(t){var e=t.controlType,n=t.rendererConfig,r=t.extraRenderers;return{forceGraph:new Iv,renderObjs:ub({controlType:e,rendererConfig:n,extraRenderers:r})}},init:function(t,e){t.innerHTML="",t.appendChild(e.container=document.createElement("div")),e.container.style.position="relative";var n=document.createElement("div");e.container.appendChild(n),e.renderObjs(n);var r,i=e.renderObjs.camera(),o=e.renderObjs.renderer(),s=e.renderObjs.controls();s.enabled=!!e.enableNavigationControls,e.lastSetCameraZ=i.position.z,e.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",e.forceGraph.onLoading((function(){r.textContent="Loading..."})).onFinishLoading((function(){r.textContent=""})).onUpdate((function(){e.graphData=e.forceGraph.graphData(),0===i.position.x&&0===i.position.y&&i.position.z===e.lastSetCameraZ&&e.graphData.nodes.length&&(i.lookAt(e.forceGraph.position),e.lastSetCameraZ=i.position.z=Math.cbrt(e.graphData.nodes.length)*Cb)})).onFinishUpdate((function(){if(e._dragControls){var t=e.graphData.nodes.find((function(t){return t.__initialFixedPos&&!t.__disposeControlsAfterDrag}));t?t.__disposeControlsAfterDrag=!0:e._dragControls.dispose(),e._dragControls=void 0}if(e.enableNodeDrag&&e.enablePointerInteraction&&"d3"===e.forceEngine){var n=e._dragControls=new Pd(e.graphData.nodes.map((function(t){return t.__threeObj})).filter((function(t){return t})),i,o.domElement);n.addEventListener("dragstart",(function(t){s.enabled=!1,t.object.__initialPos=t.object.position.clone(),t.object.__prevPos=t.object.position.clone();var e=Nb(t.object).__data;!e.__initialFixedPos&&(e.__initialFixedPos={fx:e.fx,fy:e.fy,fz:e.fz}),!e.__initialPos&&(e.__initialPos={x:e.x,y:e.y,z:e.z}),["x","y","z"].forEach((function(t){return e["f".concat(t)]=e[t]})),o.domElement.classList.add("grabbable")})),n.addEventListener("drag",(function(t){var n=Nb(t.object);if(!t.object.hasOwnProperty("__graphObjType")){var r=t.object.__initialPos,i=t.object.__prevPos,o=t.object.position;n.position.add(o.clone().sub(i)),i.copy(o),o.copy(r)}var s=n.__data,a=n.position,l={x:a.x-s.x,y:a.y-s.y,z:a.z-s.z};["x","y","z"].forEach((function(t){return s["f".concat(t)]=s[t]=a[t]})),e.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.__dragged=!0,e.onNodeDrag(s,l)})),n.addEventListener("dragend",(function(t){delete t.object.__initialPos,delete t.object.__prevPos;var r=Nb(t.object).__data;r.__disposeControlsAfterDrag&&(n.dispose(),delete r.__disposeControlsAfterDrag);var i=r.__initialFixedPos,a=r.__initialPos,l={x:a.x-r.x,y:a.y-r.y,z:a.z-r.z};i&&(["x","y","z"].forEach((function(t){var e="f".concat(t);void 0===i[e]&&delete r[e]})),delete r.__initialFixedPos,delete r.__initialPos,r.__dragged&&(delete r.__dragged,e.onNodeDragEnd(r,l))),e.forceGraph.d3AlphaTarget(0).resetCountdown(),e.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),o.domElement.classList.remove("grabbable")}))}})),e.renderObjs.renderer().useLegacyLights=!1,e.renderObjs.objects([new xb.AmbientLight(13421772,Math.PI),new xb.DirectionalLight(16777215,.6*Math.PI),e.forceGraph]).hoverOrderComparator((function(t,e){var n=Nb(t);if(!n)return 1;var r=Nb(e);if(!r)return-1;var i=function(t){return"node"===t.__graphObjType};return i(r)-i(n)})).tooltipContent((function(t){var n=Nb(t);return n&&Jm(e["".concat(n.__graphObjType,"Label")])(n.__data)||""})).hoverDuringDrag(!1).onHover((function(t){var n=Nb(t);if(n!==e.hoverObj){var r=e.hoverObj?e.hoverObj.__graphObjType:null,i=e.hoverObj?e.hoverObj.__data:null,s=n?n.__graphObjType:null,a=n?n.__data:null;if(r&&r!==s){var l=e["on".concat("node"===r?"Node":"Link","Hover")];l&&l(null,i)}if(s){var c=e["on".concat("node"===s?"Node":"Link","Hover")];c&&c(a,r===s?i:null)}o.domElement.classList[n&&e["on".concat("node"===s?"Node":"Link","Click")]||!n&&e.onBackgroundClick?"add":"remove"]("clickable"),e.hoverObj=n}})).clickAfterDrag(!1).onClick((function(t,n){var r=Nb(t);if(r){var i=e["on".concat("node"===r.__graphObjType?"Node":"Link","Click")];i&&i(r.__data,n)}else e.onBackgroundClick&&e.onBackgroundClick(n)})).onRightClick((function(t,n){var r=Nb(t);if(r){var i=e["on".concat("node"===r.__graphObjType?"Node":"Link","RightClick")];i&&i(r.__data,n)}else e.onBackgroundRightClick&&e.onBackgroundRightClick(n)})),this._animationCycle()}});function Nb(t){var e=t;while(e&&!e.hasOwnProperty("__graphObjType"))e=e.parent;return e}},7601:function(t,e,n){"use strict";n.d(e,{Ui:function(){return Mn}});n(3767),n(8585),n(8696),n(7658),n(2801);const r=t=>t.toLowerCase(),i=/^\s*/g,o=t=>t.replace(i,""),s=/([A-Z])/g,a=(t,e)=>o(t.replace(s,(t=>`${e}${r(t)}`))),l=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},c="undefined"!==typeof TextEncoder?new TextEncoder:null,u=t=>c.encode(t),h=c?u:l;let d="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});d&&1===d.decode(new Uint8Array).length&&(d=null);const f=()=>new Map,p=t=>void 0===t?null:t;class m{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let g=new m,y=!0;try{"undefined"!==typeof localStorage&&(g=localStorage,y=!1)}catch(In){}const v=g,w=(t,e)=>e.includes(t),b="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name);let _;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const S=()=>{if(void 0===_)if(b){_=f();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&_.set(e,""),e=r):null!==e&&(_.set(e,r),e=null)}null!==e&&_.set(e,"")}else"object"===typeof location?(_=f(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");_.set(`--${a(e,"-")}`,n),_.set(`-${a(e,"-")}`,n)}}))):_=f();return _},E=t=>S().has(t),A=t=>p(b?{NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}[t.toUpperCase()]:v.getItem(t)),x=t=>E("--"+t)||null!==A(t);x("production");const C=b&&w({NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}.FORCE_COLOR,["true","1","2"]);!E("no-colors")&&(!b||process.stdout.isTTY||C)&&(!b||E("color")||C||null!==A("COLORTERM")||(A("TERM")||"").includes("color"));const T=128,M=127,I=Math.floor,k=(t,e)=>t<e?t:e,O=(t,e)=>t>e?t:e,R=Number.MAX_SAFE_INTEGER,D=t=>new Error(t),N=D("Unexpected end of array"),P=D("Integer out of Range"),L=(t,e)=>{const n=j(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},B=t=>L(t,F(t)),U=t=>t.arr[t.pos++],F=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&M)*n,n*=128,r<T)return e;if(e>R)throw P}throw N},z=t=>{let e=F(t);if(0===e)return"";{let n=String.fromCodePoint(U(t));if(--e<100)while(e--)n+=String.fromCodePoint(U(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},V=t=>d.decode(B(t)),H=d?V:z,j=(t,e,n)=>new Uint8Array(t,e,n),W=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},G=(t,e)=>{while(e>M)W(t,T|M&e),e=I(e/128);W(t,M&e)},$=new Uint8Array(3e4),q=$.length/3,Y=(t,e)=>{if(e.length<q){const n=c.encodeInto(e,$).written||0;G(t,n);for(let e=0;e<n;e++)W(t,$[e])}else J(t,h(e))},X=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;G(t,r);for(let i=0;i<r;i++)W(t,n.codePointAt(i))},Z=c&&c.encodeInto?Y:X,K=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=k(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(O(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},J=(t,e)=>{G(t,e.byteLength),K(t,e)};var Q;(function(t){t[t["Token"]=0]="Token",t[t["PermissionDenied"]=1]="PermissionDenied",t[t["Authenticated"]=2]="Authenticated"})(Q||(Q={}));const tt=(t,e)=>{G(t,Q.Token),Z(t,e)},et=(t,e,n)=>{switch(F(t)){case Q.PermissionDenied:e(H(t));break;case Q.Authenticated:n(H(t));break}},nt={code:1009,reason:"Message Too Big"},rt={code:4401,reason:"Unauthorized"},it={code:4403,reason:"Forbidden"},ot=t=>Array.from(t.entries()).map((([t,e])=>({clientId:t,...e})));var st;(function(t){t[t["Connecting"]=0]="Connecting",t[t["Open"]=1]="Open",t[t["Closing"]=2]="Closing",t[t["Closed"]=3]="Closed"})(st||(st={}));var at=n(8954);function lt(t){return t||(t={}),{delay:void 0===t.delay?200:t.delay,initialDelay:void 0===t.initialDelay?0:t.initialDelay,minDelay:void 0===t.minDelay?0:t.minDelay,maxDelay:void 0===t.maxDelay?0:t.maxDelay,factor:void 0===t.factor?0:t.factor,maxAttempts:void 0===t.maxAttempts?3:t.maxAttempts,timeout:void 0===t.timeout?0:t.timeout,jitter:!0===t.jitter,handleError:void 0===t.handleError?null:t.handleError,handleTimeout:void 0===t.handleTimeout?null:t.handleTimeout,beforeAttempt:void 0===t.beforeAttempt?null:t.beforeAttempt,calculateDelay:void 0===t.calculateDelay?null:t.calculateDelay}}async function ct(t){return new Promise(((e,n)=>{setTimeout(e,t)}))}function ut(t,e){let n=e.delay;if(0===n)return 0;if(e.factor&&(n*=Math.pow(e.factor,t.attemptNum-1),0!==e.maxDelay&&(n=Math.min(n,e.maxDelay))),e.jitter){const t=Math.ceil(e.minDelay),r=Math.floor(n);n=Math.floor(Math.random()*(r-t+1))+t}return Math.round(n)}async function ht(t,e){const n=lt(e);for(const a of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const t=n[a];if(!Number.isInteger(t)||t<0)throw new Error(`Value for ${a} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},i=n.calculateDelay||ut;async function o(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const t=new Error("Attempt aborted");throw t.code="ATTEMPT_ABORTED",t}const e=async t=>{if(n.handleError&&await n.handleError(t,r,n),r.aborted||0===r.attemptsRemaining)throw t;r.attemptNum++;const e=i(r,n);return e&&await ct(e),o()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise(((i,o)=>{const s=setTimeout((()=>{if(n.handleTimeout)try{i(n.handleTimeout(r,n))}catch(In){o(In)}else{const t=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);t.code="ATTEMPT_TIMEOUT",o(t)}}),n.timeout);t(r,n).then((t=>{clearTimeout(s),i(t)})).catch((t=>{clearTimeout(s),e(t).then(i).catch(o)}))})):t(r,n).catch(e)}const s=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;return s&&await ct(s),o()}const dt=()=>new Map,ft=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},pt=()=>new Set,mt=Array.from,gt=String.fromCharCode,yt=t=>t.toLowerCase(),vt=/^\s*/g,wt=t=>t.replace(vt,""),bt=/([A-Z])/g,_t=(t,e)=>wt(t.replace(bt,(t=>`${e}${yt(t)}`))),St=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},Et="undefined"!==typeof TextEncoder?new TextEncoder:null,At=t=>Et.encode(t),xt=Et?At:St;let Ct="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ct&&1===Ct.decode(new Uint8Array).length&&(Ct=null);const Tt=t=>void 0===t?null:t;class Mt{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let It=new Mt,kt=!0;try{"undefined"!==typeof localStorage&&(It=localStorage,kt=!1)}catch(In){}const Ot=It,Rt=t=>kt||addEventListener("storage",t),Dt=t=>kt||removeEventListener("storage",t),Nt=Object.keys,Pt=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},Lt=t=>Nt(t).length,Bt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Ut=(t,e)=>t===e,Ft=(t,e)=>{if(null==t||null==e)return Ut(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Ft(t.get(n),e.get(n)))return!1;break;case Object:if(Lt(t)!==Lt(e))return!1;for(const n in t)if(!Bt(t,n)||!Ft(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Ft(t[n],e[n]))return!1;break;default:return!1}return!0},zt=(t,e)=>e.includes(t),Vt="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),Ht="undefined"!==typeof window&&"undefined"!==typeof document&&!Vt;let jt;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const Wt=()=>{if(void 0===jt)if(Vt){jt=dt();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&jt.set(e,""),e=r):null!==e&&(jt.set(e,r),e=null)}null!==e&&jt.set(e,"")}else"object"===typeof location?(jt=dt(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");jt.set(`--${_t(e,"-")}`,n),jt.set(`-${_t(e,"-")}`,n)}}))):jt=dt();return jt},Gt=t=>Wt().has(t),$t=t=>Tt(Vt?{NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}[t.toUpperCase()]:Ot.getItem(t)),qt=t=>Gt("--"+t)||null!==$t(t);qt("production");const Yt=Vt&&zt({NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}.FORCE_COLOR,["true","1","2"]);!Gt("no-colors")&&(!Vt||process.stdout.isTTY||Yt)&&(!Vt||Gt("color")||Yt||null!==$t("COLORTERM")||($t("TERM")||"").includes("color"));const Xt=Math.floor,Zt=(t,e)=>t<e?t:e,Kt=(t,e)=>t>e?t:e,Jt=64,Qt=128,te=63,ee=127,ne=Number.MAX_SAFE_INTEGER;class re{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const ie=()=>new re,oe=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},se=t=>{const e=new Uint8Array(oe(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(ke(t.cbuf.buffer,0,t.cpos),n),e},ae=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},le=(t,e)=>{while(e>ee)ae(t,Qt|ee&e),e=Xt(e/128);ae(t,ee&e)},ce=new Uint8Array(3e4),ue=ce.length/3,he=(t,e)=>{if(e.length<ue){const n=Et.encodeInto(e,ce).written||0;le(t,n);for(let e=0;e<n;e++)ae(t,ce[e])}else me(t,xt(e))},de=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;le(t,r);for(let i=0;i<r;i++)ae(t,n.codePointAt(i))},fe=Et&&Et.encodeInto?he:de,pe=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=Zt(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Kt(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},me=(t,e)=>{le(t,e.byteLength),pe(t,e)},ge=t=>new Error(t),ye=ge("Unexpected end of array"),ve=ge("Integer out of Range");class we{constructor(t){this.arr=t,this.pos=0}}const be=t=>new we(t),_e=(t,e)=>{const n=ke(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Se=t=>_e(t,Ae(t)),Ee=t=>t.arr[t.pos++],Ae=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&ee)*n,n*=128,r<Qt)return e;if(e>ne)throw ve}throw ye},xe=t=>{let e=t.arr[t.pos++],n=e&te,r=64;const i=(e&Jt)>0?-1:1;if(0===(e&Qt))return i*n;const o=t.arr.length;while(t.pos<o){if(e=t.arr[t.pos++],n+=(e&ee)*r,r*=128,e<Qt)return i*n;if(n>ne)throw ve}throw ye},Ce=t=>{let e=Ae(t);if(0===e)return"";{let n=String.fromCodePoint(Ee(t));if(--e<100)while(e--)n+=String.fromCodePoint(Ee(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},Te=t=>Ct.decode(Se(t)),Me=Ct?Te:Ce,Ie=t=>new Uint8Array(t),ke=(t,e,n)=>new Uint8Array(t,e,n),Oe=t=>new Uint8Array(t),Re=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=gt(t[n]);return btoa(e)},De=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Ne=t=>{const e=atob(t),n=Ie(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Pe=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},Le=Ht?Re:De,Be=Ht?Ne:Pe,Ue=new Map;class Fe{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:Be(e.newValue||"")}),Rt(this._onChange)}postMessage(t){Ot.setItem(this.room,Le(Oe(t)))}close(){Dt(this._onChange)}}const ze="undefined"===typeof BroadcastChannel?Fe:BroadcastChannel,Ve=t=>ft(Ue,t,(()=>{const e=pt(),n=new ze(t);return n.onmessage=t=>e.forEach((e=>e(t.data,"broadcastchannel"))),{bc:n,subs:e}})),He=(t,e)=>(Ve(t).subs.add(e),e),je=(t,e)=>{const n=Ve(t),r=n.subs.delete(e);return r&&0===n.subs.size&&(n.bc.close(),Ue.delete(t)),r},We=(t,e,n=null)=>{const r=Ve(t);r.bc.postMessage(e),r.subs.forEach((t=>t(e,n)))},Ge=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}},$e=Date.now;class qe{constructor(){this._observers=dt()}on(t,e){ft(this._observers,t,pt).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return mt((this._observers.get(t)||dt()).values()).forEach((t=>t(...e)))}destroy(){this._observers=dt()}}const Ye=3e4;class Xe extends qe{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=$e();null!==this.getLocalState()&&Ye/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&Ye<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)})),e.length>0&&Ze(this,e,"timeout")}),Xt(Ye/10)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:$e()});const o=[],s=[],a=[],l=[];null===t?l.push(e):null==i?null!=t&&o.push(e):(s.push(e),Ft(i,t)||a.push(e)),(o.length>0||a.length>0||l.length>0)&&this.emit("change",[{added:o,updated:a,removed:l},"local"]),this.emit("update",[{added:o,updated:s,removed:l},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const Ze=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:$e()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Ke=(t,e,n=t.states)=>{const r=e.length,i=ie();le(i,r);for(let o=0;o<r;o++){const r=e[o],s=n.get(r)||null,a=t.meta.get(r).clock;le(i,r),le(i,a),fe(i,JSON.stringify(s))}return se(i)},Je=(t,e,n)=>{const r=be(e),i=$e(),o=[],s=[],a=[],l=[],c=Ae(r);for(let u=0;u<c;u++){const e=Ae(r);let n=Ae(r);const c=JSON.parse(Me(r)),u=t.meta.get(e),h=t.states.get(e),d=void 0===u?0:u.clock;(d<n||d===n&&null===c&&t.states.has(e))&&(null===c?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,c),t.meta.set(e,{clock:n,lastUpdated:i}),void 0===u&&null!==c?o.push(e):void 0!==u&&null===c?l.push(e):null!==c&&(Ft(c,h)||a.push(e),s.push(e)))}(o.length>0||a.length>0||l.length>0)&&t.emit("change",[{added:o,updated:a,removed:l},n]),(o.length>0||s.length>0||l.length>0)&&t.emit("update",[{added:o,updated:s,removed:l},n])};class Qe{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}const tn=t=>Pt(t,((t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");var en,nn;(function(t){t[t["Sync"]=0]="Sync",t[t["Awareness"]=1]="Awareness",t[t["Auth"]=2]="Auth",t[t["QueryAwareness"]=3]="QueryAwareness",t[t["Stateless"]=5]="Stateless",t[t["CLOSE"]=7]="CLOSE",t[t["SyncStatus"]=8]="SyncStatus"})(en||(en={})),function(t){t["Connecting"]="connecting",t["Connected"]="connected",t["Disconnected"]="disconnected"}(nn||(nn={}));class rn extends Qe{constructor(t){super(),this.messageQueue=[],this.configuration={url:"",document:void 0,WebSocketPolyfill:void 0,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,quiet:!1},this.subscribedToBroadcastChannel=!1,this.webSocket=null,this.shouldConnect=!0,this.status=nn.Disconnected,this.lastMessageReceived=0,this.mux=Ge(),this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.boundConnect=this.connect.bind(this),this.closeTries=0,this.setConfiguration(t),this.configuration.WebSocketPolyfill=t.WebSocketPolyfill?t.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("open",this.onOpen.bind(this)),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("status",this.configuration.onStatus),this.on("status",this.onStatus.bind(this)),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("close",this.onClose.bind(this)),this.on("message",this.onMessage.bind(this)),this.registerEventListeners(),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),"undefined"!==typeof t.connect&&(this.shouldConnect=t.connect),this.shouldConnect&&this.connect()}async onOpen(t){this.receivedOnOpenPayload=t}async onStatus(t){this.receivedOnStatusPayload=t}attach(t){this.status===nn.Disconnected&&this.shouldConnect&&this.connect(),this.receivedOnOpenPayload&&t.onOpen(this.receivedOnOpenPayload),this.receivedOnStatusPayload&&t.onStatus(this.receivedOnStatusPayload)}detach(t){}setConfiguration(t={}){this.configuration={...this.configuration,...t}}async connect(){if(this.status===nn.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.receivedOnOpenPayload=void 0,this.receivedOnStatusPayload=void 0,this.shouldConnect=!0;const t=()=>{let t=!1;const e=ht(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:e=>{this.shouldConnect&&!t||e.abort()}}).catch((t=>{if(t&&"ATTEMPT_ABORTED"!==t.code)throw t}));return{retryPromise:e,cancelFunc:()=>{t=!0}}},{retryPromise:e,cancelFunc:n}=t();return this.cancelWebsocketRetry=n,e}createWebSocketConnection(){return new Promise(((t,e)=>{this.webSocket&&(this.messageQueue=[],this.webSocket.close(),this.webSocket=null),this.lastMessageReceived=0;const n=new this.configuration.WebSocketPolyfill(this.url);n.binaryType="arraybuffer",n.onmessage=t=>this.emit("message",t),n.onclose=t=>this.emit("close",{event:t}),n.onopen=t=>this.emit("open",t),n.onerror=t=>{e(t)},this.webSocket=n,this.status=nn.Connecting,this.emit("status",{status:nn.Connecting}),this.connectionAttempt={resolve:t,reject:e}}))}onMessage(t){this.resolveConnectionAttempt(),this.lastMessageReceived=$e()}resolveConnectionAttempt(){this.connectionAttempt&&(this.connectionAttempt.resolve(),this.connectionAttempt=null,this.status=nn.Connected,this.emit("status",{status:nn.Connected}),this.emit("connect"),this.messageQueue.forEach((t=>this.send(t))),this.messageQueue=[])}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var t;null===(t=this.connectionAttempt)||void 0===t||t.reject(),this.connectionAttempt=null}checkConnection(){var t;this.status===nn.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=$e()-this.lastMessageReceived||(this.closeTries+=1,this.closeTries>2?(this.onClose({event:{code:4408,reason:"forced"}}),this.closeTries=0):(null===(t=this.webSocket)||void 0===t||t.close(),this.messageQueue=[])))}registerEventListeners(){"undefined"!==typeof window&&window.addEventListener("online",this.boundConnect)}get serverUrl(){while("/"===this.configuration.url[this.configuration.url.length-1])return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){const t=tn(this.configuration.parameters);return`${this.serverUrl}${0===t.length?"":`?${t}`}`}disconnect(){if(this.shouldConnect=!1,null!==this.webSocket)try{this.webSocket.close(),this.messageQueue=[]}catch{}}send(t){var e;(null===(e=this.webSocket)||void 0===e?void 0:e.readyState)===st.Open?this.webSocket.send(t):this.messageQueue.push(t)}onClose({event:t}){this.closeTries=0,this.webSocket=null,this.status===nn.Connected&&(this.status=nn.Disconnected,this.emit("status",{status:nn.Disconnected}),this.emit("disconnect",{event:t})),t.code===rt.code&&(t.reason===rt.reason?console.warn("[HocuspocusProvider] An authentication token is required, but you didn’t send one. Try adding a `token` to your HocuspocusProvider configuration. Won’t try again."):console.warn(`[HocuspocusProvider] Connection closed with status Unauthorized: ${t.reason}`),this.shouldConnect=!1),t.code!==it.code||this.configuration.quiet?(t.code===nt.code&&(console.warn(`[HocuspocusProvider] Connection closed with status MessageTooBig: ${t.reason}`),this.shouldConnect=!1),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),this.shouldConnect||this.status!==nn.Disconnected&&(this.status=nn.Disconnected,this.emit("status",{status:nn.Disconnected}),this.emit("disconnect",{event:t}))):console.warn("[HocuspocusProvider] The provided authentication token isn’t allowed to connect to this server. Will try again.")}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),this.stopConnectionAttempt(),this.disconnect(),this.removeAllListeners(),"undefined"!==typeof window&&window.removeEventListener("online",this.boundConnect)}}class on{constructor(t){this.data=t,this.encoder=ie(),this.decoder=be(new Uint8Array(this.data))}readVarUint(){return Ae(this.decoder)}readVarString(){return Me(this.decoder)}readVarUint8Array(){return Se(this.decoder)}writeVarUint(t){return le(this.encoder,t)}writeVarString(t){return fe(this.encoder,t)}writeVarUint8Array(t){return me(this.encoder,t)}length(){return oe(this.encoder)}}const sn=0,an=1,ln=2,cn=(t,e)=>{le(t,sn);const n=at.gJ(e);me(t,n)},un=(t,e,n)=>{le(t,an),me(t,at.D$(e,n))},hn=(t,e,n)=>un(e,n,Se(t)),dn=(t,e,n)=>{try{at.NG(e,Se(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},fn=(t,e)=>{le(t,ln),me(t,e)},pn=dn,mn=(t,e,n,r)=>{const i=Ae(t);switch(i){case sn:hn(t,e,n);break;case an:dn(t,n,r);break;case ln:pn(t,n,r);break;default:throw new Error("Unknown message type")}return i};class gn{constructor(){this.encoder=ie()}get(t){return t.encoder}toUint8Array(){return se(this.encoder)}}class yn{constructor(t){this.broadcasted=!1,this.message=t}setBroadcasted(t){return this.broadcasted=t,this}apply(t,e){const{message:n}=this,r=n.readVarUint(),i=n.length();switch(r){case en.Sync:this.applySyncMessage(t,e);break;case en.Awareness:this.applyAwarenessMessage(t);break;case en.Auth:this.applyAuthMessage(t);break;case en.QueryAwareness:this.applyQueryAwarenessMessage(t);break;case en.Stateless:t.receiveStateless(Me(n.decoder));break;case en.SyncStatus:this.applySyncStatusMessage(t,1===xe(n.decoder));break;default:throw new Error(`Can’t apply message of unknown type: ${r}`)}n.length()>i+1&&(this.broadcasted?t.broadcast(gn,{encoder:n.encoder}):t.send(gn,{encoder:n.encoder}))}applySyncMessage(t,e){const{message:n}=this;n.writeVarUint(en.Sync);const r=mn(n.decoder,n.encoder,t.document,t);e&&r===an&&(t.synced=!0)}applySyncStatusMessage(t,e){e&&t.decrementUnsyncedChanges()}applyAwarenessMessage(t){if(!t.awareness)return;const{message:e}=this;Je(t.awareness,e.readVarUint8Array(),t)}applyAuthMessage(t){const{message:e}=this;et(e.decoder,t.permissionDeniedHandler.bind(t),t.authenticatedHandler.bind(t))}applyQueryAwarenessMessage(t){if(!t.awareness)return;const{message:e}=this;e.writeVarUint(en.Awareness),e.writeVarUint8Array(Ke(t.awareness,Array.from(t.awareness.getStates().keys())))}}class vn{constructor(t,e={}){this.message=new t,this.encoder=this.message.get(e)}create(){return se(this.encoder)}send(t){null===t||void 0===t||t.send(this.create())}broadcast(t){We(t,this.create())}}class wn extends gn{constructor(){super(...arguments),this.type=en.Auth,this.description="Authentication"}get(t){if("undefined"===typeof t.token)throw new Error("The authentication message requires `token` as an argument.");return fe(this.encoder,t.documentName),le(this.encoder,this.type),tt(this.encoder,t.token),this.encoder}}class bn extends gn{constructor(){super(...arguments),this.type=en.Awareness,this.description="Awareness states update"}get(t){if("undefined"===typeof t.awareness)throw new Error("The awareness message requires awareness as an argument");if("undefined"===typeof t.clients)throw new Error("The awareness message requires clients as an argument");let e;return fe(this.encoder,t.documentName),le(this.encoder,this.type),e=void 0===t.states?Ke(t.awareness,t.clients):Ke(t.awareness,t.clients,t.states),me(this.encoder,e),this.encoder}}class _n extends gn{constructor(){super(...arguments),this.type=en.CLOSE,this.description="Ask the server to close the connection"}get(t){return fe(this.encoder,t.documentName),le(this.encoder,this.type),this.encoder}}class Sn extends gn{constructor(){super(...arguments),this.type=en.QueryAwareness,this.description="Queries awareness states"}get(t){return console.log("queryAwareness: writing string docName",t.documentName),console.log(this.encoder.cpos),fe(this.encoder,t.documentName),le(this.encoder,this.type),this.encoder}}class En extends gn{constructor(){super(...arguments),this.type=en.Stateless,this.description="A stateless message"}get(t){var e;return fe(this.encoder,t.documentName),le(this.encoder,this.type),fe(this.encoder,null!==(e=t.payload)&&void 0!==e?e:""),this.encoder}}class An extends gn{constructor(){super(...arguments),this.type=en.Sync,this.description="First sync step"}get(t){if("undefined"===typeof t.document)throw new Error("The sync step one message requires document as an argument");return fe(this.encoder,t.documentName),le(this.encoder,this.type),cn(this.encoder,t.document),this.encoder}}class xn extends gn{constructor(){super(...arguments),this.type=en.Sync,this.description="Second sync step"}get(t){if("undefined"===typeof t.document)throw new Error("The sync step two message requires document as an argument");return fe(this.encoder,t.documentName),le(this.encoder,this.type),un(this.encoder,t.document),this.encoder}}class Cn extends gn{constructor(){super(...arguments),this.type=en.Sync,this.description="A document update"}get(t){return fe(this.encoder,t.documentName),le(this.encoder,this.type),fn(this.encoder,t.update),this.encoder}}class Tn extends Error{constructor(){super(...arguments),this.code=1001}}class Mn extends Qe{constructor(t){var e,n,r;super(),this.configuration={name:"",document:void 0,awareness:void 0,token:null,parameters:{},broadcast:!0,forceSyncInterval:!1,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1,connect:!0,preserveConnection:!0},this.subscribedToBroadcastChannel=!1,this.isSynced=!1,this.unsyncedChanges=0,this.status=nn.Disconnected,this.isAuthenticated=!1,this.authorizedScope=void 0,this.mux=Ge(),this.intervals={forceSync:null},this.isConnected=!0,this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.boundPageUnload=this.pageUnload.bind(this),this.boundOnOpen=this.onOpen.bind(this),this.boundOnMessage=this.onMessage.bind(this),this.boundOnClose=this.onClose.bind(this),this.boundOnStatus=this.onStatus.bind(this),this.forwardConnect=t=>this.emit("connect",t),this.forwardOpen=t=>this.emit("open",t),this.forwardClose=t=>this.emit("close",t),this.forwardDisconnect=t=>this.emit("disconnect",t),this.forwardDestroy=t=>this.emit("destroy",t),this.setConfiguration(t),this.configuration.document=t.document?t.document:new at.QW,this.configuration.awareness=void 0!==t.awareness?t.awareness:new Xe(this.document),this.on("open",this.configuration.onOpen),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.configuration.websocketProvider.on("connect",this.configuration.onConnect),this.configuration.websocketProvider.on("connect",this.forwardConnect),this.configuration.websocketProvider.on("open",this.boundOnOpen),this.configuration.websocketProvider.on("open",this.forwardOpen),this.configuration.websocketProvider.on("message",this.boundOnMessage),this.configuration.websocketProvider.on("close",this.boundOnClose),this.configuration.websocketProvider.on("close",this.configuration.onClose),this.configuration.websocketProvider.on("close",this.forwardClose),this.configuration.websocketProvider.on("status",this.boundOnStatus),this.configuration.websocketProvider.on("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.on("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.on("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.on("destroy",this.forwardDestroy),null===(e=this.awareness)||void 0===e||e.on("update",(()=>{this.emit("awarenessUpdate",{states:ot(this.awareness.getStates())})})),null===(n=this.awareness)||void 0===n||n.on("change",(()=>{this.emit("awarenessChange",{states:ot(this.awareness.getStates())})})),this.document.on("update",this.documentUpdateHandler.bind(this)),null===(r=this.awareness)||void 0===r||r.on("update",this.awarenessUpdateHandler.bind(this)),this.registerEventListeners(),this.configuration.forceSyncInterval&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),this.configuration.websocketProvider.attach(this)}onStatus({status:t}){this.status=t,this.configuration.onStatus({status:t}),this.emit("status",{status:t})}setConfiguration(t={}){if(!t.websocketProvider&&t.url){const e=t;this.configuration.websocketProvider=new rn({url:e.url,connect:e.connect,parameters:e.parameters})}this.configuration={...this.configuration,...t}}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}incrementUnsyncedChanges(){this.unsyncedChanges+=1,this.emit("unsyncedChanges",this.unsyncedChanges)}decrementUnsyncedChanges(){this.unsyncedChanges-=1,0===this.unsyncedChanges&&(this.synced=!0),this.emit("unsyncedChanges",this.unsyncedChanges)}forceSync(){this.send(An,{document:this.document,documentName:this.configuration.name})}pageUnload(){this.awareness&&Ze(this.awareness,[this.document.clientID],"window unload")}registerEventListeners(){"undefined"!==typeof window&&window.addEventListener("unload",this.boundPageUnload)}sendStateless(t){this.send(En,{documentName:this.configuration.name,payload:t})}documentUpdateHandler(t,e){e!==this&&(this.incrementUnsyncedChanges(),this.send(Cn,{update:t,documentName:this.configuration.name},!0))}awarenessUpdateHandler({added:t,updated:e,removed:n},r){const i=t.concat(e).concat(n);this.send(bn,{awareness:this.awareness,clients:i,documentName:this.configuration.name},!0)}get synced(){return this.isSynced}set synced(t){this.isSynced!==t&&(this.isSynced=t,this.emit("synced",{state:t}),this.emit("sync",{state:t}))}receiveStateless(t){this.emit("stateless",{payload:t})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}async connect(){return this.configuration.websocketProvider.connect()}disconnect(){this.disconnectBroadcastChannel(),this.configuration.websocketProvider.detach(this),this.configuration.preserveConnection||this.configuration.websocketProvider.disconnect()}async onOpen(t){this.isAuthenticated=!1,this.emit("open",{event:t}),this.isAuthenticationRequired&&this.send(wn,{token:await this.getToken(),documentName:this.configuration.name}),this.startSync()}async getToken(){if("function"===typeof this.configuration.token){const t=await this.configuration.token();return t}return this.configuration.token}startSync(){this.incrementUnsyncedChanges(),this.send(An,{document:this.document,documentName:this.configuration.name}),this.awareness&&null!==this.awareness.getLocalState()&&this.send(bn,{awareness:this.awareness,clients:[this.document.clientID],documentName:this.configuration.name})}send(t,e,n=!1){if(!this.isConnected)return;n&&this.mux((()=>{this.broadcast(t,e)}));const r=new vn(t,e);this.emit("outgoingMessage",{message:r.message}),r.send(this.configuration.websocketProvider)}onMessage(t){const e=new on(t.data),n=e.readVarString();n===this.configuration.name&&(e.writeVarString(n),this.emit("message",{event:t,message:new on(t.data)}),new yn(e).apply(this,!0))}onClose(t){this.isAuthenticated=!1,this.synced=!1,this.awareness&&Ze(this.awareness,Array.from(this.awareness.getStates().keys()).filter((t=>t!==this.document.clientID)),this)}destroy(){var t;this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),this.awareness&&Ze(this.awareness,[this.document.clientID],"provider destroy"),this.disconnect(),null===(t=this.awareness)||void 0===t||t.off("update",this.awarenessUpdateHandler),this.document.off("update",this.documentUpdateHandler),this.removeAllListeners(),this.configuration.websocketProvider.off("connect",this.configuration.onConnect),this.configuration.websocketProvider.off("connect",this.forwardConnect),this.configuration.websocketProvider.off("open",this.boundOnOpen),this.configuration.websocketProvider.off("open",this.forwardOpen),this.configuration.websocketProvider.off("message",this.boundOnMessage),this.configuration.websocketProvider.off("close",this.boundOnClose),this.configuration.websocketProvider.off("close",this.configuration.onClose),this.configuration.websocketProvider.off("close",this.forwardClose),this.configuration.websocketProvider.off("status",this.boundOnStatus),this.configuration.websocketProvider.off("disconnect",this.configuration.onDisconnect),this.configuration.websocketProvider.off("disconnect",this.forwardDisconnect),this.configuration.websocketProvider.off("destroy",this.configuration.onDestroy),this.configuration.websocketProvider.off("destroy",this.forwardDestroy),this.send(_n,{documentName:this.configuration.name}),this.isConnected=!1,"undefined"!==typeof window&&window.removeEventListener("unload",this.boundPageUnload)}permissionDeniedHandler(t){this.emit("authenticationFailed",{reason:t}),this.isAuthenticated=!1,this.disconnect(),this.status=nn.Disconnected}authenticatedHandler(t){this.isAuthenticated=!0,this.authorizedScope=t,this.emit("authenticated"),this.startSync()}get broadcastChannel(){return`${this.configuration.name}`}broadcastChannelSubscriber(t){this.mux((()=>{const e=new on(t),n=e.readVarString();e.writeVarString(n),new yn(e).setBroadcasted(!0).apply(this,!1)}))}subscribeToBroadcastChannel(){this.subscribedToBroadcastChannel||(He(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!0),this.mux((()=>{this.broadcast(An,{document:this.document}),this.broadcast(xn,{document:this.document}),this.broadcast(Sn,{document:this.document}),this.awareness&&this.broadcast(bn,{awareness:this.awareness,clients:[this.document.clientID],document:this.document})}))}disconnectBroadcastChannel(){this.awareness&&this.send(bn,{awareness:this.awareness,clients:[this.document.clientID],states:new Map,documentName:this.configuration.name},!0),this.subscribedToBroadcastChannel&&(je(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!1)}broadcast(t,e){this.configuration.broadcast&&this.subscribedToBroadcastChannel&&new vn(t,e).broadcast(this.broadcastChannel)}setAwarenessField(t,e){if(!this.awareness)throw new Tn(`Cannot set awareness field "${t}" to ${JSON.stringify(e)}. You have disabled Awareness for this provider by explicitly passing awareness: null in the provider configuration.`);this.awareness.setLocalStateField(t,e)}}},2066:function(t,e,n){"use strict";n.d(e,{ML:function(){return In},hj:function(){return Mt},vc:function(){return Nn},NB:function(){return Pn},nU:function(){return it},Nl:function(){return K},Jo:function(){return Pe},eE:function(){return me},EG:function(){return Xe},xh:function(){return Kt},Cf:function(){return kn},K9:function(){return Ln},P1:function(){return et},x2:function(){return On},pr:function(){return Ze},zK:function(){return Rn},S0:function(){return Dn}});n(7658);var r=n(157),i=n(1460),o=n(203),s=n(1543),a=n(1382);const l=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function c(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const u=(t,e,n)=>{let i=c(t,n);if(!i)return!1;let o=f(i);if(!o){let n=i.blockRange(),r=n&&(0,a.k9)(n);return null!=r&&(e&&e(t.tr.lift(n,r).scrollIntoView()),!0)}let l=o.nodeBefore;if(!l.type.spec.isolating&&O(t,o,e))return!0;if(0==i.parent.content.size&&(h(l,"end")||r.qv.isSelectable(l))){let n=(0,a.dR)(t.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(h(l,"end")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos,-1)),-1):r.qv.create(i.doc,o.pos-l.nodeSize)),e(i.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1)&&(e&&e(t.tr.delete(o.pos-l.nodeSize,o.pos).scrollIntoView()),!0)};function h(t,e,n=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const d=(t,e,n)=>{let{$head:i,empty:o}=t.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=f(i)}let a=s&&s.nodeBefore;return!(!a||!r.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(r.qv.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function f(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function p(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const m=(t,e,n)=>{let i=p(t,n);if(!i)return!1;let o=y(i);if(!o)return!1;let l=o.nodeAfter;if(O(t,o,e))return!0;if(0==i.parent.content.size&&(h(l,"start")||r.qv.isSelectable(l))){let n=(0,a.dR)(t.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(h(l,"start")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos)),1):r.qv.create(i.doc,i.mapping.map(o.pos))),e(i.scrollIntoView())}return!0}}return!(!l.isAtom||o.depth!=i.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+l.nodeSize).scrollIntoView()),!0)},g=(t,e,n)=>{let{$head:i,empty:o}=t.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=y(i)}let a=s&&s.nodeAfter;return!(!a||!r.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(r.qv.create(t.doc,s.pos)).scrollIntoView()),!0)};function y(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const v=(t,e)=>{let n,i=t.selection,o=i instanceof r.qv;if(o){if(i.node.isTextblock||!(0,a.Mn)(t.doc,i.from))return!1;n=i.from}else if(n=(0,a.GJ)(t.doc,i.from,-1),null==n)return!1;if(e){let i=t.tr.join(n);o&&i.setSelection(r.qv.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},w=(t,e)=>{let n,i=t.selection;if(i instanceof r.qv){if(i.node.isTextblock||!(0,a.Mn)(t.doc,i.to))return!1;n=i.to}else if(n=(0,a.GJ)(t.doc,i.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},b=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&(0,a.k9)(i);return null!=o&&(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},_=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function S(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const E=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),s=n.indexAfter(-1),a=S(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let i=n.after(),o=t.tr.replaceWith(i,i,a.createAndFill());o.setSelection(r.Y1.near(o.doc.resolve(i),1)),e(o.scrollIntoView())}return!0},A=(t,e)=>{let n=t.selection,{$from:i,$to:o}=n;if(n instanceof r.C1||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=S(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let n=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,a=t.tr.insert(n,s.createAndFill());a.setSelection(r.Bs.create(a.doc,n+1)),e(a.scrollIntoView())}return!0},x=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if((0,a.Ax)(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&(0,a.k9)(r);return null!=i&&(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function C(t){return(e,n)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof r.qv&&e.selection.node.isBlock)return!(!i.parentOffset||!(0,a.Ax)(e.doc,i.pos))&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let s=o.parentOffset==o.parent.content.size,l=e.tr;(e.selection instanceof r.Bs||e.selection instanceof r.C1)&&l.deleteSelection();let c=0==i.depth?null:S(i.node(-1).contentMatchAt(i.indexAfter(-1))),u=t&&t(o.parent,s),h=u?[u]:s&&c?[{type:c}]:void 0,d=(0,a.Ax)(l.doc,l.mapping.map(i.pos),1,h);if(h||d||!(0,a.Ax)(l.doc,l.mapping.map(i.pos),1,c?[{type:c}]:void 0)||(c&&(h=[{type:c}]),d=!0),d&&(l.split(l.mapping.map(i.pos),1,h),!s&&!i.parentOffset&&i.parent.type!=c)){let t=l.mapping.map(i.before()),e=l.doc.resolve(t);c&&i.node(-1).canReplaceWith(e.index(),e.index()+1,c)&&l.setNodeMarkup(l.mapping.map(i.before()),c)}n(l.scrollIntoView())}return!0}}const T=C(),M=(t,e)=>{let n,{$from:i,to:o}=t.selection,s=i.sharedDepth(o);return 0!=s&&(n=i.before(s),e&&e(t.tr.setSelection(r.qv.create(t.doc,n))),!0)},I=(t,e)=>(e&&e(t.tr.setSelection(new r.C1(t.doc))),!0);function k(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(o,o+1)||!i.isTextblock&&!(0,a.Mn)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function O(t,e,n){let i,o,l=e.nodeBefore,c=e.nodeAfter;if(l.type.spec.isolating||c.type.spec.isolating)return!1;if(k(t,e,n))return!0;let u=e.parent.canReplace(e.index(),e.index()+1);if(u&&(i=(o=l.contentMatchAt(l.childCount)).findWrapping(c.type))&&o.matchType(i[0]||c.type).validEnd){if(n){let r=e.pos+c.nodeSize,o=s.HY.empty;for(let t=i.length-1;t>=0;t--)o=s.HY.from(i[t].create(null,o));o=s.HY.from(l.copy(o));let u=t.tr.step(new a.FC(e.pos-1,r,e.pos,r,new s.p2(o,1,0),i.length,!0)),h=r+2*i.length;(0,a.Mn)(u.doc,h)&&u.join(h),n(u.scrollIntoView())}return!0}let d=r.Y1.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&(0,a.k9)(f);if(null!=p&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(u&&h(c,"start",!0)&&h(l,"end")){let r=l,i=[];for(;;){if(i.push(r),r.isTextblock)break;r=r.lastChild}let o=c,u=1;for(;!o.isTextblock;o=o.firstChild)u++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=s.HY.empty;for(let t=i.length-1;t>=0;t--)r=s.HY.from(i[t].copy(r));let o=t.tr.step(new a.FC(e.pos-i.length,e.pos+c.nodeSize,e.pos+u,e.pos+c.nodeSize-u,new s.p2(r,i.length,0),0,!0));n(o.scrollIntoView())}return!0}}return!1}function R(t){return function(e,n){let i=e.selection,o=t<0?i.$from:i.$to,s=o.depth;while(o.node(s).isInline){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(e.tr.setSelection(r.Bs.create(e.doc,t<0?o.start(s):o.end(s)))),!0)}}const D=R(-1),N=R(1);function P(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),l=s&&(0,a.nd)(s,t,e);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}}function L(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)i=!0;else{let e=n.doc.resolve(o),r=e.index();i=e.parent.canReplaceWith(r,r+1,t)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,t,e)}r(i.scrollIntoView())}return!0}}function B(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let U=B(l,u,d),F=B(l,m,g);const z={Enter:B(_,A,x,T),"Mod-Enter":E,Backspace:U,"Mod-Backspace":U,"Shift-Backspace":U,Delete:F,"Mod-Delete":F,"Mod-a":I},V={"Ctrl-h":z["Backspace"],"Alt-Backspace":z["Mod-Backspace"],"Ctrl-d":z["Delete"],"Ctrl-Alt-Backspace":z["Mod-Delete"],"Alt-Delete":z["Mod-Delete"],"Alt-d":z["Mod-Delete"],"Ctrl-a":D,"Ctrl-e":N};for(let Bn in z)V[Bn]=z[Bn];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function H(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,l=i.blockRange(o),c=!1,u=l;if(!l)return!1;if(l.depth>=2&&i.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==i.index(l.depth-1))return!1;let t=n.doc.resolve(l.start-2);u=new s.Ts(t,t,l.depth),l.endIndex<l.parent.childCount&&(l=new s.Ts(i,n.doc.resolve(o.end(l.depth)),l.depth)),c=!0}let h=(0,a.nd)(u,t,e,l);return!!h&&(r&&r(j(n.tr,l,h,c,t).scrollIntoView()),!0)}}function j(t,e,n,r,i){let o=s.HY.empty;for(let a=n.length-1;a>=0;a--)o=s.HY.from(n[a].type.create(n[a].attrs,o));t.step(new a.FC(e.start-(r?2:0),e.end,e.start,e.end,new s.p2(o,0,0),n.length,!0));let l=0;for(let s=0;s<n.length;s++)n[s].type==i&&(l=s+1);let c=n.length-l,u=e.start+n.length-(r?2:0),h=e.parent;for(let s=e.startIndex,d=e.endIndex,f=!0;s<d;s++,f=!1)!f&&(0,a.Ax)(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=h.child(s).nodeSize;return t}function W(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));return!!o&&(!n||(r.node(o.depth-1).type==t?G(e,n,t,o):$(e,n,o)))}}function G(t,e,n,r){let i=t.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(i.step(new a.FC(o-1,l,o,l,new s.p2(s.HY.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new s.Ts(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=(0,a.k9)(r);if(null==c)return!1;i.lift(r,c);let u=i.mapping.map(o,-1)-1;return(0,a.Mn)(i.doc,u)&&i.join(u),e(i.scrollIntoView()),!0}function $(t,e,n){let r=t.tr,i=n.parent;for(let s=n.end,a=n.endIndex-1,m=n.startIndex;a>m;a--)s-=i.child(a).nodeSize,r.delete(s-1,s+1);let o=r.doc.resolve(n.start),l=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,u=n.endIndex==i.childCount,h=o.node(-1),d=o.index(-1);if(!h.canReplace(d+(c?0:1),d+1,l.content.append(u?s.HY.empty:s.HY.from(i))))return!1;let f=o.pos,p=f+l.nodeSize;return r.step(new a.FC(f-(c?1:0),p+(u?1:0),f+1,p-1,new s.p2((c?s.HY.empty:s.HY.from(i.copy(s.HY.empty))).append(u?s.HY.empty:s.HY.from(i.copy(s.HY.empty))),c?0:1,u?0:1),c?0:1)),e(r.scrollIntoView()),!0}function q(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));if(!o)return!1;let l=o.startIndex;if(0==l)return!1;let c=o.parent,u=c.child(l-1);if(u.type!=t)return!1;if(n){let r=u.lastChild&&u.lastChild.type==c.type,i=s.HY.from(r?t.create():null),l=new s.p2(s.HY.from(t.create(null,s.HY.from(c.type.create(null,i)))),r?3:1,0),h=o.start,d=o.end;n(e.tr.step(new a.FC(h-(r?3:1),d,h,d,l,1,!0)).scrollIntoView())}return!0}}function Y(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class X{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((([t,e])=>{const n=(...t)=>{const n=e(...t)(o);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n};return[t,n]})))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!t,l=t||i.tr,c=()=>(a||!e||l.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(l),s.every((t=>!0===t))),u={...Object.fromEntries(Object.entries(n).map((([t,n])=>{const r=(...t)=>{const r=this.buildProps(l,e),i=n(...t)(r);return s.push(i),u};return[t,r]}))),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r),s=Object.fromEntries(Object.entries(e).map((([t,e])=>[t,(...t)=>e(...t)({...o,dispatch:void 0})])));return{...s,chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s={tr:t,editor:r,view:o,state:Y({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map((([t,e])=>[t,(...t)=>e(...t)(s)])))}};return s}}class Z{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function K(t,e,n){if(void 0===t.config[e]&&t.parent)return K(t.parent,e,n);if("function"===typeof t.config[e]){const r=t.config[e].bind({...n,parent:t.parent?K(t.parent,e,n):null});return r}return t.config[e]}function J(t){const e=t.filter((t=>"extension"===t.type)),n=t.filter((t=>"node"===t.type)),r=t.filter((t=>"mark"===t.type));return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Q(t){const e=[],{nodeExtensions:n,markExtensions:r}=J(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=K(t,"addGlobalAttributes",n);if(!r)return;const i=r();i.forEach((t=>{t.types.forEach((n=>{Object.entries(t.attributes).forEach((([t,r])=>{e.push({type:n,name:t,attribute:{...o,...r}})}))}))}))})),i.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=K(t,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach((([n,r])=>{const i={...o,...r};"function"===typeof(null===i||void 0===i?void 0:i.default)&&(i.default=i.default()),(null===i||void 0===i?void 0:i.isRequired)&&void 0===(null===i||void 0===i?void 0:i.default)&&delete i.default,e.push({type:t.name,name:n,attribute:i})}))})),e}function tt(t,e){if("string"===typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function et(...t){return t.filter((t=>!!t)).reduce(((t,e)=>{const n={...t};return Object.entries(e).forEach((([t,e])=>{const r=n[t];if(r)if("class"===t){const r=e?e.split(" "):[],i=n[t]?n[t].split(" "):[],o=r.filter((t=>!i.includes(t)));n[t]=[...i,...o].join(" ")}else n[t]="style"===t?[n[t],e].join("; "):e;else n[t]=e})),n}),{})}function nt(t,e){return e.filter((t=>t.attribute.rendered)).map((e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]})).reduce(((t,e)=>et(t,e)),{})}function rt(t){return"function"===typeof t}function it(t,e=undefined,...n){return rt(t)?e?t.bind(e)(...n):t(...n):t}function ot(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function st(t){return"string"!==typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function at(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;const i=e.reduce(((t,e)=>{const r=e.attribute.parseHTML?e.attribute.parseHTML(n):st(n.getAttribute(e.name));return null===r||void 0===r?t:{...t,[e.name]:r}}),{});return{...r,...i}}}}function lt(t){return Object.fromEntries(Object.entries(t).filter((([t,e])=>("attrs"!==t||!ot(e))&&(null!==e&&void 0!==e))))}function ct(t,e){var n;const r=Q(t),{nodeExtensions:i,markExtensions:o}=J(t),a=null===(n=i.find((t=>K(t,"topNode"))))||void 0===n?void 0:n.name,l=Object.fromEntries(i.map((n=>{const i=r.filter((t=>t.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:e},s=t.reduce(((t,e)=>{const r=K(e,"extendNodeSchema",o);return{...t,...r?r(n):{}}}),{}),a=lt({...s,content:it(K(n,"content",o)),marks:it(K(n,"marks",o)),group:it(K(n,"group",o)),inline:it(K(n,"inline",o)),atom:it(K(n,"atom",o)),selectable:it(K(n,"selectable",o)),draggable:it(K(n,"draggable",o)),code:it(K(n,"code",o)),defining:it(K(n,"defining",o)),isolating:it(K(n,"isolating",o)),attrs:Object.fromEntries(i.map((t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),l=it(K(n,"parseHTML",o));l&&(a.parseDOM=l.map((t=>at(t,i))));const c=K(n,"renderHTML",o);c&&(a.toDOM=t=>c({node:t,HTMLAttributes:nt(t,i)}));const u=K(n,"renderText",o);return u&&(a.toText=u),[n.name,a]}))),c=Object.fromEntries(o.map((n=>{const i=r.filter((t=>t.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:e},s=t.reduce(((t,e)=>{const r=K(e,"extendMarkSchema",o);return{...t,...r?r(n):{}}}),{}),a=lt({...s,inclusive:it(K(n,"inclusive",o)),excludes:it(K(n,"excludes",o)),group:it(K(n,"group",o)),spanning:it(K(n,"spanning",o)),code:it(K(n,"code",o)),attrs:Object.fromEntries(i.map((t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),l=it(K(n,"parseHTML",o));l&&(a.parseDOM=l.map((t=>at(t,i))));const c=K(n,"renderHTML",o);return c&&(a.toDOM=t=>c({mark:t,HTMLAttributes:nt(t,i)})),[n.name,a]})));return new s.V_({topNode:a,nodes:l,marks:c})}function ut(t,e){return e.nodes[t]||e.marks[t]||null}function ht(t,e){return Array.isArray(e)?e.some((e=>{const n="string"===typeof e?e:e.name;return n===t.name})):e}const dt=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,((t,e,i,o)=>{var s,a;const l=(null===(a=(s=t.type.spec).toText)||void 0===a?void 0:a.call(s,{node:t,pos:e,parent:i,index:o}))||t.textContent||"%leaf%";n+=l.slice(0,Math.max(0,r-e))})),n};function ft(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class pt{constructor(t){this.find=t.find,this.handler=t.handler}}const mt=(t,e)=>{if(ft(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function gt(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(e=c.nodeBefore||c.nodeAfter)||void 0===e?void 0:e.marks.find((t=>t.type.spec.code))))return!1;let u=!1;const h=dt(c)+o;return s.forEach((t=>{if(u)return;const e=mt(h,t.find);if(!e)return;const s=l.state.tr,c=Y({state:l.state,transaction:s}),d={from:r-(e[0].length-o.length),to:i},{commands:f,chain:p,can:m}=new X({editor:n,state:c}),g=t.handler({state:c,range:d,match:e,commands:f,chain:p,can:m});null!==g&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),l.dispatch(s),u=!0)})),u}function yt(t){const{editor:e,rules:n}=t,i=new r.Sy({state:{init(){return null},apply(t,e){const n=t.getMeta(i);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput(t,r,o,s){return gt({editor:e,from:r,to:o,text:s,rules:n,plugin:i})},handleDOMEvents:{compositionend:t=>(setTimeout((()=>{const{$cursor:r}=t.state.selection;r&&gt({editor:e,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(t,r){if("Enter"!==r.key)return!1;const{$cursor:o}=t.state.selection;return!!o&&gt({editor:e,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function vt(t){return"number"===typeof t}class wt{constructor(t){this.find=t.find,this.handler=t.handler}}const bt=(t,e)=>{if(ft(e))return[...t.matchAll(e)];const n=e(t);return n?n.map((e=>{const n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]};function _t(t){const{editor:e,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new X({editor:e,state:n}),h=[];n.doc.nodesBetween(r,i,((t,e)=>{if(!t.isTextblock||t.type.spec.code)return;const d=Math.max(r,e),f=Math.min(i,e+t.content.size),p=t.textBetween(d-e,f-e,void 0,"￼"),m=bt(p,o.find);m.forEach((t=>{if(void 0===t.index)return;const e=d+t.index+1,r=e+t[0].length,i={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},f=o.handler({state:n,range:i,match:t,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});h.push(f)}))}));const d=h.every((t=>null!==t));return d}function St(t){const{editor:e,rules:n}=t;let i=null,o=!1,s=!1,a=new ClipboardEvent("paste"),l=new DragEvent("drop");const c=n.map((t=>new r.Sy({view(t){const e=e=>{var n;i=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:(t,e)=>(s=i===t.dom.parentElement,l=e,!1),paste:(t,e)=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return a=e,o=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,i)=>{const c=n[0],u="paste"===c.getMeta("uiEvent")&&!o,h="drop"===c.getMeta("uiEvent")&&!s;if(!u&&!h)return;const d=r.doc.content.findDiffStart(i.doc.content),f=r.doc.content.findDiffEnd(i.doc.content);if(!vt(d)||!f||d===f.b)return;const p=i.tr,m=Y({state:i,transaction:p}),g=_t({editor:e,state:m,from:Math.max(d-1,0),to:f.b-1,rule:t,pasteEvent:a,dropEvent:l});return g&&p.steps.length?(l=new DragEvent("drop"),a=new ClipboardEvent("paste"),p):void 0}})));return c}function Et(t){const e=t.filter(((e,n)=>t.indexOf(e)!==n));return[...new Set(e)]}class At{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=At.resolve(t),this.schema=ct(this.extensions,e),this.extensions.forEach((t=>{var e;this.editor.extensionStorage[t.name]=t.storage;const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ut(t.name,this.schema)};if("mark"===t.type){const r=null===(e=it(K(t,"keepOnSplit",n)))||void 0===e||e;r&&this.splittableMarks.push(t.name)}const r=K(t,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=K(t,"onCreate",n);i&&this.editor.on("create",i);const o=K(t,"onUpdate",n);o&&this.editor.on("update",o);const s=K(t,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=K(t,"onTransaction",n);a&&this.editor.on("transaction",a);const l=K(t,"onFocus",n);l&&this.editor.on("focus",l);const c=K(t,"onBlur",n);c&&this.editor.on("blur",c);const u=K(t,"onDestroy",n);u&&this.editor.on("destroy",u)}))}static resolve(t){const e=At.sort(At.flatten(t)),n=Et(e.map((t=>t.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((t=>`'${t}'`)).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map((t=>{const e={name:t.name,options:t.options,storage:t.storage},n=K(t,"addExtensions",e);return n?[t,...this.flatten(n())]:t})).flat(10)}static sort(t){const e=100;return t.sort(((t,n)=>{const r=K(t,"priority")||e,i=K(n,"priority")||e;return r>i?-1:r<i?1:0}))}get commands(){return this.extensions.reduce(((t,e)=>{const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ut(e.name,this.schema)},r=K(e,"addCommands",n);return r?{...t,...r()}:t}),{})}get plugins(){const{editor:t}=this,e=At.sort([...this.extensions].reverse()),n=[],r=[],i=e.map((e=>{const i={name:e.name,options:e.options,storage:e.storage,editor:t,type:ut(e.name,this.schema)},s=[],a=K(e,"addKeyboardShortcuts",i);let l={};if("mark"===e.type&&e.config.exitable&&(l.ArrowRight=()=>Nn.handleExit({editor:t,mark:e})),a){const e=Object.fromEntries(Object.entries(a()).map((([e,n])=>[e,()=>n({editor:t})])));l={...l,...e}}const c=(0,o.h)(l);s.push(c);const u=K(e,"addInputRules",i);ht(e,t.options.enableInputRules)&&u&&n.push(...u());const h=K(e,"addPasteRules",i);ht(e,t.options.enablePasteRules)&&h&&r.push(...h());const d=K(e,"addProseMirrorPlugins",i);if(d){const t=d();s.push(...t)}return s})).flat();return[yt({editor:t,rules:n}),...St({editor:t,rules:r}),...i]}get attributes(){return Q(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=J(this.extensions);return Object.fromEntries(e.filter((t=>!!K(t,"addNodeView"))).map((e=>{const n=this.attributes.filter((t=>t.type===e.name)),r={name:e.name,options:e.options,storage:e.storage,editor:t,type:tt(e.name,this.schema)},i=K(e,"addNodeView",r);if(!i)return[];const o=(r,o,s,a)=>{const l=nt(r,n);return i()({editor:t,node:r,getPos:s,decorations:a,HTMLAttributes:l,extension:e})};return[e.name,o]})))}}function xt(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ct(t){return"Object"===xt(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function Tt(t,e){const n={...t};return Ct(t)&&Ct(e)&&Object.keys(e).forEach((r=>{Ct(e[r])?r in t?n[r]=Tt(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})})),n}class Mt{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(K(this,"addOptions",{name:this.name}))),this.storage=it(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Mt(t)}configure(t={}){const e=this.extend();return e.options=Tt(this.options,t),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Mt(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(K(e,"addOptions",{name:e.name})),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}}function It(t,e,n){const{from:r,to:i}=e,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,((t,n,c,u)=>{var h;const d=null===s||void 0===s?void 0:s[t.type.name];d?(t.isBlock&&!l&&(a+=o,l=!0),c&&(a+=d({node:t,pos:n,parent:c,index:u,range:e}))):t.isText?(a+=null===(h=null===t||void 0===t?void 0:t.text)||void 0===h?void 0:h.slice(Math.max(r,n)-n,i-n),l=!1):t.isBlock&&!l&&(a+=o,l=!0)})),a}function kt(t){return Object.fromEntries(Object.entries(t.nodes).filter((([,t])=>t.spec.toText)).map((([t,e])=>[t,e.spec.toText])))}const Ot=Mt.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map((t=>t.$from.pos))),a=Math.max(...o.map((t=>t.$to.pos))),l=kt(n),c={from:s,to:a};return It(r,c,{textSerializers:l})}}})]}}),Rt=()=>({editor:t,view:e})=>(requestAnimationFrame((()=>{var n;t.isDestroyed||(e.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),Dt=(t=!1)=>({commands:e})=>e.setContent("",t),Nt=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return!n||(i.forEach((({$from:n,$to:r})=>{t.doc.nodesBetween(n.pos,r.pos,((t,n)=>{if(t.type.isText)return;const{doc:r,mapping:i}=e,o=r.resolve(i.map(n)),s=r.resolve(i.map(n+t.nodeSize)),l=o.blockRange(s);if(!l)return;const c=(0,a.k9)(l);if(t.type.isTextblock){const{defaultType:t}=o.parent.contentMatchAt(o.index());e.setNodeMarkup(l.start,t)}(c||0===c)&&e.lift(l,c)}))})),!0)},Pt=t=>e=>t(e),Lt=()=>({state:t,dispatch:e})=>A(t,e),Bt=(t,e)=>({editor:n,tr:i})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);i.deleteRange(t.from,t.to);const a=i.mapping.map(e);return i.insert(a,s.content),i.setSelection(new r.Bs(i.doc.resolve(a-1))),!0},Ut=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1){const n=i.node(o);if(n.type===r.type){if(e){const e=i.before(o),n=i.after(o);t.delete(e,n).scrollIntoView()}return!0}}return!1},Ft=t=>({tr:e,state:n,dispatch:r})=>{const i=tt(t,n.schema),o=e.selection.$anchor;for(let t=o.depth;t>0;t-=1){const n=o.node(t);if(n.type===i){if(r){const n=o.before(t),r=o.after(t);e.delete(n,r).scrollIntoView()}return!0}}return!1},zt=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Vt=()=>({state:t,dispatch:e})=>l(t,e),Ht=()=>({commands:t})=>t.keyboardShortcut("Enter"),jt=()=>({state:t,dispatch:e})=>E(t,e);function Wt(t,e,n={strict:!0}){const r=Object.keys(e);return!r.length||r.every((r=>n.strict?e[r]===t[r]:ft(e[r])?e[r].test(t[r]):e[r]===t[r]))}function Gt(t,e,n={}){return t.find((t=>t.type===e&&Wt(t.attrs,n)))}function $t(t,e,n={}){return!!Gt(t,e,n)}function qt(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=Gt([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,l=s+r.node.nodeSize;Gt([...r.node.marks],e,n);while(o>0&&i.isInSet(t.parent.child(o-1).marks))o-=1,s-=t.parent.child(o).nodeSize;while(a<t.parent.childCount&&$t([...t.parent.child(a).marks],e,n))l+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function Yt(t,e){if("string"===typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Xt=(t,e={})=>({tr:n,state:i,dispatch:o})=>{const s=Yt(t,i.schema),{doc:a,selection:l}=n,{$from:c,from:u,to:h}=l;if(o){const t=qt(c,s,e);if(t&&t.from<=u&&t.to>=h){const e=r.Bs.create(a,t.from,t.to);n.setSelection(e)}}return!0},Zt=t=>e=>{const n="function"===typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1};function Kt(t){return t instanceof r.Bs}function Jt(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Qt(t,e=null){if(!e)return null;const n=r.Y1.atStart(t),i=r.Y1.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return i;const o=n.from,s=i.to;return"all"===e?r.Bs.create(t,Jt(0,o,s),Jt(t.content.size,o,s)):r.Bs.create(t,Jt(e,o,s),Jt(e,o,s))}function te(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ee=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{te()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null===e||void 0===e?void 0:e.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===t||!1===t)return!0;if(o&&null===t&&!Kt(n.state.selection))return s(),!0;const a=Qt(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return o&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},ne=(t,e)=>n=>t.every(((t,r)=>e(t,{...n,index:r}))),re=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function ie(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function oe(t,e,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof t&&null!==t)try{return Array.isArray(t)&&t.length>0?s.HY.fromArray(t.map((t=>e.nodeFromJSON(t)))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),oe("",e,n)}if("string"===typeof t){const r=s.aw.fromSchema(e);return n.slice?r.parseSlice(ie(t),n.parseOptions).content:r.parse(ie(t),n.parseOptions)}return oe("",e,n)}function se(t,e,n){const i=t.steps.length-1;if(i<e)return;const o=t.steps[i];if(!(o instanceof a.Pu||o instanceof a.FC))return;const s=t.mapping.maps[i];let l=0;s.forEach(((t,e,n,r)=>{0===l&&(l=r)})),t.setSelection(r.Y1.near(t.doc.resolve(l),n))}const ae=t=>t.toString().startsWith("<"),le=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const i=oe(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;let{from:s,to:a}="number"===typeof t?{from:t,to:t}:{from:t.from,to:t.to},l=!0,c=!0;const u=ae(i)?i:[i];if(u.forEach((t=>{t.check(),l=!!l&&(t.isText&&0===t.marks.length),c=!!c&&t.isBlock})),s===a&&c){const{parent:t}=r.doc.resolve(s),e=t.isTextblock&&!t.type.spec.code&&!t.childCount;e&&(s-=1,a+=1)}l?Array.isArray(e)?r.insertText(e.map((t=>t.text||"")).join(""),s,a):"object"===typeof e&&e&&e.text?r.insertText(e.text,s,a):r.insertText(e,s,a):r.replaceWith(s,a,i),n.updateSelection&&se(r,r.steps.length-1,-1)}return!0},ce=()=>({state:t,dispatch:e})=>v(t,e),ue=()=>({state:t,dispatch:e})=>w(t,e),he=()=>({state:t,dispatch:e})=>u(t,e),de=()=>({state:t,dispatch:e})=>m(t,e),fe=()=>({tr:t,state:e,dispatch:n})=>{try{const r=(0,a.GJ)(e.doc,e.selection.$from.pos,-1);return null!==r&&void 0!==r&&(t.join(r,2),n&&n(t),!0)}catch{return!1}},pe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=(0,a.GJ)(t.doc,t.selection.$from.pos,1);return null!==r&&void 0!==r&&(n.join(r,2),e&&e(n),!0)}catch(r){return!1}};function me(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function ge(t){const e=t.split(/-(?!$)/);let n,r,i,o,s=e[e.length-1];"Space"===s&&(s=" ");for(let a=0;a<e.length-1;a+=1){const t=e[a];if(/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))n=!0;else if(/^(c|ctrl|control)$/i.test(t))r=!0;else if(/^s(hift)?$/i.test(t))i=!0;else{if(!/^mod$/i.test(t))throw new Error(`Unrecognized modifier name: ${t}`);te()||me()?o=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}const ye=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=ge(t).split(/-(?!$)/),s=o.find((t=>!["Alt","Ctrl","Meta","Shift"].includes(t))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction((()=>{n.someProp("handleKeyDown",(t=>t(n,a)))}));return null===l||void 0===l||l.steps.forEach((t=>{const e=t.map(r.mapping);e&&i&&r.maybeStep(e)})),!0};function ve(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?tt(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,((t,e)=>{if(t.isText)return;const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize);a.push({node:t,from:n,to:o})}));const l=i-r,c=a.filter((t=>!s||s.name===t.node.type.name)).filter((t=>Wt(t.node.attrs,n,{strict:!1})));if(o)return!!c.length;const u=c.reduce(((t,e)=>t+e.to-e.from),0);return u>=l}const we=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema),o=ve(n,i,e);return!!o&&b(n,r)},be=()=>({state:t,dispatch:e})=>x(t,e),_e=t=>({state:e,dispatch:n})=>{const r=tt(t,e.schema);return W(r)(e,n)},Se=()=>({state:t,dispatch:e})=>_(t,e);function Ee(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ae(t,e){const n="string"===typeof e?[e]:e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}const xe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Ee("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=tt(t,r.schema)),"mark"===a&&(s=Yt(t,r.schema)),i&&n.selection.ranges.forEach((t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,((t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,Ae(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((i=>{s===i.type&&n.addMark(r,r+t.nodeSize,s.create(Ae(i.attrs,e)))}))}))})),!0)},Ce=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Te=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),Me=()=>({state:t,dispatch:e})=>d(t,e),Ie=()=>({state:t,dispatch:e})=>g(t,e),ke=()=>({state:t,dispatch:e})=>M(t,e),Oe=()=>({state:t,dispatch:e})=>N(t,e),Re=()=>({state:t,dispatch:e})=>D(t,e);function De(t,e,n={}){return oe(t,e,{slice:!1,parseOptions:n})}const Ne=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,a=De(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!e),!0};function Pe(t,e){const n=Yt(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,(t=>{s.push(...t.marks)}));const a=s.find((t=>t.type.name===n.name));return a?{...a.attrs}:{}}function Le(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Be(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ue(t){return e=>Be(e.$from,t)}function Fe(t,e){const n=s.PW.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument(),i=r.createElement("div");return i.appendChild(n),i.innerHTML}function ze(t,e){const n={from:0,to:t.content.size};return It(t,n,e)}function Ve(t,e){const n=tt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,(t=>{o.push(t)}));const s=o.reverse().find((t=>t.type.name===n.name));return s?{...s.attrs}:{}}function He(t,e){const n=Ee("string"===typeof e?e:e.name,t.schema);return"node"===n?Ve(t,e):"mark"===n?Pe(t,e):{}}function je(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach((e=>{const i=n.resolve(t-1),o=qt(i,e.type);o&&r.push({mark:e,...o})})):n.nodesBetween(t,e,((t,e)=>{r.push(...t.marks.map((n=>({from:e,to:e+t.nodeSize,mark:n}))))})),r}function We(t,e,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=t.find((t=>t.type===e&&t.name===n));return!!r&&r.attribute.keepOnSplit})))}function Ge(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Yt(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter((t=>!o||o.name===t.type.name)).find((t=>Wt(t.attrs,n,{strict:!1})));let s=0;const a=[];if(i.forEach((({$from:e,$to:n})=>{const r=e.pos,i=n.pos;t.doc.nodesBetween(r,i,((t,e)=>{if(!t.isText&&!t.marks.length)return;const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize),l=o-n;s+=l,a.push(...t.marks.map((t=>({mark:t,from:n,to:o}))))}))})),0===s)return!1;const l=a.filter((t=>!o||o.name===t.mark.type.name)).filter((t=>Wt(t.mark.attrs,n,{strict:!1}))).reduce(((t,e)=>t+e.to-e.from),0),c=a.filter((t=>!o||t.mark.type!==o&&t.mark.type.excludes(o))).reduce(((t,e)=>t+e.to-e.from),0),u=l>0?l+c:l;return u>=s}function $e(t,e,n={}){if(!e)return ve(t,null,n)||Ge(t,null,n);const r=Ee(e,t.schema);return"node"===r?ve(t,e,n):"mark"===r&&Ge(t,e,n)}function qe(t,e){const{nodeExtensions:n}=J(e),r=n.find((e=>e.name===t));if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=it(K(r,"group",i));return"string"===typeof o&&o.split(" ").includes("list")}function Ye(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function Xe(t){return t instanceof r.qv}function Ze(t,e,n){const r=0,i=t.state.doc.content.size,o=Jt(e,r,i),s=Jt(n,r,i),a=t.coordsAtPos(o),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),h=Math.min(a.left,l.left),d=Math.max(a.right,l.right),f=d-h,p=u-c,m=h,g=c,y={top:c,bottom:u,left:h,right:d,width:f,height:p,x:m,y:g};return{...y,toJSON:()=>y}}function Ke(t,e,n){var r;const{selection:i}=e;let o=null;if(Kt(i)&&(o=i.$cursor),o){const e=null!==(r=t.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(e)||!e.some((t=>t.type.excludes(n)))}const{ranges:s}=i;return s.some((({$from:e,$to:r})=>{let i=0===e.depth&&(t.doc.inlineContent&&t.doc.type.allowsMarkType(n));return t.doc.nodesBetween(e.pos,r.pos,((t,e,r)=>{if(i)return!1;if(t.isInline){const e=!r||r.type.allowsMarkType(n),o=!!n.isInSet(t.marks)||!t.marks.some((t=>t.type.excludes(n)));i=e&&o}return!i})),i}))}const Je=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,l=Yt(t,r.schema);if(i)if(s){const t=Pe(r,l);n.addStoredMark(l.create({...t,...e}))}else a.forEach((t=>{const i=t.$from.pos,o=t.$to.pos;r.doc.nodesBetween(i,o,((t,r)=>{const s=Math.max(r,i),a=Math.min(r+t.nodeSize,o),c=t.marks.find((t=>t.type===l));c?t.marks.forEach((t=>{l===t.type&&n.addMark(s,a,l.create({...t.attrs,...e}))})):n.addMark(s,a,l.create(e))}))}));return Ke(r,n,l)},Qe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),tn=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=tt(t,n.schema);return o.isTextblock?i().command((({commands:t})=>{const r=L(o,e)(n);return!!r||t.clearNodes()})).command((({state:t})=>L(o,e)(t,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},en=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,i=Jt(t,0,n.content.size),o=r.qv.create(n,i);e.setSelection(o)}return!0},nn=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:i,to:o}="number"===typeof t?{from:t,to:t}:t,s=r.Bs.atStart(n).from,a=r.Bs.atEnd(n).to,l=Jt(i,s,a),c=Jt(o,s,a),u=r.Bs.create(n,l,c);e.setSelection(u)}return!0},rn=t=>({state:e,dispatch:n})=>{const r=tt(t,e.schema);return q(r)(e,n)};function on(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter((t=>null===e||void 0===e?void 0:e.includes(t.type.name)));t.tr.ensureMarks(r)}}const sn=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:o})=>{const{selection:s,doc:l}=e,{$from:c,$to:u}=s,h=o.extensionManager.attributes,d=We(h,c.node().type.name,c.node().attrs);if(s instanceof r.qv&&s.node.isBlock)return!(!c.parentOffset||!(0,a.Ax)(l,c.pos))&&(i&&(t&&on(n,o.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(i){const i=u.parentOffset===u.parent.content.size;s instanceof r.Bs&&e.deleteSelection();const l=0===c.depth?void 0:Le(c.node(-1).contentMatchAt(c.indexAfter(-1)));let h=i&&l?[{type:l,attrs:d}]:void 0,f=(0,a.Ax)(e.doc,e.mapping.map(c.pos),1,h);if(h||f||!(0,a.Ax)(e.doc,e.mapping.map(c.pos),1,l?[{type:l}]:void 0)||(f=!0,h=l?[{type:l,attrs:d}]:void 0),f&&(e.split(e.mapping.map(c.pos),1,h),l&&!i&&!c.parentOffset&&c.parent.type!==l)){const t=e.mapping.map(c.before()),n=e.doc.resolve(t);c.node(-1).canReplaceWith(n.index(),n.index()+1,l)&&e.setNodeMarkup(e.mapping.map(c.before()),l)}t&&on(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},an=t=>({tr:e,state:n,dispatch:i,editor:o})=>{var l;const c=tt(t,n.schema),{$from:u,$to:h}=n.selection,d=n.selection.node;if(d&&d.isBlock||u.depth<2||!u.sameParent(h))return!1;const f=u.node(-1);if(f.type!==c)return!1;const p=o.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let t=s.HY.empty;const n=u.index(-1)?1:u.index(-2)?2:3;for(let e=u.depth-n;e>=u.depth-3;e-=1)t=s.HY.from(u.node(e).copy(t));const i=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,o=We(p,u.node().type.name,u.node().attrs),a=(null===(l=c.contentMatch.defaultType)||void 0===l?void 0:l.createAndFill(o))||void 0;t=t.append(s.HY.from(c.createAndFill(null,a)||void 0));const h=u.before(u.depth-(n-1));e.replace(h,u.after(-i),new s.p2(t,4-n,0));let d=-1;e.doc.nodesBetween(h,e.doc.content.size,((t,e)=>{if(d>-1)return!1;t.isTextblock&&0===t.content.size&&(d=e+1)})),d>-1&&e.setSelection(r.Bs.near(e.doc.resolve(d))),e.scrollIntoView()}return!0}const m=h.pos===u.end()?f.contentMatchAt(0).defaultType:null,g=We(p,f.type.name,f.attrs),y=We(p,u.node().type.name,u.node().attrs);e.delete(u.pos,h.pos);const v=m?[{type:c,attrs:g},{type:m,attrs:y}]:[{type:c,attrs:g}];if(!(0,a.Ax)(e.doc,u.pos,2))return!1;if(i){const{selection:t,storedMarks:r}=n,{splittableMarks:s}=o.extensionManager,a=r||t.$to.parentOffset&&t.$from.marks();if(e.split(u.pos,2,v).scrollIntoView(),!a||!i)return!0;const l=a.filter((t=>s.includes(t.type.name)));e.ensureMarks(l)}return!0},ln=(t,e)=>{const n=Ue((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(t.doc,n.pos);return!o||(t.join(n.pos),!0)},cn=(t,e)=>{const n=Ue((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(t.doc,r);return!o||(t.join(r),!0)},un=(t,e,n,r={})=>({editor:i,tr:o,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=tt(t,s.schema),p=tt(e,s.schema),{selection:m,storedMarks:g}=s,{$from:y,$to:v}=m,w=y.blockRange(v),b=g||m.$to.parentOffset&&m.$from.marks();if(!w)return!1;const _=Ue((t=>qe(t.type.name,h)))(m);if(w.depth>=1&&_&&w.depth-_.depth<=1){if(_.node.type===f)return c.liftListItem(p);if(qe(_.node.type.name,h)&&f.validContent(_.node.content)&&a)return l().command((()=>(o.setNodeMarkup(_.pos,f),!0))).command((()=>ln(o,f))).command((()=>cn(o,f))).run()}return n&&b&&a?l().command((()=>{const t=u().wrapInList(f,r),e=b.filter((t=>d.includes(t.type.name)));return o.ensureMarks(e),!!t||c.clearNodes()})).wrapInList(f,r).command((()=>ln(o,f))).command((()=>cn(o,f))).run():l().command((()=>{const t=u().wrapInList(f,r);return!!t||c.clearNodes()})).wrapInList(f,r).command((()=>ln(o,f))).command((()=>cn(o,f))).run()},hn=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Yt(t,r.schema),a=Ge(r,s,e);return a?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},dn=(t,e,n={})=>({state:r,commands:i})=>{const o=tt(t,r.schema),s=tt(e,r.schema),a=ve(r,o,n);return a?i.setNode(s):i.setNode(o,n)},fn=(t,e={})=>({state:n,commands:r})=>{const i=tt(t,n.schema),o=ve(n,i,e);return o?r.lift(i):r.wrapIn(i,e)},pn=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const e=t.tr,n=o.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(o.text){const n=e.doc.resolve(o.from).marks();e.replaceWith(o.from,o.to,t.schema.text(o.text,n))}else e.delete(o.from,o.to)}return!0}}return!1},mn=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},gn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Yt(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&s){let{from:t,to:e}=a;const r=null===(o=c.marks().find((t=>t.type===l)))||void 0===o?void 0:o.attrs,i=qt(c,l,r);i&&(t=i.from,e=i.to),n.removeMark(t,e,l)}else h.forEach((t=>{n.removeMark(t.$from.pos,t.$to.pos,l)}));return n.removeStoredMark(l),!0},yn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=Ee("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=tt(t,r.schema)),"mark"===a&&(s=Yt(t,r.schema)),i&&n.selection.ranges.forEach((t=>{const i=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(i,a,((t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach((o=>{if(s===o.type){const l=Math.max(r,i),c=Math.min(r+t.nodeSize,a);n.addMark(l,c,s.create({...o.attrs,...e}))}}))}))})),!0)},vn=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema);return P(i,e)(n,r)},wn=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema);return H(i,e)(n,r)};var bn=Object.freeze({__proto__:null,blur:Rt,clearContent:Dt,clearNodes:Nt,command:Pt,createParagraphNear:Lt,cut:Bt,deleteCurrentNode:Ut,deleteNode:Ft,deleteRange:zt,deleteSelection:Vt,enter:Ht,exitCode:jt,extendMarkRange:Xt,first:Zt,focus:ee,forEach:ne,insertContent:re,insertContentAt:le,joinUp:ce,joinDown:ue,joinBackward:he,joinForward:de,joinItemBackward:fe,joinItemForward:pe,keyboardShortcut:ye,lift:we,liftEmptyBlock:be,liftListItem:_e,newlineInCode:Se,resetAttributes:xe,scrollIntoView:Ce,selectAll:Te,selectNodeBackward:Me,selectNodeForward:Ie,selectParentNode:ke,selectTextblockEnd:Oe,selectTextblockStart:Re,setContent:Ne,setMark:Je,setMeta:Qe,setNode:tn,setNodeSelection:en,setTextSelection:nn,sinkListItem:rn,splitBlock:sn,splitListItem:an,toggleList:un,toggleMark:hn,toggleNode:dn,toggleWrap:fn,undoInputRule:pn,unsetAllMarks:mn,unsetMark:gn,updateAttributes:yn,wrapIn:vn,wrapInList:wn});const _n=Mt.create({name:"commands",addCommands(){return{...bn}}}),Sn=Mt.create({name:"editable",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),En=Mt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new r.Sy({key:new r.H$("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),An=Mt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first((({commands:t})=>[()=>t.undoInputRule(),()=>t.command((({tr:e})=>{const{selection:n,doc:i}=e,{empty:o,$anchor:s}=n,{pos:a,parent:l}=s,c=s.parent.isTextblock?e.doc.resolve(a-1):s,u=c.parent.type.spec.isolating,h=s.pos-s.parentOffset,d=u&&1===c.parent.childCount?h===s.pos:r.Y1.atStart(i).from===a;return!(!(o&&d&&l.type.isTextblock)||l.textContent.length)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()])),e=()=>this.editor.commands.first((({commands:t})=>[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()])),n=()=>this.editor.commands.first((({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()])),i={Enter:n,"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},s={...i,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return te()||me()?s:o},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clearDocument"),appendTransaction:(t,e,n)=>{const i=t.some((t=>t.docChanged))&&!e.doc.eq(n.doc);if(!i)return;const{empty:o,from:s,to:a}=e.selection,l=r.Y1.atStart(e.doc).from,c=r.Y1.atEnd(e.doc).to,u=s===l&&a===c;if(o||!u)return;const h=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(!h)return;const d=n.tr,f=Y({state:n,transaction:d}),{commands:p}=new X({editor:this.editor,state:f});return p.clearNodes(),d.steps.length?d:void 0}})]}}),xn=Mt.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Cn=Object.freeze({__proto__:null,ClipboardTextSerializer:Ot,Commands:_n,Editable:Sn,FocusEvents:En,Keymap:An,Tabindex:xn});const Tn='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function Mn(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==r)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class In extends Z{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Mn(Tn,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=rt(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"===typeof t?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(e)))});this.view.updateState(n)}createExtensionManager(){const t=this.options.enableCoreExtensions?Object.values(Cn):[],e=[...t,...this.options.extensions].filter((t=>["extension","node","mark"].includes(null===t||void 0===t?void 0:t.type)));this.extensionManager=new At(e,this)}createCommandManager(){this.commandManager=new X({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=De(this.options.content,this.schema,this.options.parseOptions),e=Qt(t,this.options.autofocus);this.view=new i.tk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r.yy.create({doc:t,selection:e||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)})):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),i=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return He(this.state,t)}isActive(t,e){const n="string"===typeof t?t:null,r="string"===typeof t?e:t;return $e(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Fe(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e="\n\n",textSerializers:n={}}=t||{};return ze(this.state.doc,{blockSeparator:e,textSerializers:{...kt(this.schema),...n}})}get isEmpty(){return Ye(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function kn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];if(s){const r=a.search(/\S/),l=n.from+a.indexOf(s),c=l+s.length,u=je(n.from,n.to,e.doc).filter((e=>{const n=e.mark.type.excluded;return n.find((n=>n===t.type&&n!==e.mark.type))})).filter((t=>t.to>l));if(u.length)return null;c<n.to&&o.delete(c,n.to),l>n.from&&o.delete(n.from+r,l);const h=n.from+r+s.length;o.addMark(n.from+r,h,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function On(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const t=r[0].lastIndexOf(r[1]);let e=s+t;e>a?e=a:a=e+r[1].length;const n=r[0][r[0].length-1];o.insertText(n,s+r[0].length-1),o.replaceWith(e,a,l)}else r[0]&&o.insert(s-1,t.type.create(i)).delete(o.mapping.map(s),o.mapping.map(a));o.scrollIntoView()}})}function Rn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=it(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Dn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=it(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from),c=l.blockRange(),u=c&&(0,a.nd)(c,t.type,o);if(!u)return null;if(s.wrap(c,u),t.keepMarks&&t.editor){const{selection:n,storedMarks:r}=e,{splittableMarks:i}=t.editor.extensionManager,o=r||n.$to.parentOffset&&n.$from.marks();if(o){const t=o.filter((t=>i.includes(t.type.name)));s.ensureMarks(t)}}if(t.keepAttributes){const e="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";i().updateAttributes(e,o).run()}const h=s.doc.resolve(n.from-1).nodeBefore;h&&h.type===t.type&&(0,a.Mn)(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,h))&&s.join(n.from-1)}})}class Nn{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(K(this,"addOptions",{name:this.name}))),this.storage=it(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Nn(t)}configure(t={}){const e=this.extend();return e.options=Tt(this.options,t),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Nn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(K(e,"addOptions",{name:e.name})),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:n}=t.state,r=t.state.selection.$from,i=r.pos===r.end();if(i){const i=r.marks(),o=!!i.find((t=>(null===t||void 0===t?void 0:t.type.name)===e.name));if(!o)return!1;const s=i.find((t=>(null===t||void 0===t?void 0:t.type.name)===e.name));return s&&n.removeStoredMark(s),n.insertText(" ",r.pos),t.view.dispatch(n),!0}return!1}}class Pn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(K(this,"addOptions",{name:this.name}))),this.storage=it(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Pn(t)}configure(t={}){const e=this.extend();return e.options=Tt(this.options,t),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Pn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(K(e,"addOptions",{name:e.name})),e.storage=it(K(e,"addStorage",{name:e.name,options:e.options})),e}}function Ln(t){return new wt({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const o=it(t.getAttributes,void 0,r,i);if(!1===o||null===o)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const r=l.search(/\S/),i=n.from+l.indexOf(a),u=i+a.length,h=je(n.from,n.to,e.doc).filter((e=>{const n=e.mark.type.excluded;return n.find((n=>n===t.type&&n!==e.mark.type))})).filter((t=>t.to>i));if(h.length)return null;u<n.to&&s.delete(u,n.to),i>n.from&&s.delete(n.from+r,i),c=n.from+r+a.length,s.addMark(n.from+r,c,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}},2019:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2066),i=n(157);const o=r.hj.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=(null===t||void 0===t?void 0:t.mode)||this.options.mode;if("textSize"===n){const t=e.textBetween(0,e.content.size,void 0," ");return t.length}return e.nodeSize},this.storage.words=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," "),r=n.split(" ").filter((t=>""!==t));return r.length}},addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("characterCount"),filterTransaction:(t,e)=>{const n=this.options.limit;if(!t.docChanged||0===n||null===n||void 0===n)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=n)return!0;if(r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r)return!1;const o=t.getMeta("paste");if(!o)return!1;const s=t.selection.$head.pos,a=i-n,l=s-a,c=s;t.deleteRange(l,c);const u=this.storage.characters({node:t.doc});return!(u>n)}})]}})},5776:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(2066),i=(n(7658),n(8954)),o=n(1460),s=n(157),a=(n(114),n(7195)),l=n(1811),c=n(1383);const u=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),i=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(i,null),e},h=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),d=/^#[0-9a-fA-F]{6}$/,f=(t,e,n,r)=>{const s=l.Gt.getState(t),u=s.doc,h=[];return null!=s.snapshot||null!=s.prevSnapshot||null===s.binding?o.EH.create(t.doc,[]):(e.getStates().forEach(((e,l)=>{if(l!==u.clientID&&null!=e.cursor){const f=e.user||{};null==f.color?f.color="#ffa500":d.test(f.color)||console.warn("A user uses an unsupported color format",f),null==f.name&&(f.name=`User: ${l}`);let p=(0,a.SF)(u,s.type,i.og(e.cursor.anchor),s.binding.mapping),m=(0,a.SF)(u,s.type,i.og(e.cursor.head),s.binding.mapping);if(null!==p&&null!==m){const e=c.Fp(t.doc.content.size-1,0);p=c.VV(p,e),m=c.VV(m,e),h.push(o.p.widget(m,(()=>n(f)),{key:l+"",side:10}));const i=c.VV(p,m),s=c.Fp(p,m);h.push(o.p.inline(i,s,r(f),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),o.EH.create(t.doc,h))},p=(t,{cursorBuilder:e=u,selectionBuilder:n=h,getSelection:r=(t=>t.selection)}={},o="cursor")=>new s.Sy({key:l.uJ,state:{init(r,i){return f(i,t,e,n)},apply(r,i,o,s){const a=l.Gt.getState(s),c=r.getMeta(l.uJ);return a&&a.isChangeOrigin||c&&c.awarenessUpdated?f(s,t,e,n):i.map(r.mapping,r.doc)}},props:{decorations:t=>l.uJ.getState(t)},view:e=>{const n=()=>{e.docView&&(0,a.US)(e,l.uJ,{awarenessUpdated:!0})},s=()=>{const n=l.Gt.getState(e.state),s=t.getLocalState()||{};if(null!=n.binding)if(e.hasFocus()){const l=r(e.state),c=(0,a.JR)(l.anchor,n.type,n.binding.mapping),u=(0,a.JR)(l.head,n.type,n.binding.mapping);null!=s.cursor&&i.Uq(i.og(s.cursor.anchor),c)&&i.Uq(i.og(s.cursor.head),u)||t.setLocalStateField(o,{anchor:c,head:u})}else null!=s.cursor&&null!==(0,a.SF)(n.doc,n.type,i.og(s.cursor.anchor),n.binding.mapping)&&t.setLocalStateField(o,null)};return t.on("change",n),e.dom.addEventListener("focusin",s),e.dom.addEventListener("focusout",s),{update:s,destroy:()=>{e.dom.removeEventListener("focusin",s),e.dom.removeEventListener("focusout",s),t.off("change",n),t.setLocalStateField(o,null)}}}}),m=t=>Array.from(t.entries()).map((([t,e])=>({clientId:t,...e.user}))),g=()=>null,y=r.hj.create({name:"collaborationCursor",addOptions(){return{provider:null,user:{name:null,color:null},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},selectionRender:h,onUpdate:g}},onCreate(){this.options.onUpdate!==g&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor')},addStorage(){return{users:[]}},addCommands(){return{updateUser:t=>()=>(this.options.user=t,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:t=>({editor:e})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),e.commands.updateUser(t))}},addProseMirrorPlugins(){return[p((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=m(this.options.provider.awareness.states),this.options.provider.awareness.on("update",(()=>{this.storage.users=m(this.options.provider.awareness.states)})),this.options.provider.awareness))(),{cursorBuilder:this.options.render,selectionBuilder:this.options.selectionRender})]}})},5808:function(t,e,n){"use strict";n.d(e,{ZP:function(){return J}});var r=n(2066),i=n(1811),o=n(157);n(7658);const s=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}};var a=n(1543),l=n(1383),c=n(1370),u=n(893);const h=/[\uD800-\uDBFF]/,d=/[\uDC00-\uDFFF]/,f=(t,e)=>{let n=0,r=0;while(n<t.length&&n<e.length&&t[n]===e[n])n++;n>0&&h.test(t[n-1])&&n--;while(r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1])r++;return r>0&&d.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},p=f;var m=n(6969),g=n(8954),y=n(7195),v=n(4373),w=n(6413),b=n(7214),_=n(1634);const S=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!g.uY(e.ds,t.id),E=[{light:"#ecd44433",dark:"#ecd444"}],A=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const n=u.Ue();t.forEach((t=>n.add(t))),e=e.filter((t=>!n.has(t)))}t.set(n,v.kw(e))}return t.get(n)},x=(t,{colors:e=E,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:s=(()=>{})}={})=>{let a,l=!1;const c=new o.Sy({props:{editable:t=>{const e=i.Gt.getState(t);return null==e.snapshot&&null==e.prevSnapshot}},key:i.Gt,state:{init:(i,o)=>({type:t,doc:t.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:e,colorMapping:n,permanentUserData:r}),apply:(t,e)=>{const n=t.getMeta(i.Gt);if(void 0!==n){e=Object.assign({},e);for(const t in n)e[t]=n[t]}return e.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==e.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||_.Vs(0,(()=>{null==e.binding||e.binding.isDestroyed||(null==n.restore?e.binding._renderSnapshot(n.snapshot,n.prevSnapshot,e):(e.binding._renderSnapshot(n.snapshot,n.snapshot,e),delete e.restore,delete e.snapshot,delete e.prevSnapshot,e.binding._prosemirrorChanged(e.binding.prosemirrorView.state.doc)))}))),e}},view:e=>{const n=new M(t,e);return null!=a&&clearTimeout(a),a=_.Vs(0,(()=>{n._forceRerender(),e.dispatch(e.state.tr.setMeta(i.Gt,{binding:n})),s()})),{update:()=>{const t=c.getState(e.state);null==t.snapshot&&null==t.prevSnapshot&&(l||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))&&(l=!0,n._prosemirrorChanged(e.state.doc))},destroy:()=>{clearTimeout(a),n.destroy()}}}});return c},C=(t,e,n)=>{if(null!==e&&null!==e.anchor&&null!==e.head){const r=(0,y.SF)(n.doc,n.type,e.anchor,n.mapping),i=(0,y.SF)(n.doc,n.type,e.head,n.mapping);null!==r&&null!==i&&(t=t.setSelection(o.Bs.create(t.doc,r,i)))}},T=(t,e)=>({anchor:(0,y.JR)(e.selection.anchor,t.type,t.mapping),head:(0,y.JR)(e.selection.head,t.type,t.mapping)});class M{constructor(t,e){this.type=t,this.prosemirrorView=e,this.mux=s(),this.isDestroyed=!1,this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=T(this,e.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(w.jU&&null===this._domSelectionInView&&(_.Vs(0,(()=>{this._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),e=this.prosemirrorView._root.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.getClientRects();0===n.length&&e.startContainer&&e.collapsed&&e.selectNodeContents(e.startContainer);const r=e.getBoundingClientRect(),i=b.JU.documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,e){e||(e=g.Ox(g.VG(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(i.Gt,{snapshot:t,prevSnapshot:e}))}unrenderSnapshot(){this.mapping=new Map,this.mux((()=>{const t=this.type.toArray().map((t=>k(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t)),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(t),0,0));e.setMeta(i.Gt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(e)}))}_forceRerender(){this.mapping=new Map,this.mux((()=>{const t=this.type.toArray().map((t=>k(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t)),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(t),0,0));this.prosemirrorView.dispatch(e.setMeta(i.Gt,{isChangeOrigin:!0}))}))}_renderSnapshot(t,e,n){t||(t=g.CO(this.doc)),this.mapping=new Map,this.mux((()=>{this.doc.transact((r=>{const o=n.permanentUserData;o&&o.dss.forEach((t=>{g.UQ(r,t,(t=>{}))}));const s=(t,e)=>{const r="added"===t?o.getUserByClientId(e.client):o.getUserByDeletedId(e);return{user:r,type:t,color:A(n.colorMapping,n.colors,r)}},l=g.ud(this.type,new g.aC(e.ds,t.sv)).map((n=>!n._item.deleted||S(n._item,t)||S(n._item,e)?k(n,this.prosemirrorView.state.schema,new Map,t,e,s):null)).filter((t=>null!==t)),c=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(l),0,0));this.prosemirrorView.dispatch(c.setMeta(i.Gt,{isChangeOrigin:!0}))}),i.Gt)}))}_typeChanged(t,e){const n=i.Gt.getState(this.prosemirrorView.state);0!==t.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux((()=>{const t=(t,e)=>this.mapping.delete(e);g.UQ(e,e.deleteSet,(t=>t.constructor===g.ck&&this.mapping.delete(t.content.type))),e.changed.forEach(t),e.changedParentTypes.forEach(t);const n=this.type.toArray().map((t=>I(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t));let r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(n),0,0));C(r,this.beforeTransactionSelection,this),r=r.setMeta(i.Gt,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)})):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(t){this.mux((()=>{this.doc.transact((()=>{G(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=T(this,this.prosemirrorView.state)}),i.Gt)}))}destroy(){this.isDestroyed=!0,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const I=(t,e,n,r,i,o)=>{const s=n.get(t);if(void 0===s){if(t instanceof g.lt)return k(t,e,n,r,i,o);throw m.Nw()}return s},k=(t,e,n,r,o,s)=>{const a=[],l=t=>{if(t.constructor===g.lt){const i=I(t,e,n,r,o,s);null!==i&&a.push(i)}else{const i=O(t,e,n,r,o,s);null!==i&&i.forEach((t=>{null!==t&&a.push(t)}))}};void 0===r||void 0===o?t.toArray().forEach(l):g.ud(t,new g.aC(o.ds,r.sv)).forEach(l);try{const i=t.getAttributes(r);void 0!==r&&(S(t._item,r)?S(t._item,o)||(i.ychange=s?s("added",t._item.id):{type:"added"}):i.ychange=s?s("removed",t._item.id):{type:"removed"});const l=e.node(t.nodeName,i,a);return n.set(t,l),l}catch(c){return t.doc.transact((e=>{t._item.delete(e)}),i.Gt),n.delete(t),null}},O=(t,e,n,r,o,s)=>{const a=[],l=t.toDelta(r,o,s);try{for(let t=0;t<l.length;t++){const n=l[t],r=[];for(const t in n.attributes)r.push(e.mark(t,n.attributes[t]));a.push(e.text(n.insert,r))}}catch(c){return t.doc.transact((e=>{t._item.delete(e)}),i.Gt),null}return a},R=(t,e)=>{const n=new g.eI,r=t.map((t=>({insert:t.text,attributes:W(t.marks)})));return n.applyDelta(r),e.set(n,t),n},D=(t,e)=>{const n=new g.lt(t.type.name);for(const r in t.attrs){const e=t.attrs[r];null!==e&&"ychange"!==r&&n.setAttribute(r,e)}return n.insert(0,B(t).map((t=>N(t,e)))),e.set(n,t),n},N=(t,e)=>t instanceof Array?R(t,e):D(t,e),P=t=>"object"===typeof t&&null!==t,L=(t,e)=>{const n=Object.keys(t).filter((e=>null!==t[e]));let r=n.length===Object.keys(e).filter((t=>null!==e[t])).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=t[o],a=e[o];r="ychange"===o||s===a||P(s)&&P(a)&&L(s,a)}return r},B=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const t=e[r];if(t.isText){const t=[];for(let n=e[r];r<e.length&&n.isText;n=e[++r])t.push(n);r--,n.push(t)}else n.push(t)}return n},U=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every(((t,n)=>t.insert===e[n].text&&c.XP(t.attributes||{}).length===e[n].marks.length&&e[n].marks.every((e=>L(t.attributes[e.type.name]||{},e.attrs)))))},F=(t,e)=>{if(t instanceof g.lt&&!(e instanceof Array)&&$(t,e)){const n=B(e);return t._length===n.length&&L(t.getAttributes(),e.attrs)&&t.toArray().every(((t,e)=>F(t,n[e])))}return t instanceof g.eI&&e instanceof Array&&U(t,e)},z=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every(((t,n)=>e[n]===t)),V=(t,e,n)=>{const r=t.toArray(),i=B(e),o=i.length,s=r.length,a=l.VV(s,o);let c=0,u=0,h=!1;for(;c<a;c++){const t=r[c],e=i[c];if(z(n.get(t),e))h=!0;else if(!F(t,e))break}for(;c+u<a;u++){const t=r[s-u-1],e=i[o-u-1];if(z(n.get(t),e))h=!0;else if(!F(t,e))break}return{equalityFactor:c+u,foundMappedChild:h}},H=t=>{let e="",n=t._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof g.$_?e+=n.content.str:n.content instanceof g.MM&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},j=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=H(t),o=e.map((t=>({insert:t.text,attributes:Object.assign({},r,W(t.marks))}))),{insert:s,remove:a,index:l}=p(i,o.map((t=>t.insert)).join(""));t.delete(l,a),t.insert(l,s),t.applyDelta(o.map((t=>({retain:t.insert.length,attributes:t.attributes}))))},W=t=>{const e={};return t.forEach((t=>{"ychange"!==t.type.name&&(e[t.type.name]=t.attrs)})),e},G=(t,e,n,r)=>{if(e instanceof g.lt&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof g.lt){const t=e.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?t[n]!==r[n]&&"ychange"!==n&&e.setAttribute(n,r[n]):e.removeAttribute(n);for(const n in t)void 0===r[n]&&e.removeAttribute(n)}const o=B(n),s=o.length,a=e.toArray(),c=a.length,u=l.VV(s,c);let h=0,d=0;for(;h<u;h++){const t=a[h],e=o[h];if(!z(r.get(t),e)){if(!F(t,e))break;r.set(t,e)}}for(;d+h+1<u;d++){const t=a[c-d-1],e=o[s-d-1];if(!z(r.get(t),e)){if(!F(t,e))break;r.set(t,e)}}t.transact((()=>{while(c-h-d>0&&s-h-d>0){const n=a[h],i=o[h],l=a[c-d-1],u=o[s-d-1];if(n instanceof g.eI&&i instanceof Array)U(n,i)||j(n,i,r),h+=1;else{let o=n instanceof g.lt&&$(n,i),s=l instanceof g.lt&&$(l,u);if(o&&s){const t=V(n,i,r),e=V(l,u,r);t.foundMappedChild&&!e.foundMappedChild?s=!1:!t.foundMappedChild&&e.foundMappedChild||t.equalityFactor<e.equalityFactor?o=!1:s=!1}o?(G(t,n,i,r),h+=1):s?(G(t,l,u,r),d+=1):(e.delete(h,1),e.insert(h,[N(i,r)]),h+=1)}}const n=c-h-d;if(1===c&&0===s&&a[0]instanceof g.eI?a[0].delete(0,a[0].length):n>0&&e.delete(h,n),h+d<s){const t=[];for(let e=h;e<s-d;e++)t.push(N(o[e],r));e.insert(h,t)}}),i.Gt)},$=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name,q=t=>{const e=i.Gk.getState(t).undoManager;if(null!=e)return e.undo(),!0},Y=t=>{const e=i.Gk.getState(t).undoManager;if(null!=e)return e.redo(),!0},X=new Set(["paragraph"]),Z=(t,e)=>!(t instanceof g.ck)||!(t.content instanceof g.zc)||!(t.content.type instanceof g.xv||t.content.type instanceof g.lt&&e.has(t.content.type.nodeName))||0===t.content.type._length,K=({protectedNodes:t=X,trackedOrigins:e=[],undoManager:n=null}={})=>new o.Sy({key:i.Gk,state:{init:(r,o)=>{const s=i.Gt.getState(o),a=n||new g.H6(s.type,{trackedOrigins:new Set([i.Gt].concat(e)),deleteFilter:e=>Z(e,t)});return{undoManager:a,prevSel:null,hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}},apply:(t,e,n,r)=>{const o=i.Gt.getState(r).binding,s=e.undoManager,a=s.undoStack.length>0,l=s.redoStack.length>0;return o?{undoManager:s,prevSel:T(o,n),hasUndoOps:a,hasRedoOps:l}:a!==e.hasUndoOps||l!==e.hasRedoOps?Object.assign({},e,{hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}):e}},view:t=>{const e=i.Gt.getState(t.state),n=i.Gk.getState(t.state).undoManager;return n.on("stack-item-added",(({stackItem:n})=>{const r=e.binding;r&&n.meta.set(r,i.Gk.getState(t.state).prevSel)})),n.on("stack-item-popped",(({stackItem:t})=>{const n=e.binding;n&&(n.beforeTransactionSelection=t.meta.get(n)||n.beforeTransactionSelection)})),{destroy:()=>{n.destroy()}}}}),J=r.hj.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},onCreate(){this.editor.extensionManager.extensions.find((t=>"history"===t.name))&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i.Gk.getState(e).undoManager;return 0!==r.undoStack.length&&(!n||q(e))},redo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i.Gk.getState(e).undoManager;return 0!==r.redoStack.length&&(!n||Y(e))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),e=K(),n=e.spec.view;return e.spec.view=t=>{const{undoManager:e}=i.Gk.getState(t.state);e.restore&&(e.restore(),e.restore=()=>{});const r=n(t);return{destroy:()=>{const t=e.trackedOrigins.has(e),n=e._observers;e.restore=()=>{t&&e.trackedOrigins.add(e),e.doc.on("afterTransaction",e.afterTransactionHandler),e._observers=n},r.destroy()}}},[x(t),e]}})},3778:function(t,e,n){"use strict";n.d(e,{ZP:function(){return s}});var r=n(2066);const i=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,o=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,s=r.vc.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,r.Cf)({find:i,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:o,type:this.type})]}})},3747:function(t,e,n){"use strict";n.d(e,{ZP:function(){return o}});var r=n(2066);const i=/^\s*(\[([( |x])?\])\s$/,o=r.NB.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>"true"===t.getAttribute("data-checked"),renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",(0,r.P1)(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",(e=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(a.checked=!a.checked);const{checked:i}=e.target;r.isEditable&&"function"===typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command((({tr:t})=>{const e=n(),r=t.doc.nodeAt(e);return t.setNodeMarkup(e,void 0,{...null===r||void 0===r?void 0:r.attrs,checked:i}),!0})).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,i)||(a.checked=!a.checked))})),Object.entries(this.options.HTMLAttributes).forEach((([t,e])=>{i.setAttribute(t,e)})),i.dataset.checked=t.attrs.checked,t.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,l),Object.entries(e).forEach((([t,e])=>{i.setAttribute(t,e)})),{dom:i,contentDOM:l,update:t=>t.type===this.type&&(i.dataset.checked=t.attrs.checked,t.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[(0,r.S0)({find:i,type:this.type,getAttributes:t=>({checked:"x"===t[t.length-1]})})]}})},1531:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(2066);const i=r.NB.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}})},3929:function(t,e,n){"use strict";n.d(e,{Z:function(){return Ot}});n(7658);var r=n(2066);const i=/^\s*>\s$/,o=r.NB.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,r.S0)({find:i,type:this.type})]}}),s=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,a=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,l=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,u=r.vc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,r.Cf)({find:s,type:this.type}),(0,r.Cf)({find:l,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:a,type:this.type}),(0,r.K9)({find:c,type:this.type})]}}),h=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),d=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type),i=Object.entries(n).some((([,t])=>!!t));return!!i||e.unsetMark(this.name)}}}}),f=/^\s*([-+*])\s$/,p=r.NB.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(h.name,this.editor.getAttributes(d.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=(0,r.S0)({find:f,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:f,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(d.name),editor:this.editor})),[t]}}),m=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,g=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,y=r.vc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,r.Cf)({find:m,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:g,type:this.type})]}});var v=n(157);const w=/^```([a-z]+)?[\s\n]$/,b=/^~~~([a-z]+)?[\s\n]$/,_=r.NB.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,r=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]],i=r.filter((t=>t.startsWith(n))).map((t=>t.replace(n,""))),o=i[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",(0,r.P1)(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!(!o||!s)&&t.chain().command((({tr:t})=>(t.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2;if(!s)return!1;const a=i.after();if(void 0===a)return!1;const l=r.nodeAt(a);return!l&&t.commands.exitCode()}}},addInputRules(){return[(0,r.zK)({find:w,type:this.type,getAttributes:t=>({language:t[1]})}),(0,r.zK)({find:b,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new v.Sy({key:new v.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null===i||void 0===i?void 0:i.mode;if(!n||!o)return!1;const{tr:s}=t.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(v.Bs.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),S=r.NB.create({name:"doc",topNode:!0,content:"block+"});var E=n(1382);function A(t={}){return new v.Sy({view(e){return new x(e,t)}})}class x{constructor(t,e){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,r=e.nodeAfter;if(n||r){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let i=e.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let t=o.getBoundingClientRect();r=t.left-o.scrollLeft,i=t.top-o.scrollTop}this.element.style.left=t.left-r+"px",this.element.style.top=t.top-i+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,e,t):r;if(e&&!i){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=(0,E.nj)(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const C=r.hj.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[A(this.options)]}});var T=n(203),M=n(1543),I=n(1460);class k extends v.Y1{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return k.valid(n)?new k(n):v.Y1.near(n)}content(){return M.p2.empty}eq(t){return t instanceof k&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new k(t.resolve(e.pos))}getBookmark(){return new O(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!R(t)||!D(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&k.valid(t))return t;let r=t.pos,i=null;for(let n=t.depth;;n--){let o=t.node(n);if(e>0?t.indexAfter(n)<o.childCount:t.index(n)>0){i=o.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;r+=e;let s=t.doc.resolve(r);if(k.valid(s))return s}for(;;){let o=e>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!v.qv.isSelectable(i)){t=t.doc.resolve(r+i.nodeSize*e),n=!1;continue t}break}i=o,r+=e;let s=t.doc.resolve(r);if(k.valid(s))return s}return null}}}k.prototype.visible=!1,k.findFrom=k.findGapCursorFrom,v.Y1.jsonID("gapcursor",k);class O{constructor(t){this.pos=t}map(t){return new O(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return k.valid(e)?new k(e):v.Y1.near(e)}}function R(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(0!=n)for(let t=r.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function D(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(let t=r.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function N(){return new v.Sy({props:{decorations:F,createSelectionBetween(t,e,n){return e.pos==n.pos&&k.valid(n)?new k(n):null},handleClick:B,handleKeyDown:P,handleDOMEvents:{beforeinput:U}}})}const P=(0,T.$)({ArrowLeft:L("horiz",-1),ArrowRight:L("horiz",1),ArrowUp:L("vert",-1),ArrowDown:L("vert",1)});function L(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,i){let o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof v.Bs){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}let l=k.findGapCursorFrom(s,e,a);return!!l&&(r&&r(t.tr.setSelection(new k(l))),!0)}}function B(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!k.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&v.qv.isSelectable(t.state.doc.nodeAt(i.inside)))&&(t.dispatch(t.state.tr.setSelection(new k(r))),!0)}function U(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof k))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=M.HY.empty;for(let s=r.length-1;s>=0;s--)i=M.HY.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new M.p2(i,0,0));return o.setSelection(v.Bs.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function F(t){if(!(t.selection instanceof k))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",I.EH.create(t.doc,[I.p.widget(t.selection.head,e,{key:"gapcursor"})])}const z=r.hj.create({name:"gapCursor",addProseMirrorPlugins(){return[N()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=(0,r.nU)((0,r.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),V=r.NB.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",(0,r.P1)(this.options.HTMLAttributes,t)]},renderText(){return"\n"},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:i}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=r.extensionManager,a=i||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&a&&o){const e=a.filter((t=>s.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),H=r.NB.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){const n=this.options.levels.includes(t.attrs.level),i=n?t.attrs.level:this.options.levels[0];return[`h${i}`,(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>(0,r.zK)({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}});var j=200,W=function(){};W.prototype.append=function(t){return t.length?(t=W.from(t),!this.length&&t||t.length<j&&this.leafAppend(t)||this.length<j&&t.leafPrepend(this)||this.appendInner(t)):this},W.prototype.prepend=function(t){return t.length?W.from(t).append(this):this},W.prototype.appendInner=function(t){return new $(this,t)},W.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?W.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},W.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},W.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},W.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},W.from=function(t){return t instanceof W?t:t&&t.length?new G(t):W.empty};var G=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=j)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=j)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(W);W.empty=new G([]);var $=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(W),q=W,Y=q;const X=500;class Z{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){let t=this.items.get(i-1);if(t.selection){--i;break}}e&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(i,e+1),r=n.maps.length),r--,void c.push(t);if(n){c.push(new J(t.map));let e,i=t.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new J(e,void 0,void 0,l.length+c.length))),r--,e&&n.appendMap(e,r)}else a.maybeStep(t.step);return t.selection?(o=n?t.selection.map(n.slice(r)):t.selection,s=new Z(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<t.steps.length;c++){let n,l=t.steps[c].invert(t.docs[c]),u=new J(t.mapping.maps[c],l,e);(n=a&&a.merge(u))&&(u=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(u),e&&(o++,e=void 0),r||(a=u)}let l=o-n.depth;return l>tt&&(s=K(s,l),o-=l),new Z(s.append(i),o)}remapping(t,e){let n=new E.vs;return this.items.forEach(((e,r)=>{let i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,i)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new Z(this.items.append(t.map((t=>new J(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((t=>{t.selection&&s--}),r);let a=e;this.items.forEach((e=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(e.step){let o=t.steps[r].invert(t.docs[r]),c=e.selection&&e.selection.map(i.slice(a+1,r));c&&s++,n.push(new J(l,o,c))}else n.push(new J(l))}),r);let l=[];for(let h=e;h<o;h++)l.push(new J(i.maps[h]));let c=this.items.slice(0,r).append(l).append(n),u=new Z(c,s);return u.emptyItemCount()>X&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=t)r.push(o),o.selection&&i++;else if(o.step){let t=o.step.map(e.slice(n)),s=t&&t.getMap();if(n--,s&&e.appendMap(s,n),t){let a=o.selection&&o.selection.map(e.slice(n));a&&i++;let l,c=new J(s.invert(),t,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new Z(Y.from(r.reverse()),i)}}function K(t,e){let n;return t.forEach(((t,r)=>{if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}Z.empty=new Z(Y.empty,0);class J{constructor(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new J(e.getMap().invert(),e,this.selection)}}}class Q{constructor(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r}}const tt=20;function et(t,e,n,r){let i,o=n.getMeta(ct);if(o)return o.historyState;n.getMeta(ut)&&(t=new Q(t.done,t.undone,null,0));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(ct))return s.getMeta(ct).redo?new Q(t.done.addTransform(n,void 0,r,lt(e)),t.undone,rt(n.mapping.maps[n.steps.length-1]),t.prevTime):new Q(t.done,t.undone.addTransform(n,void 0,r,lt(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new Q(t.done.rebased(n,i),t.undone.rebased(n,i),it(t.prevRanges,n.mapping),t.prevTime):new Q(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),it(t.prevRanges,n.mapping),t.prevTime);{let i=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!nt(n,t.prevRanges)),o=s?it(t.prevRanges,n.mapping):rt(n.mapping.maps[n.steps.length-1]);return new Q(t.done.addTransform(n,i?e.selection.getBookmark():void 0,r,lt(e)),Z.empty,o,n.time)}}function nt(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,r)=>{for(let i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}function rt(t){let e=[];return t.forEach(((t,n,r,i)=>e.push(r,i))),e}function it(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function ot(t,e,n,r){let i=lt(e),o=ct.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),c=new Q(r?l:s.remaining,r?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(ct,{redo:r,historyState:c}).scrollIntoView())}let st=!1,at=null;function lt(t){let e=t.plugins;if(at!=e){st=!1,at=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){st=!0;break}}return st}const ct=new v.H$("history"),ut=new v.H$("closeHistory");function ht(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new v.Sy({key:ct,state:{init(){return new Q(Z.empty,Z.empty,null,0)},apply(e,n,r){return et(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,r="historyUndo"==n?dt:"historyRedo"==n?ft:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}const dt=(t,e)=>{let n=ct.getState(t);return!(!n||0==n.done.eventCount)&&(e&&ot(n,t,e,!1),!0)},ft=(t,e)=>{let n=ct.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&ot(n,t,e,!0),!0)};const pt=r.hj.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>dt(t,e),redo:()=>({state:t,dispatch:e})=>ft(t,e)}},addProseMirrorPlugins(){return[ht(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-Z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Shift-Mod-Z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),mt=r.NB.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",(0,r.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return 0===n.parentOffset?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command((({tr:t,dispatch:e})=>{var n;if(e){const{$to:e}=t.selection,r=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(v.Bs.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(v.qv.create(t.doc,e.pos)):t.setSelection(v.Bs.create(t.doc,e.pos));else{const i=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(t.insert(r,i),t.setSelection(v.Bs.create(t.doc,r+1)))}t.scrollIntoView()}return!0})).run()}}},addInputRules(){return[(0,r.x2)({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),gt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,yt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,vt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,wt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,bt=r.vc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,r.Cf)({find:gt,type:this.type}),(0,r.Cf)({find:vt,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:yt,type:this.type}),(0,r.K9)({find:wt,type:this.type})]}}),_t=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),St=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Et=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type),i=Object.entries(n).some((([,t])=>!!t));return!!i||e.unsetMark(this.name)}}}}),At=/^(\d+)\.\s$/,xt=r.NB.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",(0,r.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(St.name,this.editor.getAttributes(Et.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=(0,r.S0)({find:At,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:At,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Et.name)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[t]}}),Ct=r.NB.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Tt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Mt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,It=r.vc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:t}){return["s",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return(0,r.eE)()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[(0,r.Cf)({find:Tt,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:Mt,type:this.type})]}}),kt=r.NB.create({name:"text",group:"inline"}),Ot=r.hj.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,a,l,c,h,d,f,m,g,v,w,b,E;const A=[];return!1!==this.options.blockquote&&A.push(o.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&A.push(u.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&A.push(p.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&A.push(y.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&A.push(_.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&A.push(S.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&A.push(C.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&A.push(z.configure(null===(l=this.options)||void 0===l?void 0:l.gapcursor)),!1!==this.options.hardBreak&&A.push(V.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&A.push(H.configure(null===(h=this.options)||void 0===h?void 0:h.heading)),!1!==this.options.history&&A.push(pt.configure(null===(d=this.options)||void 0===d?void 0:d.history)),!1!==this.options.horizontalRule&&A.push(mt.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&A.push(bt.configure(null===(m=this.options)||void 0===m?void 0:m.italic)),!1!==this.options.listItem&&A.push(_t.configure(null===(g=this.options)||void 0===g?void 0:g.listItem)),!1!==this.options.orderedList&&A.push(xt.configure(null===(v=this.options)||void 0===v?void 0:v.orderedList)),!1!==this.options.paragraph&&A.push(Ct.configure(null===(w=this.options)||void 0===w?void 0:w.paragraph)),!1!==this.options.strike&&A.push(It.configure(null===(b=this.options)||void 0===b?void 0:b.strike)),!1!==this.options.text&&A.push(kt.configure(null===(E=this.options)||void 0===E?void 0:E.text)),A}})},3594:function(t,e,n){"use strict";n.d(e,{ML:function(){return vt},kg:function(){return wt}});n(7658);var r=n(2066),i=n(157),o=n(8519),s=n(3435),a="tippy-box",l="tippy-content",c="tippy-backdrop",u="tippy-arrow",h="tippy-svg-arrow",d={passive:!0,capture:!0},f=function(){return document.body};function p(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function m(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function g(t,e){return"function"===typeof t?t.apply(void 0,e):t}function y(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function v(t){return t.split(/\s+/).filter(Boolean)}function w(t){return[].concat(t)}function b(t,e){-1===t.indexOf(e)&&t.push(e)}function _(t){return t.filter((function(e,n){return t.indexOf(e)===n}))}function S(t){return t.split("-")[0]}function E(t){return[].slice.call(t)}function A(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function x(){return document.createElement("div")}function C(t){return["Element","Fragment"].some((function(e){return m(t,e)}))}function T(t){return m(t,"NodeList")}function M(t){return m(t,"MouseEvent")}function I(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function k(t){return C(t)?[t]:T(t)?E(t):Array.isArray(t)?t:E(document.querySelectorAll(t))}function O(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function R(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function D(t){var e,n=w(t),r=n[0];return null!=r&&null!=(e=r.ownerDocument)&&e.body?r.ownerDocument:document}function N(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props,s=o.interactiveBorder,a=S(i.placement),l=i.modifiersData.offset;if(!l)return!0;var c="bottom"===a?l.top.y:0,u="top"===a?l.bottom.y:0,h="right"===a?l.left.x:0,d="left"===a?l.right.x:0,f=e.top-r+c>s,p=r-e.bottom-u>s,m=e.left-n+h>s,g=n-e.right-d>s;return f||p||m||g}))}function P(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function L(t,e){var n=e;while(n){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var B={isTouch:!1},U=0;function F(){B.isTouch||(B.isTouch=!0,window.performance&&document.addEventListener("mousemove",z))}function z(){var t=performance.now();t-U<20&&(B.isTouch=!1,document.removeEventListener("mousemove",z)),U=t}function V(){var t=document.activeElement;if(I(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function H(){document.addEventListener("touchstart",F,d),window.addEventListener("blur",V)}var j="undefined"!==typeof window&&"undefined"!==typeof document,W=!!j&&!!window.msCrypto;var G={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},q=Object.assign({appendTo:f,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},G,$),Y=Object.keys(q),X=function(t){var e=Object.keys(t);e.forEach((function(e){q[e]=t[e]}))};function Z(t){var e=t.plugins||[],n=e.reduce((function(e,n){var r,i=n.name,o=n.defaultValue;i&&(e[i]=void 0!==t[i]?t[i]:null!=(r=q[i])?r:o);return e}),{});return Object.assign({},t,n)}function K(t,e){var n=e?Object.keys(Z(Object.assign({},q,{plugins:e}))):Y,r=n.reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(i){e[n]=r}return e}),{});return r}function J(t,e){var n=Object.assign({},e,{content:g(e.content,[t])},e.ignoreAttributes?{}:K(t,e.plugins));return n.aria=Object.assign({},q.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var Q=function(){return"innerHTML"};function tt(t,e){t[Q()]=e}function et(t){var e=x();return!0===t?e.className=u:(e.className=h,C(t)?e.appendChild(t):tt(e,t)),e}function nt(t,e){C(e.content)?(tt(t,""),t.appendChild(e.content)):"function"!==typeof e.content&&(e.allowHTML?tt(t,e.content):t.textContent=e.content)}function rt(t){var e=t.firstElementChild,n=E(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(l)})),arrow:n.find((function(t){return t.classList.contains(u)||t.classList.contains(h)})),backdrop:n.find((function(t){return t.classList.contains(c)}))}}function it(t){var e=x(),n=x();n.className=a,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=x();function i(n,r){var i=rt(e),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||nt(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(et(r.arrow))):o.appendChild(et(r.arrow)):a&&o.removeChild(a)}return r.className=l,r.setAttribute("data-state","hidden"),nt(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}it.$$tippy=!0;var ot=1,st=[],at=[];function lt(t,e){var n,r,i,s,a,l,c,u=J(t,Object.assign({},q,Z(A(e)))),h=!1,m=!1,S=!1,C=!1,T=[],I=y(xt,u.interactiveDebounce),k=ot++,U=null,F=_(u.plugins),z={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},V={id:k,reference:t,popper:x(),popperInstance:U,props:u,state:z,plugins:F,clearDelayTimeouts:Bt,setProps:Ut,setContent:Ft,show:zt,hide:Vt,hideWithInteractivity:Ht,enable:Pt,disable:Lt,unmount:jt,destroy:Wt};if(!u.render)return V;var H=u.render(V),j=H.popper,G=H.onUpdate;j.setAttribute("data-tippy-root",""),j.id="tippy-"+V.id,V.popper=j,t._tippy=V,j._tippy=V;var $=F.map((function(t){return t.fn(V)})),Y=t.hasAttribute("aria-expanded");return St(),ht(),lt(),ct("onCreate",[V]),u.showOnCreate&&Dt(),j.addEventListener("mouseenter",(function(){V.props.interactive&&V.state.isVisible&&V.clearDelayTimeouts()})),j.addEventListener("mouseleave",(function(){V.props.interactive&&V.props.trigger.indexOf("mouseenter")>=0&&et().addEventListener("mousemove",I)})),V;function X(){var t=V.props.touch;return Array.isArray(t)?t:[t,0]}function K(){return"hold"===X()[0]}function Q(){var t;return!(null==(t=V.props.render)||!t.$$tippy)}function tt(){return c||t}function et(){var t=tt().parentNode;return t?D(t):document}function nt(){return rt(j)}function it(t){return V.state.isMounted&&!V.state.isVisible||B.isTouch||s&&"focus"===s.type?0:p(V.props.delay,t?0:1,q.delay)}function lt(t){void 0===t&&(t=!1),j.style.pointerEvents=V.props.interactive&&!t?"":"none",j.style.zIndex=""+V.props.zIndex}function ct(t,e,n){var r;(void 0===n&&(n=!0),$.forEach((function(n){n[t]&&n[t].apply(n,e)})),n)&&(r=V.props)[t].apply(r,e)}function ut(){var e=V.props.aria;if(e.content){var n="aria-"+e.content,r=j.id,i=w(V.props.triggerTarget||t);i.forEach((function(t){var e=t.getAttribute(n);if(V.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function ht(){if(!Y&&V.props.aria.expanded){var e=w(V.props.triggerTarget||t);e.forEach((function(t){V.props.interactive?t.setAttribute("aria-expanded",V.state.isVisible&&t===tt()?"true":"false"):t.removeAttribute("aria-expanded")}))}}function dt(){et().removeEventListener("mousemove",I),st=st.filter((function(t){return t!==I}))}function ft(e){if(!B.isTouch||!S&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!V.props.interactive||!L(j,n)){if(w(V.props.triggerTarget||t).some((function(t){return L(t,n)}))){if(B.isTouch)return;if(V.state.isVisible&&V.props.trigger.indexOf("click")>=0)return}else ct("onClickOutside",[V,e]);!0===V.props.hideOnClick&&(V.clearDelayTimeouts(),V.hide(),m=!0,setTimeout((function(){m=!1})),V.state.isMounted||yt())}}}function pt(){S=!0}function mt(){S=!1}function gt(){var t=et();t.addEventListener("mousedown",ft,!0),t.addEventListener("touchend",ft,d),t.addEventListener("touchstart",mt,d),t.addEventListener("touchmove",pt,d)}function yt(){var t=et();t.removeEventListener("mousedown",ft,!0),t.removeEventListener("touchend",ft,d),t.removeEventListener("touchstart",mt,d),t.removeEventListener("touchmove",pt,d)}function vt(t,e){bt(t,(function(){!V.state.isVisible&&j.parentNode&&j.parentNode.contains(j)&&e()}))}function wt(t,e){bt(t,e)}function bt(t,e){var n=nt().box;function r(t){t.target===n&&(P(n,"remove",r),e())}if(0===t)return e();P(n,"remove",a),P(n,"add",r),a=r}function _t(e,n,r){void 0===r&&(r=!1);var i=w(V.props.triggerTarget||t);i.forEach((function(t){t.addEventListener(e,n,r),T.push({node:t,eventType:e,handler:n,options:r})}))}function St(){K()&&(_t("touchstart",At,{passive:!0}),_t("touchend",Ct,{passive:!0})),v(V.props.trigger).forEach((function(t){if("manual"!==t)switch(_t(t,At),t){case"mouseenter":_t("mouseleave",Ct);break;case"focus":_t(W?"focusout":"blur",Tt);break;case"focusin":_t("focusout",Tt);break}}))}function Et(){T.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),T=[]}function At(t){var e,n=!1;if(V.state.isEnabled&&!Mt(t)&&!m){var r="focus"===(null==(e=s)?void 0:e.type);s=t,c=t.currentTarget,ht(),!V.state.isVisible&&M(t)&&st.forEach((function(e){return e(t)})),"click"===t.type&&(V.props.trigger.indexOf("mouseenter")<0||h)&&!1!==V.props.hideOnClick&&V.state.isVisible?n=!0:Dt(t),"click"===t.type&&(h=!n),n&&!r&&Nt(t)}}function xt(t){var e=t.target,n=tt().contains(e)||j.contains(e);if("mousemove"!==t.type||!n){var r=Rt().concat(j).map((function(t){var e,n=t._tippy,r=null==(e=n.popperInstance)?void 0:e.state;return r?{popperRect:t.getBoundingClientRect(),popperState:r,props:u}:null})).filter(Boolean);N(r,t)&&(dt(),Nt(t))}}function Ct(t){var e=Mt(t)||V.props.trigger.indexOf("click")>=0&&h;e||(V.props.interactive?V.hideWithInteractivity(t):Nt(t))}function Tt(t){V.props.trigger.indexOf("focusin")<0&&t.target!==tt()||V.props.interactive&&t.relatedTarget&&j.contains(t.relatedTarget)||Nt(t)}function Mt(t){return!!B.isTouch&&K()!==t.type.indexOf("touch")>=0}function It(){kt();var e=V.props,n=e.popperOptions,r=e.placement,i=e.offset,s=e.getReferenceClientRect,a=e.moveTransition,c=Q()?rt(j).arrow:null,u=s?{getBoundingClientRect:s,contextElement:s.contextElement||tt()}:t,h={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(Q()){var n=nt(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?r.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?r.setAttribute("data-"+t,""):r.removeAttribute("data-"+t)})),e.attributes.popper={}}}},d=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},h];Q()&&c&&d.push({name:"arrow",options:{element:c,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),V.popperInstance=(0,o.fi)(u,j,Object.assign({},n,{placement:r,onFirstUpdate:l,modifiers:d}))}function kt(){V.popperInstance&&(V.popperInstance.destroy(),V.popperInstance=null)}function Ot(){var t,e=V.props.appendTo,n=tt();t=V.props.interactive&&e===f||"parent"===e?n.parentNode:g(e,[n]),t.contains(j)||t.appendChild(j),V.state.isMounted=!0,It()}function Rt(){return E(j.querySelectorAll("[data-tippy-root]"))}function Dt(t){V.clearDelayTimeouts(),t&&ct("onTrigger",[V,t]),gt();var e=it(!0),r=X(),i=r[0],o=r[1];B.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){V.show()}),e):V.show()}function Nt(t){if(V.clearDelayTimeouts(),ct("onUntrigger",[V,t]),V.state.isVisible){if(!(V.props.trigger.indexOf("mouseenter")>=0&&V.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&h)){var e=it(!1);e?r=setTimeout((function(){V.state.isVisible&&V.hide()}),e):i=requestAnimationFrame((function(){V.hide()}))}}else yt()}function Pt(){V.state.isEnabled=!0}function Lt(){V.hide(),V.state.isEnabled=!1}function Bt(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function Ut(e){if(!V.state.isDestroyed){ct("onBeforeUpdate",[V,e]),Et();var n=V.props,r=J(t,Object.assign({},n,A(e),{ignoreAttributes:!0}));V.props=r,St(),n.interactiveDebounce!==r.interactiveDebounce&&(dt(),I=y(xt,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?w(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded"),ht(),lt(),G&&G(n,r),V.popperInstance&&(It(),Rt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),ct("onAfterUpdate",[V,e])}}function Ft(t){V.setProps({content:t})}function zt(){var t=V.state.isVisible,e=V.state.isDestroyed,n=!V.state.isEnabled,r=B.isTouch&&!V.props.touch,i=p(V.props.duration,0,q.duration);if(!(t||e||n||r)&&!tt().hasAttribute("disabled")&&(ct("onShow",[V],!1),!1!==V.props.onShow(V))){if(V.state.isVisible=!0,Q()&&(j.style.visibility="visible"),lt(),gt(),V.state.isMounted||(j.style.transition="none"),Q()){var o=nt(),s=o.box,a=o.content;O([s,a],0)}l=function(){var t;if(V.state.isVisible&&!C){if(C=!0,j.offsetHeight,j.style.transition=V.props.moveTransition,Q()&&V.props.animation){var e=nt(),n=e.box,r=e.content;O([n,r],i),R([n,r],"visible")}ut(),ht(),b(at,V),null==(t=V.popperInstance)||t.forceUpdate(),ct("onMount",[V]),V.props.animation&&Q()&&wt(i,(function(){V.state.isShown=!0,ct("onShown",[V])}))}},Ot()}}function Vt(){var t=!V.state.isVisible,e=V.state.isDestroyed,n=!V.state.isEnabled,r=p(V.props.duration,1,q.duration);if(!(t||e||n)&&(ct("onHide",[V],!1),!1!==V.props.onHide(V))){if(V.state.isVisible=!1,V.state.isShown=!1,C=!1,h=!1,Q()&&(j.style.visibility="hidden"),dt(),yt(),lt(!0),Q()){var i=nt(),o=i.box,s=i.content;V.props.animation&&(O([o,s],r),R([o,s],"hidden"))}ut(),ht(),V.props.animation?Q()&&vt(r,V.unmount):V.unmount()}}function Ht(t){et().addEventListener("mousemove",I),b(st,I),I(t)}function jt(){V.state.isVisible&&V.hide(),V.state.isMounted&&(kt(),Rt().forEach((function(t){t._tippy.unmount()})),j.parentNode&&j.parentNode.removeChild(j),at=at.filter((function(t){return t!==V})),V.state.isMounted=!1,ct("onHidden",[V]))}function Wt(){V.state.isDestroyed||(V.clearDelayTimeouts(),V.unmount(),Et(),delete t._tippy,V.state.isDestroyed=!0,ct("onDestroy",[V]))}}function ct(t,e){void 0===e&&(e={});var n=q.plugins.concat(e.plugins||[]);H();var r=Object.assign({},e,{plugins:n}),i=k(t),o=i.reduce((function(t,e){var n=e&&lt(e,r);return n&&t.push(n),t}),[]);return C(t)?o[0]:o}ct.defaultProps=q,ct.setDefaultProps=X,ct.currentInput=B;Object.assign({},s.Z,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});ct.setDefaultProps({render:it});var ut=ct;class ht{constructor({editor:t,element:e,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:t,state:e,from:n,to:i})=>{const{doc:o,selection:s}=e,{empty:a}=s,l=!o.textBetween(n,i).length&&(0,r.xh)(e.selection),c=this.element.contains(document.activeElement),u=t.hasFocus()||c;return!(!u||a||l||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.handleDebouncedUpdate=(t,e)=>{const n=!(null===e||void 0===e?void 0:e.selection.eq(t.state.selection)),r=!(null===e||void 0===e?void 0:e.doc.eq(t.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout((()=>{this.updateHandler(t,n,r,e)}),this.updateDelay))},this.updateHandler=(t,e,n,i)=>{var o,s,a;const{state:l,composing:c}=t,{selection:u}=l,h=!e&&!n;if(c||h)return;this.createTooltip();const{ranges:d}=u,f=Math.min(...d.map((t=>t.$from.pos))),p=Math.max(...d.map((t=>t.$to.pos))),m=null===(o=this.shouldShow)||void 0===o?void 0:o.call(this,{editor:this.editor,view:t,state:l,oldState:i,from:f,to:p});m?(null===(s=this.tippy)||void 0===s||s.setProps({getReferenceClientRect:(null===(a=this.tippyOptions)||void 0===a?void 0:a.getReferenceClientRect)||(()=>{if((0,r.EG)(l.selection)){let e=t.nodeDOM(f);const n=e.dataset.nodeViewWrapper?e:e.querySelector("[data-node-view-wrapper]");if(n&&(e=n.firstChild),e)return e.getBoundingClientRect()}return(0,r.pr)(t,f,p)})}),this.show()):this.hide()},this.editor=t,this.element=e,this.view=n,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=ut(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){const{state:n}=t,r=n.selection.$from.pos!==n.selection.$to.pos;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(t,e);const i=!(null===e||void 0===e?void 0:e.selection.eq(t.state.selection)),o=!(null===e||void 0===e?void 0:e.doc.eq(t.state.doc));this.updateHandler(t,i,o,e)}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const dt=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new ht({view:e,...t})});r.hj.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[dt({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var ft=n(3396),pt=n(4870);class mt{constructor({editor:t,element:e,view:n,tippyOptions:r={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:t,state:e})=>{const{selection:n}=e,{$anchor:r,empty:i}=n,o=1===r.depth,s=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;return!!(t.hasFocus()&&i&&o&&s&&this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.editor=t,this.element=e,this.view=n,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=ut(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){var n,i,o;const{state:s}=t,{doc:a,selection:l}=s,{from:c,to:u}=l,h=e&&e.doc.eq(a)&&e.selection.eq(l);if(h)return;this.createTooltip();const d=null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:t,state:s,oldState:e});d?(null===(i=this.tippy)||void 0===i||i.setProps({getReferenceClientRect:(null===(o=this.tippyOptions)||void 0===o?void 0:o.getReferenceClientRect)||(()=>(0,r.pr)(t,c,u))}),this.show()):this.hide()}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const gt=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new mt({view:e,...t})});r.hj.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[gt({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),(0,ft.aZ)({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=(0,pt.iH)(null);return(0,ft.bv)((()=>{const{updateDelay:e,editor:r,pluginKey:i,shouldShow:o,tippyOptions:s}=t;r.registerPlugin(dt({updateDelay:e,editor:r,element:n.value,pluginKey:i,shouldShow:o,tippyOptions:s}))})),(0,ft.Jd)((()=>{const{pluginKey:e,editor:n}=t;n.unregisterPlugin(e)})),()=>{var t;return(0,ft.h)("div",{ref:n},null===(t=e.default)||void 0===t?void 0:t.call(e))}}});function yt(t){return(0,pt.ZM)(((e,n)=>({get(){return e(),t},set(e){t=e,requestAnimationFrame((()=>{requestAnimationFrame((()=>{n()}))}))}})))}class vt extends r.ML{constructor(t={}){return super(t),this.vueRenderers=(0,pt.qj)(new Map),this.contentComponent=null,this.reactiveState=yt(this.view.state),this.reactiveExtensionStorage=yt(this.extensionStorage),this.on("transaction",(()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage})),(0,pt.Xl)(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){super.registerPlugin(t,e),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const wt=(0,ft.aZ)({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=(0,pt.iH)(),n=(0,ft.FN)();return(0,ft.m0)((()=>{const r=t.editor;r&&r.options.element&&e.value&&(0,ft.Y3)((()=>{if(!e.value||!r.options.element.firstChild)return;const t=(0,pt.SU)(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:t}),r.createNodeViews()}))})),(0,ft.Jd)((()=>{const e=t.editor;if(!e)return;if(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})})),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach((e=>{const n=(0,ft.h)(ft.lR,{to:e.teleportElement,key:e.id},(0,ft.h)(e.component,{ref:e.id,...e.props}));t.push(n)})),(0,ft.h)("div",{ref:t=>{this.rootEl=t}},...t)}});(0,ft.aZ)({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=(0,pt.iH)(null);return(0,ft.bv)((()=>{const{pluginKey:e,editor:r,tippyOptions:i,shouldShow:o}=t;r.registerPlugin(gt({pluginKey:e,editor:r,element:n.value,tippyOptions:i,shouldShow:o}))})),(0,ft.Jd)((()=>{const{pluginKey:e,editor:n}=t;n.unregisterPlugin(e)})),()=>{var t;return(0,ft.h)("div",{ref:n},null===(t=e.default)||void 0===t?void 0:t.call(e))}}}),(0,ft.aZ)({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return(0,ft.h)(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),(0,ft.aZ)({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return(0,ft.h)(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))}});Boolean},253:function(t,e,n){"use strict";n.d(e,{Ib:function(){return l},OR:function(){return c},iP:function(){return u},rP:function(){return p}});n(7658);var r=n(4870),i=n(3396),o="undefined"!==typeof window;var s,a;function l(t){let e;(0,i.bv)((()=>{t(),(0,i.Y3)((()=>{e=!0}))})),(0,i.dl)((()=>{e&&t()}))}function c(t,e,n={}){if(!o)return;const{target:s=window,passive:a=!1,capture:c=!1}=n;let u,h=!1;const d=n=>{if(h)return;const i=(0,r.SU)(n);i&&!u&&(i.addEventListener(t,e,{capture:c,passive:a}),u=!0)},f=n=>{if(h)return;const i=(0,r.SU)(n);i&&u&&(i.removeEventListener(t,e,c),u=!1)};let p;return(0,i.Ah)((()=>f(s))),(0,i.se)((()=>f(s))),l((()=>d(s))),(0,r.dq)(s)&&(p=(0,i.YP)(s,((t,e)=>{f(e),d(t)}))),()=>{null==p||p(),f(s),h=!0}}function u(){if(!s&&(s=(0,r.iH)(0),a=(0,r.iH)(0),o)){const t=()=>{s.value=window.innerWidth,a.value=window.innerHeight};t(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0})}return{width:s,height:a}}var h=/scroll|auto|overlay/i,d=o?window:void 0;function f(t){const e=1;return"HTML"!==t.tagName&&"BODY"!==t.tagName&&t.nodeType===e}function p(t,e=d){let n=t;while(n&&n!==e&&f(n)){const{overflowY:t}=window.getComputedStyle(n);if(h.test(t))return n;n=n.parentNode}return e}Symbol("van-field")},5989:function(t,e,n){"use strict";n.d(e,{Dp:function(){return o},G:function(){return s},Z$:function(){return r},kJ:function(){return a},s7:function(){return i}});n(7658);const r=t=>t[t.length-1],i=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},o=Array.from,s=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},a=Array.isArray},7214:function(t,e,n){"use strict";n.d(e,{JU:function(){return i},x0:function(){return o}});var r=n(7862);const i="undefined"!==typeof document?document:{},o=("undefined"!==typeof DOMParser&&new DOMParser,t=>r.UI(t,((t,e)=>`${e}:${t};`)).join(""));i.ELEMENT_NODE,i.TEXT_NODE,i.CDATA_SECTION_NODE,i.COMMENT_NODE,i.DOCUMENT_NODE,i.DOCUMENT_TYPE_NODE,i.DOCUMENT_FRAGMENT_NODE},6413:function(t,e,n){"use strict";n.d(e,{jU:function(){return d},hH:function(){return b}});n(7658);var r=n(7862),i=n(654);const o=t=>void 0===t?null:t;class s{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let a=new s,l=!0;try{"undefined"!==typeof localStorage&&(a=localStorage,l=!1)}catch(_){}const c=a;var u=n(7409);const h="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),d="undefined"!==typeof window&&"undefined"!==typeof document&&!h;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let f;const p=[],m=()=>{if(void 0===f)if(h){f=r.Ue();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&f.set(e,""),e=r):null!==e?(f.set(e,r),e=null):p.push(r)}null!==e&&f.set(e,"")}else"object"===typeof location?(f=r.Ue(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");f.set(`--${i.NF(e,"-")}`,n),f.set(`-${i.NF(e,"-")}`,n)}}))):f=r.Ue();return f},g=t=>m().has(t),y=t=>o(h?{NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}[t.toUpperCase()]:c.getItem(t)),v=t=>g("--"+t)||null!==y(t),w=(v("production"),h&&u.gB({NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}.FORCE_COLOR,["true","1","2"])),b=!g("no-colors")&&(!h||process.stdout.isTTY||w)&&(!h||g("color")||w||null!==y("COLORTERM")||(y("TERM")||"").includes("color"))},6969:function(t,e,n){"use strict";n.d(e,{Nw:function(){return i},Ue:function(){return r},zR:function(){return o}});const r=t=>new Error(t),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},1634:function(t,e,n){"use strict";n.d(e,{Vs:function(){return o}});n(7658);const r=t=>class{constructor(t){this._=t}destroy(){t(this._)}},i=r(clearTimeout),o=(t,e)=>new i(setTimeout(e,t));r(clearInterval),r((t=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(t))),r((t=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(t)))},7409:function(t,e,n){"use strict";n.d(e,{PP:function(){return i},gB:function(){return s},id:function(){return o}});n(3767),n(8585),n(8696);var r=n(5989);const i=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&i(t,e,n+1)}},o=t=>t,s=(t,e)=>e.includes(t);r.kJ},7862:function(t,e,n){"use strict";n.d(e,{JG:function(){return i},UI:function(){return s},Ue:function(){return r},Yj:function(){return a},Yu:function(){return o}});n(7658);const r=()=>new Map,i=t=>{const e=r();return t.forEach(((t,n)=>{e.set(n,t)})),e},o=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},s=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},a=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},1383:function(t,e,n){"use strict";n.d(e,{Fp:function(){return s},GR:function(){return a},GW:function(){return r},VV:function(){return o},Wn:function(){return i}});const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),s=(t,e)=>t>e?t:e,a=(Number.isNaN,Math.pow,Math.sign,t=>0!==t?t<0:1/t<0)},1370:function(t,e,n){"use strict";n.d(e,{$m:function(){return u},Ed:function(){return o},XP:function(){return i},f0:function(){return r},xb:function(){return a}});n(7658);const r=Object.assign,i=Object.keys,o=(t,e)=>{for(const n in t)e(t[n],n)},s=t=>i(t).length,a=t=>{for(const e in t)return!1;return!0},l=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},c=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),u=(t,e)=>t===e||s(t)===s(e)&&l(t,((t,n)=>(void 0!==t||c(e,n))&&e[n]===t))},4373:function(t,e,n){"use strict";n.d(e,{kw:function(){return a},U7:function(){return s},k$:function(){return c}});n(3767),n(8585),n(8696);var r=n(1383);crypto.subtle;const i=crypto.getRandomValues.bind(crypto),o=Math.random,s=()=>i(new Uint32Array(1))[0],a=t=>t[r.GW(o()*t.length)],l=[1e7]+-1e3+-4e3+-8e3+-1e11,c=()=>l.replace(/[018]/g,(t=>(t^s()&15>>t/4).toString(16)))},893:function(t,e,n){"use strict";n.d(e,{Ue:function(){return r}});const r=()=>new Set},654:function(t,e,n){"use strict";n.d(e,{CO:function(){return f},IK:function(){return r},NF:function(){return l},YZ:function(){return u},lz:function(){return d}});n(3767),n(8585),n(8696);const r=String.fromCharCode,i=(String.fromCodePoint,r(65535),t=>t.toLowerCase()),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,l=(t,e)=>s(t.replace(a,(t=>`${e}${i(t)}`))),c=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,h=t=>u.encode(t),d=u?h:c;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null)},313:function(t,e,n){"use strict";n.d(e,{ZG:function(){return r}});const r=Date.now},4711:function(t,e,n){"use strict";n.d(e,{kU:function(){return p},Dp:function(){return f},ET:function(){return y}});n(3767),n(8585),n(8696);function r(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==n[s])throw new TypeError(o+" is ambiguous");n[s]=i}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,o=e.length;while(i!==o&&0===e[i])i++,n++;var s=(o-i)*u+1>>>0,c=new Uint8Array(s);while(i!==o){for(var h=e[i],d=0,f=s-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*c[f]>>>0,c[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=s-r;while(p!==s&&0===c[p])p++;for(var m=l.repeat(n);p<s;++p)m+=t.charAt(c[p]);return m}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===l)r++,e++;var o=(t.length-e)*c+1>>>0,s=new Uint8Array(o);while(t[e]){var u=n[t.charCodeAt(e)];if(255===u)return;for(var h=0,d=o-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*s[d]>>>0,s[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=o-i;while(f!==o&&0===s[f])f++;var p=new Uint8Array(r+(o-f)),m=r;while(f!==o)p[m++]=s[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var i=r,o=i,s=o,a=n(3914);class l{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class c{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return h(this,t)}}class u{constructor(t){this.decoders=t}or(t){return h(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const h=(t,e)=>new u({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class d{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new l(t,e,n),this.decoder=new c(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const f=({name:t,prefix:e,encode:n,decode:r})=>new d(t,e,n,r),p=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=s(n,e);return f({prefix:t,name:e,encode:r,decode:t=>(0,a.coerce)(i(t))})},m=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=t.length;while("="===t[o-1])--o;const s=new Uint8Array(o*n/8|0);let a=0,l=0,c=0;for(let u=0;u<o;++u){const e=i[t[u]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);l=l<<n|e,a+=n,a>=8&&(a-=8,s[c++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return s},g=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let o="",s=0,a=0;for(let l=0;l<t.length;++l){a=a<<8|t[l],s+=8;while(s>n)s-=n,o+=e[i&a>>s]}if(s&&(o+=e[i&a<<n-s]),r)while(o.length*n&7)o+="=";return o},y=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>f({prefix:e,name:t,encode(t){return g(t,r,n)},decode(e){return m(e,r,n,t)}})},2056:function(t,e,n){"use strict";n.r(e),n.d(e,{base32:function(){return i},base32hex:function(){return l},base32hexpad:function(){return u},base32hexpadupper:function(){return h},base32hexupper:function(){return c},base32pad:function(){return s},base32padupper:function(){return a},base32upper:function(){return o},base32z:function(){return d}});var r=n(4711);const i=(0,r.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=(0,r.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=(0,r.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,r.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),l=(0,r.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c=(0,r.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u=(0,r.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,r.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,r.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},8334:function(t,e,n){"use strict";n.r(e),n.d(e,{base58btc:function(){return i},base58flickr:function(){return o}});var r=n(4711);const i=(0,r.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=(0,r.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},3914:function(t,e,n){"use strict";n.r(e),n.d(e,{coerce:function(){return a},empty:function(){return r},equals:function(){return s},fromHex:function(){return o},fromString:function(){return c},isBinary:function(){return l},toHex:function(){return i},toString:function(){return u}});n(3767),n(8585),n(8696);const r=new Uint8Array(0),i=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),o=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map((t=>parseInt(t,16)))):r},s=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},a=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},l=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),c=t=>(new TextEncoder).encode(t),u=t=>(new TextDecoder).decode(t)},9329:function(t,e,n){"use strict";n.d(e,{k:function(){return l}});n(3767),n(8585),n(8696);var r=n(550),i=n(5226),o=n(8334),s=n(2056),a=n(3914);class l{constructor(t,e,n,r){this.code=e,this.version=t,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:y,byteLength:y,code:g,version:g,multihash:g,bytes:g,_baseCache:y,asCID:y})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:e}=this;if(t!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==f)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return l.createV0(e)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,n=i.Ue(t,e);return l.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&i.fS(this.multihash,t.multihash)}toString(t){const{bytes:e,version:n,_baseCache:r}=this;switch(n){case 0:return u(e,r,t||o.base58btc.encoder);default:return h(e,r,t||s.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return w(/^0\.0/,b),!(!t||!t[m]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof l)return t;if(null!=t&&t.asCID===t){const{version:e,code:n,multihash:r,bytes:i}=t;return new l(e,n,r,i||p(e,n,r.bytes))}if(null!=t&&!0===t[m]){const{version:e,multihash:n,code:r}=t,o=i.Jx(n);return l.create(e,r,o)}return null}static create(t,e,n){if("number"!==typeof e)throw new Error("String codecs are no longer supported");switch(t){case 0:if(e!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new l(t,e,n,n.bytes);case 1:{const r=p(t,e,n.bytes);return new l(t,e,n,r)}default:throw new Error("Invalid version")}}static createV0(t){return l.create(0,d,t)}static createV1(t,e){return l.create(1,t,e)}static decode(t){const[e,n]=l.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=l.inspectBytes(t),n=e.size-e.multihashSize,r=(0,a.coerce)(t.subarray(n,n+e.multihashSize));if(r.byteLength!==e.multihashSize)throw new Error("Incorrect length");const o=r.subarray(e.multihashSize-e.digestSize),s=new i.zZ(e.multihashCode,e.digestSize,o,r),c=0===e.version?l.createV0(s):l.createV1(e.codec,s);return[c,t.subarray(e.size)]}static inspectBytes(t){let e=0;const n=()=>{const[n,i]=r.Jx(t.subarray(e));return e+=i,n};let i=n(),o=d;if(18===i?(i=0,e=0):1===i&&(o=n()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const s=e,a=n(),l=n(),c=e+l,u=c-s;return{version:i,codec:o,multihashCode:a,digestSize:l,multihashSize:u,size:c}}static parse(t,e){const[n,r]=c(t,e),i=l.decode(r);return i._baseCache.set(n,t),i}}const c=(t,e)=>{switch(t[0]){case"Q":{const n=e||o.base58btc;return[o.base58btc.prefix,n.decode(`${o.base58btc.prefix}${t}`)]}case o.base58btc.prefix:{const n=e||o.base58btc;return[o.base58btc.prefix,n.decode(t)]}case s.base32.prefix:{const n=e||s.base32;return[s.base32.prefix,n.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},u=(t,e,n)=>{const{prefix:r}=n;if(r!==o.base58btc.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(null==i){const i=n.encode(t).slice(1);return e.set(r,i),i}return i},h=(t,e,n)=>{const{prefix:r}=n,i=e.get(r);if(null==i){const i=n.encode(t);return e.set(r,i),i}return i},d=112,f=18,p=(t,e,n)=>{const i=r.P$(t),o=i+r.P$(e),s=new Uint8Array(o+n.byteLength);return r.mL(t,s,0),r.mL(e,s,i),s.set(n,o),s},m=Symbol.for("@ipld/js-cid/CID"),g={writable:!1,configurable:!1,enumerable:!0},y={writable:!1,enumerable:!1,configurable:!1},v="0.0.0-dev",w=(t,e)=>{if(!t.test(v))throw new Error(e);console.warn(e)},b="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},6347:function(t,e,n){"use strict";n.r(e),n.d(e,{code:function(){return o},decode:function(){return a},encode:function(){return s},name:function(){return i}});var r=n(3914);const i="raw",o=85,s=t=>(0,r.coerce)(t),a=t=>(0,r.coerce)(t)},5226:function(t,e,n){"use strict";n.d(e,{Jx:function(){return s},Ue:function(){return o},fS:function(){return a},zZ:function(){return l}});n(3767),n(8585),n(8696);var r=n(3914),i=n(550);const o=(t,e)=>{const n=e.byteLength,r=i.P$(t),o=r+i.P$(n),s=new Uint8Array(o+n);return i.mL(t,s,0),i.mL(n,s,r),s.set(e,o),new l(t,n,e,s)},s=t=>{const e=(0,r.coerce)(t),[n,o]=i.Jx(e),[s,a]=i.Jx(e.subarray(o)),c=e.subarray(o+a);if(c.byteLength!==s)throw new Error("Incorrect length");return new l(n,s,c,e)},a=(t,e)=>t===e||t.code===e.code&&t.size===e.size&&(0,r.equals)(t.bytes,e.bytes);class l{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}},8212:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});n(3767),n(8585),n(8696);var r=n(5226);const i=({name:t,code:e,encode:n})=>new o(t,e,n);class o{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?r.Ue(this.code,e):e.then((t=>r.Ue(this.code,t)))}throw Error("Unknown type, must be binary type")}}},7041:function(t,e,n){"use strict";n.r(e),n.d(e,{identity:function(){return c}});var r=n(3914),i=n(5226);const o=0,s="identity",a=r.coerce,l=t=>i.Ue(o,a(t)),c={code:o,name:s,encode:a,digest:l}},1919:function(t,e,n){"use strict";n.r(e),n.d(e,{sha256:function(){return o},sha512:function(){return s}});n(3767),n(8585),n(8696);var r=n(8212);const i=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),o=(0,r.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),s=(0,r.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},2493:function(t,e,n){"use strict";n.d(e,{aI:function(){return i},k0:function(){return r.k}});var r=n(9329),i=(n(550),n(3914));n(8212),n(5226)},550:function(t,e,n){"use strict";n.d(e,{Jx:function(){return C},mL:function(){return T},P$:function(){return M}});var r=l,i=128,o=127,s=~o,a=Math.pow(2,31);function l(t,e,n){e=e||[],n=n||0;var r=n;while(t>=a)e[n++]=255&t|i,t/=128;while(t&s)e[n++]=255&t|i,t>>>=7;return e[n]=0|t,l.bytes=n-r+1,e}var c=d,u=128,h=127;function d(t,e){var n,r=0,i=(e=e||0,0),o=e,s=t.length;do{if(o>=s)throw d.bytes=0,new RangeError("Could not decode varint");n=t[o++],r+=i<28?(n&h)<<i:(n&h)*Math.pow(2,i),i+=7}while(n>=u);return d.bytes=o-e,r}var f=Math.pow(2,7),p=Math.pow(2,14),m=Math.pow(2,21),g=Math.pow(2,28),y=Math.pow(2,35),v=Math.pow(2,42),w=Math.pow(2,49),b=Math.pow(2,56),_=Math.pow(2,63),S=function(t){return t<f?1:t<p?2:t<m?3:t<g?4:t<y?5:t<v?6:t<w?7:t<b?8:t<_?9:10},E={encode:r,decode:c,encodingLength:S},A=E,x=A;const C=(t,e=0)=>{const n=x.decode(t,e);return[n,x.decode.bytes]},T=(t,e,n=0)=>(x.encode(t,e,n),e),M=t=>x.encodingLength(t)},203:function(t,e,n){"use strict";n.d(e,{$:function(){return v},h:function(){return y}});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=s||o&&+o[1]<57,c=0;c<10;c++)r[48+c]=r[96+c]=String(c);for(c=1;c<=24;c++)r[c+111]="F"+c;for(c=65;c<=90;c++)r[c]=String.fromCharCode(c+32),i[c]=String.fromCharCode(c);for(var u in r)i.hasOwnProperty(u)||(i[u]=r[u]);function h(t){var e=l&&(t.ctrlKey||t.altKey||t.metaKey)||a&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key,n=!e&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var d=n(157);const f="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function p(t){let e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let t=o[a];if(/^(cmd|meta|m)$/i.test(t))i=!0;else if(/^a(lt)?$/i.test(t))e=!0;else if(/^(c|ctrl|control)$/i.test(t))n=!0;else if(/^s(hift)?$/i.test(t))r=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);f?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function m(t){let e=Object.create(null);for(let n in t)e[p(n)]=t[n];return e}function g(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function y(t){return new d.Sy({props:{handleKeyDown:v(t)}})}function v(t){let e=m(t);return function(t,n){let i,o=h(n),s=e[g(o,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=e[g(o,n,!1)];if(r&&r(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){let r=e[g(i,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}},1543:function(t,e,n){"use strict";n.d(e,{aw:function(){return rt},PW:function(){return wt},HY:function(){return a},vc:function(){return h},ZU:function(){return tt},NB:function(){return R},Ts:function(){return k},e4:function(){return d},V_:function(){return et},p2:function(){return f}});n(7658);function r(t){this.content=t}r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var i=r;function o(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let t=0;i.text[t]==s.text[t];t++)n++;return n}if(i.content.size||s.content.size){let t=o(i.content,s.content,n+1);if(null!=t)return t}n+=i.nodeSize}else n+=i.nodeSize}}function s(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=t.child(--i),l=e.child(--o),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let t=0,e=Math.min(a.text.length,l.text.length);while(t<e&&a.text[a.text.length-t-1]==l.text[l.text.length-t-1])t++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let t=s(a.content,l.content,n-1,r-1);if(t)return t}n-=c,r-=c}else n-=c,r-=c}}class a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,r=0,i){for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,t-i),Math.min(a.content.size,e-i),n,r+i)}s=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let i="",o=!0;return this.nodesBetween(t,e,((s,a)=>{s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new a(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let i=0,o=0;o<e;i++){let s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new a(n,r)}cutByIndex(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,i)}addToStart(t){return new a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return o(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?c(n+1,o):c(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return a.empty;let e,n=0;for(let r=0;r<t.length;r++){let i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new a(e||t,n)}static from(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(t,e){return l.index=t,l.offset=e,l}function u(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!u(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class h{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&u(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);return n.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return h.none;if(t instanceof h)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}h.none=[];class d extends Error{}class f{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=m(this.content,t+this.openStart,e);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(t,e){return new f(p(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return f.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new f(t,n,r)}}function p(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(p(o.content,e-i-1,n-i-1)))}function m(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=m(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function g(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return y(t,e,n,0)}function y(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=y(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:i,end:s}=x(n,t);return S(o,E(t,i,s,e,r))}{let r=t.parent,i=r.content;return S(r,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}}return S(o,A(t,e,r))}function v(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function w(t,e,n){let r=t.node(n);return v(r,e.node(n)),r}function b(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function _(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(b(t.nodeAfter,r),o++));for(let a=o;a<s;a++)b(i.child(a),r);e&&e.depth==n&&e.textOffset&&b(e.nodeBefore,r)}function S(t,e){return t.type.checkContent(e),t.copy(e)}function E(t,e,n,r,i){let o=t.depth>i&&w(t,e,i+1),s=r.depth>i&&w(n,r,i+1),l=[];return _(null,t,i,l),o&&s&&e.index(i)==n.index(i)?(v(o,s),b(S(o,E(t,e,n,r,i+1)),l)):(o&&b(S(o,A(t,e,i+1)),l),_(e,n,i,l),s&&b(S(s,A(n,r,i+1)),l)),_(r,null,i,l),new a(l)}function A(t,e,n){let r=[];if(_(null,t,n,r),t.depth>n){let i=w(t,e,n+1);b(S(i,A(t,e,n+1)),r)}return _(e,null,n,r),new a(r)}function x(t,e){let n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(a.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}f.empty=new f(a.empty,0,0);class C{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let i=0;i<t;i++)r+=n.child(i).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return h.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new k(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,i=e;for(let o=t;;){let{index:t,offset:e}=o.content.findIndex(i),s=i-e;if(n.push(o,t,r+e),!s)break;if(o=o.child(t),o.isText)break;i=s-1,r+=e+1}return new C(e,n,i)}static resolveCached(t,e){for(let r=0;r<T.length;r++){let n=T[r];if(n.pos==e&&n.doc==t)return n}let n=T[M]=C.resolve(t,e);return M=(M+1)%I,n}}let T=[],M=0,I=12;class k{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const O=Object.create(null);class R{constructor(t,e,n,r=h.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&u(this.attrs,e||t.defaultAttrs||O)&&h.sameSet(this.marks,n||h.none)}copy(t=null){return t==this.content?this:new R(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new R(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return f.empty;let r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),l=a.content.cut(r.pos-s,i.pos-s);return new f(l,r.depth-o,i.depth-o)}replace(t,e,n){return g(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return C.resolveCached(this,t)}resolveNoCache(t){return C.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),N(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=a.empty,r=0,i=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=h.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!h.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}R.prototype.text=void 0;class D extends R{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):N(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new D(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new D(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function N(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class P{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new L(t,e);if(null==n.next)return P.empty;let r=B(n);n.next&&n.err("Unexpected trailing text");let i=q(W(r));return Y(i,n),i}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];function i(o,s){let l=o.matchFragment(t,n);if(l&&(!e||l.validEnd))return a.from(s.map((t=>t.createAndFill())));for(let t=0;t<o.next.length;t++){let{type:e,next:n}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=i(n,s.concat(e));if(t)return t}}return null}return i(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){let r=n.shift(),i=r.match;if(i.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<i.next.length;t++){let{type:o,next:s}=i.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}return e(this),t.map(((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}P.empty=new P(!0);class L{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function B(t){let e=[];do{e.push(U(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function U(t){let e=[];do{e.push(F(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function F(t){let e=j(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=V(t,e)}return e}function z(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function V(t,e){let n=z(t),r=n;return t.eat(",")&&(r="}"!=t.next?z(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function H(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let t=n[o];t.groups.indexOf(e)>-1&&i.push(t)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function j(t){if(t.eat("(")){let e=B(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=H(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}function W(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((t=>t.to=e))}function o(t,e){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(o(n,e))),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return i(o(t.expr,e),s),i(o(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=n();i(o(t.expr,s),e),s=e}if(-1==t.max)i(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=n();r(s,e),i(o(t.expr,s),e),s=e}return[r(s)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(t.exprs[r],e);if(r==t.exprs.length-1)return s;i(s,e=n())}}}function G(t,e){return e-t}function $(t,e){let n=[];return r(e),n.sort(G);function r(e){let i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(let t=0;t<i.length;t++){let{term:e,to:o}=i[t];e||-1!=n.indexOf(o)||r(o)}}}function q(t){let e=Object.create(null);return n($(t,0));function n(r){let i=[];r.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);$(t,n).forEach((t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let o=e[r.join(",")]=new P(r.indexOf(t.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort(G);o.next.push({type:i[t][0],next:e[r.join(",")]||n(r)})}return o}}function Y(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],i=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function X(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Z(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(void 0===i){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=e.default}n[r]=i}return n}function K(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Q(t[n]);return e}class J{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=K(n.attrs),this.defaultAttrs=X(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==P.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:Z(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new R(this,this.computeAttrs(t),a.from(e),h.setFrom(n))}createChecked(t=null,e,n){return e=a.from(e),this.checkContent(e),new R(this,this.computeAttrs(t),e,h.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),e=a.from(e),e.size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),i=r&&r.fillBefore(a.empty,!0);return i?new R(this,t,e.append(i),h.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:h.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,r)=>n[t]=new J(t,e,r)));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Q{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class tt{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=K(r.attrs),this.excluded=null;let i=X(this.attrs);this.instance=i?new h(this,i):null}create(t=null){return!t&&this.instance?this.instance:new h(this,Z(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach(((t,i)=>n[t]=new tt(t,r++,e,i))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class et{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=i.from(t.nodes),e.marks=i.from(t.marks||{}),this.nodes=J.compile(this.spec.nodes,this),this.marks=tt.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let t=this.nodes[r],e=t.spec.content||"",i=t.spec.marks;t.contentMatch=n[e]||(n[e]=P.parse(e,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.markSet="_"==i?null:i?nt(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let r in this.marks){let t=this.marks[r],e=t.spec.excludes;t.excluded=null==e?[t]:""==e?[]:nt(this,e.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof J))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new D(n,n.defaultAttrs,t,h.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return R.fromJSON(this,t)}markFromJSON(t){return h.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function nt(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let e in t.marks){let r=t.marks[e];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class rt{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((t=>{t.tag?this.tags.push(t):t.style&&this.styles.push(t)})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new dt(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new dt(this,e,!0);return n.addAll(t,e.from,e.to),f.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(pt(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(t)||r.context&&!n.matchesContext(r.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r],i=null==t.priority?50:t.priority;if(i<n)break}e.splice(r,0,t)}for(let r in t.marks){let e=t.marks[r].spec.parseDOM;e&&e.forEach((t=>{n(t=gt(t)),t.mark||t.ignore||t.clearMark||(t.mark=r)}))}for(let r in t.nodes){let e=t.nodes[r].spec.parseDOM;e&&e.forEach((t=>{n(t=gt(t)),t.node||t.ignore||t.mark||(t.node=r)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new rt(t,rt.schemaRules(t)))}}const it={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ot={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},st={ol:!0,ul:!0},at=1,lt=2,ct=4;function ut(t,e,n){return null!=e?(e?at:0)|("full"===e?lt:0):t&&"pre"==t.whitespace?at|lt:n&~ct}class ht{constructor(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=h.none,this.stashMarks=[],this.match=o||(s&ct?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&at)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let r=n[e];(this.type?this.type.allowsMarkType(r.type):yt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!it.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class dt{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,i=e.topNode,o=ut(null,e.preserveWhitespace,0)|(n?ct:0);r=i?new ht(i.type,i.attrs,h.none,h.none,!0,e.topMatch||i.type.contentMatch,o):new ht(n?null:t.schema.topNodeType,null,h.none,h.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){let e=t.getAttribute("style");if(e){let n=this.readStyles(mt(e));if(!n)return;let[r,i]=n,o=this.top;for(let t=0;t<i.length;t++)this.removePendingMark(i[t],o);for(let t=0;t<r.length;t++)this.addPendingMark(r[t]);this.addElement(t);for(let t=0;t<r.length;t++)this.removePendingMark(r[t],o);for(let t=0;t<i.length;t++)this.addPendingMark(i[t])}else this.addElement(t)}}addTextNode(t){let e=t.nodeValue,n=this.top;if(n.options&lt||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&at)e=n.options&lt?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n,r=t.nodeName.toLowerCase();st.hasOwnProperty(r)&&this.parser.normalizeLists&&ft(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:ot.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let e,n=this.top,o=this.needsBlock;if(it.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),e=!0,n.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),e&&this.sync(n),this.needsBlock=o}else this.addElementByRule(t,i,!1===i.consuming?n:void 0)}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=h.none,n=h.none;t:for(let r=0;r<t.length;r+=2)for(let i;;){let o=this.parser.matchStyle(t[r],t[r+1],this,i);if(!o)continue t;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach((t=>{o.clearMark(t)&&(n=t.addToSet(n))})):e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;i=o}return[e,n]}addElementByRule(t,e,n){let r,i,o;if(e.node)i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace);else{let t=this.parser.schema.marks[e.mark];o=t.create(e.attrs),this.addPendingMark(o)}let s=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(t,e,n){let r=e||0;for(let i=e?t.childNodes[e]:t.firstChild,o=null==n?null:t.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}findPlace(t){let e,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(let r=0;r<e.length;r++)this.enterInner(e[r],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let r=0;r<t.marks.length;r++)e.type&&!e.type.allowsMarkType(t.marks[r].type)||(n=t.marks[r].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}enterInner(t,e=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);let o=ut(t,r,i.options);i.options&ct&&0==i.content.length&&(o|=ct),this.nodes.push(new ht(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){let t=e.compareDocumentPosition(this.find[r].node);t&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=i;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(t){let e=vt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let e=r.popFromStashMark(t);e&&r.type&&r.type.allowsMarkType(e.type)&&(r.activeMarks=e.addToSet(r.activeMarks))}if(r==e)break}}}function ft(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&st.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}function pt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function mt(t){let e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function gt(t){let e={};for(let n in t)e[n]=t[n];return e}function yt(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:i}=t.edge(n);if(r==e)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}function vt(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class wt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=_t(e).createDocumentFragment());let r=n,i=[];return t.forEach((t=>{if(i.length||t.marks.length){let n=0,o=0;while(n<i.length&&o<t.marks.length){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(i[n][0])||!1===e.type.spec.spanning)break;n++,o++}else o++}while(n<i.length)r=i.pop()[1];while(o<t.marks.length){let n=t.marks[o++],s=this.serializeMark(n,t.isInline,e);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=wt.renderSpec(_t(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&wt.renderSpec(_t(n),r(t,e))}static renderSpec(t,e,n=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,i=e[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s=n?t.createElementNS(n,i):t.createElement(i),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let t in a)if(null!=a[t]){let e=t.indexOf(" ");e>0?s.setAttributeNS(t.slice(0,e),t.slice(e+1),a[t]):s.setAttribute(t,a[t])}}for(let c=l;c<e.length;c++){let i=e[c];if(0===i){if(c<e.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:e,contentDOM:o}=wt.renderSpec(t,i,n);if(s.appendChild(e),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:s,contentDOM:r}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new wt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=bt(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return bt(t.marks)}}function bt(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function _t(t){return t.document||window.document}},157:function(t,e,n){"use strict";n.d(e,{Bs:function(){return u},C1:function(){return p},H$:function(){return O},Sy:function(){return M},Y1:function(){return s},qv:function(){return d},yy:function(){return C}});n(7658);var r=n(1543),i=n(1382);const o=Object.create(null);class s{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new a(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=r.p2.empty){let n=e.content.lastChild,i=null;for(let r=0;r<e.openEnd;r++)i=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=t.mapping.slice(o);t.replaceRange(u.map(l.pos),u.map(c.pos),a?r.p2.empty:e),0==a&&y(t,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=t.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),y(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new u(t):g(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let i=t.depth-1;i>=0;i--){let r=e<0?g(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):g(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new p(t.node(0))}static atStart(t){return g(t,t,0,0,1)||new p(t)}static atEnd(t){return g(t,t,t.content.size,t.childCount,-1)||new p(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=o[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e}getBookmark(){return u.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(t,e){this.$from=t,this.$to=e}}let l=!1;function c(t){l||t.parent.inlineContent||(l=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class u extends s{constructor(t,e=t){c(t),c(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=t.resolve(e.map(this.anchor));return new u(r.parent.inlineContent?r:n,n)}replace(t,e=r.p2.empty){if(super.replace(t,e),e==r.p2.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof u&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new h(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new u(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=s.findFrom(e,n,!0)||s.findFrom(e,-n,!0);if(!t)return s.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r?t=e:(t=(s.findFrom(t,-n,!0)||s.findFrom(t,n,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new u(t,e)}}s.jsonID("text",u);class h{constructor(t,e){this.anchor=t,this.head=e}map(t){return new h(t.map(this.anchor),t.map(this.head))}resolve(t){return u.between(t.resolve(this.anchor),t.resolve(this.head))}}class d extends s{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),i=t.resolve(r);return n?s.near(i):new d(i)}content(){return new r.p2(r.HY.from(this.node),0,0)}eq(t){return t instanceof d&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new d(t.resolve(e.anchor))}static create(t,e){return new d(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}d.prototype.visible=!1,s.jsonID("node",d);class f{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new h(n,n):new f(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):s.near(e)}}class p extends s{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=r.p2.empty){if(e==r.p2.empty){t.delete(0,t.doc.content.size);let e=s.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new p(t)}map(t){return new p(t)}eq(t){return t instanceof p}getBookmark(){return m}}s.jsonID("all",p);const m={map(){return this},resolve(t){return new p(t)}};function g(t,e,n,r,i,o=!1){if(e.inlineContent)return u.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let r=e.child(s);if(r.isAtom){if(!o&&d.isSelectable(r))return d.create(t,n-(i<0?r.nodeSize:0))}else{let e=g(t,r,n+i,i<0?r.childCount:0,i,o);if(e)return e}n+=r.nodeSize*i}return null}function y(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof i.Pu||o instanceof i.FC))return;let a,l=t.mapping.maps[r];l.forEach(((t,e,n,r)=>{null==a&&(a=r)})),t.setSelection(s.near(t.doc.resolve(a),n))}const v=1,w=2,b=4;class _ extends i.wx{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|v)&~w,this.storedMarks=null,this}get selectionSet(){return(this.updated&v)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=w,this}ensureMarks(t){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&w)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~w,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let i=this.storedMarks;if(!i){let t=this.doc.resolve(e);i=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=b,this}get scrolledIntoView(){return(this.updated&b)>0}}function S(t,e){return e&&t?t.bind(e):t}class E{constructor(t,e,n){this.name=t,this.init=S(e.init,n),this.apply=S(e.apply,n)}}const A=[new E("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new E("selection",{init(t,e){return t.selection||s.atStart(e.doc)},apply(t){return t.selection}}),new E("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new E("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class x{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=A.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new E(t.key,t.spec.state,t))}))}}class C{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<o?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new C(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}return e}get tr(){return new _(this)}static create(t){let e=new x(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new C(e);for(let r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n}reconfigure(t){let e=new x(this.schema,t.plugins),n=e.fields,r=new C(e);for(let i=0;i<n.length;i++){let e=n[i].name;r[e]=this.hasOwnProperty(e)?this[e]:n[i].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new x(t.schema,t.plugins),o=new C(i);return i.fields.forEach((i=>{if("doc"==i.name)o.doc=r.NB.fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(o[i.name]=a.fromJSON.call(s,t,e[r],o))}o[i.name]=i.init(t,o)}})),o}}function T(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=T(i,e,{})),n[r]=i}return n}class M{constructor(t){this.spec=t,this.props={},t.props&&T(t.props,this,this.props),this.key=t.key?t.key.key:k("plugin")}getState(t){return t[this.key]}}const I=Object.create(null);function k(t){return t in I?t+"$"+ ++I[t]:(I[t]=0,t+"$")}class O{constructor(t="key"){this.key=k(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},1382:function(t,e,n){"use strict";n.d(e,{Ax:function(){return V},FC:function(){return x},GJ:function(){return G},Mn:function(){return j},Pu:function(){return A},dR:function(){return X},k9:function(){return O},nd:function(){return D},nj:function(){return Y},vs:function(){return m},wx:function(){return dt}});n(7658),n(541);var r=n(1543);const i=65535,o=Math.pow(2,16);function s(t,e){return t+e*o}function a(t){return t&i}function l(t){return(t-(t&i))/o}const c=1,u=2,h=4,d=8;class f{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&d)>0}get deletedBefore(){return(this.delInfo&(c|h))>0}get deletedAfter(){return(this.delInfo&(u|h))>0}get deletedAcross(){return(this.delInfo&h)>0}}class p{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&p.empty)return p.empty}recover(t){let e=0,n=a(t);if(!this.inverted)for(let r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+l(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>t)break;let p=this.ranges[a+i],m=this.ranges[a+o],g=l+p;if(t<=g){let i=p?t==l?-1:t==g?1:e:e,o=l+r+(i<0?0:m);if(n)return o;let y=t==(e<0?l:g)?null:s(a/3,t-l),v=t==l?u:t==g?c:h;return(e<0?t!=l:t!=g)&&(v|=d),new f(o,v,y)}r+=m-p}return n?t+r:new f(t+r,0,null)}touches(t,e){let n=0,r=a(e),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let e=this.ranges[s]-(this.inverted?n:0);if(e>t)break;let a=this.ranges[s+i],l=e+a;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+e],c=this.ranges[r+n];t(s,s+l,a,a+c),i+=c-l}}invert(){return new p(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?p.empty:new p(t<0?[0,-t,0]:[0,0,t])}}p.empty=new p([]);class m{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new m(this.maps,this.mirror,t,e)}copy(){return new m(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new m;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i],o=n.mapResult(t,e);if(null!=o.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(o.recover);continue}}r|=o.delInfo,t=o.pos}return n?t:new f(t,r,null)}}const g=Object.create(null);class y{getMap(){return p.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=g[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in g)throw new RangeError("Duplicate use of step JSON ID "+t);return g[t]=e,e.prototype.jsonID=t,e}}class v{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new v(t,null)}static fail(t){return new v(null,t)}static fromReplace(t,e,n,i){try{return v.ok(t.replace(e,n,i))}catch(o){if(o instanceof r.e4)return v.fail(o.message);throw o}}}function w(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(w(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return r.HY.fromArray(i)}class b extends y{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r.p2(w(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return v.fromReplace(t,this.from,this.to,o)}invert(){return new _(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new b(e.pos,n.pos,this.mark)}merge(t){return t instanceof b&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new b(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new b(e.from,e.to,t.markFromJSON(e.mark))}}y.jsonID("addMark",b);class _ extends y{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new r.p2(w(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return v.fromReplace(t,this.from,this.to,n)}invert(){return new b(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new _(e.pos,n.pos,this.mark)}merge(t){return t instanceof _&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new _(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new _(e.from,e.to,t.markFromJSON(e.mark))}}y.jsonID("removeMark",_);class S extends y{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return v.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return v.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new S(this.pos,e.marks[n]);return new S(this.pos,this.mark)}}return new E(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new S(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new S(e.pos,t.markFromJSON(e.mark))}}y.jsonID("addNodeMark",S);class E extends y{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return v.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return v.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new S(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new E(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new E(e.pos,t.markFromJSON(e.mark))}}y.jsonID("removeNodeMark",E);class A extends y{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&C(t,this.from,this.to)?v.fail("Structure replace would overwrite content"):v.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new p([this.from,this.to-this.from,this.slice.size])}invert(t){return new A(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new A(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof A)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new A(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new A(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new A(e.from,e.to,r.p2.fromJSON(t,e.slice),!!e.structure)}}y.jsonID("replace",A);class x extends y{constructor(t,e,n,r,i,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(t){if(this.structure&&(C(t,this.from,this.gapFrom)||C(t,this.gapTo,this.to)))return v.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return v.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?v.fromReplace(t,this.from,this.to,n):v.fail("Content does not fit in gap")}getMap(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new x(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||i>n.pos?null:new x(e.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new x(e.from,e.to,e.gapFrom,e.gapTo,r.p2.fromJSON(t,e.slice),e.insert,!!e.structure)}}function C(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){let t=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!t||t.isLeaf)return!0;t=t.firstChild,i--}}return!1}function T(t,e,n,r){let i,o,s=[],a=[];t.doc.nodesBetween(e,n,((t,l,c)=>{if(!t.isInline)return;let u=t.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),h=Math.min(l+t.nodeSize,n),d=r.addToSet(u);for(let t=0;t<u.length;t++)u[t].isInSet(d)||(i&&i.to==c&&i.mark.eq(u[t])?i.to=h:s.push(i=new _(c,h,u[t])));o&&o.to==c?o.to=h:a.push(o=new b(c,h,r))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}function M(t,e,n,i){let o=[],s=0;t.doc.nodesBetween(e,n,((t,a)=>{if(!t.isInline)return;s++;let l=null;if(i instanceof r.ZU){let e,n=t.marks;while(e=i.isInSet(n))(l||(l=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(l=[i]):l=t.marks;if(l&&l.length){let r=Math.min(a+t.nodeSize,n);for(let t=0;t<l.length;t++){let n,i=l[t];for(let t=0;t<o.length;t++){let e=o[t];e.step==s-1&&i.eq(o[t].style)&&(n=e)}n?(n.to=r,n.step=s):o.push({style:i,from:Math.max(a,e),to:r,step:s})}}})),o.forEach((e=>t.step(new _(e.from,e.to,e.style))))}function I(t,e,n,i=n.contentMatch){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let e=o.child(l),c=a+e.nodeSize,u=i.matchType(e.type);if(u){i=u;for(let r=0;r<e.marks.length;r++)n.allowsMarkType(e.marks[r].type)||t.step(new _(a,c,e.marks[r]))}else s.push(new A(a,c,r.p2.empty));a=c}if(!i.validEnd){let e=i.fillBefore(r.HY.empty,!0);t.replace(a,a,new r.p2(e,0,0))}for(let r=s.length-1;r>=0;r--)t.step(s[r])}function k(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function O(t){let e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let e=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&e.canReplace(i,o,n))return r;if(0==r||e.type.spec.isolating||!k(e,i,o))break}return null}function R(t,e,n){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),l=o.after(s+1),c=a,u=l,h=r.HY.empty,d=0;for(let m=s,g=!1;m>n;m--)g||i.index(m)>0?(g=!0,h=r.HY.from(i.node(m).copy(h)),d++):c--;let f=r.HY.empty,p=0;for(let m=s,g=!1;m>n;m--)g||o.after(m+1)<o.end(m)?(g=!0,f=r.HY.from(o.node(m).copy(f)),p++):u++;t.step(new x(c,u,a,l,new r.p2(h.append(f),d,p),h.size-d,!0))}function D(t,e,n=null,r=t){let i=P(t,e),o=i&&L(r,e);return o?i.map(N).concat({type:e,attrs:n}).concat(o.map(N)):null}function N(t){return{type:t,attrs:null}}function P(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function L(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=s.length?s[s.length-1]:e,l=a.contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?s:null}function B(t,e,n){let i=r.HY.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let t=n[a].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.HY.from(n[a].type.create(n[a].attrs,i))}let o=e.start,s=e.end;t.step(new x(o,s,o,s,new r.p2(i,0,0),n.length,!0))}function U(t,e,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{if(e.isTextblock&&!e.hasMarkup(i,o)&&F(t.doc,t.mapping.slice(s).map(n),i)){t.clearIncompatible(t.mapping.slice(s).map(n,1),i);let a=t.mapping.slice(s),l=a.map(n,1),c=a.map(n+e.nodeSize,1);return t.step(new x(l,c,l+1,c-1,new r.p2(r.HY.from(i.create(o,null,e.marks)),0,0),1,!0)),!1}}))}function F(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function z(t,e,n,i,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new x(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new r.p2(r.HY.from(a),0,0),1,!0))}function V(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let t=i.node(c),e=i.index(c);if(t.type.spec.isolating)return!1;let n=t.content.cutByIndex(e,t.childCount),o=r&&r[u]||t;if(o!=t&&(n=n.replaceChild(0,o.type.create(o.attrs))),!t.canReplace(e+1,t.childCount)||!o.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function H(t,e,n=1,i){let o=t.doc.resolve(e),s=r.HY.empty,a=r.HY.empty;for(let l=o.depth,c=o.depth-n,u=n-1;l>c;l--,u--){s=r.HY.from(o.node(l).copy(s));let t=i&&i[u];a=r.HY.from(t?t.type.create(t.attrs,a):o.node(l).copy(a))}t.step(new A(e,e,new r.p2(s.append(a),n,n),!0))}function j(t,e){let n=t.resolve(e),r=n.index();return W(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function W(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function G(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let t,o,s=r.index(i);if(i==r.depth?(t=r.nodeBefore,o=r.nodeAfter):n>0?(t=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(t=r.node(i).maybeChild(s-1),o=r.node(i+1)),t&&!t.isTextblock&&W(t,o)&&r.node(i).canReplace(s,s+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function $(t,e,n){let i=new A(e-n,e+n,r.p2.empty,!0);t.step(i)}function q(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let t=r.index(i);if(r.node(i).canReplaceWith(t,t,n))return r.before(i+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let t=r.indexAfter(i);if(r.node(i).canReplaceWith(t,t,n))return r.after(i+1);if(t<r.node(i).childCount)return null}return null}function Y(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let t=r.depth;t>=0;t--){let e=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,n=r.index(t)+(e>0?1:0),s=r.node(t),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let t=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=t&&s.canReplaceWith(n,n,t[0])}if(a)return 0==e?r.pos:e<0?r.before(t+1):r.after(t+1)}return null}function X(t,e,n=e,i=r.p2.empty){if(e==n&&!i.size)return null;let o=t.resolve(e),s=t.resolve(n);return Z(o,s,i)?new A(e,n,i):new K(o,s,i).fit()}function Z(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}y.jsonID("replaceAround",x);class K{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=r.HY.empty;for(let r=0;r<=t.depth;r++){let e=t.node(r);this.frontier.push({type:e.type,match:e.contentMatchAt(t.indexAfter(r))})}for(let i=t.depth;i>0;i--)this.placed=r.HY.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;let l=new r.p2(o,s,a);return t>-1?new x(n.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||n.pos!=this.$to.pos?new A(n.pos,i.pos,l):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=tt(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let o=t.firstChild;for(let s=this.depth;s>=0;s--){let t,{type:a,match:l}=this.frontier[s],c=null;if(1==e&&(o?l.matchType(o.type)||(c=l.fillBefore(r.HY.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:c};if(2==e&&o&&(t=l.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:t};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=tt(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.p2(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=tt(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new r.p2(J(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new r.p2(J(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:o}){while(this.depth>e)this.closeFrontierNode();if(o)for(let r=0;r<o.length;r++)this.openFrontierNode(o[r]);let s=this.unplaced,a=n?n.content:s.content,l=s.openStart-t,c=0,u=[],{match:h,type:d}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)u.push(i.child(t));h=h.matchFragment(i)}let f=a.size+t-(s.content.size-s.openEnd);while(c<a.childCount){let t=a.child(c),e=h.matchType(t.type);if(!e)break;c++,(c>1||0==l||t.content.size)&&(h=e,u.push(et(t.mark(d.allowedMarks(t.marks)),1==c?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Q(this.placed,e,r.HY.from(u)),this.frontier[e].match=h,p&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,m=a;r<f;r++){let t=m.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),m=t.content}this.unplaced=p?0==t?r.p2.empty:new r.p2(J(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new r.p2(J(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!nt(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=nt(t,e,r,n,i);if(o){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],i=nt(t,n,r,e,!0);if(!i||i.childCount)continue t}return{depth:e,fit:o,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=Q(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Q(this.placed,this.depth,r.HY.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop(),e=t.match.fillBefore(r.HY.empty,!0);e.childCount&&(this.placed=Q(this.placed,this.frontier.length,e))}}function J(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(J(t.firstChild.content,e-1,n)))}function Q(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Q(t.lastChild.content,e-1,n)))}function tt(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function et(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,et(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r.HY.empty,!0)))),t.copy(i)}function nt(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!rt(n,o.content,s)?a:null}function rt(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function it(t){return t.spec.defining||t.spec.definingForContent}function ot(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(Z(o,s,i))return t.step(new A(e,n,i));let a=ct(o,t.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(o.depth+1);a.unshift(l);for(let r=o.depth,f=o.pos-1;r>0;r--,f--){let t=o.node(r).type.spec;if(t.defining||t.definingAsContext||t.isolating)break;a.indexOf(r)>-1?l=r:o.before(r)==f&&a.splice(1,0,-r)}let c=a.indexOf(l),u=[],h=i.openStart;for(let r=i.content,f=0;;f++){let t=r.firstChild;if(u.push(t),f==i.openStart)break;r=t.content}for(let r=h-1;r>=0;r--){let t=u[r].type,e=it(t);if(e&&o.node(c).type!=t)h=r;else if(e||!t.isTextblock)break}for(let f=i.openStart;f>=0;f--){let e=(f+h+1)%(i.openStart+1),l=u[e];if(l)for(let u=0;u<a.length;u++){let h=a[(u+c)%a.length],d=!0;h<0&&(d=!1,h=-h);let f=o.node(h-1),p=o.index(h-1);if(f.canReplaceWith(p,p,l.type,l.marks))return t.replace(o.before(h),d?s.after(h):n,new r.p2(st(i.content,0,i.openStart,e),e,i.openEnd))}}let d=t.steps.length;for(let r=a.length-1;r>=0;r--){if(t.replace(e,n,i),t.steps.length>d)break;let l=a[r];l<0||(e=o.before(l),n=s.after(l))}}function st(t,e,n,i,o){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(st(r.content,e+1,n,i,r)))}if(e>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r.HY.empty,!0))}return t}function at(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=q(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new r.p2(r.HY.from(i),0,0))}function lt(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=ct(r,i);for(let s=0;s<o.length;s++){let e=o[s],n=s==o.length-1;if(n&&0==e||r.node(e).type.contentMatch.validEnd)return t.delete(r.start(e),i.end(e));if(e>0&&(n||r.node(e-1).canReplace(r.index(e-1),i.indexAfter(e-1))))return t.delete(r.before(e),i.after(e))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function ct(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let r=t.start(i);if(r<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(r==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==r-1)&&n.push(i)}return n}class ut extends y{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return v.fail("No node at attribute step's position");let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return v.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(i),0,e.isLeaf?0:1))}getMap(){return p.empty}invert(t){return new ut(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ut(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ut(e.pos,e.attr,e.value)}}y.jsonID("attr",ut);let ht=class extends Error{};ht=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},ht.prototype=Object.create(Error.prototype),ht.prototype.constructor=ht,ht.prototype.name="TransformError";class dt{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new m}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new ht(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=r.p2.empty){let i=X(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new r.p2(r.HY.from(n),0,0))}delete(t,e){return this.replace(t,e,r.p2.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return ot(this,t,e,n),this}replaceRangeWith(t,e,n){return at(this,t,e,n),this}deleteRange(t,e){return lt(this,t,e),this}lift(t,e){return R(this,t,e),this}join(t,e=1){return $(this,t,e),this}wrap(t,e){return B(this,t,e),this}setBlockType(t,e=t,n,r=null){return U(this,t,e,n,r),this}setNodeMarkup(t,e,n=null,r){return z(this,t,e,n,r),this}setNodeAttribute(t,e,n){return this.step(new ut(t,e,n)),this}addNodeMark(t,e){return this.step(new S(t,e)),this}removeNodeMark(t,e){if(!(e instanceof r.vc)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(e=e.isInSet(n.marks),!e)return this}return this.step(new E(t,e)),this}split(t,e=1,n){return H(this,t,e,n),this}addMark(t,e,n){return T(this,t,e,n),this}removeMark(t,e,n){return M(this,t,e,n),this}clearIncompatible(t,e,n){return I(this,t,e,n),this}}},1460:function(t,e,n){"use strict";n.d(e,{EH:function(){return Cn},p:function(){return En},tk:function(){return nr}});n(7658);var r=n(157),i=n(1543),o=n(1382);const s=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},a=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let l=null;const c=function(t,e,n){let r=l||(l=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},u=function(t,e,n,r){return n&&(d(t,e,n,r,-1)||d(t,e,n,r,1))},h=/^(img|br|input|textarea|hr)$/i;function d(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:f(t))){let n=t.parentNode;if(!n||1!=n.nodeType||m(t)||h.test(t.nodeName)||"false"==t.contentEditable)return!1;e=s(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(i<0?-1:0)],"false"==t.contentEditable)return!1;e=i<0?f(t):0}}}function f(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function p(t,e,n){for(let r=0==e,i=e==f(t);r||i;){if(t==n)return!0;let e=s(t);if(t=t.parentNode,!t)return!1;r=r&&0==e,i=i&&e==f(t)}}function m(t){let e;for(let n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const g=function(t){return t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function y(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function v(t){let e=t.activeElement;while(e&&e.shadowRoot)e=e.shadowRoot.activeElement;return e}const w="undefined"!=typeof navigator?navigator:null,b="undefined"!=typeof document?document:null,_=w&&w.userAgent||"",S=/Edge\/(\d+)/.exec(_),E=/MSIE \d/.exec(_),A=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_),x=!!(E||A||S),C=E?document.documentMode:A?+A[1]:S?+S[1]:0,T=!x&&/gecko\/(\d+)/i.test(_);T&&(/Firefox\/(\d+)/.exec(_)||[0,0])[1];const M=!x&&/Chrome\/(\d+)/.exec(_),I=!!M,k=M?+M[1]:0,O=!x&&!!w&&/Apple Computer/.test(w.vendor),R=O&&(/Mobile\/\w+/.test(_)||!!w&&w.maxTouchPoints>2),D=R||!!w&&/Mac/.test(w.platform),N=/Android \d/.test(_),P=!!b&&"webkitFontSmoothing"in b.documentElement.style,L=P?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function B(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function U(t,e){return"number"==typeof t?t:t[e]}function F(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function z(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;;s=a(s)){if(!s)break;if(1!=s.nodeType)continue;let t=s,n=t==o.body,a=n?B(o):F(t),l=0,c=0;if(e.top<a.top+U(r,"top")?c=-(a.top-e.top+U(i,"top")):e.bottom>a.bottom-U(r,"bottom")&&(c=e.bottom-a.bottom+U(i,"bottom")),e.left<a.left+U(r,"left")?l=-(a.left-e.left+U(i,"left")):e.right>a.right-U(r,"right")&&(l=e.right-a.right+U(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=t.scrollLeft,r=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let i=t.scrollLeft-n,o=t.scrollTop-r;e={left:e.left-i,top:e.top-o,right:e.right-i,bottom:e.bottom-o}}if(n)break}}function V(t){let e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=t.root.elementFromPoint(o,s);if(!r||r==t.dom||!t.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){e=r,n=a.top;break}}return{refDOM:e,refTop:n,stack:H(t.dom)}}function H(t){let e=[],n=t.ownerDocument;for(let r=t;r;r=a(r))if(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t==n)break;return e}function j({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;W(n,0==r?0:r-e)}function W(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let G=null;function $(t){if(t.setActive)return t.setActive();if(G)return t.focus(G);let e=H(t);t.focus(null==G?{get preventScroll(){return G={preventScroll:!0},!0}}:void 0),G||(G=!1,W(e,0))}function q(t,e){let n,r,i=2e8,o=0,s=e.top,a=e.top;for(let l=t.firstChild,u=0;l;l=l.nextSibling,u++){let t;if(1==l.nodeType)t=l.getClientRects();else{if(3!=l.nodeType)continue;t=c(l).getClientRects()}for(let c=0;c<t.length;c++){let h=t[c];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);let t=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(t<i){n=l,i=t,r=t&&3==n.nodeType?{left:h.right<e.left?h.right:h.left,top:e.top}:e,1==l.nodeType&&t&&(o=u+(e.left>=(h.left+h.right)/2?1:0));continue}}!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=u+1)}}return n&&3==n.nodeType?Y(n,r):!n||i&&1==n.nodeType?{node:t,offset:o}:q(n,r)}function Y(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let n=et(r,1);if(n.top!=n.bottom&&X(e,n))return{node:t,offset:i+(e.left>=(n.left+n.right)/2?1:0)}}return{node:t,offset:0}}function X(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Z(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function K(t,e,n){let{node:r,offset:i}=q(e,n),o=-1;if(1==r.nodeType&&!r.firstChild){let t=r.getBoundingClientRect();o=t.left!=t.right&&n.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function J(t,e,n,r){let i=-1;for(let o=e,s=!1;;){if(o==t.dom)break;let e=t.docView.nearestDesc(o,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent&&!s||!e.contentDOM)){let t=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&!s&&(s=!0,t.left>r.left||t.top>r.top?i=e.posBefore:(t.right<r.left||t.bottom<r.top)&&(i=e.posAfter)),!e.contentDOM&&i<0){let n=e.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2;return n?e.posBefore:e.posAfter}}o=e.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Q(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=t.childNodes[o];if(1==n.nodeType){let t=n.getClientRects();for(let r=0;r<t.length;r++){let i=t[r];if(X(e,i))return Q(n,e,i)}}if((o=(o+1)%r)==i)break}return t}function tt(t,e){let n,r=t.dom.ownerDocument,i=0;if(r.caretPositionFromPoint)try{let t=r.caretPositionFromPoint(e.left,e.top);t&&({offsetNode:n,offset:i}=t)}catch(c){}if(!n&&r.caretRangeFromPoint){let t=r.caretRangeFromPoint(e.left,e.top);t&&({startContainer:n,startOffset:i}=t)}let o,s=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!s||!t.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=t.dom.getBoundingClientRect();if(!X(e,n))return null;if(s=Q(t.dom,e,n),!s)return null}if(O)for(let u=s;n&&u;u=a(u))u.draggable&&(n=void 0);if(s=Z(s,e),n){if(T&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let t,r=n.childNodes[i];"IMG"==r.nodeName&&(t=r.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&i++}n==t.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(o=J(t,n,i,e))}null==o&&(o=K(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:o,inside:l?l.posAtStart-l.border:-1}}function et(t,e){let n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}const nt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rt(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=P||T;if(3==r.nodeType){if(!s||!nt.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let t=i,e=i,o=n<0?1:-1;return n<0&&!i?(e++,o=-1):n>=0&&i==r.nodeValue.length?(t--,o=1):n<0?t--:e++,it(et(c(r,t,e),1),o<0)}{let t=et(c(r,i,i),n);if(T&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let e=et(c(r,i-1,i-1),-1);if(e.top==t.top){let n=et(c(r,i,i+1),-1);if(n.top!=t.top)return it(n,n.left<e.left)}}return t}}let a=t.state.doc.resolve(e-(o||0));if(!a.parent.inlineContent){if(null==o&&i&&(n<0||i==f(r))){let t=r.childNodes[i-1];if(1==t.nodeType)return ot(t.getBoundingClientRect(),!1)}if(null==o&&i<f(r)){let t=r.childNodes[i];if(1==t.nodeType)return ot(t.getBoundingClientRect(),!0)}return ot(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==f(r))){let t=r.childNodes[i-1],e=3==t.nodeType?c(t,f(t)-(s?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return it(et(e,1),!1)}if(null==o&&i<f(r)){let t=r.childNodes[i];while(t.pmViewDesc&&t.pmViewDesc.ignoreForCoords)t=t.nextSibling;let e=t?3==t.nodeType?c(t,0,s?0:1):1==t.nodeType?t:null:null;if(e)return it(et(e,-1),!0)}return it(et(3==r.nodeType?c(r):r,-n),n>=0)}function it(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ot(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function st(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function at(t,e,n){let r=e.selection,i="up"==n?r.$from:r.$to;return st(t,e,(()=>{let{node:e}=t.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.contentDOM||n.dom;break}e=n.dom.parentNode}let r=rt(t,i.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=c(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let i=e[t];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}const lt=/[\u0590-\u08ac]/;function ct(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return lt.test(r.parent.textContent)&&a.modify?st(t,e,(()=>{let{focusNode:e,focusOffset:i,anchorNode:o,anchorOffset:s}=t.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:u,focusOffset:h}=t.domSelectionRange(),d=u&&!c.contains(1==u.nodeType?u:u.parentNode)||e==u&&i==h;try{a.collapse(o,s),e&&(e!=o||i!=s)&&a.extend&&a.extend(e,i)}catch(f){}return null!=l&&(a.caretBidiLevel=l),d})):"left"==n||"backward"==n?o:s}let ut=null,ht=null,dt=!1;function ft(t,e,n){return ut==e&&ht==n?dt:(ut=e,ht=n,dt="up"==n||"down"==n?at(t,e,n):ct(t,e,n))}const pt=0,mt=1,gt=2,yt=3;class vt{constructor(t,e,n,r){this.parent=t,this.children=e,this.dom=n,this.contentDOM=r,this.dirty=pt,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let r=this.children[e];if(r==t)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let n,r;if(t==this.contentDOM)n=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.previousSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(t==this.contentDOM)n=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.nextSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(t==this.dom&&this.contentDOM)r=e>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!1;break}if(e.previousSibling)break}if(null==r&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!0;break}if(e.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,r=t;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==t.nodeType?t:t.parentNode):i==t))return o;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let n=e;n;n=n.parent)if(n==this)return e}posFromDOM(t,e,n){for(let r=t;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let r=this.children[e],i=n+r.size;if(n==t&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let e=this.children[n],o=i+e.size;if(o>t||e instanceof xt){r=t-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,e);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof wt&&i.side>=0;n--);if(e<=0){let t,r=!0;for(;;n--,r=!1)if(t=n?this.children[n-1]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&e&&r&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?s(t.dom)+1:0}}{let t,r=!0;for(;;n++,r=!1)if(t=n<this.children.length?this.children[n]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&r&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?s(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],l=o+n.size;if(-1==r&&t<=l){let i=o+n.border;if(t>=i&&e<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(t,e,i);t=o;for(let e=a;e>0;e--){let n=this.children[e-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=s(n.dom)+1;break}t-=n.size}-1==r&&(r=0)}if(r>-1&&(l>e||a==this.children.length-1)){e=l;for(let t=a+1;t<this.children.length;t++){let n=this.children[t];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=s(n.dom);break}e+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,r=!1){let i=Math.min(t,e),o=Math.max(t,e);for(let s=0,u=0;s<this.children.length;s++){let a=this.children[s],l=u+a.size;if(i>u&&o<l)return a.setSelection(t-u-a.border,e-u-a.border,n,r);u=l}let a=this.domFromPos(t,t?-1:1),l=e==t?a:this.domFromPos(e,e?-1:1),c=n.getSelection(),h=!1;if((T||O)&&t==e){let{node:t,offset:e}=a;if(3==t.nodeType){if(h=!(!e||"\n"!=t.nodeValue[e-1]),h&&e==t.nodeValue.length)for(let n,r=t;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=l={node:n.parentNode,offset:s(n)+1});break}let t=r.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let n=t.childNodes[e-1];h=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(T&&c.focusNode&&c.focusNode!=l.node&&1==c.focusNode.nodeType){let t=c.focusNode.childNodes[c.focusOffset];t&&"false"==t.contentEditable&&(r=!0)}if(!(r||h&&O)&&u(a.node,a.offset,c.anchorNode,c.anchorOffset)&&u(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||t==e)&&!h){c.collapse(a.node,a.offset);try{t!=e&&c.extend(l.node,l.offset),d=!0}catch(f){}}if(!d){if(t>e){let t=a;a=l,l=t}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){let r=n+i.border,s=o-i.border;if(t>=r&&e<=s)return this.dirty=t==n||e==o?gt:mt,void(t!=r||e!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-r,e-r):i.dirty=yt);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?yt:gt}n=o}this.dirty=gt}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?gt:mt;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class wt extends vt{constructor(t,e,n,r){let i,o=e.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!e.type.spec.raw){if(1!=o.nodeType){let t=document.createElement("span");t.appendChild(o),o=t}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,i=this}matchesWidget(t){return this.dirty==pt&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class bt extends vt{constructor(t,e,n,r){super(t,[],e,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class _t extends vt{constructor(t,e,n,r){super(t,[],n,r),this.mark=e}static create(t,e,n,r){let o=r.nodeViews[e.type.name],s=o&&o(e,r,n);return s&&s.dom||(s=i.PW.renderSpec(document,e.type.spec.toDOM(e,n))),new _t(t,e,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&yt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return this.dirty!=yt&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=pt){let t=this.parent;while(!t.node)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=pt}}slice(t,e,n){let r=_t.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;e<o&&(i=jt(i,e,o,n)),t>0&&(i=jt(i,0,t,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}}class St extends vt{constructor(t,e,n,r,i,o,s,a,l){super(t,[],i,o),this.node=e,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s,o&&this.updateChildren(a,l)}static create(t,e,n,r,o,s){let a,l=o.nodeViews[e.type.name],c=l&&l(e,o,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s),n,r),u=c&&c.dom,h=c&&c.contentDOM;if(e.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(e.text);else u||({dom:u,contentDOM:h}=i.PW.renderSpec(document,e.type.spec.toDOM(e)));h||e.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let d=u;return u=Dt(u,n,e),c?a=new Ct(t,e,n,r,u,h||null,d,c,o,s+1):e.isText?new At(t,e,n,r,u,d,o):new St(t,e,n,r,u,h||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>i.HY.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return this.dirty==pt&&t.eq(this.node)&&Nt(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,r=e,o=t.composing?this.localCompositionInfo(t,e):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new Lt(this,s&&s.node,t);Ft(this.node,this.innerDeco,((e,o,s)=>{e.spec.marks?l.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!s&&l.syncToMarks(o==this.node.childCount?i.vc.none:this.node.child(o).marks,n,t),l.placeWidget(e,t,r)}),((e,i,s,c)=>{let u;l.syncToMarks(e.marks,n,t),l.findNodeMatch(e,i,s,c)||a&&t.state.selection.from>r&&t.state.selection.to<r+e.nodeSize&&(u=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(e,i,s,u,t)||l.updateNextNode(e,i,s,t,c)||l.addNode(e,i,s,t,r),r+=e.nodeSize})),l.syncToMarks([],n,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==gt)&&(s&&this.protectLocalComposition(t,s),Tt(this.contentDOM,this.children,t),R&&zt(this.dom))}localCompositionInfo(t,e){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof r.Bs)||n<e||i>e+this.node.content.size)return null;let o=t.domSelectionRange(),s=Vt(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let t=s.nodeValue,r=Ht(this.node.content,t,n-e,i-e);return r<0?null:{node:s,pos:r,text:t}}return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:r}){if(this.getDesc(e))return;let i=e;for(;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new bt(this,i,e,r);t.input.compositionNodes.push(o),this.children=jt(this.children,n,n+r.length,t,o)}update(t,e,n,r){return!(this.dirty==yt||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)}updateInner(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=pt}updateOuterDeco(t){if(Nt(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Ot(this.dom,this.nodeDOM,kt(this.outerDeco,this.node,e),kt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Et(t,e,n,r,i){return Dt(r,e,t),new St(void 0,t,e,n,r,r,r,i,0)}class At extends St{constructor(t,e,n,r,i,o,s){super(t,e,n,r,i,null,o,s,0)}parseRule(){let t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}}update(t,e,n,r){return!(this.dirty==yt||this.dirty!=pt&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==pt&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=pt,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let r=this.node.cut(t,e),i=document.createTextNode(r.text);return new At(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=yt)}get domAtom(){return!1}}class xt extends vt{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==pt&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Ct extends St{constructor(t,e,n,r,i,o,s,a,l,c){super(t,e,n,r,i,o,s,l,c),this.spec=a}update(t,e,n,r){if(this.dirty==yt)return!1;if(this.spec.update){let i=this.spec.update(t,e,n);return i&&this.updateInner(t,e,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,r){this.spec.setSelection?this.spec.setSelection(t,e,n):super.setSelection(t,e,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Tt(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){while(a!=r)r=Pt(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof _t){let e=r?r.previousSibling:t.lastChild;Tt(s.contentDOM,s.children,n),r=e?e.nextSibling:t.firstChild}}while(r)r=Pt(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Mt=function(t){t&&(this.nodeName=t)};Mt.prototype=Object.create(null);const It=[new Mt];function kt(t,e,n){if(0==t.length)return It;let r=n?It[0]:new Mt,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Mt(s.nodeName));for(let t in s){let o=s[t];null!=o&&(n&&1==i.length&&i.push(r=new Mt(e.isInline?"span":"div")),"class"==t?r.class=(r.class?r.class+" ":"")+o:"style"==t?r.style=(r.style?r.style+";":"")+o:"nodeName"!=t&&(r[t]=o))}}}return i}function Ot(t,e,n,r){if(n==It&&r==It)return e;let i=e;for(let o=0;o<r.length;o++){let e=r[o],s=n[o];if(o){let n;s&&s.nodeName==e.nodeName&&i!=t&&(n=i.parentNode)&&n.nodeName.toLowerCase()==e.nodeName||(n=document.createElement(e.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=It[0]),i=n}Rt(i,s||It[0],e)}return i}function Rt(t,e,n){for(let r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let e=0;e<r.length;e++)-1==i.indexOf(r[e])&&t.classList.remove(r[e]);for(let e=0;e<i.length;e++)-1==r.indexOf(i[e])&&t.classList.add(i[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(n=r.exec(e.style))t.style.removeProperty(n[1])}n.style&&(t.style.cssText+=n.style)}}function Dt(t,e,n){return Ot(t,t,It,kt(e,n,1!=t.nodeType))}function Nt(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Pt(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Lt{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Bt(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let r=0,i=this.stack.length>>1,o=Math.min(i,t.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=pt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<t.length){this.stack.push(this.top,this.index+1);let r=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let n=this.top.children[e];if(n.matchesMark(t[i])&&!this.isLocked(n.dom)){r=e;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=_t.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(t,e,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(t,e,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,n,r,i){let o=this.top.children[r];return o.dirty==yt&&o.dom==o.contentDOM&&(o.dirty=gt),!!o.update(t,e,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,n,r,i){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof St){let a=this.preMatch.matched.get(s);if(null!=a&&a!=i)return!1;let l=s.dom,c=this.isLocked(l)&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=yt&&Nt(e,s.outerDeco));if(!c&&s.update(t,e,n,r))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,n,r,i){this.top.children.splice(this.index++,0,St.create(this.top,t,e,n,r,i)),this.changed=!0}placeWidget(t,e,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){let r=new wt(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;while(t instanceof _t)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof At)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((O||I)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let r=new xt(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function Bt(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];t:while(i>0){let a;for(;;)if(r){let t=n.children[r-1];if(!(t instanceof _t)){a=t,r--;break}n=t,r=t.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function Ut(t,e){return t.type.side-e.type.side}function Ft(t,e,n,r){let i=e.locals(t),o=0;if(0==i.length){for(let n=0;n<t.childCount;n++){let s=t.child(n);r(s,i,e.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){if(s<i.length&&i[s].to==o){let t,e=i[s++];while(s<i.length&&i[s].to==o)(t||(t=[e])).push(i[s++]);if(t){t.sort(Ut);for(let e=0;e<t.length;e++)n(t[e],c,!!l)}else n(e,c,!!l)}let u,h;if(l)h=-1,u=l,l=null;else{if(!(c<t.childCount))break;h=c,u=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=o&&a.splice(t--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);let d=o+u.nodeSize;if(u.isText){let t=d;s<i.length&&i[s].from<t&&(t=i[s].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<d&&(l=u.cut(t-o),u=u.cut(0,t-o),d=t,h=-1)}let f=u.isInline&&!u.isLeaf?a.filter((t=>!t.inline)):a.slice();r(u,f,e.forChild(o,u),h),o=d}}function zt(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Vt(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=f(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function Ht(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;while(i<t.childCount){let e=t.child(i++);if(o+=e.nodeSize,!e.isText)break;l+=e.text}if(o>=n){let t=a<r?l.lastIndexOf(e,r-a-1):-1;if(t>=0&&t+e.length+a>=n)return a+t;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function jt(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Wt(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let l,c,u=i.resolve(a);if(g(n)){l=u;while(o&&!o.node)o=o.parent;let t=o.node;if(o&&t.isAtom&&r.qv.isSelectable(t)&&o.parent&&(!t.isInline||!p(n.focusNode,n.focusOffset,o.dom))){let t=o.posBefore;c=new r.qv(a==t?u:i.resolve(t))}}else{let e=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(e<0)return null;l=i.resolve(e)}if(!c){let n="pointer"==e||t.state.selection.head<u.pos&&!s?1:-1;c=ee(t,l,u,n)}return c}function Gt(t){return t.editable?t.hasFocus():re(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function $t(t,e=!1){let n=t.state.selection;if(Qt(t,n),Gt(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&I){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&u(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Jt(t);else{let i,o,{anchor:s,head:a}=n;!qt||n instanceof r.Bs||(n.$from.parent.inlineContent||(i=Yt(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=Yt(t,n.to))),t.docView.setSelection(s,a,t.root,e),qt&&(i&&Zt(i),o&&Zt(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Kt(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const qt=O||I&&k<63;function Yt(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(O&&i&&"false"==i.contentEditable)return Xt(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return Xt(i);if(o)return Xt(o)}}function Xt(t){return t.contentEditable="true",O&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Zt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Kt(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{Gt(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Jt(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,s(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&x&&C<=11&&(r.disabled=!0,r.disabled=!1)}function Qt(t,e){if(e instanceof r.qv){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(te(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else te(t)}function te(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function ee(t,e,n,i){return t.someProp("createSelectionBetween",(r=>r(t,e,n)))||r.Bs.between(e,n,i)}function ne(t){return!(t.editable&&!t.hasFocus())&&re(t)}function re(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function ie(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return u(e.node,e.offset,n.anchorNode,n.anchorOffset)}function oe(t,e){let{$anchor:n,$head:i}=t.selection,o=e>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&r.Y1.findFrom(s,e)}function se(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ae(t,e,n){let i=t.state.selection;if(!(i instanceof r.Bs)){if(i instanceof r.qv&&i.node.isInline)return se(t,new r.Bs(e>0?i.$to:i.$from));{let n=oe(t.state,e);return!!n&&se(t,n)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let n=oe(t.state,e);return!!(n&&n instanceof r.qv)&&se(t,n)}if(!(D&&n.indexOf("m")>-1)){let n,o=i.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(n=t.docView.descAt(a))&&!n.contentDOM)&&(r.qv.isSelectable(s)?se(t,new r.qv(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):!!P&&se(t,new r.Bs(t.state.doc.resolve(e<0?a:a+s.nodeSize))))}}function le(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function ce(t){let e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function ue(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=!1;for(T&&1==n.nodeType&&r<le(n)&&ce(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;{let t=n.childNodes[r-1];if(ce(t))i=n,o=--r;else{if(3!=t.nodeType)break;n=t,r=n.nodeValue.length}}}else{if(de(n))break;{let e=n.previousSibling;while(e&&ce(e))i=n.parentNode,o=s(e),e=e.previousSibling;if(e)n=e,r=le(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?fe(t,n,r):i&&fe(t,i,o)}function he(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=le(n);for(;;)if(r<a){if(1!=n.nodeType)break;let t=n.childNodes[r];if(!ce(t))break;i=n,o=++r}else{if(de(n))break;{let e=n.nextSibling;while(e&&ce(e))i=e.parentNode,o=s(e)+1,e=e.nextSibling;if(e)n=e,r=0,a=le(n);else{if(n=n.parentNode,n==t.dom)break;r=a=0}}}i&&fe(t,i,o)}function de(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function fe(t,e,n){let r=t.domSelection();if(g(r)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),r.removeAllRanges(),r.addRange(t)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout((()=>{t.state==i&&$t(t)}),50)}function pe(t,e,n){let i=t.state.selection;if(i instanceof r.Bs&&!i.empty||n.indexOf("s")>-1)return!1;if(D&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=oe(t.state,e);if(n&&n instanceof r.qv)return se(t,n)}if(!o.parent.inlineContent){let n=e<0?o:s,a=i instanceof r.C1?r.Y1.near(n,e):r.Y1.findFrom(n,e);return!!a&&se(t,a)}return!1}function me(t,e){if(!(t.state.selection instanceof r.Bs))return!0;let{$head:n,$anchor:i,empty:o}=t.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=t.state.tr;return e<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),t.dispatch(r),!0}return!1}function ge(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ye(t){if(!O||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;ge(t,n,"true"),setTimeout((()=>ge(t,n,"false")),20)}return!1}function ve(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function we(t,e){let n=e.keyCode,r=ve(e);return 8==n||D&&72==n&&"c"==r?me(t,-1)||ue(t):46==n||D&&68==n&&"c"==r?me(t,1)||he(t):13==n||27==n||(37==n||D&&66==n&&"c"==r?ae(t,-1,r)||ue(t):39==n||D&&70==n&&"c"==r?ae(t,1,r)||he(t):38==n||D&&80==n&&"c"==r?pe(t,-1,r)||ue(t):40==n||D&&78==n&&"c"==r?ye(t)||pe(t,1,r)||he(t):r==(D?"m":"c")&&(66==n||73==n||89==n||90==n))}function be(t,e){t.someProp("transformCopied",(n=>{e=n(e,t)}));let n=[],{content:r,openStart:o,openEnd:s}=e;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;let t=r.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),r=t.content}let a=t.someProp("clipboardSerializer")||i.PW.fromSchema(t.state.schema),l=Oe(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));let u,h=c.firstChild,d=0;while(h&&1==h.nodeType&&(u=Ie[h.nodeName.toLowerCase()])){for(let t=u.length-1;t>=0;t--){let e=l.createElement(u[t]);while(c.firstChild)e.appendChild(c.firstChild);c.appendChild(e),d++}h=c.firstChild}h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",(n=>n(e,t)))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:c,text:f}}function _e(t,e,n,r,o){let s,a,l=o.parent.type.spec.code;if(!n&&!e)return null;let c=e&&(r||l||!n);if(c){if(t.someProp("transformPastedText",(n=>{e=n(e,l||r,t)})),l)return e?new i.p2(i.HY.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):i.p2.empty;let n=t.someProp("clipboardTextParser",(n=>n(e,o,r,t)));if(n)a=n;else{let n=o.marks(),{schema:r}=t.state,a=i.PW.fromSchema(r);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=s.appendChild(document.createElement("p"));t&&e.appendChild(a.serializeNode(r.text(t,n)))}))}}else t.someProp("transformPastedHTML",(e=>{n=e(n,t)})),s=Re(n),P&&De(s);let u=s&&s.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let i=+h[3];i>0;i--){let t=s.firstChild;while(t&&1!=t.nodeType)t=t.nextSibling;if(!t)break;s=t}if(!a){let e=t.someProp("clipboardParser")||t.someProp("domParser")||i.aw.fromSchema(t.state.schema);a=e.parseSlice(s,{preserveWhitespace:!(!c&&!h),context:o,ruleFromNode(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Se.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(h)a=Ne(Me(a,+h[1],+h[2]),h[4]);else if(a=i.p2.maxOpen(Ee(a.content,o),!0),a.openStart||a.openEnd){let t=0,e=0;for(let n=a.content.firstChild;t<a.openStart&&!n.type.spec.isolating;t++,n=n.firstChild);for(let n=a.content.lastChild;e<a.openEnd&&!n.type.spec.isolating;e++,n=n.lastChild);a=Me(a,t,e)}return t.someProp("transformPasted",(e=>{a=e(a,t)})),a}const Se=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ee(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r,o=e.node(n),s=o.contentMatchAt(e.index(n)),a=[];if(t.forEach((t=>{if(!a)return;let e,n=s.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&r.length&&xe(n,r,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=Ce(a[a.length-1],r.length));let e=Ae(t,n);a.push(e),s=s.matchType(e.type),r=n}})),a)return i.HY.from(a)}return t}function Ae(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,i.HY.from(t));return t}function xe(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=xe(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));let a=r.contentMatchAt(r.childCount);if(a.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(i.HY.from(Ae(n,t,o+1))))}}function Ce(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Ce(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(i.HY.empty,!0);return t.copy(n.append(r))}function Te(t,e,n,r,o,s){let a=e<0?t.firstChild:t.lastChild,l=a.content;return o<r-1&&(l=Te(l,e,n,r,o+1,s)),o>=n&&(l=e<0?a.contentMatchAt(0).fillBefore(l,t.childCount>1||s<=o).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(i.HY.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(l))}function Me(t,e,n){return e<t.openStart&&(t=new i.p2(Te(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new i.p2(Te(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Ie={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ke=null;function Oe(){return ke||(ke=document.implementation.createHTMLDocument("title"))}function Re(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,r=Oe().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((n=i&&Ie[i[1].toLowerCase()])&&(t=n.map((t=>"<"+t+">")).join("")+t+n.map((t=>"</"+t+">")).reverse().join("")),r.innerHTML=t,n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function De(t){let e=t.querySelectorAll(I?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Ne(t,e){if(!t.size)return t;let n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(l){return t}let{content:o,openStart:s,openEnd:a}=t;for(let c=n.length-2;c>=0;c-=2){let t=r.nodes[n[c]];if(!t||t.hasRequiredAttrs())break;o=i.HY.from(t.create(n[c+1],o)),s++,a++}return new i.p2(o,s,a)}const Pe={},Le={},Be={touchstart:!0,touchmove:!0};class Ue{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Fe(t){for(let e in Pe){let n=Pe[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!We(t,e)||je(t,e)||!t.editable&&e.type in Le||n(t,e)},Be[e]?{passive:!0}:void 0)}O&&t.dom.addEventListener("input",(()=>null)),He(t)}function ze(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ve(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function He(t){t.someProp("handleDOMEvents",(e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=e=>je(t,e))}))}function je(t,e){return t.someProp("handleDOMEvents",(n=>{let r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function We(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Ge(t,e){je(t,e)||!Pe[e.type]||!t.editable&&e.type in Le||Pe[e.type](t,e)}function $e(t){return{left:t.clientX,top:t.clientY}}function qe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ye(t,e,n,r,i){if(-1==r)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,(e=>s>o.depth?e(t,n,o.nodeAfter,o.before(s),i,!0):e(t,n,o.node(s),o.before(s),i,!1))))return!0;return!1}function Xe(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Ze(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&r.qv.isSelectable(i))&&(Xe(t,new r.qv(n),"pointer"),!0)}function Ke(t,e){if(-1==e)return!1;let n,i,o=t.state.selection;o instanceof r.qv&&(n=o.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let t=a>s.depth?s.nodeAfter:s.node(a);if(r.qv.isSelectable(t)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(Xe(t,r.qv.create(t.state.doc,i),"pointer"),!0)}function Je(t,e,n,r,i){return Ye(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(n=>n(t,e,r)))||(i?Ke(t,n):Ze(t,n))}function Qe(t,e,n,r){return Ye(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(n=>n(t,e,r)))}function tn(t,e,n,r){return Ye(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(n=>n(t,e,r)))||en(t,n,r)}function en(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(Xe(t,r.Bs.create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(e);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s),n=o.before(s);if(e.inlineContent)Xe(t,r.Bs.create(i,n+1,n+1+e.content.size),"pointer");else{if(!r.qv.isSelectable(e))continue;Xe(t,r.qv.create(i,n),"pointer")}return!0}}function nn(t){return hn(t)}Le.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!sn(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!N||!I||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!R||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(e=>e(t,n)))||we(t,n)?n.preventDefault():ze(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},Le.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Le.keypress=(t,e)=>{let n=e;if(sn(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||D&&n.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,n))))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof r.Bs)||!i.$from.sameParent(i.$to)){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",(n=>n(t,i.$from.pos,i.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const rn=D?"metaKey":"ctrlKey";Pe.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=nn(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&qe(n,t.input.lastClick)&&!n[rn]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords($e(n));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new on(t,s,n,!!r)):("doubleClick"==o?Qe:tn)(t,s.pos,s.inside,n)?n.preventDefault():ze(t,"pointer"))};class on{constructor(t,e,n,i){let o,s;if(this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[rn],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),s=e.inside;else{let n=t.state.doc.resolve(e.pos);o=n.parent,s=n.depth?n.before():0}const a=i?null:n.target,l=a?t.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=t.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||c instanceof r.qv&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!T||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ze(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>$t(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords($e(t))),this.updateAllowDefault(t),this.allowDefault||!e?ze(this.view,"pointer"):Je(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||O&&this.mightDrag&&!this.mightDrag.node.isAtom||I&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(Xe(this.view,r.Y1.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ze(this.view,"pointer")}move(t){this.updateAllowDefault(t),ze(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function sn(t,e){return!!t.composing||!!(O&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Pe.touchstart=t=>{t.input.lastTouch=Date.now(),nn(t),ze(t,"pointer")},Pe.touchmove=t=>{t.input.lastTouch=Date.now(),ze(t,"pointer")},Pe.contextmenu=t=>nn(t);const an=N?5e3:-1;function ln(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>hn(t)),e))}function cn(t){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=un());while(t.input.compositionNodes.length>0)t.input.compositionNodes.pop().markParentsDirty()}function un(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hn(t,e=!1){if(!(N&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),cn(t),e||t.docView&&t.docView.dirty){let e=Wt(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}function dn(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}Le.compositionstart=Le.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||n.marks(),hn(t,!0),t.markCursor=null;else if(hn(t),T&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,r=e.focusOffset;n&&1==n.nodeType&&0!=r;){let e=r<0?n.lastChild:n.childNodes[r-1];if(!e)break;if(3==e.nodeType){t.domSelection().collapse(e,e.nodeValue.length);break}n=e,r=-1}}t.input.composing=!0}ln(t,an)},Le.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,ln(t,20))};const fn=x&&C<15||R&&L<604;function pn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function mn(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gn(t,r.value,null,t.input.shiftKey,e):gn(t,r.textContent,r.innerHTML,t.input.shiftKey,e)}),50)}function gn(t,e,n,r,o){let s=_e(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,o,s||i.p2.empty))))return!0;if(!s)return!1;let a=pn(s),l=a?t.state.tr.replaceSelectionWith(a,t.input.shiftKey):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Pe.copy=Le.cut=(t,e)=>{let n=e,r=t.state.selection,i="cut"==n.type;if(r.empty)return;let o=fn?null:n.clipboardData,s=r.content(),{dom:a,text:l}=be(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):dn(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Le.paste=(t,e)=>{let n=e;if(t.composing&&!N)return;let r=fn?null:n.clipboardData;r&&gn(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():mn(t,n)};class yn{constructor(t,e){this.slice=t,this.move=e}}const vn=D?"altKey":"ctrlKey";Pe.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords($e(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof r.qv?o.to-1:o.to));else if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(r.qv.create(t.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&t.dispatch(t.state.tr.setSelection(r.qv.create(t.state.doc,e.posBefore)))}let a=t.state.selection.content(),{dom:l,text:c}=be(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(fn?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",fn||n.dataTransfer.setData("text/plain",c),t.dragging=new yn(a,!n[vn])},Pe.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},Le.dragover=Le.dragenter=(t,e)=>e.preventDefault(),Le.drop=(t,e)=>{let n=e,s=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let a=t.posAtCoords($e(n));if(!a)return;let l=t.state.doc.resolve(a.pos),c=s&&s.slice;c?t.someProp("transformPasted",(e=>{c=e(c,t)})):c=_e(t,n.dataTransfer.getData(fn?"Text":"text/plain"),fn?null:n.dataTransfer.getData("text/html"),!1,l);let u=!(!s||n[vn]);if(t.someProp("handleDrop",(e=>e(t,n,c||i.p2.empty,u))))return void n.preventDefault();if(!c)return;n.preventDefault();let h=c?(0,o.nj)(t.state.doc,l.pos,c):l.pos;null==h&&(h=l.pos);let d=t.state.tr;u&&d.deleteSelection();let f=d.mapping.map(h),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=d.doc;if(p?d.replaceRangeWith(f,f,c.content.firstChild):d.replaceRange(f,f,c),d.doc.eq(m))return;let g=d.doc.resolve(f);if(p&&r.qv.isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r.qv(g));else{let e=d.mapping.map(h);d.mapping.maps[d.mapping.maps.length-1].forEach(((t,n,r,i)=>e=i)),d.setSelection(ee(t,g,d.doc.resolve(e)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))},Pe.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&$t(t)}),20))},Pe.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Pe.beforeinput=(t,e)=>{let n=e;if(I&&N&&"deleteContentBackward"==n.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,y(8,"Backspace")))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let ur in Le)Pe[ur]=Le[ur];function wn(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class bn{constructor(t,e){this.toDOM=t,this.spec=e||xn,this.side=this.spec.side||0}map(t,e,n,r){let{pos:i,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new En(i-n,i-n,this)}valid(){return!0}eq(t){return this==t||t instanceof bn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&wn(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class _n{constructor(t,e){this.attrs=t,this.spec=e||xn}map(t,e,n,r){let i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new En(i,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof _n&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)}static is(t){return t.type instanceof _n}destroy(){}}class Sn{constructor(t,e){this.attrs=t,this.spec=e||xn}map(t,e,n,r){let i=t.mapResult(e.from+r,1);if(i.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new En(i.pos-n,o.pos-n,this)}valid(t,e){let n,{index:r,offset:i}=t.content.findIndex(e.from);return i==e.from&&!(n=t.child(r)).isText&&i+n.nodeSize==e.to}eq(t){return this==t||t instanceof Sn&&wn(this.attrs,t.attrs)&&wn(this.spec,t.spec)}destroy(){}}class En{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new En(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new En(t,t,new bn(e,n))}static inline(t,e,n,r){return new En(t,e,new _n(n,r))}static node(t,e,n,r){return new En(t,e,new Sn(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof _n}}const An=[],xn={};class Cn{constructor(t,e){this.local=t.length?t:An,this.children=e.length?e:An}static create(t,e){return e.length?Nn(e,t,0,xn):Tn}find(t,e,n){let r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}findInner(t,e,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let s=this.children[o]+1;this.children[o+2].findInner(t-s,e-s,n,r+s,i)}}map(t,e,n){return this==Tn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||xn)}mapInner(t,e,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?In(this.children,o||[],t,e,n,r,i):o?new Cn(o.sort(Pn),An):Tn}add(t,e){return e.length?this==Tn?Cn.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let r,i=0;t.forEach(((t,o)=>{let s,a=o+n;if(s=Rn(e,t,a)){r||(r=this.children.slice());while(i<r.length&&r[i]<o)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(t,s,a+1):r.splice(i,0,o,o+t.nodeSize,Nn(s,t,a+1,xn)),i+=3}}));let o=kn(i?Dn(e):e,-n);for(let s=0;s<o.length;s++)o[s].type.valid(t,o[s])||o.splice(s--,1);return new Cn(o.length?this.local.concat(o).sort(Pn):this.local,r||this.children)}remove(t){return 0==t.length||this==Tn?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+e,s=n[i+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>o&&e.to<s&&(t[n]=null,(r||(r=[])).push(e));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=Tn?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<t.length;o++)if(i=t[o])for(let t=0;t<r.length;t++)r[t].eq(i,e)&&(r==this.local&&(r=this.local.slice()),r.splice(t--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Cn(r,n):Tn}forChild(t,e){if(this==Tn)return this;if(e.isLeaf)return Cn.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(n=this.children[s+2]);break}let i=t+1,o=i+e.content.size;for(let s=0;s<this.local.length;s++){let t=this.local[s];if(t.from<o&&t.to>i&&t.type instanceof _n){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let t=new Cn(r.sort(Pn),An);return n?new Mn([t,n]):t}return n||Tn}eq(t){if(this==t)return!0;if(!(t instanceof Cn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Ln(this.localsInner(t))}localsInner(t){if(this==Tn)return An;if(t.inlineContent||!this.local.some(_n.is))return this.local;let e=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof _n||e.push(this.local[n]);return e}}Cn.empty=new Cn([],[]),Cn.removeOverlap=Ln;const Tn=Cn.empty;class Mn{constructor(t){this.members=t}map(t,e){const n=this.members.map((n=>n.map(t,e,xn)));return Mn.from(n)}forChild(t,e){if(e.isLeaf)return Cn.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(t,e);i!=Tn&&(i instanceof Mn?n=n.concat(i.members):n.push(i))}return Mn.from(n)}eq(t){if(!(t instanceof Mn)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<i.length;t++)e.push(i[t])}else e=i}return e?Ln(n?e:e.sort(Pn)):An}static from(t){switch(t.length){case 0:return Tn;case 1:return t[0];default:return new Mn(t.every((t=>t instanceof Cn))?t:t.reduce(((t,e)=>t.concat(e instanceof Cn?e:e.members)),[]))}}}function In(t,e,n,r,i,o,s){let a=t.slice();for(let c=0,u=o;c<n.maps.length;c++){let t=0;n.maps[c].forEach(((e,n,r,o)=>{let s=o-r-(n-e);for(let l=0;l<a.length;l+=3){let o=a[l+1];if(o<0||e>o+u-t)continue;let c=a[l]+u-t;n>=c?a[l+1]=e<=c?-2:-1:r>=i&&s&&(a[l]+=s,a[l+1]+=s)}t+=s})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let e=n.map(t[c]+o),u=e-i;if(u<0||u>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+o,-1),d=h-i,{index:f,offset:p}=r.content.findIndex(u),m=r.maybeChild(f);if(m&&p==u&&p+m.nodeSize==d){let r=a[c+2].mapInner(n,m,e+1,t[c]+o+1,s);r!=Tn?(a[c]=u,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=On(a,t,e,n,i,o,s),c=Nn(l,r,0,s);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let n=c.children[t];while(e<a.length&&a[e]<n)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new Cn(e.sort(Pn),a)}function kn(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new En(i.from+e,i.to+e,i.type))}return n}function On(t,e,n,r,i,o,s){function a(t,e){for(let o=0;o<t.local.length;o++){let a=t.local[o].map(r,i,e);a?n.push(a):s.onRemove&&s.onRemove(t.local[o].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+o+1);return n}function Rn(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o,s=0;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Dn(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Nn(t,e,n,r){let i=[],o=!1;e.forEach(((e,s)=>{let a=Rn(t,e,s+n);if(a){o=!0;let t=Nn(a,e,n+s+1,r);t!=Tn&&i.push(s,s+e.nodeSize,t)}}));let s=kn(o?Dn(t):t,-n).sort(Pn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Cn(s,i):Tn}function Pn(t,e){return t.from-e.from||t.to-e.to}function Ln(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Bn(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Bn(e,i+1,o.copy(r.to,o.to)))}}return e}function Bn(t,e,n){while(e<t.length&&Pn(n,t[e])>0)e++;t.splice(e,0,n)}function Un(t){let e=[];return t.someProp("decorations",(n=>{let r=n(t.state);r&&r!=Tn&&e.push(r)})),t.cursorWrapper&&e.push(Cn.create(t.state.doc,[t.cursorWrapper.deco])),Mn.from(e)}const Fn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},zn=x&&C<=11;class Vn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Hn{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Vn,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);x&&C<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),zn&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Fn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(ne(this.view)){if(this.suppressingSelectionUpdates)return $t(this.view);if(x&&C<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,n=new Set;for(let i=t.focusNode;i;i=a(i))n.add(i);for(let i=t.anchorNode;i;i=a(i))if(n.has(i)){e=i;break}let r=e&&this.view.docView.nearestDesc(e);return r&&r.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ne(t)&&!this.ignoreSelectionChange(n),o=-1,s=-1,a=!1,l=[];if(t.editable)for(let r=0;r<e.length;r++){let t=this.registerMutation(e[r],l);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(T&&l.length>1){let t=l.filter((t=>"BR"==t.nodeName));if(2==t.length){let e=t[0],n=t[1];e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}}let c=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&g(n)&&(c=Wt(t))&&c.eq(r.Y1.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,$t(t),this.currentSelection.set(n),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),Gn(t)),this.handleDOMChange(o,s,a,l),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||$t(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let n=0;n<t.addedNodes.length;n++)e.push(t.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let r=t.previousSibling,i=t.nextSibling;if(x&&C<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:n,nextSibling:o}=t.addedNodes[e];(!n||Array.prototype.indexOf.call(t.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(t.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==t.target?s(r)+1:0,a=n.localPosFromDOM(t.target,o,-1),l=i&&i.parentNode==t.target?s(i):t.target.childNodes.length,c=n.localPosFromDOM(t.target,l,1);return{from:a,to:c}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let jn=new WeakMap,Wn=!1;function Gn(t){if(!jn.has(t)&&(jn.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=T,Wn)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Wn=!0}}function $n(t){let e;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return u(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function qn(t,e,n){let r,{node:o,fromOffset:s,toOffset:a,from:l,to:c}=t.docView.parseRange(e,n),u=t.domSelectionRange(),h=u.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:u.anchorOffset}],g(u)||r.push({node:u.focusNode,offset:u.focusOffset})),I&&8===t.input.lastKeyCode)for(let i=a;i>s;i--){let t=o.childNodes[i-1],e=t.pmViewDesc;if("BR"==t.nodeName&&!e){a=i;break}if(!e||e.size)break}let d=t.state.doc,f=t.someProp("domParser")||i.aw.fromSchema(t.state.schema),p=d.resolve(l),m=null,y=f.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Yn,context:p});if(r&&null!=r[0].pos){let t=r[0].pos,e=r[1]&&r[1].pos;null==e&&(e=t),m={anchor:t+l,head:e+l}}return{doc:y,sel:m,from:l,to:c}}function Yn(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(O&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||O&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Xn=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Zn(t,e,n,i,o){if(e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,n=Wt(t,e);if(n&&!t.state.selection.eq(n)){if(I&&N&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))))return;let r=t.state.tr.setSelection(n);"pointer"==e?r.setMeta("pointer",!0):"key"==e&&r.scrollIntoView(),t.dispatch(r)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l,c,u=t.state.selection,h=qn(t,e,n),d=t.state.doc,f=d.slice(h.from,h.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(l=t.state.selection.to,c="end"):(l=t.state.selection.from,c="start"),t.input.lastKeyCode=null;let p=er(f.content,h.doc.content,h.from,l,c);if((R&&t.input.lastIOSEnter>Date.now()-225||N)&&o.some((t=>1==t.nodeType&&!Xn.test(t.nodeName)))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!p){if(!(i&&u instanceof r.Bs&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){let e=Kn(t,t.state.doc,h.sel);e&&!e.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(e))}return}p={start:u.from,endA:u.to,endB:u.to}}if(I&&t.cursorWrapper&&h.sel&&h.sel.anchor==t.cursorWrapper.deco.from&&h.sel.head==h.sel.anchor){let t=p.endB-p.start;h.sel={anchor:h.sel.anchor+t,head:h.sel.anchor+t}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof r.Bs&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),x&&C<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>h.from&&"  "==h.doc.textBetween(p.start-h.from-1,p.start-h.from+1)&&(p.start--,p.endA--,p.endB--);let m,g=h.doc.resolveNoCache(p.start-h.from),v=h.doc.resolveNoCache(p.endB-h.from),w=d.resolve(p.start),b=g.sameParent(v)&&g.parent.inlineContent&&w.end()>=p.endA;if((R&&t.input.lastIOSEnter>Date.now()-225&&(!b||o.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!b&&g.pos<h.doc.content.size&&(m=r.Y1.findFrom(h.doc.resolve(g.pos+1),1,!0))&&m.head==v.pos)&&t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>p.start&&Qn(d,p.start,p.endA,g,v)&&t.someProp("handleKeyDown",(e=>e(t,y(8,"Backspace")))))return void(N&&I&&t.domObserver.suppressSelectionUpdates());I&&N&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),N&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==p.endA&&(p.endB-=2,v=h.doc.resolveNoCache(p.endB-h.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,y(13,"Enter"))}))}),20));let _,S,E,A=p.start,T=p.endA;if(b)if(g.pos==v.pos)x&&C<=11&&0==g.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>$t(t)),20)),_=t.state.tr.delete(A,T),S=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(E=Jn(g.parent.content.cut(g.parentOffset,v.parentOffset),w.parent.content.cut(w.parentOffset,p.endA-w.start()))))_=t.state.tr,"add"==E.type?_.addMark(A,T,E.mark):_.removeMark(A,T,E.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let e=g.parent.textBetween(g.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",(n=>n(t,A,T,e))))return;_=t.state.tr.insertText(e,A,T)}if(_||(_=t.state.tr.replace(A,T,h.doc.slice(p.start-h.from,p.endB-h.from))),h.sel){let e=Kn(t,_.doc,h.sel);e&&!(I&&N&&t.composing&&e.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==A||e.head==_.mapping.map(T)-1)||x&&e.empty&&e.head==A)&&_.setSelection(e)}S&&_.ensureMarks(S),t.dispatch(_.scrollIntoView())}function Kn(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ee(t,e.resolve(n.anchor),e.resolve(n.head))}function Jn(t,e){let n,r,o,s=t.firstChild.marks,a=e.firstChild.marks,l=s,c=a;for(let i=0;i<a.length;i++)l=a[i].removeFromSet(l);for(let i=0;i<s.length;i++)c=s[i].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",o=t=>t.mark(r.addToSet(t.marks));else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",o=t=>t.mark(r.removeFromSet(t.marks))}let u=[];for(let i=0;i<e.childCount;i++)u.push(o(e.child(i)));if(i.HY.from(u).eq(t))return{mark:r,type:n}}function Qn(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||tr(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(tr(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||tr(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function tr(t,e,n){let r=t.depth,i=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,i++,e=!1;if(n){let e=t.node(r).maybeChild(t.indexAfter(r));while(e&&!e.isLeaf)e=e.firstChild,i++}return i}function er(t,e,n,r,i){let o=t.findDiffStart(e,n);if(null==o)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if("end"==i){let t=Math.max(0,o-Math.min(s,a));r-=s+t-o}if(s<o&&t.size<e.size){let t=r<=o&&r>=s?o-r:0;o-=t,a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;o-=t,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}class nr{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ue,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(cr),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=or(this),ir(this),this.nodeViews=ar(this),this.docView=Et(this.state.doc,rr(this),Un(this),this.dom,this),this.domObserver=new Hn(this,((t,e,n,r)=>Zn(this,t,e,n,r))),this.domObserver.start(),Fe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&He(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(cr),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let n=this.state,r=!1,i=!1;t.storedMarks&&this.composing&&(cn(this),i=!0),this.state=t;let o=n.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=ar(this);lr(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&He(this),this.editable=or(this),ir(this);let s=Un(this),a=rr(this),l=n.plugins==t.plugins||n.doc.eq(t.doc)?t.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(t.doc,a,s);!c&&t.selection.eq(n.selection)||(i=!0);let u="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&V(this);if(i){this.domObserver.stop();let e=c&&(x||I)&&!this.composing&&!n.selection.empty&&!t.selection.empty&&sr(n.selection,t.selection);if(c){let n=I?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(t.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Et(t.doc,a,s,this.dom,this)),n&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ie(this))?$t(this,e):(Qt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():u&&j(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof r.qv){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&z(this,e.getBoundingClientRect(),t)}else z(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}someProp(t,e){let n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[t];if(null!=r&&(n=e?e(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[t];if(null!=r&&(n=e?e(r):r))return n}}hasFocus(){if(x){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;while(t&&this.dom!=t&&this.dom.contains(t)){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$(this.dom),$t(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return t||document}posAtCoords(t){return tt(this,t)}coordsAtPos(t,e=1){return rt(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return ft(this,e||this.state,t)}pasteHTML(t,e){return gn(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return gn(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(Ve(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Un(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return Ge(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return O&&11===this.root.nodeType&&v(this.dom.ownerDocument)==this.dom?$n(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function rr(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let t in n)"class"==t&&(e.class+=" "+n[t]),"style"==t?e.style=(e.style?e.style+";":"")+n[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(n[t]))})),[En.node(0,t.state.doc.content.size,e)]}function ir(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:En.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function or(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function sr(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function ar(t){let e=Object.create(null);function n(t){for(let n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function lr(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function cr(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},708:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});n(3767),n(8585),n(8696);var r=n(6402);function i(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,r.P)(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}},5489:function(t,e,n){"use strict";n.r(e),n.d(e,{concat:function(){return o}});var r=n(708),i=n(6402);function o(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const n=(0,r.E)(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return(0,i.P)(n)}},6555:function(t,e,n){"use strict";n.r(e),n.d(e,{fromString:function(){return Z}});var r={};n.r(r),n.d(r,{identity:function(){return p}});var i={};n.r(i),n.d(i,{base2:function(){return m}});var o={};n.r(o),n.d(o,{base8:function(){return g}});var s={};n.r(s),n.d(s,{base10:function(){return y}});var a={};n.r(a),n.d(a,{base16:function(){return v},base16upper:function(){return w}});var l={};n.r(l),n.d(l,{base36:function(){return _},base36upper:function(){return S}});var c={};n.r(c),n.d(c,{base64:function(){return A},base64pad:function(){return x},base64url:function(){return C},base64urlpad:function(){return T}});var u={};n.r(u),n.d(u,{base256emoji:function(){return D}});var h={};n.r(h),n.d(h,{code:function(){return F},decode:function(){return V},encode:function(){return z},name:function(){return U}});var d=n(4711),f=n(3914);const p=(0,d.Dp)({prefix:"\0",name:"identity",encode:t=>(0,f.toString)(t),decode:t=>(0,f.fromString)(t)}),m=(0,d.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),g=(0,d.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),y=(0,d.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),v=(0,d.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),w=(0,d.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var b=n(2056);const _=(0,d.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),S=(0,d.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var E=n(8334);const A=(0,d.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x=(0,d.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),C=(0,d.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),T=(0,d.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});n(7658),n(3767),n(8585),n(8696);const M=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),I=M.reduce(((t,e,n)=>(t[n]=e,t)),[]),k=M.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function O(t){return t.reduce(((t,e)=>(t+=I[e],t)),"")}function R(t){const e=[];for(const n of t){const t=k[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const D=(0,d.Dp)({prefix:"🚀",name:"base256emoji",encode:O,decode:R});var N=n(1919),P=n(7041);n(6347);const L=new TextEncoder,B=new TextDecoder,U="json",F=512,z=t=>L.encode(JSON.stringify(t)),V=t=>JSON.parse(B.decode(t));n(2493);const H={...r,...i,...o,...s,...a,...b,...l,...E,...c,...u};var j=n(708);function W(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const G=W("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),$=W("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{t=t.substring(1);const e=(0,j.E)(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),q={utf8:G,"utf-8":G,hex:H.base16,latin1:$,ascii:$,binary:$,...H};var Y=q,X=n(6402);function Z(t,e="utf8"){const n=Y[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${t}`):(0,X.P)(globalThis.Buffer.from(t,"utf-8"))}},6402:function(t,e,n){"use strict";n.d(e,{P:function(){return r}});n(3767),n(8585),n(8696);function r(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}},3068:function(t,e,n){"use strict";n.d(e,{Ct:function(){return f}});var r=n(1404),i=n(3396),o=n(610),s=n(5323),a=n(2220),l=n(6048);const[c,u]=(0,o["do"])("badge"),h={dot:Boolean,max:s.Or,tag:(0,s.SQ)("div"),color:String,offset:Array,content:s.Or,showZero:s.J5,position:(0,s.SQ)("top-right")};var d=(0,i.aZ)({name:c,props:h,setup(t,{slots:e}){const n=()=>{if(e.content)return!0;const{content:n,showZero:r}=t;return(0,a.Xq)(n)&&""!==n&&(r||0!==n&&"0"!==n)},r=()=>{const{dot:r,max:i,content:o}=t;if(!r&&n())return e.content?e.content():(0,a.Xq)(i)&&(0,a.kE)(o)&&+o>+i?`${i}+`:o},o=t=>t.startsWith("-")?t.replace("-",""):`-${t}`,s=(0,i.Fl)((()=>{const n={background:t.color};if(t.offset){const[r,i]=t.offset,{position:s}=t,[a,c]=s.split("-");e.default?(n[a]="number"===typeof i?(0,l.Nn)("top"===a?i:-i):"top"===a?(0,l.Nn)(i):o(i),n[c]="number"===typeof r?(0,l.Nn)("left"===c?r:-r):"left"===c?(0,l.Nn)(r):o(r)):(n.marginTop=(0,l.Nn)(i),n.marginLeft=(0,l.Nn)(r))}return n})),c=()=>{if(n()||t.dot)return(0,i.Wm)("div",{class:u([t.position,{dot:t.dot,fixed:!!e.default}]),style:s.value},[r()])};return()=>{if(e.default){const{tag:n}=t;return(0,i.Wm)(n,{class:u("wrapper")},{default:()=>[e.default(),c()]})}return c()}}});const f=(0,r.n)(d)},124:function(t,e,n){"use strict";n(1958),n(368)},3989:function(t,e,n){"use strict";n.d(e,{zx:function(){return A}});var r=n(1404),i=n(3396),o=n(610),s=n(2220),a=n(5323),l=n(7936),c=n(5322),u=n(6014),h=n(3649),d=n(6048);const[f,p]=(0,o["do"])("loading"),m=Array(12).fill(null).map(((t,e)=>(0,i.Wm)("i",{class:p("line",String(e+1))},null))),g=(0,i.Wm)("svg",{class:p("circular"),viewBox:"25 25 50 50"},[(0,i.Wm)("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),y={size:a.Or,type:(0,a.SQ)("circular"),color:String,vertical:Boolean,textSize:a.Or,textColor:String};var v=(0,i.aZ)({name:f,props:y,setup(t,{slots:e}){const n=(0,i.Fl)((()=>(0,s.l7)({color:t.color},(0,d.Xn)(t.size)))),r=()=>{const r="spinner"===t.type?m:g;return(0,i.Wm)("span",{class:p("spinner",t.type),style:n.value},[e.icon?e.icon():r])},o=()=>{var n;if(e.default)return(0,i.Wm)("span",{class:p("text"),style:{fontSize:(0,d.Nn)(t.textSize),color:null!=(n=t.textColor)?n:t.color}},[e.default()])};return()=>{const{type:e,vertical:n}=t;return(0,i.Wm)("div",{class:p([e,{vertical:n}]),"aria-live":"polite","aria-busy":!0},[r(),o()])}}});const w=(0,r.n)(v);const[b,_]=(0,o["do"])("button"),S=(0,s.l7)({},u.g2,{tag:(0,a.SQ)("button"),text:String,icon:String,type:(0,a.SQ)("default"),size:(0,a.SQ)("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:(0,a.SQ)("button"),loadingSize:a.Or,loadingText:String,loadingType:String,iconPosition:(0,a.SQ)("left")});var E=(0,i.aZ)({name:b,props:S,emits:["click"],setup(t,{emit:e,slots:n}){const r=(0,u.yj)(),o=()=>n.loading?n.loading():(0,i.Wm)(w,{size:t.loadingSize,type:t.loadingType,class:_("loading")},null),s=()=>t.loading?o():n.icon?(0,i.Wm)("div",{class:_("icon")},[n.icon()]):t.icon?(0,i.Wm)(h.JO,{name:t.icon,class:_("icon"),classPrefix:t.iconPrefix},null):void 0,a=()=>{let e;if(e=t.loading?t.loadingText:n.default?n.default():t.text,e)return(0,i.Wm)("span",{class:_("text")},[e])},d=()=>{const{color:e,plain:n}=t;if(e){const t={color:n?e:"white"};return n||(t.background=e),e.includes("gradient")?t.border=0:t.borderColor=e,t}},f=n=>{t.loading?(0,l.PF)(n):t.disabled||(e("click",n),r())};return()=>{const{tag:e,type:n,size:r,block:o,round:l,plain:u,square:h,loading:p,disabled:m,hairline:g,nativeType:y,iconPosition:v}=t,w=[_([n,r,{plain:u,block:o,round:l,square:h,loading:p,disabled:m,hairline:g}]),{[c._K]:g}];return(0,i.Wm)(e,{type:y,class:w,style:d(),disabled:m,onClick:f},{default:()=>[(0,i.Wm)("div",{class:_("content")},["left"===v&&s(),a(),"right"===v&&s()])]})}}});const A=(0,r.n)(E)},9237:function(t,e,n){"use strict";n(1958),n(368),n(6742)},5728:function(t,e,n){"use strict";n.d(e,{bL:function(){return m}});var r=n(1404),i=n(3396),o=n(610),s=n(5323),a=n(2220),l=n(6014),c=n(3649);const[u,h]=(0,o["do"])("cell"),d={tag:(0,s.SQ)("div"),icon:String,size:String,title:s.Or,value:s.Or,label:s.Or,center:Boolean,isLink:Boolean,border:s.J5,required:Boolean,iconPrefix:String,valueClass:s.Vg,labelClass:s.Vg,titleClass:s.Vg,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},f=(0,a.l7)({},d,l.g2);var p=(0,i.aZ)({name:u,props:f,setup(t,{slots:e}){const n=(0,l.yj)(),r=()=>{const n=e.label||(0,a.Xq)(t.label);if(n)return(0,i.Wm)("div",{class:[h("label"),t.labelClass]},[e.label?e.label():t.label])},o=()=>{var n;if(e.title||(0,a.Xq)(t.title)){const o=null==(n=e.title)?void 0:n.call(e);if(Array.isArray(o)&&0===o.length)return;return(0,i.Wm)("div",{class:[h("title"),t.titleClass],style:t.titleStyle},[o||(0,i.Wm)("span",null,[t.title]),r()])}},s=()=>{const n=e.value||e.default,r=n||(0,a.Xq)(t.value);if(r)return(0,i.Wm)("div",{class:[h("value"),t.valueClass]},[n?n():(0,i.Wm)("span",null,[t.value])])},u=()=>e.icon?e.icon():t.icon?(0,i.Wm)(c.JO,{name:t.icon,class:h("left-icon"),classPrefix:t.iconPrefix},null):void 0,d=()=>{if(e["right-icon"])return e["right-icon"]();if(t.isLink){const e=t.arrowDirection&&"right"!==t.arrowDirection?`arrow-${t.arrowDirection}`:"arrow";return(0,i.Wm)(c.JO,{name:e,class:h("right-icon")},null)}};return()=>{var r;const{tag:a,size:l,center:c,border:f,isLink:p,required:m}=t,g=null!=(r=t.clickable)?r:p,y={center:c,required:m,clickable:g,borderless:!f};return l&&(y[l]=!!l),(0,i.Wm)(a,{class:h(y),role:g?"button":void 0,tabindex:g?0:void 0,onClick:n},{default:()=>{var t;return[u(),o(),s(),d(),null==(t=e.extra)?void 0:t.call(e)]}})}}});const m=(0,r.n)(p)},923:function(t,e,n){"use strict";n(1958),n(368),n(6742)},140:function(t,e,n){"use strict";n.d(e,{H:function(){return o},t:function(){return i}});let r=2e3;const i=()=>++r,o=t=>{r=t}},6014:function(t,e,n){"use strict";n.d(e,{g2:function(){return i},yj:function(){return s}});var r=n(3396);const i={to:[String,Object],url:String,replace:Boolean};function o({to:t,url:e,replace:n,$router:r}){t&&r?r[n?"replace":"push"](t):e&&(n?location.replace(e):location.href=e)}function s(){const t=(0,r.FN)().proxy;return()=>o(t)}},3649:function(t,e,n){"use strict";n.d(e,{JO:function(){return E}});var r=n(1404),i=n(3396),o=n(610),s=n(5323),a=n(6048),l=n(3068),c=n(2220),u=n(140);const[h,d]=(0,o["do"])("config-provider"),f=Symbol(h),p={tag:(0,s.SQ)("div"),theme:(0,s.SQ)("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,themeVarsScope:(0,s.SQ)("local"),iconPrefix:String};function m(t){return t.replace(/([a-zA-Z])(\d)/g,"$1-$2")}function g(t){const e={};return Object.keys(t).forEach((n=>{const r=m((0,a.GL)(n));e[`--van-${r}`]=t[n]})),e}function y(t={},e={}){Object.keys(t).forEach((n=>{t[n]!==e[n]&&document.documentElement.style.setProperty(n,t[n])})),Object.keys(e).forEach((e=>{t[e]||document.documentElement.style.removeProperty(e)}))}(0,i.aZ)({name:h,props:p,setup(t,{slots:e}){const n=(0,i.Fl)((()=>g((0,c.l7)({},t.themeVars,"dark"===t.theme?t.themeVarsDark:t.themeVarsLight))));if(c._f){const e=()=>{document.documentElement.classList.add(`van-theme-${t.theme}`)},r=(e=t.theme)=>{document.documentElement.classList.remove(`van-theme-${e}`)};(0,i.YP)((()=>t.theme),((t,n)=>{n&&r(n),e()}),{immediate:!0}),(0,i.dl)(e),(0,i.se)(r),(0,i.Jd)(r),(0,i.YP)(n,((e,n)=>{"global"===t.themeVarsScope&&y(e,n)})),(0,i.YP)((()=>t.themeVarsScope),((t,e)=>{"global"===e&&y({},n.value),"global"===t&&y(n.value,{})})),"global"===t.themeVarsScope&&y(n.value,{})}return(0,i.JJ)(f,t),(0,i.m0)((()=>{void 0!==t.zIndex&&(0,u.H)(t.zIndex)})),()=>(0,i.Wm)(t.tag,{class:d(),style:"local"===t.themeVarsScope?n.value:void 0},{default:()=>{var t;return[null==(t=e.default)?void 0:t.call(e)]}})}});const[v,w]=(0,o["do"])("icon"),b=t=>null==t?void 0:t.includes("/"),_={dot:Boolean,tag:(0,s.SQ)("i"),name:String,size:s.Or,badge:s.Or,color:String,badgeProps:Object,classPrefix:String};var S=(0,i.aZ)({name:v,props:_,setup(t,{slots:e}){const n=(0,i.f3)(f,null),r=(0,i.Fl)((()=>t.classPrefix||(null==n?void 0:n.iconPrefix)||w()));return()=>{const{tag:n,dot:o,name:s,size:c,badge:u,color:h}=t,d=b(s);return(0,i.Wm)(l.Ct,(0,i.dG)({dot:o,tag:n,class:[r.value,d?"":`${r.value}-${s}`],style:{color:h,fontSize:(0,a.Nn)(c)},content:u},t.badgeProps),{default:()=>{var t;return[null==(t=e.default)?void 0:t.call(e),d&&(0,i.Wm)("img",{class:w("image"),src:s},null)]}})}}});const E=(0,r.n)(S)},4165:function(t,e,n){"use strict";n(1958),n(368),n(6742)},9591:function(t,e,n){"use strict";n.d(e,{GI:function(){return P}});var r=n(1404),i=n(3396),o=n(9242),s=n(4870),a=n(5323);const l={show:Boolean,zIndex:a.Or,overlay:a.J5,duration:a.Or,teleport:[String,Object],lockScroll:a.J5,lazyRender:a.J5,beforeClose:Function,overlayStyle:Object,overlayClass:a.Vg,transitionAppear:Boolean,closeOnClickOverlay:a.J5};Object.keys(l);var c=n(2220),u=n(610);function h(t,{args:e=[],done:n,canceled:r}){if(t){const i=t.apply(null,e);(0,c.tI)(i)?i.then((t=>{t?n():r&&r()})).catch(c.ZT):i?n():r&&r()}else n()}var d=n(5322),f=n(253);function p(t){const e=(0,i.FN)();e&&(0,c.l7)(e.proxy,t)}function m(t,e){return t>e?"horizontal":e>t?"vertical":""}function g(){const t=(0,s.iH)(0),e=(0,s.iH)(0),n=(0,s.iH)(0),r=(0,s.iH)(0),i=(0,s.iH)(0),o=(0,s.iH)(0),a=(0,s.iH)(""),l=(0,s.iH)(!0),c=()=>"vertical"===a.value,u=()=>"horizontal"===a.value,h=()=>{n.value=0,r.value=0,i.value=0,o.value=0,a.value="",l.value=!0},f=n=>{h(),t.value=n.touches[0].clientX,e.value=n.touches[0].clientY},p=s=>{const c=s.touches[0];n.value=(c.clientX<0?0:c.clientX)-t.value,r.value=c.clientY-e.value,i.value=Math.abs(n.value),o.value=Math.abs(r.value);const u=10;(!a.value||i.value<u&&o.value<u)&&(a.value=m(i.value,o.value)),l.value&&(i.value>d.mH||o.value>d.mH)&&(l.value=!1)};return{move:p,start:f,reset:h,startX:t,startY:e,deltaX:n,deltaY:r,offsetX:i,offsetY:o,direction:a,isVertical:c,isHorizontal:u,isTap:l}}var y=n(7936);let v=0;const w="van-overflow-hidden";function b(t,e){const n=g(),r="01",o="10",s=e=>{n.move(e);const i=n.deltaY.value>0?o:r,s=(0,f.rP)(e.target,t.value),{scrollHeight:a,offsetHeight:l,scrollTop:c}=s;let u="11";0===c?u=l>=a?"00":"01":c+l>=a&&(u="10"),"11"===u||!n.isVertical()||parseInt(u,2)&parseInt(i,2)||(0,y.PF)(e,!0)},a=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",s,{passive:!1}),v||document.body.classList.add(w),v++},l=()=>{v&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",s),v--,v||document.body.classList.remove(w))},c=()=>e()&&a(),u=()=>e()&&l();(0,f.Ib)(c),(0,i.se)(u),(0,i.Jd)(u),(0,i.YP)(e,(t=>{t?a():l()}))}function _(t){const e=(0,s.iH)(!1);return(0,i.YP)(t,(t=>{t&&(e.value=t)}),{immediate:!0}),t=>()=>e.value?t():null}const S=Symbol();var E=n(140),A=n(3649),x=n(6048);const[C,T]=(0,u["do"])("overlay"),M={show:Boolean,zIndex:a.Or,duration:a.Or,className:a.Vg,lockScroll:a.J5,lazyRender:a.J5,customStyle:Object};var I=(0,i.aZ)({name:C,props:M,setup(t,{slots:e}){const n=(0,s.iH)(),r=_((()=>t.show||!t.lazyRender)),a=e=>{t.lockScroll&&(0,y.PF)(e,!0)},l=r((()=>{var r;const s=(0,c.l7)((0,x.As)(t.zIndex),t.customStyle);return(0,c.Xq)(t.duration)&&(s.animationDuration=`${t.duration}s`),(0,i.wy)((0,i.Wm)("div",{ref:n,style:s,class:[T(),t.className]},[null==(r=e.default)?void 0:r.call(e)]),[[o.F8,t.show]])}));return(0,f.OR)("touchmove",a,{target:n}),()=>(0,i.Wm)(o.uT,{name:"van-fade",appear:!0},{default:l})}});const k=(0,r.n)(I);const O=(0,c.l7)({},l,{round:Boolean,position:(0,a.SQ)("center"),closeIcon:(0,a.SQ)("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:(0,a.SQ)("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[R,D]=(0,u["do"])("popup");var N=(0,i.aZ)({name:R,inheritAttrs:!1,props:O,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(t,{emit:e,attrs:n,slots:r}){let a,l;const u=(0,s.iH)(),m=(0,s.iH)(),g=_((()=>t.show||!t.lazyRender)),y=(0,i.Fl)((()=>{const e={zIndex:u.value};if((0,c.Xq)(t.duration)){const n="center"===t.position?"animationDuration":"transitionDuration";e[n]=`${t.duration}s`}return e})),v=()=>{a||(a=!0,u.value=void 0!==t.zIndex?+t.zIndex:(0,E.t)(),e("open"))},w=()=>{a&&h(t.beforeClose,{done(){a=!1,e("close"),e("update:show",!1)}})},x=n=>{e("clickOverlay",n),t.closeOnClickOverlay&&w()},C=()=>{if(t.overlay)return(0,i.Wm)(k,{show:t.show,class:t.overlayClass,zIndex:u.value,duration:t.duration,customStyle:t.overlayStyle,role:t.closeOnClickOverlay?"button":void 0,tabindex:t.closeOnClickOverlay?0:void 0,onClick:x},{default:r["overlay-content"]})},T=t=>{e("clickCloseIcon",t),w()},M=()=>{if(t.closeable)return(0,i.Wm)(A.JO,{role:"button",tabindex:0,name:t.closeIcon,class:[D("close-icon",t.closeIconPosition),d.e9],classPrefix:t.iconPrefix,onClick:T},null)};let I;const O=()=>{I&&clearTimeout(I),I=setTimeout((()=>{e("opened")}))},R=()=>e("closed"),N=t=>e("keydown",t),P=g((()=>{var e;const{round:s,position:a,safeAreaInsetTop:l,safeAreaInsetBottom:c}=t;return(0,i.wy)((0,i.Wm)("div",(0,i.dG)({ref:m,style:y.value,role:"dialog",tabindex:0,class:[D({round:s,[a]:a}),{"van-safe-area-top":l,"van-safe-area-bottom":c}],onKeydown:N},n),[null==(e=r.default)?void 0:e.call(r),M()]),[[o.F8,t.show]])})),L=()=>{const{position:e,transition:n,transitionAppear:r}=t,s="center"===e?"van-fade":`van-popup-slide-${e}`;return(0,i.Wm)(o.uT,{name:n||s,appear:r,onAfterEnter:O,onAfterLeave:R},{default:P})};return(0,i.YP)((()=>t.show),(t=>{t&&!a&&(v(),0===n.tabindex&&(0,i.Y3)((()=>{var t;null==(t=m.value)||t.focus()}))),!t&&a&&(a=!1,e("close"))})),p({popupRef:m}),b(m,(()=>t.show&&t.lockScroll)),(0,f.OR)("popstate",(()=>{t.closeOnPopstate&&(w(),l=!1)})),(0,i.bv)((()=>{t.show&&v()})),(0,i.dl)((()=>{l&&(e("update:show",!0),l=!1)})),(0,i.se)((()=>{t.show&&t.teleport&&(w(),l=!0)})),(0,i.JJ)(S,(()=>t.show)),()=>t.teleport?(0,i.Wm)(i.lR,{to:t.teleport},{default:()=>[C(),L()]}):(0,i.Wm)(i.HY,null,[C(),L()])}});const P=(0,r.n)(N)},6316:function(t,e,n){"use strict";n(1958),n(368),n(6742)},2220:function(t,e,n){"use strict";function r(){}n.d(e,{Kn:function(){return s},U2:function(){return d},Xq:function(){return a},ZT:function(){return r},_f:function(){return o},gn:function(){return h},kE:function(){return u},l7:function(){return i},mf:function(){return l},tI:function(){return c}});const i=Object.assign,o="undefined"!==typeof window,s=t=>null!==t&&"object"===typeof t,a=t=>void 0!==t&&null!==t,l=t=>"function"===typeof t,c=t=>s(t)&&l(t.then)&&l(t.catch);const u=t=>"number"===typeof t||/^\d+(\.\d+)?$/.test(t),h=()=>!!o&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function d(t,e){const n=e.split(".");let r=t;return n.forEach((t=>{var e;r=s(r)&&null!=(e=r[t])?e:""})),r}},5322:function(t,e,n){"use strict";n.d(e,{_K:function(){return i},e9:function(){return o},mH:function(){return s}});const r="van-hairline",i=`${r}--surround`,o="van-haptics-feedback",s=(Symbol("van-form"),5)},610:function(t,e,n){"use strict";n.d(e,{do:function(){return y}});var r=n(2220),i=n(6048),o=n(4870);const{hasOwnProperty:s}=Object.prototype;function a(t,e,n){const i=e[n];(0,r.Xq)(i)&&(s.call(t,n)&&(0,r.Kn)(i)?t[n]=l(Object(t[n]),i):t[n]=i)}function l(t,e){return Object.keys(e).forEach((n=>{a(t,e,n)})),t}var c={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(t,e)=>`${t}年${e}月`,rangePrompt:t=>`最多选择 ${t} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:t=>`${t}折`,condition:t=>`满${t}元可用`},vanCouponCell:{title:"优惠券",count:t=>`${t}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const u=(0,o.iH)("zh-CN"),h=(0,o.qj)({"zh-CN":c}),d={messages(){return h[u.value]},use(t,e){u.value=t,this.add({[t]:e})},add(t={}){l(h,t)}};var f=d;function p(t){const e=(0,i._A)(t)+".";return(t,...n)=>{const i=f.messages(),o=(0,r.U2)(i,e+t)||(0,r.U2)(i,t);return(0,r.mf)(o)?o(...n):o}}function m(t,e){return e?"string"===typeof e?` ${t}--${e}`:Array.isArray(e)?e.reduce(((e,n)=>e+m(t,n)),""):Object.keys(e).reduce(((n,r)=>n+(e[r]?m(t,r):"")),""):""}function g(t){return(e,n)=>(e&&"string"!==typeof e&&(n=e,e=""),e=e?`${t}__${e}`:t,`${e}${m(e,n)}`)}function y(t){const e=`van-${t}`;return[e,g(e),p(e)]}},7936:function(t,e,n){"use strict";n.d(e,{PF:function(){return s}});var r=n(253),i=n(2220);(0,i.gn)();const o=t=>t.stopPropagation();function s(t,e){("boolean"!==typeof t.cancelable||t.cancelable)&&t.preventDefault(),e&&o(t)}const{width:a,height:l}=(0,r.iP)()},6048:function(t,e,n){"use strict";n.d(e,{As:function(){return s},GL:function(){return c},Nn:function(){return i},Xn:function(){return o},_A:function(){return l}});var r=n(2220);function i(t){if((0,r.Xq)(t))return(0,r.kE)(t)?`${t}px`:String(t)}function o(t){if((0,r.Xq)(t)){if(Array.isArray(t))return{width:i(t[0]),height:i(t[1])};const e=i(t);return{width:e,height:e}}}function s(t){const e={};return void 0!==t&&(e.zIndex=+t),e}const a=/-(\w)/g,l=t=>t.replace(a,((t,e)=>e.toUpperCase())),c=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")},5323:function(t,e,n){"use strict";n.d(e,{J5:function(){return o},Or:function(){return i},SQ:function(){return s},Vg:function(){return r}});const r=null,i=[Number,String],o={type:Boolean,default:!0},s=t=>({type:String,default:t})},1404:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(6048);function i(t){return t.install=e=>{const{name:n}=t;n&&(e.component(n,t),e.component((0,r._A)(`-${n}`),t))},t}},2483:function(t,e,n){"use strict";n.d(e,{PO:function(){return F},p7:function(){return ee}});n(7658),n(541);var r=n(3396),i=n(4870);
/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function l(t,e){const n={};for(const r in e){const i=e[r];n[r]=u(i)?i.map(t):t(i)}return n}const c=()=>{},u=Array.isArray;const h=/\/$/,d=t=>t.replace(h,"");function f(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=_(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function m(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function g(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&y(e.matched[r],n.matched[i])&&v(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function y(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function v(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!w(t[n],e[n]))return!1;return!0}function w(t,e){return u(t)?b(t,e):u(e)?b(e,t):t===e}function b(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function _(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];".."!==i&&"."!==i||r.push("");let o,s,a=n.length-1;for(o=0;o<r.length;o++)if(s=r[o],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var S,E;(function(t){t["pop"]="pop",t["push"]="push"})(S||(S={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(E||(E={}));function A(t){if(!t)if(o){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const x=/^[^#]+#/;function C(t,e){return t.replace(x,"#")+e}function T(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const M=()=>({left:window.pageXOffset,top:window.pageYOffset});function I(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=T(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function k(t,e){const n=history.state?history.state.position-e:-1;return n+t}const O=new Map;function R(t,e){O.set(t,e)}function D(t){const e=O.get(t);return O.delete(t),e}let N=()=>location.protocol+"//"+location.host;function P(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),m(n,"")}const s=m(n,t);return s+r+i}function L(t,e,n,r){let i=[],o=[],s=null;const l=({state:o})=>{const a=P(t,location),l=n.value,c=e.value;let u=0;if(o){if(n.value=a,e.value=o,s&&s===l)return void(s=null);u=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,l,{delta:u,type:S.pop,direction:u?u>0?E.forward:E.back:E.unknown})}))};function c(){s=n.value}function u(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:M()}),"")}function d(){for(const t of o)t();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function B(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?M():null}}function U(t){const{history:e,location:n}=window,r={value:P(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:N()+t+r;try{e[s?"replaceState":"pushState"](o,"",l),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](l)}}function s(t,n){const s=a({},e.state,B(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,s,!0),r.value=t}function l(t,n){const s=a({},i.value,e.state,{forward:t,scroll:M()});o(s.current,s,!0);const l=a({},B(r.value,t,null),{position:s.position+1},n);o(t,l,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:l,replace:s}}function F(t){t=A(t);const e=U(t),n=L(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=a({location:"",base:t,go:r,createHref:C.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function z(t){return"string"===typeof t||t&&"object"===typeof t}function V(t){return"string"===typeof t||"symbol"===typeof t}const H={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},j=Symbol("");var W;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(W||(W={}));function G(t,e){return a(new Error,{type:t,[j]:!0},e)}function $(t,e){return t instanceof Error&&j in t&&(null==e||!!(t.type&e))}const q="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},X=/[.+*?^${}()[\]/\\]/g;function Z(t,e){const n=a({},Y,e),r=[];let i=n.start?"^":"";const o=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(i+="/");for(let e=0;e<a.length;e++){const r=a[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(X,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:l,regexp:c}=r;o.push({name:t,repeatable:n,optional:l});const u=c||q;if(u!==q){s+=10;try{new RegExp(`(${u})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+h.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=l&&a.length<2?`(?:/${d})`:"/"+d),l&&(d+="?"),i+=d,s+=20,l&&(s+=-8),n&&(s+=-20),".*"===u&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function l(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function c(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,l=o in e?e[o]:"";if(u(l)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=u(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n||"/"}return{re:s,score:r,keys:o,parse:l,stringify:c}}function K(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function J(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=K(r[n],i[n]);if(t)return t;n++}if(1===Math.abs(i.length-r.length)){if(Q(r))return 1;if(Q(i))return-1}return i.length-r.length}function Q(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,l=0,c="",u="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function d(){c+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:et.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}function rt(t,e,n){const r=Z(nt(t.path),n);const i=a(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function it(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){const i=!r,l=st(t);l.aliasOf=r&&r.record;const h=ut(e,t),d=[l];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},l,{components:r?r.record.components:l.components,path:t,aliasOf:r?r.record:l}))}let f,p;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&r+a)}if(f=rt(e,n,h),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&t.name&&!lt(f)&&s(t.name)),l.children){const t=l.children;for(let e=0;e<t.length;e++)o(t[e],f,r&&r.children[e])}r=r||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{s(p)}:c}function s(t){if(V(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function l(){return n}function u(t){let e=0;while(e<n.length&&J(t,n[e])>=0&&(t.record.path!==n[e].record.path||!ht(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!lt(t)&&r.set(t.record.name,t)}function h(t,e){let i,o,s,l={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw G(1,{location:t});0,s=i.record.name,l=a(ot(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,i.keys.map((t=>t.name)))),o=i.stringify(l)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(l=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw G(1,{location:t,currentLocation:e});s=i.record.name,l=a({},e.params,t.params),o=i.stringify(l)}const c=[];let u=i;while(u)c.unshift(u.record),u=u.parent;return{name:s,path:o,params:l,matched:c,meta:ct(c)}}return e=ut({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:h,removeRoute:s,getRoutes:l,getRecordMatcher:i}}function ot(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="object"===typeof n?n[r]:n;return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ct(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ut(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function ht(t,e){return e.children.some((e=>e===t||ht(t,e)))}const dt=/#/g,ft=/&/g,pt=/\//g,mt=/=/g,gt=/\?/g,yt=/\+/g,vt=/%5B/g,wt=/%5D/g,bt=/%5E/g,_t=/%60/g,St=/%7B/g,Et=/%7C/g,At=/%7D/g,xt=/%20/g;function Ct(t){return encodeURI(""+t).replace(Et,"|").replace(vt,"[").replace(wt,"]")}function Tt(t){return Ct(t).replace(St,"{").replace(At,"}").replace(bt,"^")}function Mt(t){return Ct(t).replace(yt,"%2B").replace(xt,"+").replace(dt,"%23").replace(ft,"%26").replace(_t,"`").replace(St,"{").replace(At,"}").replace(bt,"^")}function It(t){return Mt(t).replace(mt,"%3D")}function kt(t){return Ct(t).replace(dt,"%23").replace(gt,"%3F")}function Ot(t){return null==t?"":kt(t).replace(pt,"%2F")}function Rt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function Dt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(yt," "),n=t.indexOf("="),o=Rt(n<0?t:t.slice(0,n)),s=n<0?null:Rt(t.slice(n+1));if(o in e){let t=e[o];u(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Nt(t){let e="";for(let n in t){const r=t[n];if(n=It(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=u(r)?r.map((t=>t&&Mt(t))):[r&&Mt(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Pt(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=u(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}const Lt=Symbol(""),Bt=Symbol(""),Ut=Symbol(""),Ft=Symbol(""),zt=Symbol("");function Vt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ht(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const l=t=>{!1===t?a(G(4,{from:n,to:e})):t instanceof Error?a(t):z(t)?a(G(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"===typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch((t=>a(t)))}))}function jt(t,e,n,r){const i=[];for(const o of t){0;for(const t in o.components){let a=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Wt(a)){const s=a.__vccOpts||a,l=s[e];l&&i.push(Ht(l,n,r,o,t))}else{let l=a();0,i.push((()=>l.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const a=s(i)?i.default:i;o.components[t]=a;const l=a.__vccOpts||a,c=l[e];return c&&Ht(c,n,r,o,t)()}))))}}}return i}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Gt(t){const e=(0,r.f3)(Ut),n=(0,r.f3)(Ft),o=(0,r.Fl)((()=>e.resolve((0,i.SU)(t.to)))),s=(0,r.Fl)((()=>{const{matched:t}=o.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const s=i.findIndex(y.bind(null,r));if(s>-1)return s;const a=Zt(t[e-2]);return e>1&&Zt(r)===a&&i[i.length-1].path!==a?i.findIndex(y.bind(null,t[e-2])):s})),a=(0,r.Fl)((()=>s.value>-1&&Xt(n.params,o.value.params))),l=(0,r.Fl)((()=>s.value>-1&&s.value===n.matched.length-1&&v(n.params,o.value.params)));function u(n={}){return Yt(n)?e[(0,i.SU)(t.replace)?"replace":"push"]((0,i.SU)(t.to)).catch(c):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:a,isExactActive:l,navigate:u}}const $t=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Gt,setup(t,{slots:e}){const n=(0,i.qj)(Gt(t)),{options:o}=(0,r.f3)(Ut),s=(0,r.Fl)((()=>({[Kt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Kt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),qt=$t;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Xt(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!u(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Zt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Kt=(t,e,n)=>null!=t?t:null!=e?e:n,Jt=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=(0,r.f3)(zt),s=(0,r.Fl)((()=>t.route||o.value)),l=(0,r.f3)(Bt,0),c=(0,r.Fl)((()=>{let t=(0,i.SU)(l);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,r.Fl)((()=>s.value.matched[c.value]));(0,r.JJ)(Bt,(0,r.Fl)((()=>c.value+1))),(0,r.JJ)(Lt,u),(0,r.JJ)(zt,s);const h=(0,i.iH)();return(0,r.YP)((()=>[h.value,u.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&y(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=s.value,o=t.name,l=u.value,c=l&&l.components[o];if(!c)return Qt(n.default,{Component:c,route:i});const d=l.props[o],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=t=>{t.component.isUnmounted&&(l.instances[o]=null)},m=(0,r.h)(c,a({},f,e,{onVnodeUnmounted:p,ref:h}));return Qt(n.default,{Component:m,route:i})||m}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Jt;function ee(t){const e=it(t.routes,t),n=t.parseQuery||Dt,s=t.stringifyQuery||Nt,h=t.history;const d=Vt(),m=Vt(),y=Vt(),v=(0,i.XI)(H);let w=H;o&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=l.bind(null,(t=>""+t)),_=l.bind(null,Ot),E=l.bind(null,Rt);function A(t,n){let r,i;return V(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function x(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function C(){return e.getRoutes().map((t=>t.record))}function T(t){return!!e.getRecordMatcher(t)}function O(t,r){if(r=a({},r||v.value),"string"===typeof t){const i=f(n,t,r.path),o=e.resolve({path:i.path},r),s=h.createHref(i.fullPath);return a(i,o,{params:E(o.params),hash:Rt(i.hash),redirectedFrom:void 0,href:s})}let i;if("path"in t)i=a({},t,{path:f(n,t.path,r.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];i=a({},t,{params:_(e)}),r.params=_(r.params)}const o=e.resolve(i,r),l=t.hash||"";o.params=b(E(o.params));const c=p(s,a({},t,{hash:Tt(l),path:o.path})),u=h.createHref(c);return a({fullPath:c,hash:l,query:s===Nt?Pt(t.query):t.query||{}},o,{redirectedFrom:void 0,href:u})}function N(t){return"string"===typeof t?f(n,t,v.value.path):a({},t)}function P(t,e){if(w!==t)return G(8,{from:e,to:t})}function L(t){return F(t)}function B(t){return L(a(N(t),{replace:!0}))}function U(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=N(r):{path:r},r.params={}),a({query:t.query,hash:t.hash,params:"path"in r?{}:t.params},r)}}function F(t,e){const n=w=O(t),r=v.value,i=t.state,o=t.force,l=!0===t.replace,c=U(n);if(c)return F(a(N(c),{state:"object"===typeof c?a({},i,c.state):i,force:o,replace:l}),e||n);const u=n;let h;return u.redirectedFrom=e,!o&&g(s,r,n)&&(h=G(16,{to:u,from:r}),rt(r,r,!0,!1)),(h?Promise.resolve(h):W(u,r)).catch((t=>$(t)?$(t,2)?t:nt(t):tt(t,u,r))).then((t=>{if(t){if($(t,2))return F(a({replace:l},N(t.to),{state:"object"===typeof t.to?a({},i,t.to.state):i,force:o}),e||u)}else t=Y(u,r,!0,l,i);return q(u,r,t),t}))}function z(t,e){const n=P(t,e);return n?Promise.reject(n):Promise.resolve()}function j(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function W(t,e){let n;const[r,i,o]=ne(t,e);n=jt(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(Ht(r,t,e))}));const s=z.bind(null,t,e);return n.push(s),ct(n).then((()=>{n=[];for(const r of d.list())n.push(Ht(r,t,e));return n.push(s),ct(n)})).then((()=>{n=jt(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(Ht(r,t,e))}));return n.push(s),ct(n)})).then((()=>{n=[];for(const r of o)if(r.beforeEnter)if(u(r.beforeEnter))for(const i of r.beforeEnter)n.push(Ht(i,t,e));else n.push(Ht(r.beforeEnter,t,e));return n.push(s),ct(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=jt(o,"beforeRouteEnter",t,e),n.push(s),ct(n)))).then((()=>{n=[];for(const r of m.list())n.push(Ht(r,t,e));return n.push(s),ct(n)})).catch((t=>$(t,8)?t:Promise.reject(t)))}function q(t,e,n){y.list().forEach((r=>j((()=>r(t,e,n)))))}function Y(t,e,n,r,i){const s=P(t,e);if(s)return s;const l=e===H,c=o?history.state:{};n&&(r||l?h.replace(t.fullPath,a({scroll:l&&c&&c.scroll},i)):h.push(t.fullPath,i)),v.value=t,rt(t,e,n,l),nt()}let X;function Z(){X||(X=h.listen(((t,e,n)=>{if(!lt.listening)return;const r=O(t),i=U(r);if(i)return void F(a(i,{replace:!0}),r).catch(c);w=r;const s=v.value;o&&R(k(s.fullPath,n.delta),M()),W(r,s).catch((t=>$(t,12)?t:$(t,2)?(F(t.to,r).then((t=>{$(t,20)&&!n.delta&&n.type===S.pop&&h.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&h.go(-n.delta,!1),tt(t,r,s)))).then((t=>{t=t||Y(r,s,!1),t&&(n.delta&&!$(t,8)?h.go(-n.delta,!1):n.type===S.pop&&$(t,20)&&h.go(-1,!1)),q(r,s,t)})).catch(c)})))}let K,J=Vt(),Q=Vt();function tt(t,e,n){nt(t);const r=Q.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function et(){return K&&v.value!==H?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function nt(t){return K||(K=!t,Z(),J.list().forEach((([e,n])=>t?n(t):e())),J.reset()),t}function rt(e,n,i,s){const{scrollBehavior:a}=t;if(!o||!a)return Promise.resolve();const l=!i&&D(k(e.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(e,n,l))).then((t=>t&&I(t))).catch((t=>tt(t,e,n)))}const ot=t=>h.go(t);let st;const at=new Set,lt={currentRoute:v,listening:!0,addRoute:A,removeRoute:x,hasRoute:T,getRoutes:C,resolve:O,options:t,push:L,replace:B,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:d.add,beforeResolve:m.add,afterEach:y.add,onError:Q.add,isReady:et,install(t){const e=this;t.component("RouterLink",qt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(v)}),o&&!st&&v.value===H&&(st=!0,L(h.location).catch((t=>{0})));const n={};for(const i in H)Object.defineProperty(n,i,{get:()=>v.value[i],enumerable:!0});t.provide(Ut,e),t.provide(Ft,(0,i.Um)(n)),t.provide(zt,v);const r=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(w=H,X&&X(),X=null,v.value=H,st=!1,K=!1),r()}}};function ct(t){return t.reduce(((t,e)=>t.then((()=>j(e)))),Promise.resolve())}return lt}function ne(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>y(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>y(t,a)))||i.push(a))}return[n,r,i]}},2543:function(t,e,n){"use strict";n.d(e,{xk:function(){return Fs}});var r={};n.r(r),n.d(r,{code:function(){return Cr},createLink:function(){return Ar},createNode:function(){return Er},decode:function(){return Mr},encode:function(){return Tr},name:function(){return xr},prepare:function(){return _r},validate:function(){return Sr}});var i={};n.r(i),n.d(i,{abortedError:function(){return Qi},notFoundError:function(){return Ji}});var o={};n.r(o),n.d(o,{code:function(){return bs},decode:function(){return Ss},encode:function(){return _s},name:function(){return ws}});n(7658);Symbol("TIMEOUT");function s(t){if("function"===typeof t.next)return t;if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function a(){let t,e;const n=new Promise(((n,r)=>{e=n,t=r}));return{promise:n,reject:t,resolve:e}}function l(t,e,n){const r=s(n),i=[],o=[];let l=!1,c=!1,u=0,h=null;function d(){while(o.length>0&&i.length>0){const{resolve:t}=o.shift(),e=i.shift();t({done:!1,value:e})}while(o.length>0&&0===u&&l){const{resolve:t,reject:e}=o.shift();h?(e(h),h=null):t({done:!0,value:void 0})}}async function f(){if(l)d();else if(!c&&!(u+i.length>=t)){c=!0,u++;try{const{done:t,value:e}=await r.next();t?(l=!0,u--,d()):p(e)}catch(e){l=!0,u--,h=e,d()}c=!1,f()}}async function p(t){try{const n=await e(t);i.push(n)}catch(n){l=!0,h=n}u--,d(),f()}async function m(){if(0===i.length){const t=a();return o.push(t),f(),t.promise}const t=i.shift();return f(),{done:!1,value:t}}const g={next:m,[Symbol.asyncIterator]:()=>g};return g}function c(t,e,n){return void 0===e?(e,n)=>n?c(t,e,n):c(t,e):void 0===n?n=>c(t,e,n):l(t,e,n)}var u=n(9437),h=n(7290),d=n(2100),f=(n(3767),n(8585),n(8696),n(2611)),p=n(9329),m=n(5226);const g=["string","number","bigint","symbol"],y=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function v(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(g.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(w(t))return"Buffer";const n=b(t);return n||"Object"}function w(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function b(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(y.includes(e))return e}class _{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}_.uint=new _(0,"uint",!0),_.negint=new _(1,"negint",!0),_.bytes=new _(2,"bytes",!0),_.string=new _(3,"string",!0),_.array=new _(4,"array",!1),_.map=new _(5,"map",!1),_.tag=new _(6,"tag",!1),_.float=new _(7,"float",!0),_.false=new _(7,"false",!0),_.true=new _(7,"true",!0),_.null=new _(7,"null",!0),_.undefined=new _(7,"undefined",!0),_.break=new _(7,"break",!0);class S{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const E=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,A=new TextDecoder,x=new TextEncoder;function C(t){return E&&globalThis.Buffer.isBuffer(t)}function T(t){return t instanceof Uint8Array?C(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const M=E?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):L(t,e,n):(t,e,n)=>n-e>64?A.decode(t.subarray(e,n)):L(t,e,n),I=E?t=>t.length>64?globalThis.Buffer.from(t):P(t):t=>t.length>64?x.encode(t):P(t),k=t=>Uint8Array.from(t),O=E?(t,e,n)=>C(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),R=E?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),T(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let r=0;for(let i of t)r+i.length>n.length&&(i=i.subarray(0,n.length-r)),n.set(i,r),r+=i.length;return n},D=E?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function N(t,e){if(C(t)&&C(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}function P(t,e=1/0){let n;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function L(t,e,n){const r=[];while(e<n){const i=t[e];let o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=n){let n,r,a,l;switch(s){case 1:i<128&&(o=i);break;case 2:n=t[e+1],128===(192&n)&&(l=(31&i)<<6|63&n,l>127&&(o=l));break;case 3:n=t[e+1],r=t[e+2],128===(192&n)&&128===(192&r)&&(l=(15&i)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=t[e+1],r=t[e+2],a=t[e+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&i)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),e+=s}return U(r)}const B=4096;function U(t){const e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);let n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=B));return n}const F=256;class z{constructor(t=F){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];const n=this.cursor+t.length;if(n<=this.maxCursor+1){const n=e.length-(this.maxCursor-this.cursor)-1;e.set(t,n)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=D(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=O(n,0,this.cursor)}else e=R(this.chunks,this.cursor);return t&&this.reset(),e}}const V="CBOR decode error:",H="CBOR encode error:",j=[];function W(t,e,n){if(t.length-e<n)throw new Error(`${V} not enough data for type`)}j[23]=1,j[24]=2,j[25]=3,j[26]=5,j[27]=9;const G=[24,256,65536,4294967296,BigInt("18446744073709551616")];function $(t,e,n){W(t,e,1);const r=t[e];if(!0===n.strict&&r<G[0])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);return r}function q(t,e,n){W(t,e,2);const r=t[e]<<8|t[e+1];if(!0===n.strict&&r<G[1])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);return r}function Y(t,e,n){W(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===n.strict&&r<G[2])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);return r}function X(t,e,n){W(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(r)<<BigInt(32))+BigInt(i);if(!0===n.strict&&o<G[3])throw new Error(`${V} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(!0===n.allowBigInt)return o;throw new Error(`${V} integers outside of the safe integer range are not supported`)}function Z(t,e,n,r){return new S(_.uint,$(t,e+1,r),2)}function K(t,e,n,r){return new S(_.uint,q(t,e+1,r),3)}function J(t,e,n,r){return new S(_.uint,Y(t,e+1,r),5)}function Q(t,e,n,r){return new S(_.uint,X(t,e+1,r),9)}function tt(t,e){return et(t,0,e.value)}function et(t,e,n){if(n<G[0]){const r=Number(n);t.push([e|r])}else if(n<G[1]){const r=Number(n);t.push([24|e,r])}else if(n<G[2]){const r=Number(n);t.push([25|e,r>>>8,255&r])}else if(n<G[3]){const r=Number(n);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<G[4]))throw new Error(`${V} encountered BigInt larger than allowable range`);{const n=[27|e,0,0,0,0,0,0,0];let i=Number(r&BigInt(4294967295)),o=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&i,i>>=8,n[7]=255&i,i>>=8,n[6]=255&i,i>>=8,n[5]=255&i,n[4]=255&o,o>>=8,n[3]=255&o,o>>=8,n[2]=255&o,o>>=8,n[1]=255&o,t.push(n)}}}function nt(t,e,n,r){return new S(_.negint,-1-$(t,e+1,r),2)}function rt(t,e,n,r){return new S(_.negint,-1-q(t,e+1,r),3)}function it(t,e,n,r){return new S(_.negint,-1-Y(t,e+1,r),5)}tt.encodedSize=function(t){return et.encodedSize(t.value)},et.encodedSize=function(t){return t<G[0]?1:t<G[1]?2:t<G[2]?3:t<G[3]?5:9},tt.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const ot=BigInt(-1),st=BigInt(1);function at(t,e,n,r){const i=X(t,e+1,r);if("bigint"!==typeof i){const t=-1-i;if(t>=Number.MIN_SAFE_INTEGER)return new S(_.negint,t,9)}if(!0!==r.allowBigInt)throw new Error(`${V} integers outside of the safe integer range are not supported`);return new S(_.negint,ot-BigInt(i),9)}function lt(t,e){const n=e.value,r="bigint"===typeof n?n*ot-st:-1*n-1;et(t,e.type.majorEncoded,r)}function ct(t,e,n,r){W(t,e,n+r);const i=O(t,e+n,e+n+r);return new S(_.bytes,i,n+r)}function ut(t,e,n,r){return ct(t,e,1,n)}function ht(t,e,n,r){return ct(t,e,2,$(t,e+1,r))}function dt(t,e,n,r){return ct(t,e,3,q(t,e+1,r))}function ft(t,e,n,r){return ct(t,e,5,Y(t,e+1,r))}function pt(t,e,n,r){const i=X(t,e+1,r);if("bigint"===typeof i)throw new Error(`${V} 64-bit integer bytes lengths not supported`);return ct(t,e,9,i)}function mt(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===_.string?I(t.value):t.value),t.encodedBytes}function gt(t,e){const n=mt(e);et(t,e.type.majorEncoded,n.length),t.push(n)}function yt(t,e){return t.length<e.length?-1:t.length>e.length?1:N(t,e)}function vt(t,e,n,r,i){const o=n+r;W(t,e,o);const s=new S(_.string,M(t,e+n,e+o),o);return!0===i.retainStringBytes&&(s.byteValue=O(t,e+n,e+o)),s}function wt(t,e,n,r){return vt(t,e,1,n,r)}function bt(t,e,n,r){return vt(t,e,2,$(t,e+1,r),r)}function _t(t,e,n,r){return vt(t,e,3,q(t,e+1,r),r)}function St(t,e,n,r){return vt(t,e,5,Y(t,e+1,r),r)}function Et(t,e,n,r){const i=X(t,e+1,r);if("bigint"===typeof i)throw new Error(`${V} 64-bit integer string lengths not supported`);return vt(t,e,9,i,r)}lt.encodedSize=function(t){const e=t.value,n="bigint"===typeof e?e*ot-st:-1*e-1;return n<G[0]?1:n<G[1]?2:n<G[2]?3:n<G[3]?5:9},lt.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},gt.encodedSize=function(t){const e=mt(t);return et.encodedSize(e.length)+e.length},gt.compareTokens=function(t,e){return yt(mt(t),mt(e))};const At=gt;function xt(t,e,n,r){return new S(_.array,r,n)}function Ct(t,e,n,r){return xt(t,e,1,n)}function Tt(t,e,n,r){return xt(t,e,2,$(t,e+1,r))}function Mt(t,e,n,r){return xt(t,e,3,q(t,e+1,r))}function It(t,e,n,r){return xt(t,e,5,Y(t,e+1,r))}function kt(t,e,n,r){const i=X(t,e+1,r);if("bigint"===typeof i)throw new Error(`${V} 64-bit integer array lengths not supported`);return xt(t,e,9,i)}function Ot(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${V} indefinite length items not allowed`);return xt(t,e,1,1/0)}function Rt(t,e){et(t,_.array.majorEncoded,e.value)}function Dt(t,e,n,r){return new S(_.map,r,n)}function Nt(t,e,n,r){return Dt(t,e,1,n)}function Pt(t,e,n,r){return Dt(t,e,2,$(t,e+1,r))}function Lt(t,e,n,r){return Dt(t,e,3,q(t,e+1,r))}function Bt(t,e,n,r){return Dt(t,e,5,Y(t,e+1,r))}function Ut(t,e,n,r){const i=X(t,e+1,r);if("bigint"===typeof i)throw new Error(`${V} 64-bit integer map lengths not supported`);return Dt(t,e,9,i)}function Ft(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${V} indefinite length items not allowed`);return Dt(t,e,1,1/0)}function zt(t,e){et(t,_.map.majorEncoded,e.value)}function Vt(t,e,n,r){return new S(_.tag,n,1)}function Ht(t,e,n,r){return new S(_.tag,$(t,e+1,r),2)}function jt(t,e,n,r){return new S(_.tag,q(t,e+1,r),3)}function Wt(t,e,n,r){return new S(_.tag,Y(t,e+1,r),5)}function Gt(t,e,n,r){return new S(_.tag,X(t,e+1,r),9)}function $t(t,e){et(t,_.tag.majorEncoded,e.value)}Rt.compareTokens=tt.compareTokens,Rt.encodedSize=function(t){return et.encodedSize(t.value)},zt.compareTokens=tt.compareTokens,zt.encodedSize=function(t){return et.encodedSize(t.value)},$t.compareTokens=tt.compareTokens,$t.encodedSize=function(t){return et.encodedSize(t.value)};const qt=20,Yt=21,Xt=22,Zt=23;function Kt(t,e,n,r){if(!1===r.allowUndefined)throw new Error(`${V} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new S(_["null"],null,1):new S(_.undefined,void 0,1)}function Jt(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${V} indefinite length items not allowed`);return new S(_["break"],void 0,1)}function Qt(t,e,n){if(n){if(!1===n.allowNaN&&Number.isNaN(t))throw new Error(`${V} NaN values are not supported`);if(!1===n.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${V} Infinity values are not supported`)}return new S(_.float,t,e)}function te(t,e,n,r){return Qt(le(t,e+1),3,r)}function ee(t,e,n,r){return Qt(ue(t,e+1),5,r)}function ne(t,e,n,r){return Qt(de(t,e+1),9,r)}function re(t,e,n){const r=e.value;if(!1===r)t.push([_.float.majorEncoded|qt]);else if(!0===r)t.push([_.float.majorEncoded|Yt]);else if(null===r)t.push([_.float.majorEncoded|Xt]);else if(void 0===r)t.push([_.float.majorEncoded|Zt]);else{let e,i=!1;n&&!0===n.float64||(ae(r),e=le(se,1),r===e||Number.isNaN(r)?(se[0]=249,t.push(se.slice(0,3)),i=!0):(ce(r),e=ue(se,1),r===e&&(se[0]=250,t.push(se.slice(0,5)),i=!0))),i||(he(r),e=de(se,1),se[0]=251,t.push(se.slice(0,9)))}}re.encodedSize=function(t,e){const n=t.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!e||!0!==e.float64){ae(n);let t=le(se,1);if(n===t||Number.isNaN(n))return 3;if(ce(n),t=ue(se,1),n===t)return 5}return 9};const ie=new ArrayBuffer(9),oe=new DataView(ie,1),se=new Uint8Array(ie,0);function ae(t){if(t===1/0)oe.setUint16(0,31744,!1);else if(t===-1/0)oe.setUint16(0,64512,!1);else if(Number.isNaN(t))oe.setUint16(0,32256,!1);else{oe.setFloat32(0,t);const e=oe.getUint32(0),n=(2139095040&e)>>23,r=8388607&e;if(255===n)oe.setUint16(0,31744,!1);else if(0===n)oe.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=n-127;t<-24?oe.setUint16(0,0):t<-14?oe.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):oe.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function le(t,e){if(t.length-e<2)throw new Error(`${V} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,i=1023&n;let o;return o=0===r?i*2**-24:31!==r?(i+1024)*2**(r-25):0===i?1/0:NaN,32768&n?-o:o}function ce(t){oe.setFloat32(0,t,!1)}function ue(t,e){if(t.length-e<4)throw new Error(`${V} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function he(t){oe.setFloat64(0,t,!1)}function de(t,e){if(t.length-e<8)throw new Error(`${V} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}function fe(t,e,n){throw new Error(`${V} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function pe(t){return()=>{throw new Error(`${V} ${t}`)}}re.compareTokens=tt.compareTokens;const me=[];for(let Gs=0;Gs<=23;Gs++)me[Gs]=fe;me[24]=Z,me[25]=K,me[26]=J,me[27]=Q,me[28]=fe,me[29]=fe,me[30]=fe,me[31]=fe;for(let Gs=32;Gs<=55;Gs++)me[Gs]=fe;me[56]=nt,me[57]=rt,me[58]=it,me[59]=at,me[60]=fe,me[61]=fe,me[62]=fe,me[63]=fe;for(let Gs=64;Gs<=87;Gs++)me[Gs]=ut;me[88]=ht,me[89]=dt,me[90]=ft,me[91]=pt,me[92]=fe,me[93]=fe,me[94]=fe,me[95]=pe("indefinite length bytes/strings are not supported");for(let Gs=96;Gs<=119;Gs++)me[Gs]=wt;me[120]=bt,me[121]=_t,me[122]=St,me[123]=Et,me[124]=fe,me[125]=fe,me[126]=fe,me[127]=pe("indefinite length bytes/strings are not supported");for(let Gs=128;Gs<=151;Gs++)me[Gs]=Ct;me[152]=Tt,me[153]=Mt,me[154]=It,me[155]=kt,me[156]=fe,me[157]=fe,me[158]=fe,me[159]=Ot;for(let Gs=160;Gs<=183;Gs++)me[Gs]=Nt;me[184]=Pt,me[185]=Lt,me[186]=Bt,me[187]=Ut,me[188]=fe,me[189]=fe,me[190]=fe,me[191]=Ft;for(let Gs=192;Gs<=215;Gs++)me[Gs]=Vt;me[216]=Ht,me[217]=jt,me[218]=Wt,me[219]=Gt,me[220]=fe,me[221]=fe,me[222]=fe,me[223]=fe;for(let Gs=224;Gs<=243;Gs++)me[Gs]=pe("simple values are not supported");me[244]=fe,me[245]=fe,me[246]=fe,me[247]=Kt,me[248]=pe("simple values are not supported"),me[249]=te,me[250]=ee,me[251]=ne,me[252]=fe,me[253]=fe,me[254]=fe,me[255]=Jt;const ge=[];for(let Gs=0;Gs<24;Gs++)ge[Gs]=new S(_.uint,Gs,1);for(let Gs=-1;Gs>=-24;Gs--)ge[31-Gs]=new S(_.negint,Gs,1);function ye(t){switch(t.type){case _["false"]:return k([244]);case _["true"]:return k([245]);case _["null"]:return k([246]);case _.bytes:return t.value.length?void 0:k([64]);case _.string:return""===t.value?k([96]):void 0;case _.array:return 0===t.value?k([128]):void 0;case _.map:return 0===t.value?k([160]):void 0;case _.uint:return t.value<24?k([Number(t.value)]):void 0;case _.negint:if(t.value>=-24)return k([31-Number(t.value)])}}ge[64]=new S(_.bytes,new Uint8Array(0),1),ge[96]=new S(_.string,"",1),ge[128]=new S(_.array,0,1),ge[160]=new S(_.map,0,1),ge[244]=new S(_["false"],!1,1),ge[245]=new S(_["true"],!0,1),ge[246]=new S(_["null"],null,1);const ve={float64:!1,mapSorter:Te,quickEncodeToken:ye};function we(){const t=[];return t[_.uint.major]=tt,t[_.negint.major]=lt,t[_.bytes.major]=gt,t[_.string.major]=At,t[_.array.major]=Rt,t[_.map.major]=zt,t[_.tag.major]=$t,t[_.float.major]=re,t}const be=we(),_e=new z;class Se{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${H} object contains circular references`);return new Se(e,t)}}const Ee={null:new S(_["null"],null),undefined:new S(_.undefined,void 0),true:new S(_["true"],!0),false:new S(_["false"],!1),emptyArray:new S(_.array,0),emptyMap:new S(_.map,0)},Ae={number(t,e,n,r){return Number.isInteger(t)&&Number.isSafeInteger(t)?new S(t>=0?_.uint:_.negint,t):new S(_.float,t)},bigint(t,e,n,r){return t>=BigInt(0)?new S(_.uint,t):new S(_.negint,t)},Uint8Array(t,e,n,r){return new S(_.bytes,t)},string(t,e,n,r){return new S(_.string,t)},boolean(t,e,n,r){return t?Ee.true:Ee.false},null(t,e,n,r){return Ee.null},undefined(t,e,n,r){return Ee.undefined},ArrayBuffer(t,e,n,r){return new S(_.bytes,new Uint8Array(t))},DataView(t,e,n,r){return new S(_.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,n,r){if(!t.length)return!0===n.addBreakTokens?[Ee.emptyArray,new S(_["break"])]:Ee.emptyArray;r=Se.createCheck(r,t);const i=[];let o=0;for(const s of t)i[o++]=xe(s,n,r);return n.addBreakTokens?[new S(_.array,t.length),i,new S(_["break"])]:[new S(_.array,t.length),i]},Object(t,e,n,r){const i="Object"!==e,o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return!0===n.addBreakTokens?[Ee.emptyMap,new S(_["break"])]:Ee.emptyMap;r=Se.createCheck(r,t);const a=[];let l=0;for(const c of o)a[l++]=[xe(c,n,r),xe(i?t.get(c):t[c],n,r)];return Ce(a,n),n.addBreakTokens?[new S(_.map,s),a,new S(_["break"])]:[new S(_.map,s),a]}};Ae.Map=Ae.Object,Ae.Buffer=Ae.Uint8Array;for(const Gs of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ae[`${Gs}Array`]=Ae.DataView;function xe(t,e={},n){const r=v(t),i=e&&e.typeEncoders&&e.typeEncoders[r]||Ae[r];if("function"===typeof i){const o=i(t,r,e,n);if(null!=o)return o}const o=Ae[r];if(!o)throw new Error(`${H} unsupported type: ${r}`);return o(t,r,e,n)}function Ce(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Te(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],r=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==r.type)return n.type.compare(r.type);const i=n.type.major,o=be[i].compareTokens(n,r);return 0===o&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function Me(t,e,n,r){if(Array.isArray(e))for(const i of e)Me(t,i,n,r);else n[e.type.major](t,e,r)}function Ie(t,e,n){const r=xe(t,n);if(!Array.isArray(r)&&n.quickEncodeToken){const t=n.quickEncodeToken(r);if(t)return t;const i=e[r.type.major];if(i.encodedSize){const t=i.encodedSize(r,n),e=new z(t);if(i(e,r,n),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return T(e.chunks[0])}}return _e.reset(),Me(_e,r,e,n),_e.toBytes(!0)}function ke(t,e){return e=Object.assign({},ve,e),Ie(t,be,e)}const Oe={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Re{constructor(t,e={}){this.pos=0,this.data=t,this.options=e}done(){return this.pos>=this.data.length}next(){const t=this.data[this.pos];let e=ge[t];if(void 0===e){const n=me[t];if(!n)throw new Error(`${V} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const r=31&t;e=n(this.data,this.pos,r,this.options)}return this.pos+=e.encodedLength,e}}const De=Symbol.for("DONE"),Ne=Symbol.for("BREAK");function Pe(t,e,n){const r=[];for(let i=0;i<t.value;i++){const o=Be(e,n);if(o===Ne){if(t.value===1/0)break;throw new Error(`${V} got unexpected break to lengthed array`)}if(o===De)throw new Error(`${V} found array but not enough entries (got ${i}, expected ${t.value})`);r[i]=o}return r}function Le(t,e,n){const r=!0===n.useMaps,i=r?void 0:{},o=r?new Map:void 0;for(let s=0;s<t.value;s++){const a=Be(e,n);if(a===Ne){if(t.value===1/0)break;throw new Error(`${V} got unexpected break to lengthed map`)}if(a===De)throw new Error(`${V} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${V} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&o.has(a)||!r&&a in i))throw new Error(`${V} found repeat map key "${a}"`);const l=Be(e,n);if(l===De)throw new Error(`${V} found map but not enough entries (got ${s} [no value], expected ${t.value})`);r?o.set(a,l):i[a]=l}return r?o:i}function Be(t,e){if(t.done())return De;const n=t.next();if(n.type===_["break"])return Ne;if(n.type.terminal)return n.value;if(n.type===_.array)return Pe(n,t,e);if(n.type===_.map)return Le(n,t,e);if(n.type===_.tag){if(e.tags&&"function"===typeof e.tags[n.value]){const r=Be(t,e);return e.tags[n.value](r)}throw new Error(`${V} tag not supported (${n.value})`)}throw new Error("unsupported")}function Ue(t,e){if(!(t instanceof Uint8Array))throw new Error(`${V} data to decode must be a Uint8Array`);e=Object.assign({},Oe,e);const n=e.tokenizer||new Re(t,e),r=Be(n,e);if(r===De)throw new Error(`${V} did not find any content to decode`);if(r===Ne)throw new Error(`${V} got unexpected break`);if(!n.done())throw new Error(`${V} too many terminals, data makes no sense`);return r}const Fe=42;function ze(t){if(t.asCID!==t)return null;const e=p.k.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new S(_.tag,Fe),new S(_.bytes,n)]}function Ve(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function He(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const je={float64:!0,typeEncoders:{Object:ze,undefined:Ve,number:He}};function We(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return p.k.decode(t.subarray(1))}const Ge={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ge.tags[Fe]=We;const $e=113,qe=t=>ke(t,je),Ye=t=>Ue(t,Ge),Xe={SHA2_256:18,LENGTH:32,DAG_PB:112};async function Ze(t){const e=await t.upTo(8),n=f.decode(e);return t.seek(f.decode.bytes),n}async function Ke(t){const e=await Ze(t);if(0===e)throw new Error("Invalid CAR header (zero length)");const n=await t.exactly(e);t.seek(e);const r=Ye(n);if(null==r||Array.isArray(r)||"object"!==typeof r)throw new Error("Invalid CAR header format");if(1!==r.version){if("string"===typeof r.version)throw new Error(`Invalid CAR version: "${r.version}"`);throw new Error(`Invalid CAR version: ${r.version}`)}if(!Array.isArray(r.roots))throw new Error("Invalid CAR header format");if(Object.keys(r).filter((t=>"roots"!==t&&"version"!==t)).length)throw new Error("Invalid CAR header format");return r}async function Je(t){const e=await t.upTo(8);f.decode(e);const n=f.decode.bytes,r=f.decode(e.subarray(f.decode.bytes)),i=f.decode.bytes,o=n+i+r,s=await t.exactly(o);return t.seek(o),s}async function Qe(t){const e=await t.exactly(2);if(e[0]===Xe.SHA2_256&&e[1]===Xe.LENGTH){const e=await t.exactly(34);t.seek(34);const n=m.Jx(e);return p.k.create(0,Xe.DAG_PB,n)}const n=await Ze(t);if(1!==n)throw new Error(`Unexpected CID version (${n})`);const r=await Ze(t),i=await Je(t),o=m.Jx(i);return p.k.create(n,r,o)}async function tn(t){const e=t.pos;let n=await Ze(t);if(0===n)throw new Error("Invalid CAR section (zero length)");n+=t.pos-e;const r=await Qe(t),i=n-(t.pos-e);return{cid:r,length:n,blockLength:i}}async function en(t){const{cid:e,blockLength:n}=await tn(t),r=await t.exactly(n);return t.seek(n),{bytes:r,cid:e}}async function nn(t){const e=t.pos,{cid:n,length:r,blockLength:i}=await tn(t),o={cid:n,length:r,blockLength:i,offset:e,blockOffset:t.pos};return t.seek(o.blockLength),o}function rn(t){const e=Ke(t);return{header:()=>e,async*blocks(){await e;while((await t.upTo(8)).length>0)yield await en(t)},async*blocksIndex(){await e;while((await t.upTo(8)).length>0)yield await nn(t)}}}function on(t){let e=0;return{async upTo(n){return t.subarray(e,e+Math.min(n,t.length-e))},async exactly(n){if(n>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+n)},seek(t){e+=t},get pos(){return e}}}function sn(t){let e=0,n=0,r=0,i=new Uint8Array(0);const o=async e=>{n=i.length-r;const o=[i.subarray(r)];while(n<e){const e=await t();if(null==e)break;n<0?e.length>n&&o.push(e.subarray(-n)):o.push(e),n+=e.length}i=new Uint8Array(o.reduce(((t,e)=>t+e.length),0));let s=0;for(const t of o)i.set(t,s),s+=t.length;r=0};return{async upTo(t){return i.length-r<t&&await o(t),i.subarray(r,r+Math.min(i.length-r,t))},async exactly(t){if(i.length-r<t&&await o(t),i.length-r<t)throw new Error("Unexpected end of data");return i.subarray(r,r+t)},seek(t){e+=t,r+=t},get pos(){return e}}}function an(t){const e=t[Symbol.asyncIterator]();async function n(){const t=await e.next();return t.done?null:t.value}return sn(n)}class ln{constructor(t,e,n){this._version=t,this._roots=e,this._blocks=n,this._keys=n.map((t=>t.cid.toString()))}get version(){return this._version}async getRoots(){return this._roots}async has(t){return this._keys.indexOf(t.toString())>-1}async get(t){const e=this._keys.indexOf(t.toString());return e>-1?this._blocks[e]:void 0}async*blocks(){for(const t of this._blocks)yield t}async*cids(){for(const t of this._blocks)yield t.cid}static async fromBytes(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return cn(on(t))}static async fromIterable(t){if(!t||"function"!==typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return cn(an(t))}}async function cn(t){const e=rn(t),{version:n,roots:r}=await e.header(),i=[];for await(const o of e.blocks())i.push(o);return new ln(n,r,i)}class un{constructor(t,e,n){this._version=t,this._roots=e,this._iterator=n}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeIndexerComplete(bytesReader(t))}static async fromIterable(t){if(!t||"function"!==typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return decodeIndexerComplete(asyncIterableReader(t))}}class hn{constructor(t,e,n){this._version=t,this._roots=e,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class dn extends hn{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(t){const{version:e,roots:n,iterator:r}=await pn(t);return new dn(e,n,r)}static async fromIterable(t){const{version:e,roots:n,iterator:r}=await mn(t);return new dn(e,n,r)}}class fn extends(null){[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;const t=this._iterable[Symbol.asyncIterator]();return{async next(){const e=await t.next();return e.done?e:{done:!1,value:e.value.cid}}}}static async fromBytes(t){const{version:e,roots:n,iterator:r}=await pn(t);return new fn(e,n,r)}static async fromIterable(t){const{version:e,roots:n,iterator:r}=await mn(t);return new fn(e,n,r)}}async function pn(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return gn(on(t))}async function mn(t){if(!t||"function"!==typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return gn(an(t))}async function gn(t){const e=rn(t),{version:n,roots:r}=await e.header();return{version:n,roots:r,iterator:e.blocks()}}function yn(t){const e=qe({version:1,roots:t}),n=f.encode(e.length),r=new Uint8Array(n.length+e.length);return r.set(n,0),r.set(e,n.length),r}function vn(t){return{async setRoots(e){const n=yn(e);await t.write(n)},async writeBlock(e){const{cid:n,bytes:r}=e;await t.write(new Uint8Array(f.encode(n.bytes.length+r.length))),await t.write(n.bytes),r.length&&await t.write(r)},async close(){return t.end()}}}function wn(){}function bn(){const t=[];let e=null,n=wn,r=!1,i=null,o=wn;const s=()=>(e||(e=new Promise((t=>{n=()=>{e=null,n=wn,t()}}))),e),a={write(e){t.push(e);const n=s();return o(),n},async end(){r=!0;const t=s();return o(),t}},l={async next(){const e=t.shift();return e?(0===t.length&&n(),{done:!1,value:e}):r?(n(),{done:!0,value:void 0}):(i||(i=new Promise((t=>{o=()=>(i=null,o=wn,t(l.next()))}))),i)}};return{writer:a,iterator:l}}class _n{constructor(t,e){this._encoder=e,this._mutex=e.setRoots(t),this._ended=!1}async put(t){if(!(t.bytes instanceof Uint8Array)||!t.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const e=p.k.asCID(t.cid);if(!e)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:e,bytes:t.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(t){t=An(t);const{encoder:e,iterator:n}=En(),r=new _n(t,e),i=new Sn(n);return{writer:r,out:i}}static createAppender(){const{encoder:t,iterator:e}=En();t.setRoots=()=>Promise.resolve();const n=new _n([],t),r=new Sn(e);return{writer:n,out:r}}static async updateRootsInBytes(t,e){const n=on(t);await Ke(n);const r=yn(e);if(n.pos!==r.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${r.length} bytes)`);return t.set(r,0),t}}class Sn{constructor(t){this._iterator=t}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function En(){const t=bn(),{writer:e,iterator:n}=t,r=vn(e);return{encoder:r,iterator:n}}function An(t){if(void 0===t)return[];if(!Array.isArray(t)){const e=p.k.asCID(t);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");return[e]}const e=[];for(const n of t){const t=p.k.asCID(n);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(t)}return e}var xn=n(8806),Cn=n(535),Tn=Cn,Mn=n(1919),In=n(8212),kn=n(2493),On=n(716);function Rn(t){const e=new Array(4);for(let n=0;n<4;n++)e[n]=255&t,t>>=8;return new Uint8Array(e)}(0,In.D)({name:"murmur3-32",code:35,encode:t=>Rn(On.x86.hash32(t))});const Dn=(0,In.D)({name:"murmur3-128",code:34,encode:t=>kn.aI.fromHex(On.x64.hash128(t))});async function Nn(t){return(await Dn.encode(t)).slice(0,8).reverse()}const Pn={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Mn.sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:Nn,hamtHashCode:34,hamtBucketBits:8};var Ln=(t={})=>{const e=Tn.bind({ignoreUndefined:!0});return e(Pn,t)},Bn=n(9998),Un=n(6425);const Fn=Un.Reader,zn=Un.Writer,Vn=Un.util,Hn=Un.roots["ipfs-unixfs"]||(Un.roots["ipfs-unixfs"]={}),jn=Hn.Data=(()=>{function t(t){if(this.blocksizes=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.Type=0,t.prototype.Data=Vn.newBuffer([]),t.prototype.filesize=Vn.Long?Vn.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=Vn.emptyArray,t.prototype.hashType=Vn.Long?Vn.Long.fromBits(0,0,!0):0,t.prototype.fanout=Vn.Long?Vn.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(t,e){if(e||(e=zn.create()),e.uint32(8).int32(t.Type),null!=t.Data&&Object.hasOwnProperty.call(t,"Data")&&e.uint32(18).bytes(t.Data),null!=t.filesize&&Object.hasOwnProperty.call(t,"filesize")&&e.uint32(24).uint64(t.filesize),null!=t.blocksizes&&t.blocksizes.length)for(var n=0;n<t.blocksizes.length;++n)e.uint32(32).uint64(t.blocksizes[n]);return null!=t.hashType&&Object.hasOwnProperty.call(t,"hashType")&&e.uint32(40).uint64(t.hashType),null!=t.fanout&&Object.hasOwnProperty.call(t,"fanout")&&e.uint32(48).uint64(t.fanout),null!=t.mode&&Object.hasOwnProperty.call(t,"mode")&&e.uint32(56).uint32(t.mode),null!=t.mtime&&Object.hasOwnProperty.call(t,"mtime")&&Hn.UnixTime.encode(t.mtime,e.uint32(66).fork()).ldelim(),e},t.decode=function(t,e){t instanceof Fn||(t=Fn.create(t));var n=void 0===e?t.len:t.pos+e,r=new Hn.Data;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:r.Type=t.int32();break;case 2:r.Data=t.bytes();break;case 3:r.filesize=t.uint64();break;case 4:if(r.blocksizes&&r.blocksizes.length||(r.blocksizes=[]),2===(7&i)){var o=t.uint32()+t.pos;while(t.pos<o)r.blocksizes.push(t.uint64())}else r.blocksizes.push(t.uint64());break;case 5:r.hashType=t.uint64();break;case 6:r.fanout=t.uint64();break;case 7:r.mode=t.uint32();break;case 8:r.mtime=Hn.UnixTime.decode(t,t.uint32());break;default:t.skipType(7&i);break}}if(!r.hasOwnProperty("Type"))throw Vn.ProtocolError("missing required 'Type'",{instance:r});return r},t.fromObject=function(t){if(t instanceof Hn.Data)return t;var e=new Hn.Data;switch(t.Type){case"Raw":case 0:e.Type=0;break;case"Directory":case 1:e.Type=1;break;case"File":case 2:e.Type=2;break;case"Metadata":case 3:e.Type=3;break;case"Symlink":case 4:e.Type=4;break;case"HAMTShard":case 5:e.Type=5;break}if(null!=t.Data&&("string"===typeof t.Data?Vn.base64.decode(t.Data,e.Data=Vn.newBuffer(Vn.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),null!=t.filesize&&(Vn.Long?(e.filesize=Vn.Long.fromValue(t.filesize)).unsigned=!0:"string"===typeof t.filesize?e.filesize=parseInt(t.filesize,10):"number"===typeof t.filesize?e.filesize=t.filesize:"object"===typeof t.filesize&&(e.filesize=new Vn.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");e.blocksizes=[];for(var n=0;n<t.blocksizes.length;++n)Vn.Long?(e.blocksizes[n]=Vn.Long.fromValue(t.blocksizes[n])).unsigned=!0:"string"===typeof t.blocksizes[n]?e.blocksizes[n]=parseInt(t.blocksizes[n],10):"number"===typeof t.blocksizes[n]?e.blocksizes[n]=t.blocksizes[n]:"object"===typeof t.blocksizes[n]&&(e.blocksizes[n]=new Vn.LongBits(t.blocksizes[n].low>>>0,t.blocksizes[n].high>>>0).toNumber(!0))}if(null!=t.hashType&&(Vn.Long?(e.hashType=Vn.Long.fromValue(t.hashType)).unsigned=!0:"string"===typeof t.hashType?e.hashType=parseInt(t.hashType,10):"number"===typeof t.hashType?e.hashType=t.hashType:"object"===typeof t.hashType&&(e.hashType=new Vn.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),null!=t.fanout&&(Vn.Long?(e.fanout=Vn.Long.fromValue(t.fanout)).unsigned=!0:"string"===typeof t.fanout?e.fanout=parseInt(t.fanout,10):"number"===typeof t.fanout?e.fanout=t.fanout:"object"===typeof t.fanout&&(e.fanout=new Vn.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),null!=t.mode&&(e.mode=t.mode>>>0),null!=t.mtime){if("object"!==typeof t.mtime)throw TypeError(".Data.mtime: object expected");e.mtime=Hn.UnixTime.fromObject(t.mtime)}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.blocksizes=[]),e.defaults){if(n.Type=e.enums===String?"Raw":0,e.bytes===String?n.Data="":(n.Data=[],e.bytes!==Array&&(n.Data=Vn.newBuffer(n.Data))),Vn.Long){var r=new Vn.Long(0,0,!0);n.filesize=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.filesize=e.longs===String?"0":0;if(Vn.Long){r=new Vn.Long(0,0,!0);n.hashType=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.hashType=e.longs===String?"0":0;if(Vn.Long){r=new Vn.Long(0,0,!0);n.fanout=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.fanout=e.longs===String?"0":0;n.mode=0,n.mtime=null}if(null!=t.Type&&t.hasOwnProperty("Type")&&(n.Type=e.enums===String?Hn.Data.DataType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(n.Data=e.bytes===String?Vn.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),null!=t.filesize&&t.hasOwnProperty("filesize")&&("number"===typeof t.filesize?n.filesize=e.longs===String?String(t.filesize):t.filesize:n.filesize=e.longs===String?Vn.Long.prototype.toString.call(t.filesize):e.longs===Number?new Vn.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){n.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)"number"===typeof t.blocksizes[i]?n.blocksizes[i]=e.longs===String?String(t.blocksizes[i]):t.blocksizes[i]:n.blocksizes[i]=e.longs===String?Vn.Long.prototype.toString.call(t.blocksizes[i]):e.longs===Number?new Vn.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0):t.blocksizes[i]}return null!=t.hashType&&t.hasOwnProperty("hashType")&&("number"===typeof t.hashType?n.hashType=e.longs===String?String(t.hashType):t.hashType:n.hashType=e.longs===String?Vn.Long.prototype.toString.call(t.hashType):e.longs===Number?new Vn.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),null!=t.fanout&&t.hasOwnProperty("fanout")&&("number"===typeof t.fanout?n.fanout=e.longs===String?String(t.fanout):t.fanout:n.fanout=e.longs===String?Vn.Long.prototype.toString.call(t.fanout):e.longs===Number?new Vn.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),null!=t.mode&&t.hasOwnProperty("mode")&&(n.mode=t.mode),null!=t.mtime&&t.hasOwnProperty("mtime")&&(n.mtime=Hn.UnixTime.toObject(t.mtime,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Un.util.toJSONOptions)},t.DataType=function(){const t={},e=Object.create(t);return e[t[0]="Raw"]=0,e[t[1]="Directory"]=1,e[t[2]="File"]=2,e[t[3]="Metadata"]=3,e[t[4]="Symlink"]=4,e[t[5]="HAMTShard"]=5,e}(),t})(),Wn=(Hn.UnixTime=(()=>{function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.Seconds=Vn.Long?Vn.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(t,e){return e||(e=zn.create()),e.uint32(8).int64(t.Seconds),null!=t.FractionalNanoseconds&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&e.uint32(21).fixed32(t.FractionalNanoseconds),e},t.decode=function(t,e){t instanceof Fn||(t=Fn.create(t));var n=void 0===e?t.len:t.pos+e,r=new Hn.UnixTime;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:r.Seconds=t.int64();break;case 2:r.FractionalNanoseconds=t.fixed32();break;default:t.skipType(7&i);break}}if(!r.hasOwnProperty("Seconds"))throw Vn.ProtocolError("missing required 'Seconds'",{instance:r});return r},t.fromObject=function(t){if(t instanceof Hn.UnixTime)return t;var e=new Hn.UnixTime;return null!=t.Seconds&&(Vn.Long?(e.Seconds=Vn.Long.fromValue(t.Seconds)).unsigned=!1:"string"===typeof t.Seconds?e.Seconds=parseInt(t.Seconds,10):"number"===typeof t.Seconds?e.Seconds=t.Seconds:"object"===typeof t.Seconds&&(e.Seconds=new Vn.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),null!=t.FractionalNanoseconds&&(e.FractionalNanoseconds=t.FractionalNanoseconds>>>0),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(Vn.Long){var r=new Vn.Long(0,0,!1);n.Seconds=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.Seconds=e.longs===String?"0":0;n.FractionalNanoseconds=0}return null!=t.Seconds&&t.hasOwnProperty("Seconds")&&("number"===typeof t.Seconds?n.Seconds=e.longs===String?String(t.Seconds):t.Seconds:n.Seconds=e.longs===String?Vn.Long.prototype.toString.call(t.Seconds):e.longs===Number?new Vn.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),null!=t.FractionalNanoseconds&&t.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=t.FractionalNanoseconds),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Un.util.toJSONOptions)},t})(),Hn.Metadata=(()=>{function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.MimeType="",t.encode=function(t,e){return e||(e=zn.create()),null!=t.MimeType&&Object.hasOwnProperty.call(t,"MimeType")&&e.uint32(10).string(t.MimeType),e},t.decode=function(t,e){t instanceof Fn||(t=Fn.create(t));var n=void 0===e?t.len:t.pos+e,r=new Hn.Metadata;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:r.MimeType=t.string();break;default:t.skipType(7&i);break}}return r},t.fromObject=function(t){if(t instanceof Hn.Metadata)return t;var e=new Hn.Metadata;return null!=t.MimeType&&(e.MimeType=String(t.MimeType)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.MimeType=""),null!=t.MimeType&&t.hasOwnProperty("MimeType")&&(n.MimeType=t.MimeType),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Un.util.toJSONOptions)},t})(),jn),Gn=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],$n=["directory","hamt-sharded-directory"],qn=parseInt("0644",8),Yn=parseInt("0755",8);function Xn(t){if(null!=t)return"number"===typeof t?4095&t:(t=t.toString(),"0"===t.substring(0,1)?4095&parseInt(t,8):4095&parseInt(t,10))}function Zn(t){if(null==t)return;let e;if(null!=t.secs&&(e={secs:t.secs,nsecs:t.nsecs}),null!=t.Seconds&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const n=t.getTime(),r=Math.floor(n/1e3);e={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e&&null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw Bn(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}class Kn{static unmarshal(t){const e=Wn.decode(t),n=Wn.toObject(e,{defaults:!1,arrays:!0,longs:Number,objects:!1}),r=new Kn({type:Gn[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return r._originalMode=n.mode||0,r}constructor(t={type:"file"}){const{type:e,data:n,blockSizes:r,hashType:i,fanout:o,mtime:s,mode:a}=t;if(e&&!Gn.includes(e))throw Bn(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE");this.type=e||"file",this.data=n,this.hashType=i,this.fanout=o,this.blockSizes=r||[],this._originalMode=0,this.mode=Xn(a),s&&(this.mtime=Zn(s),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(t){this._mode=this.isDirectory()?Yn:qn;const e=Xn(t);void 0!==e&&(this._mode=e)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&$n.includes(this.type))}addBlockSize(t){this.blockSizes.push(t)}removeBlockSize(t){this.blockSizes.splice(t,1)}fileSize(){if(this.isDirectory())return 0;let t=0;return this.blockSizes.forEach((e=>{t+=e})),this.data&&(t+=this.data.length),t}marshal(){let t;switch(this.type){case"raw":t=Wn.DataType.Raw;break;case"directory":t=Wn.DataType.Directory;break;case"file":t=Wn.DataType.File;break;case"metadata":t=Wn.DataType.Metadata;break;case"symlink":t=Wn.DataType.Symlink;break;case"hamt-sharded-directory":t=Wn.DataType.HAMTShard;break;default:throw Bn(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}let e,n,r=this.data;if(this.data&&this.data.length||(r=void 0),null!=this.mode&&(e=4294963200&this._originalMode|(Xn(this.mode)||0),e!==qn||this.isDirectory()||(e=void 0),e===Yn&&this.isDirectory()&&(e=void 0)),null!=this.mtime){const t=Zn(this.mtime);t&&(n={Seconds:t.secs,FractionalNanoseconds:t.nsecs},0===n.FractionalNanoseconds&&delete n.FractionalNanoseconds)}const i={Type:t,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:e,mtime:n};return Wn.encode(i).finish()}}const Jn=new TextDecoder;function Qn(t,e){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(n+=r<28?(127&i)<<r:(127&i)*2**r,i<128)break}return[n,e]}function tr(t,e){let n;[n,e]=Qn(t,e);const r=e+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,r),r]}function er(t,e){let n;return[n,e]=Qn(t,e),[7&n,n>>3,e]}function nr(t){const e={},n=t.length;let r=0;while(r<n){let n,i;if([n,i,r]=er(t,r),1===i){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==e.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,r]=tr(t,r)}else if(2===i){if(void 0!==e.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,r]=tr(t,r),e.Name=Jn.decode(i)}else{if(3!==i)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[e.Tsize,r]=Qn(t,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function rr(t){const e=t.length;let n,r,i=0,o=!1;while(i<e){let e,s;if([e,s,i]=er(t,i),2!==e)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${e}`);if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,i]=tr(t,i),n&&(o=!0)}else{if(2!==s)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${s}`);{if(o)throw new Error("protobuf: (PBNode) duplicate Links section");let e;n||(n=[]),[e,i]=tr(t,i),n.push(nr(e))}}}if(i>e)throw new Error("protobuf: (PBNode) unexpected end of data");const s={};return r&&(s.Data=r),s.Links=n||[],s}const ir=new TextEncoder,or=2**32,sr=2**31;function ar(t,e){let n=e.length;if("number"===typeof t.Tsize){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");n=hr(e,n,t.Tsize)-1,e[n]=24}if("string"===typeof t.Name){const r=ir.encode(t.Name);n-=r.length,e.set(r,n),n=hr(e,n,r.length)-1,e[n]=18}return t.Hash&&(n-=t.Hash.length,e.set(t.Hash,n),n=hr(e,n,t.Hash.length)-1,e[n]=10),e.length-n}function lr(t){const e=ur(t),n=new Uint8Array(e);let r=e;if(t.Data&&(r-=t.Data.length,n.set(t.Data,r),r=hr(n,r,t.Data.length)-1,n[r]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const e=ar(t.Links[i],n.subarray(0,r));r-=e,r=hr(n,r,e)-1,n[r]=18}return n}function cr(t){let e=0;if(t.Hash){const n=t.Hash.length;e+=1+n+dr(n)}if("string"===typeof t.Name){const n=ir.encode(t.Name).length;e+=1+n+dr(n)}return"number"===typeof t.Tsize&&(e+=1+dr(t.Tsize)),e}function ur(t){let e=0;if(t.Data){const n=t.Data.length;e+=1+n+dr(n)}if(t.Links)for(const n of t.Links){const t=cr(n);e+=1+t+dr(t)}return e}function hr(t,e,n){e-=dr(n);const r=e;while(n>=sr)t[e++]=127&n|128,n/=128;while(n>=128)t[e++]=127&n|128,n>>>=7;return t[e]=n,r}function dr(t){return t%2===0&&t++,Math.floor((fr(t)+6)/7)}function fr(t){let e=0;return t>=or&&(t=Math.floor(t/or),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+pr[t]}const pr=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],mr=["Data","Links"],gr=["Hash","Name","Tsize"],yr=new TextEncoder;function vr(t,e){if(t===e)return 0;const n=t.Name?yr.encode(t.Name):[],r=e.Name?yr.encode(e.Name):[];let i=n.length,o=r.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(n[s]!==r[s]){i=n[s],o=r[s];break}return i<o?-1:o<i?1:0}function wr(t,e){return!Object.keys(t).some((t=>!e.includes(t)))}function br(t){if("object"===typeof t.asCID){const e=p.k.asCID(t);if(!e)throw new TypeError("Invalid DAG-PB form");return{Hash:e}}if("object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=p.k.asCID(t.Hash);try{r||("string"===typeof t.Hash?r=p.k.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=p.k.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof t.Name&&(e.Name=t.Name),"number"===typeof t.Tsize&&(e.Tsize=t.Tsize),e}function _r(t){if((t instanceof Uint8Array||"string"===typeof t)&&(t={Data:t}),"object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(void 0!==t.Data)if("string"===typeof t.Data)e.Data=yr.encode(t.Data);else{if(!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");e.Data=t.Data}if(void 0!==t.Links){if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form");e.Links=t.Links.map(br),e.Links.sort(vr)}else e.Links=[];return e}function Sr(t){if(!t||"object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!wr(t,mr))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==t.Data&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const n=t.Links[e];if(!n||"object"!==typeof n||Array.isArray(n))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!wr(n,gr))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash.asCID!==n.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!==typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize&&("number"!==typeof n.Tsize||n.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&-1===vr(n,t.Links[e-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Er(t,e=[]){return _r({Data:t,Links:e})}function Ar(t,e,n){return br({Hash:n,Name:t,Tsize:e})}const xr="dag-pb",Cr=112;function Tr(t){Sr(t);const e={};return t.Links&&(e.Links=t.Links.map((t=>{const e={};return t.Hash&&(e.Hash=t.Hash.bytes),void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),t.Data&&(e.Data=t.Data),lr(e)}function Mr(t){const e=rr(t),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map((t=>{const e={};try{e.Hash=p.k.decode(t.Hash)}catch(n){}if(!e.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),n}const Ir=async(t,e,n)=>{n.codec||(n.codec=r),n.hasher||(n.hasher=Mn.sha256),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===r&&n.hasher!==Mn.sha256&&(n.cidVersion=1);const i=await n.hasher.digest(t),o=p.k.create(n.cidVersion,n.codec.code,i);return n.onlyHash||await e.put(o,t,{signal:n.signal}),o};var kr=Ir;const Or=async(t,e,n)=>{const r=new Kn({type:"directory",mtime:t.mtime,mode:t.mode}),i=Tr(_r({Data:r.marshal()})),o=await kr(i,e,n),s=t.path;return{cid:o,path:s,unixfs:r,size:i.length}};var Rr=Or,Dr=n(6347),Nr=n(7192);async function Pr(t,e){return e(await Nr(t))}var Lr=Pr,Br=n(1131);function Ur(t,e,n){return Fr(t,e,n)}async function Fr(t,e,n){const r=[];for await(const i of Br(t,n.maxChildrenPerNode))r.push(await e(i));return r.length>1?Fr(r,e,n):r[0]}var zr=Ur;async function Vr(t,e,n){const r=new Wr(n.layerRepeat);let i=0,o=1,s=r;for await(const a of Br(t,n.maxChildrenPerNode))s.isFull()&&(s!==r&&r.addChild(await s.reduce(e)),i&&i%n.layerRepeat===0&&o++,s=new jr(o,n.layerRepeat,i),i++),s.append(a);return s&&s!==r&&r.addChild(await s.reduce(e)),r.reduce(e)}var Hr=Vr;class jr{constructor(t,e,n=0){this.maxDepth=t,this.layerRepeat=e,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const t=this._findParent(this.node,this.currentDepth);return!t||(this._addNextNodeToParent(t),!1)}_addNextNodeToParent(t){this.parent=t;const e={children:[],depth:t.depth+1,parent:t,maxDepth:this.maxDepth,maxChildren:Math.floor(t.children.length/this.layerRepeat)*this.layerRepeat};t.children.push(e),this.currentDepth=e.depth,this.node=e}append(t){this.node.data=t}reduce(t){return this._reduce(this.root,t)}async _reduce(t,e){let n=[];return t.children.length&&(n=await Promise.all(t.children.filter((t=>t.data)).map((t=>this._reduce(t,e))))),e((t.data||[]).concat(n))}_findParent(t,e){const n=t.parent;if(n&&0!==n.depth)return n.children.length!==n.maxChildren&&n.maxChildren?n:this._findParent(n,e)}}class Wr extends jr{constructor(t){super(0,t),this.root.depth=0,this.currentDepth=1}addChild(t){this.root.children.push(t)}reduce(t){return t((this.root.data||[]).concat(this.root.children))}}async function*Gr(t,e,n){for await(let i of t.content)yield async()=>{let o;n.progress(i.length,t.path);const s={codec:r,cidVersion:n.cidVersion,hasher:n.hasher,onlyHash:n.onlyHash};return n.rawLeaves?(s.codec=Dr,s.cidVersion=1):(o=new Kn({type:n.leafType,data:i}),i=Tr({Data:o.marshal(),Links:[]})),{cid:await kr(i,e,s),unixfs:o,size:i.length}}}var $r=Gr;const qr={flat:Lr,balanced:zr,trickle:Hr};async function*Yr(t,e,n){let r,i,o=-1;i="function"===typeof n.bufferImporter?n.bufferImporter:$r;for await(const s of xn(i(t,e,n),n.blockWriteConcurrency))o++,0!==o?(1===o&&r&&(yield r,r=null),yield s):r=s;r&&(r.single=!0,yield r)}const Xr=(t,e,n)=>{async function i(i){if(1===i.length&&i[0].single&&n.reduceSingleLeafToSelf){const o=i[0];if(void 0!==t.mtime||void 0!==t.mode){let i=await e.get(o.cid);o.unixfs=new Kn({type:"file",mtime:t.mtime,mode:t.mode,data:i}),i=Tr(_r({Data:o.unixfs.marshal()})),o.cid=await kr(i,e,{...n,codec:r,hasher:n.hasher,cidVersion:n.cidVersion}),o.size=i.length}return{cid:o.cid,path:t.path,unixfs:o.unixfs,size:o.size}}const o=new Kn({type:"file",mtime:t.mtime,mode:t.mode}),s=i.filter((t=>!(t.cid.code!==Dr.code||!t.size)||(!(!t.unixfs||t.unixfs.data||!t.unixfs.fileSize())||Boolean(t.unixfs&&t.unixfs.data&&t.unixfs.data.length)))).map((t=>t.cid.code===Dr.code?(o.addBlockSize(t.size),{Name:"",Tsize:t.size,Hash:t.cid}):(t.unixfs&&t.unixfs.data?o.addBlockSize(t.unixfs.data.length):o.addBlockSize(t.unixfs&&t.unixfs.fileSize()||0),{Name:"",Tsize:t.size,Hash:t.cid}))),a={Data:o.marshal(),Links:s},l=Tr(_r(a)),c=await kr(l,e,n);return{cid:c,path:t.path,unixfs:o,size:l.length+a.Links.reduce(((t,e)=>t+e.Tsize),0)}}return i};function Zr(t,e,n){const r=qr[n.strategy];if(!r)throw Bn(new Error(`Unknown importer build strategy name: ${n.strategy}`),"ERR_BAD_STRATEGY");return r(Yr(t,e,n),Xr(t,e,n),n)}var Kr=Zr,Jr=n(9051),Qr=n(7393);async function*ti(t,e){let n,r,i;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)i=e.avgChunkSize,n=e.minChunkSize,r=e.maxChunkSize;else{if(!e.avgChunkSize)throw Bn(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");i=e.avgChunkSize,n=i/3,r=i+i/2}if(n<16)throw Bn(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");r<n&&(r=n),i<n&&(i=n);const o=Math.floor(Math.log2(i));for await(const s of ni(t,{min:n,max:r,bits:o,window:e.window,polynomial:e.polynomial}))yield s}var ei=ti;async function*ni(t,e){const n=await(0,Qr.create)(e.bits,e.min,e.max,e.window),r=new Jr;for await(const i of t){r.append(i);const t=n.fingerprint(i);for(let e=0;e<t.length;e++){const n=t[e],i=r.slice(0,n);r.consume(n),yield i}}r.length&&(yield r.slice(0))}async function*ri(t,e){let n=new Jr,r=0,i=!1;const o=e.maxChunkSize;for await(const s of t){n.append(s),r+=s.length;while(r>=o)if(yield n.slice(0,o),i=!0,o===n.length)n=new Jr,r=0;else{const t=new Jr;t.append(n.shallowSlice(o)),n=t,r-=o}}i&&!r||(yield n.slice(0,r))}var ii=ri,oi=n(6555);async function*si(t){for await(const e of t){if(void 0===e.length)throw Bn(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"===typeof e||e instanceof String)yield(0,oi.fromString)(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else{if(!(e instanceof Uint8Array))throw Bn(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield e}}}var ai=si;function li(t){return Symbol.iterator in t}function ci(t){return Symbol.asyncIterator in t}function ui(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(li(t))return async function*(){yield*t}();if(ci(t))return t}catch{throw Bn(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw Bn(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*hi(t,e,n){for await(const r of t)if(r.path&&("./"===r.path.substring(0,2)&&(n.wrapWithDirectory=!0),r.path=r.path.split("/").filter((t=>t&&"."!==t)).join("/")),r.content){let t,i;t="function"===typeof n.chunker?n.chunker:"rabin"===n.chunker?ei:ii,i="function"===typeof n.chunkValidator?n.chunkValidator:ai;const o={path:r.path,mtime:r.mtime,mode:r.mode,content:t(i(ui(r.content),n),n)};yield()=>Kr(o,e,n)}else{if(!r.path)throw new Error("Import candidate must have content or path or both");{const t={path:r.path,mtime:r.mtime,mode:r.mode};yield()=>Rr(t,e,n)}}}var di=hi;class fi{constructor(t,e){this.options=e||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}async put(t,e){}get(t){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(t){}}var pi=fi;class mi extends pi{constructor(t,e){super(t,e),this._children={}}async put(t,e){this.cid=void 0,this.size=void 0,this._children[t]=e}get(t){return Promise.resolve(this._children[t])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const t=Object.keys(this._children);for(let e=0;e<t.length;e++){const n=t[e];yield{key:n,child:this._children[n]}}}async*flush(t){const e=Object.keys(this._children),n=[];for(let l=0;l<e.length;l++){let r=this._children[e[l]];if(r instanceof pi)for await(const e of r.flush(t))r=e,yield r;null!=r.size&&r.cid&&n.push({Name:e[l],Tsize:r.size,Hash:r.cid})}const r=new Kn({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:r.marshal(),Links:n},o=Tr(_r(i)),s=await kr(o,t,this.options),a=o.length+i.Links.reduce(((t,e)=>t+(null==e.Tsize?0:e.Tsize)),0);this.cid=s,this.size=a,yield{cid:s,unixfs:r,path:this.path,size:a}}}var gi=mi,yi=n(9800);class vi extends pi{constructor(t,e){super(t,e),this._bucket=(0,yi.createHAMT)({hashFn:e.hamtHashFn,bits:e.hamtBucketBits})}async put(t,e){await this._bucket.put(t,e)}get(t){return this._bucket.get(t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:t,value:e}of this._bucket.eachLeafSeries())yield{key:t,child:e}}async*flush(t){for await(const e of bi(this._bucket,t,this,this.options))yield{...e,path:this.path}}}var wi=vi;async function*bi(t,e,n,r){const i=t._children,o=[];let s=0;for(let f=0;f<i.length;f++){const t=i.get(f);if(!t)continue;const n=f.toString(16).toUpperCase().padStart(2,"0");if(t instanceof yi.Bucket){let i;for await(const n of await bi(t,e,null,r))i=n;if(!i)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:n,Tsize:i.size,Hash:i.cid}),s+=i.size}else if("function"===typeof t.value.flush){const r=t.value;let i;for await(const t of r.flush(e))i=t,yield i;const a=n+t.key;o.push({Name:a,Tsize:i.size,Hash:i.cid}),s+=i.size}else{const e=t.value;if(!e.cid)continue;const r=n+t.key,i=e.size;o.push({Name:r,Tsize:i,Hash:e.cid}),s+=i}}const a=Uint8Array.from(i.bitField().reverse()),l=new Kn({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:r.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),c={Data:l.marshal(),Links:o},u=Tr(_r(c)),h=await kr(u,e,r),d=u.length+s;yield{cid:h,unixfs:l,size:d}}async function _i(t,e,n,r){let i=e;e instanceof gi&&e.directChildrenCount()>=n&&(i=await Si(e,r));const o=i.parent;if(o){if(i!==e){if(t&&(t.parent=i),!i.parentKey)throw new Error("No parent key found");await o.put(i.parentKey,i)}return _i(i,o,n,r)}return i}async function Si(t,e){const n=new wi({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(const{key:r,child:i}of t.eachChildSeries())await n.put(r,i);return n}var Ei=_i;const Ai=(t="")=>(t.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);var xi=Ai;async function Ci(t,e,n){const r=xi(t.path||""),i=r.length-1;let o=e,s="";for(let a=0;a<r.length;a++){const l=r[a];s+=`${s?"/":""}${l}`;const c=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,c)await o.put(l,t),e=await Ei(null,o,n.shardSplitThreshold,n);else{let t=await o.get(l);t&&t instanceof pi||(t=new gi({root:!1,dir:!0,parent:o,parentKey:l,path:s,dirty:!0,flat:!0,mtime:t&&t.unixfs&&t.unixfs.mtime,mode:t&&t.unixfs&&t.unixfs.mode},n)),await o.put(l,t),o=t}}return e}async function*Ti(t,e){t instanceof pi?yield*t.flush(e):t&&t.unixfs&&t.unixfs.isDirectory()&&(yield t)}async function*Mi(t,e,n){let r=new gi({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n);for await(const i of t)i&&(r=await Ci(i,r,n),i.unixfs&&i.unixfs.isDirectory()||(yield i));if(n.wrapWithDirectory)yield*Ti(r,e);else for await(const i of r.eachChildSeries())i&&(yield*Ti(i.child,e))}var Ii=Mi;async function*ki(t,e,n={}){const r=Ln(n);let i,o,s;i="function"===typeof n.dagBuilder?n.dagBuilder:di,o="function"===typeof n.treeBuilder?n.treeBuilder:Ii,s=Symbol.asyncIterator in t||Symbol.iterator in t?t:[t];for await(const a of o(xn(i(s,e,r),r.fileImportConcurrency),e,r))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}var Oi=n(411),Ri=n(7336),Di=n(4395),Ni=n(9927);function Pi(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Li(t){return t.constructor&&("Blob"===t.constructor.name||"File"===t.constructor.name)&&"function"===typeof t.stream}function Bi(t){return"object"===typeof t&&(t.path||t.content)}const Ui=t=>t&&"function"===typeof t.getReader;async function*Fi(t){yield t}async function zi(t){if(Pi(t))return Fi(Vi(t));if("string"===typeof t||t instanceof String)return Fi(Vi(t.toString()));if(Li(t))return Ri(t);if(Ui(t)&&(t=Oi(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=Di(t),{value:n,done:r}=await e.peek();if(r)return Fi(new Uint8Array(0));if(e.push(n),Number.isInteger(n))return Fi(Uint8Array.from(await Nr(e)));if(Pi(n)||"string"===typeof n||n instanceof String)return Ni(e,Vi)}throw Bn(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function Vi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):(0,oi.fromString)(t.toString())}async function*Hi(t,e){if(null===t||void 0===t)throw Bn(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof t||t instanceof String)yield ji(t.toString(),e);else if(Pi(t)||Li(t))yield ji(t,e);else{if(Ui(t)&&(t=Oi(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const n=Di(t),{value:r,done:i}=await n.peek();if(i)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Pi(r)||"string"===typeof r||r instanceof String)return void(yield ji(n,e));throw Bn(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Bi(t))throw Bn(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield ji(t,e)}}async function ji(t,e){const{path:n,mode:r,mtime:i,content:o}=t,s={path:n||"",mode:Xn(r),mtime:Zn(i)};return o?s.content=await e(o):n||(s.content=await e(t)),s}function Wi(t){return Hi(t,zi)}async function*Gi(t,e){if("string"===typeof t||t instanceof String||Pi(t)||Li(t)||t._readableState)throw Bn(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Ui(t)&&(t=Oi(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const n=Di(t),{value:r,done:i}=await n.peek();if(i)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw Bn(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState)return void(yield*Ni(n,(t=>$i({content:t},e))));if(Pi(r))return void(yield $i({content:n},e));if(Bi(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||Ui(r)||Li(r))return void(yield*Ni(n,(t=>$i(t,e))))}if(Bi(t))throw Bn(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw Bn(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function $i(t,e){const{path:n,mode:r,mtime:i,content:o}=t,s={path:n||"",mode:Xn(r),mtime:Zn(i)};return o?s.content=await e(o):n||(s.content=await e(t)),s}function qi(t){return Gi(t,zi)}function Yi(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Xi(t){return Boolean(t.constructor)&&("Blob"===t.constructor.name||"File"===t.constructor.name)&&"function"===typeof t.stream}function Zi(t){return"string"===typeof t||t instanceof String||Yi(t)||Xi(t)||"_readableState"in t}function Ki(t){return Zi(t)?Wi(t):qi(t)}function Ji(t){return t=t||new Error("Not Found"),Bn(t,"ERR_NOT_FOUND")}function Qi(t){return t=t||new Error("Aborted"),Bn(t,"ERR_ABORTED")}var to=n(9164),eo=n(3726),no=n(6855);const ro=(t,e)=>async function*(){const n=await Nr(t);yield*n.sort(e)}();class io{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,n){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:n,value:r}of t)await this.put(n,r,e),yield{key:n,value:r}}async*getMany(t,e={}){for await(const n of t)yield this.get(n,e)}async*deleteMany(t,e={}){for await(const n of t)await this.delete(n,e),yield n}batch(){let t=[],e=[];return{put(e,n){t.push({key:e,value:n})},delete(t){e.push(t)},commit:async n=>{await to(this.putMany(t,n)),t=[],await to(this.deleteMany(e,n)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let n=this._all(t,e);if(null!=t.prefix&&(n=eo(n,(e=>e.key.toString().startsWith(t.prefix||"")))),Array.isArray(t.filters)&&(n=t.filters.reduce(((t,e)=>eo(t,e)),n)),Array.isArray(t.orders)&&(n=t.orders.reduce(((t,e)=>ro(t,e)),n)),null!=t.offset){let e=0;n=eo(n,(()=>e++>=(t.offset||0)))}return null!=t.limit&&(n=no(n,t.limit)),n}queryKeys(t,e){let n=this._allKeys(t,e);if(null!=t.prefix&&(n=eo(n,(e=>e.toString().startsWith(t.prefix||"")))),Array.isArray(t.filters)&&(n=t.filters.reduce(((t,e)=>eo(t,e)),n)),Array.isArray(t.orders)&&(n=t.orders.reduce(((t,e)=>ro(t,e)),n)),null!=t.offset){let e=0;n=eo(n,(()=>e++>=t.offset))}return null!=t.limit&&(n=no(n,t.limit)),n}}n(2056);class oo extends io{constructor(){super(),this.store=new Map}async*blocks(){for(const[t,e]of this.store.entries())yield{cid:kn.k0.parse(t),bytes:e}}put(t,e){return this.store.set(t.toString(),e),Promise.resolve()}get(t){const e=this.store.get(t.toString());if(!e)throw new Error(`block with cid ${t.toString()} no found`);return Promise.resolve(e)}has(t){return Promise.resolve(this.store.has(t.toString()))}close(){return this.store.clear(),Promise.resolve()}}const so={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:Mn.sha256,rawLeaves:!0,wrapWithDirectory:!0,maxChildrenPerNode:174};async function ao({input:t,blockstore:e,hasher:n,maxChunkSize:r,maxChildrenPerNode:i,wrapWithDirectory:o,rawLeaves:s}){if(!t||Array.isArray(t)&&!t.length)throw new Error("missing input file(s)");const a=e||new oo,l=await h(d(Ki(t),(t=>ki(t,a,{...so,hasher:n||so.hasher,maxChunkSize:r||so.maxChunkSize,maxChildrenPerNode:i||so.maxChildrenPerNode,wrapWithDirectory:!1!==o&&so.wrapWithDirectory,rawLeaves:null==s?so.rawLeaves:s}))));if(!l||!l.cid)throw new Error("given input could not be parsed correctly");const c=l.cid,{writer:u,out:f}=await _n.create([c]),p=f[Symbol.asyncIterator]();let m;const g=async()=>{for await(const t of a.blocks())await u.put(t);await u.close(),e||await a.close()},y={[Symbol.asyncIterator](){if(null!=m)throw new Error("Multiple iterator not supported");return m=g(),{async next(){const t=await p.next();return t.done&&await m,t}}}};return{root:c,out:y}}const lo=2e3,co=!1;function uo(t){return t&&t.rel}function ho(t,e){function n(n){t[n]=Object.assign({},e,{rel:n})}return e.rel.split(/\s+/).forEach(n),t}function fo(t,e){const n=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return n&&(t[n[1]]=n[2]),t}function po(t){try{const e=t.match(/<?([^>]*)>(.*)/),n=e[1],r=e[2].split(";"),i={},o=new URL(n,"https://example.com");for(const[t,a]of o.searchParams)i[t]=a;r.shift();let s=r.reduce(fo,{});return s=Object.assign({},i,s),s.url=n,s}catch{return null}}function mo(t,e){if(!t)return!1;e=e||{};const n=e.maxHeaderLength||lo,r=e.throwOnMaxHeaderLengthExceeded||co;if(t.length>n){if(r)throw new Error("Input string too long, it should be under "+n+" characters.");return!1}return!0}function go(t,e){return mo(t,e)?t.split(/,\s*</).map(po).filter(uo).reduce(ho,{}):null}var yo=n(7041);const vo=async function(t){return(await Dn.encode(t)).slice(0,8).reverse()},wo=(t,e,n)=>Promise.all(t.map((t=>{if(null==t.Name)throw new Error("Unexpected Link without a Name");if(2===t.Name.length){const r=parseInt(t.Name,16);return e._putObjectAt(r,new yi.Bucket({hash:n._options.hash,bits:n._options.bits},e,r))}return n.put(t.Name.substring(2),!0)}))),bo=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),_o=t=>{let e=t.bucket;const n=[];while(e._parent)n.push(e),e=e._parent;return n.push(e),n.reverse()},So=async(t,e,n,r,i)=>{if(!r){const t=(0,yi.createHAMT)({hashFn:vo});r={rootBucket:t,hamtDepth:1,lastBucket:t}}await wo(t.Links,r.lastBucket,r.rootBucket);const o=await r.rootBucket._findNewBucketAndPos(e);let s=bo(o.pos);const a=_o(o);a.length>r.hamtDepth&&(r.lastBucket=a[r.hamtDepth],s=bo(r.lastBucket._posAtParent));const l=t.Links.find((t=>{if(null==t.Name)return!1;const n=t.Name.substring(0,2),r=t.Name.substring(2);return n===s&&(!r||r===e)}));if(!l)return null;if(null!=l.Name&&l.Name.substring(2)===e)return l.Hash;r.hamtDepth++;const c=await n.get(l.Hash,i);return t=Mr(c),So(t,e,n,r,i)};var Eo=So;function Ao(t,e,n,r){const i=t.length,o=e+i;return n>=o||r<e?new Uint8Array(0):(r>=e&&r<o&&(t=t.slice(0,r-e)),n>=e&&n<o&&(t=t.slice(n-e)),t)}var xo=Ao;const Co=(t,e,n)=>{if(e||(e=0),e<0)throw Bn(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>t)throw Bn(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(n||0===n||(n=t-e),n<0)throw Bn(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+n>t&&(n=t-e),{offset:e,length:n}};var To=Co;async function*Mo(t,e,n,r,i=0,o){if(e instanceof Uint8Array){const t=xo(e,i,n,r);return t.length&&(yield t),i+=t.length,i}if(null==e.Data)throw Bn(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let s;try{s=Kn.unmarshal(e.Data)}catch(l){throw Bn(l,"ERR_NOT_UNIXFS")}if(s.data&&s.data.length){const t=xo(s.data,i,n,r);t.length&&(yield t),i+=s.data.length}let a=i;for(let c=0;c<e.Links.length;c++){const l=e.Links[c],u=i+s.blockSizes[c];if(n>=a&&n<u||r>a&&r<=u||n<a&&r>u){const e=await t.get(l.Hash,{signal:o.signal});let s;switch(l.Hash.code){case Cr:s=await Mr(e);break;case Dr.code:s=e;break;case $e:s=await Ye(e);break;default:throw Error(`Unsupported codec: ${l.Hash.code}`)}for await(const a of Mo(t,s,n,r,i,o))i+=a.length,yield a}i=u,a=u+1}}const Io=(t,e,n,r,i,o,s)=>{function a(t={}){const r=n.fileSize();if(void 0===r)throw new Error("File was a directory");const{offset:i,length:o}=To(r,t.offset,t.length),a=i,l=i+o;return Mo(s,e,a,l,0,t)}return a};var ko=Io;const Oo=(t,e,n,r,i,o,s)=>{async function*a(t={}){const n=t.offset||0,a=t.length||e.Links.length,l=e.Links.slice(n,a);for(const e of l){const n=await i(e.Hash,e.Name||"",`${r}/${e.Name||""}`,[],o+1,s,t);n.entry&&(yield n.entry)}}return a};var Ro=Oo;const Do=(t,e,n,r,i,o,s)=>{function a(t={}){return No(e,r,i,o,s,t)}return a};async function*No(t,e,n,r,i,o){const s=t.Links;for(const a of s){const s=null!=a.Name?a.Name.substring(2):null;if(s){const t=await n(a.Hash,s,`${e}/${s}`,[],r+1,i,o);yield t.entry}else{const s=await i.get(a.Hash);t=Mr(s);for await(const a of No(t,e,n,r,i,o))yield a}}}var Po=Do;const Lo=(t,e)=>{const n=t.Links.find((t=>t.Name===e));return n&&n.Hash},Bo={raw:ko,file:ko,directory:Ro,"hamt-sharded-directory":Po,metadata:(t,e,n,r,i,o,s)=>()=>[],symlink:(t,e,n,r,i,o,s)=>()=>[]},Uo=async(t,e,n,r,i,o,s,a)=>{const l=await s.get(t,a),c=Mr(l);let u,h;if(e||(e=t.toString()),null==c.Data)throw Bn(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{u=Kn.unmarshal(c.Data)}catch(d){throw Bn(d,"ERR_NOT_UNIXFS")}if(n||(n=e),r.length){let t;if(t=u&&"hamt-sharded-directory"===u.type?await Eo(c,r[0],s):Lo(c,r[0]),!t)throw Bn(new Error("file does not exist"),"ERR_NOT_FOUND");const e=r.shift(),i=`${n}/${e}`;h={cid:t,toResolve:r,name:e||"",path:i}}return{entry:{type:u.isDirectory()?"directory":"file",name:e,path:n,cid:t,content:Bo[u.type](t,c,u,n,i,o,s),unixfs:u,depth:o,node:c,size:u.fileSize()},next:h}};var Fo=Uo;const zo=t=>{async function*e(e={}){const{offset:n,length:r}=To(t.length,e.offset,e.length);yield xo(t,0,n,n+r)}return e},Vo=async(t,e,n,r,i,o,s,a)=>{if(r.length)throw Bn(new Error(`No link named ${n} found in raw node ${t}`),"ERR_NOT_FOUND");const l=await s.get(t,a);return{entry:{type:"raw",name:e,path:n,cid:t,content:zo(l),depth:o,size:l.length,node:l}}};var Ho=Vo;const jo=async(t,e,n,r,i,o,s,a)=>{const l=await s.get(t),c=Ye(l);let u=c,h=n;while(r.length){const i=r[0];if(!(i in u))throw Bn(new Error(`No property named ${i} found in cbor node ${t}`),"ERR_NO_PROP");{r.shift(),h=`${h}/${i}`;const s=p.k.asCID(u[i]);if(s)return{entry:{type:"object",name:e,path:n,cid:t,node:l,depth:o,size:l.length,content:async function*(){yield c}},next:{cid:s,name:i,path:h,toResolve:r}};u=u[i]}}return{entry:{type:"object",name:e,path:n,cid:t,node:l,depth:o,size:l.length,content:async function*(){yield c}}}};var Wo=jo;const Go=t=>{async function*e(e={}){const{offset:n,length:r}=To(t.length,e.offset,e.length);yield xo(t,0,n,n+r)}return e},$o=async(t,e,n,r,i,o,s,a)=>{if(r.length)throw Bn(new Error(`No link named ${n} found in raw node ${t}`),"ERR_NOT_FOUND");const l=await m.Jx(t.multihash.bytes);return{entry:{type:"identity",name:e,path:n,cid:t,content:Go(l.digest),depth:o,size:l.digest.length,node:l.digest}}};var qo=$o;const Yo={[Cr]:Fo,[Dr.code]:Ho,[$e]:Wo,[yo.identity.code]:qo};function Xo(t,e,n,r,i,o,s){const a=Yo[t.code];if(!a)throw Bn(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,n,r,Xo,i,o,s)}var Zo=Xo;const Ko=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),Jo=t=>{if(t instanceof Uint8Array)return{cid:p.k.decode(t),toResolve:[]};const e=p.k.asCID(t);if(e)return{cid:e,toResolve:[]};if("string"===typeof t){0===t.indexOf("/ipfs/")&&(t=t.substring(6));const e=Ko(t);return{cid:p.k.parse(e[0]),toResolve:e.slice(1)}}throw Bn(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*Qo(t,e,n={}){let{cid:r,toResolve:i}=Jo(t),o=r.toString(),s=o;const a=i.length;while(1){const l=await Zo(r,o,s,i,a,e,n);if(!l.entry&&!l.next)throw Bn(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(l.entry&&(yield l.entry),!l.next)return;i=l.next.toResolve,r=l.next.cid,o=l.next.name,s=l.next.path}}async function ts(t,e,n={}){const r=await h(Qo(t,e,n));if(!r)throw Bn(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return r}async function*es(t,e,n={}){const r=await ts(t,e,n);if(r&&(yield r,"directory"===r.type))for await(const o of i(r,n))yield o;async function*i(t,e){for await(const n of t.content(e))yield n,n instanceof Uint8Array||"directory"===n.type&&(yield*i(n,e))}}function ns(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}class rs extends io{constructor(t){super(),this.store=t}async get(t){const e=await this.store.get(t);if(!e)throw new Error(`Incomplete CAR. Block missing for CID ${t}`);if(!is({cid:t,bytes:e}))throw new Error(`Invalid CAR. Hash of block data does not match CID ${t}`);return e}static fromBlockstore(t){return new rs(t)}static fromCarReader(t){return new rs({get:async e=>{const n=await t.get(e);return null===n||void 0===n?void 0:n.bytes}})}}async function is({cid:t,bytes:e}){const n=await Mn.sha256.digest(e);return ns(n.digest,t.multihash.digest)}async function*os(t,{roots:e,blockstore:n}={}){const r=await dn.fromIterable(ss(t)),i=n||new oo;for await(const s of r)await i.put(s.cid,s.bytes);const o=rs.fromBlockstore(i);e&&0!==e.length||(e=await r.getRoots());for(const s of e)yield*es(s,o)}function ss(t){return Symbol.asyncIterator in t?t:Oi(t)}const as=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),ls=function*(t,e){if(null!=t&&!(t instanceof Uint8Array))for(const[n,r]of Object.entries(t)){const t=[...e,n];if(null!=r&&"object"===typeof r)if(Array.isArray(r))for(const[e,n]of r.entries()){const r=[...t,e],i=kn.k0.asCID(n);i?yield[r.join("/"),i]:"object"===typeof n&&(yield*ls(n,r))}else{const e=kn.k0.asCID(r);e?yield[t.join("/"),e]:yield*ls(r,t)}}},cs=function*(t,e){if(null!=t)for(const[n,r]of Object.entries(t)){const t=[...e,n];if(yield t.join("/"),null!=r&&!(r instanceof Uint8Array)&&"object"===typeof r&&!kn.k0.asCID(r))if(Array.isArray(r))for(const[e,n]of r.entries()){const r=[...t,e];yield r.join("/"),"object"!==typeof n||kn.k0.asCID(n)||(yield*cs(n,r))}else yield*cs(r,t)}},us=(t,e)=>{let n=t;for(const[r,i]of e.entries()){if(n=n[i],null==n)throw new Error(`Object has no property at ${e.slice(0,r+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const t=kn.k0.asCID(n);if(t)return{value:t,remaining:e.slice(r+1).join("/")}}return{value:n}};class hs{constructor({cid:t,bytes:e,value:n}){if(!t||!e||"undefined"===typeof n)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:as(),bytes:as(),value:as(),asBlock:as()})}links(){return ls(this.value,[])}tree(){return cs(this.value,[])}get(t="/"){return us(this.value,t.split("/").filter(Boolean))}}const ds=42;function fs(t){if(t.asCID!==t)return null;const e=p.k.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new S(_.tag,ds),new S(_.bytes,n)]}function ps(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function ms(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const gs={float64:!0,typeEncoders:{Object:fs,undefined:ps,number:ms}};function ys(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return p.k.decode(t.subarray(1))}const vs={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};vs.tags[ds]=ys;const ws="dag-cbor",bs=113,_s=t=>ke(t,gs),Ss=t=>Ue(t,vs);class Es{constructor(t,e,n={}){if("number"!==typeof e||e<=0)throw new Error("invalid target chunk size");this._reader=t,this._targetSize=e,this._decoders=[r,Dr,o,...n.decoders||[]]}async*cars(){const t=await this._reader.getRoots();if(1!==t.length)throw new Error(`unexpected number of roots: ${t.length}`);let e;for await(const n of this._cars(t[0]))e=n.channel,n.out&&(yield n.out);if(!e)throw new Error("missing CAR writer channel");e.writer.close(),yield e.out}async _get(t){const e=await this._reader.get(t);if(!e)throw new Error(`missing block for ${t}`);const{bytes:n}=e,r=this._decoders.find((e=>e.code===t.code));if(!r)throw new Error(`missing decoder for ${t.code}`);return new hs({cid:t,bytes:n,value:r.decode(n)})}async*_cars(t,e=[],n=undefined){const r=await this._get(t);if(n=n||Object.assign(_n.create(t),{size:0}),n.size>0&&n.size+r.bytes.byteLength>=this._targetSize){n.writer.close();const{out:t}=n;n=As(e),yield{channel:n,out:t}}e=e.concat(r),n.size+=r.bytes.byteLength,n.writer.put(r);for(const[,i]of r.links())for await(const t of this._cars(i,e,n))n=t.channel,yield t;if(!n)throw new Error("missing CAR writer channel");yield{channel:n}}static async fromIterable(t,e,n){const r=await ln.fromIterable(t);return new Es(r,e,n)}static async fromBlob(t,e,n){const r=await t.arrayBuffer(),i=await ln.fromBytes(new Uint8Array(r));return new Es(i,e,n)}}function As(t){const e=Object.assign(_n.create(t[0].cid),{size:t.reduce(((t,e)=>t+e.bytes.byteLength),0)});for(const n of t)e.writer.put(n);return e}var xs=n(1978);const Cs=globalThis.fetch,Ts=(globalThis.Request,globalThis.Response,globalThis.Blob),Ms=globalThis.File,Is=oo,ks=5,Os=3,Rs=52428800,Ds=1048576,Ns=104857600,Ps=30,Ls=1e4;function Bs(){const t=xs(Ps,Ls);return()=>t((()=>{}))}const Us=Bs();class Fs{constructor({token:t,endpoint:e=new URL("https://api.web3.storage"),rateLimiter:n,fetch:r=Cs}){this.token=t,this.endpoint=e,this.rateLimiter=n||Bs(),this.fetch=r}static headers(t){if(!t)throw new Error("missing token");return{Authorization:`Bearer ${t}`,"X-Client":"web3.storage/js"}}static async put({endpoint:t,token:e,rateLimiter:n=Us,fetch:r=Cs},i,{onRootCidReady:o,onStoredChunk:s,maxRetries:a=ks,maxChunkSize:l=Rs,wrapWithDirectory:c=!0,name:u,signal:h}={}){if(l>=Ns||l<Ds)throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");const d=new Is;try{const{out:f,root:p}=await ao({input:Array.from(i).map(js),blockstore:d,wrapWithDirectory:c,maxChunkSize:Ds,maxChildrenPerNode:1024});o&&o(p.toString());const m=await ln.fromIterable(f);return await Fs.putCar({endpoint:t,token:e,rateLimiter:n,fetch:r},m,{onStoredChunk:s,maxRetries:a,maxChunkSize:l,name:u,signal:h})}finally{await d.close()}}static async putCar({endpoint:t,token:e,rateLimiter:n=Us,fetch:r=Cs},i,{name:o,onStoredChunk:s,maxRetries:a=ks,maxChunkSize:l=Rs,decoders:h,signal:d}={}){if(l>=Ns||l<Ds)throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");const f=l,p=new URL("car",t),m={...Fs.headers(e),"Content-Type":"application/vnd.ipld.car",...o?{"X-Name":encodeURIComponent(o)}:{}},g=await i.getRoots();if(null==g[0])throw new Error("missing root CID");if(g.length>1)throw new Error("too many roots");const y=g[0].toString(),v=new Es(i,f,{decoders:h}),w=async t=>{const e=[];for await(const n of t)e.push(n);const i=new Ts(e,{type:"application/vnd.ipld.car"});let o=i;parseInt(globalThis.process?.versions?.node)>18&&(o=await o.arrayBuffer());const l=await u((async()=>{let t;await n();try{t=await r(p.toString(),{method:"POST",headers:m,body:o,signal:d})}catch(i){throw d&&d.aborted?new u.AbortError(i):i}if(429===t.status)throw new Error("rate limited");const e=await t.json();if(!t.ok)throw new Error(e.message);if(e.cid!==y)throw new Error(`root CID mismatch, expected: ${y}, received: ${e.cid}`);return e.cid}),{retries:a});return s&&s(i.size),l},b=c(Os,w);for await(const c of b(v.cars()));return y}static async get({endpoint:t,token:e,rateLimiter:n=Us,fetch:r=Cs},i,o={}){const s=new URL(`car/${i}`,t);await n();const a=await r(s.toString(),{method:"GET",headers:Fs.headers(e),signal:o.signal});if(429===a.status)throw new Error("rate limited");return Hs(a)}static async delete({endpoint:t,token:e,rateLimiter:n=Us},r,i={}){throw console.log("Not deleting",r,t,e,n,i),Error(".delete not implemented yet")}static async status({endpoint:t,token:e,rateLimiter:n=Us,fetch:r=Cs},i,o={}){const s=new URL(`status/${i}`,t);await n();const a=await r(s.toString(),{method:"GET",headers:Fs.headers(e),signal:o.signal});if(429===a.status)throw new Error("rate limited");if(404!==a.status){if(!a.ok)throw new Error(a.statusText);return a.json()}}static async*list(t,{before:e=(new Date).toISOString(),maxResults:n=1/0,signal:r}={}){async function i({endpoint:t,token:e,rateLimiter:n=Us,fetch:i=Cs},{before:o,size:s}){const a=new URLSearchParams({before:o,size:s.toString()}),l=new URL(`user/uploads?${a}`,t);return await n(),i(l.toString(),{method:"GET",headers:{...Fs.headers(e),"Access-Control-Request-Headers":"Link"},signal:r})}let o=0;const s=n>100?100:n;for await(const a of Ws(i,t,{before:e,size:s})){if(!a.ok){if(429===a.status)throw new Error("rate limited");const t=await a.json();throw new Error(`${a.status} ${a.statusText} ${t?"- "+t.message:""}`)}const t=await a.json();for(const e of t){if(++o>n)return;yield e}}}put(t,e){return Fs.put(this,t,e)}putCar(t,e){return Fs.putCar(this,t,e)}get(t,e){return Fs.get(this,t,e)}delete(t,e){return Fs.delete(this,t,e)}status(t,e){return Fs.status(this,t,e)}list(t){return Fs.list(this,t)}}async function zs({content:t,path:e,cid:n}){const r=[];for await(const o of t())r.push(o);const i=new Ms(r,Vs(e));return Object.assign(i,{cid:n.toString()})}function Vs(t){const e=t.indexOf("/");return-1===e?t:t.substring(e+1)}function Hs(t){const e=Object.assign(t,{unixFsIterator:async function*(){if(!t.ok)throw new Error(`Response was not ok: ${t.status} ${t.statusText} - Check for { "ok": false } on the Response object before calling .unixFsIterator`);if(!t.body)throw new Error("No body on response");const e=new Is;try{for await(const n of os(t.body,{blockstore:e}))yield n}finally{await e.close()}},files:async()=>{if(!t.ok)throw new Error(`Response was not ok: ${t.status} ${t.statusText} - Check for { "ok": false } on the Response object before calling .files`);const n=[];for await(const t of e.unixFsIterator()){if("directory"===t.type)continue;const e=await zs(t);n.push(e)}return n}});return e}function js(t){let e;return{path:t.name,get content(){return e=e||t.stream(),e}}}async function*Ws(t,e,n){let r=await t(e,n);yield r;let i=go(r.headers.get("Link")||"");while(i&&i.next)r=await t(e,i.next),yield r,i=go(r.headers.get("Link")||"")}},7195:function(t,e,n){"use strict";n.d(e,{JR:function(){return h},SF:function(){return f},US:function(){return u}});var r=n(1811),i=n(8954),o=n(6969),s=n(7862),a=n(1634);let l=null;const c=()=>{const t=l;l=null,t.forEach(((t,e)=>{const n=e.state.tr,i=r.Gt.getState(e.state);i&&i.binding&&!i.binding.isDestroyed&&(t.forEach(((t,e)=>{n.setMeta(e,t)})),e.dispatch(n))}))},u=(t,e,n)=>{l||(l=new Map,a.Vs(0,c)),s.Yu(l,t,s.Ue).set(e,n)},h=(t,e,n)=>{if(0===t)return i.w$(e,0);let r=null===e._first?null:e._first.content.type;while(null!==r&&e!==r){if(r instanceof i.eI){if(r._length>=t)return i.w$(r,t);if(t-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,t--}while(r!==e&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==e&&(r=null===r._item?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&t<o)r=r._first.content.type,t--;else{if(1===t&&0===r._length&&o>1)return new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);if(t-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===t)return r=null===r._item?r:r._item.parent,new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);do{r=r._item.parent,t--}while(r!==e&&null===r._item.next);r!==e&&(r=r._item.next.content.type)}}}if(null===r)throw o.zR();if(0===t&&r.constructor!==i.eI&&r!==e)return d(r._item.parent,r._item)}return i.w$(e,e._length)},d=(t,e)=>{let n=null,r=null;return null===t._item?r=i.BW(t):n=i.at(t._item.id.client,t._item.id.clock),new i.Zi(n,r,e.id)},f=(t,e,n,r)=>{const o=i.or(n,t);if(null===o||o.type!==e&&!i.$4(e,o.type._item))return null;let s=o.type,a=0;if(s.constructor===i.eI)a=o.index;else if(null===s._item||!s._item.deleted){let t=s._first,e=0;while(e<s._length&&e<o.index&&null!==t){if(!t.deleted){const n=t.content.type;e++,n instanceof i.eI?a+=n._length:a+=r.get(n).nodeSize}t=t.right}a+=1}while(s!==e&&null!==s._item){const t=s._item.parent;if(null===t._item||!t._item.deleted){a+=1;let e=t._first;while(null!==e){const t=e.content.type;if(t===s)break;e.deleted||(t instanceof i.eI?a+=t._length:a+=r.get(t).nodeSize),e=e.right}}s=t}return a-1}},1811:function(t,e,n){"use strict";n.d(e,{Gk:function(){return o},Gt:function(){return i},uJ:function(){return s}});var r=n(157);const i=new r.H$("y-sync"),o=new r.H$("y-undo"),s=new r.H$("yjs-cursor")},114:function(t,e,n){"use strict";n.d(e,{Ag:function(){return i}});n(7658);var r=n(313);const i=(t,e,n)=>{const i=[];for(let o=0;o<e.length;o++){const n=e[o];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:r.ZG()})}i.push(n)}}i.length>0&&(t.emit("change",[{added:[],updated:[],removed:i},n]),t.emit("update",[{added:[],updated:[],removed:i},n]))}},8954:function(t,e,n){"use strict";n.d(e,{MM:function(){return vi},$_:function(){return Ai},zc:function(){return Ni},QW:function(){return ye},ck:function(){return Vi},Zi:function(){return Qe},aC:function(){return ln},xv:function(){return Yr},H6:function(){return Ln},lt:function(){return Qr},eI:function(){return ii},NG:function(){return De},Uq:function(){return an},or:function(){return sn},VG:function(){return he},at:function(){return Ze},og:function(){return tn},w$:function(){return on},Ox:function(){return cn},D$:function(){return Le},gJ:function(){return He},BW:function(){return Ke},uY:function(){return ae},$4:function(){return Je},UQ:function(){return oe},CO:function(){return un},ud:function(){return ur}});n(7658),n(3767),n(8585),n(8696),n(541);var r=n(7862),i=n(893),o=n(5989);class s{constructor(){this._observers=r.Ue()}on(t,e){r.Yu(this._observers,t,i.Ue).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return o.Dp((this._observers.get(t)||r.Ue()).values()).forEach((t=>t(...e)))}destroy(){this._observers=r.Ue()}}var a=n(1383),l=(n(2801),n(654)),c=n(6413);const u=t=>new Uint8Array(t),h=(t,e,n)=>new Uint8Array(t,e,n),d=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=l.IK(t[n]);return btoa(e)},f=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),p=t=>{const e=atob(t),n=u(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},m=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},g=(c.jU,c.jU,t=>{const e=u(t.byteLength);return e.set(t),e}),y=1,v=2,w=4,b=8,_=32,S=64,E=128,A=31,x=63,C=127,T=2147483647,M=Number.MAX_SAFE_INTEGER,I=(Number.MIN_SAFE_INTEGER,Number.isInteger||(t=>"number"===typeof t&&isFinite(t)&&a.GW(t)===t));Number.isNaN,Number.parseInt;class k{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const O=()=>new k,R=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},D=t=>{const e=new Uint8Array(R(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(h(t.cbuf.buffer,0,t.cpos),n),e},N=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(h(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*a.Fp(n,e)),t.cpos=0)},P=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},L=P,B=(t,e)=>{while(e>C)P(t,E|C&e),e=a.GW(e/128);P(t,C&e)},U=(t,e)=>{const n=a.GR(e);n&&(e=-e),P(t,(e>x?E:0)|(n?S:0)|x&e),e=a.GW(e/64);while(e>0)P(t,(e>C?E:0)|C&e),e=a.GW(e/128)},F=new Uint8Array(3e4),z=F.length/3,V=(t,e)=>{if(e.length<z){const n=l.YZ.encodeInto(e,F).written||0;B(t,n);for(let e=0;e<n;e++)P(t,F[e])}else G(t,l.lz(e))},H=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;B(t,r);for(let i=0;i<r;i++)P(t,n.codePointAt(i))},j=l.YZ&&l.YZ.encodeInto?V:H,W=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=a.VV(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(a.Fp(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},G=(t,e)=>{B(t,e.byteLength),W(t,e)},$=(t,e)=>{N(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},q=(t,e)=>$(t,4).setFloat32(0,e,!1),Y=(t,e)=>$(t,8).setFloat64(0,e,!1),X=(t,e)=>$(t,8).setBigInt64(0,e,!1),Z=new DataView(new ArrayBuffer(4)),K=t=>(Z.setFloat32(0,t),Z.getFloat32(0)===t),J=(t,e)=>{switch(typeof e){case"string":P(t,119),j(t,e);break;case"number":I(e)&&a.Wn(e)<=T?(P(t,125),U(t,e)):K(e)?(P(t,124),q(t,e)):(P(t,123),Y(t,e));break;case"bigint":P(t,122),X(t,e);break;case"object":if(null===e)P(t,126);else if(o.kJ(e)){P(t,117),B(t,e.length);for(let n=0;n<e.length;n++)J(t,e[n])}else if(e instanceof Uint8Array)P(t,116),G(t,e);else{P(t,118);const n=Object.keys(e);B(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];j(t,i),J(t,e[i])}}break;case"boolean":P(t,e?120:121);break;default:P(t,127)}};class Q extends k{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&B(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const tt=t=>{t.count>0&&(U(t.encoder,1===t.count?t.s:-t.s),t.count>1&&B(t.encoder,t.count-2))};class et{constructor(){this.encoder=new k,this.s=0,this.count=0}write(t){this.s===t?this.count++:(tt(this),this.count=1,this.s=t)}toUint8Array(){return tt(this),D(this.encoder)}}const nt=t=>{if(t.count>0){const e=2*t.diff+(1===t.count?0:1);U(t.encoder,e),t.count>1&&B(t.encoder,t.count-2)}};class rt{constructor(){this.encoder=new k,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(nt(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return nt(this),D(this.encoder)}}class it{constructor(){this.sarr=[],this.s="",this.lensE=new et}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new k;return this.sarr.push(this.s),this.s="",j(t,this.sarr.join("")),W(t,this.lensE.toUint8Array()),D(t)}}var ot=n(6969);const st=ot.Ue("Unexpected end of array"),at=ot.Ue("Integer out of Range");class lt{constructor(t){this.arr=t,this.pos=0}}const ct=t=>new lt(t),ut=t=>t.pos!==t.arr.length,ht=(t,e)=>{const n=h(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},dt=t=>ht(t,pt(t)),ft=t=>t.arr[t.pos++],pt=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&C)*n,n*=128,r<E)return e;if(e>M)throw at}throw st},mt=t=>{let e=t.arr[t.pos++],n=e&x,r=64;const i=(e&S)>0?-1:1;if(0===(e&E))return i*n;const o=t.arr.length;while(t.pos<o){if(e=t.arr[t.pos++],n+=(e&C)*r,r*=128,e<E)return i*n;if(n>M)throw at}throw st},gt=t=>{let e=pt(t);if(0===e)return"";{let n=String.fromCodePoint(ft(t));if(--e<100)while(e--)n+=String.fromCodePoint(ft(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},yt=t=>l.CO.decode(dt(t)),vt=l.CO?yt:gt,wt=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},bt=t=>wt(t,4).getFloat32(0,!1),_t=t=>wt(t,8).getFloat64(0,!1),St=t=>wt(t,8).getBigInt64(0,!1),Et=[t=>{},t=>null,mt,bt,_t,St,t=>!1,t=>!0,vt,t=>{const e=pt(t),n={};for(let r=0;r<e;r++){const e=vt(t);n[e]=At(t)}return n},t=>{const e=pt(t),n=[];for(let r=0;r<e;r++)n.push(At(t));return n},dt],At=t=>Et[127-ft(t)](t);class xt extends lt{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),ut(this)?this.count=pt(this)+1:this.count=-1),this.count--,this.s}}class Ct extends lt{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=mt(this);const t=a.GR(this.s);this.count=1,t&&(this.s=-this.s,this.count=pt(this)+2)}return this.count--,this.s}}class Tt extends lt{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=mt(this),e=1&t;this.diff=a.GW(t/2),this.count=1,e&&(this.count=pt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Mt{constructor(t){this.decoder=new Ct(t),this.str=vt(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}var It=n(4373);const kt=t=>new Promise(t);Promise.all.bind(Promise);var Ot=n(7409);class Rt{constructor(t,e){this.left=t,this.right=e}}const Dt=(t,e)=>new Rt(t,e);var Nt=n(7214);const Pt=Symbol;var Lt=n(313);const Bt=Pt(),Ut=Pt(),Ft=Pt(),zt=Pt(),Vt=Pt(),Ht=Pt(),jt=Pt(),Wt=Pt(),Gt=Pt(),$t=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];i.constructor===String||i.constructor===Number?e.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n};Lt.ZG();const qt={[Bt]:Dt("font-weight","bold"),[Ut]:Dt("font-weight","normal"),[Ft]:Dt("color","blue"),[Vt]:Dt("color","green"),[zt]:Dt("color","grey"),[Ht]:Dt("color","red"),[jt]:Dt("color","purple"),[Wt]:Dt("color","orange"),[Gt]:Dt("color","black")},Yt=t=>{const e=[],n=[],i=r.Ue();let o=[],s=0;for(;s<t.length;s++){const r=t[s],o=qt[r];if(void 0!==o)i.set(o.left,o.right);else{if(r.constructor!==String&&r.constructor!==Number)break;{const t=Nt.x0(i);s>0||t.length>0?(e.push("%c"+r),n.push(t)):e.push(r)}}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const e=t[s];e instanceof Symbol||o.push(e)}return o},Xt=c.hH?Yt:$t,Zt=(...t)=>{console.log(...Xt(t)),Jt.forEach((e=>e.print(t)))},Kt=(...t)=>{console.warn(...Xt(t)),t.unshift(Wt),Jt.forEach((e=>e.print(t)))},Jt=i.Ue();const Qt=t=>({[Symbol.iterator](){return this},next:t}),te=(t,e)=>Qt((()=>{let n;do{n=t.next()}while(!n.done&&!e(n.value));return n})),ee=(t,e)=>Qt((()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}}));var ne=n(1370);class re{constructor(t,e){this.clock=t,this.len=e}}class ie{constructor(){this.clients=new Map}}const oe=(t,e,n)=>e.clients.forEach(((e,r)=>{const i=t.doc.store.clients.get(r);for(let o=0;o<e.length;o++){const r=e[o];An(t,i,r.clock,r.len,n)}})),se=(t,e)=>{let n=0,r=t.length-1;while(n<=r){const i=a.GW((n+r)/2),o=t[i],s=o.clock;if(s<=e){if(e<s+o.len)return i;n=i+1}else r=i-1}return null},ae=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==se(n,e.clock)},le=t=>{t.clients.forEach((t=>{let e,n;for(t.sort(((t,e)=>t.clock-e.clock)),e=1,n=1;e<t.length;e++){const r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=a.Fp(r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n}))},ce=t=>{const e=new ie;for(let n=0;n<t.length;n++)t[n].clients.forEach(((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let e=n+1;e<t.length;e++)o.s7(s,t[e].clients.get(i)||[]);e.clients.set(i,s)}}));return le(e),e},ue=(t,e,n,i)=>{r.Yu(t.clients,e,(()=>[])).push(new re(n,i))},he=()=>new ie,de=t=>{const e=he();return t.clients.forEach(((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const i=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new re(i,o))}}r.length>0&&e.clients.set(n,r)})),e},fe=(t,e)=>{B(t.restEncoder,e.clients.size),o.Dp(e.clients.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{t.resetDsCurVal(),B(t.restEncoder,e);const r=n.length;B(t.restEncoder,r);for(let i=0;i<r;i++){const e=n[i];t.writeDsClock(e.clock),t.writeDsLen(e.len)}}))},pe=t=>{const e=new ie,n=pt(t.restDecoder);for(let i=0;i<n;i++){t.resetDsCurVal();const n=pt(t.restDecoder),i=pt(t.restDecoder);if(i>0){const o=r.Yu(e.clients,n,(()=>[]));for(let e=0;e<i;e++)o.push(new re(t.readDsClock(),t.readDsLen()))}}return e},me=(t,e,n)=>{const r=new ie,i=pt(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const i=pt(t.restDecoder),o=pt(t.restDecoder),s=n.clients.get(i)||[],a=mn(n,i);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<a){a<o&&ue(r,i,a,o-a);let t=yn(s,n),l=s[t];!l.deleted&&l.id.clock<n&&(s.splice(t+1,0,Ui(e,l,n-l.id.clock)),t++);while(t<s.length){if(l=s[t++],!(l.id.clock<o))break;l.deleted||(o<l.id.clock+l.length&&s.splice(t,0,Ui(e,l,o-l.id.clock)),l.delete(e))}}else ue(r,i,n,o-n)}}if(r.clients.size>0){const t=new xe;return B(t.restEncoder,0),fe(t,r),t.toUint8Array()}return null},ge=It.U7;class ye extends s{constructor({guid:t=It.k$(),collectionid:e=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=ge(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new fn,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=kt((t=>{this.on("load",(()=>{this.isLoaded=!0,t(this)}))}));const a=()=>kt((t=>{const e=n=>{void 0!==n&&!0!==n||(this.off("sync",e),t())};this.on("sync",e)}));this.on("sync",(t=>{!1===t&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===t||!0===t,this.isLoaded||this.emit("load",[])})),this.whenSynced=a()}load(){const t=this._item;null===t||this.shouldLoad||Rn(t.parent.doc,(t=>{t.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(o.Dp(this.subdocs).map((t=>t.guid)))}transact(t,e=null){return Rn(this,t,e)}get(t,e=ar){const n=r.Yu(this.share,t,(()=>{const t=new e;return t._integrate(this,null),t})),i=n.constructor;if(e!==ar&&i!==e){if(i===ar){const r=new e;r._map=n._map,n._map.forEach((t=>{for(;null!==t;t=t.left)t.parent=r})),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,Tr)}getText(t=""){return this.get(t,Yr)}getMap(t=""){return this.get(t,kr)}getXmlFragment(t=""){return this.get(t,Kr)}toJSON(){const t={};return this.share.forEach(((e,n)=>{t[n]=e.toJSON()})),t}destroy(){o.Dp(this.subdocs).forEach((t=>t.destroy()));const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new ye({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Rn(t.parent.doc,(n=>{const r=e.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class ve{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return pt(this.restDecoder)}readDsLen(){return pt(this.restDecoder)}}class we extends ve{readLeftID(){return Ze(pt(this.restDecoder),pt(this.restDecoder))}readRightID(){return Ze(pt(this.restDecoder),pt(this.restDecoder))}readClient(){return pt(this.restDecoder)}readInfo(){return ft(this.restDecoder)}readString(){return vt(this.restDecoder)}readParentInfo(){return 1===pt(this.restDecoder)}readTypeRef(){return pt(this.restDecoder)}readLen(){return pt(this.restDecoder)}readAny(){return At(this.restDecoder)}readBuf(){return g(dt(this.restDecoder))}readJSON(){return JSON.parse(vt(this.restDecoder))}readKey(){return vt(this.restDecoder)}}class be{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=pt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=pt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class _e extends be{constructor(t){super(t),this.keys=[],pt(t),this.keyClockDecoder=new Tt(dt(t)),this.clientDecoder=new Ct(dt(t)),this.leftClockDecoder=new Tt(dt(t)),this.rightClockDecoder=new Tt(dt(t)),this.infoDecoder=new xt(dt(t),ft),this.stringDecoder=new Mt(dt(t)),this.parentInfoDecoder=new xt(dt(t),ft),this.typeRefDecoder=new Ct(dt(t)),this.lenDecoder=new Ct(dt(t))}readLeftID(){return new Ye(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Ye(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return At(this.restDecoder)}readBuf(){return dt(this.restDecoder)}readJSON(){return At(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class Se{constructor(){this.restEncoder=O()}toUint8Array(){return D(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){B(this.restEncoder,t)}writeDsLen(t){B(this.restEncoder,t)}}class Ee extends Se{writeLeftID(t){B(this.restEncoder,t.client),B(this.restEncoder,t.clock)}writeRightID(t){B(this.restEncoder,t.client),B(this.restEncoder,t.clock)}writeClient(t){B(this.restEncoder,t)}writeInfo(t){L(this.restEncoder,t)}writeString(t){j(this.restEncoder,t)}writeParentInfo(t){B(this.restEncoder,t?1:0)}writeTypeRef(t){B(this.restEncoder,t)}writeLen(t){B(this.restEncoder,t)}writeAny(t){J(this.restEncoder,t)}writeBuf(t){G(this.restEncoder,t)}writeJSON(t){j(this.restEncoder,JSON.stringify(t))}writeKey(t){j(this.restEncoder,t)}}class Ae{constructor(){this.restEncoder=O(),this.dsCurrVal=0}toUint8Array(){return D(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,B(this.restEncoder,e)}writeDsLen(t){0===t&&ot.zR(),B(this.restEncoder,t-1),this.dsCurrVal+=t}}class xe extends Ae{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new rt,this.clientEncoder=new et,this.leftClockEncoder=new rt,this.rightClockEncoder=new rt,this.infoEncoder=new Q(L),this.stringEncoder=new it,this.parentInfoEncoder=new Q(L),this.typeRefEncoder=new et,this.lenEncoder=new et}toUint8Array(){const t=O();return B(t,0),G(t,this.keyClockEncoder.toUint8Array()),G(t,this.clientEncoder.toUint8Array()),G(t,this.leftClockEncoder.toUint8Array()),G(t,this.rightClockEncoder.toUint8Array()),G(t,D(this.infoEncoder)),G(t,this.stringEncoder.toUint8Array()),G(t,D(this.parentInfoEncoder)),G(t,this.typeRefEncoder.toUint8Array()),G(t,this.lenEncoder.toUint8Array()),W(t,D(this.restEncoder)),D(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){J(this.restEncoder,t)}writeBuf(t){G(this.restEncoder,t)}writeJSON(t){J(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const Ce=(t,e,n,r)=>{r=a.Fp(r,e[0].id.clock);const i=yn(e,r);B(t.restEncoder,e.length-i),t.writeClient(n),B(t.restEncoder,r);const o=e[i];o.write(t,r-o.id.clock);for(let s=i+1;s<e.length;s++)e[s].write(t,0)},Te=(t,e,n)=>{const r=new Map;n.forEach(((t,n)=>{mn(e,n)>t&&r.set(n,t)})),pn(e).forEach(((t,e)=>{n.has(e)||r.set(e,0)})),B(t.restEncoder,r.size),o.Dp(r.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([n,r])=>{Ce(t,e.clients.get(n),n,r)}))},Me=(t,e)=>{const n=r.Ue(),i=pt(t.restDecoder);for(let r=0;r<i;r++){const r=pt(t.restDecoder),i=new Array(r),o=t.readClient();let s=pt(t.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=t.readInfo();switch(A&r){case 0:{const e=t.readLen();i[n]=new li(Ze(o,s),e),s+=e;break}case 10:{const e=pt(t.restDecoder);i[n]=new Gi(Ze(o,s),e),s+=e;break}default:{const a=0===(r&(S|E)),l=new Vi(Ze(o,s),null,(r&E)===E?t.readLeftID():null,null,(r&S)===S?t.readRightID():null,a?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,a&&(r&_)===_?t.readString():null,Hi(t,r));i[n]=l,s+=l.length}}}}return n},Ie=(t,e,n)=>{const i=[];let s=o.Dp(n.keys()).sort(((t,e)=>t-e));if(0===s.length)return null;const a=()=>{if(0===s.length)return null;let t=n.get(s[s.length-1]);while(t.refs.length===t.i){if(s.pop(),!(s.length>0))return null;t=n.get(s[s.length-1])}return t};let l=a();if(null===l&&0===i.length)return null;const c=new fn,u=new Map,h=(t,e)=>{const n=u.get(t);(null==n||n>e)&&u.set(t,e)};let d=l.refs[l.i++];const f=new Map,p=()=>{for(const t of i){const e=t.id.client,r=n.get(e);r?(r.i--,c.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):c.clients.set(e,[t]),s=s.filter((t=>t!==e))}i.length=0};while(1){if(d.constructor!==Gi){const o=r.Yu(f,d.id.client,(()=>mn(e,d.id.client))),s=o-d.id.clock;if(s<0)i.push(d),h(d.id.client,d.id.clock-1),p();else{const r=d.getMissing(t,e);if(null!==r){i.push(d);const t=n.get(r)||{refs:[],i:0};if(t.refs.length!==t.i){d=t.refs[t.i++];continue}h(r,mn(e,r)),p()}else(0===s||s<d.length)&&(d.integrate(t,s),f.set(d.id.client,d.id.clock+d.length))}}if(i.length>0)d=i.pop();else if(null!==l&&l.i<l.refs.length)d=l.refs[l.i++];else{if(l=a(),null===l)break;d=l.refs[l.i++]}}if(c.clients.size>0){const t=new xe;return Te(t,c,new Map),B(t.restEncoder,0),{missing:u,update:t.toUint8Array()}}return null},ke=(t,e)=>Te(t,e.doc.store,e.beforeState),Oe=(t,e,n,r=new _e(t))=>Rn(e,(t=>{t.local=!1;let e=!1;const n=t.doc,i=n.store,o=Me(r,n),s=Ie(t,i,o),a=i.pendingStructs;if(a){for(const[t,n]of a.missing)if(n<mn(i,t)){e=!0;break}if(s){for(const[t,e]of s.missing){const n=a.missing.get(t);(null==n||n>e)&&a.missing.set(t,e)}a.update=Hn([a.update,s.update])}}else i.pendingStructs=s;const l=me(r,t,i);if(i.pendingDs){const e=new _e(ct(i.pendingDs));pt(e.restDecoder);const n=me(e,t,i);i.pendingDs=l&&n?Hn([l,n]):l||n}else i.pendingDs=l;if(e){const e=i.pendingStructs.update;i.pendingStructs=null,Re(t.doc,e)}}),n,!1),Re=(t,e,n,r=_e)=>{const i=ct(e);Oe(i,t,n,new r(i))},De=(t,e,n)=>Re(t,e,n,we),Ne=(t,e,n=new Map)=>{Te(t,e.store,n),fe(t,de(e.store))},Pe=(t,e=new Uint8Array([0]),n=new xe)=>{const r=Ue(e);Ne(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(jn(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===Ee)return zn(i.map(((t,e)=>0===e?t:Yn(t))));if(n.constructor===xe)return Hn(i)}return i[0]},Le=(t,e)=>Pe(t,e,new Ee),Be=t=>{const e=new Map,n=pt(t.restDecoder);for(let r=0;r<n;r++){const n=pt(t.restDecoder),r=pt(t.restDecoder);e.set(n,r)}return e},Ue=t=>Be(new ve(ct(t))),Fe=(t,e)=>(B(t.restEncoder,e.size),o.Dp(e.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{B(t.restEncoder,e),B(t.restEncoder,n)})),t),ze=(t,e)=>Fe(t,pn(e.store)),Ve=(t,e=new Ae)=>(t instanceof Map?Fe(e,t):ze(e,t),e.toUint8Array()),He=t=>Ve(t,new Se);class je{constructor(){this.l=[]}}const We=()=>new je,Ge=(t,e)=>t.l.push(e),$e=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter((t=>e!==t)),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},qe=(t,e,n)=>Ot.PP(t.l,[e,n]);class Ye{constructor(t,e){this.client=t,this.clock=e}}const Xe=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,Ze=(t,e)=>new Ye(t,e),Ke=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw ot.zR()},Je=(t,e)=>{while(null!==e){if(e.parent===t)return!0;e=e.parent._item}return!1};class Qe{constructor(t,e,n,r=0){this.type=t,this.tname=e,this.item=n,this.assoc=r}}const tn=t=>new Qe(null==t.type?null:Ze(t.type.client,t.type.clock),t.tname||null,null==t.item?null:Ze(t.item.client,t.item.clock),null==t.assoc?0:t.assoc);class en{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const nn=(t,e,n=0)=>new en(t,e,n),rn=(t,e,n)=>{let r=null,i=null;return null===t._item?i=Ke(t):r=Ze(t._item.id.client,t._item.id.clock),new Qe(r,i,e,n)},on=(t,e,n=0)=>{let r=t._start;if(n<0){if(0===e)return rn(t,null,n);e--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>e)return rn(t,Ze(r.id.client,r.id.clock+e),n);e-=r.length}if(null===r.right&&n<0)return rn(t,r.lastId,n);r=r.right}return rn(t,null,n)},sn=(t,e)=>{const n=e.store,r=t.item,i=t.type,o=t.tname,s=t.assoc;let a=null,l=0;if(null!==r){if(mn(n,r.client)<=r.clock)return null;const t=Li(n,r),e=t.item;if(!(e instanceof Vi))return null;if(a=e.parent,null===a._item||!a._item.deleted){l=e.deleted||!e.countable?0:t.diff+(s>=0?0:1);let n=e.left;while(null!==n)!n.deleted&&n.countable&&(l+=n.length),n=n.left}}else{if(null!==o)a=e.get(o);else{if(null===i)throw ot.zR();{if(mn(n,i.client)<=i.clock)return null;const{item:t}=Li(n,i);if(!(t instanceof Vi&&t.content instanceof Ni))return null;a=t.content.type}}l=s>=0?a._length:0}return nn(a,l,t.assoc)},an=(t,e)=>t===e||null!==t&&null!==e&&t.tname===e.tname&&Xe(t.item,e.item)&&Xe(t.type,e.type)&&t.assoc===e.assoc;class ln{constructor(t,e){this.ds=t,this.sv=e}}const cn=(t,e)=>new ln(t,e),un=(cn(he(),new Map),t=>cn(de(t.store),pn(t.store))),hn=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!ae(e.ds,t.id),dn=(t,e)=>{const n=r.Yu(t.meta,dn,i.Ue),o=t.doc.store;n.has(e)||(e.sv.forEach(((e,n)=>{e<mn(o,n)&&_n(t,Ze(n,e))})),oe(t,e.ds,(t=>{})),n.add(e))};class fn{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const pn=t=>{const e=new Map;return t.clients.forEach(((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)})),e},mn=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},gn=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw ot.zR()}n.push(e)},yn=(t,e)=>{let n=0,r=t.length-1,i=t[r],o=i.id.clock;if(o===e)return r;let s=a.GW(e/(o+i.length-1)*r);while(n<=r){if(i=t[s],o=i.id.clock,o<=e){if(e<o+i.length)return s;n=s+1}else r=s-1;s=a.GW((n+r)/2)}throw ot.zR()},vn=(t,e)=>{const n=t.clients.get(e.client);return n[yn(n,e.clock)]},wn=vn,bn=(t,e,n)=>{const r=yn(e,n),i=e[r];return i.id.clock<n&&i instanceof Vi?(e.splice(r+1,0,Ui(t,i,n-i.id.clock)),r+1):r},_n=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[bn(t,n,e.clock)]},Sn=(t,e,n)=>{const r=e.clients.get(n.client),i=yn(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==li&&r.splice(i+1,0,Ui(t,o,n.clock-o.id.clock+1)),o},En=(t,e,n)=>{const r=t.clients.get(e.id.client);r[yn(r,e.id.clock)]=n},An=(t,e,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=bn(t,e,n);do{s=e[a++],o<s.id.clock+s.length&&bn(t,e,o),i(s)}while(a<e.length&&e[a].id.clock<o)};class xn{constructor(t,e,n){this.doc=t,this.deleteSet=new ie,this.beforeState=pn(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Cn=(t,e)=>!(0===e.deleteSet.clients.size&&!r.Yj(e.afterState,((t,n)=>e.beforeState.get(n)!==t)))&&(le(e.deleteSet),ke(t,e),fe(t,e.deleteSet),!0),Tn=(t,e,n)=>{const o=e._item;(null===o||o.id.clock<(t.beforeState.get(o.id.client)||0)&&!o.deleted)&&r.Yu(t.changed,e,i.Ue).add(n)},Mn=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted!==n.deleted||r.constructor!==n.constructor||!r.mergeWith(n))break;n instanceof Vi&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r)}const o=e-i;return o&&t.splice(e+1-o,o),o},In=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const t=e.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=yn(t,o.clock),i=t[r];r<t.length&&i.id.clock<s;i=t[++r]){const i=t[r];if(o.clock+o.len<=i.id.clock)break;i instanceof Vi&&i.deleted&&!i.keep&&n(i)&&i.gc(e,!1)}}}},kn=(t,e)=>{t.clients.forEach(((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e],i=a.VV(r.length-1,1+yn(r,n.clock+n.len-1));for(let t=i,e=r[t];t>0&&e.id.clock>=n.clock;e=r[t])t-=1+Mn(r,t)}}))},On=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{le(o),n.afterState=pn(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const t=[];n.changed.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,e)})))),t.push((()=>{n.changedParentTypes.forEach(((t,e)=>{e._dEH.l.length>0&&(null===e._item||!e._item.deleted)&&(t=t.filter((t=>null===t.target._item||!t.target._item.deleted)),t.forEach((t=>{t.currentTarget=e,t._path=null})),t.sort(((t,e)=>t.path.length-e.path.length)),qe(e._dEH,t,n))}))})),t.push((()=>r.emit("afterTransaction",[n,r]))),(0,Ot.PP)(t,[]),n._needFormattingCleanup&&Gr(n)}finally{r.gc&&In(o,i,r.gcFilter),kn(o,i),n.afterState.forEach(((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=i.clients.get(e),n=a.Fp(yn(t,r),1);for(let e=t.length-1;e>=n;)e-=1+Mn(t,e)}}));for(let t=s.length-1;t>=0;t--){const{client:e,clock:n}=s[t].id,r=i.clients.get(e),o=yn(r,n);o+1<r.length&&Mn(r,o+1)>1||o>0&&Mn(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(Zt(Wt,Bt,"[yjs] ",Ut,Ht,"Changed the client-id because another client seems to be using it."),r.clientID=ge()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new Ee,e=Cn(t,n);e&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new xe,e=Cn(t,n);e&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:u}=n;(l.size>0||u.size>0||c.size>0)&&(l.forEach((t=>{t.clientID=r.clientID,null==t.collectionid&&(t.collectionid=r.collectionid),r.subdocs.add(t)})),u.forEach((t=>r.subdocs.delete(t))),r.emit("subdocs",[{loaded:c,added:l,removed:u},r,n]),u.forEach((t=>t.destroy()))),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):On(t,e+1)}}},Rn=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,s=null;null===t._transaction&&(o=!0,t._transaction=new xn(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(o){const e=t._transaction===i[0];t._transaction=null,e&&On(i,0)}}return s};class Dn{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Nn=(t,e,n)=>{oe(t,n.deletions,(t=>{t instanceof Vi&&e.scope.some((e=>Je(e,t)))&&Bi(t,!1)}))},Pn=(t,e,n)=>{let r=null,i=null;const o=t.doc,s=t.scope;if(Rn(o,(n=>{while(e.length>0&&null===r){const i=o.store,a=e.pop(),l=new Set,c=[];let u=!1;oe(n,a.insertions,(t=>{if(t instanceof Vi){if(null!==t.redone){let{item:e,diff:r}=Li(i,t.id);r>0&&(e=_n(n,Ze(e.id.client,e.id.clock+r))),t=e}!t.deleted&&s.some((e=>Je(e,t)))&&c.push(t)}})),oe(n,a.deletions,(t=>{t instanceof Vi&&s.some((e=>Je(e,t)))&&!ae(a.insertions,t.id)&&l.add(t)})),l.forEach((e=>{u=null!==zi(n,e,l,a.insertions,t.ignoreRemoteMapChanges,t)||u}));for(let e=c.length-1;e>=0;e--){const r=c[e];t.deleteFilter(r)&&(r.delete(n),u=!0)}r=u?a:null}n.changed.forEach(((t,e)=>{t.has(null)&&e._searchMarker&&(e._searchMarker.length=0)})),i=n}),t),null!=r){const e=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:e},t])}return r};class Ln extends s{constructor(t,{captureTimeout:e=500,captureTransaction:n=(t=>!0),deleteFilter:r=(()=>!0),trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=(o.kJ(t)?t[0].doc:t.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(t),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=e,this.afterTransactionHandler=t=>{if(!this.captureTransaction(t)||!this.scope.some((e=>t.changedParentTypes.has(e)))||!this.trackedOrigins.has(t.origin)&&(!t.origin||!this.trackedOrigins.has(t.origin.constructor)))return;const e=this.undoing,n=this.redoing,r=e?this.redoStack:this.undoStack;e?this.stopCapturing():n||this.clear(!1,!0);const i=new ie;t.afterState.forEach(((e,n)=>{const r=t.beforeState.get(n)||0,o=e-r;o>0&&ue(i,n,r,o)}));const o=Lt.ZG();let s=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!e&&!n){const e=r[r.length-1];e.deletions=ce([e.deletions,t.deleteSet]),e.insertions=ce([e.insertions,i])}else r.push(new Dn(t.deleteSet,i)),s=!0;e||n||(this.lastChange=o),oe(t,t.deleteSet,(t=>{t instanceof Vi&&this.scope.some((e=>Je(e,t)))&&Bi(t,!0)}));const a=[{stackItem:r[r.length-1],origin:t.origin,type:e?"redo":"undo",changedParentTypes:t.changedParentTypes},this];s?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(t){t=o.kJ(t)?t:[t],t.forEach((t=>{this.scope.every((e=>e!==t))&&(t.doc!==this.doc&&Kt("[yjs#509] Not same Y.Doc"),this.scope.push(t))}))}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&this.doc.transact((n=>{t&&(this.undoStack.forEach((t=>Nn(n,this,t))),this.undoStack=[]),e&&(this.redoStack.forEach((t=>Nn(n,this,t))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}])}))}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=Pn(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=Pn(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Bn(t){const e=pt(t.restDecoder);for(let n=0;n<e;n++){const e=pt(t.restDecoder),n=t.readClient();let r=pt(t.restDecoder);for(let i=0;i<e;i++){const e=t.readInfo();if(10===e){const e=pt(t.restDecoder);yield new Gi(Ze(n,r),e),r+=e}else if(0!==(A&e)){const i=0===(e&(S|E)),o=new Vi(Ze(n,r),null,(e&E)===E?t.readLeftID():null,null,(e&S)===S?t.readRightID():null,i?t.readParentInfo()?t.readString():t.readLeftID():null,i&&(e&_)===_?t.readString():null,Hi(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new li(Ze(n,r),e),r+=e}}}}class Un{constructor(t,e){this.gen=Bn(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Gi);return this.curr}}class Fn{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const zn=t=>Hn(t,we,Ee),Vn=(t,e)=>{if(t.constructor===li){const{client:n,clock:r}=t.id;return new li(Ze(n,r+e),t.length-e)}if(t.constructor===Gi){const{client:n,clock:r}=t.id;return new Gi(Ze(n,r+e),t.length-e)}{const n=t,{client:r,clock:i}=n.id;return new Vi(Ze(r,i+e),null,Ze(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Hn=(t,e=_e,n=xe)=>{if(1===t.length)return t[0];const r=t.map((t=>new e(ct(t))));let i=r.map((t=>new Un(t,!0))),o=null;const s=new n,a=new Fn(s);while(1){if(i=i.filter((t=>null!==t.curr)),i.sort(((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===Gi?1:-1:n}return e.curr.id.client-t.curr.id.client})),0===i.length)break;const t=i[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)Gn(a,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===Gi)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{Gn(a,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length,r=new Gi(Ze(e,o.struct.id.clock+o.struct.length),t);o={struct:r,offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===Gi?o.struct.length-=e:n=Vn(n,e)),o.struct.mergeWith(n)||(Gn(a,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==Gi;n=t.next())Gn(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(Gn(a,o.struct,o.offset),o=null),$n(a);const l=r.map((t=>pe(t))),c=ce(l);return fe(s,c),s.toUint8Array()},jn=(t,e,n=_e,r=xe)=>{const i=Ue(e),o=new r,s=new Fn(o),l=new n(ct(t)),c=new Un(l,!1);while(c.curr){const t=c.curr,e=t.id.client,n=i.get(e)||0;if(c.curr.constructor!==Gi)if(t.id.clock+t.length>n){Gn(s,t,a.Fp(n-t.id.clock,0)),c.next();while(c.curr&&c.curr.id.client===e)Gn(s,c.curr,0),c.next()}else while(c.curr&&c.curr.id.client===e&&c.curr.id.clock+c.curr.length<=n)c.next();else c.next()}$n(s);const u=pe(l);return fe(o,u),o.toUint8Array()},Wn=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:D(t.encoder.restEncoder)}),t.encoder.restEncoder=O(),t.written=0)},Gn=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Wn(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),B(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},$n=t=>{Wn(t);const e=t.encoder.restEncoder;B(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];B(e,r.written),W(e,r.restEncoder)}},qn=(t,e,n,r)=>{const i=new n(ct(t)),o=new Un(i,!1),s=new r,a=new Fn(s);for(let c=o.curr;null!==c;c=o.next())Gn(a,e(c),0);$n(a);const l=pe(i);return fe(s,l),s.toUint8Array()},Yn=t=>qn(t,Ot.id,_e,Ee),Xn="You must not compute changes after the event-handler fired.";class Zn{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Kn(this.currentTarget,this.target))}deletes(t){return ae(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw ot.Ue(Xn);const t=new Map,e=this.target,n=this.transaction.changed.get(e);n.forEach((n=>{if(null!==n){const r=e._map.get(n);let i,s;if(this.adds(r)){let t=r.left;while(null!==t&&this.adds(t))t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;i="delete",s=o.Z$(t.content.getContent())}else null!==t&&this.deletes(t)?(i="update",s=o.Z$(t.content.getContent())):(i="add",s=void 0)}else{if(!this.deletes(r))return;i="delete",s=o.Z$(r.content.getContent())}t.set(n,{action:i,oldValue:s})}})),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){if(0===this.transaction.doc._transactionCleanups.length)throw ot.Ue(Xn);const e=this.target,n=i.Ue(),r=i.Ue(),o=[];t={added:n,deleted:r,delta:o,keys:this.keys};const s=this.transaction.changed.get(e);if(s.has(null)){let t=null;const i=()=>{t&&o.push(t)};for(let o=e._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==t&&void 0!==t.delete||(i(),t={delete:0}),t.delete+=o.length,r.add(o)):this.adds(o)?(null!==t&&void 0!==t.insert||(i(),t={insert:[]}),t.insert=t.insert.concat(o.content.getContent()),n.add(o)):(null!==t&&void 0!==t.retain||(i(),t={retain:0}),t.retain+=o.length);null!==t&&void 0===t.retain&&i()}this._changes=t}return t}}const Kn=(t,e)=>{const n=[];while(null!==e._item&&e!==t){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;while(r!==e._item&&null!==r)r.deleted||t++,r=r.right;n.unshift(t)}e=e._item.parent}return n},Jn=80;let Qn=0;class tr{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=Qn++}}const er=t=>{t.timestamp=Qn++},nr=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Qn++},rr=(t,e,n)=>{if(t.length>=Jn){const r=t.reduce(((t,e)=>t.timestamp<e.timestamp?t:e));return nr(r,e,n),r}{const r=new tr(e,n);return t.push(r),r}},ir=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce(((t,n)=>a.Wn(e-t.index)<a.Wn(e-n.index)?t:n));let r=t._start,i=0;null!==n&&(r=n.p,i=n.index,er(n));while(null!==r.right&&i<e){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>e)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&a.Wn(n.index-i)<r.parent.length/Jn?(nr(n,r,i),n):rr(t._searchMarker,r,i)},or=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let e=i.p;e.marker=!1;while(e&&(e.deleted||!e.countable))e=e.left,e&&!e.deleted&&e.countable&&(i.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}i.p=e,e.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=a.Fp(e,i.index+n))}},sr=(t,e,n)=>{const i=t,o=e.changedParentTypes;while(1){if(r.Yu(o,t,(()=>[])).push(n),null===t._item)break;t=t._item.parent}qe(i._eH,n,e)};class ar{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=We(),this._dEH=We(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw ot.Nw()}clone(){throw ot.Nw()}_write(t){}get _first(){let t=this._start;while(null!==t&&t.deleted)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Ge(this._eH,t)}observeDeep(t){Ge(this._dEH,t)}unobserve(t){$e(this._eH,t)}unobserveDeep(t){$e(this._dEH,t)}toJSON(){}}const lr=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)i.push(t[n]),r--;e=0}}o=o.right}return i},cr=t=>{const e=[];let n=t._start;while(null!==n){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},ur=(t,e)=>{const n=[];let r=t._start;while(null!==r){if(r.countable&&hn(r,e)){const t=r.content.getContent();for(let e=0;e<t.length;e++)n.push(t[e])}r=r.right}return n},hr=(t,e)=>{let n=0,r=t._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)e(i[r],n++,t)}r=r.right}},dr=(t,e)=>{const n=[];return hr(t,((r,i)=>{n.push(e(r,i,t))})),n},fr=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==e&&e.deleted)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},pr=(t,e)=>{const n=ir(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},mr=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,a=o.store,l=null===n?e._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new Vi(Ze(s,mn(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new Si(c)),i.integrate(t,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new Vi(Ze(s,mn(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new ci(new Uint8Array(n))),i.integrate(t,0);break;case ye:i=new Vi(Ze(s,mn(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new pi(n)),i.integrate(t,0);break;default:if(!(n instanceof ar))throw new Error("Unexpected content type in insert operation");i=new Vi(Ze(s,mn(a,s)),i,i&&i.lastId,l,l&&l.id,e,null,new Ni(n)),i.integrate(t,0)}}})),u()},gr=()=>ot.Ue("Length exceeded!"),yr=(t,e,n,r)=>{if(n>e._length)throw gr();if(0===n)return e._searchMarker&&or(e._searchMarker,n,r.length),mr(t,e,null,r);const i=n,o=ir(e,n);let s=e._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&_n(t,Ze(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&or(e._searchMarker,i,r.length),mr(t,e,s,r)},vr=(t,e,n)=>{const r=(e._searchMarker||[]).reduce(((t,e)=>e.index>t.index?e:t),{index:0,p:e._start});let i=r.p;if(i)while(i.right)i=i.right;return mr(t,e,i,n)},wr=(t,e,n,r)=>{if(0===r)return;const i=n,o=r,s=ir(e,n);let a=e._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&_n(t,Ze(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&_n(t,Ze(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw gr();e._searchMarker&&or(e._searchMarker,i,-o+r)},br=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},_r=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let a;if(null==r)a=new Si([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Si([r]);break;case Uint8Array:a=new ci(r);break;case ye:a=new pi(r);break;default:if(!(r instanceof ar))throw new Error("Unexpected content type");a=new Ni(r)}new Vi(Ze(s,mn(o.store,s)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},Sr=(t,e)=>{const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Er=t=>{const e={};return t._map.forEach(((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])})),e},Ar=(t,e)=>{const n=t._map.get(e);return void 0!==n&&!n.deleted},xr=t=>te(t.entries(),(t=>!t[1].deleted));class Cr extends Zn{constructor(t,e){super(t,e),this._transaction=e}}class Tr extends ar{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Tr;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Tr}clone(){const t=new Tr;return t.insert(0,this.toArray().map((t=>t instanceof ar?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),sr(this,t,new Cr(this,t))}insert(t,e){null!==this.doc?Rn(this.doc,(n=>{yr(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?Rn(this.doc,(e=>{vr(e,this,t)})):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?Rn(this.doc,(n=>{wr(n,this,t,e)})):this._prelimContent.splice(t,e)}get(t){return pr(this,t)}toArray(){return cr(this)}slice(t=0,e=this.length){return lr(this,t,e)}toJSON(){return this.map((t=>t instanceof ar?t.toJSON():t))}map(t){return dr(this,t)}forEach(t){hr(this,t)}[Symbol.iterator](){return fr(this)}_write(t){t.writeTypeRef(Ti)}}const Mr=t=>new Tr;class Ir extends Zn{constructor(t,e,n){super(t,e),this.keysChanged=n}}class kr extends ar{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach(((t,e)=>{this.set(e,t)})),this._prelimContent=null}_copy(){return new kr}clone(){const t=new kr;return this.forEach(((e,n)=>{t.set(n,e instanceof ar?e.clone():e)})),t}_callObserver(t,e){sr(this,t,new Ir(this,t,e))}toJSON(){const t={};return this._map.forEach(((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof ar?r.toJSON():r}})),t}get size(){return[...xr(this._map)].length}keys(){return ee(xr(this._map),(t=>t[0]))}values(){return ee(xr(this._map),(t=>t[1].content.getContent()[t[1].length-1]))}entries(){return ee(xr(this._map),(t=>[t[0],t[1].content.getContent()[t[1].length-1]]))}forEach(t){this._map.forEach(((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?Rn(this.doc,(e=>{br(e,this,t)})):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?Rn(this.doc,(n=>{_r(n,this,t,e)})):this._prelimContent.set(t,e),e}get(t){return Sr(this,t)}has(t){return Ar(this,t)}clear(){null!==this.doc?Rn(this.doc,(t=>{this.forEach((function(e,n,r){br(t,r,n)}))})):this._prelimContent.clear()}_write(t){t.writeTypeRef(Mi)}}const Or=t=>new kr,Rr=(t,e)=>t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&ne.$m(t,e);class Dr{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&ot.zR(),this.right.content.constructor){case vi:this.right.deleted||Br(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Nr=(t,e,n)=>{while(null!==e.right&&n>0){switch(e.right.content.constructor){case vi:e.right.deleted||Br(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&_n(t,Ze(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Pr=(t,e,n)=>{const r=new Map,i=ir(e,n);if(i){const e=new Dr(i.p.left,i.p,i.index,r);return Nr(t,e,n-i.index)}{const i=new Dr(null,e._start,0,r);return Nr(t,i,n)}},Lr=(t,e,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===vi&&Rr(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach(((r,s)=>{const a=n.left,l=n.right,c=new Vi(Ze(o,mn(i.store,o)),a,a&&a.lastId,l,l&&l.id,e,null,new vi(s,r));c.integrate(t,0),n.right=c,n.forward()}))},Br=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},Ur=(t,e)=>{while(1){if(null===t.right)break;if(!(t.right.deleted||t.right.content.constructor===vi&&Rr(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},Fr=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)||null;if(!Rr(c,l)){s.set(a,c);const{left:r,right:u}=n;n.right=new Vi(Ze(o,mn(i.store,o)),r,r&&r.lastId,u,u&&u.id,e,null,new vi(a,l)),n.right.integrate(t,0),n.forward()}}return s},zr=(t,e,n,r,i)=>{n.currentAttributes.forEach(((t,e)=>{void 0===i[e]&&(i[e]=null)}));const o=t.doc,s=o.clientID;Ur(n,i);const a=Fr(t,e,n,i),l=r.constructor===String?new Ai(r):r instanceof ar?new Ni(r):new gi(r);let{left:c,right:u,index:h}=n;e._searchMarker&&or(e._searchMarker,n.index,l.getLength()),u=new Vi(Ze(s,mn(o.store,s)),c,c&&c.lastId,u,u&&u.id,e,null,l),u.integrate(t,0),n.right=u,n.index=h,n.forward(),Lr(t,e,n,a)},Vr=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;Ur(n,i);const a=Fr(t,e,n,i);t:while(null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===vi))){if(!n.right.deleted)switch(n.right.content.constructor){case vi:{const{key:e,value:o}=n.right.content,s=i[e];if(void 0!==s){if(Rr(s,o))a.delete(e);else{if(0===r)break t;a.set(e,o)}n.right.delete(t)}else n.currentAttributes.set(e,o);break}default:r<n.right.length&&_n(t,Ze(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new Vi(Ze(s,mn(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Ai(i)),n.right.integrate(t,0),n.forward()}Lr(t,e,n,a)},Hr=(t,e,n,i,o)=>{let s=e;const a=r.Ue();while(s&&(!s.countable||s.deleted)){if(!s.deleted&&s.content.constructor===vi){const t=s.content;a.set(t.key,t)}s=s.right}let l=0,c=!1;while(e!==s){if(n===e&&(c=!0),!e.deleted){const n=e.content;switch(n.constructor){case vi:{const{key:r,value:s}=n,u=i.get(r)||null;a.get(r)===n&&u!==s||(e.delete(t),l++,c||(o.get(r)||null)!==s||u===s||(null===u?o.delete(r):o.set(r,u))),c||e.deleted||Br(o,n);break}}}e=e.right}return l},jr=(t,e)=>{while(e&&e.right&&(e.right.deleted||!e.right.countable))e=e.right;const n=new Set;while(e&&(e.deleted||!e.countable)){if(!e.deleted&&e.content.constructor===vi){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Wr=t=>{let e=0;return Rn(t.doc,(n=>{let i=t._start,o=t._start,s=r.Ue();const a=r.JG(s);while(o){if(!1===o.deleted)switch(o.content.constructor){case vi:Br(a,o.content);break;default:e+=Hr(n,i,o,s,a),s=r.JG(a),i=o;break}o=o.right}})),e},Gr=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const o=t.beforeState.get(r)||0;i!==o&&An(t,n.store.clients.get(r),o,i,(t=>{t.deleted||t.content.constructor!==vi||t.constructor===li||e.add(t.parent)}))}Rn(n,(n=>{oe(t,t.deleteSet,(t=>{if(t instanceof li||!t.parent._hasFormatting||e.has(t.parent))return;const r=t.parent;t.content.constructor===vi?e.add(r):jr(n,t)}));for(const t of e)Wr(t)}))},$r=(t,e,n)=>{const i=n,o=r.JG(e.currentAttributes),s=e.right;while(n>0&&null!==e.right){if(!1===e.right.deleted)switch(e.right.content.constructor){case Ni:case gi:case Ai:n<e.right.length&&_n(t,Ze(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&Hr(t,s,e.right,o,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&or(a._searchMarker,e.index,-i+n),e};class qr extends Zn{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)}))}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];Rn(t,(t=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",l=0,c=0;const u=()=>{if(null!==o){let t=null;switch(o){case"delete":c>0&&(t={delete:c}),c=0;break;case"insert":("object"===typeof a||a.length>0)&&(t={insert:a},n.size>0&&(t.attributes={},n.forEach(((e,n)=>{null!==e&&(t.attributes[n]=e)})))),a="";break;case"retain":l>0&&(t={retain:l},ne.xb(s)||(t.attributes=ne.f0({},s))),l=0;break}t&&e.push(t),o=null}};while(null!==i){switch(i.content.constructor){case Ni:case gi:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=1):i.deleted||("retain"!==o&&(u(),o="retain"),l+=1);break;case Ai:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),c+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),l+=i.length);break;case vi:{const{key:e,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const l=n.get(e)||null;Rr(l,a)?null!==a&&i.delete(t):("retain"===o&&u(),Rr(a,r.get(e)||null)?delete s[e]:s[e]=a)}}else if(this.deletes(i)){r.set(e,a);const t=n.get(e)||null;Rr(t,a)||("retain"===o&&u(),s[e]=t)}else if(!i.deleted){r.set(e,a);const n=s[e];void 0!==n&&(Rr(n,a)?null!==n&&i.delete(t):("retain"===o&&u(),null===a?delete s[e]:s[e]=a))}i.deleted||("insert"===o&&u(),Br(n,i.content));break}}i=i.right}u();while(e.length>0){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}})),this._delta=e}return this._delta}}class Yr extends ar{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach((t=>t()))}catch(n){console.error(n)}this._pending=null}_copy(){return new Yr}clone(){const t=new Yr;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new qr(this,t,e);sr(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",e=this._start;while(null!==e)!e.deleted&&e.countable&&e.content.constructor===Ai&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?Rn(this.doc,(n=>{const r=new Dr(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(void 0!==o.insert){const s=e||"string"!==typeof o.insert||i!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&zr(n,this,r,s,o.attributes||{})}else void 0!==o.retain?Vr(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&$r(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(t)))}toDelta(t,e,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function l(){if(s.length>0){const t={};let e=!1;i.forEach(((n,r)=>{e=!0,t[r]=n}));const n={insert:s};e&&(n.attributes=t),r.push(n),s=""}}const c=()=>{while(null!==a){if(hn(a,t)||void 0!==e&&hn(a,e))switch(a.content.constructor){case Ai:{const r=i.get("ychange");void 0===t||hn(a,t)?void 0===e||hn(a,e)?void 0!==r&&(l(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(l(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(l(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Ni:case gi:{l();const t={insert:a.content.getContent()[0]};if(i.size>0){const e={};t.attributes=e,i.forEach(((t,n)=>{e[n]=t}))}r.push(t);break}case vi:hn(a,t)&&(l(),Br(i,a.content));break}a=a.right}l()};return t||e?Rn(o,(n=>{t&&dn(n,t),e&&dn(n,e),c()}),"cleanup"):c(),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?Rn(r,(r=>{const i=Pr(r,this,t);n||(n={},i.currentAttributes.forEach(((t,e)=>{n[e]=t}))),zr(r,this,i,e,n)})):this._pending.push((()=>this.insert(t,e,n)))}insertEmbed(t,e,n={}){const r=this.doc;null!==r?Rn(r,(r=>{const i=Pr(r,this,t);zr(r,this,i,e,n)})):this._pending.push((()=>this.insertEmbed(t,e,n)))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?Rn(n,(n=>{$r(n,Pr(n,this,t),e)})):this._pending.push((()=>this.delete(t,e)))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?Rn(r,(r=>{const i=Pr(r,this,t);null!==i.right&&Vr(r,this,i,e,n)})):this._pending.push((()=>this.format(t,e,n)))}removeAttribute(t){null!==this.doc?Rn(this.doc,(e=>{br(e,this,t)})):this._pending.push((()=>this.removeAttribute(t)))}setAttribute(t,e){null!==this.doc?Rn(this.doc,(n=>{_r(n,this,t,e)})):this._pending.push((()=>this.setAttribute(t,e)))}getAttribute(t){return Sr(this,t)}getAttributes(){return Er(this)}_write(t){t.writeTypeRef(Ii)}}const Xr=t=>new Yr;class Zr{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==Qr&&e.constructor!==Kr||null===e._start)while(null!==t){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Kr extends ar{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Kr}clone(){const t=new Kr;return t.insert(0,this.toArray().map((t=>t instanceof ar?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new Zr(this,t)}querySelector(t){t=t.toUpperCase();const e=new Zr(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)),n=e.next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),o.Dp(new Zr(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)))}_callObserver(t,e){sr(this,t,new ei(this,e,t))}toString(){return dr(this,(t=>t.toString())).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),hr(this,(i=>{r.insertBefore(i.toDOM(t,e,n),null)})),r}insert(t,e){null!==this.doc?Rn(this.doc,(n=>{yr(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)Rn(this.doc,(n=>{const r=t&&t instanceof ar?t._item:t;mr(n,this,r,e)}));else{const n=this._prelimContent,r=null===t?0:n.findIndex((e=>e===t))+1;if(0===r&&null!==t)throw ot.Ue("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?Rn(this.doc,(n=>{wr(n,this,t,e)})):this._prelimContent.splice(t,e)}toArray(){return cr(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return pr(this,t)}slice(t=0,e=this.length){return lr(this,t,e)}forEach(t){hr(this,t)}_write(t){t.writeTypeRef(Oi)}}const Jr=t=>new Kr;class Qr extends Kr{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach(((t,e)=>{this.setAttribute(e,t)})),this._prelimAttrs=null}_copy(){return new Qr(this.nodeName)}clone(){const t=new Qr(this.nodeName),e=this.getAttributes();return ne.Ed(e,((e,n)=>{"string"===typeof e&&t.setAttribute(n,e)})),t.insert(0,this.toArray().map((t=>t instanceof ar?t.clone():t))),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const s in t)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];e.push(r+'="'+t[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){null!==this.doc?Rn(this.doc,(e=>{br(e,this,t)})):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?Rn(this.doc,(n=>{_r(n,this,t,e)})):this._prelimAttrs.set(t,e)}getAttribute(t){return Sr(this,t)}hasAttribute(t){return Ar(this,t)}getAttributes(){return Er(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const t=i[o];"string"===typeof t&&r.setAttribute(o,t)}return hr(this,(i=>{r.appendChild(i.toDOM(t,e,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(ki),t.writeKey(this.nodeName)}}const ti=t=>new Qr(t.readKey());class ei extends Zn{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach((t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)}))}}class ni extends kr{constructor(t){super(),this.hookName=t}_copy(){return new ni(this.hookName)}clone(){const t=new ni(this.hookName);return this.forEach(((e,n)=>{t.set(n,e)})),t}toDOM(t=document,e={},n){const r=e[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(Ri),t.writeKey(this.hookName)}}const ri=t=>new ni(t.readKey());class ii extends Yr{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new ii}clone(){const t=new ii;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort(((t,e)=>t.key<e.key?-1:1)),e.push({nodeName:r,attrs:n})}e.sort(((t,e)=>t.nodeName<e.nodeName?-1:1));let n="";for(let r=0;r<e.length;r++){const t=e[r];n+=`<${t.nodeName}`;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Di)}}const oi=t=>new ii;class si{constructor(t,e){this.id=t,this.length=e}get deleted(){throw ot.Nw()}mergeWith(t){return!1}write(t,e,n){throw ot.Nw()}integrate(t,e){throw ot.Nw()}}const ai=0;class li extends si{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),gn(t.doc.store,this)}write(t,e){t.writeInfo(ai),t.writeLen(this.length-e)}getMissing(t,e){return null}}class ci{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new ci(this.content)}splice(t){throw ot.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const ui=t=>new ci(t.readBuf());class hi{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new hi(this.len)}splice(t){const e=new hi(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){ue(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const di=t=>new hi(t.readLen()),fi=(t,e)=>new ye({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class pi{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new pi(fi(this.doc.guid,this.opts))}splice(t){throw ot.Nw()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const mi=t=>new pi(fi(t.readString(),t.readAny()));class gi{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new gi(this.embed)}splice(t){throw ot.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const yi=t=>new gi(t.readJSON());class vi{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new vi(this.key,this.value)}splice(t){throw ot.Nw()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const wi=t=>new vi(t.readKey(),t.readJSON());class bi{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new bi(this.arr)}splice(t){const e=new bi(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const _i=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new bi(n)};class Si{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Si(this.arr)}splice(t){const e=new Si(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}const Ei=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Si(n)};class Ai{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ai(this.str)}splice(t){const e=new Ai(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const xi=t=>new Ai(t.readString()),Ci=[Mr,Or,Xr,ti,Jr,ri,oi],Ti=0,Mi=1,Ii=2,ki=3,Oi=4,Ri=5,Di=6;class Ni{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ni(this.type._copy())}splice(t){throw ot.Nw()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;while(null!==e)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach((e=>{e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t)})),t.changed.delete(this.type)}gc(t){let e=this.type._start;while(null!==e)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach((e=>{while(null!==e)e.gc(t,!0),e=e.left})),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const Pi=t=>new Ni(Ci[t.readTypeRef()](t)),Li=(t,e)=>{let n,r=e,i=0;do{i>0&&(r=Ze(r.client,r.clock+i)),n=wn(t,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Vi);return{item:n,diff:i}},Bi=(t,e)=>{while(null!==t&&t.keep!==e)t.keep=e,t=t.parent._item},Ui=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new Vi(Ze(r,i+n),e,Ze(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=Ze(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o},Fi=(t,e)=>o.G(t,(t=>ae(t.deletions,e))),zi=(t,e,n,r,i,o)=>{const s=t.doc,a=s.store,l=s.clientID,c=e.redone;if(null!==c)return _n(t,c);let u,h=e.parent._item,d=null;if(null!==h&&!0===h.deleted){if(null===h.redone&&(!n.has(h)||null===zi(t,h,n,r,i,o)))return null;while(null!==h.redone)h=_n(t,h.redone)}const f=null===h?e.parent:h.content.type;if(null===e.parentSub){d=e.left,u=e;while(null!==d){let e=d;while(null!==e&&e.parent._item!==h)e=null===e.redone?null:_n(t,e.redone);if(null!==e&&e.parent._item===h){d=e;break}d=d.left}while(null!==u){let e=u;while(null!==e&&e.parent._item!==h)e=null===e.redone?null:_n(t,e.redone);if(null!==e&&e.parent._item===h){u=e;break}u=u.right}}else if(u=null,e.right&&!i){d=e;while(null!==d&&null!==d.right&&(d.right.redone||ae(r,d.right.id)||Fi(o.undoStack,d.right.id)||Fi(o.redoStack,d.right.id))){d=d.right;while(d.redone)d=_n(t,d.redone)}if(d&&null!==d.right)return null}else d=f._map.get(e.parentSub)||null;const p=mn(a,l),m=Ze(l,p),g=new Vi(m,d,d&&d.lastId,u,u&&u.id,f,e.parentSub,e.content.copy());return e.redone=m,Bi(g,!0),g.integrate(t,0),g};class Vi extends si{constructor(t,e,n,r,i,o,s,a){super(t,a.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?v:0}set marker(t){(this.info&b)>0!==t&&(this.info^=b)}get marker(){return(this.info&b)>0}get keep(){return(this.info&y)>0}set keep(t){this.keep!==t&&(this.info^=y)}get countable(){return(this.info&v)>0}get deleted(){return(this.info&w)>0}set deleted(t){this.deleted!==t&&(this.info^=w)}markDeleted(){this.info|=w}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=mn(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=mn(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ye&&this.id.client!==this.parent.client&&this.parent.clock>=mn(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Sn(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=_n(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===li||this.right&&this.right.constructor===li)this.parent=null;else if(this.parent){if(this.parent.constructor===Ye){const t=wn(e,this.parent);t.constructor===li?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===Vi&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Vi&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Sn(t,t.doc.store,Ze(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start;const r=new Set,i=new Set;while(null!==e&&e!==this.right){if(i.add(e),r.add(e),Xe(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(Xe(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!i.has(wn(t.doc.store,e.origin)))break;r.has(wn(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),gn(t.doc.store,this),this.content.integrate(t,this),Tn(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new li(this.id,this.length).integrate(t,0)}get next(){let t=this.right;while(null!==t&&t.deleted)t=t.right;return t}get prev(){let t=this.left;while(null!==t&&t.deleted)t=t.left;return t}get lastId(){return 1===this.length?this.id:Ze(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Xe(t.origin,this.lastId)&&this.right===t&&Xe(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach((e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))})),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),ue(t.deleteSet,this.id.client,this.id.clock,this.length),Tn(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw ot.zR();this.content.gc(t),e?En(t,this,new li(this.id,this.length)):this.content=new hi(this.length)}write(t,e){const n=e>0?Ze(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&A|(null===n?0:E)|(null===r?0:S)|(null===i?0:_);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=Ke(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===Ye?(t.writeParentInfo(!1),t.writeLeftID(e)):ot.zR();null!==i&&t.writeString(i)}this.content.write(t,e)}}const Hi=(t,e)=>ji[e&A](t),ji=[()=>{ot.zR()},di,_i,ui,xi,yi,wi,Pi,Ei,mi,()=>{ot.zR()}],Wi=10;class Gi extends si{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){ot.zR()}write(t,e){t.writeInfo(Wi),B(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const $i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},qi="__ $YJS$ __";!0===$i[qi]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),$i[qi]=!0}}]);
//# sourceMappingURL=chunk-vendors.737b6254.js.map