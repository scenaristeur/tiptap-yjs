(self["webpackChunknoosphere3"]=self["webpackChunknoosphere3"]||[]).push([[998],{9662:function(t,e,n){var r=n(614),i=n(6330),o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not a function")}},6077:function(t,e,n){var r=n(614),i=String,o=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw o("Can't set "+i(t)+" as a prototype")}},5787:function(t,e,n){var r=n(7976),i=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw i("Incorrect invocation")}},9670:function(t,e,n){var r=n(111),i=String,o=TypeError;t.exports=function(t){if(r(t))return t;throw o(i(t)+" is not an object")}},3013:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var r,i,o,s=n(3013),a=n(9781),c=n(7854),l=n(614),u=n(111),h=n(2597),d=n(648),f=n(6330),p=n(8880),g=n(8052),m=n(7045),y=n(7976),w=n(9518),b=n(7674),v=n(5112),E=n(9711),A=n(9909),C=A.enforce,S=A.get,_=c.Int8Array,T=_&&_.prototype,I=c.Uint8ClampedArray,M=I&&I.prototype,k=_&&w(_),N=T&&w(T),O=Object.prototype,D=c.TypeError,x=v("toStringTag"),R=E("TYPED_ARRAY_TAG"),B="TypedArrayConstructor",L=s&&!!b&&"Opera"!==d(c.opera),P=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},z=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||h(F,e)||h(U,e)},H=function(t){var e=w(t);if(u(e)){var n=S(e);return n&&h(n,B)?n[B]:H(e)}},j=function(t){if(!u(t))return!1;var e=d(t);return h(F,e)||h(U,e)},V=function(t){if(j(t))return t;throw D("Target is not a typed array")},W=function(t){if(l(t)&&(!b||y(k,t)))return t;throw D(f(t)+" is not a typed array constructor")},$=function(t,e,n,r){if(a){if(n)for(var i in F){var o=c[i];if(o&&h(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(l){}}}N[t]&&!n||g(N,t,n?e:L&&T[t]||e,r)}},G=function(t,e,n){var r,i;if(a){if(b){if(n)for(r in F)if(i=c[r],i&&h(i,t))try{delete i[t]}catch(o){}if(k[t]&&!n)return;try{return g(k,t,n?e:L&&k[t]||e)}catch(o){}}for(r in F)i=c[r],!i||i[t]&&!n||g(i,t,e)}};for(r in F)i=c[r],o=i&&i.prototype,o?C(o)[B]=i:L=!1;for(r in U)i=c[r],o=i&&i.prototype,o&&(C(o)[B]=i);if((!L||!l(k)||k===Function.prototype)&&(k=function(){throw D("Incorrect invocation")},L))for(r in F)c[r]&&b(c[r],k);if((!L||!N||N===O)&&(N=k.prototype,L))for(r in F)c[r]&&b(c[r].prototype,N);if(L&&w(M)!==N&&b(M,N),a&&!h(N,x))for(r in P=!0,m(N,x,{configurable:!0,get:function(){return u(this)?this[R]:void 0}}),F)c[r]&&p(c[r],R,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:P&&R,aTypedArray:V,aTypedArrayConstructor:W,exportTypedArrayMethod:$,exportTypedArrayStaticMethod:G,getTypedArrayConstructor:H,isView:z,isTypedArray:j,TypedArray:k,TypedArrayPrototype:N}},7745:function(t,e,n){var r=n(6244);t.exports=function(t,e){var n=0,i=r(e),o=new t(i);while(i>n)o[n]=e[n++];return o}},1318:function(t,e,n){var r=n(5656),i=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,c=r(e),l=o(c),u=i(s,l);if(t&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},3658:function(t,e,n){"use strict";var r=n(9781),i=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!s(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){var r=n(6244);t.exports=function(t,e){for(var n=r(t),i=new e(n),o=0;o<n;o++)i[o]=t[n-o-1];return i}},1572:function(t,e,n){var r=n(6244),i=n(9303),o=RangeError;t.exports=function(t,e,n,s){var a=r(t),c=i(n),l=c<0?a+c:c;if(l>=a||l<0)throw o("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===l?s:t[h];return u}},4326:function(t,e,n){var r=n(1702),i=r({}.toString),o=r("".slice);t.exports=function(t){return o(i(t),8,-1)}},648:function(t,e,n){var r=n(1694),i=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),c=Object,l="Arguments"==o(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=r?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=c(t),a))?n:l?o(e):"Object"==(r=o(e))&&i(e.callee)?"Arguments":r}},9920:function(t,e,n){var r=n(2597),i=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=i(e),c=s.f,l=o.f,u=0;u<a.length;u++){var h=a[u];r(t,h)||n&&r(n,h)||c(t,h,l(e,h))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var r=n(9781),i=n(3070),o=n(9114);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7045:function(t,e,n){var r=n(6339),i=n(3070);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),i.f(t,e,n)}},8052:function(t,e,n){var r=n(614),i=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(r(n)&&o(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(u){}c?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var r=n(7854),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},5117:function(t,e,n){"use strict";var r=n(6330),i=TypeError;t.exports=function(t,e){if(!delete t[e])throw i("Cannot delete property "+r(e)+" of "+r(t))}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var r=n(7854),i=n(111),o=r.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var r,i,o=n(7854),s=n(8113),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(r=u.split("."),i=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&s&&(r=s.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/),r&&(i=+r[1]))),t.exports=i},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){var r=n(1702),i=Error,o=r("".replace),s=function(t){return String(i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(s);t.exports=function(t,e){if(c&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=o(t,a,"");return t}},2109:function(t,e,n){var r=n(7854),i=n(1236).f,o=n(8880),s=n(8052),a=n(3072),c=n(9920),l=n(4705);t.exports=function(t,e){var n,u,h,d,f,p,g=t.target,m=t.global,y=t.stat;if(u=m?r:y?r[g]||a(g,{}):(r[g]||{}).prototype,u)for(h in e){if(f=e[h],t.dontCallGetSet?(p=i(u,h),d=p&&p.value):d=u[h],n=l(m?h:g+(y?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(t.sham||d&&d.sham)&&o(f,"sham",!0),s(u,h,f,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},4374:function(t,e,n){var r=n(7293);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var r=n(4374),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(t,e,n){var r=n(9781),i=n(2597),o=Function.prototype,s=r&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!r||r&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},5668:function(t,e,n){var r=n(1702),i=n(9662);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},1702:function(t,e,n){var r=n(4374),i=Function.prototype,o=i.call,s=r&&i.bind.bind(o,o);t.exports=r?s:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,n){var r=n(7854),i=n(614),o=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t]):r[t]&&r[t][e]}},8173:function(t,e,n){var r=n(9662),i=n(8554);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(t,e,n){var r=n(1702),i=n(7908),o=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(i(t),e)}},3501:function(t){t.exports={}},4664:function(t,e,n){var r=n(9781),i=n(7293),o=n(317);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(1702),i=n(7293),o=n(4326),s=Object,a=r("".split);t.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:function(t,e,n){var r=n(614),i=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&r(s=e.constructor)&&s!==n&&i(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:function(t,e,n){var r=n(1702),i=n(614),o=n(5465),s=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},9909:function(t,e,n){var r,i,o,s=n(4811),a=n(7854),c=n(111),l=n(8880),u=n(2597),h=n(5465),d=n(6200),f=n(3501),p="Object already initialized",g=a.TypeError,m=a.WeakMap,y=function(t){return o(t)?i(t):r(t,{})},w=function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw g("Incompatible receiver, "+t+" required");return n}};if(s||h.state){var b=h.state||(h.state=new m);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw g(p);return e.facade=t,b.set(t,e),e},i=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var v=d("state");f[v]=!0,r=function(t,e){if(u(t,v))throw g(p);return e.facade=t,l(t,v,e),e},i=function(t){return u(t,v)?t[v]:{}},o=function(t){return u(t,v)}}t.exports={set:r,get:i,has:o,enforce:y,getterFor:w}},3157:function(t,e,n){var r=n(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4067:function(t,e,n){var r=n(648);t.exports=function(t){var e=r(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){var r=n(4154),i=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===i}:function(t){return"function"==typeof t}},4705:function(t,e,n){var r=n(7293),i=n(614),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n==u||n!=l&&(i(e)?r(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){var r=n(614),i=n(4154),o=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===o}:function(t){return"object"==typeof t?null!==t:r(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(5005),i=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&o(e.prototype,a(t))}},6244:function(t,e,n){var r=n(7466);t.exports=function(t){return r(t.length)}},6339:function(t,e,n){var r=n(1702),i=n(7293),o=n(614),s=n(2597),a=n(9781),c=n(6530).CONFIGURABLE,l=n(2788),u=n(9909),h=u.enforce,d=u.get,f=String,p=Object.defineProperty,g=r("".slice),m=r("".replace),y=r([].join),w=a&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),v=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),w&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var r=h(t);return s(r,"source")||(r.source=y(b,"string"==typeof e?e:"")),t};Function.prototype.toString=v((function(){return o(this)&&d(this).source||l(this)}),"toString")},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},6277:function(t,e,n){var r=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},3070:function(t,e,n){var r=n(9781),i=n(4664),o=n(3353),s=n(9670),a=n(4948),c=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";e.f=r?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=u(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:h in n?n[h]:r[h],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),i)try{return l(t,e,n)}catch(r){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),i=n(6916),o=n(5296),s=n(9114),a=n(5656),c=n(4948),l=n(2597),u=n(4664),h=Object.getOwnPropertyDescriptor;e.f=r?h:function(t,e){if(t=a(t),e=c(e),u)try{return h(t,e)}catch(n){}if(l(t,e))return s(!i(o.f,t,e),t[e])}},8006:function(t,e,n){var r=n(6324),i=n(748),o=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(2597),i=n(614),o=n(7908),s=n(6200),a=n(8544),c=s("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=o(t);if(r(e,c))return e[c];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof l?u:null}},7976:function(t,e,n){var r=n(1702);t.exports=r({}.isPrototypeOf)},6324:function(t,e,n){var r=n(1702),i=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),c=r([].push);t.exports=function(t,e){var n,r=o(t),l=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&c(u,n);while(e.length>l)i(r,n=e[l++])&&(~s(u,n)||c(u,n));return u}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(5668),i=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=r(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,r){return i(n),o(r),e?t(n,r):n.__proto__=r,n}}():void 0)},2140:function(t,e,n){var r=n(6916),i=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!o(a=r(n,t)))return a;if(i(n=t.valueOf)&&!o(a=r(n,t)))return a;if("string"!==e&&i(n=t.toString)&&!o(a=r(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),i=n(1702),o=n(8006),s=n(5181),a=n(9670),c=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},4488:function(t,e,n){var r=n(8554),i=TypeError;t.exports=function(t){if(r(t))throw i("Can't call method on "+t);return t}},6200:function(t,e,n){var r=n(2309),i=n(9711),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},5465:function(t,e,n){var r=n(7854),i=n(3072),o="__core-js_shared__",s=r[o]||i(o,{});t.exports=s},2309:function(t,e,n){var r=n(1913),i=n(5465);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.1",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(t,e,n){var r=n(7392),i=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(t,e,n){var r=n(9303),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},4599:function(t,e,n){var r=n(7593),i=TypeError;t.exports=function(t){var e=r(t,"number");if("number"==typeof e)throw i("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){var r=n(8361),i=n(4488);t.exports=function(t){return r(i(t))}},9303:function(t,e,n){var r=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:r(e)}},7466:function(t,e,n){var r=n(9303),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488),i=Object;t.exports=function(t){return i(r(t))}},7593:function(t,e,n){var r=n(6916),i=n(111),o=n(2190),s=n(8173),a=n(2140),c=n(5112),l=TypeError,u=c("toPrimitive");t.exports=function(t,e){if(!i(t)||o(t))return t;var n,c=s(t,u);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var r=n(7593),i=n(2190);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},1694:function(t,e,n){var r=n(5112),i=r("toStringTag"),o={};o[i]="z",t.exports="[object z]"===String(o)},1340:function(t,e,n){var r=n(648),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var r=n(1702),i=0,o=Math.random(),s=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++i+o,36)}},3307:function(t,e,n){var r=n(6293);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var r=n(9781),i=n(7293);t.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(t,e,n){var r=n(7854),i=n(614),o=r.WeakMap;t.exports=i(o)&&/native code/.test(String(o))},5112:function(t,e,n){var r=n(7854),i=n(2309),o=n(2597),s=n(9711),a=n(6293),c=n(3307),l=r.Symbol,u=i("wks"),h=c?l["for"]||l:l&&l.withoutSetter||s;t.exports=function(t){return o(u,t)||(u[t]=a&&o(l,t)?l[t]:h("Symbol."+t)),u[t]}},7658:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(7207),c=n(7293),l=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=l||!u();r({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=i(this),n=o(e),r=arguments.length;a(n+r);for(var c=0;c<r;c++)e[n]=arguments[c],n++;return s(e,n),n}})},541:function(t,e,n){"use strict";var r=n(2109),i=n(7908),o=n(6244),s=n(3658),a=n(5117),c=n(7207),l=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},h=l||!u();r({target:"Array",proto:!0,arity:1,forced:h},{unshift:function(t){var e=i(this),n=o(e),r=arguments.length;if(r){c(n+r);var l=n;while(l--){var u=l+r;l in e?e[u]=e[l]:a(e,u)}for(var h=0;h<r;h++)e[h]=arguments[h]}return s(e,n+r)}})},1439:function(t,e,n){"use strict";var r=n(1843),i=n(260),o=i.aTypedArray,s=i.exportTypedArrayMethod,a=i.getTypedArrayConstructor;s("toReversed",(function(){return r(o(this),a(this))}))},7585:function(t,e,n){"use strict";var r=n(260),i=n(1702),o=n(9662),s=n(7745),a=r.aTypedArray,c=r.getTypedArrayConstructor,l=r.exportTypedArrayMethod,u=i(r.TypedArrayPrototype.sort);l("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(c(e),e);return u(n,t)}))},5315:function(t,e,n){"use strict";var r=n(1572),i=n(260),o=n(4067),s=n(9303),a=n(4599),c=i.aTypedArray,l=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=c(this),i=s(t),u=o(n)?a(e):+e;return r(n,l(n),i,u)}}["with"],!h)},3767:function(t,e,n){n(1439)},8585:function(t,e,n){n(7585)},8696:function(t,e,n){n(5315)},2801:function(t,e,n){"use strict";var r=n(2109),i=n(7854),o=n(5005),s=n(9114),a=n(3070).f,c=n(2597),l=n(5787),u=n(9587),h=n(6277),d=n(3678),f=n(1060),p=n(9781),g=n(1913),m="DOMException",y=o("Error"),w=o(m),b=function(){l(this,v);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),r=new w(e,n),i=y(e);return i.name=m,a(r,"stack",s(1,f(i.stack,1))),u(r,this,b),r},v=b.prototype=w.prototype,E="stack"in y(m),A="stack"in new w(1,2),C=w&&p&&Object.getOwnPropertyDescriptor(i,m),S=!!C&&!(C.writable&&C.configurable),_=E&&!S&&!A;r({global:!0,constructor:!0,forced:g||_},{DOMException:_?b:w});var T=o(m),I=T.prototype;if(I.constructor!==T)for(var M in g||a(I,"constructor",s(1,T)),d)if(c(d,M)){var k=d[M],N=k.s;c(T,N)||a(T,N,s(6,k.c))}},368:function(){},6742:function(){},1958:function(){},5110:function(){},5713:function(t,e,n){"use strict";n(3767),n(8585),n(8696),n(7658);const r=-8,i=-4,o=0,s=1,a=1,c=2,l=5,u=1024,h=2048,d=8192,f=0,p=4,g=8,m=12,y=12,w=16,b="undefined"!==typeof BigUint64Array,v=Symbol(),E=1024;function A(t,e){const n=new Uint32Array(t),r=new Uint16Array(t);var o=n[e+i>>>2]>>>1,s=e>>>1;if(o<=E)return String.fromCharCode.apply(String,r.subarray(s,s+o));const a=[];do{const t=r[s+E-1],e=t>=55296&&t<56320?E-1:E;a.push(String.fromCharCode.apply(String,r.subarray(s,s+=e))),o-=e}while(o>E);return a.join("")+String.fromCharCode.apply(String,r.subarray(s,s+o))}function C(t){const e={};function n(t,e){return t?A(t.buffer,e):"<yet unknown>"}const r=t.env=t.env||{};return r.abort=r.abort||function(t,i,o,s){const a=e.memory||r.memory;throw Error("abort: "+n(a,t)+" at "+n(a,i)+":"+o+":"+s)},r.trace=r.trace||function(t,i){const o=e.memory||r.memory;console.log("trace: "+n(o,t)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function S(t,e){const n=e.exports,v=n.memory,E=n.table,C=n["__alloc"],S=n["__retain"],_=n["__rtti_base"]||-1;function T(t){const e=new Uint32Array(v.buffer),n=e[_>>>2];if((t>>>=0)>=n)throw Error("invalid id: "+t);return e[(_+4>>>2)+2*t]}function I(t){const e=new Uint32Array(v.buffer),n=e[_>>>2];if((t>>>=0)>=n)throw Error("invalid id: "+t);return e[(_+4>>>2)+2*t+1]}function M(t){return 31-Math.clz32(t>>>l&31)}function N(t){const e=t.length,n=C(e<<1,s),r=new Uint16Array(v.buffer);for(var i=0,o=n>>>1;i<e;++i)r[o+i]=t.charCodeAt(i);return n}function O(t){const e=v.buffer,n=new Uint32Array(e)[t+r>>>2];if(n!==s)throw Error("not a string: "+t);return A(e,t)}function D(t,e,n){const r=v.buffer;if(n)switch(t){case 2:return new Float32Array(r);case 3:return new Float64Array(r)}else switch(t){case 0:return new(e?Int8Array:Uint8Array)(r);case 1:return new(e?Int16Array:Uint16Array)(r);case 2:return new(e?Int32Array:Uint32Array)(r);case 3:return new(e?BigInt64Array:BigUint64Array)(r)}throw Error("unsupported align: "+t)}function x(t,e){const n=T(t);if(!(n&(a|c)))throw Error("not an array: "+t+" @ "+n);const r=M(n),i=e.length,s=C(i<<r,o),l=C(n&c?w:m,t),b=new Uint32Array(v.buffer);b[l+f>>>2]=S(s),b[l+p>>>2]=s,b[l+g>>>2]=i<<r,n&c&&(b[l+y>>>2]=i);const E=D(r,n&u,n&h);if(n&d)for(let o=0;o<i;++o)E[(s>>>r)+o]=S(e[o]);else E.set(e,s>>>r);return l}function R(t){const e=new Uint32Array(v.buffer),n=e[t+r>>>2],o=T(n);if(!(o&a))throw Error("not an array: "+n);const s=M(o);var l=e[t+p>>>2];const d=o&c?e[t+y>>>2]:e[l+i>>>2]>>>s;return D(s,o&u,o&h).subarray(l>>>=s,l+d)}function B(t){const e=R(t),n=e.length,r=new Array(n);for(let i=0;i<n;i++)r[i]=e[i];return r}function L(t){const e=v.buffer,n=new Uint32Array(e)[t+i>>>2];return e.slice(t,t+n)}function P(t,e,n){return new t(F(t,e,n))}function F(t,e,n){const r=v.buffer,o=new Uint32Array(r),s=o[n+p>>>2];return new t(r,s,o[s+i>>>2]>>>e)}function U(t,e){const n=new Uint32Array(v.buffer);var i=n[t+r>>>2];if(i<=n[_>>>2])do{if(i==e)return!0}while(i=I(i));return!1}return t.__allocString=N,t.__getString=O,t.__allocArray=x,t.__getArrayView=R,t.__getArray=B,t.__getArrayBuffer=L,t.__getInt8Array=P.bind(null,Int8Array,0),t.__getInt8ArrayView=F.bind(null,Int8Array,0),t.__getUint8Array=P.bind(null,Uint8Array,0),t.__getUint8ArrayView=F.bind(null,Uint8Array,0),t.__getUint8ClampedArray=P.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=F.bind(null,Uint8ClampedArray,0),t.__getInt16Array=P.bind(null,Int16Array,1),t.__getInt16ArrayView=F.bind(null,Int16Array,1),t.__getUint16Array=P.bind(null,Uint16Array,1),t.__getUint16ArrayView=F.bind(null,Uint16Array,1),t.__getInt32Array=P.bind(null,Int32Array,2),t.__getInt32ArrayView=F.bind(null,Int32Array,2),t.__getUint32Array=P.bind(null,Uint32Array,2),t.__getUint32ArrayView=F.bind(null,Uint32Array,2),b&&(t.__getInt64Array=P.bind(null,BigInt64Array,3),t.__getInt64ArrayView=F.bind(null,BigInt64Array,3),t.__getUint64Array=P.bind(null,BigUint64Array,3),t.__getUint64ArrayView=F.bind(null,BigUint64Array,3)),t.__getFloat32Array=P.bind(null,Float32Array,2),t.__getFloat32ArrayView=F.bind(null,Float32Array,2),t.__getFloat64Array=P.bind(null,Float64Array,3),t.__getFloat64ArrayView=F.bind(null,Float64Array,3),t.__instanceof=U,t.memory=t.memory||v,t.table=t.table||E,k(n,t)}function _(t){return"undefined"!==typeof Response&&t instanceof Response}async function T(t,e){return _(t=await t)?M(t,e):S(C(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}function I(t,e){return S(C(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}async function M(t,e){return WebAssembly.instantiateStreaming?S(C(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):T(_(t=await t)?t.arrayBuffer():t,e)}function k(t,e){var n=e?Object.create(e):{},r=t["__argumentsLength"]?function(e){t["__argumentsLength"].value=e}:t["__setArgumentsLength"]||t["__setargc"]||function(){};for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i))continue;const e=t[i];let o=i.split("."),s=n;while(o.length>1){let t=o.shift();Object.prototype.hasOwnProperty.call(s,t)||(s[t]={}),s=s[t]}let a=o[0],c=a.indexOf("#");if(c>=0){let n=a.substring(0,c),o=s[n];if("undefined"===typeof o||!o.prototype){let t=function(...e){return t.wrap(t.prototype.constructor(0,...e))};t.prototype={valueOf:function(){return this[v]}},t.wrap=function(e){return Object.create(t.prototype,{[v]:{value:e,writable:!1}})},o&&Object.getOwnPropertyNames(o).forEach((e=>Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e)))),s[n]=t}if(a=a.substring(c+1),s=s[n].prototype,/^(get|set):/.test(a)){if(!Object.prototype.hasOwnProperty.call(s,a=a.substring(4))){let e=t[i.replace("set:","get:")],n=t[i.replace("get:","set:")];Object.defineProperty(s,a,{get:function(){return e(this[v])},set:function(t){n(this[v],t)},enumerable:!0})}}else"constructor"===a?(s[a]=(...t)=>(r(t.length),e(...t))).original=e:(s[a]=function(...t){return r(t.length),e(this[v],...t)}).original=e}else/^(get|set):/.test(a)?Object.prototype.hasOwnProperty.call(s,a=a.substring(4))||Object.defineProperty(s,a,{get:t[i.replace("set:","get:")],set:t[i.replace("get:","set:")],enumerable:!0}):"function"===typeof e&&e!==r?(s[a]=(...t)=>(r(t.length),e(...t))).original=e:s[a]=e}return n}e.instantiate=T,e.instantiateSync=I,e.instantiateStreaming=M,e.demangle=k},5186:function(t){"use strict";function e(t,e){var n=new Array(arguments.length-1),r=0,i=2,o=!0;while(i<arguments.length)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(t){if(o)if(o=!1,t)s(t);else{var e=new Array(arguments.length-1),n=0;while(n<e.length)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(a){o&&(o=!1,s(a))}}))}t.exports=e},8673:function(t,e,n){"use strict";n(7658);var r=e;r.length=function(t){var e=t.length;if(!e)return 0;var n=0;while(--e%4>1&&"="===t.charAt(e))++n;return Math.ceil(3*t.length)/4-n};for(var i=new Array(64),o=new Array(123),s=0;s<64;)o[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(t,e,n){var r,o=null,s=[],a=0,c=0;while(e<n){var l=t[e++];switch(c){case 0:s[a++]=i[l>>2],r=(3&l)<<4,c=1;break;case 1:s[a++]=i[r|l>>4],r=(15&l)<<2,c=2;break;case 2:s[a++]=i[r|l>>6],s[a++]=i[63&l],c=0;break}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=i[r],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";r.decode=function(t,e,n){for(var r,i=n,s=0,c=0;c<t.length;){var l=t.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=o[l]))throw Error(a);switch(s){case 0:r=l,s=1;break;case 1:e[n++]=r<<2|(48&l)>>4,r=l,s=2;break;case 2:e[n++]=(15&r)<<4|(60&l)>>2,r=l,s=3;break;case 3:e[n++]=(3&r)<<6|l,s=0;break}}if(1===s)throw Error(a);return n-i},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},8825:function(t,e,n){"use strict";function r(){this._listeners={}}n(7658),t.exports=r,r.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},2913:function(t,e,n){"use strict";function r(t){return"undefined"!==typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function a(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:o,t.writeFloatBE=r?o:i,t.readFloatLE=r?s:a,t.readFloatBE=r?a:s}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((i<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((i<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(e)/Math.LN2),s=8388607&Math.round(e*Math.pow(2,-o)*8388608);t((i<<31|o+127<<23|s)>>>0,n,r)}}function n(t,e,n){var r=t(e,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,o),t.readFloatLE=n.bind(null,s),t.readFloatBE=n.bind(null,a)}(),"undefined"!==typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function a(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:o,t.writeDoubleBE=r?o:i,t.readDoubleLE=r?s:a,t.readDoubleBE=r?a:s}():function(){function e(t,e,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)t(0,i,o+e),t(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))t(0,i,o+e),t(2146959360,i,o+n);else if(r>17976931348623157e292)t(0,i,o+e),t((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)a=r/5e-324,t(a>>>0,i,o+e),t((s<<31|a/4294967296)>>>0,i,o+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),a=r*Math.pow(2,-c),t(4503599627370496*a>>>0,i,o+e),t((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function n(t,e,n,r,i){var o=t(r,i+e),s=t(r,i+n),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+o;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,o,4,0),t.readDoubleLE=n.bind(null,s,0,4),t.readDoubleBE=n.bind(null,a,4,0)}(),t}function i(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function o(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function s(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}n(3767),n(8585),n(8696),t.exports=r(r)},6332:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1168:function(t){"use strict";function e(t,e,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return t(n);s+n>r&&(o=t(r),s=0);var a=e.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}t.exports=e},9561:function(t,e,n){"use strict";n(7658);var r=e;r.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:55296===(64512&n)&&56320===(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},r.read=function(t,e,n){var r=n-e;if(r<1)return"";var i,o=null,s=[],a=0;while(e<n)i=t[e++],i<128?s[a++]=i:i>191&&i<224?s[a++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[a++]=55296+(i>>10),s[a++]=56320+(1023&i)):s[a++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(t,e,n){for(var r,i,o=n,s=0;s<t.length;++s)r=t.charCodeAt(s),r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(i=t.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-o}},4870:function(t,e,n){"use strict";n.d(e,{B:function(){return s},Bj:function(){return o},Fl:function(){return qt},IU:function(){return Ot},Jd:function(){return _},PG:function(){return It},SU:function(){return jt},Um:function(){return St},WL:function(){return Wt},X$:function(){return k},X3:function(){return Nt},XI:function(){return Ut},Xl:function(){return Dt},ZM:function(){return Gt},dq:function(){return Pt},iH:function(){return Ft},j:function(){return I},lk:function(){return T},nZ:function(){return c},qj:function(){return Ct},qq:function(){return E},yT:function(){return kt}});n(7658);var r=n(7139);let i;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){i=this}off(){i=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function s(t){return new o(t)}function a(t,e=i){e&&e.active&&e.effects.push(t)}function c(){return i}const l=t=>{const e=new Set(t);return e.w=0,e.n=0,e},u=t=>(t.w&m)>0,h=t=>(t.n&m)>0,d=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=m},f=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];u(i)&&!h(i)?i.delete(t):e[n++]=i,i.w&=~m,i.n&=~m}e.length=n}},p=new WeakMap;let g=0,m=1;const y=30;let w;const b=Symbol(""),v=Symbol("");class E{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let t=w,e=C;while(t){if(t===this)return;t=t.parent}try{return this.parent=w,w=this,C=!0,m=1<<++g,g<=y?d(this):A(this),this.fn()}finally{g<=y&&f(this),m=1<<--g,w=this.parent,C=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){w===this?this.deferStop=!0:this.active&&(A(this),this.onStop&&this.onStop(),this.active=!1)}}function A(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let C=!0;const S=[];function _(){S.push(C),C=!1}function T(){const t=S.pop();C=void 0===t||t}function I(t,e,n){if(C&&w){let e=p.get(t);e||p.set(t,e=new Map);let r=e.get(n);r||e.set(n,r=l());const i=void 0;M(r,i)}}function M(t,e){let n=!1;g<=y?h(t)||(t.n|=m,n=!u(t)):n=!t.has(w),n&&(t.add(w),w.deps.push(t))}function k(t,e,n,i,o,s){const a=p.get(t);if(!a)return;let c=[];if("clear"===e)c=[...a.values()];else if("length"===n&&(0,r.kJ)(t)){const t=Number(i);a.forEach(((e,n)=>{("length"===n||n>=t)&&c.push(e)}))}else switch(void 0!==n&&c.push(a.get(n)),e){case"add":(0,r.kJ)(t)?(0,r.S0)(n)&&c.push(a.get("length")):(c.push(a.get(b)),(0,r._N)(t)&&c.push(a.get(v)));break;case"delete":(0,r.kJ)(t)||(c.push(a.get(b)),(0,r._N)(t)&&c.push(a.get(v)));break;case"set":(0,r._N)(t)&&c.push(a.get(b));break}if(1===c.length)c[0]&&N(c[0]);else{const t=[];for(const e of c)e&&t.push(...e);N(l(t))}}function N(t,e){const n=(0,r.kJ)(t)?t:[...t];for(const r of n)r.computed&&O(r,e);for(const r of n)r.computed||O(r,e)}function O(t,e){(t!==w||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const D=(0,r.fY)("__proto__,__v_isRef,__isVue"),x=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(r.yk)),R=z(),B=z(!1,!0),L=z(!0),P=F();function F(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Ot(this);for(let e=0,i=this.length;e<i;e++)I(n,"get",e+"");const r=n[e](...t);return-1===r||!1===r?n[e](...t.map(Ot)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){_();const n=Ot(this)[e].apply(this,t);return T(),n}})),t}function U(t){const e=Ot(this);return I(e,"has",t),e.hasOwnProperty(t)}function z(t=!1,e=!1){return function(n,i,o){if("__v_isReactive"===i)return!t;if("__v_isReadonly"===i)return t;if("__v_isShallow"===i)return e;if("__v_raw"===i&&o===(t?e?vt:bt:e?wt:yt).get(n))return n;const s=(0,r.kJ)(n);if(!t){if(s&&(0,r.RI)(P,i))return Reflect.get(P,i,o);if("hasOwnProperty"===i)return U}const a=Reflect.get(n,i,o);return((0,r.yk)(i)?x.has(i):D(i))?a:(t||I(n,"get",i),e?a:Pt(a)?s&&(0,r.S0)(i)?a:a.value:(0,r.Kn)(a)?t?_t(a):Ct(a):a)}}const H=V(),j=V(!0);function V(t=!1){return function(e,n,i,o){let s=e[n];if(Mt(s)&&Pt(s)&&!Pt(i))return!1;if(!t&&(kt(i)||Mt(i)||(s=Ot(s),i=Ot(i)),!(0,r.kJ)(e)&&Pt(s)&&!Pt(i)))return s.value=i,!0;const a=(0,r.kJ)(e)&&(0,r.S0)(n)?Number(n)<e.length:(0,r.RI)(e,n),c=Reflect.set(e,n,i,o);return e===Ot(o)&&(a?(0,r.aU)(i,s)&&k(e,"set",n,i,s):k(e,"add",n,i)),c}}function W(t,e){const n=(0,r.RI)(t,e),i=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&k(t,"delete",e,void 0,i),o}function $(t,e){const n=Reflect.has(t,e);return(0,r.yk)(e)&&x.has(e)||I(t,"has",e),n}function G(t){return I(t,"iterate",(0,r.kJ)(t)?"length":b),Reflect.ownKeys(t)}const Y={get:R,set:H,deleteProperty:W,has:$,ownKeys:G},X={get:L,set(t,e){return!0},deleteProperty(t,e){return!0}},q=(0,r.l7)({},Y,{get:B,set:j}),K=t=>t,J=t=>Reflect.getPrototypeOf(t);function Z(t,e,n=!1,r=!1){t=t["__v_raw"];const i=Ot(t),o=Ot(e);n||(e!==o&&I(i,"get",e),I(i,"get",o));const{has:s}=J(i),a=r?K:n?Rt:xt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Q(t,e=!1){const n=this["__v_raw"],r=Ot(n),i=Ot(t);return e||(t!==i&&I(r,"has",t),I(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function tt(t,e=!1){return t=t["__v_raw"],!e&&I(Ot(t),"iterate",b),Reflect.get(t,"size",t)}function et(t){t=Ot(t);const e=Ot(this),n=J(e),r=n.has.call(e,t);return r||(e.add(t),k(e,"add",t,t)),this}function nt(t,e){e=Ot(e);const n=Ot(this),{has:i,get:o}=J(n);let s=i.call(n,t);s||(t=Ot(t),s=i.call(n,t));const a=o.call(n,t);return n.set(t,e),s?(0,r.aU)(e,a)&&k(n,"set",t,e,a):k(n,"add",t,e),this}function rt(t){const e=Ot(this),{has:n,get:r}=J(e);let i=n.call(e,t);i||(t=Ot(t),i=n.call(e,t));const o=r?r.call(e,t):void 0,s=e.delete(t);return i&&k(e,"delete",t,void 0,o),s}function it(){const t=Ot(this),e=0!==t.size,n=void 0,r=t.clear();return e&&k(t,"clear",void 0,void 0,n),r}function ot(t,e){return function(n,r){const i=this,o=i["__v_raw"],s=Ot(o),a=e?K:t?Rt:xt;return!t&&I(s,"iterate",b),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function st(t,e,n){return function(...i){const o=this["__v_raw"],s=Ot(o),a=(0,r._N)(s),c="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=o[t](...i),h=n?K:e?Rt:xt;return!e&&I(s,"iterate",l?v:b),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:c?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function at(t){return function(...e){return"delete"!==t&&this}}function ct(){const t={get(t){return Z(this,t)},get size(){return tt(this)},has:Q,add:et,set:nt,delete:rt,clear:it,forEach:ot(!1,!1)},e={get(t){return Z(this,t,!1,!0)},get size(){return tt(this)},has:Q,add:et,set:nt,delete:rt,clear:it,forEach:ot(!1,!0)},n={get(t){return Z(this,t,!0)},get size(){return tt(this,!0)},has(t){return Q.call(this,t,!0)},add:at("add"),set:at("set"),delete:at("delete"),clear:at("clear"),forEach:ot(!0,!1)},r={get(t){return Z(this,t,!0,!0)},get size(){return tt(this,!0)},has(t){return Q.call(this,t,!0)},add:at("add"),set:at("set"),delete:at("delete"),clear:at("clear"),forEach:ot(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{t[i]=st(i,!1,!1),n[i]=st(i,!0,!1),e[i]=st(i,!1,!0),r[i]=st(i,!0,!0)})),[t,n,e,r]}const[lt,ut,ht,dt]=ct();function ft(t,e){const n=e?t?dt:ht:t?ut:lt;return(e,i,o)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,r.RI)(n,i)&&i in e?n:e,i,o)}const pt={get:ft(!1,!1)},gt={get:ft(!1,!0)},mt={get:ft(!0,!1)};const yt=new WeakMap,wt=new WeakMap,bt=new WeakMap,vt=new WeakMap;function Et(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function At(t){return t["__v_skip"]||!Object.isExtensible(t)?0:Et((0,r.W7)(t))}function Ct(t){return Mt(t)?t:Tt(t,!1,Y,pt,yt)}function St(t){return Tt(t,!1,q,gt,wt)}function _t(t){return Tt(t,!0,X,mt,bt)}function Tt(t,e,n,i,o){if(!(0,r.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=At(t);if(0===a)return t;const c=new Proxy(t,2===a?i:n);return o.set(t,c),c}function It(t){return Mt(t)?It(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function Mt(t){return!(!t||!t["__v_isReadonly"])}function kt(t){return!(!t||!t["__v_isShallow"])}function Nt(t){return It(t)||Mt(t)}function Ot(t){const e=t&&t["__v_raw"];return e?Ot(e):t}function Dt(t){return(0,r.Nj)(t,"__v_skip",!0),t}const xt=t=>(0,r.Kn)(t)?Ct(t):t,Rt=t=>(0,r.Kn)(t)?_t(t):t;function Bt(t){C&&w&&(t=Ot(t),M(t.dep||(t.dep=l())))}function Lt(t,e){t=Ot(t);const n=t.dep;n&&N(n)}function Pt(t){return!(!t||!0!==t.__v_isRef)}function Ft(t){return zt(t,!1)}function Ut(t){return zt(t,!0)}function zt(t,e){return Pt(t)?t:new Ht(t,e)}class Ht{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Ot(t),this._value=e?t:xt(t)}get value(){return Bt(this),this._value}set value(t){const e=this.__v_isShallow||kt(t)||Mt(t);t=e?t:Ot(t),(0,r.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:xt(t),Lt(this,t))}}function jt(t){return Pt(t)?t.value:t}const Vt={get:(t,e,n)=>jt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Pt(i)&&!Pt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Wt(t){return It(t)?t:new Proxy(t,Vt)}class $t{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:e,set:n}=t((()=>Bt(this)),(()=>Lt(this)));this._get=e,this._set=n}get value(){return this._get()}set value(t){this._set(t)}}function Gt(t){return new $t(t)}var Yt;class Xt{constructor(t,e,n,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this[Yt]=!1,this._dirty=!0,this.effect=new E(t,(()=>{this._dirty||(this._dirty=!0,Lt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const t=Ot(this);return Bt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function qt(t,e,n=!1){let i,o;const s=(0,r.mf)(t);s?(i=t,o=r.dG):(i=t.get,o=t.set);const a=new Xt(i,o,s||!o,n);return a}Yt="__v_isReadonly"},3396:function(t,e,n){"use strict";n.d(e,{$d:function(){return s},Ah:function(){return Tt},FN:function(){return vn},Fl:function(){return Ln},HY:function(){return Ue},JJ:function(){return W},Jd:function(){return _t},Ko:function(){return Ft},P$:function(){return nt},Q6:function(){return ct},U2:function(){return it},Uk:function(){return ln},Us:function(){return _e},Wm:function(){return on},Y3:function(){return w},Y8:function(){return Q},YP:function(){return X},_:function(){return rn},aZ:function(){return lt},bv:function(){return At},dG:function(){return pn},dl:function(){return ft},f3:function(){return $},h:function(){return Pn},iD:function(){return Ke},ic:function(){return St},j4:function(){return Je},kq:function(){return un},lR:function(){return Pe},m0:function(){return G},nK:function(){return at},se:function(){return pt},up:function(){return Rt},w5:function(){return B},wg:function(){return $e},wy:function(){return Ot}});n(7658),n(541);var r=n(4870),i=n(7139);function o(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){a(o,e,n)}return i}function s(t,e,n,r){if((0,i.mf)(t)){const s=o(t,e,n,r);return s&&(0,i.tI)(s)&&s.catch((t=>{a(t,e,n)})),s}const c=[];for(let i=0;i<t.length;i++)c.push(s(t[i],e,n,r));return c}function a(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const i=e.proxy,s=n;while(r){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,s))return;r=r.parent}const a=e.appContext.config.errorHandler;if(a)return void o(a,null,10,[t,i,s])}c(t,n,i,r)}function c(t,e,n,r=!0){console.error(t)}let l=!1,u=!1;const h=[];let d=0;const f=[];let p=null,g=0;const m=Promise.resolve();let y=null;function w(t){const e=y||m;return t?e.then(this?t.bind(this):t):e}function b(t){let e=d+1,n=h.length;while(e<n){const r=e+n>>>1,i=T(h[r]);i<t?e=r+1:n=r}return e}function v(t){h.length&&h.includes(t,l&&t.allowRecurse?d+1:d)||(null==t.id?h.push(t):h.splice(b(t.id),0,t),E())}function E(){l||u||(u=!0,y=m.then(M))}function A(t){const e=h.indexOf(t);e>d&&h.splice(e,1)}function C(t){(0,i.kJ)(t)?f.push(...t):p&&p.includes(t,t.allowRecurse?g+1:g)||f.push(t),E()}function S(t,e=(l?d+1:0)){for(0;e<h.length;e++){const t=h[e];t&&t.pre&&(h.splice(e,1),e--,t())}}function _(t){if(f.length){const t=[...new Set(f)];if(f.length=0,p)return void p.push(...t);for(p=t,p.sort(((t,e)=>T(t)-T(e))),g=0;g<p.length;g++)p[g]();p=null,g=0}}const T=t=>null==t.id?1/0:t.id,I=(t,e)=>{const n=T(t)-T(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function M(t){u=!1,l=!0,h.sort(I);i.dG;try{for(d=0;d<h.length;d++){const t=h[d];t&&!1!==t.active&&o(t,null,14)}}finally{d=0,h.length=0,_(t),l=!1,y=null,(h.length||f.length)&&M(t)}}new Set;new Map;function k(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||i.kT;let o=n;const a=e.startsWith("update:"),c=a&&e.slice(7);if(c&&c in r){const t=`${"modelValue"===c?"model":c}Modifiers`,{number:e,trim:s}=r[t]||i.kT;s&&(o=n.map((t=>(0,i.HD)(t)?t.trim():t))),e&&(o=n.map(i.h5))}let l;let u=r[l=(0,i.hR)(e)]||r[l=(0,i.hR)((0,i._A)(e))];!u&&a&&(u=r[l=(0,i.hR)((0,i.rs)(e))]),u&&s(u,t,6,o);const h=r[l+"Once"];if(h){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,s(h,t,6,o)}}function N(t,e,n=!1){const r=e.emitsCache,o=r.get(t);if(void 0!==o)return o;const s=t.emits;let a={},c=!1;if(!(0,i.mf)(t)){const r=t=>{const n=N(t,e,!0);n&&(c=!0,(0,i.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return s||c?((0,i.kJ)(s)?s.forEach((t=>a[t]=null)):(0,i.l7)(a,s),(0,i.Kn)(t)&&r.set(t,a),a):((0,i.Kn)(t)&&r.set(t,null),null)}function O(t,e){return!(!t||!(0,i.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,i.RI)(t,(0,i.rs)(e))||(0,i.RI)(t,e))}let D=null,x=null;function R(t){const e=D;return D=t,x=t&&t.type.__scopeId||null,e}function B(t,e=D,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&Xe(-1);const i=R(e);let o;try{o=t(...n)}finally{R(i),r._d&&Xe(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function L(t){const{type:e,vnode:n,proxy:r,withProxy:o,props:s,propsOptions:[c],slots:l,attrs:u,emit:h,render:d,renderCache:f,data:p,setupState:g,ctx:m,inheritAttrs:y}=t;let w,b;const v=R(t);try{if(4&n.shapeFlag){const t=o||r;w=hn(d.call(t,t,f,s,g,p,m)),b=u}else{const t=e;0,w=hn(t.length>1?t(s,{attrs:u,slots:l,emit:h}):t(s,null)),b=e.props?u:P(u)}}catch(A){Ve.length=0,a(A,t,1),w=on(He)}let E=w;if(b&&!1!==y){const t=Object.keys(b),{shapeFlag:e}=E;t.length&&7&e&&(c&&t.some(i.tR)&&(b=F(b,c)),E=cn(E,b))}return n.dirs&&(E=cn(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),w=E,R(v),w}const P=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,i.F7)(n))&&((e||(e={}))[n]=t[n]);return e},F=(t,e)=>{const n={};for(const r in t)(0,i.tR)(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function U(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:c}=e,l=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&c>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||z(r,s,l):!!s);if(1024&c)return!0;if(16&c)return r?z(r,s,l):!!s;if(8&c){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!O(l,n))return!0}}return!1}function z(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!O(n,o))return!0}return!1}function H({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const j=t=>t.__isSuspense;function V(t,e){e&&e.pendingBranch?(0,i.kJ)(t)?e.effects.push(...t):e.effects.push(t):C(t)}function W(t,e){if(bn){let n=bn.provides;const r=bn.parent&&bn.parent.provides;r===n&&(n=bn.provides=Object.create(r)),n[t]=e}else 0}function $(t,e,n=!1){const r=bn||D;if(r){const o=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,i.mf)(e)?e.call(r.proxy):e}else 0}function G(t,e){return q(t,null,e)}const Y={};function X(t,e,n){return q(t,e,n)}function q(t,e,{immediate:n,deep:a,flush:c,onTrack:l,onTrigger:u}=i.kT){const h=(0,r.nZ)()===(null===bn||void 0===bn?void 0:bn.scope)?bn:null;let d,f,p=!1,g=!1;if((0,r.dq)(t)?(d=()=>t.value,p=(0,r.yT)(t)):(0,r.PG)(t)?(d=()=>t,a=!0):(0,i.kJ)(t)?(g=!0,p=t.some((t=>(0,r.PG)(t)||(0,r.yT)(t))),d=()=>t.map((t=>(0,r.dq)(t)?t.value:(0,r.PG)(t)?Z(t):(0,i.mf)(t)?o(t,h,2):void 0))):d=(0,i.mf)(t)?e?()=>o(t,h,2):()=>{if(!h||!h.isUnmounted)return f&&f(),s(t,h,3,[y])}:i.dG,e&&a){const t=d;d=()=>Z(t())}let m,y=t=>{f=A.onStop=()=>{o(t,h,4)}};if(Tn){if(y=i.dG,e?n&&s(e,h,3,[d(),g?[]:void 0,y]):d(),"sync"!==c)return i.dG;{const t=Un();m=t.__watcherHandles||(t.__watcherHandles=[])}}let w=g?new Array(t.length).fill(Y):Y;const b=()=>{if(A.active)if(e){const t=A.run();(a||p||(g?t.some(((t,e)=>(0,i.aU)(t,w[e]))):(0,i.aU)(t,w)))&&(f&&f(),s(e,h,3,[t,w===Y?void 0:g&&w[0]===Y?[]:w,y]),w=t)}else A.run()};let E;b.allowRecurse=!!e,"sync"===c?E=b:"post"===c?E=()=>Se(b,h&&h.suspense):(b.pre=!0,h&&(b.id=h.uid),E=()=>v(b));const A=new r.qq(d,E);e?n?b():w=A.run():"post"===c?Se(A.run.bind(A),h&&h.suspense):A.run();const C=()=>{A.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,A)};return m&&m.push(C),C}function K(t,e,n){const r=this.proxy,o=(0,i.HD)(t)?t.includes(".")?J(r,t):()=>r[t]:t.bind(r,r);let s;(0,i.mf)(e)?s=e:(s=e.handler,n=e);const a=bn;En(this);const c=q(o,s.bind(r),n);return a?En(a):An(),c}function J(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function Z(t,e){if(!(0,i.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,r.dq)(t))Z(t.value,e);else if((0,i.kJ)(t))for(let n=0;n<t.length;n++)Z(t[n],e);else if((0,i.DM)(t)||(0,i._N)(t))t.forEach((t=>{Z(t,e)}));else if((0,i.PO)(t))for(const n in t)Z(t[n],e);return t}function Q(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return At((()=>{t.isMounted=!0})),_t((()=>{t.isUnmounting=!0})),t}const tt=[Function,Array],et={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tt,onEnter:tt,onAfterEnter:tt,onEnterCancelled:tt,onBeforeLeave:tt,onLeave:tt,onAfterLeave:tt,onLeaveCancelled:tt,onBeforeAppear:tt,onAppear:tt,onAfterAppear:tt,onAppearCancelled:tt},setup(t,{slots:e}){const n=vn(),i=Q();let o;return()=>{const s=e.default&&ct(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==He){0,a=e,t=!0;break}}const c=(0,r.IU)(t),{mode:l}=c;if(i.isLeaving)return ot(a);const u=st(a);if(!u)return ot(a);const h=it(u,c,i,n);at(u,h);const d=n.subTree,f=d&&st(d);let p=!1;const{getTransitionKey:g}=u.type;if(g){const t=g();void 0===o?o=t:t!==o&&(o=t,p=!0)}if(f&&f.type!==He&&(!Qe(u,f)||p)){const t=it(f,c,i,n);if(at(f,t),"out-in"===l)return i.isLeaving=!0,t.afterLeave=()=>{i.isLeaving=!1,!1!==n.update.active&&n.update()},ot(a);"in-out"===l&&u.type!==He&&(t.delayLeave=(t,e,n)=>{const r=rt(i,f);r[String(f.key)]=f,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=n})}return a}}},nt=et;function rt(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function it(t,e,n,r){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:g,onLeaveCancelled:m,onBeforeAppear:y,onAppear:w,onAfterAppear:b,onAppearCancelled:v}=e,E=String(t.key),A=rt(n,t),C=(t,e)=>{t&&s(t,r,9,e)},S=(t,e)=>{const n=e[1];C(t,e),(0,i.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},_={mode:a,persisted:c,beforeEnter(e){let r=l;if(!n.isMounted){if(!o)return;r=y||l}e._leaveCb&&e._leaveCb(!0);const i=A[E];i&&Qe(t,i)&&i.el._leaveCb&&i.el._leaveCb(),C(r,[e])},enter(t){let e=u,r=h,i=d;if(!n.isMounted){if(!o)return;e=w||u,r=b||h,i=v||d}let s=!1;const a=t._enterCb=e=>{s||(s=!0,C(e?i:r,[t]),_.delayedLeave&&_.delayedLeave(),t._enterCb=void 0)};e?S(e,[t,a]):a()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();C(f,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),C(n?m:g,[e]),e._leaveCb=void 0,A[i]===t&&delete A[i])};A[i]=t,p?S(p,[e,s]):s()},clone(t){return it(t,e,n,r)}};return _}function ot(t){if(ht(t))return t=cn(t),t.children=null,t}function st(t){return ht(t)?t.children?t.children[0]:void 0:t}function at(t,e){6&t.shapeFlag&&t.component?at(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ct(t,e=!1,n){let r=[],i=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===Ue?(128&s.patchFlag&&i++,r=r.concat(ct(s.children,e,a))):(e||s.type!==He)&&r.push(null!=a?cn(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function lt(t){return(0,i.mf)(t)?{setup:t,name:t.name}:t}const ut=t=>!!t.type.__asyncLoader;const ht=t=>t.type.__isKeepAlive;RegExp,RegExp;function dt(t,e){return(0,i.kJ)(t)?t.some((t=>dt(t,e))):(0,i.HD)(t)?t.split(",").includes(e):!!(0,i.Kj)(t)&&t.test(e)}function ft(t,e){gt(t,"a",e)}function pt(t,e){gt(t,"da",e)}function gt(t,e,n=bn){const r=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(bt(e,r,n),n){let t=n.parent;while(t&&t.parent)ht(t.parent.vnode)&&mt(r,e,n,t),t=t.parent}}function mt(t,e,n,r){const o=bt(e,t,r,!0);Tt((()=>{(0,i.Od)(r[e],o)}),n)}function yt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function wt(t){return 128&t.shapeFlag?t.ssContent:t}function bt(t,e,n=bn,i=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;(0,r.Jd)(),En(n);const o=s(e,n,t,i);return An(),(0,r.lk)(),o});return i?o.unshift(a):o.push(a),a}}const vt=t=>(e,n=bn)=>(!Tn||"sp"===t)&&bt(t,((...t)=>e(...t)),n),Et=vt("bm"),At=vt("m"),Ct=vt("bu"),St=vt("u"),_t=vt("bum"),Tt=vt("um"),It=vt("sp"),Mt=vt("rtg"),kt=vt("rtc");function Nt(t,e=bn){bt("ec",t,e)}function Ot(t,e){const n=D;if(null===n)return t;const r=xn(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,c=i.kT]=e[s];t&&((0,i.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&Z(n),o.push({dir:t,instance:r,value:n,oldValue:void 0,arg:a,modifiers:c}))}return t}function Dt(t,e,n,i){const o=t.dirs,a=e&&e.dirs;for(let c=0;c<o.length;c++){const l=o[c];a&&(l.oldValue=a[c].value);let u=l.dir[i];u&&((0,r.Jd)(),s(u,n,8,[t.el,l,t,e]),(0,r.lk)())}}const xt="components";function Rt(t,e){return Lt(xt,t,!0,e)||t}const Bt=Symbol();function Lt(t,e,n=!0,r=!1){const o=D||bn;if(o){const n=o.type;if(t===xt){const t=Rn(n,!1);if(t&&(t===e||t===(0,i._A)(e)||t===(0,i.kC)((0,i._A)(e))))return n}const s=Pt(o[t]||n[t],e)||Pt(o.appContext[t],e);return!s&&r?n:s}}function Pt(t,e){return t&&(t[e]||t[(0,i._A)(e)]||t[(0,i.kC)((0,i._A)(e))])}function Ft(t,e,n,r){let o;const s=n&&n[r];if((0,i.kJ)(t)||(0,i.HD)(t)){o=new Array(t.length);for(let n=0,r=t.length;n<r;n++)o[n]=e(t[n],n,void 0,s&&s[n])}else if("number"===typeof t){0,o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,s&&s[n])}else if((0,i.Kn)(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,s&&s[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let r=0,i=n.length;r<i;r++){const i=n[r];o[r]=e(t[i],i,r,s&&s[r])}}else o=[];return n&&(n[r]=o),o}const Ut=t=>t?Cn(t)?xn(t)||t.proxy:Ut(t.parent):null,zt=(0,i.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ut(t.parent),$root:t=>Ut(t.root),$emit:t=>t.emit,$options:t=>Xt(t),$forceUpdate:t=>t.f||(t.f=()=>v(t.update)),$nextTick:t=>t.n||(t.n=w.bind(t.proxy)),$watch:t=>K.bind(t)}),Ht=(t,e)=>t!==i.kT&&!t.__isScriptSetup&&(0,i.RI)(t,e),jt={get({_:t},e){const{ctx:n,setupState:o,data:s,props:a,accessCache:c,type:l,appContext:u}=t;let h;if("$"!==e[0]){const r=c[e];if(void 0!==r)switch(r){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if(Ht(o,e))return c[e]=1,o[e];if(s!==i.kT&&(0,i.RI)(s,e))return c[e]=2,s[e];if((h=t.propsOptions[0])&&(0,i.RI)(h,e))return c[e]=3,a[e];if(n!==i.kT&&(0,i.RI)(n,e))return c[e]=4,n[e];Vt&&(c[e]=0)}}const d=zt[e];let f,p;return d?("$attrs"===e&&(0,r.j)(t,"get",e),d(t)):(f=l.__cssModules)&&(f=f[e])?f:n!==i.kT&&(0,i.RI)(n,e)?(c[e]=4,n[e]):(p=u.config.globalProperties,(0,i.RI)(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:o,ctx:s}=t;return Ht(o,e)?(o[e]=n,!0):r!==i.kT&&(0,i.RI)(r,e)?(r[e]=n,!0):!(0,i.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:s}},a){let c;return!!n[a]||t!==i.kT&&(0,i.RI)(t,a)||Ht(e,a)||(c=s[0])&&(0,i.RI)(c,a)||(0,i.RI)(r,a)||(0,i.RI)(zt,a)||(0,i.RI)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,i.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Vt=!0;function Wt(t){const e=Xt(t),n=t.proxy,o=t.ctx;Vt=!1,e.beforeCreate&&Gt(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:c,watch:l,provide:u,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:g,updated:m,activated:y,deactivated:w,beforeDestroy:b,beforeUnmount:v,destroyed:E,unmounted:A,render:C,renderTracked:S,renderTriggered:_,errorCaptured:T,serverPrefetch:I,expose:M,inheritAttrs:k,components:N,directives:O,filters:D}=e,x=null;if(h&&$t(h,o,x,t.appContext.config.unwrapInjectedRef),c)for(const r in c){const t=c[r];(0,i.mf)(t)&&(o[r]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,i.Kn)(e)&&(t.data=(0,r.qj)(e))}if(Vt=!0,a)for(const r in a){const t=a[r],e=(0,i.mf)(t)?t.bind(n,n):(0,i.mf)(t.get)?t.get.bind(n,n):i.dG;0;const s=!(0,i.mf)(t)&&(0,i.mf)(t.set)?t.set.bind(n):i.dG,c=Ln({get:e,set:s});Object.defineProperty(o,r,{enumerable:!0,configurable:!0,get:()=>c.value,set:t=>c.value=t})}if(l)for(const r in l)Yt(l[r],o,n,r);if(u){const t=(0,i.mf)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{W(e,t[e])}))}function R(t,e){(0,i.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Gt(d,t,"c"),R(Et,f),R(At,p),R(Ct,g),R(St,m),R(ft,y),R(pt,w),R(Nt,T),R(kt,S),R(Mt,_),R(_t,v),R(Tt,A),R(It,I),(0,i.kJ)(M))if(M.length){const e=t.exposed||(t.exposed={});M.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});C&&t.render===i.dG&&(t.render=C),null!=k&&(t.inheritAttrs=k),N&&(t.components=N),O&&(t.directives=O)}function $t(t,e,n=i.dG,o=!1){(0,i.kJ)(t)&&(t=Qt(t));for(const s in t){const n=t[s];let a;a=(0,i.Kn)(n)?"default"in n?$(n.from||s,n.default,!0):$(n.from||s):$(n),(0,r.dq)(a)&&o?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:t=>a.value=t}):e[s]=a}}function Gt(t,e,n){s((0,i.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Yt(t,e,n,r){const o=r.includes(".")?J(n,r):()=>n[r];if((0,i.HD)(t)){const n=e[t];(0,i.mf)(n)&&X(o,n)}else if((0,i.mf)(t))X(o,t.bind(n));else if((0,i.Kn)(t))if((0,i.kJ)(t))t.forEach((t=>Yt(t,e,n,r)));else{const r=(0,i.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,i.mf)(r)&&X(o,r,t)}else 0}function Xt(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,c=s.get(e);let l;return c?l=c:o.length||n||r?(l={},o.length&&o.forEach((t=>qt(l,t,a,!0))),qt(l,e,a)):l=e,(0,i.Kn)(e)&&s.set(e,l),l}function qt(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&qt(t,o,n,!0),i&&i.forEach((e=>qt(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=Kt[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const Kt={data:Jt,props:ee,emits:ee,methods:ee,computed:ee,beforeCreate:te,created:te,beforeMount:te,mounted:te,beforeUpdate:te,updated:te,beforeDestroy:te,beforeUnmount:te,destroyed:te,unmounted:te,activated:te,deactivated:te,errorCaptured:te,serverPrefetch:te,components:ee,directives:ee,watch:ne,provide:Jt,inject:Zt};function Jt(t,e){return e?t?function(){return(0,i.l7)((0,i.mf)(t)?t.call(this,this):t,(0,i.mf)(e)?e.call(this,this):e)}:e:t}function Zt(t,e){return ee(Qt(t),Qt(e))}function Qt(t){if((0,i.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function te(t,e){return t?[...new Set([].concat(t,e))]:e}function ee(t,e){return t?(0,i.l7)((0,i.l7)(Object.create(null),t),e):e}function ne(t,e){if(!t)return e;if(!e)return t;const n=(0,i.l7)(Object.create(null),t);for(const r in e)n[r]=te(t[r],e[r]);return n}function re(t,e,n,o=!1){const s={},a={};(0,i.Nj)(a,tn,1),t.propsDefaults=Object.create(null),oe(t,e,s,a);for(const r in t.propsOptions[0])r in s||(s[r]=void 0);n?t.props=o?s:(0,r.Um)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function ie(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:c}}=t,l=(0,r.IU)(s),[u]=t.propsOptions;let h=!1;if(!(o||c>0)||16&c){let r;oe(t,e,s,a)&&(h=!0);for(const o in l)e&&((0,i.RI)(e,o)||(r=(0,i.rs)(o))!==o&&(0,i.RI)(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(s[o]=se(u,l,o,void 0,t,!0)):delete s[o]);if(a!==l)for(const t in a)e&&(0,i.RI)(e,t)||(delete a[t],h=!0)}else if(8&c){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(O(t.emitsOptions,o))continue;const c=e[o];if(u)if((0,i.RI)(a,o))c!==a[o]&&(a[o]=c,h=!0);else{const e=(0,i._A)(o);s[e]=se(u,l,e,c,t,!1)}else c!==a[o]&&(a[o]=c,h=!0)}}h&&(0,r.X$)(t,"set","$attrs")}function oe(t,e,n,o){const[s,a]=t.propsOptions;let c,l=!1;if(e)for(let r in e){if((0,i.Gg)(r))continue;const u=e[r];let h;s&&(0,i.RI)(s,h=(0,i._A)(r))?a&&a.includes(h)?(c||(c={}))[h]=u:n[h]=u:O(t.emitsOptions,r)||r in o&&u===o[r]||(o[r]=u,l=!0)}if(a){const e=(0,r.IU)(n),o=c||i.kT;for(let r=0;r<a.length;r++){const c=a[r];n[c]=se(s,e,c,o[c],t,!(0,i.RI)(o,c))}}return l}function se(t,e,n,r,o,s){const a=t[n];if(null!=a){const t=(0,i.RI)(a,"default");if(t&&void 0===r){const t=a.default;if(a.type!==Function&&(0,i.mf)(t)){const{propsDefaults:i}=o;n in i?r=i[n]:(En(o),r=i[n]=t.call(null,e),An())}else r=t}a[0]&&(s&&!t?r=!1:!a[1]||""!==r&&r!==(0,i.rs)(n)||(r=!0))}return r}function ae(t,e,n=!1){const r=e.propsCache,o=r.get(t);if(o)return o;const s=t.props,a={},c=[];let l=!1;if(!(0,i.mf)(t)){const r=t=>{l=!0;const[n,r]=ae(t,e,!0);(0,i.l7)(a,n),r&&c.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!s&&!l)return(0,i.Kn)(t)&&r.set(t,i.Z6),i.Z6;if((0,i.kJ)(s))for(let h=0;h<s.length;h++){0;const t=(0,i._A)(s[h]);ce(t)&&(a[t]=i.kT)}else if(s){0;for(const t in s){const e=(0,i._A)(t);if(ce(e)){const n=s[t],r=a[e]=(0,i.kJ)(n)||(0,i.mf)(n)?{type:n}:Object.assign({},n);if(r){const t=he(Boolean,r.type),n=he(String,r.type);r[0]=t>-1,r[1]=n<0||t<n,(t>-1||(0,i.RI)(r,"default"))&&c.push(e)}}}}const u=[a,c];return(0,i.Kn)(t)&&r.set(t,u),u}function ce(t){return"$"!==t[0]}function le(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function ue(t,e){return le(t)===le(e)}function he(t,e){return(0,i.kJ)(e)?e.findIndex((e=>ue(e,t))):(0,i.mf)(e)&&ue(e,t)?0:-1}const de=t=>"_"===t[0]||"$stable"===t,fe=t=>(0,i.kJ)(t)?t.map(hn):[hn(t)],pe=(t,e,n)=>{if(e._n)return e;const r=B(((...t)=>fe(e(...t))),n);return r._c=!1,r},ge=(t,e,n)=>{const r=t._ctx;for(const o in t){if(de(o))continue;const n=t[o];if((0,i.mf)(n))e[o]=pe(o,n,r);else if(null!=n){0;const t=fe(n);e[o]=()=>t}}},me=(t,e)=>{const n=fe(e);t.slots.default=()=>n},ye=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,r.IU)(e),(0,i.Nj)(e,"_",n)):ge(e,t.slots={})}else t.slots={},e&&me(t,e);(0,i.Nj)(t.slots,tn,1)},we=(t,e,n)=>{const{vnode:r,slots:o}=t;let s=!0,a=i.kT;if(32&r.shapeFlag){const t=e._;t?n&&1===t?s=!1:((0,i.l7)(o,e),n||1!==t||delete o._):(s=!e.$stable,ge(e,o)),a=e}else e&&(me(t,e),a={default:1});if(s)for(const i in o)de(i)||i in a||delete o[i]};function be(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ve=0;function Ee(t,e){return function(n,r=null){(0,i.mf)(n)||(n=Object.assign({},n)),null==r||(0,i.Kn)(r)||(r=null);const o=be(),s=new Set;let a=!1;const c=o.app={_uid:ve++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:zn,get config(){return o.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,i.mf)(t.install)?(s.add(t),t.install(c,...e)):(0,i.mf)(t)&&(s.add(t),t(c,...e))),c},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),c},component(t,e){return e?(o.components[t]=e,c):o.components[t]},directive(t,e){return e?(o.directives[t]=e,c):o.directives[t]},mount(i,s,l){if(!a){0;const u=on(n,r);return u.appContext=o,s&&e?e(u,i):t(u,i,l),a=!0,c._container=i,i.__vue_app__=c,xn(u.component)||u.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(t,e){return o.provides[t]=e,c}};return c}}function Ae(t,e,n,s,a=!1){if((0,i.kJ)(t))return void t.forEach(((t,r)=>Ae(t,e&&((0,i.kJ)(e)?e[r]:e),n,s,a)));if(ut(s)&&!a)return;const c=4&s.shapeFlag?xn(s.component)||s.component.proxy:s.el,l=a?null:c,{i:u,r:h}=t;const d=e&&e.r,f=u.refs===i.kT?u.refs={}:u.refs,p=u.setupState;if(null!=d&&d!==h&&((0,i.HD)(d)?(f[d]=null,(0,i.RI)(p,d)&&(p[d]=null)):(0,r.dq)(d)&&(d.value=null)),(0,i.mf)(h))o(h,u,12,[l,f]);else{const e=(0,i.HD)(h),o=(0,r.dq)(h);if(e||o){const r=()=>{if(t.f){const n=e?(0,i.RI)(p,h)?p[h]:f[h]:h.value;a?(0,i.kJ)(n)&&(0,i.Od)(n,c):(0,i.kJ)(n)?n.includes(c)||n.push(c):e?(f[h]=[c],(0,i.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],t.k&&(f[t.k]=h.value))}else e?(f[h]=l,(0,i.RI)(p,h)&&(p[h]=l)):o&&(h.value=l,t.k&&(f[t.k]=l))};l?(r.id=-1,Se(r,n)):r()}else 0}}function Ce(){}const Se=V;function _e(t){return Te(t)}function Te(t,e){Ce();const n=(0,i.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:g=i.dG,insertStaticContent:m}=t,y=(t,e,n,r=null,i=null,o=null,s=!1,a=null,c=!!e.dynamicChildren)=>{if(t===e)return;t&&!Qe(t,e)&&(r=Z(t),Y(t,i,o,!0),t=null),-2===e.patchFlag&&(c=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=e;switch(l){case ze:w(t,e,n,r);break;case He:b(t,e,n,r);break;case je:null==t&&E(e,n,r,s);break;case Ue:R(t,e,n,r,i,o,s,a,c);break;default:1&h?I(t,e,n,r,i,o,s,a,c):6&h?B(t,e,n,r,i,o,s,a,c):(64&h||128&h)&&l.process(t,e,n,r,i,o,s,a,c,tt)}null!=u&&i&&Ae(u,t&&t.ref,o,e||t,!e)},w=(t,e,n,r)=>{if(null==t)o(e.el=l(e.children),n,r);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},b=(t,e,n,r)=>{null==t?o(e.el=u(e.children||""),n,r):e.el=t.el},E=(t,e,n,r)=>{[t.el,t.anchor]=m(t.children,e,n,r,t.el,t.anchor)},C=({el:t,anchor:e},n,r)=>{let i;while(t&&t!==e)i=p(t),o(t,n,r),t=i;o(e,n,r)},T=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=p(t),s(t),t=n;s(e)},I=(t,e,n,r,i,o,s,a,c)=>{s=s||"svg"===e.type,null==t?M(e,n,r,i,o,s,a,c):O(t,e,i,o,s,a,c)},M=(t,e,n,r,s,l,u,h)=>{let f,p;const{type:g,props:m,shapeFlag:y,transition:w,dirs:b}=t;if(f=t.el=c(t.type,l,m&&m.is,m),8&y?d(f,t.children):16&y&&N(t.children,f,null,r,s,l&&"foreignObject"!==g,u,h),b&&Dt(t,null,r,"created"),k(f,t,t.scopeId,u,r),m){for(const e in m)"value"===e||(0,i.Gg)(e)||a(f,e,null,m[e],l,t.children,r,s,J);"value"in m&&a(f,"value",null,m.value),(p=m.onVnodeBeforeMount)&&gn(p,r,t)}b&&Dt(t,null,r,"beforeMount");const v=(!s||s&&!s.pendingBranch)&&w&&!w.persisted;v&&w.beforeEnter(f),o(f,e,n),((p=m&&m.onVnodeMounted)||v||b)&&Se((()=>{p&&gn(p,r,t),v&&w.enter(f),b&&Dt(t,null,r,"mounted")}),s)},k=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let o=0;o<r.length;o++)g(t,r[o]);if(i){let n=i.subTree;if(e===n){const e=i.vnode;k(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},N=(t,e,n,r,i,o,s,a,c=0)=>{for(let l=c;l<t.length;l++){const c=t[l]=a?dn(t[l]):hn(t[l]);y(null,c,e,n,r,i,o,s,a)}},O=(t,e,n,r,o,s,c)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.kT,g=e.props||i.kT;let m;n&&Ie(n,!1),(m=g.onVnodeBeforeUpdate)&&gn(m,n,e,t),f&&Dt(e,t,n,"beforeUpdate"),n&&Ie(n,!0);const y=o&&"foreignObject"!==e.type;if(h?D(t.dynamicChildren,h,l,n,r,y,s):c||V(t,e,l,null,n,r,y,s,!1),u>0){if(16&u)x(l,e,p,g,n,r,o);else if(2&u&&p.class!==g.class&&a(l,"class",null,g.class,o),4&u&&a(l,"style",p.style,g.style,o),8&u){const i=e.dynamicProps;for(let e=0;e<i.length;e++){const s=i[e],c=p[s],u=g[s];u===c&&"value"!==s||a(l,s,c,u,o,t.children,n,r,J)}}1&u&&t.children!==e.children&&d(l,e.children)}else c||null!=h||x(l,e,p,g,n,r,o);((m=g.onVnodeUpdated)||f)&&Se((()=>{m&&gn(m,n,e,t),f&&Dt(e,t,n,"updated")}),r)},D=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const c=t[a],l=e[a],u=c.el&&(c.type===Ue||!Qe(c,l)||70&c.shapeFlag)?f(c.el):n;y(c,l,u,null,r,i,o,s,!0)}},x=(t,e,n,r,o,s,c)=>{if(n!==r){if(n!==i.kT)for(const l in n)(0,i.Gg)(l)||l in r||a(t,l,n[l],null,c,e.children,o,s,J);for(const l in r){if((0,i.Gg)(l))continue;const u=r[l],h=n[l];u!==h&&"value"!==l&&a(t,l,h,u,c,e.children,o,s,J)}"value"in r&&a(t,"value",n.value,r.value)}},R=(t,e,n,r,i,s,a,c,u)=>{const h=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=e;g&&(c=c?c.concat(g):g),null==t?(o(h,n,r),o(d,n,r),N(e.children,n,d,i,s,a,c,u)):f>0&&64&f&&p&&t.dynamicChildren?(D(t.dynamicChildren,p,n,i,s,a,c),(null!=e.key||i&&e===i.subTree)&&Me(t,e,!0)):V(t,e,n,d,i,s,a,c,u)},B=(t,e,n,r,i,o,s,a,c)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,c):P(e,n,r,i,o,s,c):F(t,e,c)},P=(t,e,n,r,i,o,s)=>{const a=t.component=wn(t,r,i);if(ht(t)&&(a.ctx.renderer=tt),In(a),a.asyncDep){if(i&&i.registerDep(a,z),!t.el){const t=a.subTree=on(He);b(null,t,e,n)}}else z(a,t,e,n,i,o,s)},F=(t,e,n)=>{const r=e.component=t.component;if(U(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void j(r,e,n);r.next=e,A(r.update),r.update()}else e.el=t.el,r.vnode=e},z=(t,e,n,o,s,a,c)=>{const l=()=>{if(t.isMounted){let e,{next:n,bu:r,u:o,parent:l,vnode:u}=t,h=n;0,Ie(t,!1),n?(n.el=u.el,j(t,n,c)):n=u,r&&(0,i.ir)(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&gn(e,l,n,u),Ie(t,!0);const d=L(t);0;const p=t.subTree;t.subTree=d,y(p,d,f(p.el),Z(p),t,s,a),n.el=d.el,null===h&&H(t,d.el),o&&Se(o,s),(e=n.props&&n.props.onVnodeUpdated)&&Se((()=>gn(e,l,n,u)),s)}else{let r;const{el:c,props:l}=e,{bm:u,m:h,parent:d}=t,f=ut(e);if(Ie(t,!1),u&&(0,i.ir)(u),!f&&(r=l&&l.onVnodeBeforeMount)&&gn(r,d,e),Ie(t,!0),c&&nt){const n=()=>{t.subTree=L(t),nt(c,t.subTree,t,s,null)};f?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const r=t.subTree=L(t);0,y(null,r,n,o,t,s,a),e.el=r.el}if(h&&Se(h,s),!f&&(r=l&&l.onVnodeMounted)){const t=e;Se((()=>gn(r,d,t)),s)}(256&e.shapeFlag||d&&ut(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Se(t.a,s),t.isMounted=!0,e=n=o=null}},u=t.effect=new r.qq(l,(()=>v(h)),t.scope),h=t.update=()=>u.run();h.id=t.uid,Ie(t,!0),h()},j=(t,e,n)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,ie(t,e.props,i,n),we(t,e.children,n),(0,r.Jd)(),S(),(0,r.lk)()},V=(t,e,n,r,i,o,s,a,c=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void $(l,h,n,r,i,o,s,a,c);if(256&f)return void W(l,h,n,r,i,o,s,a,c)}8&p?(16&u&&J(l,i,o),h!==l&&d(n,h)):16&u?16&p?$(l,h,n,r,i,o,s,a,c):J(l,i,o,!0):(8&u&&d(n,""),16&p&&N(h,n,r,i,o,s,a,c))},W=(t,e,n,r,o,s,a,c,l)=>{t=t||i.Z6,e=e||i.Z6;const u=t.length,h=e.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=e[f]=l?dn(e[f]):hn(e[f]);y(t[f],r,n,null,o,s,a,c,l)}u>h?J(t,o,s,!0,!1,d):N(e,n,r,o,s,a,c,l,d)},$=(t,e,n,r,o,s,a,c,l)=>{let u=0;const h=e.length;let d=t.length-1,f=h-1;while(u<=d&&u<=f){const r=t[u],i=e[u]=l?dn(e[u]):hn(e[u]);if(!Qe(r,i))break;y(r,i,n,null,o,s,a,c,l),u++}while(u<=d&&u<=f){const r=t[d],i=e[f]=l?dn(e[f]):hn(e[f]);if(!Qe(r,i))break;y(r,i,n,null,o,s,a,c,l),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<h?e[t].el:r;while(u<=f)y(null,e[u]=l?dn(e[u]):hn(e[u]),n,i,o,s,a,c,l),u++}}else if(u>f)while(u<=d)Y(t[u],o,s,!0),u++;else{const p=u,g=u,m=new Map;for(u=g;u<=f;u++){const t=e[u]=l?dn(e[u]):hn(e[u]);null!=t.key&&m.set(t.key,u)}let w,b=0;const v=f-g+1;let E=!1,A=0;const C=new Array(v);for(u=0;u<v;u++)C[u]=0;for(u=p;u<=d;u++){const r=t[u];if(b>=v){Y(r,o,s,!0);continue}let i;if(null!=r.key)i=m.get(r.key);else for(w=g;w<=f;w++)if(0===C[w-g]&&Qe(r,e[w])){i=w;break}void 0===i?Y(r,o,s,!0):(C[i-g]=u+1,i>=A?A=i:E=!0,y(r,e[i],n,null,o,s,a,c,l),b++)}const S=E?ke(C):i.Z6;for(w=S.length-1,u=v-1;u>=0;u--){const t=g+u,i=e[t],d=t+1<h?e[t+1].el:r;0===C[u]?y(null,i,n,d,o,s,a,c,l):E&&(w<0||u!==S[w]?G(i,n,d,2):w--)}}},G=(t,e,n,r,i=null)=>{const{el:s,type:a,transition:c,children:l,shapeFlag:u}=t;if(6&u)return void G(t.component.subTree,e,n,r);if(128&u)return void t.suspense.move(e,n,r);if(64&u)return void a.move(t,e,n,tt);if(a===Ue){o(s,e,n);for(let t=0;t<l.length;t++)G(l[t],e,n,r);return void o(t.anchor,e,n)}if(a===je)return void C(t,e,n);const h=2!==r&&1&u&&c;if(h)if(0===r)c.beforeEnter(s),o(s,e,n),Se((()=>c.enter(s)),i);else{const{leave:t,delayLeave:r,afterLeave:i}=c,a=()=>o(s,e,n),l=()=>{t(s,(()=>{a(),i&&i()}))};r?r(s,a,l):l()}else o(s,e,n)},Y=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d}=t;if(null!=a&&Ae(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const f=1&u&&d,p=!ut(t);let g;if(p&&(g=s&&s.onVnodeBeforeUnmount)&&gn(g,e,t),6&u)K(t.component,n,r);else{if(128&u)return void t.suspense.unmount(n,r);f&&Dt(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,i,tt,r):l&&(o!==Ue||h>0&&64&h)?J(l,e,n,!1,!0):(o===Ue&&384&h||!i&&16&u)&&J(c,e,n),r&&X(t)}(p&&(g=s&&s.onVnodeUnmounted)||f)&&Se((()=>{g&&gn(g,e,t),f&&Dt(t,null,e,"unmounted")}),n)},X=t=>{const{type:e,el:n,anchor:r,transition:i}=t;if(e===Ue)return void q(n,r);if(e===je)return void T(t);const o=()=>{s(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:r}=i,s=()=>e(n,o);r?r(t.el,o,s):s()}else o()},q=(t,e)=>{let n;while(t!==e)n=p(t),s(t),t=n;s(e)},K=(t,e,n)=>{const{bum:r,scope:o,update:s,subTree:a,um:c}=t;r&&(0,i.ir)(r),o.stop(),s&&(s.active=!1,Y(a,t,e,n)),c&&Se(c,e),Se((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},J=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)Y(t[s],e,n,r,i)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():p(t.anchor||t.el),Q=(t,e,n)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,n),S(),_(),e._vnode=t},tt={p:y,um:Y,m:G,r:X,mt:P,mc:N,pc:V,pbc:D,n:Z,o:t};let et,nt;return e&&([et,nt]=e(tt)),{render:Q,hydrate:et,createApp:Ee(Q,et)}}function Ie({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Me(t,e,n=!1){const r=t.children,o=e.children;if((0,i.kJ)(r)&&(0,i.kJ)(o))for(let i=0;i<r.length;i++){const t=r[i];let e=o[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[i]=dn(o[i]),e.el=t.el),n||Me(t,e)),e.type===ze&&(e.el=t.el)}}function ke(t){const e=t.slice(),n=[0];let r,i,o,s,a;const c=t.length;for(r=0;r<c;r++){const c=t[r];if(0!==c){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<c?o=a+1:s=a;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}const Ne=t=>t.__isTeleport,Oe=t=>t&&(t.disabled||""===t.disabled),De=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,xe=(t,e)=>{const n=t&&t.to;if((0,i.HD)(n)){if(e){const t=e(n);return t}return null}return n},Re={__isTeleport:!0,process(t,e,n,r,i,o,s,a,c,l){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:g,createComment:m}}=l,y=Oe(e.props);let{shapeFlag:w,children:b,dynamicChildren:v}=e;if(null==t){const t=e.el=g(""),l=e.anchor=g("");f(t,n,r),f(l,n,r);const h=e.target=xe(e.props,p),d=e.targetAnchor=g("");h&&(f(d,h),s=s||De(h));const m=(t,e)=>{16&w&&u(b,t,e,i,o,s,a,c)};y?m(n,l):h&&m(h,d)}else{e.el=t.el;const r=e.anchor=t.anchor,u=e.target=t.target,f=e.targetAnchor=t.targetAnchor,g=Oe(t.props),m=g?n:u,w=g?r:f;if(s=s||De(u),v?(d(t.dynamicChildren,v,m,i,o,s,a),Me(t,e,!0)):c||h(t,e,m,w,i,o,s,a,!1),y)g||Be(e,n,r,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=xe(e.props,p);t&&Be(e,t,null,l,0)}else g&&Be(e,u,f,l,1)}Fe(e)},remove(t,e,n,r,{um:i,o:{remove:o}},s){const{shapeFlag:a,children:c,anchor:l,targetAnchor:u,target:h,props:d}=t;if(h&&o(u),(s||!Oe(d))&&(o(l),16&a))for(let f=0;f<c.length;f++){const t=c[f];i(t,e,n,!0,!!t.dynamicChildren)}},move:Be,hydrate:Le};function Be(t,e,n,{o:{insert:r},m:i},o=2){0===o&&r(t.targetAnchor,e,n);const{el:s,anchor:a,shapeFlag:c,children:l,props:u}=t,h=2===o;if(h&&r(s,e,n),(!h||Oe(u))&&16&c)for(let d=0;d<l.length;d++)i(l[d],e,n,2);h&&r(a,e,n)}function Le(t,e,n,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:c}},l){const u=e.target=xe(e.props,c);if(u){const c=u._lpa||u.firstChild;if(16&e.shapeFlag)if(Oe(e.props))e.anchor=l(s(t),e,a(t),n,r,i,o),e.targetAnchor=c;else{e.anchor=s(t);let a=c;while(a)if(a=s(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}l(c,e,u,n,r,i,o)}Fe(e)}return e.anchor&&s(e.anchor)}const Pe=Re;function Fe(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;while(n!==t.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ue=Symbol(void 0),ze=Symbol(void 0),He=Symbol(void 0),je=Symbol(void 0),Ve=[];let We=null;function $e(t=!1){Ve.push(We=t?null:[])}function Ge(){Ve.pop(),We=Ve[Ve.length-1]||null}let Ye=1;function Xe(t){Ye+=t}function qe(t){return t.dynamicChildren=Ye>0?We||i.Z6:null,Ge(),Ye>0&&We&&We.push(t),t}function Ke(t,e,n,r,i,o){return qe(rn(t,e,n,r,i,o,!0))}function Je(t,e,n,r,i){return qe(on(t,e,n,r,i,!0))}function Ze(t){return!!t&&!0===t.__v_isVNode}function Qe(t,e){return t.type===e.type&&t.key===e.key}const tn="__vInternal",en=({key:t})=>null!=t?t:null,nn=({ref:t,ref_key:e,ref_for:n})=>null!=t?(0,i.HD)(t)||(0,r.dq)(t)||(0,i.mf)(t)?{i:D,r:t,k:e,f:!!n}:t:null;function rn(t,e=null,n=null,r=0,o=null,s=(t===Ue?0:1),a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&en(e),ref:e&&nn(e),scopeId:x,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:D};return c?(fn(l,n),128&s&&t.normalize(l)):n&&(l.shapeFlag|=(0,i.HD)(n)?8:16),Ye>0&&!a&&We&&(l.patchFlag>0||6&s)&&32!==l.patchFlag&&We.push(l),l}const on=sn;function sn(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==Bt||(t=He),Ze(t)){const r=cn(t,e,!0);return n&&fn(r,n),Ye>0&&!a&&We&&(6&r.shapeFlag?We[We.indexOf(t)]=r:We.push(r)),r.patchFlag|=-2,r}if(Bn(t)&&(t=t.__vccOpts),e){e=an(e);let{class:t,style:n}=e;t&&!(0,i.HD)(t)&&(e.class=(0,i.C_)(t)),(0,i.Kn)(n)&&((0,r.X3)(n)&&!(0,i.kJ)(n)&&(n=(0,i.l7)({},n)),e.style=(0,i.j5)(n))}const c=(0,i.HD)(t)?1:j(t)?128:Ne(t)?64:(0,i.Kn)(t)?4:(0,i.mf)(t)?2:0;return rn(t,e,n,o,s,c,a,!0)}function an(t){return t?(0,r.X3)(t)||tn in t?(0,i.l7)({},t):t:null}function cn(t,e,n=!1){const{props:r,ref:o,patchFlag:s,children:a}=t,c=e?pn(r||{},e):r,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&en(c),ref:e&&e.ref?n&&o?(0,i.kJ)(o)?o.concat(nn(e)):[o,nn(e)]:nn(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ue?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cn(t.ssContent),ssFallback:t.ssFallback&&cn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l}function ln(t=" ",e=0){return on(ze,null,t,e)}function un(t="",e=!1){return e?($e(),Je(He,null,t)):on(He,null,t)}function hn(t){return null==t||"boolean"===typeof t?on(He):(0,i.kJ)(t)?on(Ue,null,t.slice()):"object"===typeof t?dn(t):on(ze,null,String(t))}function dn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:cn(t)}function fn(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if((0,i.kJ)(e))n=16;else if("object"===typeof e){if(65&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),fn(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||tn in e?3===r&&D&&(1===D.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=D}}else(0,i.mf)(e)?(e={default:e,_ctx:D},n=32):(e=String(e),64&r?(n=16,e=[ln(e)]):n=8);t.children=e,t.shapeFlag|=n}function pn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if("class"===t)e.class!==r.class&&(e.class=(0,i.C_)([e.class,r.class]));else if("style"===t)e.style=(0,i.j5)([e.style,r.style]);else if((0,i.F7)(t)){const n=e[t],o=r[t];!o||n===o||(0,i.kJ)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=r[t])}return e}function gn(t,e,n,r=null){s(t,e,7,[n,r])}const mn=be();let yn=0;function wn(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||mn,a={uid:yn++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ae(o,s),emitsOptions:N(o,s),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:o.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=k.bind(null,a),t.ce&&t.ce(a),a}let bn=null;const vn=()=>bn||D,En=t=>{bn=t,t.scope.on()},An=()=>{bn&&bn.scope.off(),bn=null};function Cn(t){return 4&t.vnode.shapeFlag}let Sn,_n,Tn=!1;function In(t,e=!1){Tn=e;const{props:n,children:r}=t.vnode,i=Cn(t);re(t,n,i,e),ye(t,r);const o=i?Mn(t,e):void 0;return Tn=!1,o}function Mn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,r.Xl)(new Proxy(t.ctx,jt));const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?Dn(t):null;En(t),(0,r.Jd)();const c=o(s,t,0,[t.props,n]);if((0,r.lk)(),An(),(0,i.tI)(c)){if(c.then(An,An),e)return c.then((n=>{kn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=c}else kn(t,c,e)}else Nn(t,e)}function kn(t,e,n){(0,i.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Kn)(e)&&(t.setupState=(0,r.WL)(e)),Nn(t,n)}function Nn(t,e,n){const o=t.type;if(!t.render){if(!e&&Sn&&!o.render){const e=o.template||Xt(t).template;if(e){0;const{isCustomElement:n,compilerOptions:r}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,c=(0,i.l7)((0,i.l7)({isCustomElement:n,delimiters:s},r),a);o.render=Sn(e,c)}}t.render=o.render||i.dG,_n&&_n(t)}En(t),(0,r.Jd)(),Wt(t),(0,r.lk)(),An()}function On(t){return new Proxy(t.attrs,{get(e,n){return(0,r.j)(t,"get","$attrs"),e[n]}})}function Dn(t){const e=e=>{t.exposed=e||{}};let n;return{get attrs(){return n||(n=On(t))},slots:t.slots,emit:t.emit,expose:e}}function xn(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in zt?zt[n](t):void 0},has(t,e){return e in t||e in zt}}))}function Rn(t,e=!0){return(0,i.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Bn(t){return(0,i.mf)(t)&&"__vccOpts"in t}const Ln=(t,e)=>(0,r.Fl)(t,e,Tn);function Pn(t,e,n){const r=arguments.length;return 2===r?(0,i.Kn)(e)&&!(0,i.kJ)(e)?Ze(e)?on(t,null,[e]):on(t,e):on(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Ze(n)&&(n=[n]),on(t,e,n))}const Fn=Symbol(""),Un=()=>{{const t=$(Fn);return t}};const zn="3.2.47"},9242:function(t,e,n){"use strict";n.d(e,{F8:function(){return ot},ri:function(){return ut},uT:function(){return B}});n(7658);var r=n(7139),i=n(3396),o=n(4870);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),l={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?a.createElementNS(s,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,o){const s=n?n.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),n),i===o||!(i=i.nextSibling))break}else{c.innerHTML=r?`<svg>${t}</svg>`:t;const i=c.content;if(r){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function u(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function h(t,e,n){const i=t.style,o=(0,r.HD)(n);if(n&&!o){if(e&&!(0,r.HD)(e))for(const t in e)null==n[t]&&f(i,t,"");for(const t in n)f(i,t,n[t])}else{const r=i.display;o?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=r)}}const d=/\s*!important$/;function f(t,e,n){if((0,r.kJ)(n))n.forEach((n=>f(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=m(t,e);d.test(n)?t.setProperty((0,r.rs)(i),n.replace(d,""),"important"):t[i]=n}}const p=["Webkit","Moz","ms"],g={};function m(t,e){const n=g[e];if(n)return n;let i=(0,r._A)(e);if("filter"!==i&&i in t)return g[e]=i;i=(0,r.kC)(i);for(let r=0;r<p.length;r++){const n=p[r]+i;if(n in t)return g[e]=n}return e}const y="http://www.w3.org/1999/xlink";function w(t,e,n,i,o){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(y,e.slice(6,e.length)):t.setAttributeNS(y,e,n);else{const i=(0,r.Pq)(e);null==n||i&&!(0,r.yA)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function b(t,e,n,i,o,s,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,o,s),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName&&!t.tagName.includes("-")){t._value=n;const r=null==n?"":n;return t.value===r&&"OPTION"!==t.tagName||(t.value=r),void(null==n&&t.removeAttribute(e))}let c=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=(0,r.yA)(n):null==n&&"string"===i?(n="",c=!0):"number"===i&&(n=0,c=!0)}try{t[e]=n}catch(l){0}c&&t.removeAttribute(e)}function v(t,e,n,r){t.addEventListener(e,n,r)}function E(t,e,n,r){t.removeEventListener(e,n,r)}function A(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=S(e);if(r){const s=o[e]=M(r,i);v(t,n,s,a)}else s&&(E(t,n,s,a),o[e]=void 0)}}const C=/(?:Once|Passive|Capture)$/;function S(t){let e;if(C.test(t)){let n;e={};while(n=t.match(C))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,r.rs)(t.slice(2));return[n,e]}let _=0;const T=Promise.resolve(),I=()=>_||(T.then((()=>_=0)),_=Date.now());function M(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,i.$d)(k(t,n.value),e,5,[t])};return n.value=t,n.attached=I(),n}function k(t,e){if((0,r.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const N=/^on[a-z]/,O=(t,e,n,i,o=!1,s,a,c,l)=>{"class"===e?u(t,i,o):"style"===e?h(t,n,i):(0,r.F7)(e)?(0,r.tR)(e)||A(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):D(t,e,i,o))?b(t,e,i,s,a,c,l):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),w(t,e,i,o))};function D(t,e,n,i){return i?"innerHTML"===e||"textContent"===e||!!(e in t&&N.test(e)&&(0,r.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!N.test(e)||!(0,r.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const x="transition",R="animation",B=(t,{slots:e})=>(0,i.h)(i.P$,z(t),e);B.displayName="Transition";const L={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},P=B.props=(0,r.l7)({},i.P$.props,L),F=(t,e=[])=>{(0,r.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},U=t=>!!t&&((0,r.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function z(t){const e={};for(const r in t)r in L||(e[r]=t[r]);if(!1===t.css)return e;const{name:n="v",type:i,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:c=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:h=c,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,g=H(o),m=g&&g[0],y=g&&g[1],{onBeforeEnter:w,onEnter:b,onEnterCancelled:v,onLeave:E,onLeaveCancelled:A,onBeforeAppear:C=w,onAppear:S=b,onAppearCancelled:_=v}=e,T=(t,e,n)=>{W(t,e?h:c),W(t,e?u:a),n&&n()},I=(t,e)=>{t._isLeaving=!1,W(t,d),W(t,p),W(t,f),e&&e()},M=t=>(e,n)=>{const r=t?S:b,o=()=>T(e,t,n);F(r,[e,o]),$((()=>{W(e,t?l:s),V(e,t?h:c),U(r)||Y(e,i,m,o)}))};return(0,r.l7)(e,{onBeforeEnter(t){F(w,[t]),V(t,s),V(t,a)},onBeforeAppear(t){F(C,[t]),V(t,l),V(t,u)},onEnter:M(!1),onAppear:M(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>I(t,e);V(t,d),J(),V(t,f),$((()=>{t._isLeaving&&(W(t,d),V(t,p),U(E)||Y(t,i,y,n))})),F(E,[t,n])},onEnterCancelled(t){T(t,!1),F(v,[t])},onAppearCancelled(t){T(t,!0),F(_,[t])},onLeaveCancelled(t){I(t),F(A,[t])}})}function H(t){if(null==t)return null;if((0,r.Kn)(t))return[j(t.enter),j(t.leave)];{const e=j(t);return[e,e]}}function j(t){const e=(0,r.He)(t);return e}function V(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function W(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function $(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let G=0;function Y(t,e,n,r){const i=t._endId=++G,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:c}=X(t,e);if(!s)return r();const l=s+"end";let u=0;const h=()=>{t.removeEventListener(l,d),o()},d=e=>{e.target===t&&++u>=c&&h()};setTimeout((()=>{u<c&&h()}),a+1),t.addEventListener(l,d)}function X(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r(`${x}Delay`),o=r(`${x}Duration`),s=q(i,o),a=r(`${R}Delay`),c=r(`${R}Duration`),l=q(a,c);let u=null,h=0,d=0;e===x?s>0&&(u=x,h=s,d=o.length):e===R?l>0&&(u=R,h=l,d=c.length):(h=Math.max(s,l),u=h>0?s>l?x:R:null,d=u?u===x?o.length:c.length:0);const f=u===x&&/\b(transform|all)(,|$)/.test(r(`${x}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function q(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>K(e)+K(t[n]))))}function K(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function J(){return document.body.offsetHeight}const Z=new WeakMap,Q=new WeakMap,tt={name:"TransitionGroup",props:(0,r.l7)({},P,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.FN)(),r=(0,i.Y8)();let s,a;return(0,i.ic)((()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!it(s[0].el,n.vnode.el,e))return;s.forEach(et),s.forEach(nt);const r=s.filter(rt);J(),r.forEach((t=>{const n=t.el,r=n.style;V(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,W(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const c=(0,o.IU)(t),l=z(c);let u=c.tag||i.HY;s=a,a=e.default?(0,i.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,i.nK)(e,(0,i.U2)(e,l,r,n))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,i.nK)(e,(0,i.U2)(e,l,r,n)),Z.set(e,e.el.getBoundingClientRect())}return(0,i.Wm)(u,null,a)}}};tt.props;function et(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function nt(t){Q.set(t,t.el.getBoundingClientRect())}function rt(t){const e=Z.get(t),n=Q.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}function it(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=X(r);return i.removeChild(r),o}const ot={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):st(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!==!n&&(r?e?(r.beforeEnter(t),st(t,!0),r.enter(t)):r.leave(t,(()=>{st(t,!1)})):st(t,e))},beforeUnmount(t,{value:e}){st(t,e)}};function st(t,e){t.style.display=e?t._vod:"none"}const at=(0,r.l7)({patchProp:O},l);let ct;function lt(){return ct||(ct=(0,i.Us)(at))}const ut=(...t)=>{const e=lt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=ht(t);if(!i)return;const o=e._component;(0,r.mf)(o)||o.render||o.template||(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function ht(t){if((0,r.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,n){"use strict";n.d(e,{C_:function(){return h},DM:function(){return x},E9:function(){return st},F7:function(){return _},Gg:function(){return G},HD:function(){return P},He:function(){return it},Kj:function(){return B},Kn:function(){return U},NO:function(){return C},Nj:function(){return nt},Od:function(){return M},PO:function(){return W},Pq:function(){return f},RI:function(){return N},S0:function(){return $},W7:function(){return V},WV:function(){return m},Z6:function(){return E},_A:function(){return q},_N:function(){return D},aU:function(){return tt},dG:function(){return A},e1:function(){return o},fY:function(){return r},h5:function(){return rt},hR:function(){return Q},hq:function(){return y},ir:function(){return et},j5:function(){return s},kC:function(){return Z},kJ:function(){return O},kT:function(){return v},l7:function(){return I},mf:function(){return L},rs:function(){return J},tI:function(){return z},tR:function(){return T},yA:function(){return p},yk:function(){return F},zw:function(){return w}});n(7658);function r(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",o=r(i);function s(t){if(O(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=P(r)?u(r):s(r);if(i)for(const t in i)e[t]=i[t]}return e}return P(t)||U(t)?t:void 0}const a=/;(?![^(]*\))/g,c=/:([^]+)/,l=/\/\*.*?\*\//gs;function u(t){const e={};return t.replace(l,"").split(a).forEach((t=>{if(t){const n=t.split(c);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function h(t){let e="";if(P(t))e=t;else if(O(t))for(let n=0;n<t.length;n++){const r=h(t[n]);r&&(e+=r+" ")}else if(U(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",f=r(d);function p(t){return!!t||""===t}function g(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=m(t[r],e[r]);return n}function m(t,e){if(t===e)return!0;let n=R(t),r=R(e);if(n||r)return!(!n||!r)&&t.getTime()===e.getTime();if(n=F(t),r=F(e),n||r)return t===e;if(n=O(t),r=O(e),n||r)return!(!n||!r)&&g(t,e);if(n=U(t),r=U(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,o=Object.keys(e).length;if(i!==o)return!1;for(const n in t){const r=t.hasOwnProperty(n),i=e.hasOwnProperty(n);if(r&&!i||!r&&i||!m(t[n],e[n]))return!1}}return String(t)===String(e)}function y(t,e){return t.findIndex((t=>m(t,e)))}const w=t=>P(t)?t:null==t?"":O(t)||U(t)&&(t.toString===H||!L(t.toString))?JSON.stringify(t,b,2):String(t),b=(t,e)=>e&&e.__v_isRef?b(t,e.value):D(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:x(e)?{[`Set(${e.size})`]:[...e.values()]}:!U(e)||O(e)||W(e)?e:String(e),v={},E=[],A=()=>{},C=()=>!1,S=/^on[^a-z]/,_=t=>S.test(t),T=t=>t.startsWith("onUpdate:"),I=Object.assign,M=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},k=Object.prototype.hasOwnProperty,N=(t,e)=>k.call(t,e),O=Array.isArray,D=t=>"[object Map]"===j(t),x=t=>"[object Set]"===j(t),R=t=>"[object Date]"===j(t),B=t=>"[object RegExp]"===j(t),L=t=>"function"===typeof t,P=t=>"string"===typeof t,F=t=>"symbol"===typeof t,U=t=>null!==t&&"object"===typeof t,z=t=>U(t)&&L(t.then)&&L(t.catch),H=Object.prototype.toString,j=t=>H.call(t),V=t=>j(t).slice(8,-1),W=t=>"[object Object]"===j(t),$=t=>P(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,G=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Y=t=>{const e=Object.create(null);return n=>{const r=e[n];return r||(e[n]=t(n))}},X=/-(\w)/g,q=Y((t=>t.replace(X,((t,e)=>e?e.toUpperCase():"")))),K=/\B([A-Z])/g,J=Y((t=>t.replace(K,"-$1").toLowerCase())),Z=Y((t=>t.charAt(0).toUpperCase()+t.slice(1))),Q=Y((t=>t?`on${Z(t)}`:"")),tt=(t,e)=>!Object.is(t,e),et=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},nt=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},rt=t=>{const e=parseFloat(t);return isNaN(e)?t:e},it=t=>{const e=P(t)?Number(t):NaN;return isNaN(e)?t:e};let ot;const st=()=>ot||(ot="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},1271:function(t,e,n){"use strict";n(3767),n(8585),n(8696),n(7658),e.byteLength=u,e.toByteArray=d,e.fromByteArray=g;for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function u(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r}function h(t,e,n){return 3*(e+n)/4-n}function d(t){var e,n,r=l(t),s=r[0],a=r[1],c=new o(h(t,s,a)),u=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function p(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(f(r));return i.join("")}function g(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(p(t,a,a+s>c?c:a+s));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},7336:function(t,e,n){"use strict";const r=n(411);function i(t){return"function"===typeof t.stream?r(t.stream()):r(new Response(t).body)}t.exports=i},411:function(t){"use strict";async function*e(t,e={}){const n=t.getReader();try{while(1){const t=await n.read();if(t.done)return;yield t.value}}finally{!0!==e.preventCancel&&n.cancel(),n.releaseLock()}}t.exports=e},8716:function(t,e,n){"use strict";n(7658);var r={single_source_shortest_paths:function(t,e,n){var i={},o={};o[e]=0;var s,a,c,l,u,h,d,f,p,g=r.PriorityQueue.make();g.push(e,0);while(!g.empty())for(c in s=g.pop(),a=s.value,l=s.cost,u=t[a]||{},u)u.hasOwnProperty(c)&&(h=u[c],d=l+h,f=o[c],p="undefined"===typeof o[c],(p||f>d)&&(o[c]=d,g.push(c,d),i[c]=a));if("undefined"!==typeof n&&"undefined"===typeof o[n]){var m=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(m)}return i},extract_shortest_path_from_predecessor_list:function(t,e){var n=[],r=e;while(r)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var i=r.single_source_shortest_paths(t,e,n);return r.extract_shortest_path_from_predecessor_list(i,n)},PriorityQueue:{make:function(t){var e,n=r.PriorityQueue,i={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(i[e]=n[e]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=r},4700:function(t,e,n){"use strict";n(7658),n(3767),n(8585),n(8696),t.exports=function(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319&&n>r+1){var o=t.charCodeAt(r+1);o>=56320&&o<=57343&&(i=1024*(i-55296)+o-56320+65536,r+=1)}i<128?e.push(i):i<2048?(e.push(i>>6|192),e.push(63&i|128)):i<55296||i>=57344&&i<65536?(e.push(i>>12|224),e.push(i>>6&63|128),e.push(63&i|128)):i>=65536&&i<=1114111?(e.push(i>>18|240),e.push(i>>12&63|128),e.push(i>>6&63|128),e.push(63&i|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}},9998:function(t){"use strict";function e(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}function n(t,n,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return e(t,r)}catch(i){r.message=t.message,r.stack=t.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(t));const o=e(new n,r);return o}}t.exports=n},9150:function(t,e,n){"use strict";n(7658);const r=n(1946),{fromString:i}=n(6555);class o{constructor(t,e,n=0){this._options=t,this._popCount=0,this._parent=e,this._posAtParent=n,this._children=new r,this.key=null}async put(t,e){const n=await this._findNewBucketAndPos(t);await n.bucket._putAt(n,t,e)}async get(t){const e=await this._findChild(t);if(e)return e.value}async del(t){const e=await this._findPlace(t),n=e.bucket._at(e.pos);n&&n.key===t&&e.bucket._delAt(e.pos)}leafCount(){const t=this._children.compactArray();return t.reduce(((t,e)=>e instanceof o?t+e.leafCount():t+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const t=this._children.compactArray();for(const e of t)e instanceof o?yield*e.eachLeafSeries():yield e;return[]}serialize(t,e){const n=[];return e(this._children.reduce(((n,r,i)=>(r&&(r instanceof o?n.push(r.serialize(t,e)):n.push(t(r,i))),n)),n))}asyncTransform(t,e){return l(this,t,e)}toJSON(){return this.serialize(a,c)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(t){const e=await this._findPlace(t),n=e.bucket._at(e.pos);if(!(n instanceof o))return n&&n.key===t?n:void 0}async _findPlace(t){const e=this._options.hash("string"===typeof t?i(t):t),n=await e.take(this._options.bits),r=this._children.get(n);return r instanceof o?r._findPlace(e):{bucket:this,pos:n,hash:e,existingChild:r}}async _findNewBucketAndPos(t){const e=await this._findPlace(t);if(e.existingChild&&e.existingChild.key!==t){const t=new o(this._options,e.bucket,e.pos);e.bucket._putObjectAt(e.pos,t);const n=await t._findPlace(e.existingChild.hash);return n.bucket._putAt(n,e.existingChild.key,e.existingChild.value),t._findNewBucketAndPos(e.hash)}return e}_putAt(t,e,n){this._putObjectAt(t.pos,{key:e,value:n,hash:t.hash})}_putObjectAt(t,e){this._children.get(t)||this._popCount++,this._children.set(t,e)}_delAt(t){if(-1===t)throw new Error("Invalid position");this._children.get(t)&&this._popCount--,this._children.unset(t),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const t=this._children.find(s);if(t&&!(t instanceof o)){const e=t.hash;e.untake(this._options.bits);const n={pos:this._posAtParent,hash:e,bucket:this._parent};this._parent._putAt(n,t.key,t.value)}}else this._parent._delAt(this._posAtParent)}_at(t){return this._children.get(t)}}function s(t){return Boolean(t)}function a(t,e){return t.key}function c(t){return t}async function l(t,e,n){const r=[];for(const i of t._children.compactArray())if(i instanceof o)await l(i,e,n);else{const n=await e(i);r.push({bitField:t._children.bitField(),children:n})}return n(r)}t.exports=o},8950:function(t){"use strict";const e=[255,254,252,248,240,224,192,128],n=[1,3,7,15,31,63,127,255];function r(t,e,n){const r=i(e,n);return(t&r)>>>e}function i(t,r){return e[t]&n[Math.min(r+t-1,7)]}t.exports=class{constructor(t){this._value=t,this._currentBytePos=t.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(t){let e=t,n=0;while(e&&this._haveBits()){const t=this._value[this._currentBytePos],i=this._currentBitPos+1,o=Math.min(i,e),s=r(t,i-o,o);n=(n<<o)+s,e-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(t){this._currentBitPos+=t;while(this._currentBitPos>7)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},3165:function(t,e,n){"use strict";n(3767),n(8585),n(8696),n(7658);const r=n(8950),{concat:i}=n(5489);function o(t){function e(e){return e instanceof s?e:new s(e,t)}return e}class s{constructor(t,e){if(!(t instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=t,this._hashFn=e,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(t){let e=t;while(this._availableBits<e)await this._produceMoreBits();let n=0;while(e>0){const t=this._buffers[this._currentBufferIndex],r=Math.min(t.availableBits(),e),i=t.take(r);n=(n<<r)+i,e-=r,this._availableBits-=r,0===t.availableBits()&&this._currentBufferIndex++}return n}untake(t){let e=t;while(e>0){const t=this._buffers[this._currentBufferIndex],n=Math.min(t.totalBits()-t.availableBits(),e);t.untake(n),e-=n,this._availableBits+=n,this._currentBufferIndex>0&&t.totalBits()===t.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const t=this._depth?i([this._value,Uint8Array.from([this._depth])]):this._value,e=await this._hashFn(t),n=new r(e);this._buffers.push(n),this._availableBits+=n.availableBits()}}t.exports=o,t.exports.InfiniteHash=s},9800:function(t,e,n){"use strict";const r=n(9150),i=n(3165);function o(t){if(!t||!t.hashFn)throw new Error("please define an options.hashFn");const e={bits:t.bits||8,hash:i(t.hashFn)};return new r(e)}t.exports={createHAMT:o,Bucket:r}},4405:function(t,e,n){"use strict";n.d(e,{t2:function(){return Z}});var r;n(7658);(function(t){t[t["QR_CODE"]=0]="QR_CODE",t[t["AZTEC"]=1]="AZTEC",t[t["CODABAR"]=2]="CODABAR",t[t["CODE_39"]=3]="CODE_39",t[t["CODE_93"]=4]="CODE_93",t[t["CODE_128"]=5]="CODE_128",t[t["DATA_MATRIX"]=6]="DATA_MATRIX",t[t["MAXICODE"]=7]="MAXICODE",t[t["ITF"]=8]="ITF",t[t["EAN_13"]=9]="EAN_13",t[t["EAN_8"]=10]="EAN_8",t[t["PDF_417"]=11]="PDF_417",t[t["RSS_14"]=12]="RSS_14",t[t["RSS_EXPANDED"]=13]="RSS_EXPANDED",t[t["UPC_A"]=14]="UPC_A",t[t["UPC_E"]=15]="UPC_E",t[t["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(r||(r={}));var i,o,s=new Map([[r.QR_CODE,"QR_CODE"],[r.AZTEC,"AZTEC"],[r.CODABAR,"CODABAR"],[r.CODE_39,"CODE_39"],[r.CODE_93,"CODE_93"],[r.CODE_128,"CODE_128"],[r.DATA_MATRIX,"DATA_MATRIX"],[r.MAXICODE,"MAXICODE"],[r.ITF,"ITF"],[r.EAN_13,"EAN_13"],[r.EAN_8,"EAN_8"],[r.PDF_417,"PDF_417"],[r.RSS_14,"RSS_14"],[r.RSS_EXPANDED,"RSS_EXPANDED"],[r.UPC_A,"UPC_A"],[r.UPC_E,"UPC_E"],[r.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function a(t){return Object.values(r).includes(t)}(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["URL"]=1]="URL"})(i||(i={})),function(t){t[t["SCAN_TYPE_CAMERA"]=0]="SCAN_TYPE_CAMERA",t[t["SCAN_TYPE_FILE"]=1]="SCAN_TYPE_FILE"}(o||(o={}));var c,l=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[o.SCAN_TYPE_CAMERA,o.SCAN_TYPE_FILE],t}(),u=function(){function t(t,e){this.format=t,this.formatName=e}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!s.has(e))throw e+" not in html5QrcodeSupportedFormatsTextMap";return new t(e,s.get(e))},t}(),h=function(){function t(){}return t.createFromText=function(t){var e={text:t};return{decodedText:t,result:e}},t.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},t}();(function(t){t[t["UNKWOWN_ERROR"]=0]="UNKWOWN_ERROR",t[t["IMPLEMENTATION_ERROR"]=1]="IMPLEMENTATION_ERROR",t[t["NO_CODE_FOUND_ERROR"]=2]="NO_CODE_FOUND_ERROR"})(c||(c={}));var d=function(){function t(){}return t.createFrom=function(t){return{errorMessage:t,type:c.UNKWOWN_ERROR}},t}(),f=function(){function t(t){this.verbose=t}return t.prototype.log=function(t){this.verbose&&console.log(t)},t.prototype.warn=function(t){this.verbose&&console.warn(t)},t.prototype.logError=function(t,e){(this.verbose||!0===e)&&console.error(t)},t.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},t}();function p(t){return"undefined"===typeof t||null===t}function g(t,e,n){return t>n?n:t<e?e:t}var m,y=function(){function t(){}return t.codeParseError=function(t){return"QR code parse error, error = "+t},t.errorGettingUserMedia=function(t){return"Error getting userMedia, error = "+t},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t}(),w=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(t){return"Last Match: "+t},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),b=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),v=function(){function t(){}return t.isMediaStreamConstraintsValid=function(t,e){if("object"!==typeof t){var n=typeof t;return e.logError("videoConstraints should be of type object, the object passed is of type "+n+".",!0),!1}for(var r=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(r),o=Object.keys(t),s=0,a=o;s<a.length;s++){var c=a[s];if(i.has(c))return e.logError(c+" is not supported videoConstaints.",!0),!1}return!0},t}(),E=n(5176),A=function(){function t(t,e,n){if(this.formatMap=new Map([[r.QR_CODE,E.BarcodeFormat.QR_CODE],[r.AZTEC,E.BarcodeFormat.AZTEC],[r.CODABAR,E.BarcodeFormat.CODABAR],[r.CODE_39,E.BarcodeFormat.CODE_39],[r.CODE_93,E.BarcodeFormat.CODE_93],[r.CODE_128,E.BarcodeFormat.CODE_128],[r.DATA_MATRIX,E.BarcodeFormat.DATA_MATRIX],[r.MAXICODE,E.BarcodeFormat.MAXICODE],[r.ITF,E.BarcodeFormat.ITF],[r.EAN_13,E.BarcodeFormat.EAN_13],[r.EAN_8,E.BarcodeFormat.EAN_8],[r.PDF_417,E.BarcodeFormat.PDF_417],[r.RSS_14,E.BarcodeFormat.RSS_14],[r.RSS_EXPANDED,E.BarcodeFormat.RSS_EXPANDED],[r.UPC_A,E.BarcodeFormat.UPC_A],[r.UPC_E,E.BarcodeFormat.UPC_E],[r.UPC_EAN_EXTENSION,E.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!E)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=e,this.logger=n;var i=this.createZXingFormats(t),o=new Map;o.set(E.DecodeHintType.POSSIBLE_FORMATS,i),o.set(E.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(t){var e=this;return new Promise((function(n,r){try{n(e.decode(t))}catch(i){r(i)}}))},t.prototype.decode=function(t){var e=new E.MultiFormatReader(this.verbose,this.hints),n=new E.HTMLCanvasElementLuminanceSource(t),r=new E.BinaryBitmap(new E.HybridBinarizer(n)),i=e.decode(r);return{text:i.text,format:u.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach((function(e,n,r){t.set(e,n)})),t},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},t.prototype.createZXingFormats=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];this.formatMap.has(i)?e.push(this.formatMap.get(i)):this.logger.logError(i+" is not supported byZXingHtml5QrcodeShim")}return e},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),C=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},S=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},_=function(){function t(e,n,i){if(this.formatMap=new Map([[r.QR_CODE,"qr_code"],[r.AZTEC,"aztec"],[r.CODABAR,"codabar"],[r.CODE_39,"code_39"],[r.CODE_93,"code_93"],[r.CODE_128,"code_128"],[r.DATA_MATRIX,"data_matrix"],[r.ITF,"itf"],[r.EAN_13,"ean_13"],[r.EAN_8,"ean_8"],[r.PDF_417,"pdf417"],[r.UPC_A,"upc_a"],[r.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return"undefined"!==typeof t},t.prototype.decodeAsync=function(t){return C(this,void 0,void 0,(function(){var e,n;return S(this,(function(r){switch(r.label){case 0:return[4,this.detector.detect(t)];case 1:if(e=r.sent(),!e||0===e.length)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(e),[2,{text:n.rawValue,format:u.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}}))}))},t.prototype.selectLargestBarcode=function(t){for(var e=null,n=0,r=0,i=t;r<i.length;r++){var o=i[r],s=o.boundingBox.width*o.boundingBox.height;s>n&&(n=s,e=o)}if(!e)throw"No largest barcode found";return e},t.prototype.createBarcodeDetectorFormats=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];this.formatMap.has(i)?e.push(this.formatMap.get(i)):this.logger.warn(i+" is not supported byBarcodeDetectorDelegate")}return{formats:e}},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach((function(e,n,r){t.set(e,n)})),t},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),T=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},I=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},M=function(){function t(t,e,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,e&&_.isSupported()?(this.primaryDecoder=new _(t,n,r),this.secondaryDecoder=new A(t,n,r)):this.primaryDecoder=new A(t,n,r)}return t.prototype.decodeAsync=function(t){return T(this,void 0,void 0,(function(){var e;return I(this,(function(n){switch(n.label){case 0:e=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(e),[7];case 4:return[2]}}))}))},t.prototype.decodeRobustlyAsync=function(t){return T(this,void 0,void 0,(function(){var e,n;return I(this,(function(r){switch(r.label){case 0:e=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(e),[7];case 5:return[2]}}))}))},t.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(t){if(this.verbose){var e=performance.now()-t;this.executionResults.push(e),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,e=0,n=this.executionResults;e<n.length;e++){var r=n[e];t+=r}var i=t/this.executionResults.length;console.log(i+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},t}(),k=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},O=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},D=function(){function t(t,e){this.name=t,this.track=e}return t.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},t.prototype.apply=function(t){var e={};e[this.name]=t;var n={advanced:[e]};return this.track.applyConstraints(n)},t.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var e=t[this.name];return e}return null},t}(),x=function(t){function e(e,n){return t.call(this,e,n)||this}return k(e,t),e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var e={};e[this.name]=t;var n={advanced:[e]};return this.track.applyConstraints(n)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),e=t[this.name];return{min:e.min,max:e.max,step:e.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},e}(D),R=function(t){function e(e){return t.call(this,"zoom",e)||this}return k(e,t),e}(x),B=function(t){function e(e){return t.call(this,"torch",e)||this}return k(e,t),e}(D),L=function(){function t(t){this.track=t}return t.prototype.zoomFeature=function(){return new R(this.track)},t.prototype.torchFeature=function(){return new B(this.track)},t}(),P=function(){function t(t,e,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=e,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return t.prototype.createVideoElement=function(t){var e=document.createElement("video");return e.style.width=t+"px",e.style.display="block",e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},t.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var e=function(){var n=t.surface.clientWidth,r=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,r),t.surface.removeEventListener("playing",e)};this.surface.addEventListener("playing",e),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return N(this,void 0,void 0,(function(){var o,s;return O(this,(function(a){switch(a.label){case 0:return o=new t(e,n,i),r.aspectRatio?(s={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}}))}))},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(t){this.failIfClosed();var e=this,n=function(){setTimeout(t,200),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(t){return N(this,void 0,void 0,(function(){return O(this,(function(e){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]}))}))},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise((function(e,n){var r=t.mediaStream.getVideoTracks(),i=r.length,o=0;t.mediaStream.getVideoTracks().forEach((function(n){t.mediaStream.removeTrack(n),n.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),e())}))}))},t.prototype.getCapabilities=function(){return new L(this.getFirstTrackOrFail())},t}(),F=function(){function t(t){this.mediaStream=t}return t.prototype.render=function(t,e,n){return N(this,void 0,void 0,(function(){return O(this,(function(r){return[2,P.create(t,this.mediaStream,e,n)]}))}))},t.create=function(e){return N(this,void 0,void 0,(function(){var n,r;return O(this,(function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}}))}))},t}(),U=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},z=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},H=function(){function t(){}return t.failIfNotSupported=function(){return U(this,void 0,void 0,(function(){return z(this,(function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]}))}))},t.prototype.create=function(t){return U(this,void 0,void 0,(function(){return z(this,(function(e){return[2,F.create(t)]}))}))},t}(),j=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},V=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},W=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=y.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=y.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},t.getCamerasFromMediaDevices=function(){return j(this,void 0,void 0,(function(){var t,e,n,r,i,o,s;return V(this,(function(a){switch(a.label){case 0:return t=function(t){for(var e=t.getVideoTracks(),n=0,r=e;n<r.length;n++){var i=r[n];i.enabled=!1,i.stop(),t.removeTrack(i)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return e=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=a.sent(),r=[],i=0,o=n;i<o.length;i++)s=o[i],"videoinput"===s.kind&&r.push({id:s.deviceId,label:s.label});return t(e),[2,r]}}))}))},t.getCamerasFromMediaStreamTrack=function(){return new Promise((function(t,e){var n=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}t(n)},r=MediaStreamTrack;r.getSources(n)}))},t}();(function(t){t[t["UNKNOWN"]=0]="UNKNOWN",t[t["NOT_STARTED"]=1]="NOT_STARTED",t[t["SCANNING"]=2]="SCANNING",t[t["PAUSED"]=3]="PAUSED"})(m||(m={}));var $,G=function(){function t(){this.state=m.NOT_STARTED,this.onGoingTransactionNewState=m.UNKNOWN}return t.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},t.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===m.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=m.UNKNOWN,this.directTransition(t)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===m.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=m.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==m.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(t){switch(this.state){case m.UNKNOWN:throw"Transition from unknown is not allowed";case m.NOT_STARTED:this.failIfNewStateIs(t,[m.PAUSED]);break;case m.SCANNING:break;case m.PAUSED:break}},t.prototype.failIfNewStateIs=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t===i)throw"Cannot transition from "+this.state+" to "+t}},t}(),Y=function(){function t(t){this.stateManager=t}return t.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},t.prototype.directTransition=function(t){this.stateManager.directTransition(t)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===m.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==m.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===m.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===m.PAUSED},t}(),X=function(){function t(){}return t.create=function(){return new Y(new G)},t}(),q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return q(e,t),e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(l),J=function(){function t(t,e){this.logger=e,this.fps=K.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=K.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?v.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!p(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),Z=function(){function t(t,e){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id="+t+" not found";var n;this.elementId=t,this.verbose=!1,"boolean"==typeof e?this.verbose=!0===e:e&&(n=e,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new f(this.verbose),this.qrcode=new M(this.getSupportedFormats(e),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=X.create()}return t.prototype.start=function(t,e,n,r){var i,o=this;if(!t)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";i=r||(this.verbose?this.logger.log:function(){});var s=J.create(e,this.logger);this.clearElement();var a=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=a,l=document.getElementById(this.elementId);l.clientWidth?l.clientWidth:K.DEFAULT_WIDTH;l.style.position="relative",this.shouldScan=!0,this.element=l;var u=this,h=this.stateManagerProxy.startTransition(m.SCANNING);return new Promise((function(e,r){var a=c?s.videoConstraints:u.createVideoConstraints(t);if(!a)return h.cancel(),void r("videoConstraints should be defined");var l={};c&&!s.aspectRatio||(l.aspectRatio=s.aspectRatio);var d={onRenderSurfaceReady:function(t,e){u.setupUi(t,e,s),u.isScanning=!0,u.foreverScan(s,n,i)}};H.failIfNotSupported().then((function(t){t.create(a).then((function(t){return t.render(o.element,l,d).then((function(t){u.renderedCamera=t,h.execute(),e(null)})).catch((function(t){h.cancel(),r(t)}))})).catch((function(t){h.cancel(),r(y.errorGettingUserMedia(t))}))})).catch((function(t){h.cancel(),r(y.cameraStreamingNotSupported())}))}))},t.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(m.PAUSED),this.showPausedState(),(p(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,e=function(){t.stateManagerProxy.directTransition(m.SCANNING),t.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){e()})):e()},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var e=this.stateManagerProxy.startTransition(m.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var e=document.getElementById(K.SHADED_REGION_ELEMENT_ID);e&&t.element.removeChild(e)}},r=this;return this.renderedCamera.close().then((function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),n(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),e.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()}))},t.prototype.scanFile=function(t,e){return this.scanFileV2(t,e).then((function(t){return t.decodedText}))},t.prototype.scanFileV2=function(t,e){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(p(e)&&(e=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(r,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var t=o.width,s=o.height,a=document.getElementById(n.elementId),c=a.clientWidth?a.clientWidth:K.DEFAULT_WIDTH,l=Math.max(a.clientHeight?a.clientHeight:s,K.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(t,s,c,l);if(e){var d=n.createCanvasElement(c,l,"qr-canvas-visible");d.style.display="inline-block",a.appendChild(d);var f=d.getContext("2d");if(!f)throw"Unable to get 2d context from canvas";f.canvas.width=c,f.canvas.height=l,f.drawImage(o,0,0,t,s,u.x,u.y,u.width,u.height)}var p=K.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(o.width,u.width),m=Math.max(o.height,u.height),y=g+2*p,w=m+2*p,b=n.createCanvasElement(y,w);a.appendChild(b);var v=b.getContext("2d");if(!v)throw"Unable to get 2d context from canvas";v.canvas.width=y,v.canvas.height=w,v.drawImage(o,0,0,t,s,p,p,g,m);try{n.qrcode.decodeRobustlyAsync(b).then((function(t){r(h.createFromQrcodeResult(t))})).catch(i)}catch(E){i("QR code parse error, error = "+E)}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)}))},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return W.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(t){if(!t)throw"videoConstaints is required argument.";if(!v.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},t.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(t){var e=[r.QR_CODE,r.AZTEC,r.CODABAR,r.CODE_39,r.CODE_93,r.CODE_128,r.DATA_MATRIX,r.MAXICODE,r.ITF,r.EAN_13,r.EAN_8,r.PDF_417,r.RSS_14,r.RSS_EXPANDED,r.UPC_A,r.UPC_E,r.UPC_EAN_EXTENSION];if(!t||"boolean"==typeof t)return e;if(!t.formatsToSupport)return e;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],i=0,o=t.formatsToSupport;i<o.length;i++){var s=o[i];a(s)?n.push(s):this.logger.warn("Invalid format: "+s+" passed in config, ignoring.")}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(t){if(p(t))return!0;if(!p(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(p(t.experimentalFeatures))return!0;var e=t.experimentalFeatures;return!!p(e.useBarCodeDetectorIfSupported)||!1!==e.useBarCodeDetectorIfSupported},t.prototype.validateQrboxSize=function(t,e,n){var r=this,i=n.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,e,i),s=function(t){if(t<K.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+K.MIN_QR_BOX_SIZE+"px."},a=function(e){return e>t&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),e=t),e};s(o.width),s(o.height),o.width=a(o.width)},t.prototype.validateQrboxConfig=function(t){if("number"!==typeof t&&"function"!==typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(t,e,n){if("number"===typeof n)return{width:n,height:n};if("function"===typeof n)try{return n(t,e)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return n},t.prototype.setupUi=function(t,e,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,e,n);var r=p(n.qrbox)?{width:t,height:e}:n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(t,e,r);i.height>e&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=e,s={x:0,y:0,width:t,height:e},a=o?this.getShadedRegionBounds(t,e,i):s,c=this.createCanvasElement(a.width,a.height),l={willReadFrequently:!0},u=c.getContext("2d",l);u.canvas.width=a.width,u.canvas.height=a.height,this.element.append(c),o&&this.possiblyInsertShadingElement(this.element,t,e,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=u,this.canvasElement=c},t.prototype.createScannerPausedUiElement=function(t){var e=document.createElement("div");e.innerText="Scanner paused",e.style.display="none",e.style.position="absolute",e.style.top="0px",e.style.zIndex="1",e.style.background="yellow",e.style.textAlign="center",e.style.width="100%",t.appendChild(e),this.scannerPausedUiElement=e},t.prototype.scanContext=function(t,e){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(e){return t(e.text,h.createFromQrcodeResult(e)),n.possiblyUpdateShaders(!0),!0})).catch((function(t){n.possiblyUpdateShaders(!1);var r=y.codeParseError(t);return e(r,d.createFrom(r)),!1}))},t.prototype.foreverScan=function(t,e,n){var r=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,s=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*o,c=this.qrRegion.height*s,l=this.qrRegion.x*o,u=this.qrRegion.y*s;this.context.drawImage(i,l,u,a,c,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){r.foreverScanTimeout=setTimeout((function(){r.foreverScan(t,e,n)}),r.getTimeoutFps(t.fps))};this.scanContext(e,n).then((function(i){i||!0===t.disableFlip?h():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(e,n).finally((function(){h()})))})).catch((function(t){r.logger.logError("Error happend while scanning context",t),h()}))}},t.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var e="facingMode",n="deviceId",r={user:!0,environment:!0},i="exact",o=function(t){if(t in r)return!0;throw"config has invalid 'facingMode' value = '"+t+"'"},s=Object.keys(t);if(1!==s.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+s.length+" keys";var a=Object.keys(t)[0];if(a!==e&&a!==n)throw"Only '"+e+"' and '"+n+"'  are supported for 'cameraIdOrConfig'";if(a!==e){var c=t.deviceId;if("string"==typeof c)return{deviceId:c};if("object"==typeof c){if(i in c)return{deviceId:{exact:c[""+i]}};throw"'deviceId' should be string or object with "+i+" as key."}var l=typeof c;throw"Invalid type of 'deviceId' = "+l}var u=t.facingMode;if("string"==typeof u){if(o(u))return{facingMode:u}}else{if("object"!=typeof u){var h=typeof u;throw"Invalid type of 'facingMode' = "+h}if(!(i in u))throw"'facingMode' should be string or object with "+i+" as key.";if(o(u[""+i]))return{facingMode:{exact:u[""+i]}}}}var d=typeof t;throw"Invalid type of 'cameraIdOrConfig' = "+d},t.prototype.computeCanvasDrawConfig=function(t,e,n,r){if(t<=n&&e<=r){var i=(n-t)/2,o=(r-e)/2;return{x:i,y:o,width:t,height:e}}var s=t,a=e;return t>n&&(e*=n/t,t=n),e>r&&(t*=r/e,e=r),this.logger.log("Image downsampled from "+s+"X"+a+" to "+t+"X"+e+"."),this.computeCanvasDrawConfig(t,e,n,r)},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},t.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(e){e.style.backgroundColor=t?K.BORDER_SHADER_MATCH_COLOR:K.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=t)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(t,e,n){var r=t,i=e,o=document.createElement("canvas");return o.style.width=r+"px",o.style.height=i+"px",o.style.display="none",o.id=p(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(t,e,n){if(n.width>t||n.height>e)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(e-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(t,e,n,r){if(!(e-r.width<1||n-r.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(e-r.width)/2,s=(n-r.height)/2;if(i.style.borderLeft=o+"px solid rgba(0, 0, 0, 0.48)",i.style.borderRight=o+"px solid rgba(0, 0, 0, 0.48)",i.style.borderTop=s+"px solid rgba(0, 0, 0, 0.48)",i.style.borderBottom=s+"px solid rgba(0, 0, 0, 0.48)",i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id=""+K.SHADED_REGION_ELEMENT_ID,e-r.width<11||n-r.height<11)this.hasBorderShaders=!1;else{var a=5,c=40;this.insertShaderBorders(i,c,a,-a,null,0,!0),this.insertShaderBorders(i,c,a,-a,null,0,!1),this.insertShaderBorders(i,c,a,null,-a,0,!0),this.insertShaderBorders(i,c,a,null,-a,0,!1),this.insertShaderBorders(i,a,c+a,-a,null,-a,!0),this.insertShaderBorders(i,a,c+a,null,-a,-a,!0),this.insertShaderBorders(i,a,c+a,-a,null,-a,!1),this.insertShaderBorders(i,a,c+a,null,-a,-a,!1),this.hasBorderShaders=!0}t.append(i)}},t.prototype.insertShaderBorders=function(t,e,n,r,i,o,s){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=K.BORDER_SHADER_DEFAULT_COLOR,a.style.width=e+"px",a.style.height=n+"px",null!==r&&(a.style.top=r+"px"),null!==i&&(a.style.bottom=i+"px"),s?a.style.left=o+"px":a.style.right=o+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),t.appendChild(a)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(t){return 1e3/t},t}(),Q="data:image/svg+xml;base64,",tt=Q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",et=Q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",nt=Q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",it=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),ot=function(){function t(){this.data=it.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},t.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=it.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),st=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=b.poweredBy();var e=document.createElement("a");e.innerText="ScanApp",e.href="https://scanapp.org",e.target="new",e.style.color="white",this.infoDiv.appendChild(e);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var i=document.createElement("a");i.innerText=b.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),t.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),at=function(){function t(t,e){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=e,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(t){var e=this;this.infoIcon.alt="Info icon",this.infoIcon.src=nt,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(t){return e.onHoverIn()},this.infoIcon.onmouseout=function(t){return e.onHoverOut()},this.infoIcon.onclick=function(t){return e.onClick()},t.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=rt,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=nt,this.infoIcon.style.opacity="0.6")},t}(),ct=function(){function t(){var t=this;this.infoDiv=new st,this.infoIcon=new at((function(){t.infoDiv.show()}),(function(){t.infoDiv.hide()}))}return t.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},t}(),lt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},ut=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ht=function(){function t(){}return t.hasPermissions=function(){return lt(this,void 0,void 0,(function(){var t,e,n,r;return ut(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)if(r=n[e],"videoinput"===r.kind&&r.label)return[2,!0];return[2,!1]}}))}))},t}(),dt=function(){function t(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var r=n[e];if(t.isCameraScanType(r))return!0}return!1},t.isCameraScanType=function(t){return t===o.SCAN_TYPE_CAMERA},t.isFileScanType=function(t){return t===o.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return l.DEFAULT_SUPPORTED_SCAN_TYPE;var e=l.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>e)throw"Max "+e+" values expected for supportedScanTypes";for(var n=0,r=t;n<r.length;n++){var i=r[n];if(!l.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type "+i}return t},t}(),ft=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),pt=function(){function t(){}return t.createElement=function(t,e){var n=document.createElement(t);return n.id=e,n.classList.add(ft.ALL_ELEMENT_CLASS),"button"===t&&n.setAttribute("type","button"),n},t}(),gt=function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))},mt=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return c([t,e])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(i=2&o[0]?r["return"]:o[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},yt=function(){function t(t,e,n){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return gt(this,void 0,void 0,(function(){var t,e;return mt(this,(function(n){switch(n.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return e=n.sent(),this.propagateFailure(t,e),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},t.prototype.updateUiBasedOnLatestSettings=function(t,e){t===e?(this.buttonController.setText(e?w.torchOffButton():w.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()},t.prototype.propagateFailure=function(t,e){var n=t?w.torchOnFailedMessage():w.torchOffFailedMessage();e&&(n+="; Error = "+e),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),wt=function(){function t(t,e){this.onTorchActionFailureCallback=e,this.torchButton=pt.createElement("button",ft.TORCH_BUTTON_ID),this.torchController=new yt(t,this,e)}return t.prototype.render=function(t,e){var n=this;this.torchButton.innerText=w.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;var r=this;this.torchButton.addEventListener("click",(function(t){return gt(n,void 0,void 0,(function(){return mt(this,(function(t){switch(t.label){case 0:return[4,r.torchController.flipState()];case 1:return t.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(ft.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(ft.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(ft.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(ft.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),t.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(t){this.torchController=new yt(t,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(t){this.torchButton.innerText=t},t.prototype.reset=function(){this.torchButton.innerText=w.torchOnButton(),this.torchController.reset()},t.create=function(e,n,r,i){var o=new t(n,i);return o.render(e,r),o},t}(),bt=function(){function t(t,e,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=e?"block":"none",t.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=pt.createElement("button",ft.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(t){r.click()})),r.append(this.fileSelectionButton),this.fileScanInput=pt.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",(function(t){if(null!=t&&null!=t.target){var e=t.target;if(!e.files||0!==e.files.length){var r=e.files,o=r[0],s=o.name;i.setImageNameToButton(s),n(o)}}}));var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var e=t.dataTransfer;if(e){var r=e.files;if(!r||0===r.length)return;for(var s=!1,a=0;a<r.length;++a){var c=r.item(a);if(c){var l=/image.*/;if(c.type.match(l)){s=!0;var u=c.name;i.setImageNameToButton(u),n(c),o.innerText=w.dragAndDropMessage();break}}}s||(o.innerText=w.dragAndDropMessageOnlyImages())}}))}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=w.dragAndDropMessage(),t.style.fontWeight="400",t},t.prototype.setImageNameToButton=function(t){var e=20;if(t.length>e){var n=t.substring(0,8),r=t.length,i=t.substring(r-8,r);t=n+"...."+i}var o=w.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=o},t.prototype.setInitialValueToButton=function(){var t=w.fileSelectionChooseImage()+" - "+w.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,r){var i=new t(e,n,r);return i},t}(),vt=function(){function t(t){this.selectElement=pt.createElement("select",ft.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return t.prototype.render=function(t){var e=document.createElement("span");e.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw new Error("No cameras found");if(1===n)e.style.display="none";else{var r=w.selectCamera();e.innerText=r+" ("+this.cameras.length+")  "}for(var i=1,o=0,s=this.cameras;o<s.length;o++){var a=s[o],c=a.id,l=null==a.label?c:a.label;l&&""!==l||(l=[w.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=c,u.innerText=l,this.options.push(u),this.selectElement.appendChild(u)}e.appendChild(this.selectElement),t.appendChild(e)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return!0===this.selectElement.disabled},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(t){for(var e=0,n=this.options;e<n.length;e++){var r=n[e];if(r.value===t)return!0}return!1},t.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error(t+" is not present in the camera list.");this.selectElement.value=t},t.prototype.hasSingleItem=function(){return 1===this.cameras.length},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var r=new t(n);return r.render(e),r},t}(),Et=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=pt.createElement("input",ft.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(t,e){this.zoomElementContainer.style.display=e?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=w.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+n,this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",(function(){return r.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return r.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var t=w.zoom();this.rangeText.innerText=this.rangeInput.value+"x "+t,this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(t,e,n,r){this.rangeInput.min=t.toString(),this.rangeInput.max=e.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var r=new t;return r.render(e,n),r},t}();function At(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function Ct(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}(function(t){t[t["STATUS_DEFAULT"]=0]="STATUS_DEFAULT",t[t["STATUS_SUCCESS"]=1]="STATUS_SUCCESS",t[t["STATUS_WARNING"]=2]="STATUS_WARNING",t[t["STATUS_REQUESTING_PERMISSION"]=3]="STATUS_REQUESTING_PERMISSION"})($||($={}));(function(){function t(t,e,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(e),this.verbose=!0===n,!document.getElementById(t))throw"HTML Element with id="+t+" not found";this.scanTypeSelector=new dt(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new f(this.verbose),this.persistedDataManager=new ot,!0!==e.rememberLastUsedCamera&&this.persistedDataManager.reset()}t.prototype.render=function(t,e){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(e,r){if(t)t(e,r);else{if(n.lastMatchFound===e)return;n.lastMatchFound=e,n.setHeaderMessage(w.lastMatch(e),$.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(t,n){e&&e(t,n)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id="+this.elementId+" not found";r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new Z(this.getScanRegionId(),Ct(this.config,this.verbose))},t.prototype.pause=function(t){(p(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var t=this,e=function(){var e=document.getElementById(t.elementId);e&&(e.innerHTML="",t.resetBasicLayout(e))};return this.html5Qrcode?new Promise((function(n,r){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then((function(r){t.html5Qrcode?(t.html5Qrcode.clear(),e(),n()):n()})).catch((function(e){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",e),r(e)})):(t.html5Qrcode.clear(),e(),n()):n()})):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(t){return t?(t.fps||(t.fps=l.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!l.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=l.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=l.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:l.SCAN_DEFAULT_FPS,rememberLastUsedCamera:l.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:l.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var e=document.createElement("div"),n=this.getScanRegionId();e.id=n,e.style.width="100%",e.style.minHeight="100px",e.style.textAlign="center",t.appendChild(e),dt.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),i=this.getDashboardId();r.id=i,r.style.width="100%",t.appendChild(r),this.setupInitialDashboard(r)},t.prototype.resetBasicLayout=function(t){t.style.border="none"},t.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(t){var e=document.createElement("div");e.style.textAlign="left",e.style.margin="0px",t.appendChild(e);var n=new ct;n.renderInto(e);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",e.appendChild(r)},t.prototype.createSection=function(t){var e=document.createElement("div");e.id=this.getDashboardSectionId(),e.style.width="100%",e.style.padding="10px 0px 10px 0px",e.style.textAlign="left",t.appendChild(e)},t.prototype.createCameraListUi=function(t,e,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(w.cameraPermissionRequesting());var i=function(){n||r.createPermissionButton(t,e)};Z.getCameras().then((function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(t.removeChild(e),r.renderCameraSelection(n)):(r.setHeaderMessage(w.noCameraFound(),$.STATUS_WARNING),i())})).catch((function(t){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:i(),r.setHeaderMessage(t,$.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)}))},t.prototype.createPermissionButton=function(t,e){var n=this,r=pt.createElement("button",this.getCameraPermissionButtonId());r.innerText=w.cameraPermissionTitle(),r.addEventListener("click",(function(){r.disabled=!0,n.createCameraListUi(t,e,r)})),e.appendChild(r)},t.prototype.createPermissionsUi=function(t,e){var n=this;dt.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?ht.hasPermissions().then((function(r){r?n.createCameraListUi(t,e):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,e))})).catch((function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,e)})):this.createPermissionButton(t,e)},t.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),e=document.createElement("div");t.appendChild(e);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=dt.isCameraScanType(this.currentScanType)?"block":"none",e.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(e)},t.prototype.renderFileScanUi=function(t){var e=dt.isFileScanType(this.currentScanType),n=this,r=function(t){if(!n.html5Qrcode)throw"html5Qrcode not defined";dt.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(w.loadingImage()),n.html5Qrcode.scanFileV2(t,!0).then((function(t){n.resetHeaderMessage(),n.qrCodeSuccessCallback(t.decodedText,t)})).catch((function(t){n.setHeaderMessage(t,$.STATUS_WARNING),n.qrCodeErrorCallback(t,d.createFrom(t))})))};this.fileSelectionUi=bt.create(t,e,r)},t.prototype.renderCameraSelection=function(t){var e=this,n=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=Et.create(r,!1),o=function(t){var n=t.zoomFeature();if(n.isSupported()){i.setOnCameraZoomValueChangeCallback((function(t){n.apply(t)}));var r=1;e.config.defaultZoomValueIfSupported&&(r=e.config.defaultZoomValueIfSupported),r=g(r,n.min(),n.max()),i.setValues(n.min(),n.max(),r,n.step()),i.show()}},s=vt.create(r,t),a=document.createElement("span"),c=pt.createElement("button",ft.CAMERA_START_BUTTON_ID);c.innerText=w.scanButtonStartScanningText(),a.appendChild(c);var l,u=pt.createElement("button",ft.CAMERA_STOP_BUTTON_ID);u.innerText=w.scanButtonStopScanningText(),u.style.display="none",u.disabled=!0,a.appendChild(u);var h=function(t){t.torchFeature().isSupported()?(l?l.updateTorchCapability(t.torchFeature()):l=wt.create(a,t.torchFeature(),{display:"none",marginLeft:"5px"},(function(t){n.setHeaderMessage(t,$.STATUS_WARNING)})),l.show()):l&&l.hide()};r.appendChild(a);var d=function(t){t||(c.style.display="none"),c.innerText=w.scanButtonStartScanningText(),c.style.opacity="1",c.disabled=!1,t&&(c.style.display="inline-block")};if(c.addEventListener("click",(function(t){c.innerText=w.scanButtonScanningStarting(),s.disable(),c.disabled=!0,c.style.opacity="0.5",e.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var r=s.getValue();n.persistedDataManager.setLastUsedCameraId(r),n.html5Qrcode.start(r,At(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then((function(t){u.disabled=!1,u.style.display="inline-block",d(!1);var r=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===e.config.showTorchButtonIfSupported&&h(r),!0===e.config.showZoomSliderIfSupported&&o(r)})).catch((function(t){n.showHideScanTypeSwapLink(!0),s.enable(),d(!0),n.setHeaderMessage(t,$.STATUS_WARNING)}))})),s.hasSingleItem()&&c.click(),u.addEventListener("click",(function(t){if(!n.html5Qrcode)throw"html5Qrcode not defined";u.disabled=!0,n.html5Qrcode.stop().then((function(t){e.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),s.enable(),c.disabled=!1,u.style.display="none",c.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),n.insertCameraScanImageToScanRegion()})).catch((function(t){u.disabled=!1,n.setHeaderMessage(t,$.STATUS_WARNING)}))})),n.persistedDataManager.getLastUsedCameraId()){var f=n.persistedDataManager.getLastUsedCameraId();s.hasValue(f)?(s.setValue(f),c.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var t=this,e=w.textIfCameraScanSelected(),n=w.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=pt.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=dt.isCameraScanType(this.currentScanType)?e:n,s.addEventListener("click",(function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,dt.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),s.innerText=n,t.currentScanType=o.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),s.innerText=e,t.currentScanType=o.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")})),i.appendChild(s),r.appendChild(i)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,e=this;this.persistedDataManager.hasCameraPermissions()&&ht.hasPermissions().then((function(n){if(n){var r=document.getElementById(e.getCameraPermissionButtonId());if(!r)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else e.persistedDataManager.setHasPermission(!1)})).catch((function(t){e.persistedDataManager.setHasPermission(!1)}))},t.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},t.prototype.setHeaderMessage=function(t,e){e||(e=$.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=t,n.style.display="block",e){case $.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case $.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case $.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return e.innerHTML="<br>",void e.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){e.innerHTML="<br>",e.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=tt,this.cameraScanImage.alt=w.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return e.innerHTML="<br>",void e.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(n){e.innerHTML="<br>",e.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=et,this.fileScanImage.alt=w.fileScanAltText()},t.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},t.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},t.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},t.prototype.getDashboardSectionSwapLinkId=function(){return ft.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},t.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},t.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},t.prototype.getCameraPermissionButtonId=function(){return ft.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}})()},5176:function(t,e,n){n(3767),n(8585),n(8696),n(2801),n(7658),n(541),function(t,n){n(e)}(0,(function(t){"use strict";function e(t){return null===t||void 0===t}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function s(t,e){void 0===e&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var a,c=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),o(r,n.prototype),s(r),r}return i(e,t),e}(Error);class l extends c{constructor(t=undefined){super(t),this.message=t}getKind(){const t=this.constructor;return t.kind}}l.kind="Exception";class u extends l{}u.kind="ArgumentException";class h extends l{}h.kind="IllegalArgumentException";class d{constructor(t){if(this.binarizer=t,null===t)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,n,r){const i=this.binarizer.getLuminanceSource().crop(t,e,n,r);return new d(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new d(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new d(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class f extends l{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class g{static arraycopy(t,e,n,r,i){while(i--)n[r++]=t[e++]}static currentTimeMillis(){return Date.now()}}class m extends l{}m.kind="IndexOutOfBoundsException";class y extends m{constructor(t=undefined,e=undefined){super(e),this.index=t,this.message=e}}y.kind="ArrayIndexOutOfBoundsException";class w{static fill(t,e){for(let n=0,r=t.length;n<r;n++)t[n]=e}static fillWithin(t,e,n,r){w.rangeCheck(t.length,e,n);for(let i=e;i<n;i++)t[i]=r}static rangeCheck(t,e,n){if(e>n)throw new h("fromIndex("+e+") > toIndex("+n+")");if(e<0)throw new y(e);if(n>t)throw new y(n)}static asList(...t){return t}static create(t,e,n){let r=Array.from({length:t});return r.map((t=>Array.from({length:e}).fill(n)))}static createInt32Array(t,e,n){let r=Array.from({length:t});return r.map((t=>Int32Array.from({length:e}).fill(n)))}static equals(t,e){if(!t)return!1;if(!e)return!1;if(!t.length)return!1;if(!e.length)return!1;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(const n of t)e=31*e+n;return e}static fillUint8Array(t,e){for(let n=0;n!==t.length;n++)t[n]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){const n=new Uint8Array(e);return n.set(t),n}return t.slice(0,e)}static copyOfRange(t,e,n){const r=n-e,i=new Int32Array(r);return g.arraycopy(t,e,i,0,r),i}static binarySearch(t,e,n){void 0===n&&(n=w.numberComparator);let r=0,i=t.length-1;while(r<=i){const o=i+r>>1,s=n(e,t[o]);if(s>0)r=o+1;else{if(!(s<0))return o;i=o-1}}return-r-1}static numberComparator(t,e){return t-e}}class b{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let n=31;return e=t<<16,0!==e&&(n-=16,t=e),e=t<<8,0!==e&&(n-=8,t=e),e=t<<4,0!==e&&(n-=4,t=e),e=t<<2,0!==e&&(n-=2,t=e),n-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16===0&&(e+=16,t<<=16),t>>>24===0&&(e+=8,t<<=8),t>>>28===0&&(e+=4,t<<=4),t>>>30===0&&(e+=2,t<<=2),e-=t>>>31,e}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t+=t>>>8,t+=t>>>16,63&t}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e=undefined){return parseInt(t,e)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class v{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=void 0===e||null===e?v.makeArray(t):e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){const e=v.makeArray(t);g.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return 0!==(this.bits[Math.floor(t/32)]&1<<(31&t))}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){const e=this.size;if(t>=e)return e;const n=this.bits;let r=Math.floor(t/32),i=n[r];i&=~((1<<(31&t))-1);const o=n.length;while(0===i){if(++r===o)return e;i=n[r]}const s=32*r+b.numberOfTrailingZeros(i);return s>e?e:s}getNextUnset(t){const e=this.size;if(t>=e)return e;const n=this.bits;let r=Math.floor(t/32),i=~n[r];i&=~((1<<(31&t))-1);const o=n.length;while(0===i){if(++r===o)return e;i=~n[r]}const s=32*r+b.numberOfTrailingZeros(i);return s>e?e:s}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new h;if(e===t)return;e--;const n=Math.floor(t/32),r=Math.floor(e/32),i=this.bits;for(let o=n;o<=r;o++){const s=o>n?0:31&t,a=o<r?31:31&e,c=(2<<a)-(1<<s);i[o]|=c}}clear(){const t=this.bits.length,e=this.bits;for(let n=0;n<t;n++)e[n]=0}isRange(t,e,n){if(e<t||t<0||e>this.size)throw new h;if(e===t)return!0;e--;const r=Math.floor(t/32),i=Math.floor(e/32),o=this.bits;for(let s=r;s<=i;s++){const a=s>r?0:31&t,c=s<i?31:31&e,l=(2<<c)-(1<<a)&4294967295;if((o[s]&l)!==(n?l:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let n=e;n>0;n--)this.appendBit(1===(t>>n-1&1))}appendBitArray(t){const e=t.size;this.ensureCapacity(this.size+e);for(let n=0;n<e;n++)this.appendBit(t.get(n))}xor(t){if(this.size!==t.size)throw new h("Sizes don't match");const e=this.bits;for(let n=0,r=e.length;n<r;n++)e[n]^=t.bits[n]}toBytes(t,e,n,r){for(let i=0;i<r;i++){let r=0;for(let e=0;e<8;e++)this.get(t)&&(r|=1<<7-e),t++;e[n+i]=r}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),n=e+1,r=this.bits;for(let i=0;i<n;i++){let n=r[i];n=n>>1&1431655765|(1431655765&n)<<1,n=n>>2&858993459|(858993459&n)<<2,n=n>>4&252645135|(252645135&n)<<4,n=n>>8&16711935|(16711935&n)<<8,n=n>>16&65535|(65535&n)<<16,t[e-i]=n}if(this.size!==32*n){const e=32*n-this.size;let r=t[0]>>>e;for(let i=1;i<n;i++){const n=t[i];r|=n<<32-e,t[i-1]=r,r=n>>>e}t[n-1]=r}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof v))return!1;const e=t;return this.size===e.size&&w.equals(this.bits,e.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let t="";for(let e=0,n=this.size;e<n;e++)0===(7&e)&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new v(this.size,this.bits.slice())}}(function(t){t[t["OTHER"]=0]="OTHER",t[t["PURE_BARCODE"]=1]="PURE_BARCODE",t[t["POSSIBLE_FORMATS"]=2]="POSSIBLE_FORMATS",t[t["TRY_HARDER"]=3]="TRY_HARDER",t[t["CHARACTER_SET"]=4]="CHARACTER_SET",t[t["ALLOWED_LENGTHS"]=5]="ALLOWED_LENGTHS",t[t["ASSUME_CODE_39_CHECK_DIGIT"]=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t["ASSUME_GS1"]=7]="ASSUME_GS1",t[t["RETURN_CODABAR_START_END"]=8]="RETURN_CODABAR_START_END",t[t["NEED_RESULT_POINT_CALLBACK"]=9]="NEED_RESULT_POINT_CALLBACK",t[t["ALLOWED_EAN_EXTENSIONS"]=10]="ALLOWED_EAN_EXTENSIONS"})(a||(a={}));var E,A=a;class C extends l{static getFormatInstance(){return new C}}C.kind="FormatException",function(t){t[t["Cp437"]=0]="Cp437",t[t["ISO8859_1"]=1]="ISO8859_1",t[t["ISO8859_2"]=2]="ISO8859_2",t[t["ISO8859_3"]=3]="ISO8859_3",t[t["ISO8859_4"]=4]="ISO8859_4",t[t["ISO8859_5"]=5]="ISO8859_5",t[t["ISO8859_6"]=6]="ISO8859_6",t[t["ISO8859_7"]=7]="ISO8859_7",t[t["ISO8859_8"]=8]="ISO8859_8",t[t["ISO8859_9"]=9]="ISO8859_9",t[t["ISO8859_10"]=10]="ISO8859_10",t[t["ISO8859_11"]=11]="ISO8859_11",t[t["ISO8859_13"]=12]="ISO8859_13",t[t["ISO8859_14"]=13]="ISO8859_14",t[t["ISO8859_15"]=14]="ISO8859_15",t[t["ISO8859_16"]=15]="ISO8859_16",t[t["SJIS"]=16]="SJIS",t[t["Cp1250"]=17]="Cp1250",t[t["Cp1251"]=18]="Cp1251",t[t["Cp1252"]=19]="Cp1252",t[t["Cp1256"]=20]="Cp1256",t[t["UnicodeBigUnmarked"]=21]="UnicodeBigUnmarked",t[t["UTF8"]=22]="UTF8",t[t["ASCII"]=23]="ASCII",t[t["Big5"]=24]="Big5",t[t["GB18030"]=25]="GB18030",t[t["EUC_KR"]=26]="EUC_KR"}(E||(E={}));class S{constructor(t,e,n,...r){this.valueIdentifier=t,this.name=n,this.values="number"===typeof e?Int32Array.from([e]):e,this.otherEncodingNames=r,S.VALUE_IDENTIFIER_TO_ECI.set(t,this),S.NAME_TO_ECI.set(n,this);const i=this.values;for(let o=0,s=i.length;o!==s;o++){const t=i[o];S.VALUES_TO_ECI.set(t,this)}for(const o of r)S.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new C("incorect value");const e=S.VALUES_TO_ECI.get(t);if(void 0===e)throw new C("incorect value");return e}static getCharacterSetECIByName(t){const e=S.NAME_TO_ECI.get(t);if(void 0===e)throw new C("incorect value");return e}equals(t){if(!(t instanceof S))return!1;const e=t;return this.getName()===e.getName()}}S.VALUE_IDENTIFIER_TO_ECI=new Map,S.VALUES_TO_ECI=new Map,S.NAME_TO_ECI=new Map,S.Cp437=new S(E.Cp437,Int32Array.from([0,2]),"Cp437"),S.ISO8859_1=new S(E.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),S.ISO8859_2=new S(E.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),S.ISO8859_3=new S(E.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),S.ISO8859_4=new S(E.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),S.ISO8859_5=new S(E.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),S.ISO8859_6=new S(E.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),S.ISO8859_7=new S(E.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),S.ISO8859_8=new S(E.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),S.ISO8859_9=new S(E.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),S.ISO8859_10=new S(E.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),S.ISO8859_11=new S(E.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),S.ISO8859_13=new S(E.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),S.ISO8859_14=new S(E.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),S.ISO8859_15=new S(E.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),S.ISO8859_16=new S(E.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),S.SJIS=new S(E.SJIS,20,"SJIS","Shift_JIS"),S.Cp1250=new S(E.Cp1250,21,"Cp1250","windows-1250"),S.Cp1251=new S(E.Cp1251,22,"Cp1251","windows-1251"),S.Cp1252=new S(E.Cp1252,23,"Cp1252","windows-1252"),S.Cp1256=new S(E.Cp1256,24,"Cp1256","windows-1256"),S.UnicodeBigUnmarked=new S(E.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),S.UTF8=new S(E.UTF8,26,"UTF8","UTF-8"),S.ASCII=new S(E.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),S.Big5=new S(E.Big5,28,"Big5"),S.GB18030=new S(E.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),S.EUC_KR=new S(E.EUC_KR,30,"EUC_KR","EUC-KR");class _ extends l{}_.kind="UnsupportedOperationException";class T{static decode(t,e){const n=this.encodingName(e);return this.customDecoder?this.customDecoder(t,n):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(t,n):new TextDecoder(n).decode(t)}static shouldDecodeOnFallback(t){return!T.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){const n=this.encodingName(e);return this.customEncoder?this.customEncoder(t,n):"undefined"===typeof TextEncoder?this.encodeFallback(t):(new TextEncoder).encode(t)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(t){return"string"===typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof S?t:S.getCharacterSetECIByName(t)}static decodeFallback(t,e){const n=this.encodingCharacterSet(e);if(T.isDecodeFallbackSupported(n)){let e="";for(let n=0,r=t.length;n<r;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+="%"+r}return decodeURIComponent(e)}if(n.equals(S.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new _(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(S.UTF8)||t.equals(S.ISO8859_1)||t.equals(S.ASCII)}static encodeFallback(t){const e=btoa(unescape(encodeURIComponent(t))),n=e.split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class I{static castAsNonUtf8Char(t,e=null){const n=e?e.getName():this.ISO88591;return T.decode(new Uint8Array([t]),n)}static guessEncoding(t,e){if(null!==e&&void 0!==e&&void 0!==e.get(A.CHARACTER_SET))return e.get(A.CHARACTER_SET).toString();const n=t.length;let r=!0,i=!0,o=!0,s=0,a=0,c=0,l=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0;const y=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let w=0;w<n&&(r||i||o);w++){const e=255&t[w];o&&(s>0?0===(128&e)?o=!1:s--:0!==(128&e)&&(0===(64&e)?o=!1:(s++,0===(32&e)?a++:(s++,0===(16&e)?c++:(s++,0===(8&e)?l++:o=!1))))),r&&(e>127&&e<160?r=!1:e>159&&(e<192||215===e||247===e)&&m++),i&&(u>0?e<64||127===e||e>252?i=!1:u--:128===e||160===e||e>239?i=!1:e>160&&e<224?(h++,f=0,d++,d>p&&(p=d)):e>127?(u++,d=0,f++,f>g&&(g=f)):(d=0,f=0))}return o&&s>0&&(o=!1),i&&u>0&&(i=!1),o&&(y||a+c+l>0)?I.UTF8:i&&(I.ASSUME_SHIFT_JIS||p>=3||g>=3)?I.SHIFT_JIS:r&&i?2===p&&2===h||10*m>=n?I.SHIFT_JIS:I.ISO88591:r?I.ISO88591:i?I.SHIFT_JIS:o?I.UTF8:I.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let n=-1;function r(t,r,i,o,s,a){if("%%"===t)return"%";if(void 0===e[++n])return;t=o?parseInt(o.substr(1)):void 0;let c,l=s?parseInt(s.substr(1)):void 0;switch(a){case"s":c=e[n];break;case"c":c=e[n][0];break;case"f":c=parseFloat(e[n]).toFixed(t);break;case"p":c=parseFloat(e[n]).toPrecision(t);break;case"e":c=parseFloat(e[n]).toExponential(t);break;case"x":c=parseInt(e[n]).toString(l||16);break;case"d":c=parseFloat(parseInt(e[n],l||10).toPrecision(t)).toFixed(0);break}c="object"===typeof c?JSON.stringify(c):(+c).toString(l);let u=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";while(c.length<u)c=void 0!==r?c+h:h+c;return c}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,r)}static getBytes(t,e){return T.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}I.SHIFT_JIS=S.SJIS.getName(),I.GB2312="GB2312",I.ISO88591=S.ISO8859_1.getName(),I.EUC_JP="EUC_JP",I.UTF8=S.UTF8.getName(),I.PLATFORM_DEFAULT_ENCODING=I.UTF8,I.ASSUME_SHIFT_JIS=!1;class M{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return"string"===typeof t?this.value+=t.toString():this.encoding?this.value+=I.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,e,n){for(let r=e;e<e+n;r++)this.append(t[r]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class k{constructor(t,e,n,r){if(this.width=t,this.height=e,this.rowSize=n,this.bits=r,void 0!==e&&null!==e||(e=t),this.height=e,t<1||e<1)throw new h("Both dimensions must be greater than 0");void 0!==n&&null!==n||(n=Math.floor((t+31)/32)),this.rowSize=n,void 0!==r&&null!==r||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const e=t.length,n=t[0].length,r=new k(n,e);for(let i=0;i<e;i++){const e=t[i];for(let t=0;t<n;t++)e[t]&&r.set(t,i)}return r}static parseFromString(t,e,n){if(null===t)throw new h("stringRepresentation cannot be null");const r=new Array(t.length);let i=0,o=0,s=-1,a=0,c=0;while(c<t.length)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new h("row lengths do not match");o=i,a++}c++}else if(t.substring(c,c+e.length)===e)c+=e.length,r[i]=!0,i++;else{if(t.substring(c,c+n.length)!==n)throw new h("illegal character encountered: "+t.substring(c));c+=n.length,r[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new h("row lengths do not match");a++}const l=new k(s,a);for(let u=0;u<i;u++)r[u]&&l.set(Math.floor(u%s),Math.floor(u/s));return l}get(t,e){const n=e*this.rowSize+Math.floor(t/32);return 0!==(this.bits[n]>>>(31&t)&1)}set(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]|=1<<(31&t)&4294967295}unset(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]&=~(1<<(31&t)&4294967295)}flip(t,e){const n=e*this.rowSize+Math.floor(t/32);this.bits[n]^=1<<(31&t)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new h("input matrix dimensions do not match");const e=new v(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*n,s=t.getRow(i,e).getBitArray();for(let t=0;t<n;t++)r[o+t]^=s[t]}}clear(){const t=this.bits,e=t.length;for(let n=0;n<e;n++)t[n]=0}setRegion(t,e,n,r){if(e<0||t<0)throw new h("Left and top must be nonnegative");if(r<1||n<1)throw new h("Height and width must be at least 1");const i=t+n,o=e+r;if(o>this.height||i>this.width)throw new h("The region must fit inside the matrix");const s=this.rowSize,a=this.bits;for(let c=e;c<o;c++){const e=c*s;for(let n=t;n<i;n++)a[e+Math.floor(n/32)]|=1<<(31&n)&4294967295}}getRow(t,e){null===e||void 0===e||e.getSize()<this.width?e=new v(this.width):e.clear();const n=this.rowSize,r=this.bits,i=t*n;for(let o=0;o<n;o++)e.setBulk(32*o,r[i+o]);return e}setRow(t,e){g.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),e=this.getHeight();let n=new v(t),r=new v(t);for(let i=0,o=Math.floor((e+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(e-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(e-1-i,n)}getEnclosingRectangle(){const t=this.width,e=this.height,n=this.rowSize,r=this.bits;let i=t,o=e,s=-1,a=-1;for(let c=0;c<e;c++)for(let t=0;t<n;t++){const e=r[c*n+t];if(0!==e){if(c<o&&(o=c),c>a&&(a=c),32*t<i){let n=0;while(0===(e<<31-n&4294967295))n++;32*t+n<i&&(i=32*t+n)}if(32*t+31>s){let n=31;while(e>>>n===0)n--;32*t+n>s&&(s=32*t+n)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){const t=this.rowSize,e=this.bits;let n=0;while(n<e.length&&0===e[n])n++;if(n===e.length)return null;const r=n/t;let i=n%t*32;const o=e[n];let s=0;while(0===(o<<31-s&4294967295))s++;return i+=s,Int32Array.from([i,r])}getBottomRightOnBit(){const t=this.rowSize,e=this.bits;let n=e.length-1;while(n>=0&&0===e[n])n--;if(n<0)return null;const r=Math.floor(n/t);let i=32*Math.floor(n%t);const o=e[n];let s=31;while(o>>>s===0)s--;return i+=s,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof k))return!1;const e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&w.equals(this.bits,e.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+w.hashCode(this.bits),t}toString(t="X ",e="  ",n="\n"){return this.buildToString(t,e,n)}buildToString(t,e,n){let r=new M;for(let i=0,o=this.height;i<o;i++){for(let n=0,o=this.width;n<o;n++)r.append(this.get(n,i)?t:e);r.append(n)}return r.toString()}clone(){return new k(this.width,this.height,this.rowSize,this.bits.slice())}}class N extends l{static getNotFoundInstance(){return new N}}N.kind="NotFoundException";class O extends p{constructor(t){super(t),this.luminances=O.EMPTY,this.buckets=new Int32Array(O.LUMINANCE_BUCKETS)}getBlackRow(t,e){const n=this.getLuminanceSource(),r=n.getWidth();void 0===e||null===e||e.getSize()<r?e=new v(r):e.clear(),this.initArrays(r);const i=n.getRow(t,this.luminances),o=this.buckets;for(let a=0;a<r;a++)o[(255&i[a])>>O.LUMINANCE_SHIFT]++;const s=O.estimateBlackPoint(o);if(r<3)for(let a=0;a<r;a++)(255&i[a])<s&&e.set(a);else{let t=255&i[0],n=255&i[1];for(let o=1;o<r-1;o++){const r=255&i[o+1];(4*n-t-r)/2<s&&e.set(o),t=n,n=r}}return e}getBlackMatrix(){const t=this.getLuminanceSource(),e=t.getWidth(),n=t.getHeight(),r=new k(e,n);this.initArrays(e);const i=this.buckets;for(let a=1;a<5;a++){const r=Math.floor(n*a/5),o=t.getRow(r,this.luminances),s=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<s;t++){const e=255&o[t];i[e>>O.LUMINANCE_SHIFT]++}}const o=O.estimateBlackPoint(i),s=t.getMatrix();for(let a=0;a<n;a++){const t=a*e;for(let n=0;n<e;n++){const e=255&s[t+n];e<o&&r.set(n,a)}}return r}createBinarizer(t){return new O(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const e=this.buckets;for(let n=0;n<O.LUMINANCE_BUCKETS;n++)e[n]=0}static estimateBlackPoint(t){const e=t.length;let n=0,r=0,i=0;for(let l=0;l<e;l++)t[l]>i&&(r=l,i=t[l]),t[l]>n&&(n=t[l]);let o=0,s=0;for(let l=0;l<e;l++){const e=l-r,n=t[l]*e*e;n>s&&(o=l,s=n)}if(r>o){const t=r;r=o,o=t}if(o-r<=e/16)throw new N;let a=o-1,c=-1;for(let l=o-1;l>r;l--){const e=l-r,i=e*e*(o-l)*(n-t[l]);i>c&&(a=l,c=i)}return a<<O.LUMINANCE_SHIFT}}O.LUMINANCE_BITS=5,O.LUMINANCE_SHIFT=8-O.LUMINANCE_BITS,O.LUMINANCE_BUCKETS=1<<O.LUMINANCE_BITS,O.EMPTY=Uint8ClampedArray.from([0]);class D extends O{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const t=this.getLuminanceSource(),e=t.getWidth(),n=t.getHeight();if(e>=D.MINIMUM_DIMENSION&&n>=D.MINIMUM_DIMENSION){const r=t.getMatrix();let i=e>>D.BLOCK_SIZE_POWER;0!==(e&D.BLOCK_SIZE_MASK)&&i++;let o=n>>D.BLOCK_SIZE_POWER;0!==(n&D.BLOCK_SIZE_MASK)&&o++;const s=D.calculateBlackPoints(r,i,o,e,n),a=new k(e,n);D.calculateThresholdForBlock(r,i,o,e,n,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new D(t)}static calculateThresholdForBlock(t,e,n,r,i,o,s){const a=i-D.BLOCK_SIZE,c=r-D.BLOCK_SIZE;for(let l=0;l<n;l++){let i=l<<D.BLOCK_SIZE_POWER;i>a&&(i=a);const u=D.cap(l,2,n-3);for(let n=0;n<e;n++){let a=n<<D.BLOCK_SIZE_POWER;a>c&&(a=c);const l=D.cap(n,2,e-3);let h=0;for(let t=-2;t<=2;t++){const e=o[u+t];h+=e[l-2]+e[l-1]+e[l]+e[l+1]+e[l+2]}const d=h/25;D.thresholdBlock(t,a,i,d,r,s)}}}static cap(t,e,n){return t<e?e:t>n?n:t}static thresholdBlock(t,e,n,r,i,o){for(let s=0,a=n*i+e;s<D.BLOCK_SIZE;s++,a+=i)for(let i=0;i<D.BLOCK_SIZE;i++)(255&t[a+i])<=r&&o.set(e+i,n+s)}static calculateBlackPoints(t,e,n,r,i){const o=i-D.BLOCK_SIZE,s=r-D.BLOCK_SIZE,a=new Array(n);for(let c=0;c<n;c++){a[c]=new Int32Array(e);let n=c<<D.BLOCK_SIZE_POWER;n>o&&(n=o);for(let i=0;i<e;i++){let e=i<<D.BLOCK_SIZE_POWER;e>s&&(e=s);let o=0,l=255,u=0;for(let i=0,s=n*r+e;i<D.BLOCK_SIZE;i++,s+=r){for(let e=0;e<D.BLOCK_SIZE;e++){const n=255&t[s+e];o+=n,n<l&&(l=n),n>u&&(u=n)}if(u-l>D.MIN_DYNAMIC_RANGE)for(i++,s+=r;i<D.BLOCK_SIZE;i++,s+=r)for(let e=0;e<D.BLOCK_SIZE;e++)o+=255&t[s+e]}let h=o>>2*D.BLOCK_SIZE_POWER;if(u-l<=D.MIN_DYNAMIC_RANGE&&(h=l/2,c>0&&i>0)){const t=(a[c-1][i]+2*a[c][i-1]+a[c-1][i-1])/4;l<t&&(h=t)}a[c][i]=h}}return a}}D.BLOCK_SIZE_POWER=3,D.BLOCK_SIZE=1<<D.BLOCK_SIZE_POWER,D.BLOCK_SIZE_MASK=D.BLOCK_SIZE-1,D.MINIMUM_DIMENSION=5*D.BLOCK_SIZE,D.MIN_DYNAMIC_RANGE=24;class x{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,n,r){throw new _("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new _("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new _("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let e=new M;for(let n=0;n<this.height;n++){const r=this.getRow(n,t);for(let t=0;t<this.width;t++){const n=255&r[t];let i;i=n<64?"#":n<128?"+":n<192?".":" ",e.append(i)}e.append("\n")}return e.toString()}}class R extends x{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){const n=this.delegate.getRow(t,e),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(255&n[i]);return n}getMatrix(){const t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(e);for(let r=0;r<e;r++)n[r]=255-(255&t[r]);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,n,r){return new R(this.delegate.crop(t,e,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new R(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new R(this.delegate.rotateCounterClockwise45())}}class B extends x{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=B.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const e=t.getContext("2d").getImageData(0,0,t.width,t.height);return B.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,n){const r=new Uint8ClampedArray(e*n);for(let i=0,o=0,s=t.length;i<s;i+=4,o++){let e;const n=t[i+3];if(0===n)e=255;else{const n=t[i],r=t[i+1],o=t[i+2];e=306*n+601*r+117*o+512>>10}r[o]=e}return r}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const n=this.getWidth(),r=t*n;return null===e?e=this.buffer.slice(r,r+n):(e.length<n&&(e=new Uint8ClampedArray(n)),e.set(this.buffer.slice(r,r+n))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,n,r){return super.crop(t,e,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const e=this.getTempCanvasElement(),n=e.getContext("2d"),r=t*B.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return e.width=s,e.height=a,n.translate(s/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=B.makeBufferFromCanvasImageData(e),this}invert(){return new R(this)}}B.DEGREE_TO_RADIANS=Math.PI/180;class L{constructor(t,e,n){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var P,F=(globalThis||n.g||self||window?(globalThis||n.g||self||window||void 0).__awaiter:void 0)||function(t,e,n,r){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r["throw"](t))}catch(e){o(e)}}function c(t){t.done?n(t.value):i(t.value).then(s,a)}c((r=r.apply(t,e||[])).next())}))};class U{constructor(t,e=500,n){this.reader=t,this.timeBetweenScansMillis=e,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return F(this,void 0,void 0,(function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(const n of t){const t="video"===n.kind?"videoinput":n.kind;if("videoinput"!==t)continue;const r=n.deviceId||n.id,i=n.label||`Video device ${e.length+1}`,o=n.groupId,s={deviceId:r,label:i,kind:t,groupId:o};e.push(s)}return e}))}getVideoInputDevices(){return F(this,void 0,void 0,(function*(){const t=yield this.listVideoInputDevices();return t.map((t=>new L(t.deviceId,t.label)))}))}findDeviceById(t){return F(this,void 0,void 0,(function*(){const e=yield this.listVideoInputDevices();return e?e.find((e=>e.deviceId===t)):null}))}decodeFromInputVideoDevice(t,e){return F(this,void 0,void 0,(function*(){return yield this.decodeOnceFromVideoDevice(t,e)}))}decodeOnceFromVideoDevice(t,e){return F(this,void 0,void 0,(function*(){let n;this.reset(),n=t?{deviceId:{exact:t}}:{facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,e)}))}decodeOnceFromConstraints(t,e){return F(this,void 0,void 0,(function*(){const n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(n,e)}))}decodeOnceFromStream(t,e){return F(this,void 0,void 0,(function*(){this.reset();const n=yield this.attachStreamToVideo(t,e),r=yield this.decodeOnce(n);return r}))}decodeFromInputVideoDeviceContinuously(t,e,n){return F(this,void 0,void 0,(function*(){return yield this.decodeFromVideoDevice(t,e,n)}))}decodeFromVideoDevice(t,e,n){return F(this,void 0,void 0,(function*(){let r;r=t?{deviceId:{exact:t}}:{facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,e,n)}))}decodeFromConstraints(t,e,n){return F(this,void 0,void 0,(function*(){const r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(r,e,n)}))}decodeFromStream(t,e,n){return F(this,void 0,void 0,(function*(){this.reset();const r=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(r,n)}))}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return F(this,void 0,void 0,(function*(){const n=this.prepareVideoElement(e);return this.addVideoSource(n,t),this.videoElement=n,this.stream=t,yield this.playVideoOnLoadAsync(n),n}))}playVideoOnLoadAsync(t){return new Promise(((e,n)=>this.playVideoOnLoad(t,(()=>e()))))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return F(this,void 0,void 0,(function*(){if(this.isVideoPlaying(t))console.warn("Trying to play video that is already playing.");else try{yield t.play()}catch(e){console.warn("It was not possible to play the video.")}}))}getMediaElement(t,e){const n=document.getElementById(t);if(!n)throw new u(`element with id '${t}' not found`);if(n.nodeName.toLowerCase()!==e.toLowerCase())throw new u(`element with id '${t}' must be an ${e} element`);return n}decodeFromImage(t,e){if(!t&&!e)throw new u("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new u("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,n){if(void 0===t&&void 0===e)throw new u("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,n):this.decodeFromVideoElementContinuously(t,n)}decodeFromImageElement(t){if(!t)throw new u("An image element must be provided.");this.reset();const e=this.prepareImageElement(t);let n;return this.imageElement=e,n=this.isImageLoaded(e)?this.decodeOnce(e,!1,!0):this._decodeOnLoadImage(e),n}decodeFromVideoElement(t){const e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){const n=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(n,e)}_decodeFromVideoElementSetup(t){if(!t)throw new u("A video element must be provided.");this.reset();const e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new u("An URL must be provided.");this.reset();const e=this.prepareImageElement();this.imageElement=e;const n=this._decodeOnLoadImage(e);return e.src=t,n}decodeFromVideoUrl(t){if(!t)throw new u("An URL must be provided.");this.reset();const e=this.prepareVideoElement(),n=this.decodeFromVideoElement(e);return e.src=t,n}decodeFromVideoUrlContinuously(t,e){if(!t)throw new u("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,e);return n.src=t,r}_decodeOnLoadImage(t){return new Promise(((e,n)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,n),t.addEventListener("load",this.imageLoadedListener)}))}_decodeOnLoadVideo(t){return F(this,void 0,void 0,(function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)}))}_decodeOnLoadVideoContinuously(t,e){return F(this,void 0,void 0,(function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)}))}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return"undefined"===typeof t&&(e=document.createElement("img"),e.width=200,e.height=200),"string"===typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"===typeof document||(e=document.createElement("video"),e.width=200,e.height=200),"string"===typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,o)=>{if(this._stopAsyncDecode)return o(new N("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{const e=this.decode(t);i(e)}catch(s){const t=e&&s instanceof N,a=s instanceof f||s instanceof C,c=a&&n;if(t||c)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise(((t,e)=>r(t,e)))}decodeContinuously(t,e){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const r=this.decode(t);e(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){e(null,r);const t=r instanceof f||r instanceof C,i=r instanceof N;(t||i)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(t){const e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}_isHTMLVideoElement(t){const e=t;return 0!==e.videoWidth}drawFrameOnCanvas(t,e,n){e||(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}drawImageOnCanvas(t,e,n=this.captureCanvasContext){e||(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t);this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const e=this.getCaptureCanvas(t),n=new B(e),r=new D(n);return new d(r)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const e=this.getCaptureCanvas(t),n=e.getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const e=document.createElement("canvas");let n,r;return"undefined"!==typeof t&&(t instanceof HTMLVideoElement?(n=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(n=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),e.style.width=n+"px",e.style.height=r+"px",e.width=n,e.height=r,e}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach((t=>t.stop())),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(n){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class z{constructor(t,e,n=(null==e?0:8*e.length),r,i,o=g.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=t,this.rawBytes=e,this.numBits=void 0===n||null===n?null===e||void 0===e?0:8*e.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?g.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(null===this.resultMetadata?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){const n=new Array(e.length+t.length);g.arraycopy(e,0,n,0,e.length),g.arraycopy(t,0,n,e.length,t.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}(function(t){t[t["AZTEC"]=0]="AZTEC",t[t["CODABAR"]=1]="CODABAR",t[t["CODE_39"]=2]="CODE_39",t[t["CODE_93"]=3]="CODE_93",t[t["CODE_128"]=4]="CODE_128",t[t["DATA_MATRIX"]=5]="DATA_MATRIX",t[t["EAN_8"]=6]="EAN_8",t[t["EAN_13"]=7]="EAN_13",t[t["ITF"]=8]="ITF",t[t["MAXICODE"]=9]="MAXICODE",t[t["PDF_417"]=10]="PDF_417",t[t["QR_CODE"]=11]="QR_CODE",t[t["RSS_14"]=12]="RSS_14",t[t["RSS_EXPANDED"]=13]="RSS_EXPANDED",t[t["UPC_A"]=14]="UPC_A",t[t["UPC_E"]=15]="UPC_E",t[t["UPC_EAN_EXTENSION"]=16]="UPC_EAN_EXTENSION"})(P||(P={}));var H,j=P;(function(t){t[t["OTHER"]=0]="OTHER",t[t["ORIENTATION"]=1]="ORIENTATION",t[t["BYTE_SEGMENTS"]=2]="BYTE_SEGMENTS",t[t["ERROR_CORRECTION_LEVEL"]=3]="ERROR_CORRECTION_LEVEL",t[t["ISSUE_NUMBER"]=4]="ISSUE_NUMBER",t[t["SUGGESTED_PRICE"]=5]="SUGGESTED_PRICE",t[t["POSSIBLE_COUNTRY"]=6]="POSSIBLE_COUNTRY",t[t["UPC_EAN_EXTENSION"]=7]="UPC_EAN_EXTENSION",t[t["PDF417_EXTRA_METADATA"]=8]="PDF417_EXTRA_METADATA",t[t["STRUCTURED_APPEND_SEQUENCE"]=9]="STRUCTURED_APPEND_SEQUENCE",t[t["STRUCTURED_APPEND_PARITY"]=10]="STRUCTURED_APPEND_PARITY"})(H||(H={}));var V,W,$,G,Y,X,q=H;class K{constructor(t,e,n,r,i=-1,o=-1){this.rawBytes=t,this.text=e,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===t||null===t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class J{exp(t){return this.expTable[t]}log(t){if(0===t)throw new h;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class Z{constructor(t,e){if(0===e.length)throw new h;this.field=t;const n=e.length;if(n>1&&0===e[0]){let t=1;while(t<n&&0===e[t])t++;t===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-t),g.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);const e=this.coefficients;let n;if(1===t){n=0;for(let t=0,r=e.length;t!==r;t++){const r=e[t];n=J.addOrSubtract(n,r)}return n}n=e[0];const r=e.length,i=this.field;for(let o=1;o<r;o++)n=J.addOrSubtract(i.multiply(t,n),e[o]);return n}addOrSubtract(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,n=t.coefficients;if(e.length>n.length){const t=e;e=n,n=t}let r=new Int32Array(n.length);const i=n.length-e.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=J.addOrSubtract(e[o-i],n[o]);return new Z(this.field,r)}multiply(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const e=this.coefficients,n=e.length,r=t.coefficients,i=r.length,o=new Int32Array(n+i-1),s=this.field;for(let a=0;a<n;a++){const t=e[a];for(let e=0;e<i;e++)o[a+e]=J.addOrSubtract(o[a+e],s.multiply(t,r[e]))}return new Z(s,o)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;const e=this.coefficients.length,n=this.field,r=new Int32Array(e),i=this.coefficients;for(let o=0;o<e;o++)r[o]=n.multiply(i[o],t);return new Z(n,r)}multiplyByMonomial(t,e){if(t<0)throw new h;if(0===e)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+t),o=this.field;for(let s=0;s<r;s++)i[s]=o.multiply(n[s],e);return new Z(o,i)}divide(t){if(!this.field.equals(t.field))throw new h("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new h("Divide by 0");const e=this.field;let n=e.getZero(),r=this;const i=t.getCoefficient(t.getDegree()),o=e.inverse(i);while(r.getDegree()>=t.getDegree()&&!r.isZero()){const i=r.getDegree()-t.getDegree(),s=e.multiply(r.getCoefficient(r.getDegree()),o),a=t.multiplyByMonomial(i,s),c=e.buildMonomial(i,s);n=n.addOrSubtract(c),r=r.addOrSubtract(a)}return[n,r]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let n=this.getCoefficient(e);if(0!==n){if(n<0?(t+=" - ",n=-n):t.length>0&&(t+=" + "),0===e||1!==n){const e=this.field.log(n);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class Q extends l{}Q.kind="ArithmeticException";class tt extends J{constructor(t,e,n){super(),this.primitive=t,this.size=e,this.generatorBase=n;const r=new Int32Array(e);let i=1;for(let s=0;s<e;s++)r[s]=i,i*=2,i>=e&&(i^=t,i&=e-1);this.expTable=r;const o=new Int32Array(e);for(let s=0;s<e-1;s++)o[r[s]]=s;this.logTable=o,this.zero=new Z(this,Int32Array.from([0])),this.one=new Z(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new h;if(0===e)return this.zero;const n=new Int32Array(t+1);return n[0]=e,new Z(this,n)}inverse(t){if(0===t)throw new Q;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}tt.AZTEC_DATA_12=new tt(4201,4096,1),tt.AZTEC_DATA_10=new tt(1033,1024,1),tt.AZTEC_DATA_6=new tt(67,64,1),tt.AZTEC_PARAM=new tt(19,16,1),tt.QR_CODE_FIELD_256=new tt(285,256,0),tt.DATA_MATRIX_FIELD_256=new tt(301,256,1),tt.AZTEC_DATA_8=tt.DATA_MATRIX_FIELD_256,tt.MAXICODE_FIELD_64=tt.AZTEC_DATA_6;class et extends l{}et.kind="ReedSolomonException";class nt extends l{}nt.kind="IllegalStateException";class rt{constructor(t){this.field=t}decode(t,e){const n=this.field,r=new Z(n,t),i=new Int32Array(e);let o=!0;for(let d=0;d<e;d++){const t=r.evaluateAt(n.exp(d+n.getGeneratorBase()));i[i.length-1-d]=t,0!==t&&(o=!1)}if(o)return;const s=new Z(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(e,1),s,e),c=a[0],l=a[1],u=this.findErrorLocations(c),h=this.findErrorMagnitudes(l,u);for(let d=0;d<u.length;d++){const e=t.length-1-n.log(u[d]);if(e<0)throw new et("Bad error location");t[e]=tt.addOrSubtract(t[e],h[d])}}runEuclideanAlgorithm(t,e,n){if(t.getDegree()<e.getDegree()){const n=t;t=e,e=n}const r=this.field;let i=t,o=e,s=r.getZero(),a=r.getOne();while(o.getDegree()>=(n/2|0)){let t=i,e=s;if(i=o,s=a,i.isZero())throw new et("r_{i-1} was zero");o=t;let n=r.getZero();const c=i.getCoefficient(i.getDegree()),l=r.inverse(c);while(o.getDegree()>=i.getDegree()&&!o.isZero()){const t=o.getDegree()-i.getDegree(),e=r.multiply(o.getCoefficient(o.getDegree()),l);n=n.addOrSubtract(r.buildMonomial(t,e)),o=o.addOrSubtract(i.multiplyByMonomial(t,e))}if(a=n.multiply(s).addOrSubtract(e),o.getDegree()>=i.getDegree())throw new nt("Division algorithm failed to reduce polynomial?")}const c=a.getCoefficient(0);if(0===c)throw new et("sigmaTilde(0) was zero");const l=r.inverse(c),u=a.multiplyScalar(l),h=o.multiplyScalar(l);return[u,h]}findErrorLocations(t){const e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);const n=new Int32Array(e);let r=0;const i=this.field;for(let o=1;o<i.getSize()&&r<e;o++)0===t.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==e)throw new et("Error locator degree does not match number of roots");return n}findErrorMagnitudes(t,e){const n=e.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){const s=i.inverse(e[o]);let a=1;for(let t=0;t<n;t++)if(o!==t){const n=i.multiply(e[t],s),r=0===(1&n)?1|n:-2&n;a=i.multiply(a,r)}r[o]=i.multiply(t.evaluateAt(s),i.inverse(a)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],s))}return r}}(function(t){t[t["UPPER"]=0]="UPPER",t[t["LOWER"]=1]="LOWER",t[t["MIXED"]=2]="MIXED",t[t["DIGIT"]=3]="DIGIT",t[t["PUNCT"]=4]="PUNCT",t[t["BINARY"]=5]="BINARY"})(V||(V={}));class it{decode(t){this.ddata=t;let e=t.getBits(),n=this.extractBits(e),r=this.correctBits(n),i=it.convertBoolArrayToByteArray(r),o=it.getEncodedData(r),s=new K(i,o,null,null);return s.setNumBits(r.length),s}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,n=V.UPPER,r=V.UPPER,i="",o=0;while(o<e)if(r===V.BINARY){if(e-o<5)break;let s=it.readCode(t,o,5);if(o+=5,0===s){if(e-o<11)break;s=it.readCode(t,o,11)+31,o+=11}for(let n=0;n<s;n++){if(e-o<8){o=e;break}const n=it.readCode(t,o,8);i+=I.castAsNonUtf8Char(n),o+=8}r=n}else{let s=r===V.DIGIT?4:5;if(e-o<s)break;let a=it.readCode(t,o,s);o+=s;let c=it.getCharacter(r,a);c.startsWith("CTRL_")?(n=r,r=it.getTable(c.charAt(5)),"L"===c.charAt(6)&&(n=r)):(i+=c,r=n)}return i}static getTable(t){switch(t){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;case"U":default:return V.UPPER}}static getCharacter(t,e){switch(t){case V.UPPER:return it.UPPER_TABLE[e];case V.LOWER:return it.LOWER_TABLE[e];case V.MIXED:return it.MIXED_TABLE[e];case V.PUNCT:return it.PUNCT_TABLE[e];case V.DIGIT:return it.DIGIT_TABLE[e];default:throw new nt("Bad table")}}correctBits(t){let e,n;this.ddata.getNbLayers()<=2?(n=6,e=tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,e=tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,e=tt.AZTEC_DATA_10):(n=12,e=tt.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=t.length/n;if(i<r)throw new C;let o=t.length%n,s=new Int32Array(i);for(let d=0;d<i;d++,o+=n)s[d]=it.readCode(t,o,n);try{let t=new rt(e);t.decode(s,i-r)}catch(h){throw new C(h)}let a=(1<<n)-1,c=0;for(let d=0;d<r;d++){let t=s[d];if(0===t||t===a)throw new C;1!==t&&t!==a-1||c++}let l=new Array(r*n-c),u=0;for(let d=0;d<r;d++){let t=s[d];if(1===t||t===a-1)l.fill(t>1,u,u+n-1),u+=n-1;else for(let e=n-1;e>=0;--e)l[u++]=0!==(t&1<<e)}return l}extractBits(t){let e=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(e?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,e));if(e)for(let s=0;s<i.length;s++)i[s]=s;else{let t=r+1+2*b.truncDivision(b.truncDivision(r,2)-1,15),e=r/2,n=b.truncDivision(t,2);for(let r=0;r<e;r++){let t=r+b.truncDivision(r,15);i[e-r-1]=n-t-1,i[e+r]=n+t+1}}for(let s=0,a=0;s<n;s++){let c=4*(n-s)+(e?9:12),l=2*s,u=r-1-l;for(let e=0;e<c;e++){let n=2*e;for(let r=0;r<2;r++)o[a+n+r]=t.get(i[l+r],i[l+e]),o[a+2*c+n+r]=t.get(i[l+e],i[u-r]),o[a+4*c+n+r]=t.get(i[u-r],i[u-e]),o[a+6*c+n+r]=t.get(i[u-e],i[l+r])}a+=8*c}return o}static readCode(t,e,n){let r=0;for(let i=e;i<e+n;i++)r<<=1,t[i]&&(r|=1);return r}static readByte(t,e){let n=t.length-e;return n>=8?it.readCode(t,e,8):it.readCode(t,e,n)<<8-n}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let n=0;n<e.length;n++)e[n]=it.readByte(t,8*n);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}it.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],it.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],it.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],it.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],it.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ot{constructor(){}static round(t){return NaN===t?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,n,r){const i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}static sum(t){let e=0;for(let n=0,r=t.length;n!==r;n++){const r=t[n];e+=r}return e}}class st{static floatToIntBits(t){return t}}st.MAX_VALUE=Number.MAX_SAFE_INTEGER;class at{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof at){const e=t;return this.x===e.x&&this.y===e.y}return!1}hashCode(){return 31*st.floatToIntBits(this.x)+st.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const e=this.distance(t[0],t[1]),n=this.distance(t[1],t[2]),r=this.distance(t[0],t[2]);let i,o,s;if(n>=e&&n>=r?(o=t[0],i=t[1],s=t[2]):r>=n&&r>=e?(o=t[1],i=t[0],s=t[2]):(o=t[2],i=t[0],s=t[1]),this.crossProductZ(i,o,s)<0){const t=i;i=s,s=t}t[0]=i,t[1]=o,t[2]=s}static distance(t,e){return ot.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,n){const r=e.x,i=e.y;return(n.x-r)*(t.y-i)-(n.y-i)*(t.x-r)}}class ct{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class lt extends ct{constructor(t,e,n,r,i){super(t,e),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ut{constructor(t,e,n,r){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),void 0!==e&&null!==e||(e=ut.INIT_SIZE),void 0!==n&&null!==n||(n=t.getWidth()/2|0),void 0!==r&&null!==r||(r=t.getHeight()/2|0);const i=e/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new N}detect(){let t=this.leftInit,e=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,s=!1,a=!1,c=!1,l=!1,u=!1;const h=this.width,d=this.height;while(o){o=!1;let f=!0;while((f||!a)&&e<h)f=this.containsBlackPoint(n,r,e,!1),f?(e++,o=!0,a=!0):a||e++;if(e>=h){i=!0;break}let p=!0;while((p||!c)&&r<d)p=this.containsBlackPoint(t,e,r,!0),p?(r++,o=!0,c=!0):c||r++;if(r>=d){i=!0;break}let g=!0;while((g||!l)&&t>=0)g=this.containsBlackPoint(n,r,t,!1),g?(t--,o=!0,l=!0):l||t--;if(t<0){i=!0;break}let m=!0;while((m||!u)&&n>=0)m=this.containsBlackPoint(t,e,n,!0),m?(n--,o=!0,u=!0):u||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){const i=e-t;let o=null;for(let e=1;null===o&&e<i;e++)o=this.getBlackPointOnSegment(t,r-e,t+e,r);if(null==o)throw new N;let s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,n+e,t+e,n);if(null==s)throw new N;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,n+t,e-t,n);if(null==a)throw new N;let c=null;for(let t=1;null===c&&t<i;t++)c=this.getBlackPointOnSegment(e,r-t,e-t,r);if(null==c)throw new N;return this.centerEdges(c,o,a,s)}throw new N}getBlackPointOnSegment(t,e,n,r){const i=ot.round(ot.distance(t,e,n,r)),o=(n-t)/i,s=(r-e)/i,a=this.image;for(let c=0;c<i;c++){const n=ot.round(t+c*o),r=ot.round(e+c*s);if(a.get(n,r))return new at(n,r)}return null}centerEdges(t,e,n,r){const i=t.getX(),o=t.getY(),s=e.getX(),a=e.getY(),c=n.getX(),l=n.getY(),u=r.getX(),h=r.getY(),d=ut.CORR;return i<this.width/2?[new at(u-d,h+d),new at(s+d,a+d),new at(c-d,l-d),new at(i+d,o-d)]:[new at(u+d,h+d),new at(s+d,a-d),new at(c-d,l+d),new at(i-d,o-d)]}containsBlackPoint(t,e,n,r){const i=this.image;if(r){for(let o=t;o<=e;o++)if(i.get(o,n))return!0}else for(let o=t;o<=e;o++)if(i.get(n,o))return!0;return!1}}ut.INIT_SIZE=10,ut.CORR=1;class ht{static checkAndNudgePoints(t,e){const n=t.getWidth(),r=t.getHeight();let i=!0;for(let o=0;o<e.length&&i;o+=2){const t=Math.floor(e[o]),s=Math.floor(e[o+1]);if(t<-1||t>n||s<-1||s>r)throw new N;i=!1,-1===t?(e[o]=0,i=!0):t===n&&(e[o]=n-1,i=!0),-1===s?(e[o+1]=0,i=!0):s===r&&(e[o+1]=r-1,i=!0)}i=!0;for(let o=e.length-2;o>=0&&i;o-=2){const t=Math.floor(e[o]),s=Math.floor(e[o+1]);if(t<-1||t>n||s<-1||s>r)throw new N;i=!1,-1===t?(e[o]=0,i=!0):t===n&&(e[o]=n-1,i=!0),-1===s?(e[o+1]=0,i=!0):s===r&&(e[o+1]=r-1,i=!0)}}}class dt{constructor(t,e,n,r,i,o,s,a,c){this.a11=t,this.a21=e,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=c}static quadrilateralToQuadrilateral(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,g){const m=dt.quadrilateralToSquare(t,e,n,r,i,o,s,a),y=dt.squareToQuadrilateral(c,l,u,h,d,f,p,g);return y.times(m)}transformPoints(t){const e=t.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,l=this.a32,u=this.a33;for(let h=0;h<e;h+=2){const e=t[h],d=t[h+1],f=i*e+a*d+u;t[h]=(n*e+o*d+c)/f,t[h+1]=(r*e+s*d+l)/f}}transformPointsWithValues(t,e){const n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,l=this.a32,u=this.a33,h=t.length;for(let d=0;d<h;d++){const h=t[d],f=e[d],p=i*h+a*f+u;t[d]=(n*h+o*f+c)/p,e[d]=(r*h+s*f+l)/p}}static squareToQuadrilateral(t,e,n,r,i,o,s,a){const c=t-n+i-s,l=e-r+o-a;if(0===c&&0===l)return new dt(n-t,i-n,t,r-e,o-r,e,0,0,1);{const u=n-i,h=s-i,d=r-o,f=a-o,p=u*f-h*d,g=(c*f-h*l)/p,m=(u*l-c*d)/p;return new dt(n-t+g*n,s-t+m*s,t,r-e+g*r,a-e+m*a,e,g,m,1)}}static quadrilateralToSquare(t,e,n,r,i,o,s,a){return dt.squareToQuadrilateral(t,e,n,r,i,o,s,a).buildAdjoint()}buildAdjoint(){return new dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new dt(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class ft extends ht{sampleGrid(t,e,n,r,i,o,s,a,c,l,u,h,d,f,p,g,m,y,w){const b=dt.quadrilateralToQuadrilateral(r,i,o,s,a,c,l,u,h,d,f,p,g,m,y,w);return this.sampleGridWithTransform(t,e,n,b)}sampleGridWithTransform(t,e,n,r){if(e<=0||n<=0)throw new N;const i=new k(e,n),o=new Float32Array(2*e);for(let a=0;a<n;a++){const e=o.length,n=a+.5;for(let t=0;t<e;t+=2)o[t]=t/2+.5,o[t+1]=n;r.transformPoints(o),ht.checkAndNudgePoints(t,o);try{for(let n=0;n<e;n+=2)t.get(Math.floor(o[n]),Math.floor(o[n+1]))&&i.set(n/2,a)}catch(s){throw new N}}return i}}class pt{static setGridSampler(t){pt.gridSampler=t}static getInstance(){return pt.gridSampler}}pt.gridSampler=new ft;class gt{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new at(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class mt{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),n=this.getBullsEyeCorners(e);if(t){let t=n[0];n[0]=n[2],n[2]=t}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new lt(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new N;let e=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(n,e);let r=0;for(let o=0;o<4;o++){let t=n[(this.shift+o)%4];this.compact?(r<<=7,r+=t>>1&127):(r<<=10,r+=(t>>2&992)+(t>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(t,e){let n=0;t.forEach(((t,r,i)=>{let o=(t>>e-2<<1)+(1&t);n=(n<<3)+o})),n=((1&n)<<11)+(n>>1);for(let r=0;r<4;r++)if(b.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new N}getCorrectedParameterData(t,e){let n,r;e?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let c=n-1;c>=0;--c)o[c]=15&t,t>>=4;try{let t=new rt(tt.AZTEC_PARAM);t.decode(o,i)}catch(a){throw new N}let s=0;for(let c=0;c<r;c++)s=(s<<4)+o[c];return s}getBullsEyeCorners(t){let e=t,n=t,r=t,i=t,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,o,1,-1),s=this.getFirstDifferent(n,o,1,1),a=this.getFirstDifferent(r,o,-1,1),c=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let n=this.distancePoint(c,t)*this.nbCenterLayers/(this.distancePoint(i,e)*(this.nbCenterLayers+2));if(n<.75||n>1.25||!this.isWhiteOrBlackRectangle(t,s,a,c))break}e=t,n=s,r=a,i=c,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new N;this.compact=5===this.nbCenterLayers;let s=new at(e.getX()+.5,e.getY()-.5),a=new at(n.getX()+.5,n.getY()+.5),c=new at(r.getX()-.5,r.getY()+.5),l=new at(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,c,l],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,n,r;try{let i=new ut(this.image).detect();t=i[0],e=i[1],n=i[2],r=i[3]}catch(s){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new gt(i+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new gt(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new gt(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new gt(i-7,o-7),!1,-1,-1).toResultPoint()}let i=ot.round((t.getX()+r.getX()+e.getX()+n.getX())/4),o=ot.round((t.getY()+r.getY()+e.getY()+n.getY())/4);try{let s=new ut(this.image,15,i,o).detect();t=s[0],e=s[1],n=s[2],r=s[3]}catch(s){t=this.getFirstDifferent(new gt(i+7,o-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new gt(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new gt(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new gt(i-7,o-7),!1,-1,-1).toResultPoint()}return i=ot.round((t.getX()+r.getX()+e.getX()+n.getX())/4),o=ot.round((t.getY()+r.getY()+e.getY()+n.getY())/4),new gt(i,o)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,n,r,i){let o=pt.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(t,s,s,a,a,c,a,c,c,a,c,e.getX(),e.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(t,e,n){let r=0,i=this.distanceResultPoint(t,e),o=i/n,s=t.getX(),a=t.getY(),c=o*(e.getX()-t.getX())/i,l=o*(e.getY()-t.getY())/i;for(let u=0;u<n;u++)this.image.get(ot.round(s+u*c),ot.round(a+u*l))&&(r|=1<<n-u-1);return r}isWhiteOrBlackRectangle(t,e,n,r){let i=3;t=new gt(t.getX()-i,t.getY()+i),e=new gt(e.getX()-i,e.getY()-i),n=new gt(n.getX()+i,n.getY()-i),r=new gt(r.getX()+i,r.getY()+i);let o=this.getColor(r,t);if(0===o)return!1;let s=this.getColor(t,e);return s===o&&(s=this.getColor(e,n),s===o&&(s=this.getColor(n,r),s===o))}getColor(t,e){let n=this.distancePoint(t,e),r=(e.getX()-t.getX())/n,i=(e.getY()-t.getY())/n,o=0,s=t.getX(),a=t.getY(),c=this.image.get(t.getX(),t.getY()),l=Math.ceil(n);for(let h=0;h<l;h++)s+=r,a+=i,this.image.get(ot.round(s),ot.round(a))!==c&&o++;let u=o/n;return u>.1&&u<.9?0:u<=.1===c?1:-1}getFirstDifferent(t,e,n,r){let i=t.getX()+n,o=t.getY()+r;while(this.isValid(i,o)&&this.image.get(i,o)===e)i+=n,o+=r;i-=n,o-=r;while(this.isValid(i,o)&&this.image.get(i,o)===e)i+=n;i-=n;while(this.isValid(i,o)&&this.image.get(i,o)===e)o+=r;return o-=r,new gt(i,o)}expandSquare(t,e,n){let r=n/(2*e),i=t[0].getX()-t[2].getX(),o=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,c=new at(s+r*i,a+r*o),l=new at(s-r*i,a-r*o);i=t[1].getX()-t[3].getX(),o=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,a=(t[1].getY()+t[3].getY())/2;let u=new at(s+r*i,a+r*o),h=new at(s-r*i,a-r*o),d=[c,u,l,h];return d}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=ot.round(t.getX()),n=ot.round(t.getY());return this.isValid(e,n)}distancePoint(t,e){return ot.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return ot.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class yt{decode(t,e=null){let n=null,r=new mt(t.getBlackMatrix()),i=null,o=null;try{let t=r.detectMirror(!1);i=t.getPoints(),this.reportFoundResultPoints(e,i),o=(new it).decode(t)}catch(l){n=l}if(null==o)try{let t=r.detectMirror(!0);i=t.getPoints(),this.reportFoundResultPoints(e,i),o=(new it).decode(t)}catch(l){if(null!=n)throw n;throw l}let s=new z(o.getText(),o.getRawBytes(),o.getNumBits(),i,j.AZTEC,g.currentTimeMillis()),a=o.getByteSegments();null!=a&&s.putMetadata(q.BYTE_SEGMENTS,a);let c=o.getECLevel();return null!=c&&s.putMetadata(q.ERROR_CORRECTION_LEVEL,c),s}reportFoundResultPoints(t,e){if(null!=t){let n=t.get(A.NEED_RESULT_POINT_CALLBACK);null!=n&&e.forEach(((t,e,r)=>{n.foundPossibleResultPoint(t)}))}}reset(){}}class wt extends U{constructor(t=500){super(new yt,t)}}class bt{decode(t,e){try{return this.doDecode(t,e)}catch(n){const r=e&&!0===e.get(A.TRY_HARDER);if(r&&t.isRotateSupported()){const n=t.rotateCounterClockwise(),r=this.doDecode(n,e),i=r.getResultMetadata();let o=270;null!==i&&!0===i.get(q.ORIENTATION)&&(o+=i.get(q.ORIENTATION)%360),r.putMetadata(q.ORIENTATION,o);const s=r.getResultPoints();if(null!==s){const t=n.getHeight();for(let e=0;e<s.length;e++)s[e]=new at(t-s[e].getY()-1,s[e].getX())}return r}throw new N}}reset(){}doDecode(t,e){const n=t.getWidth(),r=t.getHeight();let i=new v(n);const o=e&&!0===e.get(A.TRY_HARDER),s=Math.max(1,r>>(o?8:5));let a;a=o?r:15;const c=Math.trunc(r/2);for(let h=0;h<a;h++){const o=Math.trunc((h+1)/2),a=0===(1&h),d=c+s*(a?o:-o);if(d<0||d>=r)break;try{i=t.getBlackRow(d,i)}catch(l){continue}for(let t=0;t<2;t++){if(1===t&&(i.reverse(),e&&!0===e.get(A.NEED_RESULT_POINT_CALLBACK))){const t=new Map;e.forEach(((e,n)=>t.set(n,e))),t.delete(A.NEED_RESULT_POINT_CALLBACK),e=t}try{const r=this.decodeRow(d,i,e);if(1===t){r.putMetadata(q.ORIENTATION,180);const t=r.getResultPoints();null!==t&&(t[0]=new at(n-t[0].getX()-1,t[0].getY()),t[1]=new at(n-t[1].getX()-1,t[1].getY()))}return r}catch(u){}}}throw new N}static recordPattern(t,e,n){const r=n.length;for(let c=0;c<r;c++)n[c]=0;const i=t.getSize();if(e>=i)throw new N;let o=!t.get(e),s=0,a=e;while(a<i){if(t.get(a)!==o)n[s]++;else{if(++s===r)break;n[s]=1,o=!o}a++}if(s!==r&&(s!==r-1||a!==i))throw new N}static recordPatternInReverse(t,e,n){let r=n.length,i=t.get(e);while(e>0&&r>=0)t.get(--e)!==i&&(r--,i=!i);if(r>=0)throw new N;bt.recordPattern(t,e+1,n)}static patternMatchVariance(t,e,n){const r=t.length;let i=0,o=0;for(let c=0;c<r;c++)i+=t[c],o+=e[c];if(i<o)return Number.POSITIVE_INFINITY;const s=i/o;n*=s;let a=0;for(let c=0;c<r;c++){const r=t[c],i=e[c]*s,o=r>i?r-i:i-r;if(o>n)return Number.POSITIVE_INFINITY;a+=o}return a/i}}class vt extends bt{static findStartPattern(t){const e=t.getSize(),n=t.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,s=!1;const a=6;for(let c=n;c<e;c++)if(t.get(c)!==s)i[r]++;else{if(r===a-1){let e=vt.MAX_AVG_VARIANCE,n=-1;for(let t=vt.CODE_START_A;t<=vt.CODE_START_C;t++){const r=bt.patternMatchVariance(i,vt.CODE_PATTERNS[t],vt.MAX_INDIVIDUAL_VARIANCE);r<e&&(e=r,n=t)}if(n>=0&&t.isRange(Math.max(0,o-(c-o)/2),o,!1))return Int32Array.from([o,c,n]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,s=!s}throw new N}static decodeCode(t,e,n){bt.recordPattern(t,n,e);let r=vt.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<vt.CODE_PATTERNS.length;o++){const t=vt.CODE_PATTERNS[o],n=this.patternMatchVariance(e,t,vt.MAX_INDIVIDUAL_VARIANCE);n<r&&(r=n,i=o)}if(i>=0)return i;throw new N}decodeRow(t,e,n){const r=n&&!0===n.get(A.ASSUME_GS1),i=vt.findStartPattern(e),o=i[2];let s=0;const a=new Uint8Array(20);let c;switch(a[s++]=o,o){case vt.CODE_START_A:c=vt.CODE_CODE_A;break;case vt.CODE_START_B:c=vt.CODE_CODE_B;break;case vt.CODE_START_C:c=vt.CODE_CODE_C;break;default:throw new C}let l=!1,u=!1,h="",d=i[0],p=i[1];const g=Int32Array.from([0,0,0,0,0,0]);let m=0,y=0,w=o,b=0,v=!0,E=!1,S=!1;while(!l){const t=u;switch(u=!1,m=y,y=vt.decodeCode(e,g,p),a[s++]=y,y!==vt.CODE_STOP&&(v=!0),y!==vt.CODE_STOP&&(b++,w+=b*y),d=p,p+=g.reduce(((t,e)=>t+e),0),y){case vt.CODE_START_A:case vt.CODE_START_B:case vt.CODE_START_C:throw new C}switch(c){case vt.CODE_CODE_A:if(y<64)h+=S===E?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),S=!1;else if(y<96)h+=S===E?String.fromCharCode(y-64):String.fromCharCode(y+64),S=!1;else switch(y!==vt.CODE_STOP&&(v=!1),y){case vt.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case vt.CODE_FNC_2:case vt.CODE_FNC_3:break;case vt.CODE_FNC_4_A:!E&&S?(E=!0,S=!1):E&&S?(E=!1,S=!1):S=!0;break;case vt.CODE_SHIFT:u=!0,c=vt.CODE_CODE_B;break;case vt.CODE_CODE_B:c=vt.CODE_CODE_B;break;case vt.CODE_CODE_C:c=vt.CODE_CODE_C;break;case vt.CODE_STOP:l=!0;break}break;case vt.CODE_CODE_B:if(y<96)h+=S===E?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),S=!1;else switch(y!==vt.CODE_STOP&&(v=!1),y){case vt.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case vt.CODE_FNC_2:case vt.CODE_FNC_3:break;case vt.CODE_FNC_4_B:!E&&S?(E=!0,S=!1):E&&S?(E=!1,S=!1):S=!0;break;case vt.CODE_SHIFT:u=!0,c=vt.CODE_CODE_A;break;case vt.CODE_CODE_A:c=vt.CODE_CODE_A;break;case vt.CODE_CODE_C:c=vt.CODE_CODE_C;break;case vt.CODE_STOP:l=!0;break}break;case vt.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==vt.CODE_STOP&&(v=!1),y){case vt.CODE_FNC_1:r&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case vt.CODE_CODE_A:c=vt.CODE_CODE_A;break;case vt.CODE_CODE_B:c=vt.CODE_CODE_B;break;case vt.CODE_STOP:l=!0;break}break}t&&(c=c===vt.CODE_CODE_A?vt.CODE_CODE_B:vt.CODE_CODE_A)}const _=p-d;if(p=e.getNextUnset(p),!e.isRange(p,Math.min(e.getSize(),p+(p-d)/2),!1))throw new N;if(w-=b*m,w%103!==m)throw new f;const T=h.length;if(0===T)throw new N;T>0&&v&&(h=c===vt.CODE_CODE_C?h.substring(0,T-2):h.substring(0,T-1));const I=(i[1]+i[0])/2,M=d+_/2,k=a.length,O=new Uint8Array(k);for(let f=0;f<k;f++)O[f]=a[f];const D=[new at(I,t),new at(M,t)];return new z(h,O,0,D,j.CODE_128,(new Date).getTime())}}vt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],vt.MAX_AVG_VARIANCE=.25,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.CODE_SHIFT=98,vt.CODE_CODE_C=99,vt.CODE_CODE_B=100,vt.CODE_CODE_A=101,vt.CODE_FNC_1=102,vt.CODE_FNC_2=97,vt.CODE_FNC_3=96,vt.CODE_FNC_4_A=101,vt.CODE_FNC_4_B=100,vt.CODE_START_A=103,vt.CODE_START_B=104,vt.CODE_START_C=105,vt.CODE_STOP=106;class Et extends bt{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i,o,s=Et.findAsteriskPattern(e,r),a=e.getNextSet(s[1]),c=e.getSize();do{Et.recordPattern(e,a,r);let t=Et.toNarrowWidePattern(r);if(t<0)throw new N;i=Et.patternToChar(t),this.decodeRowResult+=i,o=a;for(let e of r)a+=e;a=e.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let l=0;for(let f of r)l+=f;let u,h=a-o-l;if(a!==c&&2*h<l)throw new N;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let n=0;n<t;n++)e+=Et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(n));if(this.decodeRowResult.charAt(t)!==Et.ALPHABET_STRING.charAt(e%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new N;u=this.extendedMode?Et.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(s[1]+s[0])/2,p=o+l/2;return new z(u,null,0,[new at(d,t),new at(p,t)],j.CODE_39,(new Date).getTime())}static findAsteriskPattern(t,e){let n=t.getSize(),r=t.getNextSet(0),i=0,o=r,s=!1,a=e.length;for(let c=r;c<n;c++)if(t.get(c)!==s)e[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(e)===Et.ASTERISK_ENCODING&&t.isRange(Math.max(0,o-Math.floor((c-o)/2)),o,!1))return[o,c];o+=e[0]+e[1],e.copyWithin(0,2,2+i-1),e[i-1]=0,e[i]=0,i--}else i++;e[i]=1,s=!s}throw new N}static toNarrowWidePattern(t){let e,n=t.length,r=0;do{let i=2147483647;for(let e of t)e<i&&e>r&&(i=e);r=i,e=0;let o=0,s=0;for(let a=0;a<n;a++){let i=t[a];i>r&&(s|=1<<n-1-a,e++,o+=i)}if(3===e){for(let i=0;i<n&&e>0;i++){let n=t[i];if(n>r&&(e--,2*n>=o))return-1}return s}}while(e>3);return-1}static patternToChar(t){for(let e=0;e<Et.CHARACTER_ENCODINGS.length;e++)if(Et.CHARACTER_ENCODINGS[e]===t)return Et.ALPHABET_STRING.charAt(e);if(t===Et.ASTERISK_ENCODING)return"*";throw new N}static decodeExtended(t){let e=t.length,n="";for(let r=0;r<e;r++){let e=t.charAt(r);if("+"===e||"$"===e||"%"===e||"/"===e){let i=t.charAt(r+1),o="\0";switch(e){case"+":if(!(i>="A"&&i<="Z"))throw new C;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new C;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new C;o=""}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new C;o=":"}break}n+=o,r++}else n+=e}return n}}Et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Et.ASTERISK_ENCODING=148;class At extends bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,n){let r=this.decodeStart(e),i=this.decodeEnd(e),o=new M;At.decodeMiddle(e,r[1],i[0],o);let s=o.toString(),a=null;null!=n&&(a=n.get(A.ALLOWED_LENGTHS)),null==a&&(a=At.DEFAULT_ALLOWED_LENGTHS);let c=s.length,l=!1,u=0;for(let f of a){if(c===f){l=!0;break}f>u&&(u=f)}if(!l&&c>u&&(l=!0),!l)throw new C;const h=[new at(r[1],t),new at(i[0],t)];let d=new z(s,null,0,h,j.ITF,(new Date).getTime());return d}static decodeMiddle(t,e,n,r){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);i.fill(0),o.fill(0),s.fill(0);while(e<n){bt.recordPattern(t,e,i);for(let t=0;t<5;t++){let e=2*t;o[t]=i[e],s[t]=i[e+1]}let n=At.decodeDigit(o);r.append(n.toString()),n=this.decodeDigit(s),r.append(n.toString()),i.forEach((function(t){e+=t}))}}decodeStart(t){let e=At.skipWhiteSpace(t),n=At.findGuardPattern(t,e,At.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(t,n[0]),n}validateQuietZone(t,e){let n=10*this.narrowLineWidth;n=n<e?n:e;for(let r=e-1;n>0&&r>=0;r--){if(t.get(r))break;n--}if(0!==n)throw new N}static skipWhiteSpace(t){const e=t.getSize(),n=t.getNextSet(0);if(n===e)throw new N;return n}decodeEnd(t){t.reverse();try{let n,r=At.skipWhiteSpace(t);try{n=At.findGuardPattern(t,r,At.END_PATTERN_REVERSED[0])}catch(e){e instanceof N&&(n=At.findGuardPattern(t,r,At.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,n[0]);let i=n[0];return n[0]=t.getSize()-n[1],n[1]=t.getSize()-i,n}finally{t.reverse()}}static findGuardPattern(t,e,n){let r=n.length,i=new Int32Array(r),o=t.getSize(),s=!1,a=0,c=e;i.fill(0);for(let l=e;l<o;l++)if(t.get(l)!==s)i[a]++;else{if(a===r-1){if(bt.patternMatchVariance(i,n,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return[c,l];c+=i[0]+i[1],g.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new N}static decodeDigit(t){let e=At.MAX_AVG_VARIANCE,n=-1,r=At.PATTERNS.length;for(let i=0;i<r;i++){let r=At.PATTERNS[i],o=bt.patternMatchVariance(t,r,At.MAX_INDIVIDUAL_VARIANCE);o<e?(e=o,n=i):o===e&&(n=-1)}if(n>=0)return n%10;throw new N}}At.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],At.MAX_AVG_VARIANCE=.38,At.MAX_INDIVIDUAL_VARIANCE=.5,At.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],At.START_PATTERN=Int32Array.from([1,1,1,1]),At.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,n=!1,r=0,i=Int32Array.from([0,0,0]);while(!n){i=Int32Array.from([0,0,0]),e=Ct.findGuardPattern(t,r,!1,this.START_END_PATTERN,i);let o=e[0];r=e[1];let s=o-(r-o);s>=0&&(n=t.isRange(s,o,!1))}return e}static checkChecksum(t){return Ct.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let n=parseInt(t.charAt(e-1),10);return Ct.getStandardUPCEANChecksum(t.substring(0,e-1))===n}static getStandardUPCEANChecksum(t){let e=t.length,n=0;for(let r=e-1;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new C;n+=e}n*=3;for(let r=e-2;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new C;n+=e}return(1e3-n)%10}static decodeEnd(t,e){return Ct.findGuardPattern(t,e,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,n,r){return this.findGuardPattern(t,e,n,r,new Int32Array(r.length))}static findGuardPattern(t,e,n,r,i){let o=t.getSize();e=n?t.getNextUnset(e):t.getNextSet(e);let s=0,a=e,c=r.length,l=n;for(let u=e;u<o;u++)if(t.get(u)!==l)i[s]++;else{if(s===c-1){if(bt.patternMatchVariance(i,r,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=i[0]+i[1];let t=i.slice(2,i.length-1);for(let e=0;e<s-1;e++)i[e]=t[e];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,l=!l}throw new N}static decodeDigit(t,e,n,r){this.recordPattern(t,n,e);let i=this.MAX_AVG_VARIANCE,o=-1,s=r.length;for(let a=0;a<s;a++){let t=r[a],n=bt.patternMatchVariance(e,t,Ct.MAX_INDIVIDUAL_VARIANCE);n<i&&(i=n,o=a)}if(o>=0)return o;throw new N}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class St{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(e,n,r),o=r.toString(),s=St.parseExtensionString(o),a=[new at((n[0]+n[1])/2,t),new at(i,t)],c=new z(o,null,0,a,j.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1],s=0;for(let c=0;c<5&&o<i;c++){let e=Ct.decodeDigit(t,r,o,Ct.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<4-c),4!==c&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(5!==n.length)throw new N;let a=this.determineCheckDigit(s);if(St.extensionChecksum(n.toString())!==a)throw new N;return o}static extensionChecksum(t){let e=t.length,n=0;for(let r=e-2;r>=0;r-=2)n+=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=e-1;r>=0;r-=2)n+=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new N}static parseExtensionString(t){if(5!==t.length)return null;let e=St.parseExtension5String(t);return null==e?null:new Map([[q.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}let n=parseInt(t.substring(1)),r=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return e+r+"."+o}}class _t{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(e,n,r),o=r.toString(),s=_t.parseExtensionString(o),a=[new at((n[0]+n[1])/2,t),new at(i,t)],c=new z(o,null,0,a,j.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&c.putAllMetadata(s),c}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1],s=0;for(let a=0;a<2&&o<i;a++){let e=Ct.decodeDigit(t,r,o,Ct.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<1-a),1!==a&&(o=t.getNextSet(o),o=t.getNextUnset(o))}if(2!==n.length)throw new N;if(parseInt(n.toString())%4!==s)throw new N;return o}static parseExtensionString(t){return 2!==t.length?null:new Map([[q.ISSUE_NUMBER,parseInt(t)]])}}class Tt{static decodeRow(t,e,n){let r=Ct.findGuardPattern(e,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{let n=new St;return n.decodeRow(t,e,r)}catch(i){let n=new _t;return n.decodeRow(t,e,r)}}}Tt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class It extends Ct{constructor(){super(),this.decodeRowStringBuffer="",It.L_AND_G_PATTERNS=It.L_PATTERNS.map((t=>Int32Array.from(t)));for(let t=10;t<20;t++){let e=It.L_PATTERNS[t-10],n=new Int32Array(e.length);for(let t=0;t<e.length;t++)n[t]=e[e.length-t-1];It.L_AND_G_PATTERNS[t]=n}}decodeRow(t,e,n){let r=It.findStartGuardPattern(e),i=null==n?null:n.get(A.NEED_RESULT_POINT_CALLBACK);if(null!=i){const e=new at((r[0]+r[1])/2,t);i.foundPossibleResultPoint(e)}let o=this.decodeMiddle(e,r,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(null!=i){const e=new at(s,t);i.foundPossibleResultPoint(e)}let c=this.decodeEnd(e,s);if(null!=i){const e=new at((c[0]+c[1])/2,t);i.foundPossibleResultPoint(e)}let l=c[1],u=l+(l-c[0]);if(u>=e.getSize()||!e.isRange(l,u,!1))throw new N;let h=a.toString();if(h.length<8)throw new C;if(!It.checkChecksum(h))throw new f;let d=(r[1]+r[0])/2,p=(c[1]+c[0])/2,g=this.getBarcodeFormat(),m=[new at(d,t),new at(p,t)],y=new z(h,null,0,m,g,(new Date).getTime()),w=0;try{let n=Tt.decodeRow(t,e,c[1]);y.putMetadata(q.UPC_EAN_EXTENSION,n.getText()),y.putAllMetadata(n.getResultMetadata()),y.addResultPoints(n.getResultPoints()),w=n.getText().length}catch(v){}let b=null==n?null:n.get(A.ALLOWED_EAN_EXTENSIONS);if(null!=b){let t=!1;for(let e in b)if(w.toString()===e){t=!0;break}if(!t)throw new N}return y}decodeEnd(t,e){return It.findGuardPattern(t,e,!1,It.START_END_PATTERN,new Int32Array(It.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return It.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let n=parseInt(t.charAt(e-1),10);return It.getStandardUPCEANChecksum(t.substring(0,e-1))===n}static getStandardUPCEANChecksum(t){let e=t.length,n=0;for(let r=e-1;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new C;n+=e}n*=3;for(let r=e-2;r>=0;r-=2){let e=t.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(e<0||e>9)throw new C;n+=e}return(1e3-n)%10}}class Mt extends It{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1],s=0;for(let c=0;c<6&&o<i;c++){let e=It.decodeDigit(t,r,o,It.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<5-c)}n=Mt.determineFirstDigit(n,s);let a=It.findGuardPattern(t,o,!0,It.MIDDLE_PATTERN,new Int32Array(It.MIDDLE_PATTERN.length).fill(0));o=a[1];for(let c=0;c<6&&o<i;c++){let e=It.decodeDigit(t,r,o,It.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)o+=t}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return j.EAN_13}static determineFirstDigit(t,e){for(let n=0;n<10;n++)if(e===this.FIRST_DIGIT_ENCODINGS[n])return t=String.fromCharCode("0".charCodeAt(0)+n)+t,t;throw new N}}Mt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class kt extends It{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=t.getSize(),o=e[1];for(let a=0;a<4&&o<i;a++){let e=It.decodeDigit(t,r,o,It.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)o+=t}let s=It.findGuardPattern(t,o,!0,It.MIDDLE_PATTERN,new Int32Array(It.MIDDLE_PATTERN.length).fill(0));o=s[1];for(let a=0;a<4&&o<i;a++){let e=It.decodeDigit(t,r,o,It.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e);for(let t of r)o+=t}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return j.EAN_8}}class Nt extends It{constructor(){super(...arguments),this.ean13Reader=new Mt}getBarcodeFormat(){return j.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,n))}decodeMiddle(t,e,n){return this.ean13Reader.decodeMiddle(t,e,n)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let n=new z(e.substring(1),null,null,t.getResultPoints(),j.UPC_A);return null!=t.getResultMetadata()&&n.putAllMetadata(t.getResultMetadata()),n}throw new N}reset(){this.ean13Reader.reset()}}class Ot extends It{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,n){const r=this.decodeMiddleCounters.map((t=>t));r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=t.getSize();let o=e[1],s=0;for(let c=0;c<6&&o<i;c++){const e=Ot.decodeDigit(t,r,o,Ot.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+e%10);for(let t of r)o+=t;e>=10&&(s|=1<<5-c)}let a=Ot.determineNumSysAndCheckDigit(n,s);return{rowOffset:o,resultString:a}}decodeEnd(t,e){return Ot.findGuardPatternWithoutCounters(t,e,!0,Ot.MIDDLE_END_PATTERN)}checkChecksum(t){return It.checkChecksum(Ot.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let e=String.fromCharCode("0".charCodeAt(0)+n),i=String.fromCharCode("0".charCodeAt(0)+r);return e+t+i}throw N.getNotFoundInstance()}getBarcodeFormat(){return j.UPC_E}static convertUPCEtoUPCA(t){const e=t.slice(1,7).split("").map((t=>t.charCodeAt(0))),n=new M;n.append(t.charAt(0));let r=e[5];switch(r){case 0:case 1:case 2:n.appendChars(e,0,2),n.append(r),n.append("0000"),n.appendChars(e,2,3);break;case 3:n.appendChars(e,0,3),n.append("00000"),n.appendChars(e,3,2);break;case 4:n.appendChars(e,0,4),n.append("00000"),n.append(e[4]);break;default:n.appendChars(e,0,5),n.append("0000"),n.append(r);break}return t.length>=8&&n.append(t.charAt(7)),n.toString()}}Ot.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ot.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Dt extends bt{constructor(t){super();let n=null==t?null:t.get(A.POSSIBLE_FORMATS),r=[];e(n)?(r.push(new Mt),r.push(new Nt),r.push(new kt),r.push(new Ot)):(n.indexOf(j.EAN_13)>-1&&r.push(new Mt),n.indexOf(j.UPC_A)>-1&&r.push(new Nt),n.indexOf(j.EAN_8)>-1&&r.push(new kt),n.indexOf(j.UPC_E)>-1&&r.push(new Ot)),this.readers=r}decodeRow(t,e,n){for(let i of this.readers)try{const r=i.decodeRow(t,e,n),o=r.getBarcodeFormat()===j.EAN_13&&"0"===r.getText().charAt(0),s=null==n?null:n.get(A.POSSIBLE_FORMATS),a=null==s||s.includes(j.UPC_A);if(o&&a){const t=r.getRawBytes(),e=new z(r.getText().substring(1),t,t?t.length:null,r.getResultPoints(),j.UPC_A);return e.putAllMetadata(r.getResultMetadata()),e}return r}catch(r){}throw new N}reset(){for(let t of this.readers)t.reset()}}class xt extends bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let n=0;n<e.length;n++)if(bt.patternMatchVariance(t,e[n],xt.MAX_INDIVIDUAL_VARIANCE)<xt.MAX_AVG_VARIANCE)return n;throw new N}static count(t){return ot.sum(new Int32Array(t))}static increment(t,e){let n=0,r=e[0];for(let i=1;i<t.length;i++)e[i]>r&&(r=e[i],n=i);t[n]++}static decrement(t,e){let n=0,r=e[0];for(let i=1;i<t.length;i++)e[i]<r&&(r=e[i],n=i);t[n]--}static isFinderPattern(t){let e=t[0]+t[1],n=e+t[2]+t[3],r=e/n;if(r>=xt.MIN_FINDER_PATTERN_RATIO&&r<=xt.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let r of t)r>n&&(n=r),r<e&&(e=r);return n<10*e}return!1}}xt.MAX_AVG_VARIANCE=.2,xt.MAX_INDIVIDUAL_VARIANCE=.45,xt.MIN_FINDER_PATTERN_RATIO=9.5/12,xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Rt{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Rt))return!1;const e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Bt{constructor(t,e,n,r,i){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new at(n,i)),this.resultPoints.push(new at(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Bt))return!1;const e=t;return this.value===e.value}hashCode(){return this.value}}class Lt{constructor(){}static getRSSvalue(t,e,n){let r=0;for(let a of t)r+=a;let i=0,o=0,s=t.length;for(let a=0;a<s-1;a++){let c;for(c=1,o|=1<<a;c<t[a];c++,o&=~(1<<a)){let t=Lt.combins(r-c-1,s-a-2);if(n&&0===o&&r-c-(s-a-1)>=s-a-1&&(t-=Lt.combins(r-c-(s-a),s-a-2)),s-a-1>1){let n=0;for(let t=r-c-(s-a-2);t>e;t--)n+=Lt.combins(r-c-t-1,s-a-3);t-=n*(s-1-a)}else r-c>e&&t--;i+=t}r-=c}return i}static combins(t,e){let n,r;t-e>e?(r=e,n=t-e):(r=t-e,n=e);let i=1,o=1;for(let s=t;s>n;s--)i*=s,o<=r&&(i/=o,o++);while(o<=r)i/=o,o++;return i}}class Pt{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let n=12*e,r=new v(n),i=0,o=t[0],s=o.getRightChar().getValue();for(let a=11;a>=0;--a)0!=(s&1<<a)&&r.set(i),i++;for(let a=1;a<t.length;++a){let e=t[a],n=e.getLeftChar().getValue();for(let t=11;t>=0;--t)0!=(n&1<<t)&&r.set(i),i++;if(null!=e.getRightChar()){let t=e.getRightChar().getValue();for(let e=11;e>=0;--e)0!=(t&1<<e)&&r.set(i),i++}}return r}}class Ft{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ut{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class zt extends Ut{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===zt.FNC1}}zt.FNC1="$";class Ht extends Ut{constructor(t,e,n){super(t),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class jt extends Ut{constructor(t,e,n){if(super(t),e<0||e>10||n<0||n>10)throw new C;this.firstDigit=e,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===jt.FNC1}isSecondDigitFNC1(){return this.secondDigit===jt.FNC1}isAnyFNC1(){return this.firstDigit===jt.FNC1||this.secondDigit===jt.FNC1}}jt.FNC1=10;class Vt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new N;let e=t.substring(0,2);for(let i of Vt.TWO_DIGIT_DATA_LENGTH)if(i[0]===e)return i[1]===Vt.VARIABLE_LENGTH?Vt.processVariableAI(2,i[2],t):Vt.processFixedAI(2,i[1],t);if(t.length<3)throw new N;let n=t.substring(0,3);for(let i of Vt.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===Vt.VARIABLE_LENGTH?Vt.processVariableAI(3,i[2],t):Vt.processFixedAI(3,i[1],t);for(let i of Vt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===Vt.VARIABLE_LENGTH?Vt.processVariableAI(4,i[2],t):Vt.processFixedAI(4,i[1],t);if(t.length<4)throw new N;let r=t.substring(0,4);for(let i of Vt.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===Vt.VARIABLE_LENGTH?Vt.processVariableAI(4,i[2],t):Vt.processFixedAI(4,i[1],t);throw new N}static processFixedAI(t,e,n){if(n.length<t)throw new N;let r=n.substring(0,t);if(n.length<t+e)throw new N;let i=n.substring(t,t+e),o=n.substring(t+e),s="("+r+")"+i,a=Vt.parseFieldsInGeneralPurpose(o);return null==a?s:s+a}static processVariableAI(t,e,n){let r,i=n.substring(0,t);r=n.length<t+e?n.length:t+e;let o=n.substring(t,r),s=n.substring(r),a="("+i+")"+o,c=Vt.parseFieldsInGeneralPurpose(s);return null==c?a:a+c}}Vt.VARIABLE_LENGTH=[],Vt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Vt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Vt.VARIABLE_LENGTH,20],["22",Vt.VARIABLE_LENGTH,29],["30",Vt.VARIABLE_LENGTH,8],["37",Vt.VARIABLE_LENGTH,8],["90",Vt.VARIABLE_LENGTH,30],["91",Vt.VARIABLE_LENGTH,30],["92",Vt.VARIABLE_LENGTH,30],["93",Vt.VARIABLE_LENGTH,30],["94",Vt.VARIABLE_LENGTH,30],["95",Vt.VARIABLE_LENGTH,30],["96",Vt.VARIABLE_LENGTH,30],["97",Vt.VARIABLE_LENGTH,3],["98",Vt.VARIABLE_LENGTH,30],["99",Vt.VARIABLE_LENGTH,30]],Vt.THREE_DIGIT_DATA_LENGTH=[["240",Vt.VARIABLE_LENGTH,30],["241",Vt.VARIABLE_LENGTH,30],["242",Vt.VARIABLE_LENGTH,6],["250",Vt.VARIABLE_LENGTH,30],["251",Vt.VARIABLE_LENGTH,30],["253",Vt.VARIABLE_LENGTH,17],["254",Vt.VARIABLE_LENGTH,20],["400",Vt.VARIABLE_LENGTH,30],["401",Vt.VARIABLE_LENGTH,30],["402",17],["403",Vt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Vt.VARIABLE_LENGTH,20],["421",Vt.VARIABLE_LENGTH,15],["422",3],["423",Vt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Vt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Vt.VARIABLE_LENGTH,15],["391",Vt.VARIABLE_LENGTH,18],["392",Vt.VARIABLE_LENGTH,15],["393",Vt.VARIABLE_LENGTH,18],["703",Vt.VARIABLE_LENGTH,30]],Vt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Vt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Vt.VARIABLE_LENGTH,20],["8003",Vt.VARIABLE_LENGTH,30],["8004",Vt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Vt.VARIABLE_LENGTH,30],["8008",Vt.VARIABLE_LENGTH,12],["8018",18],["8020",Vt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Vt.VARIABLE_LENGTH,70],["8200",Vt.VARIABLE_LENGTH,70]];class Wt{constructor(t){this.buffer=new M,this.information=t}decodeAllCodes(t,e){let n=e,r=null;do{let e=this.decodeGeneralPurposeField(n,r),i=Vt.parseFieldsInGeneralPurpose(e.getNewString());if(null!=i&&t.append(i),r=e.isRemaining()?""+e.getRemainingValue():null,n===e.getNewPosition())break;n=e.getNewPosition()}while(1);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return new jt(this.information.getSize(),0===e?jt.FNC1:e-1,jt.FNC1)}let e=this.extractNumericValueFromBitArray(t,7),n=(e-8)/11,r=(e-8)%11;return new jt(t+7,n,r)}extractNumericValueFromBitArray(t,e){return Wt.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,n){let r=0;for(let i=0;i<n;++i)t.get(e+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let n=this.parseBlocks();return null!=n&&n.isRemaining()?new Ht(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Ht(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let n=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());let r=n!==this.current.getPosition();if(!r&&!t)break}while(!t);return e.getDecodedInformation()}parseNumericBlock(){while(this.isStillNumeric(this.current.getPosition())){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return e=t.isSecondDigitFNC1()?new Ht(this.current.getPosition(),this.buffer.toString()):new Ht(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Ft(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let t=new Ht(this.current.getPosition(),this.buffer.toString());return new Ft(!0,t)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ft(!1)}parseIsoIec646Block(){while(this.isStillIsoIec646(this.current.getPosition())){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Ht(this.current.getPosition(),this.buffer.toString());return new Ft(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ft(!1)}parseAlphaBlock(){while(this.isStillAlpha(this.current.getPosition())){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let t=new Ht(this.current.getPosition(),this.buffer.toString());return new Ft(!0,t)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ft(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<116)return!0;if(t+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,8);return r>=232&&r<253}decodeIsoIec646(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new zt(t+5,zt.FNC1);if(e>=5&&e<15)return new zt(t+5,"0"+(e-5));let n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new zt(t+7,""+(n+1));if(n>=90&&n<116)return new zt(t+7,""+(n+7));let r,i=this.extractNumericValueFromBitArray(t,8);switch(i){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new C}return new zt(t+8,r)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,6);return n>=16&&n<63}decodeAlphanumeric(t){let e=this.extractNumericValueFromBitArray(t,5);if(15===e)return new zt(t+5,zt.FNC1);if(e>=5&&e<15)return new zt(t+5,"0"+(e-5));let n,r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new zt(t+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new nt("Decoding invalid alphanumeric value: "+r)}return new zt(t+6,n)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class $t{constructor(t){this.information=t,this.generalDecoder=new Wt(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Gt extends $t{constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let n=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,n)}encodeCompressedGtinWithoutAI(t,e,n){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*r,10);n/100===0&&t.append("0"),n/10===0&&t.append("0"),t.append(n)}Gt.appendCheckDigit(t,n)}static appendCheckDigit(t,e){let n=0;for(let r=0;r<13;r++){let i=t.charAt(r+e).charCodeAt(0)-"0".charCodeAt(0);n+=0===(1&r)?3*i:i}n=10-n%10,10===n&&(n=0),t.append(n)}}Gt.GTIN_SIZE=40;class Yt extends Gt{constructor(t){super(t)}parseInformation(){let t=new M;t.append("(01)");let e=t.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Yt.HEADER_SIZE,4);return t.append(n),this.encodeCompressedGtinWithoutAI(t,Yt.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,Yt.HEADER_SIZE+44)}}Yt.HEADER_SIZE=4;class Xt extends $t{constructor(t){super(t)}parseInformation(){let t=new M;return this.getGeneralDecoder().decodeAllCodes(t,Xt.HEADER_SIZE)}}Xt.HEADER_SIZE=5;class qt extends Gt{constructor(t){super(t)}encodeCompressedWeight(t,e,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,n);this.addWeightCode(t,r);let i=this.checkWeight(r),o=1e5;for(let s=0;s<5;++s)i/o===0&&t.append("0"),o/=10;t.append(i)}}class Kt extends qt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Kt.HEADER_SIZE+qt.GTIN_SIZE+Kt.WEIGHT_SIZE)throw new N;let t=new M;return this.encodeCompressedGtin(t,Kt.HEADER_SIZE),this.encodeCompressedWeight(t,Kt.HEADER_SIZE+qt.GTIN_SIZE,Kt.WEIGHT_SIZE),t.toString()}}Kt.HEADER_SIZE=5,Kt.WEIGHT_SIZE=15;class Jt extends Kt{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class Zt extends Kt{constructor(t){super(t)}addWeightCode(t,e){e<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Qt extends Gt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Qt.HEADER_SIZE+Gt.GTIN_SIZE)throw new N;let t=new M;this.encodeCompressedGtin(t,Qt.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(Qt.HEADER_SIZE+Gt.GTIN_SIZE,Qt.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Qt.HEADER_SIZE+Gt.GTIN_SIZE+Qt.LAST_DIGIT_SIZE,null);return t.append(n.getNewString()),t.toString()}}Qt.HEADER_SIZE=8,Qt.LAST_DIGIT_SIZE=2;class te extends Gt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<te.HEADER_SIZE+Gt.GTIN_SIZE)throw new N;let t=new M;this.encodeCompressedGtin(t,te.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(te.HEADER_SIZE+Gt.GTIN_SIZE,te.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(te.HEADER_SIZE+Gt.GTIN_SIZE+te.LAST_DIGIT_SIZE,te.FIRST_THREE_DIGITS_SIZE);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(te.HEADER_SIZE+Gt.GTIN_SIZE+te.LAST_DIGIT_SIZE+te.FIRST_THREE_DIGITS_SIZE,null);return t.append(r.getNewString()),t.toString()}}te.HEADER_SIZE=8,te.LAST_DIGIT_SIZE=2,te.FIRST_THREE_DIGITS_SIZE=10;class ee extends qt{constructor(t,e,n){super(t),this.dateCode=n,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=ee.HEADER_SIZE+ee.GTIN_SIZE+ee.WEIGHT_SIZE+ee.DATE_SIZE)throw new N;let t=new M;return this.encodeCompressedGtin(t,ee.HEADER_SIZE),this.encodeCompressedWeight(t,ee.HEADER_SIZE+ee.GTIN_SIZE,ee.WEIGHT_SIZE),this.encodeCompressedDate(t,ee.HEADER_SIZE+ee.GTIN_SIZE+ee.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,ee.DATE_SIZE);if(38400==n)return;t.append("("),t.append(this.dateCode),t.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let o=n;o/10==0&&t.append("0"),t.append(o),i/10==0&&t.append("0"),t.append(i),r/10==0&&t.append("0"),t.append(r)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}function ne(t){try{if(t.get(1))return new Yt(t);if(!t.get(2))return new Xt(t);let e=Wt.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new Jt(t);case 5:return new Zt(t)}let n=Wt.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new Qt(t);case 13:return new te(t)}let r=Wt.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new ee(t,"310","11");case 57:return new ee(t,"320","11");case 58:return new ee(t,"310","13");case 59:return new ee(t,"320","13");case 60:return new ee(t,"310","15");case 61:return new ee(t,"320","15");case 62:return new ee(t,"310","17");case 63:return new ee(t,"320","17")}}catch(e){throw console.log(e),new nt("unknown decoder: "+t)}}ee.HEADER_SIZE=8,ee.WEIGHT_SIZE=20,ee.DATE_SIZE=16;class re{constructor(t,e,n,r){this.leftchar=t,this.rightchar=e,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof re&&(re.equalsOrNull(t.leftchar,e.leftchar)&&re.equalsOrNull(t.rightchar,e.rightchar)&&re.equalsOrNull(t.finderpattern,e.finderpattern))}static equalsOrNull(t,e){return null===t?null===e:re.equals(t,e)}hashCode(){let t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t}}class ie{constructor(t,e,n){this.pairs=t,this.rowNumber=e,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof ie&&(this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed)}checkEqualitity(t,e){if(!t||!e)return;let n;return t.forEach(((t,r)=>{e.forEach((e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(n=!0)}))})),n}}class oe extends xt{constructor(t){super(...arguments),this.pairs=new Array(oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===t}decodeRow(t,e,n){this.pairs.length=0,this.startFromEven=!1;try{return oe.constructResult(this.decodeRow2pairs(t,e))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,oe.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let n,r=!1;while(!r)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(i){if(i instanceof N){if(!this.pairs.length)throw new N;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(t,!1),n){let t=this.checkRowsBoolean(!1);if(null!=t)return t;if(t=this.checkRowsBoolean(!0),null!=t)return t}throw new N}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let r=e;r<this.rows.length;r++){let e=this.rows[r];this.pairs.length=0;for(let n of t)this.pairs.push(n.getPairs());if(this.pairs.push(e.getPairs()),!oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(t);i.push(e);try{return this.checkRows(i,r+1)}catch(n){this.verbose&&console.log(n)}}throw new N}static isValidSequence(t){for(let e of oe.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let n=!0;for(let r=0;r<t.length;r++)if(t[r].getFinderPattern().getValue()!=e[r]){n=!1;break}if(n)return!0}return!1}storeRow(t,e){let n=0,r=!1,i=!1;while(n<this.rows.length){let e=this.rows[n];if(e.getRowNumber()>t){i=e.isEquivalent(this.pairs);break}r=e.isEquivalent(this.pairs),n++}i||r||oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new ie(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let n of e)if(n.getPairs().length!==t.length)for(let e of n.getPairs())for(let n of t)if(re.equals(e,n))break}static isPartialRow(t,e){for(let n of e){let e=!0;for(let r of t){let t=!1;for(let e of n.getPairs())if(r.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=Pt.buildBitArray(t),n=ne(e),r=n.parseInformation(),i=t[0].getFinderPattern().getResultPoints(),o=t[t.length-1].getFinderPattern().getResultPoints(),s=[i[0],i[1],o[0],o[1]];return new z(r,null,null,s,j.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),n=t.getRightChar();if(null==n)return!1;let r=n.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let t=this.pairs.get(s);r+=t.getLeftChar().getChecksumPortion(),i++;let e=t.getRightChar();null!=e&&(r+=e.getChecksumPortion(),i++)}r%=211;let o=211*(i-4)+r;return o==e.getValue()}static getNextSecondBar(t,e){let n;return t.get(e)?(n=t.getNextUnset(e),n=t.getNextSet(n)):(n=t.getNextSet(e),n=t.getNextUnset(n)),n}retrieveNextPair(t,e,n){let r,i=e.length%2==0;this.startFromEven&&(i=!i);let o=!0,s=-1;do{this.findNextPair(t,e,s),r=this.parseFoundFinderPattern(t,n,i),null==r?s=oe.getNextSecondBar(t,this.startEnd[0]):o=!1}while(o);let a,c=this.decodeDataCharacter(t,r,i,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new N;try{a=this.decodeDataCharacter(t,r,i,!1)}catch(l){a=null,this.verbose&&console.log(l)}return new re(c,a,r,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i,o=t.getSize();if(n>=0)i=n;else if(this.isEmptyPair(e))i=0;else{let t=e[e.length-1];i=t.getFinderPattern().getStartEnd()[1]}let s=e.length%2!=0;this.startFromEven&&(s=!s);let a=!1;while(i<o){if(a=!t.get(i),!a)break;i++}let c=0,l=i;for(let u=i;u<o;u++)if(t.get(u)!=a)r[c]++;else{if(3==c){if(s&&oe.reverseCounters(r),oe.isFinderPattern(r))return this.startEnd[0]=l,void(this.startEnd[1]=u);s&&oe.reverseCounters(r),l+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,c--}else c++;r[c]=1,a=!a}throw new N}static reverseCounters(t){let e=t.length;for(let n=0;n<e/2;++n){let r=t[n];t[n]=t[e-n-1],t[e-n-1]=r}}parseFoundFinderPattern(t,e,n){let r,i,o;if(n){let e=this.startEnd[0]-1;while(e>=0&&!t.get(e))e--;e++,r=this.startEnd[0]-e,i=e,o=this.startEnd[1]}else i=this.startEnd[0],o=t.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let s,a=this.getDecodeFinderCounters();g.arraycopy(a,0,a,1,a.length-1),a[0]=r;try{s=this.parseFinderValue(a,oe.FINDER_PATTERNS)}catch(c){return null}return new Bt(s,[i,o],i,o,e)}decodeDataCharacter(t,e,n,r){let i=this.getDataCharacterCounters();for(let _=0;_<i.length;_++)i[_]=0;if(r)oe.recordPatternInReverse(t,e.getStartEnd()[0],i);else{oe.recordPattern(t,e.getStartEnd()[1],i);for(let t=0,e=i.length-1;t<e;t++,e--){let n=i[t];i[t]=i[e],i[e]=n}}let o=17,s=ot.sum(new Int32Array(i))/o,a=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new N;let c=this.getOddCounts(),l=this.getEvenCounts(),u=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let _=0;_<i.length;_++){let t=1*i[_]/s,e=t+.5;if(e<1){if(t<.3)throw new N;e=1}else if(e>8){if(t>8.7)throw new N;e=8}let n=_/2;0==(1&_)?(c[n]=e,u[n]=t-e):(l[n]=e,h[n]=t-e)}this.adjustOddEvenCounts(o);let d=4*e.getValue()+(n?0:2)+(r?0:1)-1,f=0,p=0;for(let _=c.length-1;_>=0;_--){if(oe.isNotA1left(e,n,r)){let t=oe.WEIGHTS[d][2*_];p+=c[_]*t}f+=c[_]}let g=0;for(let _=l.length-1;_>=0;_--)if(oe.isNotA1left(e,n,r)){let t=oe.WEIGHTS[d][2*_+1];g+=l[_]*t}let m=p+g;if(0!=(1&f)||f>13||f<4)throw new N;let y=(13-f)/2,w=oe.SYMBOL_WIDEST[y],b=9-w,v=Lt.getRSSvalue(c,w,!0),E=Lt.getRSSvalue(l,b,!1),A=oe.EVEN_TOTAL_SUBSET[y],C=oe.GSUM[y],S=v*A+E+C;return new Rt(S,m)}static isNotA1left(t,e,n){return!(0==t.getValue()&&e&&n)}adjustOddEvenCounts(t){let e=ot.sum(new Int32Array(this.getOddCounts())),n=ot.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;e>13?i=!0:e<4&&(r=!0);let o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);let a=e+n-t,c=1==(1&e),l=0==(1&n);if(1==a)if(c){if(l)throw new N;i=!0}else{if(!l)throw new N;s=!0}else if(-1==a)if(c){if(l)throw new N;r=!0}else{if(!l)throw new N;o=!0}else{if(0!=a)throw new N;if(c){if(!l)throw new N;e<n?(r=!0,s=!0):(i=!0,o=!0)}else if(l)throw new N}if(r){if(i)throw new N;oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new N;oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}oe.SYMBOL_WIDEST=[7,5,4,3,1],oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],oe.GSUM=[0,348,1388,2948,3988],oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],oe.FINDER_PAT_A=0,oe.FINDER_PAT_B=1,oe.FINDER_PAT_C=2,oe.FINDER_PAT_D=3,oe.FINDER_PAT_E=4,oe.FINDER_PAT_F=5,oe.FINDER_PATTERN_SEQUENCES=[[oe.FINDER_PAT_A,oe.FINDER_PAT_A],[oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B],[oe.FINDER_PAT_A,oe.FINDER_PAT_C,oe.FINDER_PAT_B,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_C],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F]],oe.MAX_PAIRS=11;class se extends Rt{constructor(t,e,n){super(t,e),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ae extends xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,n){const r=this.decodePair(e,!1,t,n);ae.addOrTally(this.possibleLeftPairs,r),e.reverse();let i=this.decodePair(e,!0,t,n);ae.addOrTally(this.possibleRightPairs,i),e.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let t of this.possibleRightPairs)if(t.getCount()>1&&ae.checkChecksum(o,t))return ae.constructResult(o,t);throw new N}static addOrTally(t,e){if(null==e)return;let n=!1;for(let r of t)if(r.getValue()===e.getValue()){r.incrementCount(),n=!0;break}n||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let n=4537077*t.getValue()+e.getValue(),r=new String(n).toString(),i=new M;for(let c=13-r.length;c>0;c--)i.append("0");i.append(r);let o=0;for(let c=0;c<13;c++){let t=i.charAt(c).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&c)?3*t:t}o=10-o%10,10===o&&(o=0),i.append(o.toString());let s=t.getFinderPattern().getResultPoints(),a=e.getFinderPattern().getResultPoints();return new z(i.toString(),null,0,[s[0],s[1],a[0],a[1]],j.RSS_14,(new Date).getTime())}static checkChecksum(t,e){let n=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,r=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(t,e,n,r){try{let i=this.findFinderPattern(t,e),o=this.parseFoundFinderPattern(t,n,e,i),s=null==r?null:r.get(A.NEED_RESULT_POINT_CALLBACK);if(null!=s){let r=(i[0]+i[1])/2;e&&(r=t.getSize()-1-r),s.foundPossibleResultPoint(new at(r,n))}let a=this.decodeDataCharacter(t,o,!0),c=this.decodeDataCharacter(t,o,!1);return new se(1597*a.getValue()+c.getValue(),a.getChecksumPortion()+4*c.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(t,e,n){let r=this.getDataCharacterCounters();for(let g=0;g<r.length;g++)r[g]=0;if(n)bt.recordPatternInReverse(t,e.getStartEnd()[0],r);else{bt.recordPattern(t,e.getStartEnd()[1]+1,r);for(let t=0,e=r.length-1;t<e;t++,e--){let n=r[t];r[t]=r[e],r[e]=n}}let i=n?16:15,o=ot.sum(new Int32Array(r))/i,s=this.getOddCounts(),a=this.getEvenCounts(),c=this.getOddRoundingErrors(),l=this.getEvenRoundingErrors();for(let g=0;g<r.length;g++){let t=r[g]/o,e=Math.floor(t+.5);e<1?e=1:e>8&&(e=8);let n=Math.floor(g/2);0===(1&g)?(s[n]=e,c[n]=t-e):(a[n]=e,l[n]=t-e)}this.adjustOddEvenCounts(n,i);let u=0,h=0;for(let g=s.length-1;g>=0;g--)h*=9,h+=s[g],u+=s[g];let d=0,f=0;for(let g=a.length-1;g>=0;g--)d*=9,d+=a[g],f+=a[g];let p=h+3*d;if(n){if(0!==(1&u)||u>12||u<4)throw new N;let t=(12-u)/2,e=ae.OUTSIDE_ODD_WIDEST[t],n=9-e,r=Lt.getRSSvalue(s,e,!1),i=Lt.getRSSvalue(a,n,!0),o=ae.OUTSIDE_EVEN_TOTAL_SUBSET[t],c=ae.OUTSIDE_GSUM[t];return new Rt(r*o+i+c,p)}{if(0!==(1&f)||f>10||f<4)throw new N;let t=(10-f)/2,e=ae.INSIDE_ODD_WIDEST[t],n=9-e,r=Lt.getRSSvalue(s,e,!0),i=Lt.getRSSvalue(a,n,!1),o=ae.INSIDE_ODD_TOTAL_SUBSET[t],c=ae.INSIDE_GSUM[t];return new Rt(i*o+r+c,p)}}findFinderPattern(t,e){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=t.getSize(),i=!1,o=0;while(o<r){if(i=!t.get(o),e===i)break;o++}let s=0,a=o;for(let c=o;c<r;c++)if(t.get(c)!==i)n[s]++;else{if(3===s){if(xt.isFinderPattern(n))return[a,c];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,s--}else s++;n[s]=1,i=!i}throw new N}parseFoundFinderPattern(t,e,n,r){let i=t.get(r[0]),o=r[0]-1;while(o>=0&&i!==t.get(o))o--;o++;const s=r[0]-o,a=this.getDecodeFinderCounters(),c=new Int32Array(a.length);g.arraycopy(a,0,c,1,a.length-1),c[0]=s;const l=this.parseFinderValue(c,ae.FINDER_PATTERNS);let u=o,h=r[1];return n&&(u=t.getSize()-1-u,h=t.getSize()-1-h),new Bt(l,[o,r[1]],u,h,e)}adjustOddEvenCounts(t,e){let n=ot.sum(new Int32Array(this.getOddCounts())),r=ot.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;t?(n>12?o=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(s=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(s=!0));let c=n+r-e,l=(1&n)===(t?1:0),u=1===(1&r);if(1===c)if(l){if(u)throw new N;o=!0}else{if(!u)throw new N;a=!0}else if(-1===c)if(l){if(u)throw new N;i=!0}else{if(!u)throw new N;s=!0}else{if(0!==c)throw new N;if(l){if(!u)throw new N;n<r?(i=!0,a=!0):(o=!0,s=!0)}else if(u)throw new N}if(i){if(o)throw new N;xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new N;xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ae.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ae.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ae.OUTSIDE_GSUM=[0,161,961,2015,2715],ae.INSIDE_GSUM=[0,336,1036,1516],ae.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ae.INSIDE_ODD_WIDEST=[2,4,6,8],ae.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ce extends bt{constructor(t,e){super(),this.readers=[],this.verbose=!0===e;const n=t?t.get(A.POSSIBLE_FORMATS):null,r=t&&void 0!==t.get(A.ASSUME_CODE_39_CHECK_DIGIT);n?((n.includes(j.EAN_13)||n.includes(j.UPC_A)||n.includes(j.EAN_8)||n.includes(j.UPC_E))&&this.readers.push(new Dt(t)),n.includes(j.CODE_39)&&this.readers.push(new Et(r)),n.includes(j.CODE_128)&&this.readers.push(new vt),n.includes(j.ITF)&&this.readers.push(new At),n.includes(j.RSS_14)&&this.readers.push(new ae),n.includes(j.RSS_EXPANDED)&&this.readers.push(new oe(this.verbose))):(this.readers.push(new Dt(t)),this.readers.push(new Et),this.readers.push(new Dt(t)),this.readers.push(new vt),this.readers.push(new At),this.readers.push(new ae),this.readers.push(new oe(this.verbose)))}decodeRow(t,e,n){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(t,e,n)}catch(r){}throw new N}reset(){this.readers.forEach((t=>t.reset()))}}class le extends U{constructor(t=500,e){super(new ce(e),t,e)}}class ue{constructor(t,e,n){this.ecCodewords=t,this.ecBlocks=[e],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class he{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class de{constructor(t,e,n,r,i,o){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0;const a=o.getECCodewords(),c=o.getECBlocks();for(let l of c)s+=l.getCount()*(l.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if(0!==(1&t)||0!==(1&e))throw new C;for(let n of de.VERSIONS)if(n.symbolSizeRows===t&&n.symbolSizeColumns===e)return n;throw new C}toString(){return""+this.versionNumber}static buildVersions(){return[new de(1,10,10,8,8,new ue(5,new he(1,3))),new de(2,12,12,10,10,new ue(7,new he(1,5))),new de(3,14,14,12,12,new ue(10,new he(1,8))),new de(4,16,16,14,14,new ue(12,new he(1,12))),new de(5,18,18,16,16,new ue(14,new he(1,18))),new de(6,20,20,18,18,new ue(18,new he(1,22))),new de(7,22,22,20,20,new ue(20,new he(1,30))),new de(8,24,24,22,22,new ue(24,new he(1,36))),new de(9,26,26,24,24,new ue(28,new he(1,44))),new de(10,32,32,14,14,new ue(36,new he(1,62))),new de(11,36,36,16,16,new ue(42,new he(1,86))),new de(12,40,40,18,18,new ue(48,new he(1,114))),new de(13,44,44,20,20,new ue(56,new he(1,144))),new de(14,48,48,22,22,new ue(68,new he(1,174))),new de(15,52,52,24,24,new ue(42,new he(2,102))),new de(16,64,64,14,14,new ue(56,new he(2,140))),new de(17,72,72,16,16,new ue(36,new he(4,92))),new de(18,80,80,18,18,new ue(48,new he(4,114))),new de(19,88,88,20,20,new ue(56,new he(4,144))),new de(20,96,96,22,22,new ue(68,new he(4,174))),new de(21,104,104,24,24,new ue(56,new he(6,136))),new de(22,120,120,18,18,new ue(68,new he(6,175))),new de(23,132,132,20,20,new ue(62,new he(8,163))),new de(24,144,144,22,22,new ue(62,new he(8,156),new he(2,155))),new de(25,8,18,6,16,new ue(7,new he(1,5))),new de(26,8,32,6,14,new ue(11,new he(1,10))),new de(27,12,26,10,24,new ue(14,new he(1,16))),new de(28,12,36,10,16,new ue(18,new he(1,22))),new de(29,16,36,14,16,new ue(24,new he(1,32))),new de(30,16,48,14,22,new ue(28,new he(1,49)))]}}de.VERSIONS=de.buildVersions();class fe{constructor(t){const e=t.getHeight();if(e<8||e>144||0!==(1&e))throw new C;this.version=fe.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new k(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const e=t.getHeight(),n=t.getWidth();return de.getVersionForDimensions(e,n)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let e=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let s=!1,a=!1,c=!1,l=!1;do{if(n!==i||0!==r||s)if(n!==i-2||0!==r||0===(3&o)||a)if(n!==i+4||2!==r||0!==(7&o)||c)if(n!==i-2||0!==r||4!==(7&o)||l){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(t[e++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(t[e++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else t[e++]=255&this.readCorner4(i,o),n-=2,r+=2,l=!0;else t[e++]=255&this.readCorner3(i,o),n-=2,r+=2,c=!0;else t[e++]=255&this.readCorner2(i,o),n-=2,r+=2,a=!0;else t[e++]=255&this.readCorner1(i,o),n-=2,r+=2,s=!0}while(n<i||r<o);if(e!==this.version.getTotalCodewords())throw new C;return t}readModule(t,e,n,r){return t<0&&(t+=n,e+=4-(n+4&7)),e<0&&(e+=r,t+=4-(r+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,n,r){let i=0;return this.readModule(t-2,e-2,n,r)&&(i|=1),i<<=1,this.readModule(t-2,e-1,n,r)&&(i|=1),i<<=1,this.readModule(t-1,e-2,n,r)&&(i|=1),i<<=1,this.readModule(t-1,e-1,n,r)&&(i|=1),i<<=1,this.readModule(t-1,e,n,r)&&(i|=1),i<<=1,this.readModule(t,e-2,n,r)&&(i|=1),i<<=1,this.readModule(t,e-1,n,r)&&(i|=1),i<<=1,this.readModule(t,e,n,r)&&(i|=1),i}readCorner1(t,e){let n=0;return this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,1,t,e)&&(n|=1),n<<=1,this.readModule(t-1,2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(2,e-1,t,e)&&(n|=1),n<<=1,this.readModule(3,e-1,t,e)&&(n|=1),n}readCorner2(t,e){let n=0;return this.readModule(t-3,0,t,e)&&(n|=1),n<<=1,this.readModule(t-2,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(0,e-4,t,e)&&(n|=1),n<<=1,this.readModule(0,e-3,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n}readCorner3(t,e){let n=0;return this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(0,e-3,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-3,t,e)&&(n|=1),n<<=1,this.readModule(1,e-2,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n}readCorner4(t,e){let n=0;return this.readModule(t-3,0,t,e)&&(n|=1),n<<=1,this.readModule(t-2,0,t,e)&&(n|=1),n<<=1,this.readModule(t-1,0,t,e)&&(n|=1),n<<=1,this.readModule(0,e-2,t,e)&&(n|=1),n<<=1,this.readModule(0,e-1,t,e)&&(n|=1),n<<=1,this.readModule(1,e-1,t,e)&&(n|=1),n<<=1,this.readModule(2,e-1,t,e)&&(n|=1),n<<=1,this.readModule(3,e-1,t,e)&&(n|=1),n}extractDataRegion(t){const e=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new h("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=e/r|0,s=n/i|0,a=o*r,c=s*i,l=new k(c,a);for(let u=0;u<o;++u){const e=u*r;for(let n=0;n<s;++n){const o=n*i;for(let s=0;s<r;++s){const a=u*(r+2)+1+s,c=e+s;for(let e=0;e<i;++e){const r=n*(i+2)+1+e;if(t.get(r,a)){const t=o+e;l.set(t,c)}}}}}return l}}class pe{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){const n=e.getECBlocks();let r=0;const i=n.getECBlocks();for(let h of i)r+=h.getCount();const o=new Array(r);let s=0;for(let h of i)for(let t=0;t<h.getCount();t++){const t=h.getDataCodewords(),e=n.getECCodewords()+t;o[s++]=new pe(t,new Uint8Array(e))}const a=o[0].codewords.length,c=a-n.getECCodewords(),l=c-1;let u=0;for(let h=0;h<l;h++)for(let e=0;e<s;e++)o[e].codewords[h]=t[u++];const d=24===e.getVersionNumber(),f=d?8:s;for(let h=0;h<f;h++)o[h].codewords[c-1]=t[u++];const p=o[0].codewords.length;for(let h=c;h<p;h++)for(let e=0;e<s;e++){const n=d?(e+8)%s:e,r=d&&n>7?h-1:h;o[n].codewords[r]=t[u++]}if(u!==t.length)throw new h;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ge{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new h(""+t);let e=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const o=8-n,s=t<o?t:o,a=o-s,c=255>>8-s<<a;e=(i[r]&c)>>a,t-=s,n+=s,8===n&&(n=0,r++)}if(t>0){while(t>=8)e=e<<8|255&i[r],r++,t-=8;if(t>0){const o=8-t,s=255>>o<<o;e=e<<t|(i[r]&s)>>o,n+=t}}return this.bitOffset=n,this.byteOffset=r,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(function(t){t[t["PAD_ENCODE"]=0]="PAD_ENCODE",t[t["ASCII_ENCODE"]=1]="ASCII_ENCODE",t[t["C40_ENCODE"]=2]="C40_ENCODE",t[t["TEXT_ENCODE"]=3]="TEXT_ENCODE",t[t["ANSIX12_ENCODE"]=4]="ANSIX12_ENCODE",t[t["EDIFACT_ENCODE"]=5]="EDIFACT_ENCODE",t[t["BASE256_ENCODE"]=6]="BASE256_ENCODE"})(W||(W={}));class me{static decode(t){const e=new ge(t),n=new M,r=new M,i=new Array;let o=W.ASCII_ENCODE;do{if(o===W.ASCII_ENCODE)o=this.decodeAsciiSegment(e,n,r);else{switch(o){case W.C40_ENCODE:this.decodeC40Segment(e,n);break;case W.TEXT_ENCODE:this.decodeTextSegment(e,n);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,n);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(e,n);break;case W.BASE256_ENCODE:this.decodeBase256Segment(e,n,i);break;default:throw new C}o=W.ASCII_ENCODE}}while(o!==W.PAD_ENCODE&&e.available()>0);return r.length()>0&&n.append(r.toString()),new K(t,n.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(t,e,n){let r=!1;do{let i=t.readBits(8);if(0===i)throw new C;if(i<=128)return r&&(i+=128),e.append(String.fromCharCode(i-1)),W.ASCII_ENCODE;if(129===i)return W.PAD_ENCODE;if(i<=229){const t=i-130;t<10&&e.append("0"),e.append(""+t)}else switch(i){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:e.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:r=!0;break;case 236:e.append("[)>05"),n.insert(0,"");break;case 237:e.append("[)>06"),n.insert(0,"");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;case 241:break;default:if(254!==i||0!==t.available())throw new C;break}}while(t.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(t,e){let n=!1;const r=[];let i=0;do{if(8===t.available())return;const o=t.readBits(8);if(254===o)return;this.parseTwoBytes(o,t.readBits(8),r);for(let t=0;t<3;t++){const o=r[t];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new C;{const t=this.C40_BASIC_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}}break;case 1:n?(e.append(String.fromCharCode(o+128)),n=!1):e.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const t=this.C40_SHIFT2_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}else switch(o){case 27:e.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new C}i=0;break;case 3:n?(e.append(String.fromCharCode(o+224)),n=!1):e.append(String.fromCharCode(o+96)),i=0;break;default:throw new C}}}while(t.available()>0)}static decodeTextSegment(t,e){let n=!1,r=[],i=0;do{if(8===t.available())return;const o=t.readBits(8);if(254===o)return;this.parseTwoBytes(o,t.readBits(8),r);for(let t=0;t<3;t++){const o=r[t];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new C;{const t=this.TEXT_BASIC_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}}break;case 1:n?(e.append(String.fromCharCode(o+128)),n=!1):e.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const t=this.TEXT_SHIFT2_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t)}else switch(o){case 27:e.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new C}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new C;{const t=this.TEXT_SHIFT3_SET_CHARS[o];n?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),n=!1):e.append(t),i=0}break;default:throw new C}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){const n=[];do{if(8===t.available())return;const r=t.readBits(8);if(254===r)return;this.parseTwoBytes(r,t.readBits(8),n);for(let t=0;t<3;t++){const r=n[t];switch(r){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(r<14)e.append(String.fromCharCode(r+44));else{if(!(r<40))throw new C;e.append(String.fromCharCode(r+51))}break}}}while(t.available()>0)}static parseTwoBytes(t,e,n){let r=(t<<8)+e-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i}static decodeEdifactSegment(t,e){do{if(t.available()<=16)return;for(let n=0;n<4;n++){let n=t.readBits(6);if(31===n){const e=8-t.getBitOffset();return void(8!==e&&t.readBits(e))}0===(32&n)&&(n|=64),e.append(String.fromCharCode(n))}}while(t.available()>0)}static decodeBase256Segment(t,e,n){let r=1+t.getByteOffset();const i=this.unrandomize255State(t.readBits(8),r++);let o;if(o=0===i?t.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(t.readBits(8),r++),o<0)throw new C;const s=new Uint8Array(o);for(let c=0;c<o;c++){if(t.available()<8)throw new C;s[c]=this.unrandomize255State(t.readBits(8),r++)}n.push(s);try{e.append(T.decode(s,I.ISO88591))}catch(a){throw new nt("Platform does not support required encoding: "+a.message)}}static unrandomize255State(t,e){const n=149*e%255+1,r=t-n;return r>=0?r:r+256}}me.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],me.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],me.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],me.TEXT_SHIFT2_SET_CHARS=me.C40_SHIFT2_SET_CHARS,me.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class ye{constructor(){this.rsDecoder=new rt(tt.DATA_MATRIX_FIELD_256)}decode(t){const e=new fe(t),n=e.getVersion(),r=e.readCodewords(),i=pe.getDataBlocks(r,n);let o=0;for(let c of i)o+=c.getNumDataCodewords();const s=new Uint8Array(o),a=i.length;for(let c=0;c<a;c++){const t=i[c],e=t.getCodewords(),n=t.getNumDataCodewords();this.correctErrors(e,n);for(let r=0;r<n;r++)s[r*a+c]=e[r]}return me.decode(s)}correctErrors(t,e){const n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-e)}catch(r){throw new f}for(let i=0;i<e;i++)t[i]=n[i]}}class we{constructor(t){this.image=t,this.rectangleDetector=new ut(this.image)}detect(){const t=this.rectangleDetector.detect();let e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new N;e=this.shiftToModuleCenter(e);const n=e[0],r=e[1],i=e[2],o=e[3];let s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1;1===(1&s)&&(s+=1),1===(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let c=we.sampleGrid(this.image,n,r,i,o,s,a);return new ct(c,[n,r,i,o])}static shiftPoint(t,e,n){let r=(e.getX()-t.getX())/(n+1),i=(e.getY()-t.getY())/(n+1);return new at(t.getX()+r,t.getY()+i)}static moveAway(t,e,n){let r=t.getX(),i=t.getY();return r<e?r-=1:r+=1,i<n?i-=1:i+=1,new at(r,i)}detectSolid1(t){let e=t[0],n=t[1],r=t[3],i=t[2],o=this.transitionsBetween(e,n),s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,e),l=o,u=[i,e,n,r];return l>s&&(l=s,u[0]=e,u[1]=n,u[2]=r,u[3]=i),l>a&&(l=a,u[0]=n,u[1]=r,u[2]=i,u[3]=e),l>c&&(u[0]=r,u[1]=i,u[2]=e,u[3]=n),u}detectSolid2(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=this.transitionsBetween(e,i),s=we.shiftPoint(n,r,4*(o+1)),a=we.shiftPoint(r,n,4*(o+1)),c=this.transitionsBetween(s,e),l=this.transitionsBetween(a,i);return c<l?(t[0]=e,t[1]=n,t[2]=r,t[3]=i):(t[0]=n,t[1]=r,t[2]=i,t[3]=e),t}correctTopRight(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=this.transitionsBetween(e,i),s=this.transitionsBetween(n,i),a=we.shiftPoint(e,n,4*(s+1)),c=we.shiftPoint(r,n,4*(o+1));o=this.transitionsBetween(a,i),s=this.transitionsBetween(c,i);let l=new at(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),u=new at(i.getX()+(e.getX()-n.getX())/(s+1),i.getY()+(e.getY()-n.getY())/(s+1));if(!this.isValid(l))return this.isValid(u)?u:null;if(!this.isValid(u))return l;let h=this.transitionsBetween(a,l)+this.transitionsBetween(c,l),d=this.transitionsBetween(a,u)+this.transitionsBetween(c,u);return h>d?l:u}shiftToModuleCenter(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=this.transitionsBetween(e,i)+1,s=this.transitionsBetween(r,i)+1,a=we.shiftPoint(e,n,4*s),c=we.shiftPoint(r,n,4*o);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(c,i)+1,1===(1&o)&&(o+=1),1===(1&s)&&(s+=1);let l,u,h=(e.getX()+n.getX()+r.getX()+i.getX())/4,d=(e.getY()+n.getY()+r.getY()+i.getY())/4;return e=we.moveAway(e,h,d),n=we.moveAway(n,h,d),r=we.moveAway(r,h,d),i=we.moveAway(i,h,d),a=we.shiftPoint(e,n,4*s),a=we.shiftPoint(a,i,4*o),l=we.shiftPoint(n,e,4*s),l=we.shiftPoint(l,r,4*o),c=we.shiftPoint(r,i,4*s),c=we.shiftPoint(c,n,4*o),u=we.shiftPoint(i,r,4*s),u=we.shiftPoint(u,e,4*o),[a,l,c,u]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,n,r,i,o,s){const a=pt.getInstance();return a.sampleGrid(t,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,e.getX(),e.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(t,e){let n=Math.trunc(t.getX()),r=Math.trunc(t.getY()),i=Math.trunc(e.getX()),o=Math.trunc(e.getY()),s=Math.abs(o-r)>Math.abs(i-n);if(s){let t=n;n=r,r=t,t=i,i=o,o=t}let a=Math.abs(i-n),c=Math.abs(o-r),l=-a/2,u=r<o?1:-1,h=n<i?1:-1,d=0,f=this.image.get(s?r:n,s?n:r);for(let p=n,g=r;p!==i;p+=h){let t=this.image.get(s?g:p,s?p:g);if(t!==f&&(d++,f=t),l+=c,l>0){if(g===o)break;g+=u,l-=a}}return d}}class be{constructor(){this.decoder=new ye}decode(t,e=null){let n,r;if(null!=e&&e.has(A.PURE_BARCODE)){const e=be.extractPureBits(t.getBlackMatrix());n=this.decoder.decode(e),r=be.NO_POINTS}else{const e=new we(t.getBlackMatrix()).detect();n=this.decoder.decode(e.getBits()),r=e.getPoints()}const i=n.getRawBytes(),o=new z(n.getText(),i,8*i.length,r,j.DATA_MATRIX,g.currentTimeMillis()),s=n.getByteSegments();null!=s&&o.putMetadata(q.BYTE_SEGMENTS,s);const a=n.getECLevel();return null!=a&&o.putMetadata(q.ERROR_CORRECTION_LEVEL,a),o}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(null==e||null==n)throw new N;const r=this.moduleSize(e,t);let i=e[1];const o=n[1];let s=e[0];const a=n[0],c=(a-s+1)/r,l=(o-i+1)/r;if(c<=0||l<=0)throw new N;const u=r/2;i+=u,s+=u;const h=new k(c,l);for(let d=0;d<l;d++){const e=i+d*r;for(let n=0;n<c;n++)t.get(s+n*r,e)&&h.set(n,d)}return h}static moduleSize(t,e){const n=e.getWidth();let r=t[0];const i=t[1];while(r<n&&e.get(r,i))r++;if(r===n)throw new N;const o=r-t[0];if(0===o)throw new N;return o}}be.NO_POINTS=[];class ve extends U{constructor(t=500){super(new be,t)}}(function(t){t[t["L"]=0]="L",t[t["M"]=1]="M",t[t["Q"]=2]="Q",t[t["H"]=3]="H"})($||($={}));class Ee{constructor(t,e,n){this.value=t,this.stringValue=e,this.bits=n,Ee.FOR_BITS.set(n,this),Ee.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Ee.L;case"M":return Ee.M;case"Q":return Ee.Q;case"H":return Ee.H;default:throw new u(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Ee))return!1;const e=t;return this.value===e.value}static forBits(t){if(t<0||t>=Ee.FOR_BITS.size)throw new h;return Ee.FOR_BITS.get(t)}}Ee.FOR_BITS=new Map,Ee.FOR_VALUE=new Map,Ee.L=new Ee($.L,"L",1),Ee.M=new Ee($.M,"M",0),Ee.Q=new Ee($.Q,"Q",3),Ee.H=new Ee($.H,"H",2);class Ae{constructor(t){this.errorCorrectionLevel=Ee.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return b.bitCount(t^e)}static decodeFormatInformation(t,e){const n=Ae.doDecodeFormatInformation(t,e);return null!==n?n:Ae.doDecodeFormatInformation(t^Ae.FORMAT_INFO_MASK_QR,e^Ae.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of Ae.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===t||o===e)return new Ae(i[1]);let s=Ae.numBitsDiffering(t,o);s<n&&(r=i[1],n=s),t!==e&&(s=Ae.numBitsDiffering(e,o),s<n&&(r=i[1],n=s))}return n<=3?new Ae(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Ae))return!1;const e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask}}Ae.FORMAT_INFO_MASK_QR=21522,Ae.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ce{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const e=this.ecBlocks;for(const n of e)t+=n.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Se{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(t,e,...n){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const s of o)r+=s.getCount()*(s.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new C;try{return this.getVersionForNumber((t-17)/4)}catch(e){throw new C}}static getVersionForNumber(t){if(t<1||t>40)throw new h;return _e.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<_e.VERSION_DECODE_INFO.length;r++){const i=_e.VERSION_DECODE_INFO[r];if(i===t)return _e.getVersionForNumber(r+7);const o=Ae.numBitsDiffering(t,i);o<e&&(n=r+7,e=o)}return e<=3?_e.getVersionForNumber(n):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),e=new k(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const t=this.alignmentPatternCenters[r]-2;for(let i=0;i<n;i++)0===r&&(0===i||i===n-1)||r===n-1&&0===i||e.setRegion(this.alignmentPatternCenters[i]-2,t,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new Ce(7,new Se(1,19)),new Ce(10,new Se(1,16)),new Ce(13,new Se(1,13)),new Ce(17,new Se(1,9))),new _e(2,Int32Array.from([6,18]),new Ce(10,new Se(1,34)),new Ce(16,new Se(1,28)),new Ce(22,new Se(1,22)),new Ce(28,new Se(1,16))),new _e(3,Int32Array.from([6,22]),new Ce(15,new Se(1,55)),new Ce(26,new Se(1,44)),new Ce(18,new Se(2,17)),new Ce(22,new Se(2,13))),new _e(4,Int32Array.from([6,26]),new Ce(20,new Se(1,80)),new Ce(18,new Se(2,32)),new Ce(26,new Se(2,24)),new Ce(16,new Se(4,9))),new _e(5,Int32Array.from([6,30]),new Ce(26,new Se(1,108)),new Ce(24,new Se(2,43)),new Ce(18,new Se(2,15),new Se(2,16)),new Ce(22,new Se(2,11),new Se(2,12))),new _e(6,Int32Array.from([6,34]),new Ce(18,new Se(2,68)),new Ce(16,new Se(4,27)),new Ce(24,new Se(4,19)),new Ce(28,new Se(4,15))),new _e(7,Int32Array.from([6,22,38]),new Ce(20,new Se(2,78)),new Ce(18,new Se(4,31)),new Ce(18,new Se(2,14),new Se(4,15)),new Ce(26,new Se(4,13),new Se(1,14))),new _e(8,Int32Array.from([6,24,42]),new Ce(24,new Se(2,97)),new Ce(22,new Se(2,38),new Se(2,39)),new Ce(22,new Se(4,18),new Se(2,19)),new Ce(26,new Se(4,14),new Se(2,15))),new _e(9,Int32Array.from([6,26,46]),new Ce(30,new Se(2,116)),new Ce(22,new Se(3,36),new Se(2,37)),new Ce(20,new Se(4,16),new Se(4,17)),new Ce(24,new Se(4,12),new Se(4,13))),new _e(10,Int32Array.from([6,28,50]),new Ce(18,new Se(2,68),new Se(2,69)),new Ce(26,new Se(4,43),new Se(1,44)),new Ce(24,new Se(6,19),new Se(2,20)),new Ce(28,new Se(6,15),new Se(2,16))),new _e(11,Int32Array.from([6,30,54]),new Ce(20,new Se(4,81)),new Ce(30,new Se(1,50),new Se(4,51)),new Ce(28,new Se(4,22),new Se(4,23)),new Ce(24,new Se(3,12),new Se(8,13))),new _e(12,Int32Array.from([6,32,58]),new Ce(24,new Se(2,92),new Se(2,93)),new Ce(22,new Se(6,36),new Se(2,37)),new Ce(26,new Se(4,20),new Se(6,21)),new Ce(28,new Se(7,14),new Se(4,15))),new _e(13,Int32Array.from([6,34,62]),new Ce(26,new Se(4,107)),new Ce(22,new Se(8,37),new Se(1,38)),new Ce(24,new Se(8,20),new Se(4,21)),new Ce(22,new Se(12,11),new Se(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new Ce(30,new Se(3,115),new Se(1,116)),new Ce(24,new Se(4,40),new Se(5,41)),new Ce(20,new Se(11,16),new Se(5,17)),new Ce(24,new Se(11,12),new Se(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new Ce(22,new Se(5,87),new Se(1,88)),new Ce(24,new Se(5,41),new Se(5,42)),new Ce(30,new Se(5,24),new Se(7,25)),new Ce(24,new Se(11,12),new Se(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new Ce(24,new Se(5,98),new Se(1,99)),new Ce(28,new Se(7,45),new Se(3,46)),new Ce(24,new Se(15,19),new Se(2,20)),new Ce(30,new Se(3,15),new Se(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new Ce(28,new Se(1,107),new Se(5,108)),new Ce(28,new Se(10,46),new Se(1,47)),new Ce(28,new Se(1,22),new Se(15,23)),new Ce(28,new Se(2,14),new Se(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new Ce(30,new Se(5,120),new Se(1,121)),new Ce(26,new Se(9,43),new Se(4,44)),new Ce(28,new Se(17,22),new Se(1,23)),new Ce(28,new Se(2,14),new Se(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new Ce(28,new Se(3,113),new Se(4,114)),new Ce(26,new Se(3,44),new Se(11,45)),new Ce(26,new Se(17,21),new Se(4,22)),new Ce(26,new Se(9,13),new Se(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new Ce(28,new Se(3,107),new Se(5,108)),new Ce(26,new Se(3,41),new Se(13,42)),new Ce(30,new Se(15,24),new Se(5,25)),new Ce(28,new Se(15,15),new Se(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new Ce(28,new Se(4,116),new Se(4,117)),new Ce(26,new Se(17,42)),new Ce(28,new Se(17,22),new Se(6,23)),new Ce(30,new Se(19,16),new Se(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new Ce(28,new Se(2,111),new Se(7,112)),new Ce(28,new Se(17,46)),new Ce(30,new Se(7,24),new Se(16,25)),new Ce(24,new Se(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new Ce(30,new Se(4,121),new Se(5,122)),new Ce(28,new Se(4,47),new Se(14,48)),new Ce(30,new Se(11,24),new Se(14,25)),new Ce(30,new Se(16,15),new Se(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new Ce(30,new Se(6,117),new Se(4,118)),new Ce(28,new Se(6,45),new Se(14,46)),new Ce(30,new Se(11,24),new Se(16,25)),new Ce(30,new Se(30,16),new Se(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new Ce(26,new Se(8,106),new Se(4,107)),new Ce(28,new Se(8,47),new Se(13,48)),new Ce(30,new Se(7,24),new Se(22,25)),new Ce(30,new Se(22,15),new Se(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new Ce(28,new Se(10,114),new Se(2,115)),new Ce(28,new Se(19,46),new Se(4,47)),new Ce(28,new Se(28,22),new Se(6,23)),new Ce(30,new Se(33,16),new Se(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new Ce(30,new Se(8,122),new Se(4,123)),new Ce(28,new Se(22,45),new Se(3,46)),new Ce(30,new Se(8,23),new Se(26,24)),new Ce(30,new Se(12,15),new Se(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new Ce(30,new Se(3,117),new Se(10,118)),new Ce(28,new Se(3,45),new Se(23,46)),new Ce(30,new Se(4,24),new Se(31,25)),new Ce(30,new Se(11,15),new Se(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new Ce(30,new Se(7,116),new Se(7,117)),new Ce(28,new Se(21,45),new Se(7,46)),new Ce(30,new Se(1,23),new Se(37,24)),new Ce(30,new Se(19,15),new Se(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new Ce(30,new Se(5,115),new Se(10,116)),new Ce(28,new Se(19,47),new Se(10,48)),new Ce(30,new Se(15,24),new Se(25,25)),new Ce(30,new Se(23,15),new Se(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new Ce(30,new Se(13,115),new Se(3,116)),new Ce(28,new Se(2,46),new Se(29,47)),new Ce(30,new Se(42,24),new Se(1,25)),new Ce(30,new Se(23,15),new Se(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new Ce(30,new Se(17,115)),new Ce(28,new Se(10,46),new Se(23,47)),new Ce(30,new Se(10,24),new Se(35,25)),new Ce(30,new Se(19,15),new Se(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new Ce(30,new Se(17,115),new Se(1,116)),new Ce(28,new Se(14,46),new Se(21,47)),new Ce(30,new Se(29,24),new Se(19,25)),new Ce(30,new Se(11,15),new Se(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new Ce(30,new Se(13,115),new Se(6,116)),new Ce(28,new Se(14,46),new Se(23,47)),new Ce(30,new Se(44,24),new Se(7,25)),new Ce(30,new Se(59,16),new Se(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new Ce(30,new Se(12,121),new Se(7,122)),new Ce(28,new Se(12,47),new Se(26,48)),new Ce(30,new Se(39,24),new Se(14,25)),new Ce(30,new Se(22,15),new Se(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new Ce(30,new Se(6,121),new Se(14,122)),new Ce(28,new Se(6,47),new Se(34,48)),new Ce(30,new Se(46,24),new Se(10,25)),new Ce(30,new Se(2,15),new Se(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new Ce(30,new Se(17,122),new Se(4,123)),new Ce(28,new Se(29,46),new Se(14,47)),new Ce(30,new Se(49,24),new Se(10,25)),new Ce(30,new Se(24,15),new Se(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new Ce(30,new Se(4,122),new Se(18,123)),new Ce(28,new Se(13,46),new Se(32,47)),new Ce(30,new Se(48,24),new Se(14,25)),new Ce(30,new Se(42,15),new Se(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new Ce(30,new Se(20,117),new Se(4,118)),new Ce(28,new Se(40,47),new Se(7,48)),new Ce(30,new Se(43,24),new Se(22,25)),new Ce(30,new Se(10,15),new Se(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new Ce(30,new Se(19,118),new Se(6,119)),new Ce(28,new Se(18,47),new Se(31,48)),new Ce(30,new Se(34,24),new Se(34,25)),new Ce(30,new Se(20,15),new Se(61,16)))],function(t){t[t["DATA_MASK_000"]=0]="DATA_MASK_000",t[t["DATA_MASK_001"]=1]="DATA_MASK_001",t[t["DATA_MASK_010"]=2]="DATA_MASK_010",t[t["DATA_MASK_011"]=3]="DATA_MASK_011",t[t["DATA_MASK_100"]=4]="DATA_MASK_100",t[t["DATA_MASK_101"]=5]="DATA_MASK_101",t[t["DATA_MASK_110"]=6]="DATA_MASK_110",t[t["DATA_MASK_111"]=7]="DATA_MASK_111"}(G||(G={}));class Te{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let n=0;n<e;n++)for(let r=0;r<e;r++)this.isMasked(n,r)&&t.flip(r,n)}}Te.values=new Map([[G.DATA_MASK_000,new Te(G.DATA_MASK_000,((t,e)=>0===(t+e&1)))],[G.DATA_MASK_001,new Te(G.DATA_MASK_001,((t,e)=>0===(1&t)))],[G.DATA_MASK_010,new Te(G.DATA_MASK_010,((t,e)=>e%3===0))],[G.DATA_MASK_011,new Te(G.DATA_MASK_011,((t,e)=>(t+e)%3===0))],[G.DATA_MASK_100,new Te(G.DATA_MASK_100,((t,e)=>0===(Math.floor(t/2)+Math.floor(e/3)&1)))],[G.DATA_MASK_101,new Te(G.DATA_MASK_101,((t,e)=>t*e%6===0))],[G.DATA_MASK_110,new Te(G.DATA_MASK_110,((t,e)=>t*e%6<3))],[G.DATA_MASK_111,new Te(G.DATA_MASK_111,((t,e)=>0===(t+e+t*e%3&1)))]]);class Ie{constructor(t){const e=t.getHeight();if(e<21||1!==(3&e))throw new C;this.bitMatrix=t}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let i=0;i<6;i++)t=this.copyBit(i,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let i=5;i>=0;i--)t=this.copyBit(8,i,t);const e=this.bitMatrix.getHeight();let n=0;const r=e-7;for(let i=e-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=e-8;i<e;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Ae.decodeFormatInformation(t,n),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new C}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return _e.getVersionForNumber(e);let n=0;const r=t-11;for(let o=5;o>=0;o--)for(let e=t-9;e>=r;e--)n=this.copyBit(e,o,n);let i=_e.decodeVersionInformation(n);if(null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let e=t-9;e>=r;e--)n=this.copyBit(o,e,n);if(i=_e.decodeVersionInformation(n),null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;throw new C}copyBit(t,e,n){const r=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return r?n<<1|1:n<<1}readCodewords(){const t=this.readFormatInformation(),e=this.readVersion(),n=Te.values.get(t.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=e.buildFunctionPattern();let o=!0;const s=new Uint8Array(e.getTotalCodewords());let a=0,c=0,l=0;for(let u=r-1;u>0;u-=2){6===u&&u--;for(let t=0;t<r;t++){const e=o?r-1-t:t;for(let t=0;t<2;t++)i.get(u-t,e)||(l++,c<<=1,this.bitMatrix.get(u-t,e)&&(c|=1),8===l&&(s[a++]=c,l=0,c=0))}o=!o}if(a!==e.getTotalCodewords())throw new C;return s}remask(){if(null===this.parsedFormatInfo)return;const t=Te.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let e=0,n=t.getWidth();e<n;e++)for(let r=e+1,i=t.getHeight();r<i;r++)t.get(e,r)!==t.get(r,e)&&(t.flip(r,e),t.flip(e,r))}}class Me{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,n){if(t.length!==e.getTotalCodewords())throw new h;const r=e.getECBlocksForLevel(n);let i=0;const o=r.getECBlocks();for(const h of o)i+=h.getCount();const s=new Array(i);let a=0;for(const h of o)for(let t=0;t<h.getCount();t++){const t=h.getDataCodewords(),e=r.getECCodewordsPerBlock()+t;s[a++]=new Me(t,new Uint8Array(e))}const c=s[0].codewords.length;let l=s.length-1;while(l>=0){const t=s[l].codewords.length;if(t===c)break;l--}l++;const u=c-r.getECCodewordsPerBlock();let d=0;for(let h=0;h<u;h++)for(let e=0;e<a;e++)s[e].codewords[h]=t[d++];for(let h=l;h<a;h++)s[h].codewords[u]=t[d++];const f=s[0].codewords.length;for(let h=u;h<f;h++)for(let e=0;e<a;e++){const n=e<l?h:h+1;s[e].codewords[n]=t[d++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(function(t){t[t["TERMINATOR"]=0]="TERMINATOR",t[t["NUMERIC"]=1]="NUMERIC",t[t["ALPHANUMERIC"]=2]="ALPHANUMERIC",t[t["STRUCTURED_APPEND"]=3]="STRUCTURED_APPEND",t[t["BYTE"]=4]="BYTE",t[t["ECI"]=5]="ECI",t[t["KANJI"]=6]="KANJI",t[t["FNC1_FIRST_POSITION"]=7]="FNC1_FIRST_POSITION",t[t["FNC1_SECOND_POSITION"]=8]="FNC1_SECOND_POSITION",t[t["HANZI"]=9]="HANZI"})(Y||(Y={}));class ke{constructor(t,e,n,r){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=n,this.bits=r,ke.FOR_BITS.set(r,this),ke.FOR_VALUE.set(t,this)}static forBits(t){const e=ke.FOR_BITS.get(t);if(void 0===e)throw new h;return e}getCharacterCountBits(t){const e=t.getVersionNumber();let n;return n=e<=9?0:e<=26?1:2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof ke))return!1;const e=t;return this.value===e.value}toString(){return this.stringValue}}ke.FOR_BITS=new Map,ke.FOR_VALUE=new Map,ke.TERMINATOR=new ke(Y.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ke.NUMERIC=new ke(Y.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ke.ALPHANUMERIC=new ke(Y.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ke.STRUCTURED_APPEND=new ke(Y.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ke.BYTE=new ke(Y.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ke.ECI=new ke(Y.ECI,"ECI",Int32Array.from([0,0,0]),7),ke.KANJI=new ke(Y.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ke.FNC1_FIRST_POSITION=new ke(Y.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ke.FNC1_SECOND_POSITION=new ke(Y.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ke.HANZI=new ke(Y.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ne{static decode(t,e,n,r){const i=new ge(t);let o=new M;const s=new Array;let a=-1,c=-1;try{let t,n=null,l=!1;do{if(i.available()<4)t=ke.TERMINATOR;else{const e=i.readBits(4);t=ke.forBits(e)}switch(t){case ke.TERMINATOR:break;case ke.FNC1_FIRST_POSITION:case ke.FNC1_SECOND_POSITION:l=!0;break;case ke.STRUCTURED_APPEND:if(i.available()<16)throw new C;a=i.readBits(8),c=i.readBits(8);break;case ke.ECI:const u=Ne.parseECIValue(i);if(n=S.getCharacterSetECIByValue(u),null===n)throw new C;break;case ke.HANZI:const h=i.readBits(4),d=i.readBits(t.getCharacterCountBits(e));h===Ne.GB2312_SUBSET&&Ne.decodeHanziSegment(i,o,d);break;default:const f=i.readBits(t.getCharacterCountBits(e));switch(t){case ke.NUMERIC:Ne.decodeNumericSegment(i,o,f);break;case ke.ALPHANUMERIC:Ne.decodeAlphanumericSegment(i,o,f,l);break;case ke.BYTE:Ne.decodeByteSegment(i,o,f,n,s,r);break;case ke.KANJI:Ne.decodeKanjiSegment(i,o,f);break;default:throw new C}break}}while(t!==ke.TERMINATOR)}catch(l){throw new C}return new K(t,o.toString(),0===s.length?null:s,null===n?null:n.toString(),a,c)}static decodeHanziSegment(t,e,n){if(13*n>t.available())throw new C;const r=new Uint8Array(2*n);let i=0;while(n>0){const e=t.readBits(13);let o=e/96<<8&4294967295|e%96;o+=o<959?41377:42657,r[i]=o>>8&255,r[i+1]=255&o,i+=2,n--}try{e.append(T.decode(r,I.GB2312))}catch(o){throw new C(o)}}static decodeKanjiSegment(t,e,n){if(13*n>t.available())throw new C;const r=new Uint8Array(2*n);let i=0;while(n>0){const e=t.readBits(13);let o=e/192<<8&4294967295|e%192;o+=o<7936?33088:49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{e.append(T.decode(r,I.SHIFT_JIS))}catch(o){throw new C(o)}}static decodeByteSegment(t,e,n,r,i,o){if(8*n>t.available())throw new C;const s=new Uint8Array(n);for(let l=0;l<n;l++)s[l]=t.readBits(8);let a;a=null===r?I.guessEncoding(s,o):r.getName();try{e.append(T.decode(s,a))}catch(c){throw new C(c)}i.push(s)}static toAlphaNumericChar(t){if(t>=Ne.ALPHANUMERIC_CHARS.length)throw new C;return Ne.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,n,r){const i=e.length();while(n>1){if(t.available()<11)throw new C;const r=t.readBits(11);e.append(Ne.toAlphaNumericChar(Math.floor(r/45))),e.append(Ne.toAlphaNumericChar(r%45)),n-=2}if(1===n){if(t.available()<6)throw new C;e.append(Ne.toAlphaNumericChar(t.readBits(6)))}if(r)for(let o=i;o<e.length();o++)"%"===e.charAt(o)&&(o<e.length()-1&&"%"===e.charAt(o+1)?e.deleteCharAt(o+1):e.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(t,e,n){while(n>=3){if(t.available()<10)throw new C;const r=t.readBits(10);if(r>=1e3)throw new C;e.append(Ne.toAlphaNumericChar(Math.floor(r/100))),e.append(Ne.toAlphaNumericChar(Math.floor(r/10)%10)),e.append(Ne.toAlphaNumericChar(r%10)),n-=3}if(2===n){if(t.available()<7)throw new C;const n=t.readBits(7);if(n>=100)throw new C;e.append(Ne.toAlphaNumericChar(Math.floor(n/10))),e.append(Ne.toAlphaNumericChar(n%10))}else if(1===n){if(t.available()<4)throw new C;const n=t.readBits(4);if(n>=10)throw new C;e.append(Ne.toAlphaNumericChar(n))}}static parseECIValue(t){const e=t.readBits(8);if(0===(128&e))return 127&e;if(128===(192&e)){const n=t.readBits(8);return(63&e)<<8&4294967295|n}if(192===(224&e)){const n=t.readBits(16);return(31&e)<<16&4294967295|n}throw new C}}Ne.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ne.GB2312_SUBSET=1;class Oe{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;const e=t[0];t[0]=t[2],t[2]=e}}class De{constructor(){this.rsDecoder=new rt(tt.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(k.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){const n=new Ie(t);let r=null;try{return this.decodeBitMatrixParser(n,e)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const t=this.decodeBitMatrixParser(n,e);return t.setOther(new Oe(!0)),t}catch(i){if(null!==r)throw r;throw i}}decodeBitMatrixParser(t,e){const n=t.readVersion(),r=t.readFormatInformation().getErrorCorrectionLevel(),i=t.readCodewords(),o=Me.getDataBlocks(i,n,r);let s=0;for(const l of o)s+=l.getNumDataCodewords();const a=new Uint8Array(s);let c=0;for(const l of o){const t=l.getCodewords(),e=l.getNumDataCodewords();this.correctErrors(t,e);for(let n=0;n<e;n++)a[c++]=t[n]}return Ne.decode(a,n,r,e)}correctErrors(t,e){const n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-e)}catch(r){throw new f}for(let i=0;i<e;i++)t[i]=n[i]}}class xe extends at{constructor(t,e,n){super(t,e),this.estimatedModuleSize=n}aboutEquals(t,e,n){if(Math.abs(e-this.getY())<=t&&Math.abs(n-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,n){const r=(this.getX()+e)/2,i=(this.getY()+t)/2,o=(this.estimatedModuleSize+n)/2;return new xe(r,i,o)}}class Re{constructor(t,e,n,r,i,o,s){this.image=t,this.startX=e,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,e=this.height,n=this.width,r=t+n,i=this.startY+e/2,o=new Int32Array(3),s=this.image;for(let a=0;a<e;a++){const e=i+(0===(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;let n=t;while(n<r&&!s.get(n,e))n++;let c=0;while(n<r){if(s.get(n,e))if(1===c)o[1]++;else if(2===c){if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,n);if(null!==t)return t}o[0]=o[2],o[1]=1,o[2]=0,c=1}else o[++c]++;else 1===c&&c++,o[c]++;n++}if(this.foundPatternCross(o)){const t=this.handlePossibleCenter(o,e,r);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new N}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){const e=this.moduleSize,n=e/2;for(let r=0;r<3;r++)if(Math.abs(e-t[r])>=n)return!1;return!0}crossCheckVertical(t,e,n,r){const i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=t;while(a>=0&&i.get(e,a)&&s[1]<=n)s[1]++,a--;if(a<0||s[1]>n)return NaN;while(a>=0&&!i.get(e,a)&&s[0]<=n)s[0]++,a--;if(s[0]>n)return NaN;a=t+1;while(a<o&&i.get(e,a)&&s[1]<=n)s[1]++,a++;if(a===o||s[1]>n)return NaN;while(a<o&&!i.get(e,a)&&s[2]<=n)s[2]++,a++;if(s[2]>n)return NaN;const c=s[0]+s[1]+s[2];return 5*Math.abs(c-r)>=2*r?NaN:this.foundPatternCross(s)?Re.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,n){const r=t[0]+t[1]+t[2],i=Re.centerFromEnd(t,n),o=this.crossCheckVertical(e,i,2*t[1],r);if(!isNaN(o)){const e=(t[0]+t[1]+t[2])/3;for(const t of this.possibleCenters)if(t.aboutEquals(e,o,i))return t.combineEstimate(o,i,e);const n=new xe(i,o,e);this.possibleCenters.push(n),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(n)}return null}}class Be extends at{constructor(t,e,n,r){super(t,e),this.estimatedModuleSize=n,this.count=r,void 0===r&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,n){if(Math.abs(e-this.getY())<=t&&Math.abs(n-this.getX())<=t){const e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,n){const r=this.count+1,i=(this.count*this.getX()+e)/r,o=(this.count*this.getY()+t)/r,s=(this.count*this.estimatedModuleSize+n)/r;return new Be(i,o,s,r)}}class Le{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Pe{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const e=null!==t&&void 0!==t&&void 0!==t.get(A.TRY_HARDER),n=null!==t&&void 0!==t&&void 0!==t.get(A.PURE_BARCODE),r=this.image,i=r.getHeight(),o=r.getWidth();let s=Math.floor(3*i/(4*Pe.MAX_MODULES));(s<Pe.MIN_SKIP||e)&&(s=Pe.MIN_SKIP);let a=!1;const c=new Int32Array(5);for(let u=s-1;u<i&&!a;u+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;let t=0;for(let e=0;e<o;e++)if(r.get(e,u))1===(1&t)&&t++,c[t]++;else if(0===(1&t))if(4===t)if(Pe.foundPatternCross(c)){const r=this.handlePossibleCenter(c,u,e,n);if(!0!==r){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,t=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const t=this.findRowSkip();t>c[2]&&(u+=t-c[2]-s,e=o-1)}t=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,t=3;else c[++t]++;else c[t]++;if(Pe.foundPatternCross(c)){const t=this.handlePossibleCenter(c,u,o,n);!0===t&&(s=c[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}}const l=this.selectBestPatterns();return at.orderBestPatterns(l),new Le(l)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let i=0;i<5;i++){const n=t[i];if(0===n)return!1;e+=n}if(e<7)return!1;const n=e/7,r=n/2;return Math.abs(n-t[0])<r&&Math.abs(n-t[1])<r&&Math.abs(3*n-t[2])<3*r&&Math.abs(n-t[3])<r&&Math.abs(n-t[4])<r}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,n,r){const i=this.getCrossCheckStateCount();let o=0;const s=this.image;while(t>=o&&e>=o&&s.get(e-o,t-o))i[2]++,o++;if(t<o||e<o)return!1;while(t>=o&&e>=o&&!s.get(e-o,t-o)&&i[1]<=n)i[1]++,o++;if(t<o||e<o||i[1]>n)return!1;while(t>=o&&e>=o&&s.get(e-o,t-o)&&i[0]<=n)i[0]++,o++;if(i[0]>n)return!1;const a=s.getHeight(),c=s.getWidth();o=1;while(t+o<a&&e+o<c&&s.get(e+o,t+o))i[2]++,o++;if(t+o>=a||e+o>=c)return!1;while(t+o<a&&e+o<c&&!s.get(e+o,t+o)&&i[3]<n)i[3]++,o++;if(t+o>=a||e+o>=c||i[3]>=n)return!1;while(t+o<a&&e+o<c&&s.get(e+o,t+o)&&i[4]<n)i[4]++,o++;if(i[4]>=n)return!1;const l=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(l-r)<2*r&&Pe.foundPatternCross(i)}crossCheckVertical(t,e,n,r){const i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount();let a=t;while(a>=0&&i.get(e,a))s[2]++,a--;if(a<0)return NaN;while(a>=0&&!i.get(e,a)&&s[1]<=n)s[1]++,a--;if(a<0||s[1]>n)return NaN;while(a>=0&&i.get(e,a)&&s[0]<=n)s[0]++,a--;if(s[0]>n)return NaN;a=t+1;while(a<o&&i.get(e,a))s[2]++,a++;if(a===o)return NaN;while(a<o&&!i.get(e,a)&&s[3]<n)s[3]++,a++;if(a===o||s[3]>=n)return NaN;while(a<o&&i.get(e,a)&&s[4]<n)s[4]++,a++;if(s[4]>=n)return NaN;const c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-r)>=2*r?NaN:Pe.foundPatternCross(s)?Pe.centerFromEnd(s,a):NaN}crossCheckHorizontal(t,e,n,r){const i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount();let a=t;while(a>=0&&i.get(a,e))s[2]++,a--;if(a<0)return NaN;while(a>=0&&!i.get(a,e)&&s[1]<=n)s[1]++,a--;if(a<0||s[1]>n)return NaN;while(a>=0&&i.get(a,e)&&s[0]<=n)s[0]++,a--;if(s[0]>n)return NaN;a=t+1;while(a<o&&i.get(a,e))s[2]++,a++;if(a===o)return NaN;while(a<o&&!i.get(a,e)&&s[3]<n)s[3]++,a++;if(a===o||s[3]>=n)return NaN;while(a<o&&i.get(a,e)&&s[4]<n)s[4]++,a++;if(s[4]>=n)return NaN;const c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-r)>=r?NaN:Pe.foundPatternCross(s)?Pe.centerFromEnd(s,a):NaN}handlePossibleCenter(t,e,n,r){const i=t[0]+t[1]+t[2]+t[3]+t[4];let o=Pe.centerFromEnd(t,n),s=this.crossCheckVertical(e,Math.floor(o),t[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),t[2],i),!isNaN(o)&&(!r||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),t[2],i)))){const t=i/7;let e=!1;const n=this.possibleCenters;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.aboutEquals(t,s,o)){n[r]=i.combineEstimate(s,o,t),e=!0;break}}if(!e){const e=new Be(o,s,t);n.push(e),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){const t=this.possibleCenters.length;if(t<=1)return 0;let e=null;for(const n of this.possibleCenters)if(n.getCount()>=Pe.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-n.getX())-Math.abs(e.getY()-n.getY()))/2);e=n}return 0}haveMultiplyConfirmedCenters(){let t=0,e=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Pe.CENTER_QUORUM&&(t++,e+=o.getEstimatedModuleSize());if(t<3)return!1;const r=e/n;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-r);return i<=.05*e}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new N;const e=this.possibleCenters;let n;if(t>3){let r=0,i=0;for(const t of this.possibleCenters){const e=t.getEstimatedModuleSize();r+=e,i+=e*e}n=r/t;let o=Math.sqrt(i/t-n*n);e.sort(((t,e)=>{const r=Math.abs(e.getEstimatedModuleSize()-n),i=Math.abs(t.getEstimatedModuleSize()-n);return r<i?-1:r>i?1:0}));const s=Math.max(.2*n,o);for(let t=0;t<e.length&&e.length>3;t++){const r=e[t];Math.abs(r.getEstimatedModuleSize()-n)>s&&(e.splice(t,1),t--)}}if(e.length>3){let t=0;for(const n of e)t+=n.getEstimatedModuleSize();n=t/e.length,e.sort(((t,e)=>{if(e.getCount()===t.getCount()){const r=Math.abs(e.getEstimatedModuleSize()-n),i=Math.abs(t.getEstimatedModuleSize()-n);return r<i?1:r>i?-1:0}return e.getCount()-t.getCount()})),e.splice(3)}return[e[0],e[1],e[2]]}}Pe.CENTER_QUORUM=2,Pe.MIN_SKIP=3,Pe.MAX_MODULES=57;class Fe{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null===t||void 0===t?null:t.get(A.NEED_RESULT_POINT_CALLBACK);const e=new Pe(this.image,this.resultPointCallback),n=e.find(t);return this.processFinderPatternInfo(n)}processFinderPatternInfo(t){const e=t.getTopLeft(),n=t.getTopRight(),r=t.getBottomLeft(),i=this.calculateModuleSize(e,n,r);if(i<1)throw new N("No pattern found in proccess finder.");const o=Fe.computeDimension(e,n,r,i),s=_e.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7;let c=null;if(s.getAlignmentPatternCenters().length>0){const t=n.getX()-e.getX()+r.getX(),o=n.getY()-e.getY()+r.getY(),s=1-3/a,l=Math.floor(e.getX()+s*(t-e.getX())),u=Math.floor(e.getY()+s*(o-e.getY()));for(let e=4;e<=16;e<<=1)try{c=this.findAlignmentInRegion(i,l,u,e);break}catch(d){if(!(d instanceof N))throw d}}const l=Fe.createTransform(e,n,r,c,o),u=Fe.sampleGrid(this.image,l,o);let h;return h=null===c?[r,e,n]:[r,e,n,c],new ct(u,h)}static createTransform(t,e,n,r,i){const o=i-3.5;let s,a,c,l;return null!==r?(s=r.getX(),a=r.getY(),c=o-3,l=c):(s=e.getX()-t.getX()+n.getX(),a=e.getY()-t.getY()+n.getY(),c=o,l=o),dt.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,l,3.5,o,t.getX(),t.getY(),e.getX(),e.getY(),s,a,n.getX(),n.getY())}static sampleGrid(t,e,n){const r=pt.getInstance();return r.sampleGridWithTransform(t,n,n,e)}static computeDimension(t,e,n,r){const i=ot.round(at.distance(t,e)/r),o=ot.round(at.distance(t,n)/r);let s=Math.floor((i+o)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new N("Dimensions could be not found.")}return s}calculateModuleSize(t,e,n){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,n))/2}calculateModuleSizeOneWay(t,e){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,n,r){let i=this.sizeOfBlackWhiteBlackRun(t,e,n,r),o=1,s=t-(n-t);s<0?(o=t/(t-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);let a=Math.floor(e-(r-e)*o);return o=1,a<0?(o=e/(e-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),s=Math.floor(t+(s-t)*o),i+=this.sizeOfBlackWhiteBlackRun(t,e,s,a),i-1}sizeOfBlackWhiteBlackRun(t,e,n,r){const i=Math.abs(r-e)>Math.abs(n-t);if(i){let i=t;t=e,e=i,i=n,n=r,r=i}const o=Math.abs(n-t),s=Math.abs(r-e);let a=-o/2;const c=t<n?1:-1,l=e<r?1:-1;let u=0;const h=n+c;for(let d=t,f=e;d!==h;d+=c){const n=i?f:d,c=i?d:f;if(1===u===this.image.get(n,c)){if(2===u)return ot.distance(d,f,t,e);u++}if(a+=s,a>0){if(f===r)break;f+=l,a-=o}}return 2===u?ot.distance(n+c,r,t,e):NaN}findAlignmentInRegion(t,e,n,r){const i=Math.floor(r*t),o=Math.max(0,e-i),s=Math.min(this.image.getWidth()-1,e+i);if(s-o<3*t)throw new N("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-a<3*t)throw new N("Alignment bottom exceeds estimated module size.");const l=new Re(this.image,o,a,s-o,c-a,t,this.resultPointCallback);return l.find()}}class Ue{constructor(){this.decoder=new De}getDecoder(){return this.decoder}decode(t,e){let n,r;if(void 0!==e&&null!==e&&void 0!==e.get(A.PURE_BARCODE)){const i=Ue.extractPureBits(t.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,e),r=Ue.NO_POINTS}else{const i=new Fe(t.getBlackMatrix()).detect(e);n=this.decoder.decodeBitMatrix(i.getBits(),e),r=i.getPoints()}n.getOther()instanceof Oe&&n.getOther().applyMirroredCorrection(r);const i=new z(n.getText(),n.getRawBytes(),void 0,r,j.QR_CODE,void 0),o=n.getByteSegments();null!==o&&i.putMetadata(q.BYTE_SEGMENTS,o);const s=n.getECLevel();return null!==s&&i.putMetadata(q.ERROR_CORRECTION_LEVEL,s),n.hasStructuredAppend()&&(i.putMetadata(q.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(q.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(t){const e=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(null===e||null===n)throw new N;const r=this.moduleSize(e,t);let i=e[1],o=n[1],s=e[0],a=n[0];if(s>=a||i>=o)throw new N;if(o-i!==a-s&&(a=s+(o-i),a>=t.getWidth()))throw new N;const c=Math.round((a-s+1)/r),l=Math.round((o-i+1)/r);if(c<=0||l<=0)throw new N;if(l!==c)throw new N;const u=Math.floor(r/2);i+=u,s+=u;const h=s+Math.floor((c-1)*r)-a;if(h>0){if(h>u)throw new N;s-=h}const d=i+Math.floor((l-1)*r)-o;if(d>0){if(d>u)throw new N;i-=d}const f=new k(c,l);for(let p=0;p<l;p++){const e=i+Math.floor(p*r);for(let n=0;n<c;n++)t.get(s+Math.floor(n*r),e)&&f.set(n,p)}return f}static moduleSize(t,e){const n=e.getHeight(),r=e.getWidth();let i=t[0],o=t[1],s=!0,a=0;while(i<r&&o<n){if(s!==e.get(i,o)){if(5===++a)break;s=!s}i++,o++}if(i===r||o===n)throw new N;return(i-t[0])/7}}Ue.NO_POINTS=new Array;class ze{PDF417Common(){}static getBitCountSum(t){return ot.sum(t)}static toIntArray(t){if(null==t||!t.length)return ze.EMPTY_INT_ARRAY;const e=new Int32Array(t.length);let n=0;for(const r of t)e[n++]=r;return e}static getCodeword(t){const e=w.binarySearch(ze.SYMBOL_TABLE,262143&t);return e<0?-1:(ze.CODEWORD_TABLE[e]-1)%ze.NUMBER_OF_CODEWORDS}}ze.NUMBER_OF_CODEWORDS=929,ze.MAX_CODEWORDS_IN_BARCODE=ze.NUMBER_OF_CODEWORDS-1,ze.MIN_ROWS_IN_BARCODE=3,ze.MAX_ROWS_IN_BARCODE=90,ze.MODULES_IN_CODEWORD=17,ze.MODULES_IN_STOP_PATTERN=18,ze.BARS_IN_MODULE=8,ze.EMPTY_INT_ARRAY=new Int32Array([]),ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class He{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class je{static detectMultiple(t,e,n){let r=t.getBlackMatrix(),i=je.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=je.detect(n,r)),new He(r,i)}static detect(t,e){const n=new Array;let r=0,i=0,o=!1;while(r<e.getHeight()){const s=je.findVertices(e,r,i);if(null!=s[0]||null!=s[3]){if(o=!0,n.push(s),!t)break;null!=s[2]?(i=Math.trunc(s[2].getX()),r=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;for(const t of n)null!=t[1]&&(r=Math.trunc(Math.max(r,t[1].getY()))),null!=t[3]&&(r=Math.max(r,Math.trunc(t[3].getY())));r+=je.ROW_STEP}}return n}static findVertices(t,e,n){const r=t.getHeight(),i=t.getWidth(),o=new Array(8);return je.copyToResult(o,je.findRowsWithPattern(t,r,i,e,n,je.START_PATTERN),je.INDEXES_START_PATTERN),null!=o[4]&&(n=Math.trunc(o[4].getX()),e=Math.trunc(o[4].getY())),je.copyToResult(o,je.findRowsWithPattern(t,r,i,e,n,je.STOP_PATTERN),je.INDEXES_STOP_PATTERN),o}static copyToResult(t,e,n){for(let r=0;r<n.length;r++)t[n[r]]=e[r]}static findRowsWithPattern(t,e,n,r,i,o){const s=new Array(4);let a=!1;const c=new Int32Array(o.length);for(;r<e;r+=je.ROW_STEP){let e=je.findGuardPattern(t,i,r,n,!1,o,c);if(null!=e){while(r>0){const s=je.findGuardPattern(t,i,--r,n,!1,o,c);if(null==s){r++;break}e=s}s[0]=new at(e[0],r),s[1]=new at(e[1],r),a=!0;break}}let l=r+1;if(a){let r=0,i=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;l<e;l++){const e=je.findGuardPattern(t,i[0],l,n,!1,o,c);if(null!=e&&Math.abs(i[0]-e[0])<je.MAX_PATTERN_DRIFT&&Math.abs(i[1]-e[1])<je.MAX_PATTERN_DRIFT)i=e,r=0;else{if(r>je.SKIPPED_ROW_COUNT_MAX)break;r++}}l-=r+1,s[2]=new at(i[0],l),s[3]=new at(i[1],l)}return l-r<je.BARCODE_MIN_HEIGHT&&w.fill(s,null),s}static findGuardPattern(t,e,n,r,i,o,s){w.fillWithin(s,0,s.length,0);let a=e,c=0;while(t.get(a,n)&&a>0&&c++<je.MAX_PIXEL_DRIFT)a--;let l=a,u=0,h=o.length;for(let d=i;l<r;l++){let e=t.get(l,n);if(e!==d)s[u]++;else{if(u===h-1){if(je.patternMatchVariance(s,o,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE)return new Int32Array([a,l]);a+=s[0]+s[1],g.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,d=!d}}return u===h-1&&je.patternMatchVariance(s,o,je.MAX_INDIVIDUAL_VARIANCE)<je.MAX_AVG_VARIANCE?new Int32Array([a,l-1]):null}static patternMatchVariance(t,e,n){let r=t.length,i=0,o=0;for(let c=0;c<r;c++)i+=t[c],o+=e[c];if(i<o)return 1/0;let s=i/o;n*=s;let a=0;for(let c=0;c<r;c++){let r=t[c],i=e[c]*s,o=r>i?r-i:i-r;if(o>n)return 1/0;a+=o}return a/i}}je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),je.MAX_AVG_VARIANCE=.42,je.MAX_INDIVIDUAL_VARIANCE=.8,je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),je.MAX_PIXEL_DRIFT=3,je.MAX_PATTERN_DRIFT=5,je.SKIPPED_ROW_COUNT_MAX=25,je.ROW_STEP=5,je.BARCODE_MIN_HEIGHT=10;class Ve{constructor(t,e){if(0===e.length)throw new h;this.field=t;let n=e.length;if(n>1&&0===e[0]){let t=1;while(t<n&&0===e[t])t++;t===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-t),g.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)e=this.field.add(this.field.multiply(t,e),this.coefficients[r]);return e}add(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,n=t.coefficients;if(e.length>n.length){let t=e;e=n,n=t}let r=new Int32Array(n.length),i=n.length-e.length;g.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(e[o-i],n[o]);return new Ve(this.field,r)}subtract(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Ve?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Ve(this.field,new Int32Array([0]));let e=this.coefficients,n=e.length,r=t.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let s=0;s<n;s++){let t=e[s];for(let e=0;e<i;e++)o[s+e]=this.field.add(o[s+e],this.field.multiply(t,r[e]))}return new Ve(this.field,o)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let n=0;n<t;n++)e[n]=this.field.subtract(0,this.coefficients[n]);return new Ve(this.field,e)}multiplyScalar(t){if(0===t)return new Ve(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new Ve(this.field,n)}multiplyByMonomial(t,e){if(t<0)throw new h;if(0===e)return new Ve(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+t);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new Ve(this.field,r)}toString(){let t=new M;for(let e=this.getDegree();e>=0;e--){let n=this.getCoefficient(e);0!==n&&(n<0?(t.append(" - "),n=-n):t.length()>0&&t.append(" + "),0!==e&&1===n||t.append(n),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class We{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new h;return this.logTable[t]}inverse(t){if(0===t)throw new Q;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class $e extends We{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let n=1;for(let r=0;r<t;r++)this.expTable[r]=n,n=n*e%t;for(let r=0;r<t-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Ve(this,new Int32Array([0])),this.one=new Ve(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new h;if(0===e)return this.zero;let n=new Int32Array(t+1);return n[0]=e,new Ve(this,n)}}$e.PDF417_GF=new $e(ze.NUMBER_OF_CODEWORDS,3);class Ge{constructor(){this.field=$e.PDF417_GF}decode(t,e,n){let r=new Ve(this.field,t),i=new Int32Array(e),o=!1;for(let f=e;f>0;f--){let t=r.evaluateAt(this.field.exp(f));i[e-f]=t,0!==t&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(null!=n)for(const f of n){let e=this.field.exp(t.length-1-f),n=new Ve(this.field,new Int32Array([this.field.subtract(0,e),1]));s=s.multiply(n)}let a=new Ve(this.field,i),c=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),l=c[0],u=c[1],h=this.findErrorLocations(l),d=this.findErrorMagnitudes(u,l,h);for(let p=0;p<h.length;p++){let e=t.length-1-this.field.log(h[p]);if(e<0)throw f.getChecksumInstance();t[e]=this.field.subtract(t[e],d[p])}return h.length}runEuclideanAlgorithm(t,e,n){if(t.getDegree()<e.getDegree()){let n=t;t=e,e=n}let r=t,i=e,o=this.field.getZero(),s=this.field.getOne();while(i.getDegree()>=Math.round(n/2)){let t=r,e=o;if(r=i,o=s,r.isZero())throw f.getChecksumInstance();i=t;let n=this.field.getZero(),a=r.getCoefficient(r.getDegree()),c=this.field.inverse(a);while(i.getDegree()>=r.getDegree()&&!i.isZero()){let t=i.getDegree()-r.getDegree(),e=this.field.multiply(i.getCoefficient(i.getDegree()),c);n=n.add(this.field.buildMonomial(t,e)),i=i.subtract(r.multiplyByMonomial(t,e))}s=n.multiply(o).subtract(e).negative()}let a=s.getCoefficient(0);if(0===a)throw f.getChecksumInstance();let c=this.field.inverse(a),l=s.multiply(c),u=i.multiply(c);return[l,u]}findErrorLocations(t){let e=t.getDegree(),n=new Int32Array(e),r=0;for(let i=1;i<this.field.getSize()&&r<e;i++)0===t.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==e)throw f.getChecksumInstance();return n}findErrorMagnitudes(t,e,n){let r=e.getDegree(),i=new Int32Array(r);for(let c=1;c<=r;c++)i[r-c]=this.field.multiply(c,e.getCoefficient(c));let o=new Ve(this.field,i),s=n.length,a=new Int32Array(s);for(let c=0;c<s;c++){let e=this.field.inverse(n[c]),r=this.field.subtract(0,t.evaluateAt(e)),i=this.field.inverse(o.evaluateAt(e));a[c]=this.field.multiply(r,i)}return a}}class Ye{constructor(t,e,n,r,i){t instanceof Ye?this.constructor_2(t):this.constructor_1(t,e,n,r,i)}constructor_1(t,e,n,r,i){const o=null==e||null==n,s=null==r||null==i;if(o&&s)throw new N;o?(e=new at(0,r.getY()),n=new at(0,i.getY())):s&&(r=new at(t.getWidth()-1,e.getY()),i=new at(t.getWidth()-1,n.getY())),this.image=t,this.topLeft=e,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(e.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(e.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new Ye(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(t>0){let e=n?this.topLeft:this.topRight,i=Math.trunc(e.getY()-t);i<0&&(i=0);let s=new at(e.getX(),i);n?r=s:o=s}if(e>0){let t=n?this.bottomLeft:this.bottomRight,r=Math.trunc(t.getY()+e);r>=this.image.getHeight()&&(r=this.image.getHeight()-1);let o=new at(t.getX(),r);n?i=o:s=o}return new Ye(this.image,r,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xe{constructor(t,e,n,r){this.columnCount=t,this.errorCorrectionLevel=r,this.rowCountUpperPart=e,this.rowCountLowerPart=n,this.rowCount=e+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qe{constructor(){this.buffer=""}static form(t,e){let n=-1;function r(t,r,i,o,s,a){if("%%"===t)return"%";if(void 0===e[++n])return;t=o?parseInt(o.substr(1)):void 0;let c,l=s?parseInt(s.substr(1)):void 0;switch(a){case"s":c=e[n];break;case"c":c=e[n][0];break;case"f":c=parseFloat(e[n]).toFixed(t);break;case"p":c=parseFloat(e[n]).toPrecision(t);break;case"e":c=parseFloat(e[n]).toExponential(t);break;case"x":c=parseInt(e[n]).toString(l||16);break;case"d":c=parseFloat(parseInt(e[n],l||10).toPrecision(t)).toFixed(0);break}c="object"===typeof c?JSON.stringify(c):(+c).toString(l);let u=parseInt(i),h=i&&i[0]+""==="0"?"0":" ";while(c.length<u)c=void 0!==r?c+h:h+c;return c}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,r)}format(t,...e){this.buffer+=qe.form(t,e)}toString(){return this.buffer}}class Ke{constructor(t){this.boundingBox=new Ye(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let n=1;n<Ke.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(t)-n;if(r>=0&&(e=this.codewords[r],null!=e))return e;if(r=this.imageRowToCodewordIndex(t)+n,r<this.codewords.length&&(e=this.codewords[r],null!=e))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new qe;let e=0;for(const n of this.codewords)null!=n?t.format("%3d: %3d|%3d%n",e++,n.getRowNumber(),n.getValue()):t.format("%3d:    |   %n",e++);return t.toString()}}Ke.MAX_NEARBY_DISTANCE=5;class Je{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>t?(t=i.getValue(),e=[],e.push(i.getKey())):i.getValue()===t&&e.push(i.getKey())}return ze.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class Ze extends Ke{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,c=1,l=0;for(let u=o;u<s;u++){if(null==e[u])continue;let n=e[u],r=n.getRowNumber()-a;if(0===r)l++;else if(1===r)c=Math.max(c,l),l=1,a=n.getRowNumber();else if(r<0||n.getRowNumber()>=t.getRowCount()||r>u)e[u]=null;else{let t;t=c>2?(c-2)*r:r;let i=t>=u;for(let n=1;n<=t&&!i;n++)i=null!=e[u-n];i?e[u]=null:(a=n.getRowNumber(),l=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let n of this.getCodewords())if(null!=n){let t=n.getRowNumber();if(t>=e.length)continue;e[t]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),n=this._isLeft?e.getTopLeft():e.getTopRight(),r=this._isLeft?e.getBottomLeft():e.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.getCodewords(),a=-1;for(let c=i;c<o;c++){if(null==s[c])continue;let e=s[c];e.setRowNumberAsRowIndicatorColumn();let n=e.getRowNumber()-a;0===n||(1===n?a=e.getRowNumber():e.getRowNumber()>=t.getRowCount()?s[c]=null:a=e.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new Je,n=new Je,r=new Je,i=new Je;for(let s of t){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let t=s.getValue()%30,o=s.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:n.setValue(3*t+1);break;case 1:i.setValue(t/3),r.setValue(t%3);break;case 2:e.setValue(t+1);break}}if(0===e.getValue().length||0===n.getValue().length||0===r.getValue().length||0===i.getValue().length||e.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ze.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ze.MAX_ROWS_IN_BARCODE)return null;let o=new Xe(e.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(t,o),o}removeIncorrectCodewords(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(null==t[n])continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>e.getRowCount())t[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==e.getRowCountUpperPart()&&(t[n]=null);break;case 1:Math.trunc(i/3)===e.getErrorCorrectionLevel()&&i%3===e.getRowCountLowerPart()||(t[n]=null);break;case 2:i+1!==e.getColumnCount()&&(t[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Qe{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t,e=ze.MAX_CODEWORDS_IN_BARCODE;do{t=e,e=this.adjustRowNumbersAndGetCount()}while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let e=1;e<this.barcodeColumnCount+1;e++){let t=this.detectionResultColumns[e].getCodewords();for(let n=0;n<t.length;n++)null!=t[n]&&(t[n].hasValidRowNumber()||this.adjustRowNumbers(e,n,t))}return t}adjustRowNumbersByRow(){this.adjustRowNumbersFromBothRI();let t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++)if(null!=t[n]&&null!=e[n]&&t[n].getRowNumber()===e[n].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let r=this.detectionResultColumns[e].getCodewords()[n];null!=r&&(r.setRowNumber(t[n].getRowNumber()),r.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++){if(null==e[n])continue;let r=e[n].getRowNumber(),i=0;for(let e=this.barcodeColumnCount+1;e>0&&i<this.ADJUST_ROW_NUMBER_SKIP;e--){let o=this.detectionResultColumns[e].getCodewords()[n];null!=o&&(i=Qe.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let n=0;n<e.length;n++){if(null==e[n])continue;let r=e[n].getRowNumber(),i=0;for(let e=1;e<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;e++){let o=this.detectionResultColumns[e].getCodewords()[n];null!=o&&(i=Qe.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,e,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(t)?(n.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,n){if(!this.detectionResultColumns[t-1])return;let r=n[e],i=this.detectionResultColumns[t-1].getCodewords(),o=i;null!=this.detectionResultColumns[t+1]&&(o=this.detectionResultColumns[t+1].getCodewords());let s=new Array(14);s[2]=i[e],s[3]=o[e],e>0&&(s[0]=n[e-1],s[4]=i[e-1],s[5]=o[e-1]),e>1&&(s[8]=n[e-2],s[10]=i[e-2],s[11]=o[e-2]),e<n.length-1&&(s[1]=n[e+1],s[6]=i[e+1],s[7]=o[e+1]),e<n.length-2&&(s[9]=n[e+2],s[12]=i[e+2],s[13]=o[e+2]);for(let a of s)if(Qe.adjustRowNumber(r,a))return}static adjustRowNumber(t,e){return null!=e&&(!(!e.hasValidRowNumber()||e.getBucket()!==t.getBucket())&&(t.setRowNumber(e.getRowNumber()),!0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new qe;for(let n=0;n<t.getCodewords().length;n++){e.format("CW %3d:",n);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let r=this.detectionResultColumns[t].getCodewords()[n];null!=r?e.format(" %3d|%3d",r.getRowNumber(),r.getValue()):e.format("    |   ")}e.format("%n")}return e.toString()}}class tn{constructor(t,e,n,r){this.rowNumber=tn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==tn.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}tn.BARCODE_ROW_UNKNOWN=-1;class en{static initialize(){for(let t=0;t<ze.SYMBOL_TABLE.length;t++){let e=ze.SYMBOL_TABLE[t],n=1&e;for(let r=0;r<ze.BARS_IN_MODULE;r++){let i=0;while((1&e)===n)i+=1,e>>=1;n=1&e,en.RATIOS_TABLE[t]||(en.RATIOS_TABLE[t]=new Array(ze.BARS_IN_MODULE)),en.RATIOS_TABLE[t][ze.BARS_IN_MODULE-r-1]=Math.fround(i/ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=en.getDecodedCodewordValue(en.sampleBitCounts(t));return-1!==e?e:en.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=ot.sum(t),n=new Int32Array(ze.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<ze.MODULES_IN_CODEWORD;o++){let s=e/(2*ze.MODULES_IN_CODEWORD)+o*e/ze.MODULES_IN_CODEWORD;i+t[r]<=s&&(i+=t[r],r++),n[r]++}return n}static getDecodedCodewordValue(t){let e=en.getBitValue(t);return-1===ze.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let n=0;n<t.length;n++)for(let r=0;r<t[n];r++)e=e<<1|(n%2===0?1:0);return Math.trunc(e)}static getClosestDecodedValue(t){let e=ot.sum(t),n=new Array(ze.BARS_IN_MODULE);if(e>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(t[o]/e);let r=st.MAX_VALUE,i=-1;this.bSymbolTableReady||en.initialize();for(let o=0;o<en.RATIOS_TABLE.length;o++){let t=0,e=en.RATIOS_TABLE[o];for(let i=0;i<ze.BARS_IN_MODULE;i++){let o=Math.fround(e[i]-n[i]);if(t+=Math.fround(o*o),t>=r)break}t<r&&(r=t,i=ze.SYMBOL_TABLE[o])}return i}}en.bSymbolTableReady=!1,en.RATIOS_TABLE=new Array(ze.SYMBOL_TABLE.length).map((t=>new Array(ze.BARS_IN_MODULE)));class nn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class rn{static parseLong(t,e=undefined){return parseInt(t,e)}}class on extends l{}on.kind="NullPointerException";class sn{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,n){if(null==t)throw new on;if(e<0||e>t.length||n<0||e+n>t.length||e+n<0)throw new m;if(0!==n)for(let r=0;r<n;r++)this.write(t[e+r])}flush(){}close(){}}class an extends l{}class cn extends sn{constructor(t=32){if(super(),this.count=0,t<0)throw new h("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length,n=e<<1;if(n-t<0&&(n=t),n<0){if(t<0)throw new an;n=b.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,n)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,n){if(e<0||e>t.length||n<0||e+n-t.length>0)throw new m;this.ensureCapacity(this.count+n),g.arraycopy(t,e,this.buf,this.count,n),this.count+=n}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"===typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function ln(){if("undefined"!==typeof window)return window["BigInt"]||null;if("undefined"!==typeof n.g)return n.g["BigInt"]||null;if("undefined"!==typeof self)return self["BigInt"]||null;throw new Error("Can't search globals for BigInt!")}let un;function hn(t){if("undefined"===typeof un&&(un=ln()),null===un)throw new Error("BigInt is not supported!");return un(t)}function dn(){let t=[];t[0]=hn(1);let e=hn(900);t[1]=e;for(let n=2;n<16;n++)t[n]=t[n-1]*e;return t}(function(t){t[t["ALPHA"]=0]="ALPHA",t[t["LOWER"]=1]="LOWER",t[t["MIXED"]=2]="MIXED",t[t["PUNCT"]=3]="PUNCT",t[t["ALPHA_SHIFT"]=4]="ALPHA_SHIFT",t[t["PUNCT_SHIFT"]=5]="PUNCT_SHIFT"})(X||(X={}));class fn{static decode(t,e){let n=new M(""),r=S.ISO8859_1;n.enableDecoding(r);let i=1,o=t[i++],s=new nn;while(i<t[0]){switch(o){case fn.TEXT_COMPACTION_MODE_LATCH:i=fn.textCompaction(t,i,n);break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:i=fn.byteCompaction(o,t,r,i,n);break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i++]);break;case fn.NUMERIC_COMPACTION_MODE_LATCH:i=fn.numericCompaction(t,i,n);break;case fn.ECI_CHARSET:S.getCharacterSetECIByValue(t[i++]);break;case fn.ECI_GENERAL_PURPOSE:i+=2;break;case fn.ECI_USER_DEFINED:i++;break;case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=fn.decodeMacroBlock(t,i,s);break;case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:throw new C;default:i--,i=fn.textCompaction(t,i,n);break}if(!(i<t.length))throw C.getFormatInstance();o=t[i++]}if(0===n.length())throw C.getFormatInstance();let a=new K(null,n.toString(),null,e);return a.setOther(s),a}static decodeMacroBlock(t,e,n){if(e+fn.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw C.getFormatInstance();let r=new Int32Array(fn.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<fn.NUMBER_OF_SEQUENCE_CODEWORDS;s++,e++)r[s]=t[e];n.setSegmentIndex(b.parseInt(fn.decodeBase900toBase10(r,fn.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new M;e=fn.textCompaction(t,e,i),n.setFileId(i.toString());let o=-1;t[e]===fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=e+1);while(e<t[0])switch(t[e]){case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let r=new M;e=fn.textCompaction(t,e+1,r),n.setFileName(r.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new M;e=fn.textCompaction(t,e+1,i),n.setSender(i.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new M;e=fn.textCompaction(t,e+1,o),n.setAddressee(o.toString());break;case fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new M;e=fn.numericCompaction(t,e+1,s),n.setSegmentCount(b.parseInt(s.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new M;e=fn.numericCompaction(t,e+1,a),n.setTimestamp(rn.parseLong(a.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let c=new M;e=fn.numericCompaction(t,e+1,c),n.setChecksum(b.parseInt(c.toString()));break;case fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let l=new M;e=fn.numericCompaction(t,e+1,l),n.setFileSize(rn.parseLong(l.toString()));break;default:throw C.getFormatInstance()}break;case fn.MACRO_PDF417_TERMINATOR:e++,n.setLastSegment(!0);break;default:throw C.getFormatInstance()}if(-1!==o){let r=e-o;n.isLastSegment()&&r--,n.setOptionalData(w.copyOfRange(t,o,o+r))}return e}static textCompaction(t,e,n){let r=new Int32Array(2*(t[0]-e)),i=new Int32Array(2*(t[0]-e)),o=0,s=!1;while(e<t[0]&&!s){let n=t[e++];if(n<fn.TEXT_COMPACTION_MODE_LATCH)r[o]=n/30,r[o+1]=n%30,o+=2;else switch(n){case fn.TEXT_COMPACTION_MODE_LATCH:r[o++]=fn.TEXT_COMPACTION_MODE_LATCH;break;case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:e--,s=!0;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,n=t[e++],i[o]=n,o++;break}}return fn.decodeTextCompaction(r,i,o,n),e}static decodeTextCompaction(t,e,n,r){let i=X.ALPHA,o=X.ALPHA,s=0;while(s<n){let n=t[s],a="";switch(i){case X.ALPHA:if(n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.LL:i=X.LOWER;break;case fn.ML:i=X.MIXED;break;case fn.PS:o=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA;break}break;case X.LOWER:if(n<26)a=String.fromCharCode(97+n);else switch(n){case 26:a=" ";break;case fn.AS:o=i,i=X.ALPHA_SHIFT;break;case fn.ML:i=X.MIXED;break;case fn.PS:o=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA;break}break;case X.MIXED:if(n<fn.PL)a=fn.MIXED_CHARS[n];else switch(n){case fn.PL:i=X.PUNCT;break;case 26:a=" ";break;case fn.LL:i=X.LOWER;break;case fn.AL:i=X.ALPHA;break;case fn.PS:o=i,i=X.PUNCT_SHIFT;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA;break}break;case X.PUNCT:if(n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=X.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA;break}break;case X.ALPHA_SHIFT:if(i=o,n<26)a=String.fromCharCode(65+n);else switch(n){case 26:a=" ";break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA;break}break;case X.PUNCT_SHIFT:if(i=o,n<fn.PAL)a=fn.PUNCT_CHARS[n];else switch(n){case fn.PAL:i=X.ALPHA;break;case fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[s]);break;case fn.TEXT_COMPACTION_MODE_LATCH:i=X.ALPHA;break}break}""!==a&&r.append(a),s++}}static byteCompaction(t,e,n,r,i){let o=new cn,s=0,a=0,c=!1;switch(t){case fn.BYTE_COMPACTION_MODE_LATCH:let t=new Int32Array(6),n=e[r++];while(r<e[0]&&!c)switch(t[s++]=n,a=900*a+n,n=e[r++],n){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,c=!0;break;default:if(s%5===0&&s>0){for(let t=0;t<6;++t)o.write(Number(hn(a)>>hn(8*(5-t))));a=0,s=0}break}r===e[0]&&n<fn.TEXT_COMPACTION_MODE_LATCH&&(t[s++]=n);for(let e=0;e<s;e++)o.write(t[e]);break;case fn.BYTE_COMPACTION_MODE_LATCH_6:while(r<e[0]&&!c){let t=e[r++];if(t<fn.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+t;else switch(t){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.NUMERIC_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:r--,c=!0;break}if(s%5===0&&s>0){for(let t=0;t<6;++t)o.write(Number(hn(a)>>hn(8*(5-t))));a=0,s=0}}break}return i.append(T.decode(o.toByteArray(),n)),r}static numericCompaction(t,e,n){let r=0,i=!1,o=new Int32Array(fn.MAX_NUMERIC_CODEWORDS);while(e<t[0]&&!i){let s=t[e++];if(e===t[0]&&(i=!0),s<fn.TEXT_COMPACTION_MODE_LATCH)o[r]=s,r++;else switch(s){case fn.TEXT_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH:case fn.BYTE_COMPACTION_MODE_LATCH_6:case fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fn.MACRO_PDF417_TERMINATOR:e--,i=!0;break}(r%fn.MAX_NUMERIC_CODEWORDS===0||s===fn.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(fn.decodeBase900toBase10(o,r)),r=0)}return e}static decodeBase900toBase10(t,e){let n=hn(0);for(let i=0;i<e;i++)n+=fn.EXP900[e-i-1]*hn(t[i]);let r=n.toString();if("1"!==r.charAt(0))throw new C;return r.substring(1)}}fn.TEXT_COMPACTION_MODE_LATCH=900,fn.BYTE_COMPACTION_MODE_LATCH=901,fn.NUMERIC_COMPACTION_MODE_LATCH=902,fn.BYTE_COMPACTION_MODE_LATCH_6=924,fn.ECI_USER_DEFINED=925,fn.ECI_GENERAL_PURPOSE=926,fn.ECI_CHARSET=927,fn.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fn.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fn.MACRO_PDF417_TERMINATOR=922,fn.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fn.MAX_NUMERIC_CODEWORDS=15,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fn.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fn.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fn.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fn.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fn.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fn.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fn.PL=25,fn.LL=27,fn.AS=27,fn.ML=28,fn.AL=28,fn.PS=29,fn.PAL=29,fn.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",fn.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",fn.EXP900=ln()?dn():[],fn.NUMBER_OF_SEQUENCE_CODEWORDS=2;class pn{constructor(){}static decode(t,e,n,r,i,o,s){let a,c=new Ye(t,e,n,r,i),l=null,u=null;for(let f=!0;;f=!1){if(null!=e&&(l=pn.getRowIndicatorColumn(t,c,e,!0,o,s)),null!=r&&(u=pn.getRowIndicatorColumn(t,c,r,!1,o,s)),a=pn.merge(l,u),null==a)throw N.getNotFoundInstance();let n=a.getBoundingBox();if(!f||null==n||!(n.getMinY()<c.getMinY()||n.getMaxY()>c.getMaxY()))break;c=n}a.setBoundingBox(c);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,l),a.setDetectionResultColumn(h,u);let d=null!=l;for(let f=1;f<=h;f++){let e,n=d?f:h-f;if(void 0!==a.getDetectionResultColumn(n))continue;e=0===n||n===h?new Ze(c,0===n):new Ke(c),a.setDetectionResultColumn(n,e);let r=-1,i=r;for(let l=c.getMinY();l<=c.getMaxY();l++){if(r=pn.getStartColumn(a,n,l,d),r<0||r>c.getMaxX()){if(-1===i)continue;r=i}let u=pn.detectCodeword(t,c.getMinX(),c.getMaxX(),d,r,l,o,s);null!=u&&(e.setCodeword(l,u),i=r,o=Math.min(o,u.getWidth()),s=Math.max(s,u.getWidth()))}}return pn.createDecoderResult(a)}static merge(t,e){if(null==t&&null==e)return null;let n=pn.getBarcodeMetadata(t,e);if(null==n)return null;let r=Ye.merge(pn.adjustBoundingBox(t),pn.adjustBoundingBox(e));return new Qe(n,r)}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let n=pn.getMax(e),r=0;for(let s of e)if(r+=n-s,s>0)break;let i=t.getCodewords();for(let s=0;r>0&&null==i[s];s++)r--;let o=0;for(let s=e.length-1;s>=0;s--)if(o+=n-e[s],e[s]>0)break;for(let s=i.length-1;o>0&&null==i[s];s--)o--;return t.getBoundingBox().addMissingRows(r,o,t.isLeft())}static getMax(t){let e=-1;for(let n of t)e=Math.max(e,n);return e}static getBarcodeMetadata(t,e){let n,r;return null==t||null==(n=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(r=e.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(t,e,n,r,i,o){let s=new Ze(e,r);for(let a=0;a<2;a++){let c=0===a?1:-1,l=Math.trunc(Math.trunc(n.getX()));for(let a=Math.trunc(Math.trunc(n.getY()));a<=e.getMaxY()&&a>=e.getMinY();a+=c){let e=pn.detectCodeword(t,0,t.getWidth(),r,l,a,i,o);null!=e&&(s.setCodeword(a,e),l=r?e.getStartX():e.getEndX())}}return s}static adjustCodewordCount(t,e){let n=e[0][1],r=n.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-pn.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===r.length){if(i<1||i>ze.MAX_CODEWORDS_IN_BARCODE)throw N.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(t){let e=pn.createBarcodeMatrix(t);pn.adjustCodewordCount(t,e);let n=new Array,r=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],o=new Array;for(let a=0;a<t.getBarcodeRowCount();a++)for(let s=0;s<t.getBarcodeColumnCount();s++){let c=e[a][s+1].getValue(),l=a*t.getBarcodeColumnCount()+s;0===c.length?n.push(l):1===c.length?r[l]=c[0]:(o.push(l),i.push(c))}let s=new Array(i.length);for(let a=0;a<s.length;a++)s[a]=i[a];return pn.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),r,ze.toIntArray(n),ze.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(t,e,n,r,i){let o=new Int32Array(r.length),s=100;while(s-- >0){for(let t=0;t<o.length;t++)e[r[t]]=i[t][o[t]];try{return pn.decodeCodewords(e,t,n)}catch(a){let t=a instanceof f;if(!t)throw a}if(0===o.length)throw f.getChecksumInstance();for(let t=0;t<o.length;t++){if(o[t]<i[t].length-1){o[t]++;break}if(o[t]=0,t===o.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},(()=>new Array(t.getBarcodeColumnCount()+2)));for(let r=0;r<e.length;r++)for(let t=0;t<e[r].length;t++)e[r][t]=new Je;let n=0;for(let r of t.getDetectionResultColumns()){if(null!=r)for(let t of r.getCodewords())if(null!=t){let r=t.getRowNumber();if(r>=0){if(r>=e.length)continue;e[r][n].setValue(t.getValue())}}n++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,n,r){let i=r?1:-1,o=null;if(pn.isValidBarcodeColumn(t,e-i)&&(o=t.getDetectionResultColumn(e-i).getCodeword(n)),null!=o)return r?o.getEndX():o.getStartX();if(o=t.getDetectionResultColumn(e).getCodewordNearby(n),null!=o)return r?o.getStartX():o.getEndX();if(pn.isValidBarcodeColumn(t,e-i)&&(o=t.getDetectionResultColumn(e-i).getCodewordNearby(n)),null!=o)return r?o.getEndX():o.getStartX();let s=0;while(pn.isValidBarcodeColumn(t,e-i)){e-=i;for(let n of t.getDetectionResultColumn(e).getCodewords())if(null!=n)return(r?n.getEndX():n.getStartX())+i*s*(n.getEndX()-n.getStartX());s++}return r?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,n,r,i,o,s,a){i=pn.adjustCodewordStartColumn(t,e,n,r,i,o);let c,l=pn.getModuleBitCount(t,e,n,r,i,o);if(null==l)return null;let u=ot.sum(l);if(r)c=i+u;else{for(let t=0;t<l.length/2;t++){let e=l[t];l[t]=l[l.length-1-t],l[l.length-1-t]=e}c=i,i=c-u}if(!pn.checkCodewordSkew(u,s,a))return null;let h=en.getDecodedValue(l),d=ze.getCodeword(h);return-1===d?null:new tn(i,c,pn.getCodewordBucketNumber(h),d)}static getModuleBitCount(t,e,n,r,i,o){let s=i,a=new Int32Array(8),c=0,l=r?1:-1,u=r;while((r?s<n:s>=e)&&c<a.length)t.get(s,o)===u?(a[c]++,s+=l):(c++,u=!u);return c===a.length||s===(r?n:e)&&c===a.length-1?a:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,n,r,i,o){let s=i,a=r?-1:1;for(let c=0;c<2;c++){while((r?s>=e:s<n)&&r===t.get(s,o)){if(Math.abs(i-s)>pn.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,r=!r}return s}static checkCodewordSkew(t,e,n){return e-pn.CODEWORD_SKEW_SIZE<=t&&t<=n+pn.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,n){if(0===t.length)throw C.getFormatInstance();let r=1<<e+1,i=pn.correctErrors(t,n,r);pn.verifyCodewordCount(t,r);let o=fn.decode(t,""+e);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(t,e,n){if(null!=e&&e.length>n/2+pn.MAX_ERRORS||n<0||n>pn.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return pn.errorCorrection.decode(t,n,e)}static verifyCodewordCount(t,e){if(t.length<4)throw C.getFormatInstance();let n=t[0];if(n>t.length)throw C.getFormatInstance();if(0===n){if(!(e<t.length))throw C.getFormatInstance();t[0]=t.length-e}}static getBitCountForCodeword(t){let e=new Int32Array(8),n=0,r=e.length-1;while(1){if((1&t)!==n&&(n=1&t,r--,r<0))break;e[r]++,t>>=1}return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return pn.getCodewordBucketNumber(pn.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new qe;for(let n=0;n<t.length;n++){e.format("Row %2d: ",n);for(let r=0;r<t[n].length;r++){let i=t[n][r];0===i.getValue().length?e.format("        ",null):e.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}e.format("%n")}return e.toString()}}pn.CODEWORD_SKEW_SIZE=2,pn.MAX_ERRORS=3,pn.MAX_EC_CODEWORDS=512,pn.errorCorrection=new Ge;class gn{decode(t,e=null){let n=gn.decode(t,e,!1);if(null==n||0===n.length||null==n[0])throw N.getNotFoundInstance();return n[0]}decodeMultiple(t,e=null){try{return gn.decode(t,e,!0)}catch(n){if(n instanceof C||n instanceof f)throw N.getNotFoundInstance();throw n}}static decode(t,e,n){const r=new Array,i=je.detectMultiple(t,e,n);for(const o of i.getPoints()){const t=pn.decode(i.getBits(),o[4],o[5],o[6],o[7],gn.getMinCodewordWidth(o),gn.getMaxCodewordWidth(o)),e=new z(t.getText(),t.getRawBytes(),void 0,o,j.PDF_417);e.putMetadata(q.ERROR_CORRECTION_LEVEL,t.getECLevel());const n=t.getOther();null!=n&&e.putMetadata(q.PDF417_EXTRA_METADATA,n),r.push(e)}return r.map((t=>t))}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?b.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(gn.getMaxWidth(t[0],t[4]),gn.getMaxWidth(t[6],t[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(t[1],t[5]),gn.getMaxWidth(t[7],t[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(gn.getMinWidth(t[0],t[4]),gn.getMinWidth(t[6],t[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(t[1],t[5]),gn.getMinWidth(t[7],t[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class mn extends l{}mn.kind="ReaderException";class yn{constructor(t,e){this.verbose=!0===t,e&&this.setHints(e)}decode(t,e){return e&&this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const n=!e(t)&&!0===t.get(A.TRY_HARDER),r=e(t)?null:t.get(A.POSSIBLE_FORMATS),i=new Array;if(!e(r)){const e=r.some((t=>t===j.UPC_A||t===j.UPC_E||t===j.EAN_13||t===j.EAN_8||t===j.CODABAR||t===j.CODE_39||t===j.CODE_93||t===j.CODE_128||t===j.ITF||t===j.RSS_14||t===j.RSS_EXPANDED));e&&!n&&i.push(new ce(t,this.verbose)),r.includes(j.QR_CODE)&&i.push(new Ue),r.includes(j.DATA_MATRIX)&&i.push(new be),r.includes(j.AZTEC)&&i.push(new yt),r.includes(j.PDF_417)&&i.push(new gn),e&&n&&i.push(new ce(t,this.verbose))}0===i.length&&(n||i.push(new ce(t,this.verbose)),i.push(new Ue),i.push(new be),i.push(new yt),i.push(new gn),n&&i.push(new ce(t,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new mn("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(t,this.hints)}catch(e){if(e instanceof mn)continue}throw new N("No MultiFormat Readers were able to detect the code.")}}class wn extends U{constructor(t=null,e=500){const n=new yn;n.setHints(t),super(n,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class bn extends U{constructor(t=500){super(new gn,t)}}class vn extends U{constructor(t=500){super(new Ue,t)}}var En;(function(t){t[t["ERROR_CORRECTION"]=0]="ERROR_CORRECTION",t[t["CHARACTER_SET"]=1]="CHARACTER_SET",t[t["DATA_MATRIX_SHAPE"]=2]="DATA_MATRIX_SHAPE",t[t["MIN_SIZE"]=3]="MIN_SIZE",t[t["MAX_SIZE"]=4]="MAX_SIZE",t[t["MARGIN"]=5]="MARGIN",t[t["PDF417_COMPACT"]=6]="PDF417_COMPACT",t[t["PDF417_COMPACTION"]=7]="PDF417_COMPACTION",t[t["PDF417_DIMENSIONS"]=8]="PDF417_DIMENSIONS",t[t["AZTEC_LAYERS"]=9]="AZTEC_LAYERS",t[t["QR_VERSION"]=10]="QR_VERSION"})(En||(En={}));var An=En;class Cn{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Z(t,Int32Array.from([1])))}buildGenerator(t){const e=this.cachedGenerators;if(t>=e.length){let n=e[e.length-1];const r=this.field;for(let i=e.length;i<=t;i++){const t=n.multiply(new Z(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));e.push(t),n=t}}return e[t]}encode(t,e){if(0===e)throw new h("No error correction bytes");const n=t.length-e;if(n<=0)throw new h("No data bytes provided");const r=this.buildGenerator(e),i=new Int32Array(n);g.arraycopy(t,0,i,0,n);let o=new Z(this.field,i);o=o.multiplyByMonomial(e,1);const s=o.divide(r)[1],a=s.getCoefficients(),c=e-a.length;for(let l=0;l<c;l++)t[n+l]=0;g.arraycopy(a,0,t,n+c,a.length)}}class Sn{constructor(){}static applyMaskPenaltyRule1(t){return Sn.applyMaskPenaltyRule1Internal(t,!0)+Sn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0;const n=t.getArray(),r=t.getWidth(),i=t.getHeight();for(let o=0;o<i-1;o++){const t=n[o];for(let i=0;i<r-1;i++){const r=t[i];r===t[i+1]&&r===n[o+1][i]&&r===n[o+1][i+1]&&e++}}return Sn.N2*e}static applyMaskPenaltyRule3(t){let e=0;const n=t.getArray(),r=t.getWidth(),i=t.getHeight();for(let o=0;o<i;o++)for(let t=0;t<r;t++){const s=n[o];t+6<r&&1===s[t]&&0===s[t+1]&&1===s[t+2]&&1===s[t+3]&&1===s[t+4]&&0===s[t+5]&&1===s[t+6]&&(Sn.isWhiteHorizontal(s,t-4,t)||Sn.isWhiteHorizontal(s,t+7,t+11))&&e++,o+6<i&&1===n[o][t]&&0===n[o+1][t]&&1===n[o+2][t]&&1===n[o+3][t]&&1===n[o+4][t]&&0===n[o+5][t]&&1===n[o+6][t]&&(Sn.isWhiteVertical(n,t,o-4,o)||Sn.isWhiteVertical(n,t,o+7,o+11))&&e++}return e*Sn.N3}static isWhiteHorizontal(t,e,n){e=Math.max(e,0),n=Math.min(n,t.length);for(let r=e;r<n;r++)if(1===t[r])return!1;return!0}static isWhiteVertical(t,e,n,r){n=Math.max(n,0),r=Math.min(r,t.length);for(let i=n;i<r;i++)if(1===t[i][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0;const n=t.getArray(),r=t.getWidth(),i=t.getHeight();for(let a=0;a<i;a++){const t=n[a];for(let n=0;n<r;n++)1===t[n]&&e++}const o=t.getHeight()*t.getWidth(),s=Math.floor(10*Math.abs(2*e-o)/o);return s*Sn.N4}static getDataMaskBit(t,e,n){let r,i;switch(t){case 0:r=n+e&1;break;case 1:r=1&n;break;case 2:r=e%3;break;case 3:r=(n+e)%3;break;case 4:r=Math.floor(n/2)+Math.floor(e/3)&1;break;case 5:i=n*e,r=(1&i)+i%3;break;case 6:i=n*e,r=(1&i)+i%3&1;break;case 7:i=n*e,r=i%3+(n+e&1)&1;break;default:throw new h("Invalid mask pattern: "+t)}return 0===r}static applyMaskPenaltyRule1Internal(t,e){let n=0;const r=e?t.getHeight():t.getWidth(),i=e?t.getWidth():t.getHeight(),o=t.getArray();for(let s=0;s<r;s++){let t=0,r=-1;for(let a=0;a<i;a++){const i=e?o[s][a]:o[a][s];i===r?t++:(t>=5&&(n+=Sn.N1+(t-5)),t=1,r=i)}t>=5&&(n+=Sn.N1+(t-5))}return n}}Sn.N1=3,Sn.N2=3,Sn.N3=40,Sn.N4=10;class _n{constructor(t,e){this.width=t,this.height=e;const n=new Array(e);for(let r=0;r!==e;r++)n[r]=new Uint8Array(t);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,n){this.bytes[e][t]=n}setBoolean(t,e,n){this.bytes[e][t]=n?1:0}clear(t){for(const e of this.bytes)w.fill(e,t)}equals(t){if(!(t instanceof _n))return!1;const e=t;if(this.width!==e.width)return!1;if(this.height!==e.height)return!1;for(let n=0,r=this.height;n<r;++n){const t=this.bytes[n],r=e.bytes[n];for(let e=0,n=this.width;e<n;++e)if(t[e]!==r[e])return!1}return!0}toString(){const t=new M;for(let e=0,n=this.height;e<n;++e){const n=this.bytes[e];for(let e=0,r=this.width;e<r;++e)switch(n[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append("\n")}return t.toString()}}class Tn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new M;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Tn.NUM_MASK_PATTERNS}}Tn.NUM_MASK_PATTERNS=8;class In extends l{}In.kind="WriterException";class Mn{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,n,r,i){Mn.clearMatrix(i),Mn.embedBasicPatterns(n,i),Mn.embedTypeInfo(e,r,i),Mn.maybeEmbedVersionInfo(n,i),Mn.embedDataBits(t,r,i)}static embedBasicPatterns(t,e){Mn.embedPositionDetectionPatternsAndSeparators(e),Mn.embedDarkDotAtLeftBottomCorner(e),Mn.maybeEmbedPositionAdjustmentPatterns(t,e),Mn.embedTimingPatterns(e)}static embedTypeInfo(t,e,n){const r=new v;Mn.makeTypeInfoBits(t,e,r);for(let i=0,o=r.getSize();i<o;++i){const t=r.get(r.getSize()-1-i),e=Mn.TYPE_INFO_COORDINATES[i],o=e[0],s=e[1];if(n.setBoolean(o,s,t),i<8){const e=n.getWidth()-i-1,r=8;n.setBoolean(e,r,t)}else{const e=8,r=n.getHeight()-7+(i-8);n.setBoolean(e,r,t)}}}static maybeEmbedVersionInfo(t,e){if(t.getVersionNumber()<7)return;const n=new v;Mn.makeVersionInfoBits(t,n);let r=17;for(let i=0;i<6;++i)for(let t=0;t<3;++t){const o=n.get(r);r--,e.setBoolean(i,e.getHeight()-11+t,o),e.setBoolean(e.getHeight()-11+t,i,o)}}static embedDataBits(t,e,n){let r=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;while(o>0){6===o&&(o-=1);while(s>=0&&s<n.getHeight()){for(let i=0;i<2;++i){const a=o-i;if(!Mn.isEmpty(n.get(a,s)))continue;let c;r<t.getSize()?(c=t.get(r),++r):c=!1,255!==e&&Sn.getDataMaskBit(e,a,s)&&(c=!c),n.setBoolean(a,s,c)}s+=i}i=-i,s+=i,o-=2}if(r!==t.getSize())throw new In("Not all bits consumed: "+r+"/"+t.getSize())}static findMSBSet(t){return 32-b.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new h("0 polynomial");const n=Mn.findMSBSet(e);t<<=n-1;while(Mn.findMSBSet(t)>=n)t^=e<<Mn.findMSBSet(t)-n;return t}static makeTypeInfoBits(t,e,n){if(!Tn.isValidMaskPattern(e))throw new In("Invalid mask pattern");const r=t.getBits()<<3|e;n.appendBits(r,5);const i=Mn.calculateBCHCode(r,Mn.TYPE_INFO_POLY);n.appendBits(i,10);const o=new v;if(o.appendBits(Mn.TYPE_INFO_MASK_PATTERN,15),n.xor(o),15!==n.getSize())throw new In("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);const n=Mn.calculateBCHCode(t.getVersionNumber(),Mn.VERSION_INFO_POLY);if(e.appendBits(n,12),18!==e.getSize())throw new In("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){const n=(e+1)%2;Mn.isEmpty(t.get(e,6))&&t.setNumber(e,6,n),Mn.isEmpty(t.get(6,e))&&t.setNumber(6,e,n)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new In;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,n){for(let r=0;r<8;++r){if(!Mn.isEmpty(n.get(t+r,e)))throw new In;n.setNumber(t+r,e,0)}}static embedVerticalSeparationPattern(t,e,n){for(let r=0;r<7;++r){if(!Mn.isEmpty(n.get(t,e+r)))throw new In;n.setNumber(t,e+r,0)}}static embedPositionAdjustmentPattern(t,e,n){for(let r=0;r<5;++r){const i=Mn.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(t+o,e+r,i[o])}}static embedPositionDetectionPattern(t,e,n){for(let r=0;r<7;++r){const i=Mn.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(t+o,e+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(t){const e=Mn.POSITION_DETECTION_PATTERN[0].length;Mn.embedPositionDetectionPattern(0,0,t),Mn.embedPositionDetectionPattern(t.getWidth()-e,0,t),Mn.embedPositionDetectionPattern(0,t.getWidth()-e,t);const n=8;Mn.embedHorizontalSeparationPattern(0,n-1,t),Mn.embedHorizontalSeparationPattern(t.getWidth()-n,n-1,t),Mn.embedHorizontalSeparationPattern(0,t.getWidth()-n,t);const r=7;Mn.embedVerticalSeparationPattern(r,0,t),Mn.embedVerticalSeparationPattern(t.getHeight()-r-1,0,t),Mn.embedVerticalSeparationPattern(r,t.getHeight()-r,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(t.getVersionNumber()<2)return;const n=t.getVersionNumber()-1,r=Mn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){const t=r[i];if(t>=0)for(let n=0;n!==o;n++){const i=r[n];i>=0&&Mn.isEmpty(e.get(i,t))&&Mn.embedPositionAdjustmentPattern(i-2,t-2,e)}}}}Mn.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Mn.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Mn.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Mn.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Mn.VERSION_INFO_POLY=7973,Mn.TYPE_INFO_POLY=1335,Mn.TYPE_INFO_MASK_PATTERN=21522;class kn{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Nn{constructor(){}static calculateMaskPenalty(t){return Sn.applyMaskPenaltyRule1(t)+Sn.applyMaskPenaltyRule2(t)+Sn.applyMaskPenaltyRule3(t)+Sn.applyMaskPenaltyRule4(t)}static encode(t,e,n=null){let r=Nn.DEFAULT_BYTE_MODE_ENCODING;const i=null!==n&&void 0!==n.get(An.CHARACTER_SET);i&&(r=n.get(An.CHARACTER_SET).toString());const o=this.chooseMode(t,r),s=new v;if(o===ke.BYTE&&(i||Nn.DEFAULT_BYTE_MODE_ENCODING!==r)){const t=S.getCharacterSetECIByName(r);void 0!==t&&this.appendECI(t,s)}this.appendModeInfo(o,s);const a=new v;let c;if(this.appendBytes(t,o,a,r),null!==n&&void 0!==n.get(An.QR_VERSION)){const t=Number.parseInt(n.get(An.QR_VERSION).toString(),10);c=_e.getVersionForNumber(t);const r=this.calculateBitsNeeded(o,s,a,c);if(!this.willFit(r,c,e))throw new In("Data too big for requested version")}else c=this.recommendVersion(e,o,s,a);const l=new v;l.appendBitArray(s);const u=o===ke.BYTE?a.getSizeInBytes():t.length;this.appendLengthInfo(u,c,o,l),l.appendBitArray(a);const h=c.getECBlocksForLevel(e),d=c.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,l);const f=this.interleaveWithECBytes(l,c.getTotalCodewords(),d,h.getNumBlocks()),p=new Tn;p.setECLevel(e),p.setMode(o),p.setVersion(c);const g=c.getDimensionForVersion(),m=new _n(g,g),y=this.chooseMaskPattern(f,e,c,m);return p.setMaskPattern(y),Mn.buildMatrix(f,e,c,y,m),p.setMatrix(m),p}static recommendVersion(t,e,n,r){const i=this.calculateBitsNeeded(e,n,r,_e.getVersionForNumber(1)),o=this.chooseVersion(i,t),s=this.calculateBitsNeeded(e,n,r,o);return this.chooseVersion(s,t)}static calculateBitsNeeded(t,e,n,r){return e.getSize()+t.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(t){return t<Nn.ALPHANUMERIC_TABLE.length?Nn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(S.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return ke.KANJI;let n=!1,r=!1;for(let i=0,o=t.length;i<o;++i){const e=t.charAt(i);if(Nn.isDigit(e))n=!0;else{if(-1===this.getAlphanumericCode(e.charCodeAt(0)))return ke.BYTE;r=!0}}return r?ke.ALPHANUMERIC:n?ke.NUMERIC:ke.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=T.encode(t,S.SJIS)}catch(r){return!1}const n=e.length;if(n%2!==0)return!1;for(let i=0;i<n;i+=2){const t=255&e[i];if((t<129||t>159)&&(t<224||t>235))return!1}return!0}static chooseMaskPattern(t,e,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<Tn.NUM_MASK_PATTERNS;s++){Mn.buildMatrix(t,e,n,s,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,o=s)}return o}static chooseVersion(t,e){for(let n=1;n<=40;n++){const r=_e.getVersionForNumber(n);if(Nn.willFit(t,r,e))return r}throw new In("Data too big")}static willFit(t,e,n){const r=e.getTotalCodewords(),i=e.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=r-o,a=(t+7)/8;return s>=a}static terminateBits(t,e){const n=8*t;if(e.getSize()>n)throw new In("data bits cannot fit in the QR Code"+e.getSize()+" > "+n);for(let o=0;o<4&&e.getSize()<n;++o)e.appendBit(!1);const r=7&e.getSize();if(r>0)for(let o=r;o<8;o++)e.appendBit(!1);const i=t-e.getSizeInBytes();for(let o=0;o<i;++o)e.appendBits(0===(1&o)?236:17,8);if(e.getSize()!==n)throw new In("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,n,r,i,o){if(r>=n)throw new In("Block ID too large");const s=t%n,a=n-s,c=Math.floor(t/n),l=c+1,u=Math.floor(e/n),h=u+1,d=c-u,f=l-h;if(d!==f)throw new In("EC bytes mismatch");if(n!==a+s)throw new In("RS blocks mismatch");if(t!==(u+d)*a+(h+f)*s)throw new In("Total bytes mismatch");r<a?(i[0]=u,o[0]=d):(i[0]=h,o[0]=f)}static interleaveWithECBytes(t,e,n,r){if(t.getSizeInBytes()!==n)throw new In("Number of bits and data bytes does not match");let i=0,o=0,s=0;const a=new Array;for(let l=0;l<r;++l){const c=new Int32Array(1),u=new Int32Array(1);Nn.getNumDataBytesAndNumECBytesForBlockID(e,n,r,l,c,u);const h=c[0],d=new Uint8Array(h);t.toBytes(8*i,d,0,h);const f=Nn.generateECBytes(d,u[0]);a.push(new kn(d,f)),o=Math.max(o,h),s=Math.max(s,f.length),i+=c[0]}if(n!==i)throw new In("Data bytes does not match offset");const c=new v;for(let l=0;l<o;++l)for(const t of a){const e=t.getDataBytes();l<e.length&&c.appendBits(e[l],8)}for(let l=0;l<s;++l)for(const t of a){const e=t.getErrorCorrectionBytes();l<e.length&&c.appendBits(e[l],8)}if(e!==c.getSizeInBytes())throw new In("Interleaving error: "+e+" and "+c.getSizeInBytes()+" differ.");return c}static generateECBytes(t,e){const n=t.length,r=new Int32Array(n+e);for(let o=0;o<n;o++)r[o]=255&t[o];new Cn(tt.QR_CODE_FIELD_256).encode(r,e);const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=r[n+o];return i}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,n,r){const i=n.getCharacterCountBits(e);if(t>=1<<i)throw new In(t+" is bigger than "+((1<<i)-1));r.appendBits(t,i)}static appendBytes(t,e,n,r){switch(e){case ke.NUMERIC:Nn.appendNumericBytes(t,n);break;case ke.ALPHANUMERIC:Nn.appendAlphanumericBytes(t,n);break;case ke.BYTE:Nn.append8BitBytes(t,n,r);break;case ke.KANJI:Nn.appendKanjiBytes(t,n);break;default:throw new In("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const e=Nn.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){const n=t.length;let r=0;while(r<n){const i=Nn.getDigit(t.charAt(r));if(r+2<n){const n=Nn.getDigit(t.charAt(r+1)),o=Nn.getDigit(t.charAt(r+2));e.appendBits(100*i+10*n+o,10),r+=3}else if(r+1<n){const n=Nn.getDigit(t.charAt(r+1));e.appendBits(10*i+n,7),r+=2}else e.appendBits(i,4),r++}}static appendAlphanumericBytes(t,e){const n=t.length;let r=0;while(r<n){const i=Nn.getAlphanumericCode(t.charCodeAt(r));if(-1===i)throw new In;if(r+1<n){const n=Nn.getAlphanumericCode(t.charCodeAt(r+1));if(-1===n)throw new In;e.appendBits(45*i+n,11),r+=2}else e.appendBits(i,6),r++}}static append8BitBytes(t,e,n){let r;try{r=T.encode(t,n)}catch(i){throw new In(i)}for(let o=0,s=r.length;o!==s;o++){const t=r[o];e.appendBits(t,8)}}static appendKanjiBytes(t,e){let n;try{n=T.encode(t,S.SJIS)}catch(i){throw new In(i)}const r=n.length;for(let o=0;o<r;o+=2){const t=255&n[o],r=255&n[o+1],i=t<<8&4294967295|r;let s=-1;if(i>=33088&&i<=40956?s=i-33088:i>=57408&&i<=60351&&(s=i-49472),-1===s)throw new In("Invalid byte sequence");const a=192*(s>>8)+(255&s);e.appendBits(a,13)}}static appendECI(t,e){e.appendBits(ke.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}Nn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Nn.DEFAULT_BYTE_MODE_ENCODING=S.UTF8.getName();class On{write(t,e,n,r=null){if(0===t.length)throw new h("Found empty contents");if(e<0||n<0)throw new h("Requested dimensions are too small: "+e+"x"+n);let i=Ee.L,o=On.QUIET_ZONE_SIZE;null!==r&&(void 0!==r.get(An.ERROR_CORRECTION)&&(i=Ee.fromString(r.get(An.ERROR_CORRECTION).toString())),void 0!==r.get(An.MARGIN)&&(o=Number.parseInt(r.get(An.MARGIN).toString(),10)));const s=Nn.encode(t,i,r);return this.renderResult(s,e,n,o)}writeToDom(t,e,n,r,i=null){"string"===typeof t&&(t=document.querySelector(t));const o=this.write(e,n,r,i);t&&t.appendChild(o)}renderResult(t,e,n,r){const i=t.getMatrix();if(null===i)throw new nt;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,c=s+2*r,l=Math.max(e,a),u=Math.max(n,c),h=Math.min(Math.floor(l/a),Math.floor(u/c)),d=Math.floor((l-o*h)/2),f=Math.floor((u-s*h)/2),p=this.createSVGElement(l,u);for(let g=0,m=f;g<s;g++,m+=h)for(let t=0,e=d;t<o;t++,e+=h)if(1===i.get(t,g)){const t=this.createSvgRectElement(e,m,h,h);p.appendChild(t)}return p}createSVGElement(t,e){const n=document.createElementNS(On.SVG_NS,"svg");return n.setAttributeNS(null,"height",t.toString()),n.setAttributeNS(null,"width",e.toString()),n}createSvgRectElement(t,e,n,r){const i=document.createElementNS(On.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",e.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}On.QUIET_ZONE_SIZE=4,On.SVG_NS="http://www.w3.org/2000/svg";class Dn{encode(t,e,n,r,i){if(0===t.length)throw new h("Found empty contents");if(e!==j.QR_CODE)throw new h("Can only encode QR_CODE, but got "+e);if(n<0||r<0)throw new h(`Requested dimensions are too small: ${n}x${r}`);let o=Ee.L,s=Dn.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(An.ERROR_CORRECTION)&&(o=Ee.fromString(i.get(An.ERROR_CORRECTION).toString())),void 0!==i.get(An.MARGIN)&&(s=Number.parseInt(i.get(An.MARGIN).toString(),10)));const a=Nn.encode(t,o,i);return Dn.renderResult(a,n,r,s)}static renderResult(t,e,n,r){const i=t.getMatrix();if(null===i)throw new nt;const o=i.getWidth(),s=i.getHeight(),a=o+2*r,c=s+2*r,l=Math.max(e,a),u=Math.max(n,c),h=Math.min(Math.floor(l/a),Math.floor(u/c)),d=Math.floor((l-o*h)/2),f=Math.floor((u-s*h)/2),p=new k(l,u);for(let g=0,m=f;g<s;g++,m+=h)for(let t=0,e=d;t<o;t++,e+=h)1===i.get(t,g)&&p.setRegion(e,m,h,h);return p}}Dn.QUIET_ZONE_SIZE=4;class xn{encode(t,e,n,r,i){let o;switch(e){case j.QR_CODE:o=new Dn;break;default:throw new h("No encoder available for format "+e)}return o.encode(t,e,n,r,i)}}class Rn extends x{constructor(t,e,n,r,i,o,s,a){if(super(o,s),this.yuvData=t,this.dataWidth=e,this.dataHeight=n,this.left=r,this.top=i,r+o>e||i+s>n)throw new h("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(o,s)}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const n=this.getWidth();(null===e||void 0===e||e.length<n)&&(e=new Uint8ClampedArray(n));const r=(t+this.top)*this.dataWidth+this.left;return g.arraycopy(this.yuvData,r,e,0,n),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;const n=t*e,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return g.arraycopy(this.yuvData,i,r,0,n),r;for(let o=0;o<e;o++){const e=o*t;g.arraycopy(this.yuvData,i,r,e,t),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(t,e,n,r){return new Rn(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,n,r,!1)}renderThumbnail(){const t=this.getWidth()/Rn.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/Rn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(t*e),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<e;o++){const e=o*t;for(let o=0;o<t;o++){const t=255&r[i+o*Rn.THUMBNAIL_SCALE_FACTOR];n[e+o]=4278190080|65793*t}i+=this.dataWidth*Rn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Rn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Rn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<e;r++,i+=this.dataWidth){const e=i+t/2;for(let r=i,o=i+t-1;r<e;r++,o--){const t=n[r];n[r]=n[o],n[o]=t}}}invert(){return new R(this)}}Rn.THUMBNAIL_SCALE_FACTOR=2;class Bn extends x{constructor(t,e,n,r,i,o,s){if(super(e,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=s,4===t.BYTES_PER_ELEMENT){const r=e*n,i=new Uint8ClampedArray(r);for(let e=0;e<r;e++){const n=t[e],r=n>>16&255,o=n>>7&510,s=255&n;i[e]=(r+o+s)/4&255}this.luminances=i}else this.luminances=t;if(void 0===r&&(this.dataWidth=e),void 0===i&&(this.dataHeight=n),void 0===o&&(this.left=0),void 0===s&&(this.top=0),this.left+e>this.dataWidth||this.top+n>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new h("Requested row is outside the image: "+t);const n=this.getWidth();(null===e||void 0===e||e.length<n)&&(e=new Uint8ClampedArray(n));const r=(t+this.top)*this.dataWidth+this.left;return g.arraycopy(this.luminances,r,e,0,n),e}getMatrix(){const t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;const n=t*e,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return g.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<e;o++){const e=o*t;g.arraycopy(this.luminances,i,r,e,t),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(t,e,n,r){return new Bn(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new R(this)}}class Ln extends S{static forName(t){return this.getCharacterSetECIByName(t)}}class Pn{}Pn.ISO_8859_1=S.ISO8859_1;class Fn{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Un{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class zn{constructor(t){this.previous=t}getPrevious(){return this.previous}}class Hn extends zn{constructor(t,e,n){super(t),this.value=e,this.bitCount=n}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new Hn(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Hn(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+b.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class jn extends Hn{constructor(t,e,n){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=n}appendTo(t,e){for(let n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):0===n?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+n],8)}addBinaryShift(t,e){return new jn(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vn(t,e,n){return new jn(t,e,n)}function Wn(t,e,n){return new Hn(t,e,n)}const $n=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gn=0,Yn=1,Xn=2,qn=3,Kn=4,Jn=new Hn(null,0,0),Zn=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Qn(t){for(let e of t)w.fill(e,-1);return t[Gn][Kn]=0,t[Yn][Kn]=0,t[Yn][Gn]=28,t[qn][Kn]=0,t[Xn][Kn]=0,t[Xn][Gn]=15,t}const tr=Qn(w.createInt32Array(6,6));class er{constructor(t,e,n,r){this.token=t,this.mode=e,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let n=this.bitCount,r=this.token;if(t!==this.mode){let e=Zn[this.mode][t];r=Wn(r,65535&e,e>>16),n+=e>>16}let i=t===Xn?4:5;return r=Wn(r,e,i),new er(r,t,0,n+i)}shiftAndAppend(t,e){let n=this.token,r=this.mode===Xn?4:5;return n=Wn(n,tr[this.mode][t],r),n=Wn(n,e,5),new er(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(t){let e=this.token,n=this.mode,r=this.bitCount;if(this.mode===Kn||this.mode===Xn){let t=Zn[n][Gn];e=Wn(e,65535&t,t>>16),r+=t>>16,n=Gn}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new er(e,n,this.binaryShiftByteCount+1,r+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(t+1)),o}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return e=Vn(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new er(e,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(Zn[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=er.calculateBinaryShiftCost(t)-er.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())e.unshift(r);let n=new v;for(const r of e)r.appendTo(n,t);return n}toString(){return I.format("%s bits=%d bytes=%d",$n[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}function nr(t){const e=I.getCharCode(" "),n=I.getCharCode("."),r=I.getCharCode(",");t[Gn][e]=1;const i=I.getCharCode("Z"),o=I.getCharCode("A");for(let d=o;d<=i;d++)t[Gn][d]=d-o+2;t[Yn][e]=1;const s=I.getCharCode("z"),a=I.getCharCode("a");for(let d=a;d<=s;d++)t[Yn][d]=d-a+2;t[Xn][e]=1;const c=I.getCharCode("9"),l=I.getCharCode("0");for(let d=l;d<=c;d++)t[Xn][d]=d-l+2;t[Xn][r]=12,t[Xn][n]=13;const u=["\0"," ","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","@","\\","^","_","`","|","~",""];for(let d=0;d<u.length;d++)t[qn][I.getCharCode(u[d])]=d;const h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let d=0;d<h.length;d++)I.getCharCode(h[d])>0&&(t[Kn][I.getCharCode(h[d])]=d);return t}er.INITIAL_STATE=new er(Jn,Gn,0,0);const rr=nr(w.createInt32Array(5,256));class ir{constructor(t){this.text=t}encode(){const t=I.getCharCode(" "),e=I.getCharCode("\n");let n=Un.singletonList(er.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let r,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case I.getCharCode("\r"):r=o===e?2:0;break;case I.getCharCode("."):r=o===t?3:0;break;case I.getCharCode(","):r=o===t?4:0;break;case I.getCharCode(":"):r=o===t?5:0;break;default:r=0}r>0?(n=ir.updateStateListForPair(n,i,r),i++):n=this.updateStateListForChar(n,i)}const r=Un.min(n,((t,e)=>t.getBitCount()-e.getBitCount()));return r.toBitArray(this.text)}updateStateListForChar(t,e){const n=[];for(let r of t)this.updateStateForChar(r,e,n);return ir.simplifyStates(n)}updateStateForChar(t,e,n){let r=255&this.text[e],i=rr[t.getMode()][r]>0,o=null;for(let s=0;s<=Kn;s++){let a=rr[s][r];if(a>0){if(null==o&&(o=t.endBinaryShift(e)),!i||s===t.getMode()||s===Xn){const t=o.latchAndAppend(s,a);n.push(t)}if(!i&&tr[t.getMode()][s]>=0){const t=o.shiftAndAppend(s,a);n.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===rr[t.getMode()][r]){let r=t.addBinaryShiftChar(e);n.push(r)}}static updateStateListForPair(t,e,n){const r=[];for(let i of t)this.updateStateForPair(i,e,n,r);return this.simplifyStates(r)}static updateStateForPair(t,e,n,r){let i=t.endBinaryShift(e);if(r.push(i.latchAndAppend(Kn,n)),t.getMode()!==Kn&&r.push(i.shiftAndAppend(Kn,n)),3===n||4===n){let t=i.latchAndAppend(Xn,16-n).latchAndAppend(Xn,1);r.push(t)}if(t.getBinaryShiftByteCount()>0){let n=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);r.push(n)}}static simplifyStates(t){let e=[];for(const n of t){let t=!0;for(const r of e){if(r.isBetterThanOrEqualTo(n)){t=!1;break}n.isBetterThanOrEqualTo(r)&&(e=e.filter((t=>t!==r)))}t&&e.push(n)}return e}}class or{constructor(){}static encodeBytes(t){return or.encode(t,or.DEFAULT_EC_PERCENT,or.DEFAULT_AZTEC_LAYERS)}static encode(t,e,n){let r,i,o,s,a,c=new ir(t).encode(),l=b.truncDivision(c.getSize()*e,100)+11,u=c.getSize()+l;if(n!==or.DEFAULT_AZTEC_LAYERS){if(r=n<0,i=Math.abs(n),i>(r?or.MAX_NB_BITS_COMPACT:or.MAX_NB_BITS))throw new h(I.format("Illegal value %s for layers",n));o=or.totalBitsInLayer(i,r),s=or.WORD_SIZE[i];let t=o-o%s;if(a=or.stuffBits(c,s),a.getSize()+l>t)throw new h("Data to large for user specified layer");if(r&&a.getSize()>64*s)throw new h("Data to large for user specified layer")}else{s=0,a=null;for(let t=0;;t++){if(t>or.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(r=t<=3,i=r?t+1:t,o=or.totalBitsInLayer(i,r),u>o)continue;null!=a&&s===or.WORD_SIZE[i]||(s=or.WORD_SIZE[i],a=or.stuffBits(c,s));let e=o-o%s;if(!(r&&a.getSize()>64*s)&&a.getSize()+l<=e)break}}let d,f=or.generateCheckWords(a,o,s),p=a.getSize()/s,g=or.generateModeMessage(r,i,p),m=(r?11:14)+4*i,y=new Int32Array(m);if(r){d=m;for(let t=0;t<y.length;t++)y[t]=t}else{d=m+1+2*b.truncDivision(b.truncDivision(m,2)-1,15);let t=b.truncDivision(m,2),e=b.truncDivision(d,2);for(let n=0;n<t;n++){let r=n+b.truncDivision(n,15);y[t-n-1]=e-r-1,y[t+n]=e+r+1}}let w=new k(d);for(let h=0,b=0;h<i;h++){let t=4*(i-h)+(r?9:12);for(let e=0;e<t;e++){let n=2*e;for(let r=0;r<2;r++)f.get(b+n+r)&&w.set(y[2*h+r],y[2*h+e]),f.get(b+2*t+n+r)&&w.set(y[2*h+e],y[m-1-2*h-r]),f.get(b+4*t+n+r)&&w.set(y[m-1-2*h-r],y[m-1-2*h-e]),f.get(b+6*t+n+r)&&w.set(y[m-1-2*h-e],y[2*h+r])}b+=8*t}if(or.drawModeMessage(w,r,d,g),r)or.drawBullsEye(w,b.truncDivision(d,2),5);else{or.drawBullsEye(w,b.truncDivision(d,2),7);for(let t=0,e=0;t<b.truncDivision(m,2)-1;t+=15,e+=16)for(let n=1&b.truncDivision(d,2);n<d;n+=2)w.set(b.truncDivision(d,2)-e,n),w.set(b.truncDivision(d,2)+e,n),w.set(n,b.truncDivision(d,2)-e),w.set(n,b.truncDivision(d,2)+e)}let v=new Fn;return v.setCompact(r),v.setSize(d),v.setLayers(i),v.setCodeWords(p),v.setMatrix(w),v}static drawBullsEye(t,e,n){for(let r=0;r<n;r+=2)for(let n=e-r;n<=e+r;n++)t.set(n,e-r),t.set(n,e+r),t.set(e-r,n),t.set(e+r,n);t.set(e-n,e-n),t.set(e-n+1,e-n),t.set(e-n,e-n+1),t.set(e+n,e-n),t.set(e+n,e-n+1),t.set(e+n,e+n-1)}static generateModeMessage(t,e,n){let r=new v;return t?(r.appendBits(e-1,2),r.appendBits(n-1,6),r=or.generateCheckWords(r,28,4)):(r.appendBits(e-1,5),r.appendBits(n-1,11),r=or.generateCheckWords(r,40,4)),r}static drawModeMessage(t,e,n,r){let i=b.truncDivision(n,2);if(e)for(let o=0;o<7;o++){let e=i-3+o;r.get(o)&&t.set(e,i-5),r.get(o+7)&&t.set(i+5,e),r.get(20-o)&&t.set(e,i+5),r.get(27-o)&&t.set(i-5,e)}else for(let o=0;o<10;o++){let e=i-5+o+b.truncDivision(o,5);r.get(o)&&t.set(e,i-7),r.get(o+10)&&t.set(i+7,e),r.get(29-o)&&t.set(e,i+7),r.get(39-o)&&t.set(i-7,e)}}static generateCheckWords(t,e,n){let r=t.getSize()/n,i=new Cn(or.getGF(n)),o=b.truncDivision(e,n),s=or.bitsToWords(t,n,o);i.encode(s,o-r);let a=e%n,c=new v;c.appendBits(0,a);for(const l of Array.from(s))c.appendBits(l,n);return c}static bitsToWords(t,e,n){let r,i,o=new Int32Array(n);for(r=0,i=t.getSize()/e;r<i;r++){let n=0;for(let i=0;i<e;i++)n|=t.get(r*e+i)?1<<e-i-1:0;o[r]=n}return o}static getGF(t){switch(t){case 4:return tt.AZTEC_PARAM;case 6:return tt.AZTEC_DATA_6;case 8:return tt.AZTEC_DATA_8;case 10:return tt.AZTEC_DATA_10;case 12:return tt.AZTEC_DATA_12;default:throw new h("Unsupported word size "+t)}}static stuffBits(t,e){let n=new v,r=t.getSize(),i=(1<<e)-2;for(let o=0;o<r;o+=e){let s=0;for(let n=0;n<e;n++)(o+n>=r||t.get(o+n))&&(s|=1<<e-1-n);(s&i)===i?(n.appendBits(s&i,e),o--):0===(s&i)?(n.appendBits(1|s,e),o--):n.appendBits(s,e)}return n}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}or.DEFAULT_EC_PERCENT=33,or.DEFAULT_AZTEC_LAYERS=0,or.MAX_NB_BITS=32,or.MAX_NB_BITS_COMPACT=4,or.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sr{encode(t,e,n,r){return this.encodeWithHints(t,e,n,r,null)}encodeWithHints(t,e,n,r,i){let o=Pn.ISO_8859_1,s=or.DEFAULT_EC_PERCENT,a=or.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(An.CHARACTER_SET)&&(o=Ln.forName(i.get(An.CHARACTER_SET).toString())),i.has(An.ERROR_CORRECTION)&&(s=b.parseInt(i.get(An.ERROR_CORRECTION).toString())),i.has(An.AZTEC_LAYERS)&&(a=b.parseInt(i.get(An.AZTEC_LAYERS).toString()))),sr.encodeLayers(t,e,n,r,o,s,a)}static encodeLayers(t,e,n,r,i,o,s){if(e!==j.AZTEC)throw new h("Can only encode AZTEC, but got "+e);let a=or.encode(I.getBytes(t,i),o,s);return sr.renderResult(a,n,r)}static renderResult(t,e,n){let r=t.getMatrix();if(null==r)throw new nt;let i=r.getWidth(),o=r.getHeight(),s=Math.max(e,i),a=Math.max(n,o),c=Math.min(s/i,a/o),l=(s-i*c)/2,u=(a-o*c)/2,h=new k(s,a);for(let d=0,f=u;d<o;d++,f+=c)for(let t=0,e=l;t<i;t++,e+=c)r.get(t,d)&&h.setRegion(e,f,c,c);return h}}t.AbstractExpandedDecoder=$t,t.ArgumentException=u,t.ArithmeticException=Q,t.AztecCode=Fn,t.AztecCodeReader=yt,t.AztecCodeWriter=sr,t.AztecDecoder=it,t.AztecDetector=mt,t.AztecDetectorResult=lt,t.AztecEncoder=or,t.AztecHighLevelEncoder=ir,t.AztecPoint=gt,t.BarcodeFormat=j,t.Binarizer=p,t.BinaryBitmap=d,t.BitArray=v,t.BitMatrix=k,t.BitSource=ge,t.BrowserAztecCodeReader=wt,t.BrowserBarcodeReader=le,t.BrowserCodeReader=U,t.BrowserDatamatrixCodeReader=ve,t.BrowserMultiFormatReader=wn,t.BrowserPDF417Reader=bn,t.BrowserQRCodeReader=vn,t.BrowserQRCodeSvgWriter=On,t.CharacterSetECI=S,t.ChecksumException=f,t.Code128Reader=vt,t.Code39Reader=Et,t.DataMatrixDecodedBitStreamParser=me,t.DataMatrixReader=be,t.DecodeHintType=A,t.DecoderResult=K,t.DefaultGridSampler=ft,t.DetectorResult=ct,t.EAN13Reader=Mt,t.EncodeHintType=An,t.Exception=l,t.FormatException=C,t.GenericGF=tt,t.GenericGFPoly=Z,t.GlobalHistogramBinarizer=O,t.GridSampler=ht,t.GridSamplerInstance=pt,t.HTMLCanvasElementLuminanceSource=B,t.HybridBinarizer=D,t.ITFReader=At,t.IllegalArgumentException=h,t.IllegalStateException=nt,t.InvertedLuminanceSource=R,t.LuminanceSource=x,t.MathUtils=ot,t.MultiFormatOneDReader=ce,t.MultiFormatReader=yn,t.MultiFormatWriter=xn,t.NotFoundException=N,t.OneDReader=bt,t.PDF417DecodedBitStreamParser=fn,t.PDF417DecoderErrorCorrection=Ge,t.PDF417Reader=gn,t.PDF417ResultMetadata=nn,t.PerspectiveTransform=dt,t.PlanarYUVLuminanceSource=Rn,t.QRCodeByteMatrix=_n,t.QRCodeDataMask=Te,t.QRCodeDecodedBitStreamParser=Ne,t.QRCodeDecoderErrorCorrectionLevel=Ee,t.QRCodeDecoderFormatInformation=Ae,t.QRCodeEncoder=Nn,t.QRCodeEncoderQRCode=Tn,t.QRCodeMaskUtil=Sn,t.QRCodeMatrixUtil=Mn,t.QRCodeMode=ke,t.QRCodeReader=Ue,t.QRCodeVersion=_e,t.QRCodeWriter=Dn,t.RGBLuminanceSource=Bn,t.RSS14Reader=ae,t.RSSExpandedReader=oe,t.ReaderException=mn,t.ReedSolomonDecoder=rt,t.ReedSolomonEncoder=Cn,t.ReedSolomonException=et,t.Result=z,t.ResultMetadataType=q,t.ResultPoint=at,t.StringUtils=I,t.UnsupportedOperationException=_,t.VideoInputDevice=L,t.WhiteRectangleDetector=ut,t.WriterException=In,t.ZXingArrays=w,t.ZXingCharset=Ln,t.ZXingInteger=b,t.ZXingStandardCharsets=Pn,t.ZXingStringBuilder=M,t.ZXingStringEncoding=T,t.ZXingSystem=g,t.createAbstractExpandedDecoder=ne,Object.defineProperty(t,"__esModule",{value:!0})}))},7055:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+h>=1?d/c:d*Math.pow(2,1-h),e*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*g}},9051:function(t,e,n){"use strict";n(7658);const{Buffer:r}=n(1547),i=Symbol.for("BufferList");function o(t){if(!(this instanceof o))return new o(t);o._init.call(this,t)}o._init=function(t){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,t&&this.append(t)},o.prototype._new=function(t){return new o(t)},o.prototype._offset=function(t){if(0===t)return[0,0];let e=0;for(let n=0;n<this._bufs.length;n++){const r=e+this._bufs[n].length;if(t<r||n===this._bufs.length-1)return[n,t-e];e=r}},o.prototype._reverseOffset=function(t){const e=t[0];let n=t[1];for(let r=0;r<e;r++)n+=this._bufs[r].length;return n},o.prototype.get=function(t){if(t>this.length||t<0)return;const e=this._offset(t);return this._bufs[e[0]][e[1]]},o.prototype.slice=function(t,e){return"number"===typeof t&&t<0&&(t+=this.length),"number"===typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},o.prototype.copy=function(t,e,n,i){if(("number"!==typeof n||n<0)&&(n=0),("number"!==typeof i||i>this.length)&&(i=this.length),n>=this.length)return t||r.alloc(0);if(i<=0)return t||r.alloc(0);const o=!!t,s=this._offset(n),a=i-n;let c=a,l=o&&e||0,u=s[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,l),l+=this._bufs[e].length;return t}if(c<=this._bufs[s[0]].length-u)return o?this._bufs[s[0]].copy(t,e,u,u+c):this._bufs[s[0]].slice(u,u+c);o||(t=r.allocUnsafe(a));for(let r=s[0];r<this._bufs.length;r++){const e=this._bufs[r].length-u;if(!(c>e)){this._bufs[r].copy(t,l,u,u+c),l+=e;break}this._bufs[r].copy(t,l,u),l+=e,c-=e,u&&(u=0)}return t.length>l?t.slice(0,l):t},o.prototype.shallowSlice=function(t,e){if(t=t||0,e="number"!==typeof e?this.length:e,t<0&&(t+=this.length),e<0&&(e+=this.length),t===e)return this._new();const n=this._offset(t),r=this._offset(e),i=this._bufs.slice(n[0],r[0]+1);return 0===r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!==n[1]&&(i[0]=i[0].slice(n[1])),this._new(i)},o.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},o.prototype.consume=function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const t=this._new();for(let e=0;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.append=function(t){if(null==t)return this;if(t.buffer)this._appendBuffer(r.from(t.buffer,t.byteOffset,t.byteLength));else if(Array.isArray(t))for(let e=0;e<t.length;e++)this.append(t[e]);else if(this._isBufferList(t))for(let e=0;e<t._bufs.length;e++)this.append(t._bufs[e]);else"number"===typeof t&&(t=t.toString()),this._appendBuffer(r.from(t));return this},o.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},o.prototype.indexOf=function(t,e,n){if(void 0===n&&"string"===typeof e&&(n=e,e=void 0),"function"===typeof t||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof t?t=r.from([t]):"string"===typeof t?t=r.from(t,n):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=r.from(t.buffer,t.byteOffset,t.byteLength):r.isBuffer(t)||(t=r.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),0===t.length)return e>this.length?this.length:e;const i=this._offset(e);let o=i[0],s=i[1];for(;o<this._bufs.length;o++){const e=this._bufs[o];while(s<e.length){const n=e.length-s;if(n>=t.length){const n=e.indexOf(t,s);if(-1!==n)return this._reverseOffset([o,n]);s=e.length-t.length+1}else{const e=this._reverseOffset([o,s]);if(this._match(e,t))return e;s++}}s=0}return-1},o.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let n=0;n<e.length;n++)if(this.get(t+n)!==e[n])return!1;return!0},function(){const t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const e in t)(function(e){null===t[e]?o.prototype[e]=function(t,n){return this.slice(t,t+n)[e](0,n)}:o.prototype[e]=function(n=0){return this.slice(n,n+t[e])[e](0)}})(e)}(),o.prototype._isBufferList=function(t){return t instanceof o||o.isBufferList(t)},o.isBufferList=function(t){return null!=t&&t[i]},t.exports=o},1547:function(t,e,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */n(3767),n(8585),n(8696),n(7658);const r=n(1271),i=n(7055),o="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}function c(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return u(t,e,n)}function u(t,e,n){if("string"===typeof t)return p(t,e);if(ArrayBuffer.isView(t))return m(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(st(t,ArrayBuffer)||t&&st(t.buffer,ArrayBuffer))return y(t,e,n);if("undefined"!==typeof SharedArrayBuffer&&(st(t,SharedArrayBuffer)||t&&st(t.buffer,SharedArrayBuffer)))return y(t,e,n);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);const i=w(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t,e,n){return h(t),t<=0?c(t):void 0!==e?"string"===typeof n?c(t).fill(e,n):c(t).fill(e):c(t)}function f(t){return h(t),c(t<0?0:0|b(t))}function p(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|E(t,e);let r=c(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function g(t){const e=t.length<0?0:0|b(t.length),n=c(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function m(t){if(st(t,Uint8Array)){const e=new Uint8Array(t);return y(e.buffer,e.byteOffset,e.byteLength)}return g(t)}function y(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function w(t){if(l.isBuffer(t)){const e=0|b(t.length),n=c(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!==typeof t.length||at(t.length)?c(0):g(t):"Buffer"===t.type&&Array.isArray(t.data)?g(t.data):void 0}function b(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),l.alloc(+t)}function E(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||st(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return et(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return it(t).length;default:if(i)return r?-1:et(t).length;e=(""+e).toLowerCase(),i=!0}}function A(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return D(this,e,n);case"ascii":return B(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function C(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function S(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,at(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,i){let o,s=1,a=t.length,c=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(t,o+r)!==l(e,r)){n=!1;break}if(n)return o}return-1}function T(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(at(r))return s;t[n+s]=r}return s}function I(t,e,n,r){return ot(et(e,t.length-n),t,n,r)}function M(t,e,n,r){return ot(nt(e),t,n,r)}function k(t,e,n,r){return ot(it(e),t,n,r)}function N(t,e,n,r){return ot(rt(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function D(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;while(i<n){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128===(192&n)&&(c=(31&e)<<6|63&n,c>127&&(o=c));break;case 3:n=t[i+1],r=t[i+2],128===(192&n)&&128===(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return R(r)}e.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=a(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return d(t,e,n)},l.allocUnsafe=function(t){return f(t)},l.allocUnsafeSlow=function(t){return f(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(st(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),st(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=l.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(st(e,Uint8Array))i+e.length>r.length?(l.isBuffer(e)||(e=l.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},l.byteLength=E,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)C(this,e,e+1);return this},l.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)C(this,e,e+3),C(this,e+1,e+2);return this},l.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)C(this,e,e+7),C(this,e+1,e+6),C(this,e+2,e+5),C(this,e+3,e+4);return this},l.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?D(this,0,t):A.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if(st(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;let o=i-r,s=n-e;const a=Math.min(o,s),c=this.slice(r,i),u=t.slice(e,n);for(let l=0;l<a;++l)if(c[l]!==u[l]){o=c[l],s=u[l];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return T(this,t,e,n);case"utf8":case"utf-8":return I(this,t,e,n);case"ascii":case"latin1":case"binary":return M(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const x=4096;function R(t){const e=t.length;if(e<=x)return String.fromCharCode.apply(String,t);let n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=x));return n}function B(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function L(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=e;o<n;++o)i+=ct[t[o]];return i}function F(t,e,n){const r=t.slice(e,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function U(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function H(t,e,n,r,i){K(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function j(t,e,n,r,i){K(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function V(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function W(t,e,n,r,o){return e=+e,n>>>=0,o||V(t,e,n,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,n,r,23,4),n+4}function $(t,e,n,r,o){return e=+e,n>>>=0,o||V(t,e,n,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){const n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=this[t+--e],i=1;while(e>0&&(i*=256))r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||U(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=lt((function(t){t>>>=0,J(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||Z(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=lt((function(t){t>>>=0,J(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||Z(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=this[t],i=1,o=0;while(++o<e&&(i*=256))r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||U(t,e,this.length);let r=e,i=1,o=this[t+--r];while(r>0&&(i*=256))o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||U(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||U(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=lt((function(t){t>>>=0,J(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||Z(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),l.prototype.readBigInt64BE=lt((function(t){t>>>=0,J(t,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||Z(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||U(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||U(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;z(this,t,e,n,r,0)}let i=1,o=0;this[e]=255&t;while(++o<n&&(i*=256))this[e+o]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){const r=Math.pow(2,8*n)-1;z(this,t,e,n,r,0)}let i=n-1,o=1;this[e+i]=255&t;while(--i>=0&&(o*=256))this[e+i]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=lt((function(t,e=0){return H(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=lt((function(t,e=0){return j(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;this[e]=255&t;while(++i<n&&(o*=256))t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;this[e+i]=255&t;while(--i>=0&&(o*=256))t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=lt((function(t,e=0){return H(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=lt((function(t,e=0){return j(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(t,e,n){return W(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return W(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=l.isBuffer(t)?t:l.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const G={};function Y(t,e,n){G[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function X(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function q(t,e,n){J(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||Z(e,t.length-(n+1))}function K(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new G.ERR_OUT_OF_RANGE("value",i,t)}q(r,i,o)}function J(t,e){if("number"!==typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function Z(t,e,n){if(Math.floor(t)!==t)throw J(t,n),new G.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new G.ERR_BUFFER_OUT_OF_BOUNDS;throw new G.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}Y("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),Y("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),Y("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=X(String(n)):"bigint"===typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=X(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function tt(t){if(t=t.split("=")[0],t=t.trim().replace(Q,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function et(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function nt(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function rt(t,e){let n,r,i;const o=[];for(let s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r)}return o}function it(t){return r.toByteArray(tt(t))}function ot(t,e,n,r){let i;for(i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function st(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function at(t){return t!==t}const ct=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function lt(t){return"undefined"===typeof BigInt?ut:t}function ut(){throw new Error("BigInt not supported")}},7192:function(t,e,n){"use strict";n(7658);const r=async t=>{const e=[];for await(const n of t)e.push(n);return e};t.exports=r},1131:function(t,e,n){"use strict";async function*r(t,e=1){let n=[];e<1&&(e=1);for await(const r of t){n.push(r);while(n.length>=e)yield n.slice(0,e),n=n.slice(e)}while(n.length)yield n.slice(0,e),n=n.slice(e)}n(7658),t.exports=r},9164:function(t){"use strict";const e=async t=>{for await(const e of t);};t.exports=e},3726:function(t){"use strict";const e=async function*(t,e){for await(const n of t)await e(n)&&(yield n)};t.exports=e},7290:function(t){"use strict";const e=async t=>{let e;for await(const n of t)e=n;return e};t.exports=e},9927:function(t){"use strict";const e=async function*(t,e){for await(const n of t)yield e(n)};t.exports=e},8806:function(t,e,n){"use strict";const r=n(1131);async function*i(t,e=1){for await(const n of r(t,e)){const t=n.map((t=>t().then((t=>({ok:!0,value:t})),(t=>({ok:!1,err:t})))));for(let e=0;e<t.length;e++){const n=await t[e];if(!n.ok)throw n.err;yield n.value}}}t.exports=i},4395:function(t,e,n){"use strict";function r(t){const[e,n]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>e.next(),push:t=>{r.push(t)},next:()=>r.length?{done:!1,value:r.shift()}:e.next(),[n](){return this}}}n(7658),t.exports=r},2100:function(t){const e=(...t)=>{let e;while(t.length)e=t.shift()(e);return e},n=t=>t&&("function"===typeof t[Symbol.asyncIterator]||"function"===typeof t[Symbol.iterator]||"function"===typeof t.next),r=t=>t&&"function"===typeof t.sink&&n(t.source),i=t=>e=>(t.sink(e),t.source),o=(...t)=>{if(r(t[0])){const e=t[0];t[0]=()=>e.source}else if(n(t[0])){const e=t[0];t[0]=()=>e}if(t.length>1&&r(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)r(t[e])&&(t[e]=i(t[e]));return e(...t)};t.exports=o,t.exports.pipe=o,t.exports.rawPipe=e,t.exports.isIterable=n,t.exports.isDuplex=r},6855:function(t){"use strict";const e=async function*(t,e){let n=0;if(!(e<1))for await(const r of t)if(yield r,n++,n===e)return};t.exports=e},535:function(t,e,n){"use strict";n(7658);const r=n(1800),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:o}=Object,s=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},l=t=>{const e=[];for(const n in t)i.call(t,n)&&e.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(t);for(const r of n)o.call(t,r)&&e.push(r)}return e};function u(t){return Array.isArray(t)?h(t):r(t)?d(t):t}function h(t){const e=t.slice(0,0);return l(t).forEach((n=>{s(e,n,u(t[n]))})),e}function d(t){const e=null===Object.getPrototypeOf(t)?Object.create(null):{};return l(t).forEach((n=>{s(e,n,u(t[n]))})),e}const f=(t,e,n,r)=>(n.forEach((n=>{"undefined"===typeof e[n]&&r.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?s(t,n,g(t[n],e[n],r)):s(t,n,u(e[n])))})),t),p=(t,e,n)=>{let r=t.slice(0,0),o=0;return[t,e].forEach((e=>{const a=[];for(let n=0;n<e.length;n++)i.call(e,n)&&(a.push(String(n)),s(r,o++,e===t?e[n]:u(e[n])));r=f(r,e,l(e).filter((t=>!a.includes(t))),n)})),r};function g(t,e,n){return n.concatArrays&&Array.isArray(t)&&Array.isArray(e)?p(t,e,n):r(e)&&r(t)?f(t,e,l(e),n):u(e)}t.exports=function(...t){const e=g(u(c),this!==a&&this||{},c);let n={_:{}};for(const i of t)if(void 0!==i){if(!r(i))throw new TypeError("`"+i+"` is not an Option Object");n=g(n,{_:i},e)}return n._}},1800:function(t){"use strict";t.exports=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}},716:function(t,e,n){t.exports=n(55)},55:function(t,e){(function(n,r){"use strict";var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function o(t){if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return!1;for(var e=0;e<t.length;e++)if(!Number.isInteger(t[e])||t[e]<0||t[e]>255)return!1;return!0}function s(t,e){return(65535&t)*e+(((t>>>16)*e&65535)<<16)}function a(t,e){return t<<e|t>>>32-e}function c(t){return t^=t>>>16,t=s(t,2246822507),t^=t>>>13,t=s(t,3266489909),t^=t>>>16,t}function l(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function h(t,e){return e%=64,32===e?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function d(t,e){return e%=64,0===e?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function f(t,e){return[t[0]^e[0],t[1]^e[1]]}function p(t){return t=f(t,[0,t[0]>>>1]),t=u(t,[4283543511,3981806797]),t=f(t,[0,t[0]>>>1]),t=u(t,[3301882366,444984403]),t=f(t,[0,t[0]>>>1]),t}i.x86.hash32=function(t,e){if(i.inputValidation&&!o(t))return r;e=e||0;for(var n=t.length%4,l=t.length-n,u=e,h=0,d=3432918353,f=461845907,p=0;p<l;p+=4)h=t[p]|t[p+1]<<8|t[p+2]<<16|t[p+3]<<24,h=s(h,d),h=a(h,15),h=s(h,f),u^=h,u=a(u,13),u=s(u,5)+3864292196;switch(h=0,n){case 3:h^=t[p+2]<<16;case 2:h^=t[p+1]<<8;case 1:h^=t[p],h=s(h,d),h=a(h,15),h=s(h,f),u^=h}return u^=t.length,u=c(u),u>>>0},i.x86.hash128=function(t,e){if(i.inputValidation&&!o(t))return r;e=e||0;for(var n=t.length%16,l=t.length-n,u=e,h=e,d=e,f=e,p=0,g=0,m=0,y=0,w=597399067,b=2869860233,v=951274213,E=2716044179,A=0;A<l;A+=16)p=t[A]|t[A+1]<<8|t[A+2]<<16|t[A+3]<<24,g=t[A+4]|t[A+5]<<8|t[A+6]<<16|t[A+7]<<24,m=t[A+8]|t[A+9]<<8|t[A+10]<<16|t[A+11]<<24,y=t[A+12]|t[A+13]<<8|t[A+14]<<16|t[A+15]<<24,p=s(p,w),p=a(p,15),p=s(p,b),u^=p,u=a(u,19),u+=h,u=s(u,5)+1444728091,g=s(g,b),g=a(g,16),g=s(g,v),h^=g,h=a(h,17),h+=d,h=s(h,5)+197830471,m=s(m,v),m=a(m,17),m=s(m,E),d^=m,d=a(d,15),d+=f,d=s(d,5)+2530024501,y=s(y,E),y=a(y,18),y=s(y,w),f^=y,f=a(f,13),f+=u,f=s(f,5)+850148119;switch(p=0,g=0,m=0,y=0,n){case 15:y^=t[A+14]<<16;case 14:y^=t[A+13]<<8;case 13:y^=t[A+12],y=s(y,E),y=a(y,18),y=s(y,w),f^=y;case 12:m^=t[A+11]<<24;case 11:m^=t[A+10]<<16;case 10:m^=t[A+9]<<8;case 9:m^=t[A+8],m=s(m,v),m=a(m,17),m=s(m,E),d^=m;case 8:g^=t[A+7]<<24;case 7:g^=t[A+6]<<16;case 6:g^=t[A+5]<<8;case 5:g^=t[A+4],g=s(g,b),g=a(g,16),g=s(g,v),h^=g;case 4:p^=t[A+3]<<24;case 3:p^=t[A+2]<<16;case 2:p^=t[A+1]<<8;case 1:p^=t[A],p=s(p,w),p=a(p,15),p=s(p,b),u^=p}return u^=t.length,h^=t.length,d^=t.length,f^=t.length,u+=h,u+=d,u+=f,h+=u,d+=u,f+=u,u=c(u),h=c(h),d=c(d),f=c(f),u+=h,u+=d,u+=f,h+=u,d+=u,f+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},i.x64.hash128=function(t,e){if(i.inputValidation&&!o(t))return r;e=e||0;for(var n=t.length%16,s=t.length-n,a=[0,e],c=[0,e],g=[0,0],m=[0,0],y=[2277735313,289559509],w=[1291169091,658871167],b=0;b<s;b+=16)g=[t[b+4]|t[b+5]<<8|t[b+6]<<16|t[b+7]<<24,t[b]|t[b+1]<<8|t[b+2]<<16|t[b+3]<<24],m=[t[b+12]|t[b+13]<<8|t[b+14]<<16|t[b+15]<<24,t[b+8]|t[b+9]<<8|t[b+10]<<16|t[b+11]<<24],g=u(g,y),g=h(g,31),g=u(g,w),a=f(a,g),a=h(a,27),a=l(a,c),a=l(u(a,[0,5]),[0,1390208809]),m=u(m,w),m=h(m,33),m=u(m,y),c=f(c,m),c=h(c,31),c=l(c,a),c=l(u(c,[0,5]),[0,944331445]);switch(g=[0,0],m=[0,0],n){case 15:m=f(m,d([0,t[b+14]],48));case 14:m=f(m,d([0,t[b+13]],40));case 13:m=f(m,d([0,t[b+12]],32));case 12:m=f(m,d([0,t[b+11]],24));case 11:m=f(m,d([0,t[b+10]],16));case 10:m=f(m,d([0,t[b+9]],8));case 9:m=f(m,[0,t[b+8]]),m=u(m,w),m=h(m,33),m=u(m,y),c=f(c,m);case 8:g=f(g,d([0,t[b+7]],56));case 7:g=f(g,d([0,t[b+6]],48));case 6:g=f(g,d([0,t[b+5]],40));case 5:g=f(g,d([0,t[b+4]],32));case 4:g=f(g,d([0,t[b+3]],24));case 3:g=f(g,d([0,t[b+2]],16));case 2:g=f(g,d([0,t[b+1]],8));case 1:g=f(g,[0,t[b]]),g=u(g,y),g=h(g,31),g=u(g,w),a=f(a,g)}return a=f(a,[0,t.length]),c=f(c,[0,t.length]),a=l(a,c),c=l(c,a),a=p(a),c=p(c),a=l(a,c),c=l(c,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=i),e.murmurHash3=i})()},9437:function(t,e,n){"use strict";const r=n(5711),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,({message:t}=t)):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const s=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},a=t=>i.includes(t),c=(t,e)=>new Promise(((n,i)=>{e={onFailedAttempt:()=>{},retries:10,...e};const c=r.operation(e);c.attempt((async r=>{try{n(await t(r))}catch(l){if(!(l instanceof Error))return void i(new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`));if(l instanceof o)c.stop(),i(l.originalError);else if(l instanceof TypeError&&!a(l.message))c.stop(),i(l);else{s(l,r,e);try{await e.onFailedAttempt(l)}catch(l){return void i(l)}c.retry(l)||i(c.mainError())}}}))}));t.exports=c,t.exports["default"]=c,t.exports.AbortError=o},6425:function(t,e,n){"use strict";t.exports=n(9507)},9507:function(t,e,n){"use strict";var r=e;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(7156),r.BufferWriter=n(8252),r.Reader=n(9799),r.BufferReader=n(8894),r.util=n(7102),r.rpc=n(7753),r.roots=n(358),r.configure=i,i()},9799:function(t,e,n){"use strict";n(3767),n(8585),n(8696),t.exports=c;var r,i=n(7102),o=i.LongBits,s=i.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var l="undefined"!==typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},u=function(){return i.Buffer?function(t){return(c.create=function(t){return i.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l};function h(){var t=new o(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return t}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},c.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},c.prototype.skip=function(t){if("number"===typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(t=7&this.uint32()))this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=u(),r._configure();var e=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},8894:function(t,e,n){"use strict";t.exports=o;var r=n(9799);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(7102);function o(t){r.call(this,t)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o._configure()},358:function(t){"use strict";t.exports={}},7753:function(t,e,n){"use strict";var r=e;r.Service=n(964)},964:function(t,e,n){"use strict";t.exports=i;var r=n(7102);function i(t,e,n){if("function"!==typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(t,a,e,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(t,n){if(t)return a.emit("error",t,e),s(t);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",n,e),s(null,n)}a.end(!0)}))}catch(c){return a.emit("error",c,e),void setTimeout((function(){s(c)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},6350:function(t,e,n){"use strict";t.exports=i;var r=n(7102);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return o;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"===typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):o},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;i.fromHash=function(t){return t===s?o:new i((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},7102:function(t,e,n){"use strict";n(3767),n(8585),n(8696);var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function o(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(5186),r.base64=n(8673),r.EventEmitter=n(8825),r.float=n(2913),r.inquire=n(6332),r.utf8=n(9561),r.pool=n(1168),r.LongBits=n(6350),r.isNode=Boolean("undefined"!==typeof n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"===typeof t||t instanceof String},r.isObject=function(t){return t&&"object"===typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"===typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"===typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},7156:function(t,e,n){"use strict";t.exports=h;var r,i=n(7102),o=i.LongBits,s=i.base64,a=i.utf8;function c(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function l(){}function u(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function f(t,e,n){e[n]=255&t}function p(t,e,n){while(t>127)e[n++]=127&t|128,t>>>=7;e[n]=t}function g(t,e){this.len=t,this.next=void 0,this.val=e}function m(t,e,n){while(t.hi)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;while(t.lo>127)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function y(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}h.create=d(),h.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new c(t,e,n),this.len+=e,this},g.prototype=Object.create(c.prototype),g.prototype.fn=p,h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new g((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(m,10,o.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=o.from(t);return this._push(m,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=o.from(t).zzEncode();return this._push(m,e.length(),e)},h.prototype.bool=function(t){return this._push(f,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(y,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=o.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var w=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(i.isString(t)){var n=h.alloc(e=s.length(t));s.decode(t,n,0),t=n}return this.uint32(e)._push(w,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},h.prototype.finish=function(){var t=this.head.next,e=this.constructor.alloc(this.len),n=0;while(t)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},h._configure=function(t){r=t,h.create=d(),r._configure()}},8252:function(t,e,n){"use strict";n(3767),n(8585),n(8696),t.exports=o;var r=n(7156);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(7102);function o(){r.call(this)}function s(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(o.writeBytesBuffer,e,t),this},o.prototype.string=function(t){var e=i.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},o._configure()},8385:function(t,e,n){const r=n(890),i=n(4553),o=n(8258),s=n(8593);function a(t,e,n,o,s){const a=[].slice.call(arguments,1),c=a.length,l="function"===typeof a[c-1];if(!l&&!r())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(n=e,e=o=void 0):2!==c||e.getContext||(o=n,n=e,e=void 0),new Promise((function(r,s){try{const s=i.create(n,o);r(t(s,e,o))}catch(a){s(a)}}))}if(c<2)throw new Error("Too few arguments provided");2===c?(s=n,n=e,e=o=void 0):3===c&&(e.getContext&&"undefined"===typeof s?(s=o,o=void 0):(s=o,o=n,n=e,e=void 0));try{const r=i.create(n,o);s(null,t(r,e,o))}catch(u){s(u)}}e.create=i.create,e.toCanvas=a.bind(null,o.render),e.toDataURL=a.bind(null,o.renderToDataURL),e.toString=a.bind(null,(function(t,e,n){return s.render(t,n)}))},890:function(t){t.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},9070:function(t,e,n){n(7658);const r=n(4288).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];const e=Math.floor(t/7)+2,n=r(t),i=145===n?26:2*Math.ceil((n-13)/(2*e-2)),o=[n-7];for(let r=1;r<e-1;r++)o[r]=o[r-1]-i;return o.push(6),o.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),i=r.length;for(let e=0;e<i;e++)for(let t=0;t<i;t++)0===e&&0===t||0===e&&t===i-1||e===i-1&&0===t||n.push([r[e],r[t]]);return n}},6355:function(t,e,n){const r=n(5461),i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(t){this.mode=r.ALPHANUMERIC,this.data=t}o.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*i.indexOf(this.data[e]);n+=i.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(i.indexOf(this.data[e]),6)},t.exports=o},495:function(t,e,n){function r(){this.buffer=[],this.length=0}n(7658),r.prototype={get:function(t){const e=Math.floor(t/8);return 1===(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1===(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=r},3880:function(t,e,n){function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}n(3767),n(8585),n(8696),r.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)},r.prototype.get=function(t,e){return this.data[t*this.size+e]},r.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},r.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=r},7591:function(t,e,n){n(3767),n(8585),n(8696);const r=n(4700),i=n(5461);function o(t){this.mode=i.BYTE,"string"===typeof t&&(t=r(t)),this.data=new Uint8Array(t)}o.getBitsLength=function(t){return 8*t},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)},t.exports=o},9757:function(t,e,n){const r=n(2839),i=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return i[4*(t-1)+0];case r.M:return i[4*(t-1)+1];case r.Q:return i[4*(t-1)+2];case r.H:return i[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}}},2839:function(t,e){function n(t){if("string"!==typeof t)throw new Error("Param is not a string");const n=t.toLowerCase();switch(n){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&"undefined"!==typeof t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,r){if(e.isValid(t))return t;try{return n(t)}catch(i){return r}}},3375:function(t,e,n){const r=n(4288).getSymbolSize,i=7;e.getPositions=function(t){const e=r(t);return[[0,0],[e-i,0],[0,e-i]]}},7874:function(t,e,n){const r=n(4288),i=1335,o=21522,s=r.getBCHDigit(i);e.getEncodedBits=function(t,e){const n=t.bit<<3|e;let a=n<<10;while(r.getBCHDigit(a)-s>=0)a^=i<<r.getBCHDigit(a)-s;return(n<<10|a)^o}},7512:function(t,e,n){n(3767),n(8585),n(8696);const r=new Uint8Array(512),i=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)r[e]=t,i[t]=e,t<<=1,256&t&&(t^=285);for(let e=255;e<512;e++)r[e]=r[e-255]})(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return i[t]},e.exp=function(t){return r[t]},e.mul=function(t,e){return 0===t||0===e?0:r[i[t]+i[e]]}},9176:function(t,e,n){const r=n(5461),i=n(4288);function o(t){this.mode=r.KANJI,this.data=t}o.getBitsLength=function(t){return 13*t},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=i.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}},t.exports=o},1840:function(t,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};function r(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return r%3===0;case e.Patterns.PATTERN011:return(n+r)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case e.Patterns.PATTERN101:return n*r%2+n*r%3===0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const e=t.size;let r=0,i=0,o=0,s=null,a=null;for(let c=0;c<e;c++){i=o=0,s=a=null;for(let l=0;l<e;l++){let e=t.get(c,l);e===s?i++:(i>=5&&(r+=n.N1+(i-5)),s=e,i=1),e=t.get(l,c),e===a?o++:(o>=5&&(r+=n.N1+(o-5)),a=e,o=1)}i>=5&&(r+=n.N1+(i-5)),o>=5&&(r+=n.N1+(o-5))}return r},e.getPenaltyN2=function(t){const e=t.size;let r=0;for(let n=0;n<e-1;n++)for(let i=0;i<e-1;i++){const e=t.get(n,i)+t.get(n,i+1)+t.get(n+1,i)+t.get(n+1,i+1);4!==e&&0!==e||r++}return r*n.N2},e.getPenaltyN3=function(t){const e=t.size;let r=0,i=0,o=0;for(let n=0;n<e;n++){i=o=0;for(let s=0;s<e;s++)i=i<<1&2047|t.get(n,s),s>=10&&(1488===i||93===i)&&r++,o=o<<1&2047|t.get(s,n),s>=10&&(1488===o||93===o)&&r++}return r*n.N3},e.getPenaltyN4=function(t){let e=0;const r=t.data.length;for(let n=0;n<r;n++)e+=t.data[n];const i=Math.abs(Math.ceil(100*e/r/5)-10);return i*n.N4},e.applyMask=function(t,e){const n=e.size;for(let i=0;i<n;i++)for(let o=0;o<n;o++)e.isReserved(o,i)||e.xor(o,i,r(t,o,i))},e.getBestMask=function(t,n){const r=Object.keys(e.Patterns).length;let i=0,o=1/0;for(let s=0;s<r;s++){n(s),e.applyMask(s,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(s,t),r<o&&(o=r,i=s)}return i}},5461:function(t,e,n){const r=n(5057),i=n(3555);function o(t){if("string"!==typeof t)throw new Error("Param is not a string");const n=t.toLowerCase();switch(n){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!r.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return i.testNumeric(t)?e.NUMERIC:i.testAlphanumeric(t)?e.ALPHANUMERIC:i.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return o(t)}catch(r){return n}}},9186:function(t,e,n){const r=n(5461);function i(t){this.mode=r.NUMERIC,this.data=t.toString()}i.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*i+1))},t.exports=i},823:function(t,e,n){n(3767),n(8585),n(8696);const r=n(7512);e.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let i=0;i<t.length;i++)for(let o=0;o<e.length;o++)n[i+o]^=r.mul(t[i],e[o]);return n},e.mod=function(t,e){let n=new Uint8Array(t);while(n.length-e.length>=0){const t=n[0];for(let o=0;o<e.length;o++)n[o]^=r.mul(e[o],t);let i=0;while(i<n.length&&0===n[i])i++;n=n.slice(i)}return n},e.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let i=0;i<t;i++)n=e.mul(n,new Uint8Array([1,r.exp(i)]));return n}},4553:function(t,e,n){n(3767),n(8585),n(8696);const r=n(4288),i=n(2839),o=n(495),s=n(3880),a=n(9070),c=n(3375),l=n(1840),u=n(9757),h=n(4365),d=n(9693),f=n(7874),p=n(5461),g=n(8439);function m(t,e){const n=t.size,r=c.getPositions(e);for(let i=0;i<r.length;i++){const e=r[i][0],o=r[i][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||n<=e+r))for(let i=-1;i<=7;i++)o+i<=-1||n<=o+i||(r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4?t.set(e+r,o+i,!0,!0):t.set(e+r,o+i,!1,!0))}}function y(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2===0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}function w(t,e){const n=a.getPositions(e);for(let r=0;r<n.length;r++){const e=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?t.set(e+n,i+r,!0,!0):t.set(e+n,i+r,!1,!0)}}function b(t,e){const n=t.size,r=d.getEncodedBits(e);let i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+n-8-3,s=1===(r>>a&1),t.set(i,o,s,!0),t.set(o,i,s,!0)}function v(t,e,n){const r=t.size,i=f.getEncodedBits(e,n);let o,s;for(o=0;o<15;o++)s=1===(i>>o&1),o<6?t.set(o,8,s,!0):o<8?t.set(o+1,8,s,!0):t.set(r-15+o,8,s,!0),o<8?t.set(8,r-o-1,s,!0):o<9?t.set(8,15-o-1+1,s,!0):t.set(8,15-o-1,s,!0);t.set(r-8,8,1,!0)}function E(t,e){const n=t.size;let r=-1,i=n-1,o=7,s=0;for(let a=n-1;a>0;a-=2){6===a&&a--;while(1){for(let n=0;n<2;n++)if(!t.isReserved(i,a-n)){let r=!1;s<e.length&&(r=1===(e[s]>>>o&1)),t.set(i,a-n,r),o--,-1===o&&(s++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}}function A(t,e,n){const i=new o;n.forEach((function(e){i.put(e.mode.bit,4),i.put(e.getLength(),p.getCharCountIndicator(e.mode,t)),e.write(i)}));const s=r.getSymbolTotalCodewords(t),a=u.getTotalCodewordsCount(t,e),c=8*(s-a);i.getLengthInBits()+4<=c&&i.put(0,4);while(i.getLengthInBits()%8!==0)i.putBit(0);const l=(c-i.getLengthInBits())/8;for(let r=0;r<l;r++)i.put(r%2?17:236,8);return C(i,t,e)}function C(t,e,n){const i=r.getSymbolTotalCodewords(e),o=u.getTotalCodewordsCount(e,n),s=i-o,a=u.getBlocksCount(e,n),c=i%a,l=a-c,d=Math.floor(i/a),f=Math.floor(s/a),p=f+1,g=d-f,m=new h(g);let y=0;const w=new Array(a),b=new Array(a);let v=0;const E=new Uint8Array(t.buffer);for(let r=0;r<a;r++){const t=r<l?f:p;w[r]=E.slice(y,y+t),b[r]=m.encode(w[r]),y+=t,v=Math.max(v,t)}const A=new Uint8Array(i);let C,S,_=0;for(C=0;C<v;C++)for(S=0;S<a;S++)C<w[S].length&&(A[_++]=w[S][C]);for(C=0;C<g;C++)for(S=0;S<a;S++)A[_++]=b[S][C];return A}function S(t,e,n,i){let o;if(Array.isArray(t))o=g.fromArray(t);else{if("string"!==typeof t)throw new Error("Invalid data");{let r=e;if(!r){const e=g.rawSplit(t);r=d.getBestVersionForData(e,n)}o=g.fromString(t,r||40)}}const a=d.getBestVersionForData(o,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else e=a;const c=A(e,n,o),u=r.getSymbolSize(e),h=new s(u);return m(h,e),y(h),w(h,e),v(h,n,0),e>=7&&b(h,e),E(h,c),isNaN(i)&&(i=l.getBestMask(h,v.bind(null,h,n))),l.applyMask(i,h),v(h,n,i),{modules:h,version:e,errorCorrectionLevel:n,maskPattern:i,segments:o}}e.create=function(t,e){if("undefined"===typeof t||""===t)throw new Error("No input text");let n,o,s=i.M;return"undefined"!==typeof e&&(s=i.from(e.errorCorrectionLevel,i.M),n=d.from(e.version),o=l.from(e.maskPattern),e.toSJISFunc&&r.setToSJISFunction(e.toSJISFunc)),S(t,n,s,o)}},4365:function(t,e,n){n(3767),n(8585),n(8696);const r=n(823);function i(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}i.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},i.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=r.mod(e,this.genPoly),i=this.degree-n.length;if(i>0){const t=new Uint8Array(this.degree);return t.set(n,i),t}return n},t.exports=i},3555:function(t,e){const n="[0-9]+",r="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";e.KANJI=new RegExp(i,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(o,"g"),e.NUMERIC=new RegExp(n,"g"),e.ALPHANUMERIC=new RegExp(r,"g");const s=new RegExp("^"+i+"$"),a=new RegExp("^"+n+"$"),c=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return s.test(t)},e.testNumeric=function(t){return a.test(t)},e.testAlphanumeric=function(t){return c.test(t)}},8439:function(t,e,n){n(7658);const r=n(5461),i=n(9186),o=n(6355),s=n(7591),a=n(9176),c=n(3555),l=n(4288),u=n(8716);function h(t){return unescape(encodeURIComponent(t)).length}function d(t,e,n){const r=[];let i;while(null!==(i=t.exec(n)))r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function f(t){const e=d(c.NUMERIC,r.NUMERIC,t),n=d(c.ALPHANUMERIC,r.ALPHANUMERIC,t);let i,o;l.isKanjiModeEnabled()?(i=d(c.BYTE,r.BYTE,t),o=d(c.KANJI,r.KANJI,t)):(i=d(c.BYTE_KANJI,r.BYTE,t),o=[]);const s=e.concat(n,i,o);return s.sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function p(t,e){switch(e){case r.NUMERIC:return i.getBitsLength(t);case r.ALPHANUMERIC:return o.getBitsLength(t);case r.KANJI:return a.getBitsLength(t);case r.BYTE:return s.getBitsLength(t)}}function g(t){return t.reduce((function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}function m(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];switch(i.mode){case r.NUMERIC:e.push([i,{data:i.data,mode:r.ALPHANUMERIC,length:i.length},{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.ALPHANUMERIC:e.push([i,{data:i.data,mode:r.BYTE,length:i.length}]);break;case r.KANJI:e.push([i,{data:i.data,mode:r.BYTE,length:h(i.data)}]);break;case r.BYTE:e.push([{data:i.data,mode:r.BYTE,length:h(i.data)}])}}return e}function y(t,e){const n={},i={start:{}};let o=["start"];for(let s=0;s<t.length;s++){const a=t[s],c=[];for(let t=0;t<a.length;t++){const l=a[t],u=""+s+t;c.push(u),n[u]={node:l,lastCount:0},i[u]={};for(let t=0;t<o.length;t++){const s=o[t];n[s]&&n[s].node.mode===l.mode?(i[s][u]=p(n[s].lastCount+l.length,l.mode)-p(n[s].lastCount,l.mode),n[s].lastCount+=l.length):(n[s]&&(n[s].lastCount=l.length),i[s][u]=p(l.length,l.mode)+4+r.getCharCountIndicator(l.mode,e))}}o=c}for(let r=0;r<o.length;r++)i[o[r]].end=0;return{map:i,table:n}}function w(t,e){let n;const c=r.getBestModeForData(t);if(n=r.from(e,c),n!==r.BYTE&&n.bit<c.bit)throw new Error('"'+t+'" cannot be encoded with mode '+r.toString(n)+".\n Suggested mode is: "+r.toString(c));switch(n!==r.KANJI||l.isKanjiModeEnabled()||(n=r.BYTE),n){case r.NUMERIC:return new i(t);case r.ALPHANUMERIC:return new o(t);case r.KANJI:return new a(t);case r.BYTE:return new s(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"===typeof e?t.push(w(e,null)):e.data&&t.push(w(e.data,e.mode)),t}),[])},e.fromString=function(t,n){const r=f(t,l.isKanjiModeEnabled()),i=m(r),o=y(i,n),s=u.find_path(o.map,"start","end"),a=[];for(let e=1;e<s.length-1;e++)a.push(o.table[s[e]].node);return e.fromArray(g(a))},e.rawSplit=function(t){return e.fromArray(f(t,l.isKanjiModeEnabled()))}},4288:function(t,e){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){let e=0;while(0!==t)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!==typeof t)throw new Error('"toSJISFunc" is not a valid function.');n=t},e.isKanjiModeEnabled=function(){return"undefined"!==typeof n},e.toSJIS=function(t){return n(t)}},5057:function(t,e){e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},9693:function(t,e,n){const r=n(4288),i=n(9757),o=n(2839),s=n(5461),a=n(5057),c=7973,l=r.getBCHDigit(c);function u(t,n,r){for(let i=1;i<=40;i++)if(n<=e.getCapacity(i,r,t))return i}function h(t,e){return s.getCharCountIndicator(t,e)+4}function d(t,e){let n=0;return t.forEach((function(t){const r=h(t.mode,e);n+=r+t.getBitsLength()})),n}function f(t,n){for(let r=1;r<=40;r++){const i=d(t,r);if(i<=e.getCapacity(r,n,s.MIXED))return r}}e.from=function(t,e){return a.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,n){if(!a.isValid(t))throw new Error("Invalid QR Code version");"undefined"===typeof n&&(n=s.BYTE);const o=r.getSymbolTotalCodewords(t),c=i.getTotalCodewordsCount(t,e),l=8*(o-c);if(n===s.MIXED)return l;const u=l-h(n,t);switch(n){case s.NUMERIC:return Math.floor(u/10*3);case s.ALPHANUMERIC:return Math.floor(u/11*2);case s.KANJI:return Math.floor(u/13);case s.BYTE:default:return Math.floor(u/8)}},e.getBestVersionForData=function(t,e){let n;const r=o.from(e,o.M);if(Array.isArray(t)){if(t.length>1)return f(t,r);if(0===t.length)return 1;n=t[0]}else n=t;return u(n.mode,n.getLength(),r)},e.getEncodedBits=function(t){if(!a.isValid(t)||t<7)throw new Error("Invalid QR Code version");let e=t<<12;while(r.getBCHDigit(e)-l>=0)e^=c<<r.getBCHDigit(e)-l;return t<<12|e}},8258:function(t,e,n){const r=n(8920);function i(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}function o(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}e.render=function(t,e,n){let s=n,a=e;"undefined"!==typeof s||e&&e.getContext||(s=e,e=void 0),e||(a=o()),s=r.getOptions(s);const c=r.getImageWidth(t.modules.size,s),l=a.getContext("2d"),u=l.createImageData(c,c);return r.qrToImageData(u.data,t,s),i(l,a,c),l.putImageData(u,0,0),a},e.renderToDataURL=function(t,n,r){let i=r;"undefined"!==typeof i||n&&n.getContext||(i=n,n=void 0),i||(i={});const o=e.render(t,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}},8593:function(t,e,n){const r=n(8920);function i(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function o(t,e,n){let r=t+e;return"undefined"!==typeof n&&(r+=" "+n),r}function s(t,e,n){let r="",i=0,s=!1,a=0;for(let c=0;c<t.length;c++){const l=Math.floor(c%e),u=Math.floor(c/e);l||s||(s=!0),t[c]?(a++,c>0&&l>0&&t[c-1]||(r+=s?o("M",l+n,.5+u+n):o("m",i,0),i=0,s=!1),l+1<e&&t[c+1]||(r+=o("h",a),a=0)):i++}return r}e.render=function(t,e,n){const o=r.getOptions(e),a=t.modules.size,c=t.modules.data,l=a+2*o.margin,u=o.color.light.a?"<path "+i(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",h="<path "+i(o.color.dark,"stroke")+' d="'+s(c,a,o.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f=o.width?'width="'+o.width+'" height="'+o.width+'" ':"",p='<svg xmlns="http://www.w3.org/2000/svg" '+f+d+' shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"===typeof n&&n(null,p),p}},8920:function(t,e,n){function r(t){if("number"===typeof t&&(t=t.toString()),"string"!==typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}n(7658),e.getOptions=function(t){t||(t={}),t.color||(t.color={});const e="undefined"===typeof t.margin||null===t.margin||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:n,scale:n?4:i,margin:e,color:{dark:r(t.color.dark||"#000000ff"),light:r(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const i=n.modules.size,o=n.modules.data,s=e.getScale(i,r),a=Math.floor((i+2*r.margin)*s),c=r.margin*s,l=[r.color.light,r.color.dark];for(let e=0;e<a;e++)for(let n=0;n<a;n++){let u=4*(e*a+n),h=r.color.light;if(e>=c&&n>=c&&e<a-c&&n<a-c){const t=Math.floor((e-c)/s),r=Math.floor((n-c)/s);h=l[o[t*i+r]?1:0]}t[u++]=h.r,t[u++]=h.g,t[u++]=h.b,t[u]=h.a}}},3864:function(t,e,n){n(3767),n(8585),n(8696);const{instantiate:r}=n(5713);function i(t={}){if(!i.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([e],{type:"application/wasm"})),t)}i.supported="undefined"!==typeof WebAssembly,t.exports=i},7393:function(t,e,n){const r=n(2282),i=n(3864),o=async(t,e,n,o,s)=>{const a=await i();return new r(a,t,e,n,o,s)};t.exports={Rabin:r,create:o}},2282:function(t,e,n){n(3767),n(8585),n(8696);class r{constructor(t,e=12,n=8192,r=32768,i=64,o){this.bits=e,this.min=n,this.max=r,this.asModule=t,this.rabin=new t.Rabin(e,n,r,i,o),this.polynomial=o}fingerprint(t){const{__retain:e,__release:n,__allocArray:r,__getInt32Array:i,Int32Array_ID:o,Uint8Array_ID:s}=this.asModule,a=new Int32Array(Math.ceil(t.length/this.min)),c=e(r(o,a)),l=e(r(s,t)),u=this.rabin.fingerprint(l,c),h=i(u);n(l),n(c);const d=h.indexOf(0);return d>=0?h.subarray(0,d):h}}t.exports=r},5431:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r,i=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function o(t,e){void 0===e&&(e={});var n=e.registrationOptions;void 0===n&&(n={}),delete e.registrationOptions;var o=function(t){var n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];e&&e[t]&&e[t].apply(e,n)};"serviceWorker"in navigator&&r.then((function(){i()?(c(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)}))):(a(t,o,n),navigator.serviceWorker.ready.then((function(t){o("ready",t)})).catch((function(t){return s(o,t)})))}))}function s(t,e){navigator.onLine||t("offline"),t("error",e)}function a(t,e,n){navigator.serviceWorker.register(t,n).then((function(t){e("registered",t),t.waiting?e("updated",t):t.onupdatefound=function(){e("updatefound",t);var n=t.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?e("updated",t):e("cached",t))}}})).catch((function(t){return s(e,t)}))}function c(t,e,n){fetch(t).then((function(r){404===r.status?(e("error",new Error("Service worker not found at "+t)),l()):-1===r.headers.get("content-type").indexOf("javascript")?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),l()):a(t,e,n)})).catch((function(t){return s(e,t)}))}function l(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){return s(emit,t)}))}"undefined"!==typeof window&&(r="undefined"!==typeof Promise?new Promise((function(t){return window.addEventListener("load",t)})):{then:function(t){return window.addEventListener("load",t)}})},5711:function(t,e,n){t.exports=n(7334)},7334:function(t,e,n){n(7658);var r=n(8463);e.operation=function(t){var n=e.timeouts(t);return new r(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in t)e[n]=t[n];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<e.retries;i++)r.push(this.createTimeout(i,e));return t&&t.forever&&!r.length&&r.push(this.createTimeout(i,e)),r.sort((function(t,e){return t-e})),r},e.createTimeout=function(t,e){var n=e.randomize?Math.random()+1:1,r=Math.round(n*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout),r},e.wrap=function(t,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],t)"function"===typeof t[i]&&r.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=t[s];t[s]=function(r){var i=e.operation(n),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(t){i.retry(t)||(t&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){r.apply(t,o)}))}.bind(t,a),t[s].options=n}}},8463:function(t,e,n){function r(t,e){"boolean"===typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}n(7658),n(541),t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=n&&(e=i,n=s)}return e}},1946:function(t,e,n){"use strict";n(7658),n(541);const r=7;function i(t,e){return t+o(e)}function o(t){let e=t;return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),16843009*(e+(e>>4)&252645135)>>24}function s(t,e){return t[0]-e[0]}function a(t){return t[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(t,e){let n=this._internalPositionFor(t,!1);if(void 0===e)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(t),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(t),this._changedData=!0):r=!0,this._setInternalPos(n,t,e,r),this._changedLength=!0}}unset(t){this.set(t,void 0)}get(t){this._sortData();const e=this._internalPositionFor(t,!0);if(-1!==e)return this._data[e][1]}push(t){return this.set(this.length,t),this.length}get length(){if(this._sortData(),this._changedLength){const t=this._data[this._data.length-1];this._length=t?t[0]+1:0,this._changedLength=!1}return this._length}forEach(t){let e=0;while(e<this.length)t(this.get(e),e,this),e++}map(t){let e=0,n=new Array(this.length);while(e<this.length)n[e]=t(this.get(e),e,this),e++;return n}reduce(t,e){let n=0,r=e;while(n<this.length){const e=this.get(n);r=t(r,e,n),n++}return r}find(t){let e,n,r=0;while(r<this.length&&!e)n=this.get(r),e=t(n),r++;return e?n:void 0}_internalPositionFor(t,e){const n=this._bytePosFor(t,e);if(n>=this._bitArrays.length)return-1;const s=this._bitArrays[n],a=t-n*r,c=(s&1<<a)>0;if(!c)return-1;const l=this._bitArrays.slice(0,n).reduce(i,0),u=~(4294967295<<a+1),h=o(s&u),d=l+h-1;return d}_bytePosFor(t,e){const n=Math.floor(t/r),i=n+1;while(!e&&this._bitArrays.length<i)this._bitArrays.push(0);return n}_setBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]|=1<<t-e*r}_unsetBit(t){const e=this._bytePosFor(t,!1);this._bitArrays[e]&=~(1<<t-e*r)}_setInternalPos(t,e,n,r){const i=this._data,o=[e,n];if(r)this._sortData(),i[t]=o;else{if(i.length)if(i[i.length-1][0]>=e)i.push(o);else if(i[0][0]<=e)i.unshift(o);else{const t=Math.round(i.length/2);this._data=i.slice(0,t).concat(o).concat(i.slice(t))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(t){this._data.splice(t,1)}_sortData(){this._changedData&&this._data.sort(s),this._changedData=!1}bitField(){const t=[];let e,n=8,r=0,i=0;const o=this._bitArrays.slice();while(o.length||r){0===r&&(e=o.shift(),r=7);const s=Math.min(r,n),a=~(255<<s),c=e&a;i|=c<<8-n,e>>>=s,r-=s,n-=s,n&&(r||o.length)||(t.push(i),i=0,n=8)}for(var s=t.length-1;s>0;s--){const e=t[s];if(0!==e)break;t.pop()}return t}compactArray(){return this._sortData(),this._data.map(a)}}},1978:function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=!1),n&&(e/=t,t=1);var r,i=[],o=0,s=0,a=function(){var n=o+e,c=Date.now();if(c<n)return void 0!==r&&clearTimeout(r),void(r=setTimeout(a,n-c));o=c,s=0;for(var l=0,u=i.splice(0,t);l<u.length;l++){var h=u[l];s++,h()}r=i.length?setTimeout(a,e):void 0};return function(n){return new Promise((function(c,l){var u=function(){return Promise.resolve().then(n).then(c).catch(l)},h=Date.now();void 0===r&&h-o>e&&(o=h,s=0),s++<t?u():(i.push(u),void 0===r&&(r=setTimeout(a,o+e-h)))}))}}n(7658),Object.defineProperty(e,"__esModule",{value:!0}),t.exports=r,e["default"]=r},2706:function(t){t.exports=r;var e=128,n=127;function r(t,i){var o,s=0,a=(i=i||0,0),c=i,l=t.length;do{if(c>=l||a>49)throw r.bytes=0,new RangeError("Could not decode varint");o=t[c++],s+=a<28?(o&n)<<a:(o&n)*Math.pow(2,a),a+=7}while(o>=e);return r.bytes=c-i,s}},799:function(t){t.exports=o;var e=128,n=127,r=~n,i=Math.pow(2,31);function o(t,n,s){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw o.bytes=0,new RangeError("Could not encode varint");n=n||[],s=s||0;var a=s;while(t>=i)n[s++]=255&t|e,t/=128;while(t&r)n[s++]=255&t|e,t>>>=7;return n[s]=0|t,o.bytes=s-a+1,n}},2611:function(t,e,n){t.exports={encode:n(799),decode:n(2706),encodingLength:n(3303)}},3303:function(t){var e=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),i=Math.pow(2,28),o=Math.pow(2,35),s=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),l=Math.pow(2,63);t.exports=function(t){return t<e?1:t<n?2:t<r?3:t<i?4:t<o?5:t<s?6:t<a?7:t<c?8:t<l?9:10}},89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n}},65:function(t,e,n){"use strict";n.d(e,{MT:function(){return tt}});n(7658),n(541);var r=n(3396),i=n(4870);function o(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const a="function"===typeof Proxy,c="devtools-plugin:setup",l="plugin:settings:set";let u,h;function d(){var t;return void 0!==u||("undefined"!==typeof window&&window.performance?(u=!0,h=window.performance):"undefined"!==typeof n.g&&(null===(t=n.g.perf_hooks)||void 0===t?void 0:t.performance)?(u=!0,h=n.g.perf_hooks.performance):u=!1),u}function f(){return d()?h.now():Date.now()}class p{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const s in t.settings){const e=t.settings[s];n[s]=e.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let i=Object.assign({},n);try{const t=localStorage.getItem(r),e=JSON.parse(t);Object.assign(i,e)}catch(o){}this.fallbacks={getSettings(){return i},setSettings(t){try{localStorage.setItem(r,JSON.stringify(t))}catch(o){}i=t},now(){return f()}},e&&e.on(l,((t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)})),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise((n=>{this.targetQueue.push({method:e,args:t,resolve:n})}))})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function g(t,e){const n=t,r=s(),i=o(),l=a&&n.enableEarlyProxy;if(!i||!r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&l){const t=l?new p(n,i):null,o=r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[];o.push({pluginDescriptor:n,setupFn:e,proxy:t}),t&&e(t.proxiedTarget)}else i.emit(c,t,e)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var m="store";function y(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function w(t){return null!==t&&"object"===typeof t}function b(t){return t&&"function"===typeof t.then}function v(t,e){return function(){return t(e)}}function E(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function A(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;S(t,n,[],t._modules.root,!0),C(t,n,e)}function C(t,e,n){var o=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,c={},l={},u=(0,i.B)(!0);u.run((function(){y(a,(function(e,n){c[n]=v(e,t),l[n]=(0,r.Fl)((function(){return c[n]()})),Object.defineProperty(t.getters,n,{get:function(){return l[n].value},enumerable:!0})}))})),t._state=(0,i.qj)({data:e}),t._scope=u,t.strict&&N(t),o&&n&&t._withCommit((function(){o.data=null})),s&&s.stop()}function S(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!o&&!i){var a=O(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){a[c]=r.state}))}var l=r.context=_(t,s,n);r.forEachMutation((function(e,n){var r=s+n;I(t,r,e,l)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;M(t,r,i,l)})),r.forEachGetter((function(e,n){var r=s+n;k(t,r,e,l)})),r.forEachChild((function(r,o){S(t,e,n.concat(o),r,i)}))}function _(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=D(n,r,i),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=e+c),t.dispatch(c,s)},commit:r?t.commit:function(n,r,i){var o=D(n,r,i),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=e+c),t.commit(c,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return T(t,e)}},state:{get:function(){return O(t.state,n)}}}),i}function T(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function I(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,r.state,e)}))}function M(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return b(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}function k(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)})}function N(t){(0,r.YP)((function(){return t._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function O(t,e){return e.reduce((function(t,e){return t[e]}),t)}function D(t,e,n){return w(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var x="vuex bindings",R="vuex:mutations",B="vuex:actions",L="vuex",P=0;function F(t,e){g({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[x]},(function(n){n.addTimelineLayer({id:R,label:"Vuex Mutations",color:U}),n.addTimelineLayer({id:B,label:"Vuex Actions",color:U}),n.addInspector({id:L,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&n.inspectorId===L)if(n.filter){var r=[];$(r,e._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[W(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&n.inspectorId===L){var r=n.nodeId;T(e,r),n.state=G(X(e._modules,r),"root"===r?e.getters:e._makeLocalGettersCache,r)}})),n.on.editInspectorState((function(n){if(n.app===t&&n.inspectorId===L){var r=n.nodeId,i=n.path;"root"!==r&&(i=r.split("/").filter(Boolean).concat(i)),e._withCommit((function(){n.set(e._state.data,i,n.state.value)}))}})),e.subscribe((function(t,e){var r={};t.payload&&(r.payload=t.payload),r.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(L),n.sendInspectorState(L),n.addTimelineEvent({layerId:R,event:{time:Date.now(),title:t.type,data:r}})})),e.subscribeAction({before:function(t,e){var r={};t.payload&&(r.payload=t.payload),t._id=P++,t._time=Date.now(),r.state=e,n.addTimelineEvent({layerId:B,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:r}})},after:function(t,e){var r={},i=Date.now()-t._time;r.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},t.payload&&(r.payload=t.payload),r.state=e,n.addTimelineEvent({layerId:B,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:r}})}})}))}var U=8702998,z=6710886,H=16777215,j={label:"namespaced",textColor:H,backgroundColor:z};function V(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function W(t,e){return{id:e||"root",label:V(e),tags:t.namespaced?[j]:[],children:Object.keys(t._children).map((function(n){return W(t._children[n],e+n+"/")}))}}function $(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[j]:[]}),Object.keys(e._children).forEach((function(i){$(t,e._children[i],n,r+i+"/")}))}function G(t,e,n){e="root"===n?e:e[n];var r=Object.keys(e),i={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};if(r.length){var o=Y(e);i.getters=Object.keys(o).map((function(t){return{key:t.endsWith("/")?V(t):t,editable:!1,value:q((function(){return o[t]}))}}))}return i}function Y(t){var e={};return Object.keys(t).forEach((function(n){var r=n.split("/");if(r.length>1){var i=e,o=r.pop();r.forEach((function(t){i[t]||(i[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),i=i[t]._custom.value})),i[o]=q((function(){return t[n]}))}else e[n]=q((function(){return t[n]}))})),e}function X(t,e){var n=e.split("/").filter((function(t){return t}));return n.reduce((function(t,r,i){var o=t[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+e+'".');return i===n.length-1?o:o._children}),"root"===e?t:t.root._children)}function q(t){try{return t()}catch(e){return e}}var K=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},J={namespaced:{configurable:!0}};J.namespaced.get=function(){return!!this._rawModule.namespaced},K.prototype.addChild=function(t,e){this._children[t]=e},K.prototype.removeChild=function(t){delete this._children[t]},K.prototype.getChild=function(t){return this._children[t]},K.prototype.hasChild=function(t){return t in this._children},K.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},K.prototype.forEachChild=function(t){y(this._children,t)},K.prototype.forEachGetter=function(t){this._rawModule.getters&&y(this._rawModule.getters,t)},K.prototype.forEachAction=function(t){this._rawModule.actions&&y(this._rawModule.actions,t)},K.prototype.forEachMutation=function(t){this._rawModule.mutations&&y(this._rawModule.mutations,t)},Object.defineProperties(K.prototype,J);var Z=function(t){this.register([],t,!1)};function Q(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return void 0;Q(t.concat(r),e.getChild(r),n.modules[r])}}Z.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},Z.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},Z.prototype.update=function(t){Q([],this.root,t)},Z.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new K(e,n);if(0===t.length)this.root=i;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],i)}e.modules&&y(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},Z.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},Z.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};function tt(t){return new et(t)}var et=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1);var i=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Z(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(t,e){return a.call(o,t,e)},this.commit=function(t,e,n){return c.call(o,t,e,n)},this.strict=r;var l=this._modules.root.state;S(this,l,[],this._modules.root),C(this,l),n.forEach((function(t){return t(e)}))},nt={state:{configurable:!0}};et.prototype.install=function(t,e){t.provide(e||m,this),t.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&F(t,this)},nt.state.get=function(){return this._state.data},nt.state.set=function(t){0},et.prototype.commit=function(t,e,n){var r=this,i=D(t,e,n),o=i.type,s=i.payload,a=(i.options,{type:o,payload:s}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(a,r.state)})))},et.prototype.dispatch=function(t,e){var n=this,r=D(t,e),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(l){0}var c=a.length>1?Promise.all(a.map((function(t){return t(o)}))):a[0](o);return new Promise((function(t,e){c.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(l){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(l){0}e(t)}))}))}},et.prototype.subscribe=function(t,e){return E(t,this._subscribers,e)},et.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return E(n,this._actionSubscribers,e)},et.prototype.watch=function(t,e,n){var i=this;return(0,r.YP)((function(){return t(i.state,i.getters)}),e,Object.assign({},n))},et.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},et.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),S(this,this.state,t,this._modules.get(t),n.preserveState),C(this,this.state)},et.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=O(e.state,t.slice(0,-1));delete n[t[t.length-1]]})),A(this)},et.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},et.prototype.hotUpdate=function(t){this._modules.update(t),A(this,!0)},et.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(et.prototype,nt);ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=st(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.commit;if(t){var o=st(this.$store,"mapMutations",t);if(!o)return;r=o.context.commit}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||st(this.$store,"mapGetters",t))return this.$store.getters[i]},n[r].vuex=!0})),n})),ot((function(t,e){var n={};return rt(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=st(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n}));function rt(t){return it(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function it(t){return Array.isArray(t)||w(t)}function ot(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function st(t,e,n){var r=t._modulesNamespaceMap[n];return r}},4727:function(t,e,n){"use strict";t.exports=n.p+"img/remixicon.symbol.230157b7.svg"},7601:function(t,e,n){"use strict";n.d(e,{Ui:function(){return xe}});n(3767),n(8585),n(8696),n(7658),n(2801);var r=n(3248);function i(t){return t||(t={}),{delay:void 0===t.delay?200:t.delay,initialDelay:void 0===t.initialDelay?0:t.initialDelay,minDelay:void 0===t.minDelay?0:t.minDelay,maxDelay:void 0===t.maxDelay?0:t.maxDelay,factor:void 0===t.factor?0:t.factor,maxAttempts:void 0===t.maxAttempts?3:t.maxAttempts,timeout:void 0===t.timeout?0:t.timeout,jitter:!0===t.jitter,handleError:void 0===t.handleError?null:t.handleError,handleTimeout:void 0===t.handleTimeout?null:t.handleTimeout,beforeAttempt:void 0===t.beforeAttempt?null:t.beforeAttempt,calculateDelay:void 0===t.calculateDelay?null:t.calculateDelay}}async function o(t){return new Promise(((e,n)=>{setTimeout(e,t)}))}function s(t,e){let n=e.delay;if(0===n)return 0;if(e.factor&&(n*=Math.pow(e.factor,t.attemptNum-1),0!==e.maxDelay&&(n=Math.min(n,e.maxDelay))),e.jitter){const t=Math.ceil(e.minDelay),r=Math.floor(n);n=Math.floor(Math.random()*(r-t+1))+t}return Math.round(n)}async function a(t,e){const n=i(e);for(const i of["delay","initialDelay","minDelay","maxDelay","maxAttempts","timeout"]){const t=n[i];if(!Number.isInteger(t)||t<0)throw new Error(`Value for ${i} must be an integer greater than or equal to 0`)}if(n.factor.constructor!==Number||n.factor<0)throw new Error("Value for factor must be a number greater than or equal to 0");if(n.delay<n.minDelay)throw new Error(`delay cannot be less than minDelay (delay: ${n.delay}, minDelay: ${n.minDelay}`);const r={attemptNum:0,attemptsRemaining:n.maxAttempts?n.maxAttempts:-1,aborted:!1,abort(){r.aborted=!0}},a=n.calculateDelay||s;async function c(){if(n.beforeAttempt&&n.beforeAttempt(r,n),r.aborted){const t=new Error("Attempt aborted");throw t.code="ATTEMPT_ABORTED",t}const e=async t=>{if(n.handleError&&await n.handleError(t,r,n),r.aborted||0===r.attemptsRemaining)throw t;r.attemptNum++;const e=a(r,n);return e&&await o(e),c()};return r.attemptsRemaining>0&&r.attemptsRemaining--,n.timeout?new Promise(((i,o)=>{const s=setTimeout((()=>{if(n.handleTimeout)try{i(n.handleTimeout(r,n))}catch(t){o(t)}else{const t=new Error(`Retry timeout (attemptNum: ${r.attemptNum}, timeout: ${n.timeout})`);t.code="ATTEMPT_TIMEOUT",o(t)}}),n.timeout);t(r,n).then((t=>{clearTimeout(s),i(t)})).catch((t=>{clearTimeout(s),e(t).then(i).catch(o)}))})):t(r,n).catch(e)}const l=n.calculateDelay?n.calculateDelay(r,n):n.initialDelay;return l&&await o(l),c()}const c=t=>t.toLowerCase(),l=/^\s*/g,u=t=>t.replace(l,""),h=/([A-Z])/g,d=(t,e)=>u(t.replace(h,(t=>`${e}${c(t)}`)));"undefined"!==typeof TextEncoder&&new TextEncoder;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null);const p=()=>new Map,g=t=>void 0===t?null:t;class m{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let y=new m,w=!0;try{"undefined"!==typeof localStorage&&(y=localStorage,w=!1)}catch(Re){}const b=y,v="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name);let E;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const A=()=>{if(void 0===E)if(v){E=p();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&E.set(e,""),e=r):null!==e&&(E.set(e,r),e=null)}null!==e&&E.set(e,"")}else"object"===typeof location?(E=p(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");E.set(`--${d(e,"-")}`,n),E.set(`-${d(e,"-")}`,n)}}))):E=p();return E},C=t=>A().has(t),S=t=>g(v?{NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}[t.toUpperCase()]:b.getItem(t)),_=t=>C("--"+t)||null!==S(t);_("production");const T=128,I=127,M=t=>t.arr[t.pos++],k=t=>{let e=0,n=0;while(1){const r=t.arr[t.pos++];if(e|=(r&I)<<n,n+=7,r<T)return e>>>0;if(n>35)throw new Error("Integer out of range!")}},N=t=>{let e=k(t);if(0===e)return"";{let n=String.fromCodePoint(M(t));if(--e<100)while(e--)n+=String.fromCodePoint(M(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},O=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},D=(t,e)=>{while(e>I)O(t,T|I&e),e>>>=7;O(t,I&e)},x=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;D(t,r);for(let i=0;i<r;i++)O(t,n.codePointAt(i))};var R;(function(t){t[t["Token"]=0]="Token",t[t["PermissionDenied"]=1]="PermissionDenied",t[t["Authenticated"]=2]="Authenticated"})(R||(R={}));const B=(t,e)=>{D(t,R.Token),x(t,e)},L=(t,e,n)=>{switch(k(t)){case R.PermissionDenied:e(N(t));break;case R.Authenticated:n();break}},P={code:4401,reason:"Unauthorized"},F={code:4403,reason:"Forbidden"},U=t=>Array.from(t.entries()).map((([t,e])=>({clientId:t,...e})));var z;(function(t){t[t["Connecting"]=0]="Connecting",t[t["Open"]=1]="Open",t[t["Closing"]=2]="Closing",t[t["Closed"]=3]="Closed"})(z||(z={}));const H=()=>new Map,j=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},V=String.fromCharCode,W=t=>t.toLowerCase(),$=/^\s*/g,G=t=>t.replace($,""),Y=/([A-Z])/g,X=(t,e)=>G(t.replace(Y,(t=>`${e}${W(t)}`)));"undefined"!==typeof TextEncoder&&new TextEncoder;let q="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});q&&1===q.decode(new Uint8Array).length&&(q=null);const K=t=>void 0===t?null:t;class J{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let Z=new J,Q=!0;try{"undefined"!==typeof localStorage&&(Z=localStorage,Q=!1)}catch(Re){}const tt=Z,et=t=>Q||addEventListener("storage",t),nt="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),rt="undefined"!==typeof window&&!nt;let it;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);const ot=()=>{if(void 0===it)if(nt){it=H();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&it.set(e,""),e=r):null!==e&&(it.set(e,r),e=null)}null!==e&&it.set(e,"")}else"object"===typeof location?(it=H(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");it.set(`--${X(e,"-")}`,n),it.set(`-${X(e,"-")}`,n)}}))):it=H();return it},st=t=>ot().has(t),at=t=>K(nt?{NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}[t.toUpperCase()]:tt.getItem(t)),ct=t=>st("--"+t)||null!==at(t);ct("production");const lt=Math.floor,ut=(t,e)=>t<e?t:e,ht=(t,e)=>t>e?t:e,dt=128,ft=127;class pt{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const gt=()=>new pt,mt=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},yt=t=>{const e=new Uint8Array(mt(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(Ot(t.cbuf.buffer,0,t.cpos),n),e},wt=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},bt=(t,e)=>{while(e>ft)wt(t,dt|ft&e),e>>>=7;wt(t,ft&e)},vt=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;bt(t,r);for(let i=0;i<r;i++)wt(t,n.codePointAt(i))},Et=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=ut(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(ht(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},At=(t,e)=>{bt(t,e.byteLength),Et(t,e)};class Ct{constructor(t){this.arr=t,this.pos=0}}const St=t=>new Ct(t),_t=(t,e)=>{const n=Ot(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Tt=t=>_t(t,Mt(t)),It=t=>t.arr[t.pos++],Mt=t=>{let e=0,n=0;while(1){const r=t.arr[t.pos++];if(e|=(r&ft)<<n,n+=7,r<dt)return e>>>0;if(n>35)throw new Error("Integer out of range!")}},kt=t=>{let e=Mt(t);if(0===e)return"";{let n=String.fromCodePoint(It(t));if(--e<100)while(e--)n+=String.fromCodePoint(It(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},Nt=t=>new Uint8Array(t),Ot=(t,e,n)=>new Uint8Array(t,e,n),Dt=t=>new Uint8Array(t),xt=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=V(t[n]);return btoa(e)},Rt=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Bt=t=>{const e=atob(t),n=Nt(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Lt=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},Pt=rt?xt:Rt,Ft=rt?Bt:Lt,Ut=new Map;class zt{constructor(t){this.room=t,this.onmessage=null,et((e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:Ft(e.newValue||"")})))}postMessage(t){tt.setItem(this.room,Pt(Dt(t)))}}const Ht="undefined"===typeof BroadcastChannel?zt:BroadcastChannel,jt=t=>j(Ut,t,(()=>{const e=new Set,n=new Ht(t);return n.onmessage=t=>e.forEach((e=>e(t.data))),{bc:n,subs:e}})),Vt=(t,e)=>jt(t).subs.add(e),Wt=(t,e)=>jt(t).subs.delete(e),$t=(t,e)=>{const n=jt(t);n.bc.postMessage(e),n.subs.forEach((t=>t(e)))},Gt=Date.now,Yt=()=>new Set,Xt=Array.from;class qt{constructor(){this._observers=H()}on(t,e){j(this._observers,t,Yt).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return Xt((this._observers.get(t)||H()).values()).forEach((t=>t(...e)))}destroy(){this._observers=H()}}const Kt=Object.keys,Jt=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},Zt=t=>Kt(t).length,Qt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),te=(t,e)=>t===e,ee=(t,e)=>{if(null==t||null==e)return te(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!ee(t.get(n),e.get(n)))return!1;break;case Object:if(Zt(t)!==Zt(e))return!1;for(const n in t)if(!Qt(t,n)||!ee(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!ee(t[n],e[n]))return!1;break;default:return!1}return!0},ne=3e4;class re extends qt{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=Gt();null!==this.getLocalState()&&ne/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&ne<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)})),e.length>0&&ie(this,e,"timeout")}),lt(ne/10)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:Gt()});const o=[],s=[],a=[],c=[];null===t?c.push(e):null==i?null!=t&&o.push(e):(s.push(e),ee(i,t)||a.push(e)),(o.length>0||a.length>0||c.length>0)&&this.emit("change",[{added:o,updated:a,removed:c},"local"]),this.emit("update",[{added:o,updated:s,removed:c},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const ie=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:Gt()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},oe=(t,e,n=t.states)=>{const r=e.length,i=gt();bt(i,r);for(let o=0;o<r;o++){const r=e[o],s=n.get(r)||null,a=t.meta.get(r).clock;bt(i,r),bt(i,a),vt(i,JSON.stringify(s))}return yt(i)},se=(t,e,n)=>{const r=St(e),i=Gt(),o=[],s=[],a=[],c=[],l=Mt(r);for(let u=0;u<l;u++){const e=Mt(r);let n=Mt(r);const l=JSON.parse(kt(r)),u=t.meta.get(e),h=t.states.get(e),d=void 0===u?0:u.clock;(d<n||d===n&&null===l&&t.states.has(e))&&(null===l?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,l),t.meta.set(e,{clock:n,lastUpdated:i}),void 0===u&&null!==l?o.push(e):void 0!==u&&null===l?c.push(e):null!==l&&(ee(l,h)||a.push(e),s.push(e)))}(o.length>0||a.length>0||c.length>0)&&t.emit("change",[{added:o,updated:a,removed:c},n]),(o.length>0||s.length>0||c.length>0)&&t.emit("update",[{added:o,updated:s,removed:c},n])},ae=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}},ce=t=>Jt(t,((t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");class le{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}class ue{constructor(t){this.data=t,this.encoder=gt(),this.decoder=St(new Uint8Array(this.data))}readVarUint(){return Mt(this.decoder)}readVarUint8Array(){return Tt(this.decoder)}writeVarUint(t){return bt(this.encoder,t)}writeVarUint8Array(t){return At(this.encoder,t)}length(){return mt(this.encoder)}}const he=0,de=1,fe=2,pe=(t,e)=>{bt(t,he);const n=r.gJ(e);At(t,n)},ge=(t,e,n)=>{bt(t,de),At(t,r.D$(e,n))},me=(t,e,n)=>ge(e,n,Tt(t)),ye=(t,e,n)=>{try{r.NG(e,Tt(t),n)}catch(i){console.error("Caught error while handling a Yjs update",i)}},we=(t,e)=>{bt(t,fe),At(t,e)},be=ye,ve=(t,e,n,r)=>{const i=Mt(t);switch(i){case he:me(t,e,n);break;case de:ye(t,n,r);break;case fe:be(t,n,r);break;default:throw new Error("Unknown message type")}return i};var Ee,Ae;(function(t){t[t["Sync"]=0]="Sync",t[t["Awareness"]=1]="Awareness",t[t["Auth"]=2]="Auth",t[t["QueryAwareness"]=3]="QueryAwareness",t[t["Stateless"]=5]="Stateless"})(Ee||(Ee={})),function(t){t["Connecting"]="connecting",t["Connected"]="connected",t["Disconnected"]="disconnected"}(Ae||(Ae={}));class Ce{constructor(){this.encoder=gt()}get(t){return t.encoder}toUint8Array(){return yt(this.encoder)}}class Se{constructor(t){this.broadcasted=!1,this.message=t}setBroadcasted(t){return this.broadcasted=t,this}apply(t,e=!0){const{message:n}=this,r=n.readVarUint();switch(r){case Ee.Sync:this.applySyncMessage(t,e);break;case Ee.Awareness:this.applyAwarenessMessage(t);break;case Ee.Auth:this.applyAuthMessage(t);break;case Ee.QueryAwareness:this.applyQueryAwarenessMessage(t);break;case Ee.Stateless:t.receiveStateless(kt(n.decoder));break;default:throw new Error(`Can’t apply message of unknown type: ${r}`)}n.length()>1&&(this.broadcasted?t.broadcast(Ce,{encoder:n.encoder}):t.send(Ce,{encoder:n.encoder}))}applySyncMessage(t,e){const{message:n}=this;n.writeVarUint(Ee.Sync);const r=ve(n.decoder,n.encoder,t.document,t);e&&r===de&&(t.synced=!0),r!==fe&&r!==de||t.unsyncedChanges>0&&(t.unsyncedChanges-=1)}applyAwarenessMessage(t){const{message:e}=this;se(t.awareness,e.readVarUint8Array(),t)}applyAuthMessage(t){const{message:e}=this;L(e.decoder,t.permissionDeniedHandler.bind(t),t.authenticatedHandler.bind(t))}applyQueryAwarenessMessage(t){const{message:e}=this;e.writeVarUint(Ee.Awareness),e.writeVarUint8Array(oe(t.awareness,Array.from(t.awareness.getStates().keys())))}}class _e{constructor(t,e={}){this.message=new t,this.encoder=this.message.get(e)}create(){return yt(this.encoder)}send(t){null===t||void 0===t||t.send(this.create())}broadcast(t){$t(t,this.create())}}class Te extends Ce{constructor(){super(...arguments),this.type=Ee.Sync,this.description="First sync step"}get(t){if("undefined"===typeof t.document)throw new Error("The sync step one message requires document as an argument");return bt(this.encoder,this.type),pe(this.encoder,t.document),this.encoder}}class Ie extends Ce{constructor(){super(...arguments),this.type=Ee.Sync,this.description="Second sync step"}get(t){if("undefined"===typeof t.document)throw new Error("The sync step two message requires document as an argument");return bt(this.encoder,this.type),ge(this.encoder,t.document),this.encoder}}class Me extends Ce{constructor(){super(...arguments),this.type=Ee.QueryAwareness,this.description="Queries awareness states"}get(t){return bt(this.encoder,this.type),this.encoder}}class ke extends Ce{constructor(){super(...arguments),this.type=Ee.Auth,this.description="Authentication"}get(t){if("undefined"===typeof t.token)throw new Error("The authentication message requires `token` as an argument.");return bt(this.encoder,this.type),B(this.encoder,t.token),this.encoder}}class Ne extends Ce{constructor(){super(...arguments),this.type=Ee.Awareness,this.description="Awareness states update"}get(t){if("undefined"===typeof t.awareness)throw new Error("The awareness message requires awareness as an argument");if("undefined"===typeof t.clients)throw new Error("The awareness message requires clients as an argument");let e;return bt(this.encoder,this.type),e=void 0===t.states?oe(t.awareness,t.clients):oe(t.awareness,t.clients,t.states),At(this.encoder,e),this.encoder}}class Oe extends Ce{constructor(){super(...arguments),this.type=Ee.Sync,this.description="A document update"}get(t){return bt(this.encoder,this.type),we(this.encoder,t.update),this.encoder}}class De extends Ce{constructor(){super(...arguments),this.type=Ee.Stateless,this.description="A stateless message"}get(t){var e;return bt(this.encoder,this.type),vt(this.encoder,null!==(e=t.payload)&&void 0!==e?e:""),this.encoder}}class xe extends le{constructor(t){super(),this.configuration={name:"",url:"",document:void 0,awareness:void 0,WebSocketPolyfill:void 0,token:null,parameters:{},connect:!0,broadcast:!0,forceSyncInterval:!1,messageReconnectTimeout:3e4,delay:1e3,initialDelay:0,factor:2,maxAttempts:0,minDelay:1e3,maxDelay:3e4,jitter:!0,timeout:0,onAuthenticated:()=>null,onAuthenticationFailed:()=>null,onOpen:()=>null,onConnect:()=>null,onMessage:()=>null,onOutgoingMessage:()=>null,onStatus:()=>null,onSynced:()=>null,onDisconnect:()=>null,onClose:()=>null,onDestroy:()=>null,onAwarenessUpdate:()=>null,onAwarenessChange:()=>null,onStateless:()=>null,quiet:!1},this.subscribedToBroadcastChannel=!1,this.webSocket=null,this.shouldConnect=!0,this.status=Ae.Disconnected,this.isSynced=!1,this.unsyncedChanges=0,this.isAuthenticated=!1,this.lastMessageReceived=0,this.mux=ae(),this.intervals={forceSync:null,connectionChecker:null},this.connectionAttempt=null,this.boundConnect=this.connect.bind(this),this.boundBeforeUnload=this.beforeUnload.bind(this),this.boundBroadcastChannelSubscriber=this.broadcastChannelSubscriber.bind(this),this.setConfiguration(t),this.configuration.document=t.document?t.document:new r.QW,this.configuration.awareness=t.awareness?t.awareness:new re(this.document),this.configuration.WebSocketPolyfill=t.WebSocketPolyfill?t.WebSocketPolyfill:WebSocket,this.on("open",this.configuration.onOpen),this.on("authenticated",this.configuration.onAuthenticated),this.on("authenticationFailed",this.configuration.onAuthenticationFailed),this.on("connect",this.configuration.onConnect),this.on("message",this.configuration.onMessage),this.on("outgoingMessage",this.configuration.onOutgoingMessage),this.on("synced",this.configuration.onSynced),this.on("status",this.configuration.onStatus),this.on("disconnect",this.configuration.onDisconnect),this.on("close",this.configuration.onClose),this.on("destroy",this.configuration.onDestroy),this.on("awarenessUpdate",this.configuration.onAwarenessUpdate),this.on("awarenessChange",this.configuration.onAwarenessChange),this.on("stateless",this.configuration.onStateless),this.awareness.on("update",(()=>{this.emit("awarenessUpdate",{states:U(this.awareness.getStates())})})),this.awareness.on("change",(()=>{this.emit("awarenessChange",{states:U(this.awareness.getStates())})})),this.document.on("update",this.documentUpdateHandler.bind(this)),this.awareness.on("update",this.awarenessUpdateHandler.bind(this)),this.registerEventListeners(),this.intervals.connectionChecker=setInterval(this.checkConnection.bind(this),this.configuration.messageReconnectTimeout/10),this.configuration.forceSyncInterval&&(this.intervals.forceSync=setInterval(this.forceSync.bind(this),this.configuration.forceSyncInterval)),"undefined"!==typeof t.connect&&(this.shouldConnect=t.connect),this.shouldConnect&&this.connect()}setConfiguration(t={}){this.configuration={...this.configuration,...t}}async connect(){if(this.status===Ae.Connected)return;this.cancelWebsocketRetry&&(this.cancelWebsocketRetry(),this.cancelWebsocketRetry=void 0),this.unsyncedChanges=0,this.shouldConnect=!0,this.subscribeToBroadcastChannel();const t=()=>{let t=!1;const e=a(this.createWebSocketConnection.bind(this),{delay:this.configuration.delay,initialDelay:this.configuration.initialDelay,factor:this.configuration.factor,maxAttempts:this.configuration.maxAttempts,minDelay:this.configuration.minDelay,maxDelay:this.configuration.maxDelay,jitter:this.configuration.jitter,timeout:this.configuration.timeout,beforeAttempt:e=>{this.shouldConnect&&!t||e.abort()}}).catch((t=>{if(t&&"ATTEMPT_ABORTED"!==t.code)throw t}));return{retryPromise:e,cancelFunc:()=>{t=!0}}},{retryPromise:e,cancelFunc:n}=t();return this.cancelWebsocketRetry=n,e}createWebSocketConnection(){return new Promise(((t,e)=>{this.webSocket&&(this.webSocket.close(),this.webSocket=null);const n=new this.configuration.WebSocketPolyfill(this.url);n.binaryType="arraybuffer",n.onmessage=this.onMessage.bind(this),n.onclose=this.onClose.bind(this),n.onopen=this.onOpen.bind(this),n.onerror=t=>{e(t)},this.webSocket=n,this.synced=!1,this.status=Ae.Connecting,this.emit("status",{status:Ae.Connecting}),this.connectionAttempt={resolve:t,reject:e}}))}resolveConnectionAttempt(){var t;null===(t=this.connectionAttempt)||void 0===t||t.resolve(),this.connectionAttempt=null,this.status=Ae.Connected,this.emit("status",{status:Ae.Connected}),this.emit("connect")}stopConnectionAttempt(){this.connectionAttempt=null}rejectConnectionAttempt(){var t;null===(t=this.connectionAttempt)||void 0===t||t.reject(),this.connectionAttempt=null}get document(){return this.configuration.document}get awareness(){return this.configuration.awareness}get hasUnsyncedChanges(){return this.unsyncedChanges>0}checkConnection(){var t;this.status===Ae.Connected&&this.lastMessageReceived&&(this.configuration.messageReconnectTimeout>=Gt()-this.lastMessageReceived||null===(t=this.webSocket)||void 0===t||t.close())}forceSync(){this.webSocket&&this.send(Te,{document:this.document})}beforeUnload(){ie(this.awareness,[this.document.clientID],"window unload")}registerEventListeners(){"undefined"!==typeof window&&(window.addEventListener("online",this.boundConnect),window.addEventListener("beforeunload",this.boundBeforeUnload))}sendStateless(t){this.send(De,{payload:t})}documentUpdateHandler(t,e){e!==this&&(this.unsyncedChanges+=1,this.send(Oe,{update:t},!0))}awarenessUpdateHandler({added:t,updated:e,removed:n},r){const i=t.concat(e).concat(n);this.send(Ne,{awareness:this.awareness,clients:i},!0)}permissionDeniedHandler(t){this.emit("authenticationFailed",{reason:t}),this.isAuthenticated=!1,this.shouldConnect=!1}authenticatedHandler(){this.isAuthenticated=!0,this.emit("authenticated"),this.startSync()}get serverUrl(){while("/"===this.configuration.url[this.configuration.url.length-1])return this.configuration.url.slice(0,this.configuration.url.length-1);return this.configuration.url}get url(){const t=ce(this.configuration.parameters);return`${this.serverUrl}/${this.configuration.name}${0===t.length?"":`?${t}`}`}get synced(){return this.isSynced}set synced(t){this.isSynced!==t&&(this.isSynced=t,this.emit("synced",{state:t}),this.emit("sync",{state:t}))}receiveStateless(t){this.emit("stateless",{payload:t})}get isAuthenticationRequired(){return!!this.configuration.token&&!this.isAuthenticated}disconnect(){if(this.shouldConnect=!1,this.disconnectBroadcastChannel(),null!==this.webSocket)try{this.webSocket.close()}catch{}}async onOpen(t){this.emit("open",{event:t}),this.isAuthenticationRequired?this.send(ke,{token:await this.getToken()}):this.startSync()}async getToken(){if("function"===typeof this.configuration.token){const t=await this.configuration.token();return t}return this.configuration.token}startSync(){this.send(Te,{document:this.document}),null!==this.awareness.getLocalState()&&this.send(Ne,{awareness:this.awareness,clients:[this.document.clientID]})}send(t,e,n=!1){var r;if(n&&this.mux((()=>{this.broadcast(t,e)})),(null===(r=this.webSocket)||void 0===r?void 0:r.readyState)===z.Open){const n=new _e(t,e);this.emit("outgoingMessage",{message:n.message}),n.send(this.webSocket)}}onMessage(t){this.resolveConnectionAttempt(),this.lastMessageReceived=Gt();const e=new ue(t.data);this.emit("message",{event:t,message:e}),new Se(e).apply(this)}onClose(t){this.emit("close",{event:t}),this.webSocket=null,this.isAuthenticated=!1,this.synced=!1,this.status===Ae.Connected&&(ie(this.awareness,Array.from(this.awareness.getStates().keys()).filter((t=>t!==this.document.clientID)),this),this.status=Ae.Disconnected,this.emit("status",{status:Ae.Disconnected}),this.emit("disconnect",{event:t})),t.code===P.code&&(this.configuration.quiet||console.warn("[HocuspocusProvider] An authentication token is required, but you didn’t send one. Try adding a `token` to your HocuspocusProvider configuration. Won’t try again."),this.shouldConnect=!1),t.code===F.code&&(this.configuration.quiet||console.warn("[HocuspocusProvider] The provided authentication token isn’t allowed to connect to this server. Will try again.")),this.connectionAttempt?this.rejectConnectionAttempt():this.shouldConnect&&this.connect(),this.shouldConnect||this.status!==Ae.Disconnected&&(this.status=Ae.Disconnected,this.emit("status",{status:Ae.Disconnected}),this.emit("disconnect",{event:t}))}destroy(){this.emit("destroy"),this.intervals.forceSync&&clearInterval(this.intervals.forceSync),clearInterval(this.intervals.connectionChecker),ie(this.awareness,[this.document.clientID],"provider destroy"),this.stopConnectionAttempt(),this.disconnect(),this.awareness.off("update",this.awarenessUpdateHandler),this.document.off("update",this.documentUpdateHandler),this.removeAllListeners(),"undefined"!==typeof window&&(window.removeEventListener("online",this.boundConnect),window.removeEventListener("beforeunload",this.boundBeforeUnload))}get broadcastChannel(){return`${this.serverUrl}/${this.configuration.name}`}broadcastChannelSubscriber(t){this.mux((()=>{const e=new ue(t);new Se(e).setBroadcasted(!0).apply(this,!1)}))}subscribeToBroadcastChannel(){this.subscribedToBroadcastChannel||(Vt(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!0),this.mux((()=>{this.broadcast(Te,{document:this.document}),this.broadcast(Ie,{document:this.document}),this.broadcast(Me),this.broadcast(Ne,{awareness:this.awareness,clients:[this.document.clientID]})}))}disconnectBroadcastChannel(){this.send(Ne,{awareness:this.awareness,clients:[this.document.clientID],states:new Map},!0),this.subscribedToBroadcastChannel&&(Wt(this.broadcastChannel,this.boundBroadcastChannelSubscriber),this.subscribedToBroadcastChannel=!1)}broadcast(t,e){this.configuration.broadcast&&this.subscribedToBroadcastChannel&&new _e(t,e).broadcast(this.broadcastChannel)}setAwarenessField(t,e){this.awareness.setLocalStateField(t,e)}}},2066:function(t,e,n){"use strict";n.d(e,{ML:function(){return Tn},hj:function(){return Mt},vc:function(){return On},NB:function(){return Dn},nU:function(){return it},Nl:function(){return J},Jo:function(){return Pe},EG:function(){return Ge},xh:function(){return Kt},Cf:function(){return In},K9:function(){return xn},P1:function(){return et},x2:function(){return Mn},pr:function(){return Ye},zK:function(){return kn},S0:function(){return Nn}});n(7658);var r=n(157),i=n(1460),o=n(203),s=n(1543),a=n(1382);const c=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function l(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const u=(t,e,n)=>{let i=l(t,n);if(!i)return!1;let o=f(i);if(!o){let n=i.blockRange(),r=n&&(0,a.k9)(n);return null!=r&&(e&&e(t.tr.lift(n,r).scrollIntoView()),!0)}let c=o.nodeBefore;if(!c.type.spec.isolating&&O(t,o,e))return!0;if(0==i.parent.content.size&&(h(c,"end")||r.qv.isSelectable(c))){let n=(0,a.dR)(t.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(h(c,"end")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos,-1)),-1):r.qv.create(i.doc,o.pos-c.nodeSize)),e(i.scrollIntoView())}return!0}}return!(!c.isAtom||o.depth!=i.depth-1)&&(e&&e(t.tr.delete(o.pos-c.nodeSize,o.pos).scrollIntoView()),!0)};function h(t,e,n=!1){for(let r=t;r;r="start"==e?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const d=(t,e,n)=>{let{$head:i,empty:o}=t.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=f(i)}let a=s&&s.nodeBefore;return!(!a||!r.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(r.qv.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)};function f(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function p(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const g=(t,e,n)=>{let i=p(t,n);if(!i)return!1;let o=y(i);if(!o)return!1;let c=o.nodeAfter;if(O(t,o,e))return!0;if(0==i.parent.content.size&&(h(c,"start")||r.qv.isSelectable(c))){let n=(0,a.dR)(t.doc,i.before(),i.after(),s.p2.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(h(c,"start")?r.Y1.findFrom(i.doc.resolve(i.mapping.map(o.pos)),1):r.qv.create(i.doc,i.mapping.map(o.pos))),e(i.scrollIntoView())}return!0}}return!(!c.isAtom||o.depth!=i.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+c.nodeSize).scrollIntoView()),!0)},m=(t,e,n)=>{let{$head:i,empty:o}=t.selection,s=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=y(i)}let a=s&&s.nodeAfter;return!(!a||!r.qv.isSelectable(a))&&(e&&e(t.tr.setSelection(r.qv.create(t.doc,s.pos)).scrollIntoView()),!0)};function y(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const w=(t,e)=>{let n,i=t.selection,o=i instanceof r.qv;if(o){if(i.node.isTextblock||!(0,a.Mn)(t.doc,i.from))return!1;n=i.from}else if(n=(0,a.GJ)(t.doc,i.from,-1),null==n)return!1;if(e){let i=t.tr.join(n);o&&i.setSelection(r.qv.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},b=(t,e)=>{let n,i=t.selection;if(i instanceof r.qv){if(i.node.isTextblock||!(0,a.Mn)(t.doc,i.to))return!1;n=i.to}else if(n=(0,a.GJ)(t.doc,i.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},v=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),o=i&&(0,a.k9)(i);return null!=o&&(e&&e(t.tr.lift(i,o).scrollIntoView()),!0)},E=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function A(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const C=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),s=n.indexAfter(-1),a=A(o.contentMatchAt(s));if(!a||!o.canReplaceWith(s,s,a))return!1;if(e){let i=n.after(),o=t.tr.replaceWith(i,i,a.createAndFill());o.setSelection(r.Y1.near(o.doc.resolve(i),1)),e(o.scrollIntoView())}return!0},S=(t,e)=>{let n=t.selection,{$from:i,$to:o}=n;if(n instanceof r.C1||i.parent.inlineContent||o.parent.inlineContent)return!1;let s=A(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let n=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,a=t.tr.insert(n,s.createAndFill());a.setSelection(r.Bs.create(a.doc,n+1)),e(a.scrollIntoView())}return!0},_=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if((0,a.Ax)(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&(0,a.k9)(r);return null!=i&&(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function T(t){return(e,n)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof r.qv&&e.selection.node.isBlock)return!(!i.parentOffset||!(0,a.Ax)(e.doc,i.pos))&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let s=o.parentOffset==o.parent.content.size,c=e.tr;(e.selection instanceof r.Bs||e.selection instanceof r.C1)&&c.deleteSelection();let l=0==i.depth?null:A(i.node(-1).contentMatchAt(i.indexAfter(-1))),u=t&&t(o.parent,s),h=u?[u]:s&&l?[{type:l}]:void 0,d=(0,a.Ax)(c.doc,c.mapping.map(i.pos),1,h);if(h||d||!(0,a.Ax)(c.doc,c.mapping.map(i.pos),1,l?[{type:l}]:void 0)||(l&&(h=[{type:l}]),d=!0),d&&(c.split(c.mapping.map(i.pos),1,h),!s&&!i.parentOffset&&i.parent.type!=l)){let t=c.mapping.map(i.before()),e=c.doc.resolve(t);l&&i.node(-1).canReplaceWith(e.index(),e.index()+1,l)&&c.setNodeMarkup(c.mapping.map(i.before()),l)}n(c.scrollIntoView())}return!0}}const I=T(),M=(t,e)=>{let n,{$from:i,to:o}=t.selection,s=i.sharedDepth(o);return 0!=s&&(n=i.before(s),e&&e(t.tr.setSelection(r.qv.create(t.doc,n))),!0)},k=(t,e)=>(e&&e(t.tr.setSelection(new r.C1(t.doc))),!0);function N(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,o=e.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(o,o+1)||!i.isTextblock&&!(0,a.Mn)(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function O(t,e,n){let i,o,c=e.nodeBefore,l=e.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(N(t,e,n))return!0;let u=e.parent.canReplace(e.index(),e.index()+1);if(u&&(i=(o=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&o.matchType(i[0]||l.type).validEnd){if(n){let r=e.pos+l.nodeSize,o=s.HY.empty;for(let t=i.length-1;t>=0;t--)o=s.HY.from(i[t].create(null,o));o=s.HY.from(c.copy(o));let u=t.tr.step(new a.FC(e.pos-1,r,e.pos,r,new s.p2(o,1,0),i.length,!0)),h=r+2*i.length;(0,a.Mn)(u.doc,h)&&u.join(h),n(u.scrollIntoView())}return!0}let d=r.Y1.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&(0,a.k9)(f);if(null!=p&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(u&&h(l,"start",!0)&&h(c,"end")){let r=c,i=[];for(;;){if(i.push(r),r.isTextblock)break;r=r.lastChild}let o=l,u=1;for(;!o.isTextblock;o=o.firstChild)u++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=s.HY.empty;for(let t=i.length-1;t>=0;t--)r=s.HY.from(i[t].copy(r));let o=t.tr.step(new a.FC(e.pos-i.length,e.pos+l.nodeSize,e.pos+u,e.pos+l.nodeSize-u,new s.p2(r,i.length,0),0,!0));n(o.scrollIntoView())}return!0}}return!1}function D(t){return function(e,n){let i=e.selection,o=t<0?i.$from:i.$to,s=o.depth;while(o.node(s).isInline){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(e.tr.setSelection(r.Bs.create(e.doc,t<0?o.start(s):o.end(s)))),!0)}}const x=D(-1),R=D(1);function B(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),c=s&&(0,a.nd)(s,t,e);return!!c&&(r&&r(n.tr.wrap(s,c).scrollIntoView()),!0)}}function L(t,e=null){return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)i=!0;else{let e=n.doc.resolve(o),r=e.index();i=e.parent.canReplaceWith(r,r+1,t)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,t,e)}r(i.scrollIntoView())}return!0}}function P(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let F=P(c,u,d),U=P(c,g,m);const z={Enter:P(E,S,_,I),"Mod-Enter":C,Backspace:F,"Mod-Backspace":F,"Shift-Backspace":F,Delete:U,"Mod-Delete":U,"Mod-a":k},H={"Ctrl-h":z["Backspace"],"Alt-Backspace":z["Mod-Backspace"],"Ctrl-d":z["Delete"],"Ctrl-Alt-Backspace":z["Mod-Delete"],"Alt-Delete":z["Mod-Delete"],"Alt-d":z["Mod-Delete"],"Ctrl-a":x,"Ctrl-e":R};for(let Rn in z)H[Rn]=z[Rn];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function j(t,e=null){return function(n,r){let{$from:i,$to:o}=n.selection,c=i.blockRange(o),l=!1,u=c;if(!c)return!1;if(c.depth>=2&&i.node(c.depth-1).type.compatibleContent(t)&&0==c.startIndex){if(0==i.index(c.depth-1))return!1;let t=n.doc.resolve(c.start-2);u=new s.Ts(t,t,c.depth),c.endIndex<c.parent.childCount&&(c=new s.Ts(i,n.doc.resolve(o.end(c.depth)),c.depth)),l=!0}let h=(0,a.nd)(u,t,e,c);return!!h&&(r&&r(V(n.tr,c,h,l,t).scrollIntoView()),!0)}}function V(t,e,n,r,i){let o=s.HY.empty;for(let a=n.length-1;a>=0;a--)o=s.HY.from(n[a].type.create(n[a].attrs,o));t.step(new a.FC(e.start-(r?2:0),e.end,e.start,e.end,new s.p2(o,0,0),n.length,!0));let c=0;for(let s=0;s<n.length;s++)n[s].type==i&&(c=s+1);let l=n.length-c,u=e.start+n.length-(r?2:0),h=e.parent;for(let s=e.startIndex,d=e.endIndex,f=!0;s<d;s++,f=!1)!f&&(0,a.Ax)(t.doc,u,l)&&(t.split(u,l),u+=2*l),u+=h.child(s).nodeSize;return t}function W(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));return!!o&&(!n||(r.node(o.depth-1).type==t?$(e,n,t,o):G(e,n,o)))}}function $(t,e,n,r){let i=t.tr,o=r.end,c=r.$to.end(r.depth);o<c&&(i.step(new a.FC(o-1,c,o,c,new s.p2(s.HY.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new s.Ts(i.doc.resolve(r.$from.pos),i.doc.resolve(c),r.depth));const l=(0,a.k9)(r);if(null==l)return!1;i.lift(r,l);let u=i.mapping.map(o,-1)-1;return(0,a.Mn)(i.doc,u)&&i.join(u),e(i.scrollIntoView()),!0}function G(t,e,n){let r=t.tr,i=n.parent;for(let s=n.end,a=n.endIndex-1,g=n.startIndex;a>g;a--)s-=i.child(a).nodeSize,r.delete(s-1,s+1);let o=r.doc.resolve(n.start),c=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=0==n.startIndex,u=n.endIndex==i.childCount,h=o.node(-1),d=o.index(-1);if(!h.canReplace(d+(l?0:1),d+1,c.content.append(u?s.HY.empty:s.HY.from(i))))return!1;let f=o.pos,p=f+c.nodeSize;return r.step(new a.FC(f-(l?1:0),p+(u?1:0),f+1,p-1,new s.p2((l?s.HY.empty:s.HY.from(i.copy(s.HY.empty))).append(u?s.HY.empty:s.HY.from(i.copy(s.HY.empty))),l?0:1,u?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Y(t){return function(e,n){let{$from:r,$to:i}=e.selection,o=r.blockRange(i,(e=>e.childCount>0&&e.firstChild.type==t));if(!o)return!1;let c=o.startIndex;if(0==c)return!1;let l=o.parent,u=l.child(c-1);if(u.type!=t)return!1;if(n){let r=u.lastChild&&u.lastChild.type==l.type,i=s.HY.from(r?t.create():null),c=new s.p2(s.HY.from(t.create(null,s.HY.from(l.type.create(null,i)))),r?3:1,0),h=o.start,d=o.end;n(e.tr.step(new a.FC(h-(r?3:1),d,h,d,c,1,!0)).scrollIntoView())}return!0}}function X(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),filterTransaction:e.filterTransaction,plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class q{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,o=this.buildProps(i);return Object.fromEntries(Object.entries(t).map((([t,e])=>{const n=(...t)=>{const n=e(...t)(o);return i.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(i),n};return[t,n]})))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s=[],a=!!t,c=t||i.tr,l=()=>(a||!e||c.getMeta("preventDispatch")||this.hasCustomState||o.dispatch(c),s.every((t=>!0===t))),u={...Object.fromEntries(Object.entries(n).map((([t,n])=>{const r=(...t)=>{const r=this.buildProps(c,e),i=n(...t)(r);return s.push(i),u};return[t,r]}))),run:l};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,o=this.buildProps(i,r),s=Object.fromEntries(Object.entries(e).map((([t,e])=>[t,(...t)=>e(...t)({...o,dispatch:void 0})])));return{...s,chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:o}=r;i.storedMarks&&t.setStoredMarks(i.storedMarks);const s={tr:t,editor:r,view:o,state:X({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map((([t,e])=>[t,(...t)=>e(...t)(s)])))}};return s}}class K{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter((t=>t!==e)):delete this.callbacks[t]),this}removeAllListeners(){this.callbacks={}}}function J(t,e,n){if(void 0===t.config[e]&&t.parent)return J(t.parent,e,n);if("function"===typeof t.config[e]){const r=t.config[e].bind({...n,parent:t.parent?J(t.parent,e,n):null});return r}return t.config[e]}function Z(t){const e=t.filter((t=>"extension"===t.type)),n=t.filter((t=>"node"===t.type)),r=t.filter((t=>"mark"===t.type));return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Q(t){const e=[],{nodeExtensions:n,markExtensions:r}=Z(t),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=J(t,"addGlobalAttributes",n);if(!r)return;const i=r();i.forEach((t=>{t.types.forEach((n=>{Object.entries(t.attributes).forEach((([t,r])=>{e.push({type:n,name:t,attribute:{...o,...r}})}))}))}))})),i.forEach((t=>{const n={name:t.name,options:t.options,storage:t.storage},r=J(t,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach((([n,r])=>{const i={...o,...r};(null===r||void 0===r?void 0:r.isRequired)&&void 0===(null===r||void 0===r?void 0:r.default)&&delete i.default,e.push({type:t.name,name:n,attribute:i})}))})),e}function tt(t,e){if("string"===typeof t){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function et(...t){return t.filter((t=>!!t)).reduce(((t,e)=>{const n={...t};return Object.entries(e).forEach((([t,e])=>{const r=n[t];n[t]=r?"class"===t?[n[t],e].join(" "):"style"===t?[n[t],e].join("; "):e:e})),n}),{})}function nt(t,e){return e.filter((t=>t.attribute.rendered)).map((e=>e.attribute.renderHTML?e.attribute.renderHTML(t.attrs)||{}:{[e.name]:t.attrs[e.name]})).reduce(((t,e)=>et(t,e)),{})}function rt(t){return"function"===typeof t}function it(t,e=undefined,...n){return rt(t)?e?t.bind(e)(...n):t(...n):t}function ot(t={}){return 0===Object.keys(t).length&&t.constructor===Object}function st(t){return"string"!==typeof t?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):"true"===t||"false"!==t&&t}function at(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(!1===r)return!1;const i=e.reduce(((t,e)=>{const r=e.attribute.parseHTML?e.attribute.parseHTML(n):st(n.getAttribute(e.name));return null===r||void 0===r?t:{...t,[e.name]:r}}),{});return{...r,...i}}}}function ct(t){return Object.fromEntries(Object.entries(t).filter((([t,e])=>("attrs"!==t||!ot(e))&&(null!==e&&void 0!==e))))}function lt(t){var e;const n=Q(t),{nodeExtensions:r,markExtensions:i}=Z(t),o=null===(e=r.find((t=>J(t,"topNode"))))||void 0===e?void 0:e.name,a=Object.fromEntries(r.map((e=>{const r=n.filter((t=>t.type===e.name)),i={name:e.name,options:e.options,storage:e.storage},o=t.reduce(((t,n)=>{const r=J(n,"extendNodeSchema",i);return{...t,...r?r(e):{}}}),{}),s=ct({...o,content:it(J(e,"content",i)),marks:it(J(e,"marks",i)),group:it(J(e,"group",i)),inline:it(J(e,"inline",i)),atom:it(J(e,"atom",i)),selectable:it(J(e,"selectable",i)),draggable:it(J(e,"draggable",i)),code:it(J(e,"code",i)),defining:it(J(e,"defining",i)),isolating:it(J(e,"isolating",i)),attrs:Object.fromEntries(r.map((t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),a=it(J(e,"parseHTML",i));a&&(s.parseDOM=a.map((t=>at(t,r))));const c=J(e,"renderHTML",i);c&&(s.toDOM=t=>c({node:t,HTMLAttributes:nt(t,r)}));const l=J(e,"renderText",i);return l&&(s.toText=l),[e.name,s]}))),c=Object.fromEntries(i.map((e=>{const r=n.filter((t=>t.type===e.name)),i={name:e.name,options:e.options,storage:e.storage},o=t.reduce(((t,n)=>{const r=J(n,"extendMarkSchema",i);return{...t,...r?r(e):{}}}),{}),s=ct({...o,inclusive:it(J(e,"inclusive",i)),excludes:it(J(e,"excludes",i)),group:it(J(e,"group",i)),spanning:it(J(e,"spanning",i)),code:it(J(e,"code",i)),attrs:Object.fromEntries(r.map((t=>{var e;return[t.name,{default:null===(e=null===t||void 0===t?void 0:t.attribute)||void 0===e?void 0:e.default}]})))}),a=it(J(e,"parseHTML",i));a&&(s.parseDOM=a.map((t=>at(t,r))));const c=J(e,"renderHTML",i);return c&&(s.toDOM=t=>c({mark:t,HTMLAttributes:nt(t,r)})),[e.name,s]})));return new s.V_({topNode:o,nodes:a,marks:c})}function ut(t,e){return e.nodes[t]||e.marks[t]||null}function ht(t,e){return Array.isArray(e)?e.some((e=>{const n="string"===typeof e?e:e.name;return n===t.name})):e}const dt=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,((t,e,i,o)=>{var s,a;const c=(null===(a=(s=t.type.spec).toText)||void 0===a?void 0:a.call(s,{node:t,pos:e,parent:i,index:o}))||t.textContent||"%leaf%";n+=c.slice(0,Math.max(0,r-e))})),n};function ft(t){return"[object RegExp]"===Object.prototype.toString.call(t)}class pt{constructor(t){this.find=t.find,this.handler=t.handler}}const gt=(t,e)=>{if(ft(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function mt(t){var e;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=t,{view:c}=n;if(c.composing)return!1;const l=c.state.doc.resolve(r);if(l.parent.type.spec.code||(null===(e=l.nodeBefore||l.nodeAfter)||void 0===e?void 0:e.marks.find((t=>t.type.spec.code))))return!1;let u=!1;const h=dt(l)+o;return s.forEach((t=>{if(u)return;const e=gt(h,t.find);if(!e)return;const s=c.state.tr,l=X({state:c.state,transaction:s}),d={from:r-(e[0].length-o.length),to:i},{commands:f,chain:p,can:g}=new q({editor:n,state:l}),m=t.handler({state:l,range:d,match:e,commands:f,chain:p,can:g});null!==m&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),c.dispatch(s),u=!0)})),u}function yt(t){const{editor:e,rules:n}=t,i=new r.Sy({state:{init(){return null},apply(t,e){const n=t.getMeta(i);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput(t,r,o,s){return mt({editor:e,from:r,to:o,text:s,rules:n,plugin:i})},handleDOMEvents:{compositionend:t=>(setTimeout((()=>{const{$cursor:r}=t.state.selection;r&&mt({editor:e,from:r.pos,to:r.pos,text:"",rules:n,plugin:i})})),!1)},handleKeyDown(t,r){if("Enter"!==r.key)return!1;const{$cursor:o}=t.state.selection;return!!o&&mt({editor:e,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}function wt(t){return"number"===typeof t}class bt{constructor(t){this.find=t.find,this.handler=t.handler}}const vt=(t,e)=>{if(ft(e))return[...t.matchAll(e)];const n=e(t);return n?n.map((e=>{const n=[e.text];return n.index=e.index,n.input=t,n.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(e.replaceWith)),n})):[]};function Et(t){const{editor:e,state:n,from:r,to:i,rule:o}=t,{commands:s,chain:a,can:c}=new q({editor:e,state:n}),l=[];n.doc.nodesBetween(r,i,((t,e)=>{if(!t.isTextblock||t.type.spec.code)return;const u=Math.max(r,e),h=Math.min(i,e+t.content.size),d=t.textBetween(u-e,h-e,void 0,"￼"),f=vt(d,o.find);f.forEach((t=>{if(void 0===t.index)return;const e=u+t.index+1,r=e+t[0].length,i={from:n.tr.mapping.map(e),to:n.tr.mapping.map(r)},h=o.handler({state:n,range:i,match:t,commands:s,chain:a,can:c});l.push(h)}))}));const u=l.every((t=>null!==t));return u}function At(t){const{editor:e,rules:n}=t;let i=null,o=!1,s=!1;const a=n.map((t=>new r.Sy({view(t){const e=e=>{var n;i=(null===(n=t.dom.parentElement)||void 0===n?void 0:n.contains(e.target))?t.dom.parentElement:null};return window.addEventListener("dragstart",e),{destroy(){window.removeEventListener("dragstart",e)}}},props:{handleDOMEvents:{drop:t=>(s=i===t.dom.parentElement,!1),paste:(t,e)=>{var n;const r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/html");return o=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(n,r,i)=>{const a=n[0],c="paste"===a.getMeta("uiEvent")&&!o,l="drop"===a.getMeta("uiEvent")&&!s;if(!c&&!l)return;const u=r.doc.content.findDiffStart(i.doc.content),h=r.doc.content.findDiffEnd(i.doc.content);if(!wt(u)||!h||u===h.b)return;const d=i.tr,f=X({state:i,transaction:d}),p=Et({editor:e,state:f,from:Math.max(u-1,0),to:h.b-1,rule:t});return p&&d.steps.length?d:void 0}})));return a}function Ct(t){const e=t.filter(((e,n)=>t.indexOf(e)!==n));return[...new Set(e)]}class St{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=St.resolve(t),this.schema=lt(this.extensions),this.extensions.forEach((t=>{var e;this.editor.extensionStorage[t.name]=t.storage;const n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:ut(t.name,this.schema)};if("mark"===t.type){const r=null===(e=it(J(t,"keepOnSplit",n)))||void 0===e||e;r&&this.splittableMarks.push(t.name)}const r=J(t,"onBeforeCreate",n);r&&this.editor.on("beforeCreate",r);const i=J(t,"onCreate",n);i&&this.editor.on("create",i);const o=J(t,"onUpdate",n);o&&this.editor.on("update",o);const s=J(t,"onSelectionUpdate",n);s&&this.editor.on("selectionUpdate",s);const a=J(t,"onTransaction",n);a&&this.editor.on("transaction",a);const c=J(t,"onFocus",n);c&&this.editor.on("focus",c);const l=J(t,"onBlur",n);l&&this.editor.on("blur",l);const u=J(t,"onDestroy",n);u&&this.editor.on("destroy",u)}))}static resolve(t){const e=St.sort(St.flatten(t)),n=Ct(e.map((t=>t.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((t=>`'${t}'`)).join(", ")}]. This can lead to issues.`),e}static flatten(t){return t.map((t=>{const e={name:t.name,options:t.options,storage:t.storage},n=J(t,"addExtensions",e);return n?[t,...this.flatten(n())]:t})).flat(10)}static sort(t){const e=100;return t.sort(((t,n)=>{const r=J(t,"priority")||e,i=J(n,"priority")||e;return r>i?-1:r<i?1:0}))}get commands(){return this.extensions.reduce(((t,e)=>{const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ut(e.name,this.schema)},r=J(e,"addCommands",n);return r?{...t,...r()}:t}),{})}get plugins(){const{editor:t}=this,e=St.sort([...this.extensions].reverse()),n=[],r=[],i=e.map((e=>{const i={name:e.name,options:e.options,storage:e.storage,editor:t,type:ut(e.name,this.schema)},s=[],a=J(e,"addKeyboardShortcuts",i);let c={};if("mark"===e.type&&e.config.exitable&&(c.ArrowRight=()=>On.handleExit({editor:t,mark:e})),a){const e=Object.fromEntries(Object.entries(a()).map((([e,n])=>[e,()=>n({editor:t})])));c={...c,...e}}const l=(0,o.h)(c);s.push(l);const u=J(e,"addInputRules",i);ht(e,t.options.enableInputRules)&&u&&n.push(...u());const h=J(e,"addPasteRules",i);ht(e,t.options.enablePasteRules)&&h&&r.push(...h());const d=J(e,"addProseMirrorPlugins",i);if(d){const t=d();s.push(...t)}return s})).flat();return[yt({editor:t,rules:n}),...At({editor:t,rules:r}),...i]}get attributes(){return Q(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Z(this.extensions);return Object.fromEntries(e.filter((t=>!!J(t,"addNodeView"))).map((e=>{const n=this.attributes.filter((t=>t.type===e.name)),r={name:e.name,options:e.options,storage:e.storage,editor:t,type:tt(e.name,this.schema)},i=J(e,"addNodeView",r);if(!i)return[];const o=(r,o,s,a)=>{const c=nt(r,n);return i()({editor:t,node:r,getPos:s,decorations:a,HTMLAttributes:c,extension:e})};return[e.name,o]})))}}function _t(t){return Object.prototype.toString.call(t).slice(8,-1)}function Tt(t){return"Object"===_t(t)&&(t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype)}function It(t,e){const n={...t};return Tt(t)&&Tt(e)&&Object.keys(e).forEach((r=>{Tt(e[r])?r in t?n[r]=It(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})})),n}class Mt{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(J(this,"addOptions",{name:this.name}))),this.storage=it(J(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Mt(t)}configure(t={}){const e=this.extend();return e.options=It(this.options,t),e.storage=it(J(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Mt(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(J(e,"addOptions",{name:e.name})),e.storage=it(J(e,"addStorage",{name:e.name,options:e.options})),e}}function kt(t,e,n){const{from:r,to:i}=e,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="",c=!0;return t.nodesBetween(r,i,((t,n,l,u)=>{var h;const d=null===s||void 0===s?void 0:s[t.type.name];d?(t.isBlock&&!c&&(a+=o,c=!0),l&&(a+=d({node:t,pos:n,parent:l,index:u,range:e}))):t.isText?(a+=null===(h=null===t||void 0===t?void 0:t.text)||void 0===h?void 0:h.slice(Math.max(r,n)-n,i-n),c=!1):t.isBlock&&!c&&(a+=o,c=!0)})),a}function Nt(t){return Object.fromEntries(Object.entries(t.nodes).filter((([,t])=>t.spec.toText)).map((([t,e])=>[t,e.spec.toText])))}const Ot=Mt.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:o}=i,s=Math.min(...o.map((t=>t.$from.pos))),a=Math.max(...o.map((t=>t.$to.pos))),c=Nt(n),l={from:s,to:a};return kt(r,l,{textSerializers:c})}}})]}}),Dt=()=>({editor:t,view:e})=>(requestAnimationFrame((()=>{var n;t.isDestroyed||(e.dom.blur(),null===(n=null===window||void 0===window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())})),!0),xt=(t=!1)=>({commands:e})=>e.setContent("",t),Rt=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return!n||(i.forEach((({$from:n,$to:r})=>{t.doc.nodesBetween(n.pos,r.pos,((t,n)=>{if(t.type.isText)return;const{doc:r,mapping:i}=e,o=r.resolve(i.map(n)),s=r.resolve(i.map(n+t.nodeSize)),c=o.blockRange(s);if(!c)return;const l=(0,a.k9)(c);if(t.type.isTextblock){const{defaultType:t}=o.parent.contentMatchAt(o.index());e.setNodeMarkup(c.start,t)}(l||0===l)&&e.lift(c,l)}))})),!0)},Bt=t=>e=>t(e),Lt=()=>({state:t,dispatch:e})=>S(t,e),Pt=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let o=i.depth;o>0;o-=1){const n=i.node(o);if(n.type===r.type){if(e){const e=i.before(o),n=i.after(o);t.delete(e,n).scrollIntoView()}return!0}}return!1},Ft=t=>({tr:e,state:n,dispatch:r})=>{const i=tt(t,n.schema),o=e.selection.$anchor;for(let t=o.depth;t>0;t-=1){const n=o.node(t);if(n.type===i){if(r){const n=o.before(t),r=o.after(t);e.delete(n,r).scrollIntoView()}return!0}}return!1},Ut=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},zt=()=>({state:t,dispatch:e})=>c(t,e),Ht=()=>({commands:t})=>t.keyboardShortcut("Enter"),jt=()=>({state:t,dispatch:e})=>C(t,e);function Vt(t,e,n={strict:!0}){const r=Object.keys(e);return!r.length||r.every((r=>n.strict?e[r]===t[r]:ft(e[r])?e[r].test(t[r]):e[r]===t[r]))}function Wt(t,e,n={}){return t.find((t=>t.type===e&&Vt(t.attrs,n)))}function $t(t,e,n={}){return!!Wt(t,e,n)}function Gt(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&0!==r.offset&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=Wt([...r.node.marks],e,n);if(!i)return;let o=r.index,s=t.start()+r.offset,a=o+1,c=s+r.node.nodeSize;Wt([...r.node.marks],e,n);while(o>0&&i.isInSet(t.parent.child(o-1).marks))o-=1,s-=t.parent.child(o).nodeSize;while(a<t.parent.childCount&&$t([...t.parent.child(a).marks],e,n))c+=t.parent.child(a).nodeSize,a+=1;return{from:s,to:c}}function Yt(t,e){if("string"===typeof t){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Xt=(t,e={})=>({tr:n,state:i,dispatch:o})=>{const s=Yt(t,i.schema),{doc:a,selection:c}=n,{$from:l,from:u,to:h}=c;if(o){const t=Gt(l,s,e);if(t&&t.from<=u&&t.to>=h){const e=r.Bs.create(a,t.from,t.to);n.setSelection(e)}}return!0},qt=t=>e=>{const n="function"===typeof t?t(e):t;for(let t=0;t<n.length;t+=1)if(n[t](e))return!0;return!1};function Kt(t){return t instanceof r.Bs}function Jt(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Zt(t,e=null){if(!e)return null;const n=r.Y1.atStart(t),i=r.Y1.atEnd(t);if("start"===e||!0===e)return n;if("end"===e)return i;const o=n.from,s=i.to;return"all"===e?r.Bs.create(t,Jt(0,o,s),Jt(t.content.size,o,s)):r.Bs.create(t,Jt(e,o,s),Jt(e,o,s))}function Qt(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const te=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:o})=>{e={scrollIntoView:!0,...e};const s=()=>{Qt()&&r.dom.focus(),requestAnimationFrame((()=>{n.isDestroyed||(r.focus(),(null===e||void 0===e?void 0:e.scrollIntoView)&&n.commands.scrollIntoView())}))};if(r.hasFocus()&&null===t||!1===t)return!0;if(o&&null===t&&!Kt(n.state.selection))return s(),!0;const a=Zt(i.doc,t)||n.state.selection,c=n.state.selection.eq(a);return o&&(c||i.setSelection(a),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),s()),!0},ee=(t,e)=>n=>t.every(((t,r)=>e(t,{...n,index:r}))),ne=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e);function re(t){const e=`<body>${t}</body>`;return(new window.DOMParser).parseFromString(e,"text/html").body}function ie(t,e,n){if(n={slice:!0,parseOptions:{},...n},"object"===typeof t&&null!==t)try{return Array.isArray(t)&&t.length>0?s.HY.fromArray(t.map((t=>e.nodeFromJSON(t)))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),ie("",e,n)}if("string"===typeof t){const r=s.aw.fromSchema(e);return n.slice?r.parseSlice(re(t),n.parseOptions).content:r.parse(re(t),n.parseOptions)}return ie("",e,n)}function oe(t,e,n){const i=t.steps.length-1;if(i<e)return;const o=t.steps[i];if(!(o instanceof a.Pu||o instanceof a.FC))return;const s=t.mapping.maps[i];let c=0;s.forEach(((t,e,n,r)=>{0===c&&(c=r)})),t.setSelection(r.Y1.near(t.doc.resolve(c),n))}const se=t=>t.toString().startsWith("<"),ae=(t,e,n)=>({tr:r,dispatch:i,editor:o})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const i=ie(e,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;let{from:s,to:a}="number"===typeof t?{from:t,to:t}:t,c=!0,l=!0;const u=se(i)?i:[i];if(u.forEach((t=>{t.check(),c=!!c&&(t.isText&&0===t.marks.length),l=!!l&&t.isBlock})),s===a&&l){const{parent:t}=r.doc.resolve(s),e=t.isTextblock&&!t.type.spec.code&&!t.childCount;e&&(s-=1,a+=1)}c?Array.isArray(e)?r.insertText(e.map((t=>t.text||"")).join(""),s,a):"object"===typeof e&&e&&e.text?r.insertText(e.text,s,a):r.insertText(e,s,a):r.replaceWith(s,a,i),n.updateSelection&&oe(r,r.steps.length-1,-1)}return!0},ce=()=>({state:t,dispatch:e})=>w(t,e),le=()=>({state:t,dispatch:e})=>b(t,e),ue=()=>({state:t,dispatch:e})=>u(t,e),he=()=>({state:t,dispatch:e})=>g(t,e);function de(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function fe(t){const e=t.split(/-(?!$)/);let n,r,i,o,s=e[e.length-1];"Space"===s&&(s=" ");for(let a=0;a<e.length-1;a+=1){const t=e[a];if(/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))n=!0;else if(/^(c|ctrl|control)$/i.test(t))r=!0;else if(/^s(hift)?$/i.test(t))i=!0;else{if(!/^mod$/i.test(t))throw new Error(`Unrecognized modifier name: ${t}`);Qt()||de()?o=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}const pe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const o=fe(t).split(/-(?!$)/),s=o.find((t=>!["Alt","Ctrl","Meta","Shift"].includes(t))),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction((()=>{n.someProp("handleKeyDown",(t=>t(n,a)))}));return null===c||void 0===c||c.steps.forEach((t=>{const e=t.map(r.mapping);e&&i&&r.maybeStep(e)})),!0};function ge(t,e,n={}){const{from:r,to:i,empty:o}=t.selection,s=e?tt(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,((t,e)=>{if(t.isText)return;const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize);a.push({node:t,from:n,to:o})}));const c=i-r,l=a.filter((t=>!s||s.name===t.node.type.name)).filter((t=>Vt(t.node.attrs,n,{strict:!1})));if(o)return!!l.length;const u=l.reduce(((t,e)=>t+e.to-e.from),0);return u>=c}const me=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema),o=ge(n,i,e);return!!o&&v(n,r)},ye=()=>({state:t,dispatch:e})=>_(t,e),we=t=>({state:e,dispatch:n})=>{const r=tt(t,e.schema);return W(r)(e,n)},be=()=>({state:t,dispatch:e})=>E(t,e);function ve(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ee(t,e){const n="string"===typeof e?[e]:e;return Object.keys(t).reduce(((e,r)=>(n.includes(r)||(e[r]=t[r]),e)),{})}const Ae=(t,e)=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=ve("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=tt(t,r.schema)),"mark"===a&&(s=Yt(t,r.schema)),i&&n.selection.ranges.forEach((t=>{r.doc.nodesBetween(t.$from.pos,t.$to.pos,((t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,Ee(t.attrs,e)),s&&t.marks.length&&t.marks.forEach((i=>{s===i.type&&n.addMark(r,r+t.nodeSize,s.create(Ee(i.attrs,e)))}))}))})),!0)},Ce=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Se=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),_e=()=>({state:t,dispatch:e})=>d(t,e),Te=()=>({state:t,dispatch:e})=>m(t,e),Ie=()=>({state:t,dispatch:e})=>M(t,e),Me=()=>({state:t,dispatch:e})=>R(t,e),ke=()=>({state:t,dispatch:e})=>x(t,e);function Ne(t,e,n={}){return ie(t,e,{slice:!1,parseOptions:n})}const Oe=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:o})=>{const{doc:s}=r,a=Ne(t,i.schema,n);return o&&r.replaceWith(0,s.content.size,a).setMeta("preventUpdate",!e),!0};function De(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Re(t){return e=>xe(e.$from,t)}function Be(t,e){const n=s.PW.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument(),i=r.createElement("div");return i.appendChild(n),i.innerHTML}function Le(t,e){const n={from:0,to:t.content.size};return kt(t,n,e)}function Pe(t,e){const n=Yt(e,t.schema),{from:r,to:i,empty:o}=t.selection,s=[];o?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,(t=>{s.push(...t.marks)}));const a=s.find((t=>t.type.name===n.name));return a?{...a.attrs}:{}}function Fe(t,e){const n=tt(e,t.schema),{from:r,to:i}=t.selection,o=[];t.doc.nodesBetween(r,i,(t=>{o.push(t)}));const s=o.reverse().find((t=>t.type.name===n.name));return s?{...s.attrs}:{}}function Ue(t,e){const n=ve("string"===typeof e?e:e.name,t.schema);return"node"===n?Fe(t,e):"mark"===n?Pe(t,e):{}}function ze(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach((e=>{const i=n.resolve(t-1),o=Gt(i,e.type);o&&r.push({mark:e,...o})})):n.nodesBetween(t,e,((t,e)=>{r.push(...t.marks.map((n=>({from:e,to:e+t.nodeSize,mark:n}))))})),r}function He(t,e,n){return Object.fromEntries(Object.entries(n).filter((([n])=>{const r=t.find((t=>t.type===e&&t.name===n));return!!r&&r.attribute.keepOnSplit})))}function je(t,e,n={}){const{empty:r,ranges:i}=t.selection,o=e?Yt(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter((t=>!o||o.name===t.type.name)).find((t=>Vt(t.attrs,n,{strict:!1})));let s=0;const a=[];if(i.forEach((({$from:e,$to:n})=>{const r=e.pos,i=n.pos;t.doc.nodesBetween(r,i,((t,e)=>{if(!t.isText&&!t.marks.length)return;const n=Math.max(r,e),o=Math.min(i,e+t.nodeSize),c=o-n;s+=c,a.push(...t.marks.map((t=>({mark:t,from:n,to:o}))))}))})),0===s)return!1;const c=a.filter((t=>!o||o.name===t.mark.type.name)).filter((t=>Vt(t.mark.attrs,n,{strict:!1}))).reduce(((t,e)=>t+e.to-e.from),0),l=a.filter((t=>!o||t.mark.type!==o&&t.mark.type.excludes(o))).reduce(((t,e)=>t+e.to-e.from),0),u=c>0?c+l:c;return u>=s}function Ve(t,e,n={}){if(!e)return ge(t,null,n)||je(t,null,n);const r=ve(e,t.schema);return"node"===r?ge(t,e,n):"mark"===r&&je(t,e,n)}function We(t,e){const{nodeExtensions:n}=Z(e),r=n.find((e=>e.name===t));if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=it(J(r,"group",i));return"string"===typeof o&&o.split(" ").includes("list")}function $e(t){var e;const n=null===(e=t.type.createAndFill())||void 0===e?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function Ge(t){return t instanceof r.qv}function Ye(t,e,n){const r=0,i=t.state.doc.content.size,o=Jt(e,r,i),s=Jt(n,r,i),a=t.coordsAtPos(o),c=t.coordsAtPos(s,-1),l=Math.min(a.top,c.top),u=Math.max(a.bottom,c.bottom),h=Math.min(a.left,c.left),d=Math.max(a.right,c.right),f=d-h,p=u-l,g=h,m=l,y={top:l,bottom:u,left:h,right:d,width:f,height:p,x:g,y:m};return{...y,toJSON:()=>y}}function Xe(t,e,n){var r;const{selection:i}=e;let o=null;if(Kt(i)&&(o=i.$cursor),o){const e=null!==(r=t.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(e)||!e.some((t=>t.type.excludes(n)))}const{ranges:s}=i;return s.some((({$from:e,$to:r})=>{let i=0===e.depth&&(t.doc.inlineContent&&t.doc.type.allowsMarkType(n));return t.doc.nodesBetween(e.pos,r.pos,((t,e,r)=>{if(i)return!1;if(t.isInline){const e=!r||r.type.allowsMarkType(n),o=!!n.isInSet(t.marks)||!t.marks.some((t=>t.type.excludes(n)));i=e&&o}return!i})),i}))}const qe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:o}=n,{empty:s,ranges:a}=o,c=Yt(t,r.schema);if(i)if(s){const t=Pe(r,c);n.addStoredMark(c.create({...t,...e}))}else a.forEach((t=>{const i=t.$from.pos,o=t.$to.pos;r.doc.nodesBetween(i,o,((t,r)=>{const s=Math.max(r,i),a=Math.min(r+t.nodeSize,o),l=t.marks.find((t=>t.type===c));l?t.marks.forEach((t=>{c===t.type&&n.addMark(s,a,c.create({...t.attrs,...e}))})):n.addMark(s,a,c.create(e))}))}));return Xe(r,n,c)},Ke=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Je=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const o=tt(t,n.schema);return o.isTextblock?i().command((({commands:t})=>{const r=L(o,e)(n);return!!r||t.clearNodes()})).command((({state:t})=>L(o,e)(t,r))).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Ze=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,i=Jt(t,0,n.content.size),o=r.qv.create(n,i);e.setSelection(o)}return!0},Qe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:n}=e,{from:i,to:o}="number"===typeof t?{from:t,to:t}:t,s=r.Bs.atStart(n).from,a=r.Bs.atEnd(n).to,c=Jt(i,s,a),l=Jt(o,s,a),u=r.Bs.create(n,c,l);e.setSelection(u)}return!0},tn=t=>({state:e,dispatch:n})=>{const r=tt(t,e.schema);return Y(r)(e,n)};function en(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter((t=>null===e||void 0===e?void 0:e.includes(t.type.name)));t.tr.ensureMarks(r)}}const nn=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:o})=>{const{selection:s,doc:c}=e,{$from:l,$to:u}=s,h=o.extensionManager.attributes,d=He(h,l.node().type.name,l.node().attrs);if(s instanceof r.qv&&s.node.isBlock)return!(!l.parentOffset||!(0,a.Ax)(c,l.pos))&&(i&&(t&&en(n,o.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;if(i){const i=u.parentOffset===u.parent.content.size;s instanceof r.Bs&&e.deleteSelection();const c=0===l.depth?void 0:De(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=i&&c?[{type:c,attrs:d}]:void 0,f=(0,a.Ax)(e.doc,e.mapping.map(l.pos),1,h);if(h||f||!(0,a.Ax)(e.doc,e.mapping.map(l.pos),1,c?[{type:c}]:void 0)||(f=!0,h=c?[{type:c,attrs:d}]:void 0),f&&(e.split(e.mapping.map(l.pos),1,h),c&&!i&&!l.parentOffset&&l.parent.type!==c)){const t=e.mapping.map(l.before()),n=e.doc.resolve(t);l.node(-1).canReplaceWith(n.index(),n.index()+1,c)&&e.setNodeMarkup(e.mapping.map(l.before()),c)}t&&en(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},rn=t=>({tr:e,state:n,dispatch:i,editor:o})=>{var c;const l=tt(t,n.schema),{$from:u,$to:h}=n.selection,d=n.selection.node;if(d&&d.isBlock||u.depth<2||!u.sameParent(h))return!1;const f=u.node(-1);if(f.type!==l)return!1;const p=o.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let t=s.HY.empty;const n=u.index(-1)?1:u.index(-2)?2:3;for(let e=u.depth-n;e>=u.depth-3;e-=1)t=s.HY.from(u.node(e).copy(t));const i=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,o=He(p,u.node().type.name,u.node().attrs),a=(null===(c=l.contentMatch.defaultType)||void 0===c?void 0:c.createAndFill(o))||void 0;t=t.append(s.HY.from(l.createAndFill(null,a)||void 0));const h=u.before(u.depth-(n-1));e.replace(h,u.after(-i),new s.p2(t,4-n,0));let d=-1;e.doc.nodesBetween(h,e.doc.content.size,((t,e)=>{if(d>-1)return!1;t.isTextblock&&0===t.content.size&&(d=e+1)})),d>-1&&e.setSelection(r.Bs.near(e.doc.resolve(d))),e.scrollIntoView()}return!0}const g=h.pos===u.end()?f.contentMatchAt(0).defaultType:null,m=He(p,f.type.name,f.attrs),y=He(p,u.node().type.name,u.node().attrs);e.delete(u.pos,h.pos);const w=g?[{type:l,attrs:m},{type:g,attrs:y}]:[{type:l,attrs:m}];if(!(0,a.Ax)(e.doc,u.pos,2))return!1;if(i){const{selection:t,storedMarks:r}=n,{splittableMarks:s}=o.extensionManager,a=r||t.$to.parentOffset&&t.$from.marks();if(e.split(u.pos,2,w).scrollIntoView(),!a||!i)return!0;const c=a.filter((t=>s.includes(t.type.name)));e.ensureMarks(c)}return!0},on=(t,e)=>{const n=Re((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(t.doc,n.pos);return!o||(t.join(n.pos),!0)},sn=(t,e)=>{const n=Re((t=>t.type===e))(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=t.doc.nodeAt(r),o=n.node.type===(null===i||void 0===i?void 0:i.type)&&(0,a.Mn)(t.doc,r);return!o||(t.join(r),!0)},an=(t,e,n)=>({editor:r,tr:i,state:o,dispatch:s,chain:a,commands:c,can:l})=>{const{extensions:u,splittableMarks:h}=r.extensionManager,d=tt(t,o.schema),f=tt(e,o.schema),{selection:p,storedMarks:g}=o,{$from:m,$to:y}=p,w=m.blockRange(y),b=g||p.$to.parentOffset&&p.$from.marks();if(!w)return!1;const v=Re((t=>We(t.type.name,u)))(p);if(w.depth>=1&&v&&w.depth-v.depth<=1){if(v.node.type===d)return c.liftListItem(f);if(We(v.node.type.name,u)&&d.validContent(v.node.content)&&s)return a().command((()=>(i.setNodeMarkup(v.pos,d),!0))).command((()=>on(i,d))).command((()=>sn(i,d))).run()}return n&&b&&s?a().command((()=>{const t=l().wrapInList(d),e=b.filter((t=>h.includes(t.type.name)));return i.ensureMarks(e),!!t||c.clearNodes()})).wrapInList(d).command((()=>on(i,d))).command((()=>sn(i,d))).run():a().command((()=>{const t=l().wrapInList(d);return!!t||c.clearNodes()})).wrapInList(d).command((()=>on(i,d))).command((()=>sn(i,d))).run()},cn=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=n,s=Yt(t,r.schema),a=je(r,s,e);return a?i.unsetMark(s,{extendEmptyMarkRange:o}):i.setMark(s,e)},ln=(t,e,n={})=>({state:r,commands:i})=>{const o=tt(t,r.schema),s=tt(e,r.schema),a=ge(r,o,n);return a?i.setNode(s):i.setNode(o,n)},un=(t,e={})=>({state:n,commands:r})=>{const i=tt(t,n.schema),o=ge(n,i,e);return o?r.lift(i):r.wrapIn(i,e)},hn=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let o;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){const e=t.tr,n=o.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(o.text){const n=e.doc.resolve(o.from).marks();e.replaceWith(o.from,o.to,t.schema.text(o.text,n))}else e.delete(o.from,o.to)}return!0}}return!1},dn=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},fn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,c=Yt(t,r.schema),{$from:l,empty:u,ranges:h}=a;if(!i)return!0;if(u&&s){let{from:t,to:e}=a;const r=null===(o=l.marks().find((t=>t.type===c)))||void 0===o?void 0:o.attrs,i=Gt(l,c,r);i&&(t=i.from,e=i.to),n.removeMark(t,e,c)}else h.forEach((t=>{n.removeMark(t.$from.pos,t.$to.pos,c)}));return n.removeStoredMark(c),!0},pn=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let o=null,s=null;const a=ve("string"===typeof t?t:t.name,r.schema);return!!a&&("node"===a&&(o=tt(t,r.schema)),"mark"===a&&(s=Yt(t,r.schema)),i&&n.selection.ranges.forEach((t=>{const i=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(i,a,((t,r)=>{o&&o===t.type&&n.setNodeMarkup(r,void 0,{...t.attrs,...e}),s&&t.marks.length&&t.marks.forEach((o=>{if(s===o.type){const c=Math.max(r,i),l=Math.min(r+t.nodeSize,a);n.addMark(c,l,s.create({...o.attrs,...e}))}}))}))})),!0)},gn=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema);return B(i,e)(n,r)},mn=(t,e={})=>({state:n,dispatch:r})=>{const i=tt(t,n.schema);return j(i,e)(n,r)};var yn=Object.freeze({__proto__:null,blur:Dt,clearContent:xt,clearNodes:Rt,command:Bt,createParagraphNear:Lt,deleteCurrentNode:Pt,deleteNode:Ft,deleteRange:Ut,deleteSelection:zt,enter:Ht,exitCode:jt,extendMarkRange:Xt,first:qt,focus:te,forEach:ee,insertContent:ne,insertContentAt:ae,joinUp:ce,joinDown:le,joinBackward:ue,joinForward:he,keyboardShortcut:pe,lift:me,liftEmptyBlock:ye,liftListItem:we,newlineInCode:be,resetAttributes:Ae,scrollIntoView:Ce,selectAll:Se,selectNodeBackward:_e,selectNodeForward:Te,selectParentNode:Ie,selectTextblockEnd:Me,selectTextblockStart:ke,setContent:Oe,setMark:qe,setMeta:Ke,setNode:Je,setNodeSelection:Ze,setTextSelection:Qe,sinkListItem:tn,splitBlock:nn,splitListItem:rn,toggleList:an,toggleMark:cn,toggleNode:ln,toggleWrap:un,undoInputRule:hn,unsetAllMarks:dn,unsetMark:fn,updateAttributes:pn,wrapIn:gn,wrapInList:mn});const wn=Mt.create({name:"commands",addCommands(){return{...yn}}}),bn=Mt.create({name:"editable",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),vn=Mt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new r.Sy({key:new r.H$("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),En=Mt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first((({commands:t})=>[()=>t.undoInputRule(),()=>t.command((({tr:e})=>{const{selection:n,doc:i}=e,{empty:o,$anchor:s}=n,{pos:a,parent:c}=s,l=r.Y1.atStart(i).from===a;return!(!(o&&l&&c.type.isTextblock)||c.textContent.length)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()])),e=()=>this.editor.commands.first((({commands:t})=>[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()])),n=()=>this.editor.commands.first((({commands:t})=>[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()])),i={Enter:n,"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},s={...i,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Qt()||de()?s:o},addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("clearDocument"),appendTransaction:(t,e,n)=>{const i=t.some((t=>t.docChanged))&&!e.doc.eq(n.doc);if(!i)return;const{empty:o,from:s,to:a}=e.selection,c=r.Y1.atStart(e.doc).from,l=r.Y1.atEnd(e.doc).to,u=s===c&&a===l,h=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(o||!u||!h)return;const d=n.tr,f=X({state:n,transaction:d}),{commands:p}=new q({editor:this.editor,state:f});return p.clearNodes(),d.steps.length?d:void 0}})]}}),An=Mt.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Cn=Object.freeze({__proto__:null,ClipboardTextSerializer:Ot,Commands:wn,Editable:bn,FocusEvents:vn,Keymap:En,Tabindex:An});const Sn='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}';function _n(t,e){const n=document.querySelector("style[data-tiptap-style]");if(null!==n)return n;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}class Tn extends K{constructor(t={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=_n(Sn,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(t,e){const n=rt(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t){if(this.isDestroyed)return;const e="string"===typeof t?`${t}$`:t.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(e)))});this.view.updateState(n)}createExtensionManager(){const t=this.options.enableCoreExtensions?Object.values(Cn):[],e=[...t,...this.options.extensions].filter((t=>["extension","node","mark"].includes(null===t||void 0===t?void 0:t.type)));this.extensionManager=new St(e,this)}createCommandManager(){this.commandManager=new q({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const t=Ne(this.options.content,this.schema,this.options.parseOptions),e=Zt(t,this.options.autofocus);this.view=new i.tk(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:r.yy.create({doc:t,selection:e||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void t.steps.forEach((t=>{var e;return null===(e=this.capturedTransaction)||void 0===e?void 0:e.step(t)})):void(this.capturedTransaction=t);const e=this.state.apply(t),n=!this.state.selection.eq(e.selection);this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const r=t.getMeta("focus"),i=t.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:t}),i&&this.emit("blur",{editor:this,event:i.event,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:t})}getAttributes(t){return Ue(this.state,t)}isActive(t,e){const n="string"===typeof t?t:null,r="string"===typeof t?e:t;return Ve(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Be(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e="\n\n",textSerializers:n={}}=t||{};return Le(this.state.doc,{blockSeparator:e,textSerializers:{...Nt(this.schema),...n}})}get isEmpty(){return $e(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var t;return!(null===(t=this.view)||void 0===t?void 0:t.docView)}}function In(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];let c=n.to;if(s){const r=a.search(/\S/),l=n.from+a.indexOf(s),u=l+s.length,h=ze(n.from,n.to,e.doc).filter((e=>{const n=e.mark.type.excluded;return n.find((n=>n===t.type&&n!==e.mark.type))})).filter((t=>t.to>l));if(h.length)return null;u<n.to&&o.delete(u,n.to),l>n.from&&o.delete(n.from+r,l),c=n.from+r+s.length,o.addMark(n.from+r,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}function Mn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r)||{},{tr:o}=e,s=n.from;let a=n.to;if(r[1]){const e=r[0].lastIndexOf(r[1]);let n=s+e;n>a?n=a:a=n+r[1].length;const c=r[0][r[0].length-1];o.insertText(c,s+r[0].length-1),o.replaceWith(n,a,t.type.create(i))}else r[0]&&o.replaceWith(s,a,t.type.create(i))}})}function kn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),o=it(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)}})}function Nn(t){return new pt({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const o=it(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),c=s.doc.resolve(n.from),l=c.blockRange(),u=l&&(0,a.nd)(l,t.type,o);if(!u)return null;if(s.wrap(l,u),t.keepMarks&&t.editor){const{selection:n,storedMarks:r}=e,{splittableMarks:i}=t.editor.extensionManager,o=r||n.$to.parentOffset&&n.$from.marks();if(o){const t=o.filter((t=>i.includes(t.type.name)));s.ensureMarks(t)}}if(t.keepAttributes){const e="bulletList"===t.type.name||"orderedList"===t.type.name?"listItem":"taskList";i().updateAttributes(e,o).run()}const h=s.doc.resolve(n.from-1).nodeBefore;h&&h.type===t.type&&(0,a.Mn)(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,h))&&s.join(n.from-1)}})}class On{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(J(this,"addOptions",{name:this.name}))),this.storage=it(J(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new On(t)}configure(t={}){const e=this.extend();return e.options=It(this.options,t),e.storage=it(J(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new On(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(J(e,"addOptions",{name:e.name})),e.storage=it(J(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:t,mark:e}){const{tr:n}=t.state,r=t.state.selection.$from,i=r.pos===r.end();if(i){const i=r.marks(),o=!!i.find((t=>(null===t||void 0===t?void 0:t.type.name)===e.name));if(!o)return!1;const s=i.find((t=>(null===t||void 0===t?void 0:t.type.name)===e.name));return s&&n.removeStoredMark(s),n.insertText(" ",r.pos),t.view.dispatch(n),!0}return!1}}class Dn{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=it(J(this,"addOptions",{name:this.name}))),this.storage=it(J(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new Dn(t)}configure(t={}){const e=this.extend();return e.options=It(this.options,t),e.storage=it(J(e,"addStorage",{name:e.name,options:e.options})),e}extend(t={}){const e=new Dn(t);return e.parent=this,this.child=e,e.name=t.name?t.name:e.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=it(J(e,"addOptions",{name:e.name})),e.storage=it(J(e,"addStorage",{name:e.name,options:e.options})),e}}function xn(t){return new bt({find:t.find,handler:({state:e,range:n,match:r})=>{const i=it(t.getAttributes,void 0,r);if(!1===i||null===i)return null;const{tr:o}=e,s=r[r.length-1],a=r[0];let c=n.to;if(s){const r=a.search(/\S/),l=n.from+a.indexOf(s),u=l+s.length,h=ze(n.from,n.to,e.doc).filter((e=>{const n=e.mark.type.excluded;return n.find((n=>n===t.type&&n!==e.mark.type))})).filter((t=>t.to>l));if(h.length)return null;u<n.to&&o.delete(u,n.to),l>n.from&&o.delete(n.from+r,l),c=n.from+r+s.length,o.addMark(n.from+r,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}},2019:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(2066),i=n(157);const o=r.hj.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=(null===t||void 0===t?void 0:t.mode)||this.options.mode;if("textSize"===n){const t=e.textBetween(0,e.content.size,void 0," ");return t.length}return e.nodeSize},this.storage.words=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," "),r=n.split(" ").filter((t=>""!==t));return r.length}},addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("characterCount"),filterTransaction:(t,e)=>{const n=this.options.limit;if(!t.docChanged||0===n||null===n||void 0===n)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=n)return!0;if(r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r)return!1;const o=t.getMeta("paste");if(!o)return!1;const s=t.selection.$head.pos,a=i-n,c=s-a,l=s;t.deleteRange(c,l);const u=this.storage.characters({node:t.doc});return!(u>n)}})]}})},5017:function(t,e,n){"use strict";n.d(e,{Z:function(){return y}});var r=n(2066),i=(n(7658),n(3248)),o=n(1460),s=n(157);var a=n(7195),c=n(1811),l=n(1383);const u=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),i=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(i,null),e},h=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),d=/^#[0-9a-fA-F]{6}$/,f=(t,e,n,r)=>{const s=c.Gt.getState(t),u=s.doc,h=[];return null!=s.snapshot||null!=s.prevSnapshot||null===s.binding?o.EH.create(t.doc,[]):(e.getStates().forEach(((e,c)=>{if(c!==u.clientID&&null!=e.cursor){const f=e.user||{};null==f.color?f.color="#ffa500":d.test(f.color)||console.warn("A user uses an unsupported color format",f),null==f.name&&(f.name=`User: ${c}`);let p=(0,a.SF)(u,s.type,i.og(e.cursor.anchor),s.binding.mapping),g=(0,a.SF)(u,s.type,i.og(e.cursor.head),s.binding.mapping);if(null!==p&&null!==g){const e=l.Fp(t.doc.content.size-1,0);p=l.VV(p,e),g=l.VV(g,e),h.push(o.p.widget(g,(()=>n(f)),{key:c+"",side:10}));const i=l.VV(p,g),s=l.Fp(p,g);h.push(o.p.inline(i,s,r(f),{inclusiveEnd:!0,inclusiveStart:!1}))}}})),o.EH.create(t.doc,h))},p=(t,{cursorBuilder:e=u,selectionBuilder:n=h,getSelection:r=(t=>t.selection)}={},o="cursor")=>new s.Sy({key:c.uJ,state:{init(r,i){return f(i,t,e,n)},apply(r,i,o,s){const a=c.Gt.getState(s),l=r.getMeta(c.uJ);return a&&a.isChangeOrigin||l&&l.awarenessUpdated?f(s,t,e,n):i.map(r.mapping,r.doc)}},props:{decorations:t=>c.uJ.getState(t)},view:e=>{const n=()=>{e.docView&&(0,a.US)(e,c.uJ,{awarenessUpdated:!0})},s=()=>{const n=c.Gt.getState(e.state),s=t.getLocalState()||{};if(null!=n.binding)if(e.hasFocus()){const c=r(e.state),l=(0,a.JR)(c.anchor,n.type,n.binding.mapping),u=(0,a.JR)(c.head,n.type,n.binding.mapping);null!=s.cursor&&i.Uq(i.og(s.cursor.anchor),l)&&i.Uq(i.og(s.cursor.head),u)||t.setLocalStateField(o,{anchor:l,head:u})}else null!=s.cursor&&null!==(0,a.SF)(n.doc,n.type,i.og(s.cursor.anchor),n.binding.mapping)&&t.setLocalStateField(o,null)};return t.on("change",n),e.dom.addEventListener("focusin",s),e.dom.addEventListener("focusout",s),{update:s,destroy:()=>{e.dom.removeEventListener("focusin",s),e.dom.removeEventListener("focusout",s),t.off("change",n),t.setLocalStateField(o,null)}}}}),g=t=>Array.from(t.entries()).map((([t,e])=>({clientId:t,...e.user}))),m=()=>null,y=r.hj.create({name:"collaborationCursor",addOptions(){return{provider:null,user:{name:null,color:null},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},onUpdate:m}},onCreate(){this.options.onUpdate!==m&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor')},addStorage(){return{users:[]}},addCommands(){return{updateUser:t=>()=>(this.options.user=t,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:t=>({editor:e})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),e.commands.updateUser(t))}},addProseMirrorPlugins(){return[p((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=g(this.options.provider.awareness.states),this.options.provider.awareness.on("update",(()=>{this.storage.users=g(this.options.provider.awareness.states)})),this.options.provider.awareness))(),{cursorBuilder:this.options.render})]}})},5808:function(t,e,n){"use strict";n.d(e,{ZP:function(){return Z}});var r=n(2066),i=n(1811),o=n(157);n(7658);const s=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}};var a=n(1543),c=n(1383),l=n(1370),u=n(893);const h=/[\uD800-\uDBFF]/,d=/[\uDC00-\uDFFF]/,f=(t,e)=>{let n=0,r=0;while(n<t.length&&n<e.length&&t[n]===e[n])n++;h.test(t[n-1])&&n--;while(r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1])r++;return d.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},p=f;var g=n(6969),m=n(3248),y=n(7195),w=n(6157),b=n(6413),v=n(7214),E=n(1634);const A=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!m.uY(e.ds,t.id),C=[{light:"#ecd44433",dark:"#ecd444"}],S=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const n=u.Ue();t.forEach((t=>n.add(t))),e=e.filter((t=>!n.has(t)))}t.set(n,w.kw(e))}return t.get(n)},_=(t,{colors:e=C,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:s=(()=>{})}={})=>{let a,c=!1;const l=new o.Sy({props:{editable:t=>{const e=i.Gt.getState(t);return null==e.snapshot&&null==e.prevSnapshot}},key:i.Gt,state:{init:(i,o)=>({type:t,doc:t.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:e,colorMapping:n,permanentUserData:r}),apply:(t,e)=>{const n=t.getMeta(i.Gt);if(void 0!==n){e=Object.assign({},e);for(const t in n)e[t]=n[t]}return e.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==e.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||E.Vs(0,(()=>{null==e.binding||e.binding.isDestroyed||(null==n.restore?e.binding._renderSnapshot(n.snapshot,n.prevSnapshot,e):(e.binding._renderSnapshot(n.snapshot,n.snapshot,e),delete e.restore,delete e.snapshot,delete e.prevSnapshot,e.binding._prosemirrorChanged(e.binding.prosemirrorView.state.doc)))}))),e}},view:e=>{const n=new M(t,e);return null!=a&&clearTimeout(a),a=E.Vs(0,(()=>{n._forceRerender(),e.dispatch(e.state.tr.setMeta(i.Gt,{binding:n})),s()})),{update:()=>{const t=l.getState(e.state);null==t.snapshot&&null==t.prevSnapshot&&(c||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))&&(c=!0,n._prosemirrorChanged(e.state.doc))},destroy:()=>{clearTimeout(a),n.destroy()}}}});return l},T=(t,e,n)=>{if(null!==e&&null!==e.anchor&&null!==e.head){const r=(0,y.SF)(n.doc,n.type,e.anchor,n.mapping),i=(0,y.SF)(n.doc,n.type,e.head,n.mapping);null!==r&&null!==i&&(t=t.setSelection(o.Bs.create(t.doc,r,i)))}},I=(t,e)=>({anchor:(0,y.JR)(e.selection.anchor,t.type,t.mapping),head:(0,y.JR)(e.selection.head,t.type,t.mapping)});class M{constructor(t,e){this.type=t,this.prosemirrorView=e,this.mux=s(),this.isDestroyed=!1,this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=I(this,e.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(b.jU&&null===this._domSelectionInView&&(E.Vs(0,(()=>{this._domSelectionInView=null})),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),e=this.prosemirrorView._root.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.getClientRects();0===n.length&&e.startContainer&&e.collapsed&&e.selectNodeContents(e.startContainer);const r=e.getBoundingClientRect(),i=v.JU.documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,e){e||(e=m.Ox(m.VG(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(i.Gt,{snapshot:t,prevSnapshot:e}))}unrenderSnapshot(){this.mapping=new Map,this.mux((()=>{const t=this.type.toArray().map((t=>N(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t)),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(t),0,0));e.setMeta(i.Gt,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(e)}))}_forceRerender(){this.mapping=new Map,this.mux((()=>{const t=this.type.toArray().map((t=>N(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t)),e=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(t),0,0));this.prosemirrorView.dispatch(e.setMeta(i.Gt,{isChangeOrigin:!0}))}))}_renderSnapshot(t,e,n){t||(t=m.CO(this.doc)),this.mapping=new Map,this.mux((()=>{this.doc.transact((r=>{const o=n.permanentUserData;o&&o.dss.forEach((t=>{m.UQ(r,t,(t=>{}))}));const s=(t,e)=>{const r="added"===t?o.getUserByClientId(e.client):o.getUserByDeletedId(e);return{user:r,type:t,color:S(n.colorMapping,n.colors,r)}},c=m.ud(this.type,new m.aC(e.ds,t.sv)).map((n=>!n._item.deleted||A(n._item,t)||A(n._item,e)?N(n,this.prosemirrorView.state.schema,new Map,t,e,s):null)).filter((t=>null!==t)),l=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(c),0,0));this.prosemirrorView.dispatch(l.setMeta(i.Gt,{isChangeOrigin:!0}))}),i.Gt)}))}_typeChanged(t,e){const n=i.Gt.getState(this.prosemirrorView.state);0!==t.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux((()=>{const t=(t,e)=>this.mapping.delete(e);m.UQ(e,e.deleteSet,(t=>t.constructor===m.ck&&this.mapping.delete(t.content.type))),e.changed.forEach(t),e.changedParentTypes.forEach(t);const n=this.type.toArray().map((t=>k(t,this.prosemirrorView.state.schema,this.mapping))).filter((t=>null!==t));let r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new a.p2(new a.HY(n),0,0));T(r,this.beforeTransactionSelection,this),r=r.setMeta(i.Gt,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)})):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(t){this.mux((()=>{this.doc.transact((()=>{$(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=I(this,this.prosemirrorView.state)}),i.Gt)}))}destroy(){this.isDestroyed=!0,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const k=(t,e,n,r,i,o)=>{const s=n.get(t);if(void 0===s){if(t instanceof m.lt)return N(t,e,n,r,i,o);throw g.Nw()}return s},N=(t,e,n,r,o,s)=>{const a=[],c=t=>{if(t.constructor===m.lt){const i=k(t,e,n,r,o,s);null!==i&&a.push(i)}else{const i=O(t,e,n,r,o,s);null!==i&&i.forEach((t=>{null!==t&&a.push(t)}))}};void 0===r||void 0===o?t.toArray().forEach(c):m.ud(t,new m.aC(o.ds,r.sv)).forEach(c);try{const i=t.getAttributes(r);void 0!==r&&(A(t._item,r)?A(t._item,o)||(i.ychange=s?s("added",t._item.id):{type:"added"}):i.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,i,a);return n.set(t,c),c}catch(l){return t.doc.transact((e=>{t._item.delete(e)}),i.Gt),n.delete(t),null}},O=(t,e,n,r,o,s)=>{const a=[],c=t.toDelta(r,o,s);try{for(let t=0;t<c.length;t++){const n=c[t],r=[];for(const t in n.attributes)r.push(e.mark(t,n.attributes[t]));a.push(e.text(n.insert,r))}}catch(l){return t.doc.transact((e=>{t._item.delete(e)}),i.Gt),null}return a},D=(t,e)=>{const n=new m.eI,r=t.map((t=>({insert:t.text,attributes:W(t.marks)})));return n.applyDelta(r),e.set(n,t),n},x=(t,e)=>{const n=new m.lt(t.type.name);for(const r in t.attrs){const e=t.attrs[r];null!==e&&"ychange"!==r&&n.setAttribute(r,e)}return n.insert(0,P(t).map((t=>R(t,e)))),e.set(n,t),n},R=(t,e)=>t instanceof Array?D(t,e):x(t,e),B=t=>"object"===typeof t&&null!==t,L=(t,e)=>{const n=Object.keys(t).filter((e=>null!==t[e]));let r=n.length===Object.keys(e).filter((t=>null!==e[t])).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=t[o],a=e[o];r="ychange"===o||s===a||B(s)&&B(a)&&L(s,a)}return r},P=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const t=e[r];if(t.isText){const t=[];for(let n=e[r];r<e.length&&n.isText;n=e[++r])t.push(n);r--,n.push(t)}else n.push(t)}return n},F=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every(((t,n)=>t.insert===e[n].text&&l.XP(t.attributes||{}).length===e[n].marks.length&&e[n].marks.every((e=>L(t.attributes[e.type.name]||{},e.attrs)))))},U=(t,e)=>{if(t instanceof m.lt&&!(e instanceof Array)&&G(t,e)){const n=P(e);return t._length===n.length&&L(t.getAttributes(),e.attrs)&&t.toArray().every(((t,e)=>U(t,n[e])))}return t instanceof m.eI&&e instanceof Array&&F(t,e)},z=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every(((t,n)=>e[n]===t)),H=(t,e,n)=>{const r=t.toArray(),i=P(e),o=i.length,s=r.length,a=c.VV(s,o);let l=0,u=0,h=!1;for(;l<a;l++){const t=r[l],e=i[l];if(z(n.get(t),e))h=!0;else if(!U(t,e))break}for(;l+u<a;u++){const t=r[s-u-1],e=i[o-u-1];if(z(n.get(t),e))h=!0;else if(!U(t,e))break}return{equalityFactor:l+u,foundMappedChild:h}},j=t=>{let e="",n=t._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof m.$_?e+=n.content.str:n.content instanceof m.MM&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},V=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=j(t),o=e.map((t=>({insert:t.text,attributes:Object.assign({},r,W(t.marks))}))),{insert:s,remove:a,index:c}=p(i,o.map((t=>t.insert)).join(""));t.delete(c,a),t.insert(c,s),t.applyDelta(o.map((t=>({retain:t.insert.length,attributes:t.attributes}))))},W=t=>{const e={};return t.forEach((t=>{"ychange"!==t.type.name&&(e[t.type.name]=t.attrs)})),e},$=(t,e,n,r)=>{if(e instanceof m.lt&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof m.lt){const t=e.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?t[n]!==r[n]&&"ychange"!==n&&e.setAttribute(n,r[n]):e.removeAttribute(n);for(const n in t)void 0===r[n]&&e.removeAttribute(n)}const o=P(n),s=o.length,a=e.toArray(),l=a.length,u=c.VV(s,l);let h=0,d=0;for(;h<u;h++){const t=a[h],e=o[h];if(!z(r.get(t),e)){if(!U(t,e))break;r.set(t,e)}}for(;d+h+1<u;d++){const t=a[l-d-1],e=o[s-d-1];if(!z(r.get(t),e)){if(!U(t,e))break;r.set(t,e)}}t.transact((()=>{while(l-h-d>0&&s-h-d>0){const n=a[h],i=o[h],c=a[l-d-1],u=o[s-d-1];if(n instanceof m.eI&&i instanceof Array)F(n,i)||V(n,i,r),h+=1;else{let o=n instanceof m.lt&&G(n,i),s=c instanceof m.lt&&G(c,u);if(o&&s){const t=H(n,i,r),e=H(c,u,r);t.foundMappedChild&&!e.foundMappedChild?s=!1:!t.foundMappedChild&&e.foundMappedChild||t.equalityFactor<e.equalityFactor?o=!1:s=!1}o?($(t,n,i,r),h+=1):s?($(t,c,u,r),d+=1):(e.delete(h,1),e.insert(h,[R(i,r)]),h+=1)}}const n=l-h-d;if(1===l&&0===s&&a[0]instanceof m.eI?a[0].delete(0,a[0].length):n>0&&e.delete(h,n),h+d<s){const t=[];for(let e=h;e<s-d;e++)t.push(R(o[e],r));e.insert(h,t)}}),i.Gt)},G=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name,Y=t=>{const e=i.Gk.getState(t).undoManager;if(null!=e)return e.undo(),!0},X=t=>{const e=i.Gk.getState(t).undoManager;if(null!=e)return e.redo(),!0},q=new Set(["paragraph"]),K=(t,e)=>!(t instanceof m.ck)||!(t.content instanceof m.zc)||!(t.content.type instanceof m.xv||t.content.type instanceof m.lt&&e.has(t.content.type.nodeName))||0===t.content.type._length,J=({protectedNodes:t=q,trackedOrigins:e=[],undoManager:n=null}={})=>new o.Sy({key:i.Gk,state:{init:(r,o)=>{const s=i.Gt.getState(o),a=n||new m.H6(s.type,{trackedOrigins:new Set([i.Gt].concat(e)),deleteFilter:e=>K(e,t)});return{undoManager:a,prevSel:null,hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}},apply:(t,e,n,r)=>{const o=i.Gt.getState(r).binding,s=e.undoManager,a=s.undoStack.length>0,c=s.redoStack.length>0;return o?{undoManager:s,prevSel:I(o,n),hasUndoOps:a,hasRedoOps:c}:a!==e.hasUndoOps||c!==e.hasRedoOps?Object.assign({},e,{hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}):e}},view:t=>{const e=i.Gt.getState(t.state),n=i.Gk.getState(t.state).undoManager;return n.on("stack-item-added",(({stackItem:n})=>{const r=e.binding;r&&n.meta.set(r,i.Gk.getState(t.state).prevSel)})),n.on("stack-item-popped",(({stackItem:t})=>{const n=e.binding;n&&(n.beforeTransactionSelection=t.meta.get(n)||n.beforeTransactionSelection)})),{destroy:()=>{n.destroy()}}}}),Z=r.hj.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},onCreate(){this.editor.extensionManager.extensions.find((t=>"history"===t.name))&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i.Gk.getState(e).undoManager;return 0!==r.undoStack.length&&(!n||Y(e))},redo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=i.Gk.getState(e).undoManager;return 0!==r.redoStack.length&&(!n||X(e))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field);return[_(t,{onFirstRender:()=>{var t;null===(t=this.options.onFirstRender)||void 0===t||t.apply(this)}}),J()]}})},3778:function(t,e,n){"use strict";n.d(e,{ZP:function(){return s}});var r=n(2066);const i=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,o=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,s=r.vc.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,r.Cf)({find:i,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:o,type:this.type})]}})},3747:function(t,e,n){"use strict";n.d(e,{ZP:function(){return o}});var r=n(2066);const i=/^\s*(\[([( |x])?\])\s$/,o=r.NB.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>"true"===t.getAttribute("data-checked"),renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",(0,r.P1)(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",(e=>{if(!r.isEditable&&!this.options.onReadOnlyChecked)return void(a.checked=!a.checked);const{checked:i}=e.target;r.isEditable&&"function"===typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command((({tr:t})=>{const e=n(),r=t.doc.nodeAt(e);return t.setNodeMarkup(e,void 0,{...null===r||void 0===r?void 0:r.attrs,checked:i}),!0})).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,i)||(a.checked=!a.checked))})),Object.entries(this.options.HTMLAttributes).forEach((([t,e])=>{i.setAttribute(t,e)})),i.dataset.checked=t.attrs.checked,t.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,c),Object.entries(e).forEach((([t,e])=>{i.setAttribute(t,e)})),{dom:i,contentDOM:c,update:t=>t.type===this.type&&(i.dataset.checked=t.attrs.checked,t.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[(0,r.S0)({find:i,type:this.type,getAttributes:t=>({checked:"x"===t[t.length-1]})})]}})},1531:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(2066);const i=r.NB.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}})},3929:function(t,e,n){"use strict";n.d(e,{Z:function(){return Ot}});n(7658);var r=n(2066);const i=/^\s*>\s$/,o=r.NB.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,r.S0)({find:i,type:this.type})]}}),s=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,a=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,c=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,l=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,u=r.vc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,r.Cf)({find:s,type:this.type}),(0,r.Cf)({find:c,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:a,type:this.type}),(0,r.K9)({find:l,type:this.type})]}}),h=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),d=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type),i=Object.entries(n).some((([,t])=>!!t));return!!i||e.unsetMark(this.name)}}}}),f=/^\s*([-+*])\s$/,p=r.NB.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(h.name,this.editor.getAttributes(d.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=(0,r.S0)({find:f,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:f,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(d.name),editor:this.editor})),[t]}}),g=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,m=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,y=r.vc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,r.Cf)({find:g,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:m,type:this.type})]}});var w=n(157);const b=/^```([a-z]+)?[\s\n]$/,v=/^~~~([a-z]+)?[\s\n]$/,E=r.NB.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,r=[...(null===(e=t.firstElementChild)||void 0===e?void 0:e.classList)||[]],i=r.filter((t=>t.startsWith(n))).map((t=>t.replace(n,""))),o=i[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",(0,r.P1)(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=1===e.pos;return!(!t||e.parent.type.name!==this.name)&&(!(!n&&e.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith("\n\n");return!(!o||!s)&&t.chain().command((({tr:t})=>(t.delete(r.pos-2,r.pos),!0))).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2;if(!s)return!1;const a=i.after();if(void 0===a)return!1;const c=r.nodeAt(a);return!c&&t.commands.exitCode()}}},addInputRules(){return[(0,r.zK)({find:b,type:this.type,getAttributes:t=>({language:t[1]})}),(0,r.zK)({find:v,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new w.Sy({key:new w.H$("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null===i||void 0===i?void 0:i.mode;if(!n||!o)return!1;const{tr:s}=t.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(w.Bs.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),A=r.NB.create({name:"doc",topNode:!0,content:"block+"});var C=n(1382);function S(t={}){return new w.Sy({view(e){return new _(e,t)}})}class _{constructor(t,e){this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,r=e.nodeAfter;if(n||r){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let i=e.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let t=o.getBoundingClientRect();r=t.left-o.scrollLeft,i=t.top-o.scrollTop}this.element.style.left=t.left-r+"px",this.element.style.top=t.top-i+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,e,t):r;if(e&&!i){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=(0,C.nj)(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const T=r.hj.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[S(this.options)]}});var I=n(203),M=n(1543),k=n(1460);class N extends w.Y1{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return N.valid(n)?new N(n):w.Y1.near(n)}content(){return M.p2.empty}eq(t){return t instanceof N&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new N(t.resolve(e.pos))}getBookmark(){return new O(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!D(t)||!x(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&N.valid(t))return t;let r=t.pos,i=null;for(let n=t.depth;;n--){let o=t.node(n);if(e>0?t.indexAfter(n)<o.childCount:t.index(n)>0){i=o.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;r+=e;let s=t.doc.resolve(r);if(N.valid(s))return s}for(;;){let o=e>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!w.qv.isSelectable(i)){t=t.doc.resolve(r+i.nodeSize*e),n=!1;continue t}break}i=o,r+=e;let s=t.doc.resolve(r);if(N.valid(s))return s}return null}}}N.prototype.visible=!1,N.findFrom=N.findGapCursorFrom,w.Y1.jsonID("gapcursor",N);class O{constructor(t){this.pos=t}map(t){return new O(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return N.valid(e)?new N(e):w.Y1.near(e)}}function D(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(0!=n)for(let t=r.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function x(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(let t=r.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function R(){return new w.Sy({props:{decorations:U,createSelectionBetween(t,e,n){return e.pos==n.pos&&N.valid(n)?new N(n):null},handleClick:P,handleKeyDown:B,handleDOMEvents:{beforeinput:F}}})}const B=(0,I.$)({ArrowLeft:L("horiz",-1),ArrowRight:L("horiz",1),ArrowUp:L("vert",-1),ArrowDown:L("vert",1)});function L(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,r,i){let o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof w.Bs){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}let c=N.findGapCursorFrom(s,e,a);return!!c&&(r&&r(t.tr.setSelection(new N(c))),!0)}}function P(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!N.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&w.qv.isSelectable(t.state.doc.nodeAt(i.inside)))&&(t.dispatch(t.state.tr.setSelection(new N(r))),!0)}function F(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof N))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=M.HY.empty;for(let s=r.length-1;s>=0;s--)i=M.HY.from(r[s].createAndFill(null,i));let o=t.state.tr.replace(n.pos,n.pos,new M.p2(i,0,0));return o.setSelection(w.Bs.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function U(t){if(!(t.selection instanceof N))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",k.EH.create(t.doc,[k.p.widget(t.selection.head,e,{key:"gapcursor"})])}const z=r.hj.create({name:"gapCursor",addProseMirrorPlugins(){return[R()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:null!==(e=(0,r.nU)((0,r.Nl)(t,"allowGapCursor",n)))&&void 0!==e?e:null}}}),H=r.NB.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",(0,r.P1)(this.options.HTMLAttributes,t)]},renderText(){return"\n"},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:t,storedMarks:i}=n;if(t.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=r.extensionManager,a=i||t.$to.parentOffset&&t.$from.marks();return e().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{if(e&&a&&o){const e=a.filter((t=>s.includes(t.type.name)));t.ensureMarks(e)}return!0})).run()}))])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),j=r.NB.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}})))},renderHTML({node:t,HTMLAttributes:e}){const n=this.options.levels.includes(t.attrs.level),i=n?t.attrs.level:this.options.levels[0];return[`h${i}`,(0,r.P1)(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.setNode(this.name,t),toggleHeading:t=>({commands:e})=>!!this.options.levels.includes(t.level)&&e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},addInputRules(){return this.options.levels.map((t=>(0,r.zK)({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}})))}});var V=200,W=function(){};W.prototype.append=function(t){return t.length?(t=W.from(t),!this.length&&t||t.length<V&&this.leafAppend(t)||this.length<V&&t.leafPrepend(this)||this.appendInner(t)):this},W.prototype.prepend=function(t){return t.length?W.from(t).append(this):this},W.prototype.appendInner=function(t){return new G(this,t)},W.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?W.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},W.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},W.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},W.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},W.from=function(t){return t instanceof W?t:t&&t.length?new $(t):W.empty};var $=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=V)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=V)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(W);W.empty=new $([]);var G=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(W),Y=W,X=Y;const q=500;class K{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){let t=this.items.get(i-1);if(t.selection){--i;break}}e&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=t.tr,c=[],l=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(i,e+1),r=n.maps.length),r--,void l.push(t);if(n){l.push(new Z(t.map));let e,i=t.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],c.push(new Z(e,void 0,void 0,c.length+l.length))),r--,e&&n.appendMap(e,r)}else a.maybeStep(t.step);return t.selection?(o=n?t.selection.map(n.slice(r)):t.selection,s=new K(this.items.slice(0,i).append(l.reverse().concat(c)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let l=0;l<t.steps.length;l++){let n,c=t.steps[l].invert(t.docs[l]),u=new Z(t.mapping.maps[l],c,e);(n=a&&a.merge(u))&&(u=n,l?i.pop():s=s.slice(0,s.length-1)),i.push(u),e&&(o++,e=void 0),r||(a=u)}let c=o-n.depth;return c>tt&&(s=J(s,c),o-=c),new K(s.append(i),o)}remapping(t,e){let n=new C.vs;return this.items.forEach(((e,r)=>{let i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,i)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new K(this.items.append(t.map((t=>new Z(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((t=>{t.selection&&s--}),r);let a=e;this.items.forEach((e=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let c=i.maps[r];if(e.step){let o=t.steps[r].invert(t.docs[r]),l=e.selection&&e.selection.map(i.slice(a+1,r));l&&s++,n.push(new Z(c,o,l))}else n.push(new Z(c))}),r);let c=[];for(let h=e;h<o;h++)c.push(new Z(i.maps[h]));let l=this.items.slice(0,r).append(c).append(n),u=new K(l,s);return u.emptyItemCount()>q&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=t)r.push(o),o.selection&&i++;else if(o.step){let t=o.step.map(e.slice(n)),s=t&&t.getMap();if(n--,s&&e.appendMap(s,n),t){let a=o.selection&&o.selection.map(e.slice(n));a&&i++;let c,l=new Z(s.invert(),t,a),u=r.length-1;(c=r.length&&r[u].merge(l))?r[u]=c:r.push(l)}}else o.map&&n--}),this.items.length,0),new K(X.from(r.reverse()),i)}}function J(t,e){let n;return t.forEach(((t,r)=>{if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}K.empty=new K(X.empty,0);class Z{constructor(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new Z(e.getMap().invert(),e,this.selection)}}}class Q{constructor(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r}}const tt=20;function et(t,e,n,r){let i,o=n.getMeta(lt);if(o)return o.historyState;n.getMeta(ut)&&(t=new Q(t.done,t.undone,null,0));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(lt))return s.getMeta(lt).redo?new Q(t.done.addTransform(n,void 0,r,ct(e)),t.undone,rt(n.mapping.maps[n.steps.length-1]),t.prevTime):new Q(t.done,t.undone.addTransform(n,void 0,r,ct(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new Q(t.done.rebased(n,i),t.undone.rebased(n,i),it(t.prevRanges,n.mapping),t.prevTime):new Q(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),it(t.prevRanges,n.mapping),t.prevTime);{let i=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!nt(n,t.prevRanges)),o=s?it(t.prevRanges,n.mapping):rt(n.mapping.maps[n.steps.length-1]);return new Q(t.done.addTransform(n,i?e.selection.getBookmark():void 0,r,ct(e)),K.empty,o,n.time)}}function nt(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,r)=>{for(let i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}function rt(t){let e=[];return t.forEach(((t,n,r,i)=>e.push(r,i))),e}function it(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function ot(t,e,n,r){let i=ct(e),o=lt.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(!s)return;let a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),l=new Q(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(lt,{redo:r,historyState:l}).scrollIntoView())}let st=!1,at=null;function ct(t){let e=t.plugins;if(at!=e){st=!1,at=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){st=!0;break}}return st}const lt=new w.H$("history"),ut=new w.H$("closeHistory");function ht(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new w.Sy({key:lt,state:{init(){return new Q(K.empty,K.empty,null,0)},apply(e,n,r){return et(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,r="historyUndo"==n?dt:"historyRedo"==n?ft:null;return!!r&&(e.preventDefault(),r(t.state,t.dispatch))}}}})}const dt=(t,e)=>{let n=lt.getState(t);return!(!n||0==n.done.eventCount)&&(e&&ot(n,t,e,!1),!0)},ft=(t,e)=>{let n=lt.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&ot(n,t,e,!0),!0)};const pt=r.hj.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>dt(t,e),redo:()=>({state:t,dispatch:e})=>ft(t,e)}},addProseMirrorPlugins(){return[ht(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),gt=r.NB.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",(0,r.P1)(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t})=>t().insertContent({type:this.name}).command((({tr:t,dispatch:e})=>{var n;if(e){const{$to:e}=t.selection,r=e.end();if(e.nodeAfter)t.setSelection(w.Bs.create(t.doc,e.pos));else{const i=null===(n=e.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();i&&(t.insert(r,i),t.setSelection(w.Bs.create(t.doc,r)))}t.scrollIntoView()}return!0})).run()}},addInputRules(){return[(0,r.x2)({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),mt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,yt=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,wt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,bt=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,vt=r.vc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>"normal"!==t.style.fontStyle&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,r.Cf)({find:mt,type:this.type}),(0,r.Cf)({find:wt,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:yt,type:this.type}),(0,r.K9)({find:bt,type:this.type})]}}),Et=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),At=r.NB.create({name:"listItem",addOptions(){return{HTMLAttributes:{}}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",(0,r.P1)(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ct=r.vc.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=(0,r.Jo)(t,this.type),i=Object.entries(n).some((([,t])=>!!t));return!!i||e.unsetMark(this.name)}}}}),St=/^(\d+)\.\s$/,_t=r.NB.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return 1===e?["ol",(0,r.P1)(this.options.HTMLAttributes,n),0]:["ol",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(At.name,this.editor.getAttributes(Ct.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=(0,r.S0)({find:St,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=(0,r.S0)({find:St,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ct.name),editor:this.editor})),[t]}}),Tt=r.NB.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),It=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Mt=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,kt=r.vc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("line-through")&&{}}]},renderHTML({HTMLAttributes:t}){return["s",(0,r.P1)(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,r.Cf)({find:It,type:this.type})]},addPasteRules(){return[(0,r.K9)({find:Mt,type:this.type})]}}),Nt=r.NB.create({name:"text",group:"inline"}),Ot=r.hj.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,a,c,l,h,d,f,g,m,w,b,v,C;const S=[];return!1!==this.options.blockquote&&S.push(o.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bold&&S.push(u.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.bulletList&&S.push(p.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&S.push(y.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&S.push(E.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&S.push(A.configure(null===(s=this.options)||void 0===s?void 0:s.document)),!1!==this.options.dropcursor&&S.push(T.configure(null===(a=this.options)||void 0===a?void 0:a.dropcursor)),!1!==this.options.gapcursor&&S.push(z.configure(null===(c=this.options)||void 0===c?void 0:c.gapcursor)),!1!==this.options.hardBreak&&S.push(H.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&S.push(j.configure(null===(h=this.options)||void 0===h?void 0:h.heading)),!1!==this.options.history&&S.push(pt.configure(null===(d=this.options)||void 0===d?void 0:d.history)),!1!==this.options.horizontalRule&&S.push(gt.configure(null===(f=this.options)||void 0===f?void 0:f.horizontalRule)),!1!==this.options.italic&&S.push(vt.configure(null===(g=this.options)||void 0===g?void 0:g.italic)),!1!==this.options.listItem&&S.push(Et.configure(null===(m=this.options)||void 0===m?void 0:m.listItem)),!1!==this.options.orderedList&&S.push(_t.configure(null===(w=this.options)||void 0===w?void 0:w.orderedList)),!1!==this.options.paragraph&&S.push(Tt.configure(null===(b=this.options)||void 0===b?void 0:b.paragraph)),!1!==this.options.strike&&S.push(kt.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==this.options.text&&S.push(Nt.configure(null===(C=this.options)||void 0===C?void 0:C.text)),S}})},7200:function(t,e,n){"use strict";n.d(e,{ML:function(){return Br},kg:function(){return Lr}});n(7658);var r=n(2066),i=n(157);function o(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function s(t){var e=o(t).Element;return t instanceof e||t instanceof Element}function a(t){var e=o(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function c(t){if("undefined"===typeof ShadowRoot)return!1;var e=o(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var l=Math.max,u=Math.min,h=Math.round;function d(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function f(){return!/^((?!chrome|android).)*safari/i.test(d())}function p(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,c=1;e&&a(t)&&(i=t.offsetWidth>0&&h(r.width)/t.offsetWidth||1,c=t.offsetHeight>0&&h(r.height)/t.offsetHeight||1);var l=s(t)?o(t):window,u=l.visualViewport,d=!f()&&n,p=(r.left+(d&&u?u.offsetLeft:0))/i,g=(r.top+(d&&u?u.offsetTop:0))/c,m=r.width/i,y=r.height/c;return{width:m,height:y,top:g,right:p+m,bottom:g+y,left:p,x:p,y:g}}function g(t){var e=o(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function m(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function y(t){return t!==o(t)&&a(t)?m(t):g(t)}function w(t){return t?(t.nodeName||"").toLowerCase():null}function b(t){return((s(t)?t.ownerDocument:t.document)||window.document).documentElement}function v(t){return p(b(t)).left+g(t).scrollLeft}function E(t){return o(t).getComputedStyle(t)}function A(t){var e=E(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function C(t){var e=t.getBoundingClientRect(),n=h(e.width)/t.offsetWidth||1,r=h(e.height)/t.offsetHeight||1;return 1!==n||1!==r}function S(t,e,n){void 0===n&&(n=!1);var r=a(e),i=a(e)&&C(e),o=b(e),s=p(t,i,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==w(e)||A(o))&&(c=y(e)),a(e)?(l=p(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=v(o))),{x:s.left+c.scrollLeft-l.x,y:s.top+c.scrollTop-l.y,width:s.width,height:s.height}}function _(t){var e=p(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function T(t){return"html"===w(t)?t:t.assignedSlot||t.parentNode||(c(t)?t.host:null)||b(t)}function I(t){return["html","body","#document"].indexOf(w(t))>=0?t.ownerDocument.body:a(t)&&A(t)?t:I(T(t))}function M(t,e){var n;void 0===e&&(e=[]);var r=I(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),s=o(r),a=i?[s].concat(s.visualViewport||[],A(r)?r:[]):r,c=e.concat(a);return i?c:c.concat(M(T(a)))}function k(t){return["table","td","th"].indexOf(w(t))>=0}function N(t){return a(t)&&"fixed"!==E(t).position?t.offsetParent:null}function O(t){var e=/firefox/i.test(d()),n=/Trident/i.test(d());if(n&&a(t)){var r=E(t);if("fixed"===r.position)return null}var i=T(t);c(i)&&(i=i.host);while(a(i)&&["html","body"].indexOf(w(i))<0){var o=E(i);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return i;i=i.parentNode}return null}function D(t){var e=o(t),n=N(t);while(n&&k(n)&&"static"===E(n).position)n=N(n);return n&&("html"===w(n)||"body"===w(n)&&"static"===E(n).position)?e:n||O(t)||e}var x="top",R="bottom",B="right",L="left",P="auto",F=[x,R,B,L],U="start",z="end",H="clippingParents",j="viewport",V="popper",W="reference",$=F.reduce((function(t,e){return t.concat([e+"-"+U,e+"-"+z])}),[]),G=[].concat(F,[P]).reduce((function(t,e){return t.concat([e,e+"-"+U,e+"-"+z])}),[]),Y="beforeRead",X="read",q="afterRead",K="beforeMain",J="main",Z="afterMain",Q="beforeWrite",tt="write",et="afterWrite",nt=[Y,X,q,K,J,Z,Q,tt,et];function rt(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name);var o=[].concat(t.requires||[],t.requiresIfExists||[]);o.forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function it(t){var e=rt(t);return nt.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function ot(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function st(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var at={placement:"bottom",modifiers:[],strategy:"absolute"};function ct(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function lt(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?at:i;return function(t,e,n){void 0===n&&(n=o);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},at,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],c=!1,l={state:i,setOptions:function(n){var a="function"===typeof n?n(i.options):n;h(),i.options=Object.assign({},o,i.options,a),i.scrollParents={reference:s(t)?M(t):t.contextElement?M(t.contextElement):[],popper:M(e)};var c=it(st([].concat(r,i.options.modifiers)));return i.orderedModifiers=c.filter((function(t){return t.enabled})),u(),l.update()},forceUpdate:function(){if(!c){var t=i.elements,e=t.reference,n=t.popper;if(ct(e,n)){i.rects={reference:S(e,D(n),"fixed"===i.options.strategy),popper:_(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var o=i.orderedModifiers[r],s=o.fn,a=o.options,u=void 0===a?{}:a,h=o.name;"function"===typeof s&&(i=s({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:ot((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){h(),c=!0}};if(!ct(t,e))return l;function u(){i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var s=o({state:i,name:e,instance:l,options:r}),c=function(){};a.push(s||c)}}))}function h(){a.forEach((function(t){return t()})),a=[]}return l.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var ut={passive:!0};function ht(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=void 0===i||i,a=r.resize,c=void 0===a||a,l=o(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach((function(t){t.addEventListener("scroll",n.update,ut)})),c&&l.addEventListener("resize",n.update,ut),function(){s&&u.forEach((function(t){t.removeEventListener("scroll",n.update,ut)})),c&&l.removeEventListener("resize",n.update,ut)}}var dt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ht,data:{}};function ft(t){return t.split("-")[0]}function pt(t){return t.split("-")[1]}function gt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function mt(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?ft(i):null,s=i?pt(i):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case x:e={x:a,y:n.y-r.height};break;case R:e={x:a,y:n.y+n.height};break;case B:e={x:n.x+n.width,y:c};break;case L:e={x:n.x-r.width,y:c};break;default:e={x:n.x,y:n.y}}var l=o?gt(o):null;if(null!=l){var u="y"===l?"height":"width";switch(s){case U:e[l]=e[l]-(n[u]/2-r[u]/2);break;case z:e[l]=e[l]+(n[u]/2-r[u]/2);break;default:}}return e}function yt(t){var e=t.state,n=t.name;e.modifiersData[n]=mt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var wt={name:"popperOffsets",enabled:!0,phase:"read",fn:yt,data:{}},bt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vt(t){var e=t.x,n=t.y,r=window,i=r.devicePixelRatio||1;return{x:h(e*i)/i||0,y:h(n*i)/i||0}}function Et(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,a=t.offsets,c=t.position,l=t.gpuAcceleration,u=t.adaptive,h=t.roundOffsets,d=t.isFixed,f=a.x,p=void 0===f?0:f,g=a.y,m=void 0===g?0:g,y="function"===typeof h?h({x:p,y:m}):{x:p,y:m};p=y.x,m=y.y;var w=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),A=L,C=x,S=window;if(u){var _=D(n),T="clientHeight",I="clientWidth";if(_===o(n)&&(_=b(n),"static"!==E(_).position&&"absolute"===c&&(T="scrollHeight",I="scrollWidth")),i===x||(i===L||i===B)&&s===z){C=R;var M=d&&_===S&&S.visualViewport?S.visualViewport.height:_[T];m-=M-r.height,m*=l?1:-1}if(i===L||(i===x||i===R)&&s===z){A=B;var k=d&&_===S&&S.visualViewport?S.visualViewport.width:_[I];p-=k-r.width,p*=l?1:-1}}var N,O=Object.assign({position:c},u&&bt),P=!0===h?vt({x:p,y:m}):{x:p,y:m};return p=P.x,m=P.y,l?Object.assign({},O,(N={},N[C]=v?"0":"",N[A]=w?"0":"",N.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",N)):Object.assign({},O,(e={},e[C]=v?m+"px":"",e[A]=w?p+"px":"",e.transform="",e))}function At(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,l={placement:ft(e.placement),variation:pt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Et(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Et(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Ct={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:At,data:{}};function St(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];a(i)&&w(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))}function _t(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),s=o.reduce((function(t,e){return t[e]="",t}),{});a(r)&&w(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}}var Tt={name:"applyStyles",enabled:!0,phase:"write",fn:St,effect:_t,requires:["computeStyles"]};function It(t,e,n){var r=ft(t),i=[L,x].indexOf(r)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[L,B].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Mt(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=G.reduce((function(t,n){return t[n]=It(n,e.rects,o),t}),{}),a=s[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=s}var kt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Mt},Nt={left:"right",right:"left",bottom:"top",top:"bottom"};function Ot(t){return t.replace(/left|right|bottom|top/g,(function(t){return Nt[t]}))}var Dt={start:"end",end:"start"};function xt(t){return t.replace(/start|end/g,(function(t){return Dt[t]}))}function Rt(t,e){var n=o(t),r=b(t),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,c=0,l=0;if(i){s=i.width,a=i.height;var u=f();(u||!u&&"fixed"===e)&&(c=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:c+v(t),y:l}}function Bt(t){var e,n=b(t),r=g(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=l(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=l(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+v(t),c=-r.scrollTop;return"rtl"===E(i||n).direction&&(a+=l(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function Lt(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&c(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Pt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ft(t,e){var n=p(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ut(t,e,n){return e===j?Pt(Rt(t,n)):s(e)?Ft(e,n):Pt(Bt(b(t)))}function zt(t){var e=M(T(t)),n=["absolute","fixed"].indexOf(E(t).position)>=0,r=n&&a(t)?D(t):t;return s(r)?e.filter((function(t){return s(t)&&Lt(t,r)&&"body"!==w(t)})):[]}function Ht(t,e,n,r){var i="clippingParents"===e?zt(t):[].concat(e),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(e,n){var i=Ut(t,n,r);return e.top=l(i.top,e.top),e.right=u(i.right,e.right),e.bottom=u(i.bottom,e.bottom),e.left=l(i.left,e.left),e}),Ut(t,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function jt(){return{top:0,right:0,bottom:0,left:0}}function Vt(t){return Object.assign({},jt(),t)}function Wt(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function $t(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.strategy,a=void 0===o?t.strategy:o,c=n.boundary,l=void 0===c?H:c,u=n.rootBoundary,h=void 0===u?j:u,d=n.elementContext,f=void 0===d?V:d,g=n.altBoundary,m=void 0!==g&&g,y=n.padding,w=void 0===y?0:y,v=Vt("number"!==typeof w?w:Wt(w,F)),E=f===V?W:V,A=t.rects.popper,C=t.elements[m?E:f],S=Ht(s(C)?C:C.contextElement||b(t.elements.popper),l,h,a),_=p(t.elements.reference),T=mt({reference:_,element:A,strategy:"absolute",placement:i}),I=Pt(Object.assign({},A,T)),M=f===V?I:_,k={top:S.top-M.top+v.top,bottom:M.bottom-S.bottom+v.bottom,left:S.left-M.left+v.left,right:M.right-S.right+v.right},N=t.modifiersData.offset;if(f===V&&N){var O=N[i];Object.keys(k).forEach((function(t){var e=[B,R].indexOf(t)>=0?1:-1,n=[x,R].indexOf(t)>=0?"y":"x";k[t]+=O[n]*e}))}return k}function Gt(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?G:c,u=pt(r),h=u?a?$:$.filter((function(t){return pt(t)===u})):F,d=h.filter((function(t){return l.indexOf(t)>=0}));0===d.length&&(d=h);var f=d.reduce((function(e,n){return e[n]=$t(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[ft(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}function Yt(t){if(ft(t)===P)return[];var e=Ot(t);return[xt(t),e,xt(e)]}function Xt(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,c=n.fallbackPlacements,l=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,p=void 0===f||f,g=n.allowedAutoPlacements,m=e.options.placement,y=ft(m),w=y===m,b=c||(w||!p?[Ot(m)]:Yt(m)),v=[m].concat(b).reduce((function(t,n){return t.concat(ft(n)===P?Gt(e,{placement:n,boundary:u,rootBoundary:h,padding:l,flipVariations:p,allowedAutoPlacements:g}):n)}),[]),E=e.rects.reference,A=e.rects.popper,C=new Map,S=!0,_=v[0],T=0;T<v.length;T++){var I=v[T],M=ft(I),k=pt(I)===U,N=[x,R].indexOf(M)>=0,O=N?"width":"height",D=$t(e,{placement:I,boundary:u,rootBoundary:h,altBoundary:d,padding:l}),F=N?k?B:L:k?R:x;E[O]>A[O]&&(F=Ot(F));var z=Ot(F),H=[];if(o&&H.push(D[M]<=0),a&&H.push(D[F]<=0,D[z]<=0),H.every((function(t){return t}))){_=I,S=!1;break}C.set(I,H)}if(S)for(var j=p?3:1,V=function(t){var e=v.find((function(e){var n=C.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return _=e,"break"},W=j;W>0;W--){var $=V(W);if("break"===$)break}e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}}var qt={name:"flip",enabled:!0,phase:"main",fn:Xt,requiresIfExists:["offset"],data:{_skip:!1}};function Kt(t){return"x"===t?"y":"x"}function Jt(t,e,n){return l(t,u(e,n))}function Zt(t,e,n){var r=Jt(t,e,n);return r>n?n:r}function Qt(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.padding,p=n.tether,g=void 0===p||p,m=n.tetherOffset,y=void 0===m?0:m,w=$t(e,{boundary:c,rootBoundary:h,padding:f,altBoundary:d}),b=ft(e.placement),v=pt(e.placement),E=!v,A=gt(b),C=Kt(A),S=e.modifiersData.popperOffsets,T=e.rects.reference,I=e.rects.popper,M="function"===typeof y?y(Object.assign({},e.rects,{placement:e.placement})):y,k="number"===typeof M?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,O={x:0,y:0};if(S){if(o){var P,F="y"===A?x:L,z="y"===A?R:B,H="y"===A?"height":"width",j=S[A],V=j+w[F],W=j-w[z],$=g?-I[H]/2:0,G=v===U?T[H]:I[H],Y=v===U?-I[H]:-T[H],X=e.elements.arrow,q=g&&X?_(X):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jt(),J=K[F],Z=K[z],Q=Jt(0,T[H],q[H]),tt=E?T[H]/2-$-Q-J-k.mainAxis:G-Q-J-k.mainAxis,et=E?-T[H]/2+$+Q+Z+k.mainAxis:Y+Q+Z+k.mainAxis,nt=e.elements.arrow&&D(e.elements.arrow),rt=nt?"y"===A?nt.clientTop||0:nt.clientLeft||0:0,it=null!=(P=null==N?void 0:N[A])?P:0,ot=j+tt-it-rt,st=j+et-it,at=Jt(g?u(V,ot):V,j,g?l(W,st):W);S[A]=at,O[A]=at-j}if(a){var ct,lt="x"===A?x:L,ut="x"===A?R:B,ht=S[C],dt="y"===C?"height":"width",mt=ht+w[lt],yt=ht-w[ut],wt=-1!==[x,L].indexOf(b),bt=null!=(ct=null==N?void 0:N[C])?ct:0,vt=wt?mt:ht-T[dt]-I[dt]-bt+k.altAxis,Et=wt?ht+T[dt]+I[dt]-bt-k.altAxis:yt,At=g&&wt?Zt(vt,ht,Et):Jt(g?vt:mt,ht,g?Et:yt);S[C]=At,O[C]=At-ht}e.modifiersData[r]=O}}var te={name:"preventOverflow",enabled:!0,phase:"main",fn:Qt,requiresIfExists:["offset"]},ee=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,Vt("number"!==typeof t?t:Wt(t,F))};function ne(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ft(n.placement),c=gt(a),l=[L,B].indexOf(a)>=0,u=l?"height":"width";if(o&&s){var h=ee(i.padding,n),d=_(o),f="y"===c?x:L,p="y"===c?R:B,g=n.rects.reference[u]+n.rects.reference[c]-s[c]-n.rects.popper[u],m=s[c]-n.rects.reference[c],y=D(o),w=y?"y"===c?y.clientHeight||0:y.clientWidth||0:0,b=g/2-m/2,v=h[f],E=w-d[u]-h[p],A=w/2-d[u]/2+b,C=Jt(v,A,E),S=c;n.modifiersData[r]=(e={},e[S]=C,e.centerOffset=C-A,e)}}function re(t){var e=t.state,n=t.options,r=n.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"!==typeof i||(i=e.elements.popper.querySelector(i),i))&&Lt(e.elements.popper,i)&&(e.elements.arrow=i)}var ie={name:"arrow",enabled:!0,phase:"main",fn:ne,effect:re,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function oe(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function se(t){return[x,B,R,L].some((function(e){return t[e]>=0}))}function ae(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=$t(e,{elementContext:"reference"}),a=$t(e,{altBoundary:!0}),c=oe(s,r),l=oe(a,i,o),u=se(c),h=se(l);e.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}var ce={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ae},le=[dt,wt,Ct,Tt,kt,qt,te,ie,ce],ue=lt({defaultModifiers:le}),he="tippy-box",de="tippy-content",fe="tippy-backdrop",pe="tippy-arrow",ge="tippy-svg-arrow",me={passive:!0,capture:!0},ye=function(){return document.body};function we(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function be(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function ve(t,e){return"function"===typeof t?t.apply(void 0,e):t}function Ee(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function Ae(t){return t.split(/\s+/).filter(Boolean)}function Ce(t){return[].concat(t)}function Se(t,e){-1===t.indexOf(e)&&t.push(e)}function _e(t){return t.filter((function(e,n){return t.indexOf(e)===n}))}function Te(t){return t.split("-")[0]}function Ie(t){return[].slice.call(t)}function Me(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function ke(){return document.createElement("div")}function Ne(t){return["Element","Fragment"].some((function(e){return be(t,e)}))}function Oe(t){return be(t,"NodeList")}function De(t){return be(t,"MouseEvent")}function xe(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function Re(t){return Ne(t)?[t]:Oe(t)?Ie(t):Array.isArray(t)?t:Ie(document.querySelectorAll(t))}function Be(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function Le(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function Pe(t){var e,n=Ce(t),r=n[0];return null!=r&&null!=(e=r.ownerDocument)&&e.body?r.ownerDocument:document}function Fe(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,i=t.popperState,o=t.props,s=o.interactiveBorder,a=Te(i.placement),c=i.modifiersData.offset;if(!c)return!0;var l="bottom"===a?c.top.y:0,u="top"===a?c.bottom.y:0,h="right"===a?c.left.x:0,d="left"===a?c.right.x:0,f=e.top-r+l>s,p=r-e.bottom-u>s,g=e.left-n+h>s,m=n-e.right-d>s;return f||p||g||m}))}function Ue(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function ze(t,e){var n=e;while(n){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var He={isTouch:!1},je=0;function Ve(){He.isTouch||(He.isTouch=!0,window.performance&&document.addEventListener("mousemove",We))}function We(){var t=performance.now();t-je<20&&(He.isTouch=!1,document.removeEventListener("mousemove",We)),je=t}function $e(){var t=document.activeElement;if(xe(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ge(){document.addEventListener("touchstart",Ve,me),window.addEventListener("blur",$e)}var Ye="undefined"!==typeof window&&"undefined"!==typeof document,Xe=!!Ye&&!!window.msCrypto;var qe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ke={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Je=Object.assign({appendTo:ye,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},qe,Ke),Ze=Object.keys(Je),Qe=function(t){var e=Object.keys(t);e.forEach((function(e){Je[e]=t[e]}))};function tn(t){var e=t.plugins||[],n=e.reduce((function(e,n){var r,i=n.name,o=n.defaultValue;i&&(e[i]=void 0!==t[i]?t[i]:null!=(r=Je[i])?r:o);return e}),{});return Object.assign({},t,n)}function en(t,e){var n=e?Object.keys(tn(Object.assign({},Je,{plugins:e}))):Ze,r=n.reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(i){e[n]=r}return e}),{});return r}function nn(t,e){var n=Object.assign({},e,{content:ve(e.content,[t])},e.ignoreAttributes?{}:en(t,e.plugins));return n.aria=Object.assign({},Je.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var rn=function(){return"innerHTML"};function on(t,e){t[rn()]=e}function sn(t){var e=ke();return!0===t?e.className=pe:(e.className=ge,Ne(t)?e.appendChild(t):on(e,t)),e}function an(t,e){Ne(e.content)?(on(t,""),t.appendChild(e.content)):"function"!==typeof e.content&&(e.allowHTML?on(t,e.content):t.textContent=e.content)}function cn(t){var e=t.firstElementChild,n=Ie(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(de)})),arrow:n.find((function(t){return t.classList.contains(pe)||t.classList.contains(ge)})),backdrop:n.find((function(t){return t.classList.contains(fe)}))}}function ln(t){var e=ke(),n=ke();n.className=he,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=ke();function i(n,r){var i=cn(e),o=i.box,s=i.content,a=i.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"===typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||an(s,t.props),r.arrow?a?n.arrow!==r.arrow&&(o.removeChild(a),o.appendChild(sn(r.arrow))):o.appendChild(sn(r.arrow)):a&&o.removeChild(a)}return r.className=de,r.setAttribute("data-state","hidden"),an(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props),{popper:e,onUpdate:i}}ln.$$tippy=!0;var un=1,hn=[],dn=[];function fn(t,e){var n,r,i,o,s,a,c,l=nn(t,Object.assign({},Je,tn(Me(e)))),u=!1,h=!1,d=!1,f=!1,p=[],g=Ee(K,l.interactiveDebounce),m=un++,y=null,w=_e(l.plugins),b={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:m,reference:t,popper:ke(),popperInstance:y,props:l,state:b,plugins:w,clearDelayTimeouts:ct,setProps:lt,setContent:ut,show:ht,hide:dt,hideWithInteractivity:ft,enable:st,disable:at,unmount:pt,destroy:gt};if(!l.render)return v;var E=l.render(v),A=E.popper,C=E.onUpdate;A.setAttribute("data-tippy-root",""),A.id="tippy-"+v.id,v.popper=A,t._tippy=v,A._tippy=v;var S=w.map((function(t){return t.fn(v)})),_=t.hasAttribute("aria-expanded");return Y(),L(),x(),R("onCreate",[v]),l.showOnCreate&&it(),A.addEventListener("mouseenter",(function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()})),A.addEventListener("mouseleave",(function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&N().addEventListener("mousemove",g)})),v;function T(){var t=v.props.touch;return Array.isArray(t)?t:[t,0]}function I(){return"hold"===T()[0]}function M(){var t;return!(null==(t=v.props.render)||!t.$$tippy)}function k(){return c||t}function N(){var t=k().parentNode;return t?Pe(t):document}function O(){return cn(A)}function D(t){return v.state.isMounted&&!v.state.isVisible||He.isTouch||o&&"focus"===o.type?0:we(v.props.delay,t?0:1,Je.delay)}function x(t){void 0===t&&(t=!1),A.style.pointerEvents=v.props.interactive&&!t?"":"none",A.style.zIndex=""+v.props.zIndex}function R(t,e,n){var r;(void 0===n&&(n=!0),S.forEach((function(n){n[t]&&n[t].apply(n,e)})),n)&&(r=v.props)[t].apply(r,e)}function B(){var e=v.props.aria;if(e.content){var n="aria-"+e.content,r=A.id,i=Ce(v.props.triggerTarget||t);i.forEach((function(t){var e=t.getAttribute(n);if(v.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var i=e&&e.replace(r,"").trim();i?t.setAttribute(n,i):t.removeAttribute(n)}}))}}function L(){if(!_&&v.props.aria.expanded){var e=Ce(v.props.triggerTarget||t);e.forEach((function(t){v.props.interactive?t.setAttribute("aria-expanded",v.state.isVisible&&t===k()?"true":"false"):t.removeAttribute("aria-expanded")}))}}function P(){N().removeEventListener("mousemove",g),hn=hn.filter((function(t){return t!==g}))}function F(e){if(!He.isTouch||!d&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!v.props.interactive||!ze(A,n)){if(Ce(v.props.triggerTarget||t).some((function(t){return ze(t,n)}))){if(He.isTouch)return;if(v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else R("onClickOutside",[v,e]);!0===v.props.hideOnClick&&(v.clearDelayTimeouts(),v.hide(),h=!0,setTimeout((function(){h=!1})),v.state.isMounted||j())}}}function U(){d=!0}function z(){d=!1}function H(){var t=N();t.addEventListener("mousedown",F,!0),t.addEventListener("touchend",F,me),t.addEventListener("touchstart",z,me),t.addEventListener("touchmove",U,me)}function j(){var t=N();t.removeEventListener("mousedown",F,!0),t.removeEventListener("touchend",F,me),t.removeEventListener("touchstart",z,me),t.removeEventListener("touchmove",U,me)}function V(t,e){$(t,(function(){!v.state.isVisible&&A.parentNode&&A.parentNode.contains(A)&&e()}))}function W(t,e){$(t,e)}function $(t,e){var n=O().box;function r(t){t.target===n&&(Ue(n,"remove",r),e())}if(0===t)return e();Ue(n,"remove",s),Ue(n,"add",r),s=r}function G(e,n,r){void 0===r&&(r=!1);var i=Ce(v.props.triggerTarget||t);i.forEach((function(t){t.addEventListener(e,n,r),p.push({node:t,eventType:e,handler:n,options:r})}))}function Y(){I()&&(G("touchstart",q,{passive:!0}),G("touchend",J,{passive:!0})),Ae(v.props.trigger).forEach((function(t){if("manual"!==t)switch(G(t,q),t){case"mouseenter":G("mouseleave",J);break;case"focus":G(Xe?"focusout":"blur",Z);break;case"focusin":G("focusout",Z);break}}))}function X(){p.forEach((function(t){var e=t.node,n=t.eventType,r=t.handler,i=t.options;e.removeEventListener(n,r,i)})),p=[]}function q(t){var e,n=!1;if(v.state.isEnabled&&!Q(t)&&!h){var r="focus"===(null==(e=o)?void 0:e.type);o=t,c=t.currentTarget,L(),!v.state.isVisible&&De(t)&&hn.forEach((function(e){return e(t)})),"click"===t.type&&(v.props.trigger.indexOf("mouseenter")<0||u)&&!1!==v.props.hideOnClick&&v.state.isVisible?n=!0:it(t),"click"===t.type&&(u=!n),n&&!r&&ot(t)}}function K(t){var e=t.target,n=k().contains(e)||A.contains(e);if("mousemove"!==t.type||!n){var r=rt().concat(A).map((function(t){var e,n=t._tippy,r=null==(e=n.popperInstance)?void 0:e.state;return r?{popperRect:t.getBoundingClientRect(),popperState:r,props:l}:null})).filter(Boolean);Fe(r,t)&&(P(),ot(t))}}function J(t){var e=Q(t)||v.props.trigger.indexOf("click")>=0&&u;e||(v.props.interactive?v.hideWithInteractivity(t):ot(t))}function Z(t){v.props.trigger.indexOf("focusin")<0&&t.target!==k()||v.props.interactive&&t.relatedTarget&&A.contains(t.relatedTarget)||ot(t)}function Q(t){return!!He.isTouch&&I()!==t.type.indexOf("touch")>=0}function tt(){et();var e=v.props,n=e.popperOptions,r=e.placement,i=e.offset,o=e.getReferenceClientRect,s=e.moveTransition,c=M()?cn(A).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||k()}:t,u={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(M()){var n=O(),r=n.box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?r.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?r.setAttribute("data-"+t,""):r.removeAttribute("data-"+t)})),e.attributes.popper={}}}},h=[{name:"offset",options:{offset:i}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},u];M()&&c&&h.push({name:"arrow",options:{element:c,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),v.popperInstance=ue(l,A,Object.assign({},n,{placement:r,onFirstUpdate:a,modifiers:h}))}function et(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function nt(){var t,e=v.props.appendTo,n=k();t=v.props.interactive&&e===ye||"parent"===e?n.parentNode:ve(e,[n]),t.contains(A)||t.appendChild(A),v.state.isMounted=!0,tt()}function rt(){return Ie(A.querySelectorAll("[data-tippy-root]"))}function it(t){v.clearDelayTimeouts(),t&&R("onTrigger",[v,t]),H();var e=D(!0),r=T(),i=r[0],o=r[1];He.isTouch&&"hold"===i&&o&&(e=o),e?n=setTimeout((function(){v.show()}),e):v.show()}function ot(t){if(v.clearDelayTimeouts(),R("onUntrigger",[v,t]),v.state.isVisible){if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&u)){var e=D(!1);e?r=setTimeout((function(){v.state.isVisible&&v.hide()}),e):i=requestAnimationFrame((function(){v.hide()}))}}else j()}function st(){v.state.isEnabled=!0}function at(){v.hide(),v.state.isEnabled=!1}function ct(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(i)}function lt(e){if(!v.state.isDestroyed){R("onBeforeUpdate",[v,e]),X();var n=v.props,r=nn(t,Object.assign({},n,Me(e),{ignoreAttributes:!0}));v.props=r,Y(),n.interactiveDebounce!==r.interactiveDebounce&&(P(),g=Ee(K,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?Ce(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded"),L(),x(),C&&C(n,r),v.popperInstance&&(tt(),rt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),R("onAfterUpdate",[v,e])}}function ut(t){v.setProps({content:t})}function ht(){var t=v.state.isVisible,e=v.state.isDestroyed,n=!v.state.isEnabled,r=He.isTouch&&!v.props.touch,i=we(v.props.duration,0,Je.duration);if(!(t||e||n||r)&&!k().hasAttribute("disabled")&&(R("onShow",[v],!1),!1!==v.props.onShow(v))){if(v.state.isVisible=!0,M()&&(A.style.visibility="visible"),x(),H(),v.state.isMounted||(A.style.transition="none"),M()){var o=O(),s=o.box,c=o.content;Be([s,c],0)}a=function(){var t;if(v.state.isVisible&&!f){if(f=!0,A.offsetHeight,A.style.transition=v.props.moveTransition,M()&&v.props.animation){var e=O(),n=e.box,r=e.content;Be([n,r],i),Le([n,r],"visible")}B(),L(),Se(dn,v),null==(t=v.popperInstance)||t.forceUpdate(),R("onMount",[v]),v.props.animation&&M()&&W(i,(function(){v.state.isShown=!0,R("onShown",[v])}))}},nt()}}function dt(){var t=!v.state.isVisible,e=v.state.isDestroyed,n=!v.state.isEnabled,r=we(v.props.duration,1,Je.duration);if(!(t||e||n)&&(R("onHide",[v],!1),!1!==v.props.onHide(v))){if(v.state.isVisible=!1,v.state.isShown=!1,f=!1,u=!1,M()&&(A.style.visibility="hidden"),P(),j(),x(!0),M()){var i=O(),o=i.box,s=i.content;v.props.animation&&(Be([o,s],r),Le([o,s],"hidden"))}B(),L(),v.props.animation?M()&&V(r,v.unmount):v.unmount()}}function ft(t){N().addEventListener("mousemove",g),Se(hn,g),g(t)}function pt(){v.state.isVisible&&v.hide(),v.state.isMounted&&(et(),rt().forEach((function(t){t._tippy.unmount()})),A.parentNode&&A.parentNode.removeChild(A),dn=dn.filter((function(t){return t!==v})),v.state.isMounted=!1,R("onHidden",[v]))}function gt(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),X(),delete t._tippy,v.state.isDestroyed=!0,R("onDestroy",[v]))}}function pn(t,e){void 0===e&&(e={});var n=Je.plugins.concat(e.plugins||[]);Ge();var r=Object.assign({},e,{plugins:n}),i=Re(t),o=i.reduce((function(t,e){var n=e&&fn(e,r);return n&&t.push(n),t}),[]);return Ne(t)?o[0]:o}pn.defaultProps=Je,pn.setDefaultProps=Qe,pn.currentInput=He;Object.assign({},Tt,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});pn.setDefaultProps({render:ln});var gn=pn,mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function yn(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var wn=yn,bn="object"==typeof mn&&mn&&mn.Object===Object&&mn,vn=bn,En=vn,An="object"==typeof self&&self&&self.Object===Object&&self,Cn=En||An||Function("return this")(),Sn=Cn,_n=Sn,Tn=function(){return _n.Date.now()},In=Tn,Mn=/\s/;function kn(t){var e=t.length;while(e--&&Mn.test(t.charAt(e)));return e}var Nn=kn,On=Nn,Dn=/^\s+/;function xn(t){return t?t.slice(0,On(t)+1).replace(Dn,""):t}var Rn=xn,Bn=Sn,Ln=Bn.Symbol,Pn=Ln,Fn=Pn,Un=Object.prototype,zn=Un.hasOwnProperty,Hn=Un.toString,jn=Fn?Fn.toStringTag:void 0;function Vn(t){var e=zn.call(t,jn),n=t[jn];try{t[jn]=void 0;var r=!0}catch(o){}var i=Hn.call(t);return r&&(e?t[jn]=n:delete t[jn]),i}var Wn=Vn,$n=Object.prototype,Gn=$n.toString;function Yn(t){return Gn.call(t)}var Xn=Yn,qn=Pn,Kn=Wn,Jn=Xn,Zn="[object Null]",Qn="[object Undefined]",tr=qn?qn.toStringTag:void 0;function er(t){return null==t?void 0===t?Qn:Zn:tr&&tr in Object(t)?Kn(t):Jn(t)}var nr=er;function rr(t){return null!=t&&"object"==typeof t}var ir=rr,or=nr,sr=ir,ar="[object Symbol]";function cr(t){return"symbol"==typeof t||sr(t)&&or(t)==ar}var lr=cr,ur=Rn,hr=wn,dr=lr,fr=NaN,pr=/^[-+]0x[0-9a-f]+$/i,gr=/^0b[01]+$/i,mr=/^0o[0-7]+$/i,yr=parseInt;function wr(t){if("number"==typeof t)return t;if(dr(t))return fr;if(hr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=hr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ur(t);var n=gr.test(t);return n||mr.test(t)?yr(t.slice(2),n?2:8):pr.test(t)?fr:+t}var br=wr,vr=wn,Er=In,Ar=br,Cr="Expected a function",Sr=Math.max,_r=Math.min;function Tr(t,e,n){var r,i,o,s,a,c,l=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(Cr);function f(e){var n=r,o=i;return r=i=void 0,l=e,s=t.apply(o,n),s}function p(t){return l=t,a=setTimeout(y,e),u?f(t):s}function g(t){var n=t-c,r=t-l,i=e-n;return h?_r(i,o-r):i}function m(t){var n=t-c,r=t-l;return void 0===c||n>=e||n<0||h&&r>=o}function y(){var t=Er();if(m(t))return w(t);a=setTimeout(y,g(t))}function w(t){return a=void 0,d&&r?f(t):(r=i=void 0,s)}function b(){void 0!==a&&clearTimeout(a),l=0,r=c=i=a=void 0}function v(){return void 0===a?s:w(Er())}function E(){var t=Er(),n=m(t);if(r=arguments,i=this,c=t,n){if(void 0===a)return p(c);if(h)return clearTimeout(a),a=setTimeout(y,e),f(c)}return void 0===a&&(a=setTimeout(y,e)),s}return e=Ar(e)||0,vr(n)&&(u=!!n.leading,h="maxWait"in n,o=h?Sr(Ar(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),E.cancel=b,E.flush=v,E}var Ir=Tr;class Mr{constructor({editor:t,element:e,view:n,tippyOptions:i={},updateDelay:o=250,shouldShow:s}){this.preventHide=!1,this.shouldShow=({view:t,state:e,from:n,to:i})=>{const{doc:o,selection:s}=e,{empty:a}=s,c=!o.textBetween(n,i).length&&(0,r.xh)(e.selection),l=this.element.contains(document.activeElement),u=t.hasFocus()||l;return!(!u||a||c||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.updateHandler=(t,e)=>{var n,i,o;const{state:s,composing:a}=t,{doc:c,selection:l}=s,u=e&&e.doc.eq(c)&&e.selection.eq(l);if(a||u)return;this.createTooltip();const{ranges:h}=l,d=Math.min(...h.map((t=>t.$from.pos))),f=Math.max(...h.map((t=>t.$to.pos))),p=null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:t,state:s,oldState:e,from:d,to:f});p?(null===(i=this.tippy)||void 0===i||i.setProps({getReferenceClientRect:(null===(o=this.tippyOptions)||void 0===o?void 0:o.getReferenceClientRect)||(()=>{if((0,r.EG)(s.selection)){const e=t.nodeDOM(d);if(e)return e.getBoundingClientRect()}return(0,r.pr)(t,d,f)})}),this.show()):this.hide()},this.editor=t,this.element=e,this.view=n,this.updateDelay=o,s&&(this.shouldShow=s),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=gn(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){const{state:n}=t,r=n.selection.$from.pos!==n.selection.$to.pos;this.updateDelay>0&&r?Ir(this.updateHandler,this.updateDelay)(t,e):this.updateHandler(t,e)}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const kr=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new Mr({view:e,...t})});r.hj.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[kr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});var Nr=n(3396),Or=n(4870);class Dr{constructor({editor:t,element:e,view:n,tippyOptions:r={},shouldShow:i}){this.preventHide=!1,this.shouldShow=({view:t,state:e})=>{const{selection:n}=e,{$anchor:r,empty:i}=n,o=1===r.depth,s=r.parent.isTextblock&&!r.parent.type.spec.code&&!r.parent.textContent;return!!(t.hasFocus()&&i&&o&&s&&this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:t})=>{var e;this.preventHide?this.preventHide=!1:(null===t||void 0===t?void 0:t.relatedTarget)&&(null===(e=this.element.parentNode)||void 0===e?void 0:e.contains(t.relatedTarget))||this.hide()},this.tippyBlurHandler=t=>{this.blurHandler({event:t})},this.editor=t,this.element=e,this.view=n,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=r,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,e=!!t.parentElement;!this.tippy&&e&&(this.tippy=gn(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,e){var n,i,o;const{state:s}=t,{doc:a,selection:c}=s,{from:l,to:u}=c,h=e&&e.doc.eq(a)&&e.selection.eq(c);if(h)return;this.createTooltip();const d=null===(n=this.shouldShow)||void 0===n?void 0:n.call(this,{editor:this.editor,view:t,state:s,oldState:e});d?(null===(i=this.tippy)||void 0===i||i.setProps({getReferenceClientRect:(null===(o=this.tippyOptions)||void 0===o?void 0:o.getReferenceClientRect)||(()=>(0,r.pr)(t,l,u))}),this.show()):this.hide()}show(){var t;null===(t=this.tippy)||void 0===t||t.show()}hide(){var t;null===(t=this.tippy)||void 0===t||t.hide()}destroy(){var t,e;(null===(t=this.tippy)||void 0===t?void 0:t.popper.firstChild)&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),null===(e=this.tippy)||void 0===e||e.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const xr=t=>new i.Sy({key:"string"===typeof t.pluginKey?new i.H$(t.pluginKey):t.pluginKey,view:e=>new Dr({view:e,...t})});r.hj.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[xr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}}),(0,Nr.aZ)({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=(0,Or.iH)(null);return(0,Nr.bv)((()=>{const{updateDelay:e,editor:r,pluginKey:i,shouldShow:o,tippyOptions:s}=t;r.registerPlugin(kr({updateDelay:e,editor:r,element:n.value,pluginKey:i,shouldShow:o,tippyOptions:s}))})),(0,Nr.Jd)((()=>{const{pluginKey:e,editor:n}=t;n.unregisterPlugin(e)})),()=>{var t;return(0,Nr.h)("div",{ref:n},null===(t=e.default)||void 0===t?void 0:t.call(e))}}});function Rr(t){return(0,Or.ZM)(((e,n)=>({get(){return e(),t},set(e){t=e,requestAnimationFrame((()=>{requestAnimationFrame((()=>{n()}))}))}})))}class Br extends r.ML{constructor(t={}){return super(t),this.vueRenderers=(0,Or.qj)(new Map),this.contentComponent=null,this.reactiveState=Rr(this.view.state),this.reactiveExtensionStorage=Rr(this.extensionStorage),this.on("transaction",(()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage})),(0,Or.Xl)(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){super.registerPlugin(t,e),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const Lr=(0,Nr.aZ)({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=(0,Or.iH)(),n=(0,Nr.FN)();return(0,Nr.m0)((()=>{const r=t.editor;r&&r.options.element&&e.value&&(0,Nr.Y3)((()=>{if(!e.value||!r.options.element.firstChild)return;const t=(0,Or.SU)(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:t}),r.createNodeViews()}))})),(0,Nr.Jd)((()=>{const e=t.editor;if(!e)return;if(e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild)return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})})),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach((e=>{const n=(0,Nr.h)(Nr.lR,{to:e.teleportElement,key:e.id},(0,Nr.h)(e.component,{ref:e.id,...e.props}));t.push(n)})),(0,Nr.h)("div",{ref:t=>{this.rootEl=t}},...t)}});(0,Nr.aZ)({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(t,{slots:e}){const n=(0,Or.iH)(null);return(0,Nr.bv)((()=>{const{pluginKey:e,editor:r,tippyOptions:i,shouldShow:o}=t;r.registerPlugin(xr({pluginKey:e,editor:r,element:n.value,tippyOptions:i,shouldShow:o}))})),(0,Nr.Jd)((()=>{const{pluginKey:e,editor:n}=t;n.unregisterPlugin(e)})),()=>{var t;return(0,Nr.h)("div",{ref:n},null===(t=e.default)||void 0===t?void 0:t.call(e))}}}),(0,Nr.aZ)({props:{as:{type:String,default:"div"}},render(){return(0,Nr.h)(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),(0,Nr.aZ)({props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var t,e;return(0,Nr.h)(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))}});Boolean},253:function(t,e,n){"use strict";n.d(e,{Ib:function(){return c},OR:function(){return l},iP:function(){return u},rP:function(){return p}});n(7658);var r=n(4870),i=n(3396),o="undefined"!==typeof window;var s,a;function c(t){let e;(0,i.bv)((()=>{t(),(0,i.Y3)((()=>{e=!0}))})),(0,i.dl)((()=>{e&&t()}))}function l(t,e,n={}){if(!o)return;const{target:s=window,passive:a=!1,capture:l=!1}=n;let u,h=!1;const d=n=>{if(h)return;const i=(0,r.SU)(n);i&&!u&&(i.addEventListener(t,e,{capture:l,passive:a}),u=!0)},f=n=>{if(h)return;const i=(0,r.SU)(n);i&&u&&(i.removeEventListener(t,e,l),u=!1)};let p;return(0,i.Ah)((()=>f(s))),(0,i.se)((()=>f(s))),c((()=>d(s))),(0,r.dq)(s)&&(p=(0,i.YP)(s,((t,e)=>{f(e),d(t)}))),()=>{null==p||p(),f(s),h=!0}}function u(){if(!s&&(s=(0,r.iH)(0),a=(0,r.iH)(0),o)){const t=()=>{s.value=window.innerWidth,a.value=window.innerHeight};t(),window.addEventListener("resize",t,{passive:!0}),window.addEventListener("orientationchange",t,{passive:!0})}return{width:s,height:a}}var h=/scroll|auto|overlay/i,d=o?window:void 0;function f(t){const e=1;return"HTML"!==t.tagName&&"BODY"!==t.tagName&&t.nodeType===e}function p(t,e=d){let n=t;while(n&&n!==e&&f(n)){const{overflowY:t}=window.getComputedStyle(n);if(h.test(t))return n;n=n.parentNode}return e}Symbol("van-field")},7214:function(t,e,n){"use strict";n.d(e,{JU:function(){return i},x0:function(){return o}});var r=n(7862);const i="undefined"!==typeof document?document:{},o=("undefined"!==typeof DOMParser&&new DOMParser,t=>r.UI(t,((t,e)=>`${e}:${t};`)).join(""));i.ELEMENT_NODE,i.TEXT_NODE,i.CDATA_SECTION_NODE,i.COMMENT_NODE,i.DOCUMENT_NODE,i.DOCUMENT_TYPE_NODE,i.DOCUMENT_FRAGMENT_NODE},6413:function(t,e,n){"use strict";n.d(e,{jU:function(){return d},UG:function(){return h},hH:function(){return v}});n(7658);var r=n(7862),i=n(654);const o=t=>void 0===t?null:t;class s{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let a=new s,c=!0;try{"undefined"!==typeof localStorage&&(a=localStorage,c=!1)}catch(E){}const l=a;var u=n(7409);const h="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),d="undefined"!==typeof window&&"undefined"!==typeof document&&!h;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let f;const p=[],g=()=>{if(void 0===f)if(h){f=r.Ue();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];"-"===r[0]?(null!==e&&f.set(e,""),e=r):null!==e?(f.set(e,r),e=null):p.push(r)}null!==e&&f.set(e,"")}else"object"===typeof location?(f=r.Ue(),(location.search||"?").slice(1).split("&").forEach((t=>{if(0!==t.length){const[e,n]=t.split("=");f.set(`--${i.NF(e,"-")}`,n),f.set(`-${i.NF(e,"-")}`,n)}}))):f=r.Ue();return f},m=t=>g().has(t),y=t=>o(h?{NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}[t.toUpperCase()]:l.getItem(t)),w=t=>m("--"+t)||null!==y(t),b=(w("production"),h&&u.gB({NODE_ENV:"production",BASE_URL:"/tiptap-yjs/"}.FORCE_COLOR,["true","1","2"])),v=!m("no-colors")&&(!h||process.stdout.isTTY||b)&&(!h||m("color")||b||null!==y("COLORTERM")||(y("TERM")||"").includes("color"))},6969:function(t,e,n){"use strict";n.d(e,{Nw:function(){return i},Ue:function(){return r},zR:function(){return o}});const r=t=>new Error(t),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},1634:function(t,e,n){"use strict";n.d(e,{Vs:function(){return o}});n(7658);const r=t=>class{constructor(t){this._=t}destroy(){t(this._)}},i=r(clearTimeout),o=(t,e)=>new i(setTimeout(e,t));r(clearInterval),r((t=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(t))),r((t=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(t)))},7409:function(t,e,n){"use strict";n.d(e,{PP:function(){return r},gB:function(){return i}});n(3767),n(8585),n(8696);const r=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&r(t,e,n+1)}},i=(t,e)=>e.includes(t)},7862:function(t,e,n){"use strict";n.d(e,{JG:function(){return i},UI:function(){return s},Ue:function(){return r},Yj:function(){return a},Yu:function(){return o}});n(7658);const r=()=>new Map,i=t=>{const e=r();return t.forEach(((t,n)=>{e.set(n,t)})),e},o=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},s=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},a=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},1383:function(t,e,n){"use strict";n.d(e,{Fp:function(){return s},GR:function(){return a},GW:function(){return r},VV:function(){return o},Wn:function(){return i}});const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),s=(t,e)=>t>e?t:e,a=(Number.isNaN,Math.pow,Math.sign,t=>0!==t?t<0:1/t<0)},1370:function(t,e,n){"use strict";n.d(e,{$m:function(){return a},XP:function(){return r}});n(7658);Object.assign;const r=Object.keys,i=t=>r(t).length,o=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},s=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a=(t,e)=>t===e||i(t)===i(e)&&o(t,((t,n)=>(void 0!==t||s(e,n))&&e[n]===t))},6157:function(t,e,n){"use strict";n.d(e,{kw:function(){return c},U7:function(){return a},k$:function(){return u}});n(3767),n(8585),n(8696);var r=n(1383);"undefined"===typeof window||"undefined"!==typeof window.performance&&window.performance;const i="undefined"===typeof crypto?null:crypto,o=null!==i?t=>{const e=new ArrayBuffer(t),n=new Uint8Array(e);return i.getRandomValues(n),e}:t=>{const e=new ArrayBuffer(t),n=new Uint8Array(e);for(let r=0;r<t;r++)n[r]=Math.ceil(4294967295*Math.random()>>>0);return e},s=Math.random,a=()=>new Uint32Array(o(4))[0],c=t=>t[r.GW(s()*t.length)],l=[1e7]+-1e3+-4e3+-8e3+-1e11,u=()=>l.replace(/[018]/g,(t=>(t^a()&15>>t/4).toString(16)))},893:function(t,e,n){"use strict";n.d(e,{Ue:function(){return r}});const r=()=>new Set},654:function(t,e,n){"use strict";n.d(e,{CO:function(){return f},IK:function(){return r},NF:function(){return c},YZ:function(){return u},lz:function(){return d}});n(3767),n(8585),n(8696);const r=String.fromCharCode,i=(String.fromCodePoint,t=>t.toLowerCase()),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,c=(t,e)=>s(t.replace(a,(t=>`${e}${i(t)}`))),l=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},u="undefined"!==typeof TextEncoder?new TextEncoder:null,h=t=>u.encode(t),d=u?h:l;let f="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});f&&1===f.decode(new Uint8Array).length&&(f=null)},4711:function(t,e,n){"use strict";n.d(e,{kU:function(){return p},Dp:function(){return f},ET:function(){return y}});n(3767),n(8585),n(8696);function r(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(255!==n[s])throw new TypeError(o+" is ambiguous");n[s]=i}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";var n=0,r=0,i=0,o=e.length;while(i!==o&&0===e[i])i++,n++;var s=(o-i)*u+1>>>0,l=new Uint8Array(s);while(i!==o){for(var h=e[i],d=0,f=s-1;(0!==h||d<r)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");r=d,i++}var p=s-r;while(p!==s&&0===l[p])p++;for(var g=c.repeat(n);p<s;++p)g+=t.charAt(l[p]);return g}function d(t){if("string"!==typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;var e=0;if(" "!==t[e]){var r=0,i=0;while(t[e]===c)r++,e++;var o=(t.length-e)*l+1>>>0,s=new Uint8Array(o);while(t[e]){var u=n[t.charCodeAt(e)];if(255===u)return;for(var h=0,d=o-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*s[d]>>>0,s[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,e++}if(" "!==t[e]){var f=o-i;while(f!==o&&0===s[f])f++;var p=new Uint8Array(r+(o-f)),g=r;while(f!==o)p[g++]=s[f++];return p}}}function f(t){var n=d(t);if(n)return n;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var i=r,o=i,s=o,a=n(3914);class c{constructor(t,e,n){this.name=t,this.prefix=e,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class l{constructor(t,e,n){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=n}decode(t){if("string"===typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return h(this,t)}}class u{constructor(t){this.decoders=t}or(t){return h(this,t)}decode(t){const e=t[0],n=this.decoders[e];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const h=(t,e)=>new u({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class d{constructor(t,e,n,r){this.name=t,this.prefix=e,this.baseEncode=n,this.baseDecode=r,this.encoder=new c(t,e,n),this.decoder=new l(t,e,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const f=({name:t,prefix:e,encode:n,decode:r})=>new d(t,e,n,r),p=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=s(n,e);return f({prefix:t,name:e,encode:r,decode:t=>(0,a.coerce)(i(t))})},g=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=t.length;while("="===t[o-1])--o;const s=new Uint8Array(o*n/8|0);let a=0,c=0,l=0;for(let u=0;u<o;++u){const e=i[t[u]];if(void 0===e)throw new SyntaxError(`Non-${r} character`);c=c<<n|e,a+=n,a>=8&&(a-=8,s[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},m=(t,e,n)=>{const r="="===e[e.length-1],i=(1<<n)-1;let o="",s=0,a=0;for(let c=0;c<t.length;++c){a=a<<8|t[c],s+=8;while(s>n)s-=n,o+=e[i&a>>s]}if(s&&(o+=e[i&a<<n-s]),r)while(o.length*n&7)o+="=";return o},y=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>f({prefix:e,name:t,encode(t){return m(t,r,n)},decode(e){return g(e,r,n,t)}})},2056:function(t,e,n){"use strict";n.r(e),n.d(e,{base32:function(){return i},base32hex:function(){return c},base32hexpad:function(){return u},base32hexpadupper:function(){return h},base32hexupper:function(){return l},base32pad:function(){return s},base32padupper:function(){return a},base32upper:function(){return o},base32z:function(){return d}});var r=n(4711);const i=(0,r.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=(0,r.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=(0,r.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,r.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,r.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l=(0,r.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u=(0,r.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,r.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,r.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},8334:function(t,e,n){"use strict";n.r(e),n.d(e,{base58btc:function(){return i},base58flickr:function(){return o}});var r=n(4711);const i=(0,r.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=(0,r.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},3914:function(t,e,n){"use strict";n.r(e),n.d(e,{coerce:function(){return a},empty:function(){return r},equals:function(){return s},fromHex:function(){return o},fromString:function(){return l},isBinary:function(){return c},toHex:function(){return i},toString:function(){return u}});n(3767),n(8585),n(8696);const r=new Uint8Array(0),i=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),o=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map((t=>parseInt(t,16)))):r},s=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},a=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},c=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),l=t=>(new TextEncoder).encode(t),u=t=>(new TextDecoder).decode(t)},9329:function(t,e,n){"use strict";n.d(e,{k:function(){return c}});n(3767),n(8585),n(8696);var r=n(550),i=n(5226),o=n(8334),s=n(2056),a=n(3914);class c{constructor(t,e,n,r){this.code=e,this.version=t,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:y,byteLength:y,code:m,version:m,multihash:m,bytes:m,_baseCache:y,asCID:y})}toV0(){switch(this.version){case 0:return this;default:{const{code:t,multihash:e}=this;if(t!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==f)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(e)}}}toV1(){switch(this.version){case 0:{const{code:t,digest:e}=this.multihash,n=i.Ue(t,e);return c.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&i.fS(this.multihash,t.multihash)}toString(t){const{bytes:e,version:n,_baseCache:r}=this;switch(n){case 0:return u(e,r,t||o.base58btc.encoder);default:return h(e,r,t||s.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return b(/^0\.0/,v),!(!t||!t[g]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof c)return t;if(null!=t&&t.asCID===t){const{version:e,code:n,multihash:r,bytes:i}=t;return new c(e,n,r,i||p(e,n,r.bytes))}if(null!=t&&!0===t[g]){const{version:e,multihash:n,code:r}=t,o=i.Jx(n);return c.create(e,r,o)}return null}static create(t,e,n){if("number"!==typeof e)throw new Error("String codecs are no longer supported");switch(t){case 0:if(e!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new c(t,e,n,n.bytes);case 1:{const r=p(t,e,n.bytes);return new c(t,e,n,r)}default:throw new Error("Invalid version")}}static createV0(t){return c.create(0,d,t)}static createV1(t,e){return c.create(1,t,e)}static decode(t){const[e,n]=c.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=c.inspectBytes(t),n=e.size-e.multihashSize,r=(0,a.coerce)(t.subarray(n,n+e.multihashSize));if(r.byteLength!==e.multihashSize)throw new Error("Incorrect length");const o=r.subarray(e.multihashSize-e.digestSize),s=new i.zZ(e.multihashCode,e.digestSize,o,r),l=0===e.version?c.createV0(s):c.createV1(e.codec,s);return[l,t.subarray(e.size)]}static inspectBytes(t){let e=0;const n=()=>{const[n,i]=r.Jx(t.subarray(e));return e+=i,n};let i=n(),o=d;if(18===i?(i=0,e=0):1===i&&(o=n()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const s=e,a=n(),c=n(),l=e+c,u=l-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:l}}static parse(t,e){const[n,r]=l(t,e),i=c.decode(r);return i._baseCache.set(n,t),i}}const l=(t,e)=>{switch(t[0]){case"Q":{const n=e||o.base58btc;return[o.base58btc.prefix,n.decode(`${o.base58btc.prefix}${t}`)]}case o.base58btc.prefix:{const n=e||o.base58btc;return[o.base58btc.prefix,n.decode(t)]}case s.base32.prefix:{const n=e||s.base32;return[s.base32.prefix,n.decode(t)]}default:if(null==e)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}},u=(t,e,n)=>{const{prefix:r}=n;if(r!==o.base58btc.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(null==i){const i=n.encode(t).slice(1);return e.set(r,i),i}return i},h=(t,e,n)=>{const{prefix:r}=n,i=e.get(r);if(null==i){const i=n.encode(t);return e.set(r,i),i}return i},d=112,f=18,p=(t,e,n)=>{const i=r.P$(t),o=i+r.P$(e),s=new Uint8Array(o+n.byteLength);return r.mL(t,s,0),r.mL(e,s,i),s.set(n,o),s},g=Symbol.for("@ipld/js-cid/CID"),m={writable:!1,configurable:!1,enumerable:!0},y={writable:!1,enumerable:!1,configurable:!1},w="0.0.0-dev",b=(t,e)=>{if(!t.test(w))throw new Error(e);console.warn(e)},v="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},6347:function(t,e,n){"use strict";n.r(e),n.d(e,{code:function(){return o},decode:function(){return a},encode:function(){return s},name:function(){return i}});var r=n(3914);const i="raw",o=85,s=t=>(0,r.coerce)(t),a=t=>(0,r.coerce)(t)},5226:function(t,e,n){"use strict";n.d(e,{Jx:function(){return s},Ue:function(){return o},fS:function(){return a},zZ:function(){return c}});n(3767),n(8585),n(8696);var r=n(3914),i=n(550);const o=(t,e)=>{const n=e.byteLength,r=i.P$(t),o=r+i.P$(n),s=new Uint8Array(o+n);return i.mL(t,s,0),i.mL(n,s,r),s.set(e,o),new c(t,n,e,s)},s=t=>{const e=(0,r.coerce)(t),[n,o]=i.Jx(e),[s,a]=i.Jx(e.subarray(o)),l=e.subarray(o+a);if(l.byteLength!==s)throw new Error("Incorrect length");return new c(n,s,l,e)},a=(t,e)=>t===e||t.code===e.code&&t.size===e.size&&(0,r.equals)(t.bytes,e.bytes);class c{constructor(t,e,n,r){this.code=t,this.size=e,this.digest=n,this.bytes=r}}},8212:function(t,e,n){"use strict";n.d(e,{D:function(){return i}});n(3767),n(8585),n(8696);var r=n(5226);const i=({name:t,code:e,encode:n})=>new o(t,e,n);class o{constructor(t,e,n){this.name=t,this.code=e,this.encode=n}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?r.Ue(this.code,e):e.then((t=>r.Ue(this.code,t)))}throw Error("Unknown type, must be binary type")}}},7041:function(t,e,n){"use strict";n.r(e),n.d(e,{identity:function(){return l}});var r=n(3914),i=n(5226);const o=0,s="identity",a=r.coerce,c=t=>i.Ue(o,a(t)),l={code:o,name:s,encode:a,digest:c}},1919:function(t,e,n){"use strict";n.r(e),n.d(e,{sha256:function(){return o},sha512:function(){return s}});n(3767),n(8585),n(8696);var r=n(8212);const i=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),o=(0,r.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),s=(0,r.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},2493:function(t,e,n){"use strict";n.d(e,{aI:function(){return i},k0:function(){return r.k}});var r=n(9329),i=(n(550),n(3914));n(8212),n(5226)},550:function(t,e,n){"use strict";n.d(e,{Jx:function(){return T},mL:function(){return I},P$:function(){return M}});var r=c,i=128,o=127,s=~o,a=Math.pow(2,31);function c(t,e,n){e=e||[],n=n||0;var r=n;while(t>=a)e[n++]=255&t|i,t/=128;while(t&s)e[n++]=255&t|i,t>>>=7;return e[n]=0|t,c.bytes=n-r+1,e}var l=d,u=128,h=127;function d(t,e){var n,r=0,i=(e=e||0,0),o=e,s=t.length;do{if(o>=s)throw d.bytes=0,new RangeError("Could not decode varint");n=t[o++],r+=i<28?(n&h)<<i:(n&h)*Math.pow(2,i),i+=7}while(n>=u);return d.bytes=o-e,r}var f=Math.pow(2,7),p=Math.pow(2,14),g=Math.pow(2,21),m=Math.pow(2,28),y=Math.pow(2,35),w=Math.pow(2,42),b=Math.pow(2,49),v=Math.pow(2,56),E=Math.pow(2,63),A=function(t){return t<f?1:t<p?2:t<g?3:t<m?4:t<y?5:t<w?6:t<b?7:t<v?8:t<E?9:10},C={encode:r,decode:l,encodingLength:A},S=C,_=S;const T=(t,e=0)=>{const n=_.decode(t,e);return[n,_.decode.bytes]},I=(t,e,n=0)=>(_.encode(t,e,n),e),M=t=>_.encodingLength(t)},203:function(t,e,n){"use strict";n.d(e,{$:function(){return w},h:function(){return y}});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),a="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),c=s||o&&+o[1]<57,l=0;l<10;l++)r[48+l]=r[96+l]=String(l);for(l=1;l<=24;l++)r[l+111]="F"+l;for(l=65;l<=90;l++)r[l]=String.fromCharCode(l+32),i[l]=String.fromCharCode(l);for(var u in r)i.hasOwnProperty(u)||(i[u]=r[u]);function h(t){var e=c&&(t.ctrlKey||t.altKey||t.metaKey)||a&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key,n=!e&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}var d=n(157);const f="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function p(t){let e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let t=o[a];if(/^(cmd|meta|m)$/i.test(t))i=!0;else if(/^a(lt)?$/i.test(t))e=!0;else if(/^(c|ctrl|control)$/i.test(t))n=!0;else if(/^s(hift)?$/i.test(t))r=!0;else{if(!/^mod$/i.test(t))throw new Error("Unrecognized modifier name: "+t);f?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function g(t){let e=Object.create(null);for(let n in t)e[p(n)]=t[n];return e}function m(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function y(t){return new d.Sy({props:{handleKeyDown:w(t)}})}function w(t){let e=g(t);return function(t,n){let i,o=h(n),s=e[m(o,n)];if(s&&s(t.state,t.dispatch,t))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=e[m(o,n,!1)];if(r&&r(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=o){let r=e[m(i,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}},1543:function(t,e,n){"use strict";n.d(e,{aw:function(){return rt},PW:function(){return bt},HY:function(){return a},vc:function(){return h},ZU:function(){return tt},NB:function(){return D},Ts:function(){return N},e4:function(){return d},V_:function(){return et},p2:function(){return f}});n(7658);function r(t){this.content=t}r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var i=r;function o(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let t=0;i.text[t]==s.text[t];t++)n++;return n}if(i.content.size||s.content.size){let t=o(i.content,s.content,n+1);if(null!=t)return t}n+=i.nodeSize}else n+=i.nodeSize}}function s(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let a=t.child(--i),c=e.child(--o),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){let t=0,e=Math.min(a.text.length,c.text.length);while(t<e&&a.text[a.text.length-t-1]==c.text[c.text.length-t-1])t++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){let t=s(a.content,c.content,n-1,r-1);if(t)return t}n-=l,r-=l}else n-=l,r-=l}}class a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,r=0,i){for(let o=0,s=0;s<e;o++){let a=this.content[o],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,t-i),Math.min(a.content.size,e-i),n,r+i)}s=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let i="",o=!0;return this.nodesBetween(t,e,((s,a)=>{s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf?(r?i+="function"===typeof r?r(s):r:s.type.spec.leafText&&(i+=s.type.spec.leafText(s)),o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new a(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let i=0,o=0;o<e;i++){let s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new a(n,r)}cutByIndex(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,i)}addToStart(t){return new a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return o(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return l(0,t);if(t==this.size)return l(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?l(n+1,o):l(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return a.empty;let e,n=0;for(let r=0;r<t.length;r++){let i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new a(e||t,n)}static from(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const c={index:0,offset:0};function l(t,e){return c.index=t,c.offset=e,c}function u(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!u(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class h{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&u(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);return n.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return h.none;if(t instanceof h)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}h.none=[];class d extends Error{}class f{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=g(this.content,t+this.openStart,e);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(t,e){return new f(p(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return f.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new f(t,n,r)}}function p(t,e,n){let{index:r,offset:i}=t.findIndex(e),o=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(i==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(p(o.content,e-i-1,n-i-1)))}function g(t,e,n,r){let{index:i,offset:o}=t.findIndex(e),s=t.maybeChild(i);if(o==e||s.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=g(s.content,e-o-1,n);return a&&t.replaceChild(i,s.copy(a))}function m(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return y(t,e,n,0)}function y(t,e,n,r){let i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let s=y(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:i,end:s}=_(n,t);return A(o,C(t,i,s,e,r))}{let r=t.parent,i=r.content;return A(r,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}}return A(o,S(t,e,r))}function w(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function b(t,e,n){let r=t.node(n);return w(r,e.node(n)),r}function v(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function E(t,e,n,r){let i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(v(t.nodeAfter,r),o++));for(let a=o;a<s;a++)v(i.child(a),r);e&&e.depth==n&&e.textOffset&&v(e.nodeBefore,r)}function A(t,e){return t.type.checkContent(e),t.copy(e)}function C(t,e,n,r,i){let o=t.depth>i&&b(t,e,i+1),s=r.depth>i&&b(n,r,i+1),c=[];return E(null,t,i,c),o&&s&&e.index(i)==n.index(i)?(w(o,s),v(A(o,C(t,e,n,r,i+1)),c)):(o&&v(A(o,S(t,e,i+1)),c),E(e,n,i,c),s&&v(A(s,S(n,r,i+1)),c)),E(r,null,i,c),new a(c)}function S(t,e,n){let r=[];if(E(null,t,n,r),t.depth>n){let i=b(t,e,n+1);v(A(i,S(t,e,n+1)),r)}return E(e,null,n,r),new a(r)}function _(t,e){let n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content);for(let o=n-1;o>=0;o--)i=e.node(o).copy(a.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}f.empty=new f(a.empty,0,0);class T{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let i=0;i<t;i++)r+=n.child(i).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return h.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new N(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,i=e;for(let o=t;;){let{index:t,offset:e}=o.content.findIndex(i),s=i-e;if(n.push(o,t,r+e),!s)break;if(o=o.child(t),o.isText)break;i=s-1,r+=e+1}return new T(e,n,i)}static resolveCached(t,e){for(let r=0;r<I.length;r++){let n=I[r];if(n.pos==e&&n.doc==t)return n}let n=I[M]=T.resolve(t,e);return M=(M+1)%k,n}}let I=[],M=0,k=12;class N{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const O=Object.create(null);class D{constructor(t,e,n,r=h.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&u(this.attrs,e||t.defaultAttrs||O)&&h.sameSet(this.marks,n||h.none)}copy(t=null){return t==this.content?this:new D(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new D(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return f.empty;let r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new f(c,r.depth-o,i.depth-o)}replace(t,e,n){return m(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return T.resolveCached(this,t)}resolveNoCache(t){return T.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),R(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=a.empty,r=0,i=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content);let t=h.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!h.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}D.prototype.text=void 0;class x extends D{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):R(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new x(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new x(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function R(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class B{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new L(t,e);if(null==n.next)return B.empty;let r=P(n);n.next&&n.err("Unexpected trailing text");let i=Y(W(r));return X(i,n),i}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];function i(o,s){let c=o.matchFragment(t,n);if(c&&(!e||c.validEnd))return a.from(s.map((t=>t.createAndFill())));for(let t=0;t<o.next.length;t++){let{type:e,next:n}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=i(n,s.concat(e));if(t)return t}}return null}return i(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){let r=n.shift(),i=r.match;if(i.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<i.next.length;t++){let{type:o,next:s}=i.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}return e(this),t.map(((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let i=0;i<e.next.length;i++)r+=(i?", ":"")+e.next[i].type.name+"->"+t.indexOf(e.next[i].next);return r})).join("\n")}}B.empty=new B(!0);class L{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function P(t){let e=[];do{e.push(F(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function F(t){let e=[];do{e.push(U(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function U(t){let e=V(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=H(t,e)}return e}function z(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function H(t,e){let n=z(t),r=n;return t.eat(",")&&(r="}"!=t.next?z(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function j(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let o in n){let t=n[o];t.groups.indexOf(e)>-1&&i.push(t)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function V(t){if(t.eat("(")){let e=P(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=j(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}function W(t){let e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((t=>t.to=e))}function o(t,e){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(o(n,e))),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(e,s),i(o(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return i(o(t.expr,e),s),i(o(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=n();i(o(t.expr,s),e),s=e}if(-1==t.max)i(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=n();r(s,e),i(o(t.expr,s),e),s=e}return[r(s)]}if("name"==t.type)return[r(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(t.exprs[r],e);if(r==t.exprs.length-1)return s;i(s,e=n())}}}function $(t,e){return e-t}function G(t,e){let n=[];return r(e),n.sort($);function r(e){let i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(let t=0;t<i.length;t++){let{term:e,to:o}=i[t];e||-1!=n.indexOf(o)||r(o)}}}function Y(t){let e=Object.create(null);return n(G(t,0));function n(r){let i=[];r.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);G(t,n).forEach((t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let o=e[r.join(",")]=new B(r.indexOf(t.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort($);o.next.push({type:i[t][0],next:e[r.join(",")]||n(r)})}return o}}function X(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],i=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function q(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function K(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(void 0===i){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=e.default}n[r]=i}return n}function J(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Q(t[n]);return e}class Z{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=J(n.attrs),this.defaultAttrs=q(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==B.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:K(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new D(this,this.computeAttrs(t),a.from(e),h.setFrom(n))}createChecked(t=null,e,n){return e=a.from(e),this.checkContent(e),new D(this,this.computeAttrs(t),e,h.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),e=a.from(e),e.size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),i=r&&r.fillBefore(a.empty,!0);return i?new D(this,t,e.append(i),h.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:h.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,r)=>n[t]=new Z(t,e,r)));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Q{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class tt{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=J(r.attrs),this.excluded=null;let i=q(this.attrs);this.instance=i?new h(this,i):null}create(t=null){return!t&&this.instance?this.instance:new h(this,K(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach(((t,i)=>n[t]=new tt(t,r++,e,i))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class et{constructor(t){this.cached=Object.create(null);let e=this.spec={};for(let r in t)e[r]=t[r];e.nodes=i.from(t.nodes),e.marks=i.from(t.marks||{}),this.nodes=Z.compile(this.spec.nodes,this),this.marks=tt.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let t=this.nodes[r],e=t.spec.content||"",i=t.spec.marks;t.contentMatch=n[e]||(n[e]=B.parse(e,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.markSet="_"==i?null:i?nt(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let r in this.marks){let t=this.marks[r],e=t.spec.excludes;t.excluded=null==e?[t]:""==e?[]:nt(this,e.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Z))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new x(n,n.defaultAttrs,t,h.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return D.fromJSON(this,t)}markFromJSON(t){return h.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function nt(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(let e in t.marks){let r=t.marks[e];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class rt{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((t=>{t.tag?this.tags.push(t):t.style&&this.styles.push(t)})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new dt(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new dt(this,e,!0);return n.addAll(t,e.from,e.to),f.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(pt(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(t)||r.context&&!n.matchesContext(r.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r],i=null==t.priority?50:t.priority;if(i<n)break}e.splice(r,0,t)}for(let r in t.marks){let e=t.marks[r].spec.parseDOM;e&&e.forEach((t=>{n(t=mt(t)),t.mark||t.ignore||t.clearMark||(t.mark=r)}))}for(let r in t.nodes){let e=t.nodes[r].spec.parseDOM;e&&e.forEach((t=>{n(t=mt(t)),t.node||t.ignore||t.mark||(t.node=r)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new rt(t,rt.schemaRules(t)))}}const it={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ot={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},st={ol:!0,ul:!0},at=1,ct=2,lt=4;function ut(t,e,n){return null!=e?(e?at:0)|("full"===e?ct:0):t&&"pre"==t.whitespace?at|ct:n&~lt}class ht{constructor(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=s,this.content=[],this.activeMarks=h.none,this.stashMarks=[],this.match=o||(s&lt?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&at)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let r=n[e];(this.type?this.type.allowsMarkType(r.type):yt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!it.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class dt{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,i=e.topNode,o=ut(null,e.preserveWhitespace,0)|(n?lt:0);r=i?new ht(i.type,i.attrs,h.none,h.none,!0,e.topMatch||i.type.contentMatch,o):new ht(n?null:t.schema.topNodeType,null,h.none,h.none,!0,null,o),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){let e=t.getAttribute("style");if(e){let n=this.readStyles(gt(e));if(!n)return;let[r,i]=n,o=this.top;for(let t=0;t<i.length;t++)this.removePendingMark(i[t],o);for(let t=0;t<r.length;t++)this.addPendingMark(r[t]);this.addElement(t);for(let t=0;t<r.length;t++)this.removePendingMark(r[t],o);for(let t=0;t<i.length;t++)this.addPendingMark(i[t])}else this.addElement(t)}}addTextNode(t){let e=t.nodeValue,n=this.top;if(n.options&ct||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&at)e=n.options&ct?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n,r=t.nodeName.toLowerCase();st.hasOwnProperty(r)&&this.parser.normalizeLists&&ft(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:ot.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let e,n=this.top,o=this.needsBlock;if(it.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),e=!0,n.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),e&&this.sync(n),this.needsBlock=o}else this.addElementByRule(t,i,!1===i.consuming?n:void 0)}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=h.none,n=h.none;t:for(let r=0;r<t.length;r+=2)for(let i;;){let o=this.parser.matchStyle(t[r],t[r+1],this,i);if(!o)continue t;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.forEach((t=>{o.clearMark(t)&&(n=t.addToSet(n))})):e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e),!1!==o.consuming)break;i=o}return[e,n]}addElementByRule(t,e,n){let r,i,o;if(e.node)i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace);else{let t=this.parser.schema.marks[e.mark];o=t.create(e.attrs),this.addPendingMark(o)}let s=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(t,e,n){let r=e||0;for(let i=e?t.childNodes[e]:t.firstChild,o=null==n?null:t.childNodes[n];i!=o;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}findPlace(t){let e,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(let r=0;r<e.length;r++)this.enterInner(e[r],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let r=0;r<t.marks.length;r++)e.type&&!e.type.allowsMarkType(t.marks[r].type)||(n=t.marks[r].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}enterInner(t,e=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);let o=ut(t,r,i.options);i.options&lt&&0==i.content.length&&(o|=lt),this.nodes.push(new ht(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){let t=e.compareDocumentPosition(this.find[r].node);t&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=i;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(t){let e=wt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let e=r.popFromStashMark(t);e&&r.type&&r.type.allowsMarkType(e.type)&&(r.activeMarks=e.addToSet(r.activeMarks))}if(r==e)break}}}function ft(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&st.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}function pt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function gt(t){let e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function mt(t){let e={};for(let n in t)e[n]=t[n];return e}function yt(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:i}=t.edge(n);if(r==e)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}function wt(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class bt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=Et(e).createDocumentFragment());let r=n,i=[];return t.forEach((t=>{if(i.length||t.marks.length){let n=0,o=0;while(n<i.length&&o<t.marks.length){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(i[n][0])||!1===e.type.spec.spanning)break;n++,o++}else o++}while(n<i.length)r=i.pop()[1];while(o<t.marks.length){let n=t.marks[o++],s=this.serializeMark(n,t.isInline,e);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=bt.renderSpec(Et(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&bt.renderSpec(Et(n),r(t,e))}static renderSpec(t,e,n=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,i=e[0],o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let s=n?t.createElementNS(n,i):t.createElement(i),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){c=2;for(let t in a)if(null!=a[t]){let e=t.indexOf(" ");e>0?s.setAttributeNS(t.slice(0,e),t.slice(e+1),a[t]):s.setAttribute(t,a[t])}}for(let l=c;l<e.length;l++){let i=e[l];if(0===i){if(l<e.length-1||l>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:e,contentDOM:o}=bt.renderSpec(t,i,n);if(s.appendChild(e),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:s,contentDOM:r}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new bt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=vt(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return vt(t.marks)}}function vt(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Et(t){return t.document||window.document}},157:function(t,e,n){"use strict";n.d(e,{Bs:function(){return u},C1:function(){return p},H$:function(){return O},Sy:function(){return M},Y1:function(){return s},qv:function(){return d},yy:function(){return T}});n(7658);var r=n(1543),i=n(1382);const o=Object.create(null);class s{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new a(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=r.p2.empty){let n=e.content.lastChild,i=null;for(let r=0;r<e.openEnd;r++)i=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:c,$to:l}=s[a],u=t.mapping.slice(o);t.replaceRange(u.map(c.pos),u.map(l.pos),a?r.p2.empty:e),0==a&&y(t,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=t.mapping.slice(n),c=a.map(o.pos),l=a.map(s.pos);i?t.deleteRange(c,l):(t.replaceRangeWith(c,l,e),y(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new u(t):m(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let i=t.depth-1;i>=0;i--){let r=e<0?m(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):m(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new p(t.node(0))}static atStart(t){return m(t,t,0,0,1)||new p(t)}static atEnd(t){return m(t,t,t.content.size,t.childCount,-1)||new p(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=o[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e}getBookmark(){return u.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class a{constructor(t,e){this.$from=t,this.$to=e}}let c=!1;function l(t){c||t.parent.inlineContent||(c=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class u extends s{constructor(t,e=t){l(t),l(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=t.resolve(e.map(this.anchor));return new u(r.parent.inlineContent?r:n,n)}replace(t,e=r.p2.empty){if(super.replace(t,e),e==r.p2.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof u&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new h(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new u(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=s.findFrom(e,n,!0)||s.findFrom(e,-n,!0);if(!t)return s.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r?t=e:(t=(s.findFrom(t,-n,!0)||s.findFrom(t,n,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new u(t,e)}}s.jsonID("text",u);class h{constructor(t,e){this.anchor=t,this.head=e}map(t){return new h(t.map(this.anchor),t.map(this.head))}resolve(t){return u.between(t.resolve(this.anchor),t.resolve(this.head))}}class d extends s{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),i=t.resolve(r);return n?s.near(i):new d(i)}content(){return new r.p2(r.HY.from(this.node),0,0)}eq(t){return t instanceof d&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new d(t.resolve(e.anchor))}static create(t,e){return new d(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}d.prototype.visible=!1,s.jsonID("node",d);class f{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new h(n,n):new f(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):s.near(e)}}class p extends s{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=r.p2.empty){if(e==r.p2.empty){t.delete(0,t.doc.content.size);let e=s.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new p(t)}map(t){return new p(t)}eq(t){return t instanceof p}getBookmark(){return g}}s.jsonID("all",p);const g={map(){return this},resolve(t){return new p(t)}};function m(t,e,n,r,i,o=!1){if(e.inlineContent)return u.create(t,n);for(let s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){let r=e.child(s);if(r.isAtom){if(!o&&d.isSelectable(r))return d.create(t,n-(i<0?r.nodeSize:0))}else{let e=m(t,r,n+i,i<0?r.childCount:0,i,o);if(e)return e}n+=r.nodeSize*i}return null}function y(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof i.Pu||o instanceof i.FC))return;let a,c=t.mapping.maps[r];c.forEach(((t,e,n,r)=>{null==a&&(a=r)})),t.setSelection(s.near(t.doc.resolve(a),n))}const w=1,b=2,v=4;class E extends i.wx{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|w)&~b,this.storedMarks=null,this}get selectionSet(){return(this.updated&w)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=b,this}ensureMarks(t){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&b)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~b,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let i=this.storedMarks;if(!i){let t=this.doc.resolve(e);i=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=v,this}get scrolledIntoView(){return(this.updated&v)>0}}function A(t,e){return e&&t?t.bind(e):t}class C{constructor(t,e,n){this.name=t,this.init=A(e.init,n),this.apply=A(e.apply,n)}}const S=[new C("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new C("selection",{init(t,e){return t.selection||s.atStart(e.doc)},apply(t){return t.selection}}),new C("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new C("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class _{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=S.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new C(t.key,t.spec.state,t))}))}}class T{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,c=r?r[o].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<o?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new T(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}return e}get tr(){return new E(this)}static create(t){let e=new _(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new T(e);for(let r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n}reconfigure(t){let e=new _(this.schema,t.plugins),n=e.fields,r=new T(e);for(let i=0;i<n.length;i++){let e=n[i].name;r[e]=this.hasOwnProperty(e)?this[e]:n[i].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new _(t.schema,t.plugins),o=new T(i);return i.fields.forEach((i=>{if("doc"==i.name)o.doc=r.NB.fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(o[i.name]=a.fromJSON.call(s,t,e[r],o))}o[i.name]=i.init(t,o)}})),o}}function I(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=I(i,e,{})),n[r]=i}return n}class M{constructor(t){this.spec=t,this.props={},t.props&&I(t.props,this,this.props),this.key=t.key?t.key.key:N("plugin")}getState(t){return t[this.key]}}const k=Object.create(null);function N(t){return t in k?t+"$"+ ++k[t]:(k[t]=0,t+"$")}class O{constructor(t="key"){this.key=N(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},1382:function(t,e,n){"use strict";n.d(e,{Ax:function(){return H},FC:function(){return _},GJ:function(){return $},Mn:function(){return V},Pu:function(){return S},dR:function(){return q},k9:function(){return O},nd:function(){return x},nj:function(){return X},vs:function(){return g},wx:function(){return dt}});n(7658),n(541);var r=n(1543);const i=65535,o=Math.pow(2,16);function s(t,e){return t+e*o}function a(t){return t&i}function c(t){return(t-(t&i))/o}const l=1,u=2,h=4,d=8;class f{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&d)>0}get deletedBefore(){return(this.delInfo&(l|h))>0}get deletedAfter(){return(this.delInfo&(u|h))>0}get deletedAcross(){return(this.delInfo&h)>0}}class p{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&p.empty)return p.empty}recover(t){let e=0,n=a(t);if(!this.inverted)for(let r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+c(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>t)break;let p=this.ranges[a+i],g=this.ranges[a+o],m=c+p;if(t<=m){let i=p?t==c?-1:t==m?1:e:e,o=c+r+(i<0?0:g);if(n)return o;let y=t==(e<0?c:m)?null:s(a/3,t-c),w=t==c?u:t==m?l:h;return(e<0?t!=c:t!=m)&&(w|=d),new f(o,w,y)}r+=g-p}return n?t+r:new f(t+r,0,null)}touches(t,e){let n=0,r=a(e),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let e=this.ranges[s]-(this.inverted?n:0);if(e>t)break;let a=this.ranges[s+i],c=e+a;if(t<=c&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),i+=l-c}}invert(){return new p(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?p.empty:new p(t<0?[0,-t,0]:[0,0,t])}}p.empty=new p([]);class g{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new g(this.maps,this.mirror,t,e)}copy(){return new g(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new g;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i],o=n.mapResult(t,e);if(null!=o.recover){let e=this.getMirror(i);if(null!=e&&e>i&&e<this.to){i=e,t=this.maps[e].recover(o.recover);continue}}r|=o.delInfo,t=o.pos}return n?t:new f(t,r,null)}}const m=Object.create(null);class y{getMap(){return p.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=m[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in m)throw new RangeError("Duplicate use of step JSON ID "+t);return m[t]=e,e.prototype.jsonID=t,e}}class w{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new w(t,null)}static fail(t){return new w(null,t)}static fromReplace(t,e,n,i){try{return w.ok(t.replace(e,n,i))}catch(o){if(o instanceof r.e4)return w.fail(o.message);throw o}}}function b(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(b(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return r.HY.fromArray(i)}class v extends y{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new r.p2(b(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return w.fromReplace(t,this.from,this.to,o)}invert(){return new E(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new v(e.pos,n.pos,this.mark)}merge(t){return t instanceof v&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new v(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new v(e.from,e.to,t.markFromJSON(e.mark))}}y.jsonID("addMark",v);class E extends y{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new r.p2(b(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return w.fromReplace(t,this.from,this.to,n)}invert(){return new v(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new E(e.pos,n.pos,this.mark)}merge(t){return t instanceof E&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new E(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new E(e.from,e.to,t.markFromJSON(e.mark))}}y.jsonID("removeMark",E);class A extends y{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return w.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return w.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new A(this.pos,e.marks[n]);return new A(this.pos,this.mark)}}return new C(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new A(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new A(e.pos,t.markFromJSON(e.mark))}}y.jsonID("addNodeMark",A);class C extends y{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return w.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return w.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new A(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new C(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new C(e.pos,t.markFromJSON(e.mark))}}y.jsonID("removeNodeMark",C);class S extends y{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&T(t,this.from,this.to)?w.fail("Structure replace would overwrite content"):w.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new p([this.from,this.to-this.from,this.slice.size])}invert(t){return new S(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new S(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof S)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new S(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new S(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new S(e.from,e.to,r.p2.fromJSON(t,e.slice),!!e.structure)}}y.jsonID("replace",S);class _ extends y{constructor(t,e,n,r,i,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(t){if(this.structure&&(T(t,this.from,this.gapFrom)||T(t,this.gapTo,this.to)))return w.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return w.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?w.fromReplace(t,this.from,this.to,n):w.fail("Content does not fit in gap")}getMap(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new _(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||i>n.pos?null:new _(e.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new _(e.from,e.to,e.gapFrom,e.gapTo,r.p2.fromJSON(t,e.slice),e.insert,!!e.structure)}}function T(t,e,n){let r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){let t=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!t||t.isLeaf)return!0;t=t.firstChild,i--}}return!1}function I(t,e,n,r){let i,o,s=[],a=[];t.doc.nodesBetween(e,n,((t,c,l)=>{if(!t.isInline)return;let u=t.marks;if(!r.isInSet(u)&&l.type.allowsMarkType(r.type)){let l=Math.max(c,e),h=Math.min(c+t.nodeSize,n),d=r.addToSet(u);for(let t=0;t<u.length;t++)u[t].isInSet(d)||(i&&i.to==l&&i.mark.eq(u[t])?i.to=h:s.push(i=new E(l,h,u[t])));o&&o.to==l?o.to=h:a.push(o=new v(l,h,r))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}function M(t,e,n,i){let o=[],s=0;t.doc.nodesBetween(e,n,((t,a)=>{if(!t.isInline)return;s++;let c=null;if(i instanceof r.ZU){let e,n=t.marks;while(e=i.isInSet(n))(c||(c=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(c=[i]):c=t.marks;if(c&&c.length){let r=Math.min(a+t.nodeSize,n);for(let t=0;t<c.length;t++){let n,i=c[t];for(let t=0;t<o.length;t++){let e=o[t];e.step==s-1&&i.eq(o[t].style)&&(n=e)}n?(n.to=r,n.step=s):o.push({style:i,from:Math.max(a,e),to:r,step:s})}}})),o.forEach((e=>t.step(new E(e.from,e.to,e.style))))}function k(t,e,n,i=n.contentMatch){let o=t.doc.nodeAt(e),s=[],a=e+1;for(let c=0;c<o.childCount;c++){let e=o.child(c),l=a+e.nodeSize,u=i.matchType(e.type);if(u){i=u;for(let r=0;r<e.marks.length;r++)n.allowsMarkType(e.marks[r].type)||t.step(new E(a,l,e.marks[r]))}else s.push(new S(a,l,r.p2.empty));a=l}if(!i.validEnd){let e=i.fillBefore(r.HY.empty,!0);t.replace(a,a,new r.p2(e,0,0))}for(let r=s.length-1;r>=0;r--)t.step(s[r])}function N(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function O(t){let e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let e=t.$from.node(r),i=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&e.canReplace(i,o,n))return r;if(0==r||e.type.spec.isolating||!N(e,i,o))break}return null}function D(t,e,n){let{$from:i,$to:o,depth:s}=e,a=i.before(s+1),c=o.after(s+1),l=a,u=c,h=r.HY.empty,d=0;for(let g=s,m=!1;g>n;g--)m||i.index(g)>0?(m=!0,h=r.HY.from(i.node(g).copy(h)),d++):l--;let f=r.HY.empty,p=0;for(let g=s,m=!1;g>n;g--)m||o.after(g+1)<o.end(g)?(m=!0,f=r.HY.from(o.node(g).copy(f)),p++):u++;t.step(new _(l,u,a,c,new r.p2(h.append(f),d,p),h.size-d,!0))}function x(t,e,n=null,r=t){let i=B(t,e),o=i&&L(r,e);return o?i.map(R).concat({type:e,attrs:n}).concat(o.map(R)):null}function R(t){return{type:t,attrs:null}}function B(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}function L(t,e){let{parent:n,startIndex:r,endIndex:i}=t,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=s.length?s[s.length-1]:e,c=a.contentMatch;for(let l=r;c&&l<i;l++)c=c.matchType(n.child(l).type);return c&&c.validEnd?s:null}function P(t,e,n){let i=r.HY.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let t=n[a].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.HY.from(n[a].type.create(n[a].attrs,i))}let o=e.start,s=e.end;t.step(new _(o,s,o,s,new r.p2(i,0,0),n.length,!0))}function F(t,e,n,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{if(e.isTextblock&&!e.hasMarkup(i,o)&&U(t.doc,t.mapping.slice(s).map(n),i)){t.clearIncompatible(t.mapping.slice(s).map(n,1),i);let a=t.mapping.slice(s),c=a.map(n,1),l=a.map(n+e.nodeSize,1);return t.step(new _(c,l,c+1,l-1,new r.p2(r.HY.from(i.create(o,null,e.marks)),0,0),1,!0)),!1}}))}function U(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function z(t,e,n,i,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let a=n.create(i,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,a);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new _(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new r.p2(r.HY.from(a),0,0),1,!0))}function H(t,e,n=1,r){let i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let l=i.depth-1,u=n-2;l>o;l--,u--){let t=i.node(l),e=i.index(l);if(t.type.spec.isolating)return!1;let n=t.content.cutByIndex(e,t.childCount),o=r&&r[u]||t;if(o!=t&&(n=n.replaceChild(0,o.type.create(o.attrs))),!t.canReplace(e+1,t.childCount)||!o.type.validContent(n))return!1}let a=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(a,a,c?c.type:i.node(o+1).type)}function j(t,e,n=1,i){let o=t.doc.resolve(e),s=r.HY.empty,a=r.HY.empty;for(let c=o.depth,l=o.depth-n,u=n-1;c>l;c--,u--){s=r.HY.from(o.node(c).copy(s));let t=i&&i[u];a=r.HY.from(t?t.type.create(t.attrs,a):o.node(c).copy(a))}t.step(new S(e,e,new r.p2(s.append(a),n,n),!0))}function V(t,e){let n=t.resolve(e),r=n.index();return W(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function W(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function $(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let t,o,s=r.index(i);if(i==r.depth?(t=r.nodeBefore,o=r.nodeAfter):n>0?(t=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(t=r.node(i).maybeChild(s-1),o=r.node(i+1)),t&&!t.isTextblock&&W(t,o)&&r.node(i).canReplace(s,s+1))return e;if(0==i)break;e=n<0?r.before(i):r.after(i)}}function G(t,e,n){let i=new S(e-n,e+n,r.p2.empty,!0);t.step(i)}function Y(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let t=r.index(i);if(r.node(i).canReplaceWith(t,t,n))return r.before(i+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let t=r.indexAfter(i);if(r.node(i).canReplaceWith(t,t,n))return r.after(i+1);if(t<r.node(i).childCount)return null}return null}function X(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let t=r.depth;t>=0;t--){let e=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,n=r.index(t)+(e>0?1:0),s=r.node(t),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let t=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=t&&s.canReplaceWith(n,n,t[0])}if(a)return 0==e?r.pos:e<0?r.before(t+1):r.after(t+1)}return null}function q(t,e,n=e,i=r.p2.empty){if(e==n&&!i.size)return null;let o=t.resolve(e),s=t.resolve(n);return K(o,s,i)?new S(e,n,i):new J(o,s,i).fit()}function K(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}y.jsonID("replaceAround",_);class J{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=r.HY.empty;for(let r=0;r<=t.depth;r++){let e=t.node(r);this.frontier.push({type:e.type,match:e.contentMatchAt(t.indexAfter(r))})}for(let i=t.depth;i>0;i--)this.placed=r.HY.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let o=this.placed,s=n.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;let c=new r.p2(o,s,a);return t>-1?new _(n.pos,t,this.$to.pos,this.$to.end(),c,e):c.size||n.pos!=this.$to.pos?new S(n.pos,i.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let i=e.firstChild;if(e.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){t=n;break}e=i.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=tt(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let o=t.firstChild;for(let s=this.depth;s>=0;s--){let t,{type:a,match:c}=this.frontier[s],l=null;if(1==e&&(o?c.matchType(o.type)||(l=c.fillBefore(r.HY.from(o),!1)):i&&a.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:s,parent:i,inject:l};if(2==e&&o&&(t=c.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:s,parent:i,wrap:t};if(i&&c.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=tt(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.p2(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=tt(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new r.p2(Z(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new r.p2(Z(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:o}){while(this.depth>e)this.closeFrontierNode();if(o)for(let r=0;r<o.length;r++)this.openFrontierNode(o[r]);let s=this.unplaced,a=n?n.content:s.content,c=s.openStart-t,l=0,u=[],{match:h,type:d}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)u.push(i.child(t));h=h.matchFragment(i)}let f=a.size+t-(s.content.size-s.openEnd);while(l<a.childCount){let t=a.child(l),e=h.matchType(t.type);if(!e)break;l++,(l>1||0==c||t.content.size)&&(h=e,u.push(et(t.mark(d.allowedMarks(t.marks)),1==l?c:0,l==a.childCount?f:-1)))}let p=l==a.childCount;p||(f=-1),this.placed=Q(this.placed,e,r.HY.from(u)),this.frontier[e].match=h,p&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,g=a;r<f;r++){let t=g.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),g=t.content}this.unplaced=p?0==t?r.p2.empty:new r.p2(Z(s.content,t-1,1),t-1,f<0?s.openEnd:t-1):new r.p2(Z(s.content,t,l),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!nt(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=nt(t,e,r,n,i);if(o){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],i=nt(t,n,r,e,!0);if(!i||i.childCount)continue t}return{depth:e,fit:o,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=Q(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Q(this.placed,this.depth,r.HY.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop(),e=t.match.fillBefore(r.HY.empty,!0);e.childCount&&(this.placed=Q(this.placed,this.frontier.length,e))}}function Z(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Z(t.firstChild.content,e-1,n)))}function Q(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Q(t.lastChild.content,e-1,n)))}function tt(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function et(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,et(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r.HY.empty,!0)))),t.copy(i)}function nt(t,e,n,r,i){let o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!rt(n,o.content,s)?a:null}function rt(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function it(t){return t.spec.defining||t.spec.definingForContent}function ot(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(K(o,s,i))return t.step(new S(e,n,i));let a=lt(o,t.doc.resolve(n));0==a[a.length-1]&&a.pop();let c=-(o.depth+1);a.unshift(c);for(let r=o.depth,f=o.pos-1;r>0;r--,f--){let t=o.node(r).type.spec;if(t.defining||t.definingAsContext||t.isolating)break;a.indexOf(r)>-1?c=r:o.before(r)==f&&a.splice(1,0,-r)}let l=a.indexOf(c),u=[],h=i.openStart;for(let r=i.content,f=0;;f++){let t=r.firstChild;if(u.push(t),f==i.openStart)break;r=t.content}for(let r=h-1;r>=0;r--){let t=u[r].type,e=it(t);if(e&&o.node(l).type!=t)h=r;else if(e||!t.isTextblock)break}for(let f=i.openStart;f>=0;f--){let e=(f+h+1)%(i.openStart+1),c=u[e];if(c)for(let u=0;u<a.length;u++){let h=a[(u+l)%a.length],d=!0;h<0&&(d=!1,h=-h);let f=o.node(h-1),p=o.index(h-1);if(f.canReplaceWith(p,p,c.type,c.marks))return t.replace(o.before(h),d?s.after(h):n,new r.p2(st(i.content,0,i.openStart,e),e,i.openEnd))}}let d=t.steps.length;for(let r=a.length-1;r>=0;r--){if(t.replace(e,n,i),t.steps.length>d)break;let c=a[r];c<0||(e=o.before(c),n=s.after(c))}}function st(t,e,n,i,o){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(st(r.content,e+1,n,i,r)))}if(e>i){let e=o.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r.HY.empty,!0))}return t}function at(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=Y(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new r.p2(r.HY.from(i),0,0))}function ct(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),o=lt(r,i);for(let s=0;s<o.length;s++){let e=o[s],n=s==o.length-1;if(n&&0==e||r.node(e).type.contentMatch.validEnd)return t.delete(r.start(e),i.end(e));if(e>0&&(n||r.node(e-1).canReplace(r.index(e-1),i.indexAfter(e-1))))return t.delete(r.before(e),i.after(e))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}function lt(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let r=t.start(i);if(r<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(r==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==r-1)&&n.push(i)}return n}class ut extends y{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return w.fail("No node at attribute step's position");let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return w.fromReplace(t,this.pos,this.pos+1,new r.p2(r.HY.from(i),0,e.isLeaf?0:1))}getMap(){return p.empty}invert(t){return new ut(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ut(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new ut(e.pos,e.attr,e.value)}}y.jsonID("attr",ut);let ht=class extends Error{};ht=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},ht.prototype=Object.create(Error.prototype),ht.prototype.constructor=ht,ht.prototype.name="TransformError";class dt{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new g}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new ht(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=r.p2.empty){let i=q(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new r.p2(r.HY.from(n),0,0))}delete(t,e){return this.replace(t,e,r.p2.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return ot(this,t,e,n),this}replaceRangeWith(t,e,n){return at(this,t,e,n),this}deleteRange(t,e){return ct(this,t,e),this}lift(t,e){return D(this,t,e),this}join(t,e=1){return G(this,t,e),this}wrap(t,e){return P(this,t,e),this}setBlockType(t,e=t,n,r=null){return F(this,t,e,n,r),this}setNodeMarkup(t,e,n=null,r){return z(this,t,e,n,r),this}setNodeAttribute(t,e,n){return this.step(new ut(t,e,n)),this}addNodeMark(t,e){return this.step(new A(t,e)),this}removeNodeMark(t,e){if(!(e instanceof r.vc)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(e=e.isInSet(n.marks),!e)return this}return this.step(new C(t,e)),this}split(t,e=1,n){return j(this,t,e,n),this}addMark(t,e,n){return I(this,t,e,n),this}removeMark(t,e,n){return M(this,t,e,n),this}clearIncompatible(t,e,n){return k(this,t,e,n),this}}},1460:function(t,e,n){"use strict";n.d(e,{EH:function(){return Tn},p:function(){return Cn},tk:function(){return nr}});n(7658);var r=n(157),i=n(1543),o=n(1382);const s=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},a=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let c=null;const l=function(t,e,n){let r=c||(c=document.createRange());return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},u=function(t,e,n,r){return n&&(d(t,e,n,r,-1)||d(t,e,n,r,1))},h=/^(img|br|input|textarea|hr)$/i;function d(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:f(t))){let n=t.parentNode;if(!n||1!=n.nodeType||g(t)||h.test(t.nodeName)||"false"==t.contentEditable)return!1;e=s(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(i<0?-1:0)],"false"==t.contentEditable)return!1;e=i<0?f(t):0}}}function f(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function p(t,e,n){for(let r=0==e,i=e==f(t);r||i;){if(t==n)return!0;let e=s(t);if(t=t.parentNode,!t)return!1;r=r&&0==e,i=i&&e==f(t)}}function g(t){let e;for(let n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const m=function(t){return t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function y(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function w(t){let e=t.activeElement;while(e&&e.shadowRoot)e=e.shadowRoot.activeElement;return e}const b="undefined"!=typeof navigator?navigator:null,v="undefined"!=typeof document?document:null,E=b&&b.userAgent||"",A=/Edge\/(\d+)/.exec(E),C=/MSIE \d/.exec(E),S=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(E),_=!!(C||S||A),T=C?document.documentMode:S?+S[1]:A?+A[1]:0,I=!_&&/gecko\/(\d+)/i.test(E);I&&(/Firefox\/(\d+)/.exec(E)||[0,0])[1];const M=!_&&/Chrome\/(\d+)/.exec(E),k=!!M,N=M?+M[1]:0,O=!_&&!!b&&/Apple Computer/.test(b.vendor),D=O&&(/Mobile\/\w+/.test(E)||!!b&&b.maxTouchPoints>2),x=D||!!b&&/Mac/.test(b.platform),R=/Android \d/.test(E),B=!!v&&"webkitFontSmoothing"in v.documentElement.style,L=B?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function P(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function F(t,e){return"number"==typeof t?t:t[e]}function U(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function z(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;;s=a(s)){if(!s)break;if(1!=s.nodeType)continue;let t=s,n=t==o.body,a=n?P(o):U(t),c=0,l=0;if(e.top<a.top+F(r,"top")?l=-(a.top-e.top+F(i,"top")):e.bottom>a.bottom-F(r,"bottom")&&(l=e.bottom-a.bottom+F(i,"bottom")),e.left<a.left+F(r,"left")?c=-(a.left-e.left+F(i,"left")):e.right>a.right-F(r,"right")&&(c=e.right-a.right+F(i,"right")),c||l)if(n)o.defaultView.scrollBy(c,l);else{let n=t.scrollLeft,r=t.scrollTop;l&&(t.scrollTop+=l),c&&(t.scrollLeft+=c);let i=t.scrollLeft-n,o=t.scrollTop-r;e={left:e.left-i,top:e.top-o,right:e.right-i,bottom:e.bottom-o}}if(n)break}}function H(t){let e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=t.root.elementFromPoint(o,s);if(!r||r==t.dom||!t.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){e=r,n=a.top;break}}return{refDOM:e,refTop:n,stack:j(t.dom)}}function j(t){let e=[],n=t.ownerDocument;for(let r=t;r;r=a(r))if(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t==n)break;return e}function V({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;W(n,0==r?0:r-e)}function W(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:o}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let $=null;function G(t){if(t.setActive)return t.setActive();if($)return t.focus($);let e=j(t);t.focus(null==$?{get preventScroll(){return $={preventScroll:!0},!0}}:void 0),$||($=!1,W(e,0))}function Y(t,e){let n,r,i=2e8,o=0,s=e.top,a=e.top;for(let c=t.firstChild,u=0;c;c=c.nextSibling,u++){let t;if(1==c.nodeType)t=c.getClientRects();else{if(3!=c.nodeType)continue;t=l(c).getClientRects()}for(let l=0;l<t.length;l++){let h=t[l];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);let t=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(t<i){n=c,i=t,r=t&&3==n.nodeType?{left:h.right<e.left?h.right:h.left,top:e.top}:e,1==c.nodeType&&t&&(o=u+(e.left>=(h.left+h.right)/2?1:0));continue}}!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=u+1)}}return n&&3==n.nodeType?X(n,r):!n||i&&1==n.nodeType?{node:t,offset:o}:Y(n,r)}function X(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let n=et(r,1);if(n.top!=n.bottom&&q(e,n))return{node:t,offset:i+(e.left>=(n.left+n.right)/2?1:0)}}return{node:t,offset:0}}function q(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function K(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function J(t,e,n){let{node:r,offset:i}=Y(e,n),o=-1;if(1==r.nodeType&&!r.firstChild){let t=r.getBoundingClientRect();o=t.left!=t.right&&n.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(r,i,o)}function Z(t,e,n,r){let i=-1;for(let o=e,s=!1;;){if(o==t.dom)break;let e=t.docView.nearestDesc(o,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent&&!s||!e.contentDOM)){let t=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&!s&&(s=!0,t.left>r.left||t.top>r.top?i=e.posBefore:(t.right<r.left||t.bottom<r.top)&&(i=e.posAfter)),!e.contentDOM&&i<0){let n=e.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2;return n?e.posBefore:e.posAfter}}o=e.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Q(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=t.childNodes[o];if(1==n.nodeType){let t=n.getClientRects();for(let r=0;r<t.length;r++){let i=t[r];if(q(e,i))return Q(n,e,i)}}if((o=(o+1)%r)==i)break}return t}function tt(t,e){let n,r=t.dom.ownerDocument,i=0;if(r.caretPositionFromPoint)try{let t=r.caretPositionFromPoint(e.left,e.top);t&&({offsetNode:n,offset:i}=t)}catch(l){}if(!n&&r.caretRangeFromPoint){let t=r.caretRangeFromPoint(e.left,e.top);t&&({startContainer:n,startOffset:i}=t)}let o,s=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top);if(!s||!t.dom.contains(1!=s.nodeType?s.parentNode:s)){let n=t.dom.getBoundingClientRect();if(!q(e,n))return null;if(s=Q(t.dom,e,n),!s)return null}if(O)for(let u=s;n&&u;u=a(u))u.draggable&&(n=void 0);if(s=K(s,e),n){if(I&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let t,r=n.childNodes[i];"IMG"==r.nodeName&&(t=r.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&i++}n==t.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?o=t.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(o=Z(t,n,i,e))}null==o&&(o=J(t,s,e));let c=t.docView.nearestDesc(s,!0);return{pos:o,inside:c?c.posAtStart-c.border:-1}}function et(t,e){let n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}const nt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rt(t,e,n){let{node:r,offset:i,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=B||I;if(3==r.nodeType){if(!s||!nt.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let t=i,e=i,o=n<0?1:-1;return n<0&&!i?(e++,o=-1):n>=0&&i==r.nodeValue.length?(t--,o=1):n<0?t--:e++,it(et(l(r,t,e),1),o<0)}{let t=et(l(r,i,i),n);if(I&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let e=et(l(r,i-1,i-1),-1);if(e.top==t.top){let n=et(l(r,i,i+1),-1);if(n.top!=t.top)return it(n,n.left<e.left)}}return t}}let a=t.state.doc.resolve(e-(o||0));if(!a.parent.inlineContent){if(null==o&&i&&(n<0||i==f(r))){let t=r.childNodes[i-1];if(1==t.nodeType)return ot(t.getBoundingClientRect(),!1)}if(null==o&&i<f(r)){let t=r.childNodes[i];if(1==t.nodeType)return ot(t.getBoundingClientRect(),!0)}return ot(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==f(r))){let t=r.childNodes[i-1],e=3==t.nodeType?l(t,f(t)-(s?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return it(et(e,1),!1)}if(null==o&&i<f(r)){let t=r.childNodes[i];while(t.pmViewDesc&&t.pmViewDesc.ignoreForCoords)t=t.nextSibling;let e=t?3==t.nodeType?l(t,0,s?0:1):1==t.nodeType?t:null:null;if(e)return it(et(e,-1),!0)}return it(et(3==r.nodeType?l(r):r,-n),n>=0)}function it(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ot(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function st(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function at(t,e,n){let r=e.selection,i="up"==n?r.$from:r.$to;return st(t,e,(()=>{let{node:e}=t.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.contentDOM||n.dom;break}e=n.dom.parentNode}let r=rt(t,i.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=l(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let i=e[t];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}const ct=/[\u0590-\u08ac]/;function lt(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=t.domSelection();return ct.test(r.parent.textContent)&&a.modify?st(t,e,(()=>{let{focusNode:e,focusOffset:i,anchorNode:o,anchorOffset:s}=t.domSelectionRange(),c=a.caretBidiLevel;a.modify("move",n,"character");let l=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:u,focusOffset:h}=t.domSelectionRange(),d=u&&!l.contains(1==u.nodeType?u:u.parentNode)||e==u&&i==h;try{a.collapse(o,s),e&&(e!=o||i!=s)&&a.extend&&a.extend(e,i)}catch(f){}return null!=c&&(a.caretBidiLevel=c),d})):"left"==n||"backward"==n?o:s}let ut=null,ht=null,dt=!1;function ft(t,e,n){return ut==e&&ht==n?dt:(ut=e,ht=n,dt="up"==n||"down"==n?at(t,e,n):lt(t,e,n))}const pt=0,gt=1,mt=2,yt=3;class wt{constructor(t,e,n,r){this.parent=t,this.children=e,this.dom=n,this.contentDOM=r,this.dirty=pt,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let r=this.children[e];if(r==t)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let n,r;if(t==this.contentDOM)n=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.previousSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(t==this.contentDOM)n=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;n=t.nextSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(t==this.dom&&this.contentDOM)r=e>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!1;break}if(e.previousSibling)break}if(null==r&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){r=!0;break}if(e.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,r=t;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==t.nodeType?t:t.parentNode):i==t))return o;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let n=e;n;n=n.parent)if(n==this)return e}posFromDOM(t,e,n){for(let r=t;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let r=this.children[e],i=n+r.size;if(n==t&&i!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let e=this.children[n],o=i+e.size;if(o>t||e instanceof _t){r=t-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,e);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof bt&&i.side>=0;n--);if(e<=0){let t,r=!0;for(;;n--,r=!1)if(t=n?this.children[n-1]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&e&&r&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?s(t.dom)+1:0}}{let t,r=!0;for(;;n++,r=!1)if(t=n<this.children.length?this.children[n]:null,!t||t.dom.parentNode==this.contentDOM)break;return t&&r&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?s(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,a=0;;a++){let n=this.children[a],c=o+n.size;if(-1==r&&t<=c){let i=o+n.border;if(t>=i&&e<=c-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(t,e,i);t=o;for(let e=a;e>0;e--){let n=this.children[e-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=s(n.dom)+1;break}t-=n.size}-1==r&&(r=0)}if(r>-1&&(c>e||a==this.children.length-1)){e=c;for(let t=a+1;t<this.children.length;t++){let n=this.children[t];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=s(n.dom);break}e+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,r=!1){let i=Math.min(t,e),o=Math.max(t,e);for(let s=0,u=0;s<this.children.length;s++){let a=this.children[s],c=u+a.size;if(i>u&&o<c)return a.setSelection(t-u-a.border,e-u-a.border,n,r);u=c}let a=this.domFromPos(t,t?-1:1),c=e==t?a:this.domFromPos(e,e?-1:1),l=n.getSelection(),h=!1;if((I||O)&&t==e){let{node:t,offset:e}=a;if(3==t.nodeType){if(h=!(!e||"\n"!=t.nodeValue[e-1]),h&&e==t.nodeValue.length)for(let n,r=t;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=c={node:n.parentNode,offset:s(n)+1});break}let t=r.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let n=t.childNodes[e-1];h=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(I&&l.focusNode&&l.focusNode!=c.node&&1==l.focusNode.nodeType){let t=l.focusNode.childNodes[l.focusOffset];t&&"false"==t.contentEditable&&(r=!0)}if(!(r||h&&O)&&u(a.node,a.offset,l.anchorNode,l.anchorOffset)&&u(c.node,c.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||t==e)&&!h){l.collapse(a.node,a.offset);try{t!=e&&l.extend(c.node,c.offset),d=!0}catch(f){}}if(!d){if(t>e){let t=a;a=c,c=t}let n=document.createRange();n.setEnd(c.node,c.offset),n.setStart(a.node,a.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){let r=n+i.border,s=o-i.border;if(t>=r&&e<=s)return this.dirty=t==n||e==o?mt:gt,void(t!=r||e!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-r,e-r):i.dirty=yt);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?yt:mt}n=o}this.dirty=mt}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?mt:gt;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class bt extends wt{constructor(t,e,n,r){let i,o=e.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!e.type.spec.raw){if(1!=o.nodeType){let t=document.createElement("span");t.appendChild(o),o=t}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,i=this}matchesWidget(t){return this.dirty==pt&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class vt extends wt{constructor(t,e,n,r){super(t,[],e,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class Et extends wt{constructor(t,e,n,r){super(t,[],n,r),this.mark=e}static create(t,e,n,r){let o=r.nodeViews[e.type.name],s=o&&o(e,r,n);return s&&s.dom||(s=i.PW.renderSpec(document,e.type.spec.toDOM(e,n))),new Et(t,e,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&yt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(t){return this.dirty!=yt&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=pt){let t=this.parent;while(!t.node)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=pt}}slice(t,e,n){let r=Et.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;e<o&&(i=Vt(i,e,o,n)),t>0&&(i=Vt(i,0,t,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}}class At extends wt{constructor(t,e,n,r,i,o,s,a,c){super(t,[],i,o),this.node=e,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s,o&&this.updateChildren(a,c)}static create(t,e,n,r,o,s){let a,c=o.nodeViews[e.type.name],l=c&&c(e,o,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:s),n,r),u=l&&l.dom,h=l&&l.contentDOM;if(e.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(e.text);else u||({dom:u,contentDOM:h}=i.PW.renderSpec(document,e.type.spec.toDOM(e)));h||e.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),e.type.spec.draggable&&(u.draggable=!0));let d=u;return u=xt(u,n,e),l?a=new Tt(t,e,n,r,u,h||null,d,l,o,s+1):e.isText?new St(t,e,n,r,u,d,o):new At(t,e,n,r,u,h||null,d,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>i.HY.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return this.dirty==pt&&t.eq(this.node)&&Rt(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,r=e,o=t.composing?this.localCompositionInfo(t,e):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,c=new Lt(this,s&&s.node,t);Ut(this.node,this.innerDeco,((e,o,s)=>{e.spec.marks?c.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!s&&c.syncToMarks(o==this.node.childCount?i.vc.none:this.node.child(o).marks,n,t),c.placeWidget(e,t,r)}),((e,i,s,l)=>{let u;c.syncToMarks(e.marks,n,t),c.findNodeMatch(e,i,s,l)||a&&t.state.selection.from>r&&t.state.selection.to<r+e.nodeSize&&(u=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(e,i,s,u,t)||c.updateNextNode(e,i,s,t,l)||c.addNode(e,i,s,t,r),r+=e.nodeSize})),c.syncToMarks([],n,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==mt)&&(s&&this.protectLocalComposition(t,s),It(this.contentDOM,this.children,t),D&&zt(this.dom))}localCompositionInfo(t,e){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof r.Bs)||n<e||i>e+this.node.content.size)return null;let o=t.domSelectionRange(),s=Ht(o.focusNode,o.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let t=s.nodeValue,r=jt(this.node.content,t,n-e,i-e);return r<0?null:{node:s,pos:r,text:t}}return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:r}){if(this.getDesc(e))return;let i=e;for(;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new vt(this,i,e,r);t.input.compositionNodes.push(o),this.children=Vt(this.children,n,n+r.length,t,o)}update(t,e,n,r){return!(this.dirty==yt||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)}updateInner(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=pt}updateOuterDeco(t){if(Rt(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Ot(this.dom,this.nodeDOM,Nt(this.outerDeco,this.node,e),Nt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Ct(t,e,n,r,i){return xt(r,e,t),new At(void 0,t,e,n,r,r,r,i,0)}class St extends At{constructor(t,e,n,r,i,o,s){super(t,e,n,r,i,null,o,s,0)}parseRule(){let t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}}update(t,e,n,r){return!(this.dirty==yt||this.dirty!=pt&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==pt&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=pt,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let r=this.node.cut(t,e),i=document.createTextNode(r.text);return new St(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=yt)}get domAtom(){return!1}}class _t extends wt{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==pt&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Tt extends At{constructor(t,e,n,r,i,o,s,a,c,l){super(t,e,n,r,i,o,s,c,l),this.spec=a}update(t,e,n,r){if(this.dirty==yt)return!1;if(this.spec.update){let i=this.spec.update(t,e,n);return i&&this.updateInner(t,e,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,r){this.spec.setSelection?this.spec.setSelection(t,e,n):super.setSelection(t,e,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function It(t,e,n){let r=t.firstChild,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){while(a!=r)r=Bt(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof Et){let e=r?r.previousSibling:t.lastChild;It(s.contentDOM,s.children,n),r=e?e.nextSibling:t.firstChild}}while(r)r=Bt(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Mt=function(t){t&&(this.nodeName=t)};Mt.prototype=Object.create(null);const kt=[new Mt];function Nt(t,e,n){if(0==t.length)return kt;let r=n?kt[0]:new Mt,i=[r];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&i.push(r=new Mt(s.nodeName));for(let t in s){let o=s[t];null!=o&&(n&&1==i.length&&i.push(r=new Mt(e.isInline?"span":"div")),"class"==t?r.class=(r.class?r.class+" ":"")+o:"style"==t?r.style=(r.style?r.style+";":"")+o:"nodeName"!=t&&(r[t]=o))}}}return i}function Ot(t,e,n,r){if(n==kt&&r==kt)return e;let i=e;for(let o=0;o<r.length;o++){let e=r[o],s=n[o];if(o){let n;s&&s.nodeName==e.nodeName&&i!=t&&(n=i.parentNode)&&n.nodeName.toLowerCase()==e.nodeName||(n=document.createElement(e.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=kt[0]),i=n}Dt(i,s||kt[0],e)}return i}function Dt(t,e,n){for(let r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let e=0;e<r.length;e++)-1==i.indexOf(r[e])&&t.classList.remove(r[e]);for(let e=0;e<i.length;e++)-1==r.indexOf(i[e])&&t.classList.add(i[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(n=r.exec(e.style))t.style.removeProperty(n[1])}n.style&&(t.style.cssText+=n.style)}}function xt(t,e,n){return Ot(t,t,kt,Nt(e,n,1!=t.nodeType))}function Rt(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Bt(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Lt{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Pt(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let r=0,i=this.stack.length>>1,o=Math.min(i,t.length);while(r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<i)this.destroyRest(),this.top.dirty=pt,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;while(i<t.length){this.stack.push(this.top,this.index+1);let r=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let n=this.top.children[e];if(n.matchesMark(t[i])&&!this.isLocked(n.dom)){r=e;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Et.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(t,e,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(t,e,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,n,r,i){let o=this.top.children[r];return o.dirty==yt&&o.dom==o.contentDOM&&(o.dirty=mt),!!o.update(t,e,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,n,r,i){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof At){let a=this.preMatch.matched.get(s);if(null!=a&&a!=i)return!1;let c=s.dom,l=this.isLocked(c)&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=yt&&Rt(e,s.outerDeco));if(!l&&s.update(t,e,n,r))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(t,e,n,r,i){this.top.children.splice(this.index++,0,At.create(this.top,t,e,n,r,i)),this.changed=!0}placeWidget(t,e,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){let r=new bt(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;while(t instanceof Et)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof St)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((O||k)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let r=new _t(this.top,[],n,null);e!=this.top?e.children.push(r):e.children.splice(this.index++,0,r),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function Pt(t,e){let n=e,r=n.children.length,i=t.childCount,o=new Map,s=[];t:while(i>0){let a;for(;;)if(r){let t=n.children[r-1];if(!(t instanceof Et)){a=t,r--;break}n=t,r=t.children.length}else{if(n==e)break t;r=n.parent.children.indexOf(n),n=n.parent}let c=a.node;if(c){if(c!=t.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}function Ft(t,e){return t.type.side-e.type.side}function Ut(t,e,n,r){let i=e.locals(t),o=0;if(0==i.length){for(let n=0;n<t.childCount;n++){let s=t.child(n);r(s,i,e.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],c=null;for(let l=0;;){if(s<i.length&&i[s].to==o){let t,e=i[s++];while(s<i.length&&i[s].to==o)(t||(t=[e])).push(i[s++]);if(t){t.sort(Ft);for(let e=0;e<t.length;e++)n(t[e],l,!!c)}else n(e,l,!!c)}let u,h;if(c)h=-1,u=c,c=null;else{if(!(l<t.childCount))break;h=l,u=t.child(l++)}for(let t=0;t<a.length;t++)a[t].to<=o&&a.splice(t--,1);while(s<i.length&&i[s].from<=o&&i[s].to>o)a.push(i[s++]);let d=o+u.nodeSize;if(u.isText){let t=d;s<i.length&&i[s].from<t&&(t=i[s].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<d&&(c=u.cut(t-o),u=u.cut(0,t-o),d=t,h=-1)}let f=u.isInline&&!u.isLeaf?a.filter((t=>!t.inline)):a.slice();r(u,f,e.forChild(o,u),h),o=d}}function zt(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Ht(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=f(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function jt(t,e,n,r){for(let i=0,o=0;i<t.childCount&&o<=r;){let s=t.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let c=s.text;while(i<t.childCount){let e=t.child(i++);if(o+=e.nodeSize,!e.isText)break;c+=e.text}if(o>=n){let t=a<r?c.lastIndexOf(e,r-a-1):-1;if(t>=0&&t+e.length+a>=n)return a+t;if(n==r&&c.length>=r+e.length-a&&c.slice(r-a,r-a+e.length)==e)return r}}return-1}function Vt(t,e,n,r,i){let o=[];for(let s=0,a=0;s<t.length;s++){let c=t[s],l=a,u=a+=c.size;l>=n||u<=e?o.push(c):(l<e&&o.push(c.slice(0,e-l,r)),i&&(o.push(i),i=void 0),u>n&&o.push(c.slice(n-l,c.size,r)))}return o}function Wt(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let c,l,u=i.resolve(a);if(m(n)){c=u;while(o&&!o.node)o=o.parent;let t=o.node;if(o&&t.isAtom&&r.qv.isSelectable(t)&&o.parent&&(!t.isInline||!p(n.focusNode,n.focusOffset,o.dom))){let t=o.posBefore;l=new r.qv(a==t?u:i.resolve(t))}}else{let e=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(e<0)return null;c=i.resolve(e)}if(!l){let n="pointer"==e||t.state.selection.head<u.pos&&!s?1:-1;l=ee(t,c,u,n)}return l}function $t(t){return t.editable?t.hasFocus():re(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Gt(t,e=!1){let n=t.state.selection;if(Qt(t,n),$t(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&k){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&u(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Zt(t);else{let i,o,{anchor:s,head:a}=n;!Yt||n instanceof r.Bs||(n.$from.parent.inlineContent||(i=Xt(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=Xt(t,n.to))),t.docView.setSelection(s,a,t.root,e),Yt&&(i&&Kt(i),o&&Kt(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Jt(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Yt=O||k&&N<63;function Xt(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(O&&i&&"false"==i.contentEditable)return qt(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return qt(i);if(o)return qt(o)}}function qt(t){return t.contentEditable="true",O&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Kt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Jt(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{$t(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}function Zt(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,s(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&_&&T<=11&&(r.disabled=!0,r.disabled=!1)}function Qt(t,e){if(e instanceof r.qv){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(te(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else te(t)}function te(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function ee(t,e,n,i){return t.someProp("createSelectionBetween",(r=>r(t,e,n)))||r.Bs.between(e,n,i)}function ne(t){return!(t.editable&&!t.hasFocus())&&re(t)}function re(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function ie(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return u(e.node,e.offset,n.anchorNode,n.anchorOffset)}function oe(t,e){let{$anchor:n,$head:i}=t.selection,o=e>0?n.max(i):n.min(i),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&r.Y1.findFrom(s,e)}function se(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function ae(t,e,n){let i=t.state.selection;if(!(i instanceof r.Bs)){if(i instanceof r.qv&&i.node.isInline)return se(t,new r.Bs(e>0?i.$to:i.$from));{let n=oe(t.state,e);return!!n&&se(t,n)}}if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){let n=oe(t.state,e);return!!(n&&n instanceof r.qv)&&se(t,n)}if(!(x&&n.indexOf("m")>-1)){let n,o=i.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return!!(s.isAtom||(n=t.docView.descAt(a))&&!n.contentDOM)&&(r.qv.isSelectable(s)?se(t,new r.qv(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):!!B&&se(t,new r.Bs(t.state.doc.resolve(e<0?a:a+s.nodeSize))))}}function ce(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function le(t){let e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function ue(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=!1;for(I&&1==n.nodeType&&r<ce(n)&&le(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;{let t=n.childNodes[r-1];if(le(t))i=n,o=--r;else{if(3!=t.nodeType)break;n=t,r=n.nodeValue.length}}}else{if(de(n))break;{let e=n.previousSibling;while(e&&le(e))i=n.parentNode,o=s(e),e=e.previousSibling;if(e)n=e,r=ce(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?fe(t,n,r):i&&fe(t,i,o)}function he(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,o,a=ce(n);for(;;)if(r<a){if(1!=n.nodeType)break;let t=n.childNodes[r];if(!le(t))break;i=n,o=++r}else{if(de(n))break;{let e=n.nextSibling;while(e&&le(e))i=e.parentNode,o=s(e)+1,e=e.nextSibling;if(e)n=e,r=0,a=ce(n);else{if(n=n.parentNode,n==t.dom)break;r=a=0}}}i&&fe(t,i,o)}function de(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function fe(t,e,n){let r=t.domSelection();if(m(r)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),r.removeAllRanges(),r.addRange(t)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout((()=>{t.state==i&&Gt(t)}),50)}function pe(t,e,n){let i=t.state.selection;if(i instanceof r.Bs&&!i.empty||n.indexOf("s")>-1)return!1;if(x&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=i;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=oe(t.state,e);if(n&&n instanceof r.qv)return se(t,n)}if(!o.parent.inlineContent){let n=e<0?o:s,a=i instanceof r.C1?r.Y1.near(n,e):r.Y1.findFrom(n,e);return!!a&&se(t,a)}return!1}function ge(t,e){if(!(t.state.selection instanceof r.Bs))return!0;let{$head:n,$anchor:i,empty:o}=t.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=t.state.tr;return e<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),t.dispatch(r),!0}return!1}function me(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ye(t){if(!O||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;me(t,n,"true"),setTimeout((()=>me(t,n,"false")),20)}return!1}function we(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function be(t,e){let n=e.keyCode,r=we(e);return 8==n||x&&72==n&&"c"==r?ge(t,-1)||ue(t):46==n||x&&68==n&&"c"==r?ge(t,1)||he(t):13==n||27==n||(37==n||x&&66==n&&"c"==r?ae(t,-1,r)||ue(t):39==n||x&&70==n&&"c"==r?ae(t,1,r)||he(t):38==n||x&&80==n&&"c"==r?pe(t,-1,r)||ue(t):40==n||x&&78==n&&"c"==r?ye(t)||pe(t,1,r)||he(t):r==(x?"m":"c")&&(66==n||73==n||89==n||90==n))}function ve(t,e){t.someProp("transformCopied",(n=>{e=n(e,t)}));let n=[],{content:r,openStart:o,openEnd:s}=e;while(o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){o--,s--;let t=r.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),r=t.content}let a=t.someProp("clipboardSerializer")||i.PW.fromSchema(t.state.schema),c=Oe(),l=c.createElement("div");l.appendChild(a.serializeFragment(r,{document:c}));let u,h=l.firstChild,d=0;while(h&&1==h.nodeType&&(u=ke[h.nodeName.toLowerCase()])){for(let t=u.length-1;t>=0;t--){let e=c.createElement(u[t]);while(l.firstChild)e.appendChild(l.firstChild);l.appendChild(e),d++}h=l.firstChild}h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${o} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",(n=>n(e,t)))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:l,text:f}}function Ee(t,e,n,r,o){let s,a,c=o.parent.type.spec.code;if(!n&&!e)return null;let l=e&&(r||c||!n);if(l){if(t.someProp("transformPastedText",(n=>{e=n(e,c||r,t)})),c)return e?new i.p2(i.HY.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):i.p2.empty;let n=t.someProp("clipboardTextParser",(n=>n(e,o,r,t)));if(n)a=n;else{let n=o.marks(),{schema:r}=t.state,a=i.PW.fromSchema(r);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=s.appendChild(document.createElement("p"));t&&e.appendChild(a.serializeNode(r.text(t,n)))}))}}else t.someProp("transformPastedHTML",(e=>{n=e(n,t)})),s=De(n),B&&xe(s);let u=s&&s.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let i=+h[3];i>0;i--){let t=s.firstChild;while(t&&1!=t.nodeType)t=t.nextSibling;if(!t)break;s=t}if(!a){let e=t.someProp("clipboardParser")||t.someProp("domParser")||i.aw.fromSchema(t.state.schema);a=e.parseSlice(s,{preserveWhitespace:!(!l&&!h),context:o,ruleFromNode(t){return"BR"!=t.nodeName||t.nextSibling||!t.parentNode||Ae.test(t.parentNode.nodeName)?null:{ignore:!0}}})}if(h)a=Re(Me(a,+h[1],+h[2]),h[4]);else if(a=i.p2.maxOpen(Ce(a.content,o),!0),a.openStart||a.openEnd){let t=0,e=0;for(let n=a.content.firstChild;t<a.openStart&&!n.type.spec.isolating;t++,n=n.firstChild);for(let n=a.content.lastChild;e<a.openEnd&&!n.type.spec.isolating;e++,n=n.lastChild);a=Me(a,t,e)}return t.someProp("transformPasted",(e=>{a=e(a,t)})),a}const Ae=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ce(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r,o=e.node(n),s=o.contentMatchAt(e.index(n)),a=[];if(t.forEach((t=>{if(!a)return;let e,n=s.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&r.length&&_e(n,r,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=Te(a[a.length-1],r.length));let e=Se(t,n);a.push(e),s=s.matchType(e.type),r=n}})),a)return i.HY.from(a)}return t}function Se(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,i.HY.from(t));return t}function _e(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=_e(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));let a=r.contentMatchAt(r.childCount);if(a.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(i.HY.from(Se(n,t,o+1))))}}function Te(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Te(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(i.HY.empty,!0);return t.copy(n.append(r))}function Ie(t,e,n,r,o,s){let a=e<0?t.firstChild:t.lastChild,c=a.content;return o<r-1&&(c=Ie(c,e,n,r,o+1,s)),o>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i.HY.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}function Me(t,e,n){return e<t.openStart&&(t=new i.p2(Ie(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new i.p2(Ie(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const ke={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Ne=null;function Oe(){return Ne||(Ne=document.implementation.createHTMLDocument("title"))}function De(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,r=Oe().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);if((n=i&&ke[i[1].toLowerCase()])&&(t=n.map((t=>"<"+t+">")).join("")+t+n.map((t=>"</"+t+">")).reverse().join("")),r.innerHTML=t,n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}function xe(t){let e=t.querySelectorAll(k?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];1==r.childNodes.length&&" "==r.textContent&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Re(t,e){if(!t.size)return t;let n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(c){return t}let{content:o,openStart:s,openEnd:a}=t;for(let l=n.length-2;l>=0;l-=2){let t=r.nodes[n[l]];if(!t||t.hasRequiredAttrs())break;o=i.HY.from(t.create(n[l+1],o)),s++,a++}return new i.p2(o,s,a)}const Be={},Le={},Pe={touchstart:!0,touchmove:!0};class Fe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Ue(t){for(let e in Be){let n=Be[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!We(t,e)||Ve(t,e)||!t.editable&&e.type in Le||n(t,e)},Pe[e]?{passive:!0}:void 0)}O&&t.dom.addEventListener("input",(()=>null)),je(t)}function ze(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function He(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function je(t){t.someProp("handleDOMEvents",(e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=e=>Ve(t,e))}))}function Ve(t,e){return t.someProp("handleDOMEvents",(n=>{let r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function We(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function $e(t,e){Ve(t,e)||!Be[e.type]||!t.editable&&e.type in Le||Be[e.type](t,e)}function Ge(t){return{left:t.clientX,top:t.clientY}}function Ye(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Xe(t,e,n,r,i){if(-1==r)return!1;let o=t.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(t.someProp(e,(e=>s>o.depth?e(t,n,o.nodeAfter,o.before(s),i,!0):e(t,n,o.node(s),o.before(s),i,!1))))return!0;return!1}function qe(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function Ke(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&r.qv.isSelectable(i))&&(qe(t,new r.qv(n),"pointer"),!0)}function Je(t,e){if(-1==e)return!1;let n,i,o=t.state.selection;o instanceof r.qv&&(n=o.node);let s=t.state.doc.resolve(e);for(let a=s.depth+1;a>0;a--){let t=a>s.depth?s.nodeAfter:s.node(a);if(r.qv.isSelectable(t)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(qe(t,r.qv.create(t.state.doc,i),"pointer"),!0)}function Ze(t,e,n,r,i){return Xe(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(n=>n(t,e,r)))||(i?Je(t,n):Ke(t,n))}function Qe(t,e,n,r){return Xe(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(n=>n(t,e,r)))}function tn(t,e,n,r){return Xe(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(n=>n(t,e,r)))||en(t,n,r)}function en(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(qe(t,r.Bs.create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(e);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s),n=o.before(s);if(e.inlineContent)qe(t,r.Bs.create(i,n+1,n+1+e.content.size),"pointer");else{if(!r.qv.isSelectable(e))continue;qe(t,r.qv.create(i,n),"pointer")}return!0}}function nn(t){return hn(t)}Le.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!sn(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!R||!k||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!D||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(e=>e(t,n)))||be(t,n)?n.preventDefault():ze(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},Le.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Le.keypress=(t,e)=>{let n=e;if(sn(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||x&&n.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,n))))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof r.Bs)||!i.$from.sameParent(i.$to)){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",(n=>n(t,i.$from.pos,i.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const rn=x?"metaKey":"ctrlKey";Be.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=nn(t),i=Date.now(),o="singleClick";i-t.input.lastClick.time<500&&Ye(n,t.input.lastClick)&&!n[rn]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Ge(n));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new on(t,s,n,!!r)):("doubleClick"==o?Qe:tn)(t,s.pos,s.inside,n)?n.preventDefault():ze(t,"pointer"))};class on{constructor(t,e,n,i){let o,s;if(this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[rn],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),s=e.inside;else{let n=t.state.doc.resolve(e.pos);o=n.parent,s=n.depth?n.before():0}const a=i?null:n.target,c=a?t.docView.nearestDesc(a,!0):null;this.target=c?c.dom:null;let{selection:l}=t.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||l instanceof r.qv&&l.from<=s&&l.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!I||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ze(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Gt(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Ge(t))),this.updateAllowDefault(t),this.allowDefault||!e?ze(this.view,"pointer"):Ze(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||O&&this.mightDrag&&!this.mightDrag.node.isAtom||k&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(qe(this.view,r.Y1.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ze(this.view,"pointer")}move(t){this.updateAllowDefault(t),ze(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function sn(t,e){return!!t.composing||!!(O&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Be.touchstart=t=>{t.input.lastTouch=Date.now(),nn(t),ze(t,"pointer")},Be.touchmove=t=>{t.input.lastTouch=Date.now(),ze(t,"pointer")},Be.contextmenu=t=>nn(t);const an=R?5e3:-1;function cn(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>hn(t)),e))}function ln(t){t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=un());while(t.input.compositionNodes.length>0)t.input.compositionNodes.pop().markParentsDirty()}function un(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hn(t,e=!1){if(!(R&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ln(t),e||t.docView&&t.docView.dirty){let e=Wt(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}function dn(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}Le.compositionstart=Le.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||n.marks(),hn(t,!0),t.markCursor=null;else if(hn(t),I&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,r=e.focusOffset;n&&1==n.nodeType&&0!=r;){let e=r<0?n.lastChild:n.childNodes[r-1];if(!e)break;if(3==e.nodeType){t.domSelection().collapse(e,e.nodeValue.length);break}n=e,r=-1}}t.input.composing=!0}cn(t,an)},Le.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,cn(t,20))};const fn=_&&T<15||D&&L<604;function pn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function gn(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?mn(t,r.value,null,t.input.shiftKey,e):mn(t,r.textContent,r.innerHTML,t.input.shiftKey,e)}),50)}function mn(t,e,n,r,o){let s=Ee(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,o,s||i.p2.empty))))return!0;if(!s)return!1;let a=pn(s),c=a?t.state.tr.replaceSelectionWith(a,t.input.shiftKey):t.state.tr.replaceSelection(s);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Be.copy=Le.cut=(t,e)=>{let n=e,r=t.state.selection,i="cut"==n.type;if(r.empty)return;let o=fn?null:n.clipboardData,s=r.content(),{dom:a,text:c}=ve(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):dn(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Le.paste=(t,e)=>{let n=e;if(t.composing&&!R)return;let r=fn?null:n.clipboardData;r&&mn(t,r.getData("text/plain"),r.getData("text/html"),t.input.shiftKey,n)?n.preventDefault():gn(t,n)};class yn{constructor(t,e){this.slice=t,this.move=e}}const wn=x?"altKey":"ctrlKey";Be.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Ge(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof r.qv?o.to-1:o.to));else if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(r.qv.create(t.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&t.dispatch(t.state.tr.setSelection(r.qv.create(t.state.doc,e.posBefore)))}let a=t.state.selection.content(),{dom:c,text:l}=ve(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(fn?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",fn||n.dataTransfer.setData("text/plain",l),t.dragging=new yn(a,!n[wn])},Be.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},Le.dragover=Le.dragenter=(t,e)=>e.preventDefault(),Le.drop=(t,e)=>{let n=e,s=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let a=t.posAtCoords(Ge(n));if(!a)return;let c=t.state.doc.resolve(a.pos),l=s&&s.slice;l?t.someProp("transformPasted",(e=>{l=e(l,t)})):l=Ee(t,n.dataTransfer.getData(fn?"Text":"text/plain"),fn?null:n.dataTransfer.getData("text/html"),!1,c);let u=!(!s||n[wn]);if(t.someProp("handleDrop",(e=>e(t,n,l||i.p2.empty,u))))return void n.preventDefault();if(!l)return;n.preventDefault();let h=l?(0,o.nj)(t.state.doc,c.pos,l):c.pos;null==h&&(h=c.pos);let d=t.state.tr;u&&d.deleteSelection();let f=d.mapping.map(h),p=0==l.openStart&&0==l.openEnd&&1==l.content.childCount,g=d.doc;if(p?d.replaceRangeWith(f,f,l.content.firstChild):d.replaceRange(f,f,l),d.doc.eq(g))return;let m=d.doc.resolve(f);if(p&&r.qv.isSelectable(l.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new r.qv(m));else{let e=d.mapping.map(h);d.mapping.maps[d.mapping.maps.length-1].forEach(((t,n,r,i)=>e=i)),d.setSelection(ee(t,m,d.doc.resolve(e)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))},Be.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Gt(t)}),20))},Be.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Be.beforeinput=(t,e)=>{let n=e;if(k&&R&&"deleteContentBackward"==n.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,y(8,"Backspace")))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let ur in Le)Be[ur]=Le[ur];function bn(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class vn{constructor(t,e){this.toDOM=t,this.spec=e||_n,this.side=this.spec.side||0}map(t,e,n,r){let{pos:i,deleted:o}=t.mapResult(e.from+r,this.side<0?-1:1);return o?null:new Cn(i-n,i-n,this)}valid(){return!0}eq(t){return this==t||t instanceof vn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&bn(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class En{constructor(t,e){this.attrs=t,this.spec=e||_n}map(t,e,n,r){let i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Cn(i,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof En&&bn(this.attrs,t.attrs)&&bn(this.spec,t.spec)}static is(t){return t.type instanceof En}destroy(){}}class An{constructor(t,e){this.attrs=t,this.spec=e||_n}map(t,e,n,r){let i=t.mapResult(e.from+r,1);if(i.deleted)return null;let o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new Cn(i.pos-n,o.pos-n,this)}valid(t,e){let n,{index:r,offset:i}=t.content.findIndex(e.from);return i==e.from&&!(n=t.child(r)).isText&&i+n.nodeSize==e.to}eq(t){return this==t||t instanceof An&&bn(this.attrs,t.attrs)&&bn(this.spec,t.spec)}destroy(){}}class Cn{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new Cn(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new Cn(t,t,new vn(e,n))}static inline(t,e,n,r){return new Cn(t,e,new En(n,r))}static node(t,e,n,r){return new Cn(t,e,new An(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof En}}const Sn=[],_n={};class Tn{constructor(t,e){this.local=t.length?t:Sn,this.children=e.length?e:Sn}static create(t,e){return e.length?Rn(e,t,0,_n):In}find(t,e,n){let r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r}findInner(t,e,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let s=this.children[o]+1;this.children[o+2].findInner(t-s,e-s,n,r+s,i)}}map(t,e,n){return this==In||0==t.maps.length?this:this.mapInner(t,e,0,0,n||_n)}mapInner(t,e,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?kn(this.children,o||[],t,e,n,r,i):o?new Tn(o.sort(Bn),Sn):In}add(t,e){return e.length?this==In?Tn.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let r,i=0;t.forEach(((t,o)=>{let s,a=o+n;if(s=Dn(e,t,a)){r||(r=this.children.slice());while(i<r.length&&r[i]<o)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(t,s,a+1):r.splice(i,0,o,o+t.nodeSize,Rn(s,t,a+1,_n)),i+=3}}));let o=Nn(i?xn(e):e,-n);for(let s=0;s<o.length;s++)o[s].type.valid(t,o[s])||o.splice(s--,1);return new Tn(o.length?this.local.concat(o).sort(Bn):this.local,r||this.children)}remove(t){return 0==t.length||this==In?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+e,s=n[i+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>o&&e.to<s&&(t[n]=null,(r||(r=[])).push(e));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=In?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<t.length;o++)if(i=t[o])for(let t=0;t<r.length;t++)r[t].eq(i,e)&&(r==this.local&&(r=this.local.slice()),r.splice(t--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Tn(r,n):In}forChild(t,e){if(this==In)return this;if(e.isLeaf)return Tn.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=t){this.children[s]==t&&(n=this.children[s+2]);break}let i=t+1,o=i+e.content.size;for(let s=0;s<this.local.length;s++){let t=this.local[s];if(t.from<o&&t.to>i&&t.type instanceof En){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let t=new Tn(r.sort(Bn),Sn);return n?new Mn([t,n]):t}return n||In}eq(t){if(this==t)return!0;if(!(t instanceof Tn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return Ln(this.localsInner(t))}localsInner(t){if(this==In)return Sn;if(t.inlineContent||!this.local.some(En.is))return this.local;let e=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof En||e.push(this.local[n]);return e}}Tn.empty=new Tn([],[]),Tn.removeOverlap=Ln;const In=Tn.empty;class Mn{constructor(t){this.members=t}map(t,e){const n=this.members.map((n=>n.map(t,e,_n)));return Mn.from(n)}forChild(t,e){if(e.isLeaf)return Tn.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(t,e);i!=In&&(i instanceof Mn?n=n.concat(i.members):n.push(i))}return Mn.from(n)}eq(t){if(!(t instanceof Mn)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<i.length;t++)e.push(i[t])}else e=i}return e?Ln(n?e:e.sort(Bn)):Sn}static from(t){switch(t.length){case 0:return In;case 1:return t[0];default:return new Mn(t.every((t=>t instanceof Tn))?t:t.reduce(((t,e)=>t.concat(e instanceof Tn?e:e.members)),[]))}}}function kn(t,e,n,r,i,o,s){let a=t.slice();for(let l=0,u=o;l<n.maps.length;l++){let t=0;n.maps[l].forEach(((e,n,r,o)=>{let s=o-r-(n-e);for(let c=0;c<a.length;c+=3){let o=a[c+1];if(o<0||e>o+u-t)continue;let l=a[c]+u-t;n>=l?a[c+1]=e<=l?-2:-1:r>=i&&s&&(a[c]+=s,a[c+1]+=s)}t+=s})),u=n.maps[l].map(u,-1)}let c=!1;for(let l=0;l<a.length;l+=3)if(a[l+1]<0){if(-2==a[l+1]){c=!0,a[l+1]=-1;continue}let e=n.map(t[l]+o),u=e-i;if(u<0||u>=r.content.size){c=!0;continue}let h=n.map(t[l+1]+o,-1),d=h-i,{index:f,offset:p}=r.content.findIndex(u),g=r.maybeChild(f);if(g&&p==u&&p+g.nodeSize==d){let r=a[l+2].mapInner(n,g,e+1,t[l]+o+1,s);r!=In?(a[l]=u,a[l+1]=d,a[l+2]=r):(a[l+1]=-2,c=!0)}else c=!0}if(c){let c=On(a,t,e,n,i,o,s),l=Rn(c,r,0,s);e=l.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<l.children.length;t+=3){let n=l.children[t];while(e<a.length&&a[e]<n)e+=3;a.splice(e,0,l.children[t],l.children[t+1],l.children[t+2])}}return new Tn(e.sort(Bn),a)}function Nn(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Cn(i.from+e,i.to+e,i.type))}return n}function On(t,e,n,r,i,o,s){function a(t,e){for(let o=0;o<t.local.length;o++){let a=t.local[o].map(r,i,e);a?n.push(a):s.onRemove&&s.onRemove(t.local[o].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+o+1);return n}function Dn(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let o,s=0;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function xn(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Rn(t,e,n,r){let i=[],o=!1;e.forEach(((e,s)=>{let a=Dn(t,e,s+n);if(a){o=!0;let t=Rn(a,e,n+s+1,r);t!=In&&i.push(s,s+e.nodeSize,t)}}));let s=Nn(o?xn(t):t,-n).sort(Bn);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Tn(s,i):In}function Bn(t,e){return t.from-e.from||t.to-e.to}function Ln(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Pn(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Pn(e,i+1,o.copy(r.to,o.to)))}}return e}function Pn(t,e,n){while(e<t.length&&Bn(n,t[e])>0)e++;t.splice(e,0,n)}function Fn(t){let e=[];return t.someProp("decorations",(n=>{let r=n(t.state);r&&r!=In&&e.push(r)})),t.cursorWrapper&&e.push(Tn.create(t.state.doc,[t.cursorWrapper.deco])),Mn.from(e)}const Un={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},zn=_&&T<=11;class Hn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class jn{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Hn,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);_&&T<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),zn&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Un)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(ne(this.view)){if(this.suppressingSelectionUpdates)return Gt(this.view);if(_&&T<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&u(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,n=new Set;for(let i=t.focusNode;i;i=a(i))n.add(i);for(let i=t.anchorNode;i;i=a(i))if(n.has(i)){e=i;break}let r=e&&this.view.docView.nearestDesc(e);return r&&r.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ne(t)&&!this.ignoreSelectionChange(n),o=-1,s=-1,a=!1,c=[];if(t.editable)for(let r=0;r<e.length;r++){let t=this.registerMutation(e[r],c);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(a=!0))}if(I&&c.length>1){let t=c.filter((t=>"BR"==t.nodeName));if(2==t.length){let e=t[0],n=t[1];e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}}let l=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&m(n)&&(l=Wt(t))&&l.eq(r.Y1.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Gt(t),this.currentSelection.set(n),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,s),$n(t)),this.handleDOMChange(o,s,a,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Gt(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let n=0;n<t.addedNodes.length;n++)e.push(t.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let r=t.previousSibling,i=t.nextSibling;if(_&&T<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:n,nextSibling:o}=t.addedNodes[e];(!n||Array.prototype.indexOf.call(t.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(t.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==t.target?s(r)+1:0,a=n.localPosFromDOM(t.target,o,-1),c=i&&i.parentNode==t.target?s(i):t.target.childNodes.length,l=n.localPosFromDOM(t.target,c,1);return{from:a,to:l}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}}}let Vn=new WeakMap,Wn=!1;function $n(t){if(!Vn.has(t)&&(Vn.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace))){if(t.requiresGeckoHackNode=I,Wn)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Wn=!0}}function Gn(t){let e;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return u(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function Yn(t,e,n){let r,{node:o,fromOffset:s,toOffset:a,from:c,to:l}=t.docView.parseRange(e,n),u=t.domSelectionRange(),h=u.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:u.anchorOffset}],m(u)||r.push({node:u.focusNode,offset:u.focusOffset})),k&&8===t.input.lastKeyCode)for(let i=a;i>s;i--){let t=o.childNodes[i-1],e=t.pmViewDesc;if("BR"==t.nodeName&&!e){a=i;break}if(!e||e.size)break}let d=t.state.doc,f=t.someProp("domParser")||i.aw.fromSchema(t.state.schema),p=d.resolve(c),g=null,y=f.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:Xn,context:p});if(r&&null!=r[0].pos){let t=r[0].pos,e=r[1]&&r[1].pos;null==e&&(e=t),g={anchor:t+c,head:e+c}}return{doc:y,sel:g,from:c,to:l}}function Xn(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(O&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||O&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const qn=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Kn(t,e,n,i,o){if(e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,n=Wt(t,e);if(n&&!t.state.selection.eq(n)){if(k&&R&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))))return;let r=t.state.tr.setSelection(n);"pointer"==e?r.setMeta("pointer",!0):"key"==e&&r.scrollIntoView(),t.dispatch(r)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let c,l,u=t.state.selection,h=Yn(t,e,n),d=t.state.doc,f=d.slice(h.from,h.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(c=t.state.selection.to,l="end"):(c=t.state.selection.from,l="start"),t.input.lastKeyCode=null;let p=er(f.content,h.doc.content,h.from,c,l);if((D&&t.input.lastIOSEnter>Date.now()-225||R)&&o.some((t=>1==t.nodeType&&!qn.test(t.nodeName)))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!p){if(!(i&&u instanceof r.Bs&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||h.sel&&h.sel.anchor!=h.sel.head){if(h.sel){let e=Jn(t,t.state.doc,h.sel);e&&!e.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(e))}return}p={start:u.from,endA:u.to,endB:u.to}}if(k&&t.cursorWrapper&&h.sel&&h.sel.anchor==t.cursorWrapper.deco.from&&h.sel.head==h.sel.anchor){let t=p.endB-p.start;h.sel={anchor:h.sel.anchor+t,head:h.sel.anchor+t}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof r.Bs&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),_&&T<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>h.from&&"  "==h.doc.textBetween(p.start-h.from-1,p.start-h.from+1)&&(p.start--,p.endA--,p.endB--);let g,m=h.doc.resolveNoCache(p.start-h.from),w=h.doc.resolveNoCache(p.endB-h.from),b=d.resolve(p.start),v=m.sameParent(w)&&m.parent.inlineContent&&b.end()>=p.endA;if((D&&t.input.lastIOSEnter>Date.now()-225&&(!v||o.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!v&&m.pos<h.doc.content.size&&(g=r.Y1.findFrom(h.doc.resolve(m.pos+1),1,!0))&&g.head==w.pos)&&t.someProp("handleKeyDown",(e=>e(t,y(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>p.start&&Qn(d,p.start,p.endA,m,w)&&t.someProp("handleKeyDown",(e=>e(t,y(8,"Backspace")))))return void(R&&k&&t.domObserver.suppressSelectionUpdates());k&&R&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),R&&!v&&m.start()!=w.start()&&0==w.parentOffset&&m.depth==w.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==p.endA&&(p.endB-=2,w=h.doc.resolveNoCache(p.endB-h.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,y(13,"Enter"))}))}),20));let E,A,C,S=p.start,I=p.endA;if(v)if(m.pos==w.pos)_&&T<=11&&0==m.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>Gt(t)),20)),E=t.state.tr.delete(S,I),A=d.resolve(p.start).marksAcross(d.resolve(p.endA));else if(p.endA==p.endB&&(C=Zn(m.parent.content.cut(m.parentOffset,w.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))E=t.state.tr,"add"==C.type?E.addMark(S,I,C.mark):E.removeMark(S,I,C.mark);else if(m.parent.child(m.index()).isText&&m.index()==w.index()-(w.textOffset?0:1)){let e=m.parent.textBetween(m.parentOffset,w.parentOffset);if(t.someProp("handleTextInput",(n=>n(t,S,I,e))))return;E=t.state.tr.insertText(e,S,I)}if(E||(E=t.state.tr.replace(S,I,h.doc.slice(p.start-h.from,p.endB-h.from))),h.sel){let e=Jn(t,E.doc,h.sel);e&&!(k&&R&&t.composing&&e.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==S||e.head==E.mapping.map(I)-1)||_&&e.empty&&e.head==S)&&E.setSelection(e)}A&&E.ensureMarks(A),t.dispatch(E.scrollIntoView())}function Jn(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ee(t,e.resolve(n.anchor),e.resolve(n.head))}function Zn(t,e){let n,r,o,s=t.firstChild.marks,a=e.firstChild.marks,c=s,l=a;for(let i=0;i<a.length;i++)c=a[i].removeFromSet(c);for(let i=0;i<s.length;i++)l=s[i].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",o=t=>t.mark(r.addToSet(t.marks));else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",o=t=>t.mark(r.removeFromSet(t.marks))}let u=[];for(let i=0;i<e.childCount;i++)u.push(o(e.child(i)));if(i.HY.from(u).eq(t))return{mark:r,type:n}}function Qn(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||tr(r,!0,!1)<i.pos)return!1;let o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(tr(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||tr(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function tr(t,e,n){let r=t.depth,i=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,i++,e=!1;if(n){let e=t.node(r).maybeChild(t.indexAfter(r));while(e&&!e.isLeaf)e=e.firstChild,i++}return i}function er(t,e,n,r,i){let o=t.findDiffStart(e,n);if(null==o)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if("end"==i){let t=Math.max(0,o-Math.min(s,a));r-=s+t-o}if(s<o&&t.size<e.size){let t=r<=o&&r>=s?o-r:0;o-=t,a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;o-=t,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}class nr{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Fe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(lr),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=or(this),ir(this),this.nodeViews=ar(this),this.docView=Ct(this.state.doc,rr(this),Fn(this),this.dom,this),this.domObserver=new jn(this,((t,e,n,r)=>Kn(this,t,e,n,r))),this.domObserver.start(),Ue(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&je(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(lr),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let n in this._props)e[n]=this._props[n];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){let n=this.state,r=!1,i=!1;t.storedMarks&&this.composing&&(ln(this),i=!0),this.state=t;let o=n.plugins!=t.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=ar(this);cr(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&je(this),this.editable=or(this),ir(this);let s=Fn(this),a=rr(this),c=n.plugins==t.plugins||n.doc.eq(t.doc)?t.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",l=r||!this.docView.matchesNode(t.doc,a,s);!l&&t.selection.eq(n.selection)||(i=!0);let u="preserve"==c&&i&&null==this.dom.style.overflowAnchor&&H(this);if(i){this.domObserver.stop();let e=l&&(_||k)&&!this.composing&&!n.selection.empty&&!t.selection.empty&&sr(n.selection,t.selection);if(l){let n=k?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(t.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Ct(t.doc,a,s,this.dom,this)),n&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ie(this))?Gt(this,e):(Qt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():u&&V(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof r.qv){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&z(this,e.getBoundingClientRect(),t)}else z(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}someProp(t,e){let n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[t];if(null!=r&&(n=e?e(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[t];if(null!=r&&(n=e?e(r):r))return n}}hasFocus(){if(_){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;while(t&&this.dom!=t&&this.dom.contains(t)){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&G(this.dom),Gt(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return t||document}posAtCoords(t){return tt(this,t)}coordsAtPos(t,e=1){return rt(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(t,e){return ft(this,e||this.state,t)}pasteHTML(t,e){return mn(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return mn(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(He(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return $e(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){return O&&11===this.root.nodeType&&w(this.dom.ownerDocument)==this.dom?Gn(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function rr(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let t in n)"class"==t&&(e.class+=" "+n[t]),"style"==t?e.style=(e.style?e.style+";":"")+n[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(n[t]))})),[Cn.node(0,t.state.doc.content.size,e)]}function ir(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Cn.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function or(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function sr(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function ar(t){let e=Object.create(null);function n(t){for(let n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function cr(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function lr(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},708:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});n(3767),n(8585),n(8696);var r=n(6402);function i(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,r.P)(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}},5489:function(t,e,n){"use strict";n.r(e),n.d(e,{concat:function(){return o}});var r=n(708),i=n(6402);function o(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const n=(0,r.E)(e);let o=0;for(const r of t)n.set(r,o),o+=r.length;return(0,i.P)(n)}},6555:function(t,e,n){"use strict";n.r(e),n.d(e,{fromString:function(){return K}});var r={};n.r(r),n.d(r,{identity:function(){return p}});var i={};n.r(i),n.d(i,{base2:function(){return g}});var o={};n.r(o),n.d(o,{base8:function(){return m}});var s={};n.r(s),n.d(s,{base10:function(){return y}});var a={};n.r(a),n.d(a,{base16:function(){return w},base16upper:function(){return b}});var c={};n.r(c),n.d(c,{base36:function(){return E},base36upper:function(){return A}});var l={};n.r(l),n.d(l,{base64:function(){return S},base64pad:function(){return _},base64url:function(){return T},base64urlpad:function(){return I}});var u={};n.r(u),n.d(u,{base256emoji:function(){return x}});var h={};n.r(h),n.d(h,{code:function(){return U},decode:function(){return H},encode:function(){return z},name:function(){return F}});var d=n(4711),f=n(3914);const p=(0,d.Dp)({prefix:"\0",name:"identity",encode:t=>(0,f.toString)(t),decode:t=>(0,f.fromString)(t)}),g=(0,d.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),m=(0,d.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),y=(0,d.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),w=(0,d.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),b=(0,d.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v=n(2056);const E=(0,d.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),A=(0,d.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var C=n(8334);const S=(0,d.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_=(0,d.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),T=(0,d.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I=(0,d.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});n(7658),n(3767),n(8585),n(8696);const M=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),k=M.reduce(((t,e,n)=>(t[n]=e,t)),[]),N=M.reduce(((t,e,n)=>(t[e.codePointAt(0)]=n,t)),[]);function O(t){return t.reduce(((t,e)=>(t+=k[e],t)),"")}function D(t){const e=[];for(const n of t){const t=N[n.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${n}`);e.push(t)}return new Uint8Array(e)}const x=(0,d.Dp)({prefix:"🚀",name:"base256emoji",encode:O,decode:D});var R=n(1919),B=n(7041);n(6347);const L=new TextEncoder,P=new TextDecoder,F="json",U=512,z=t=>L.encode(JSON.stringify(t)),H=t=>JSON.parse(P.decode(t));n(2493);const j={...r,...i,...o,...s,...a,...v,...c,...C,...l,...u};var V=n(708);function W(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const $=W("utf8","u",(t=>{const e=new TextDecoder("utf8");return"u"+e.decode(t)}),(t=>{const e=new TextEncoder;return e.encode(t.substring(1))})),G=W("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{t=t.substring(1);const e=(0,V.E)(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),Y={utf8:$,"utf-8":$,hex:j.base16,latin1:G,ascii:G,binary:G,...j};var X=Y,q=n(6402);function K(t,e="utf8"){const n=X[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${t}`):(0,q.P)(globalThis.Buffer.from(t,"utf-8"))}},6402:function(t,e,n){"use strict";n.d(e,{P:function(){return r}});n(3767),n(8585),n(8696);function r(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}},3989:function(t,e,n){"use strict";n.d(e,{zx:function(){return S}});var r=n(1404),i=n(3396),o=n(610),s=n(2220),a=n(5323),c=n(7936),l=n(5322),u=n(6014),h=n(316),d=n(6048);const[f,p]=(0,o["do"])("loading"),g=Array(12).fill(null).map(((t,e)=>(0,i.Wm)("i",{class:p("line",String(e+1))},null))),m=(0,i.Wm)("svg",{class:p("circular"),viewBox:"25 25 50 50"},[(0,i.Wm)("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),y={size:a.Or,type:(0,a.SQ)("circular"),color:String,vertical:Boolean,textSize:a.Or,textColor:String};var w=(0,i.aZ)({name:f,props:y,setup(t,{slots:e}){const n=(0,i.Fl)((()=>(0,s.l7)({color:t.color},(0,d.Xn)(t.size)))),r=()=>{const r="spinner"===t.type?g:m;return(0,i.Wm)("span",{class:p("spinner",t.type),style:n.value},[e.icon?e.icon():r])},o=()=>{var n;if(e.default)return(0,i.Wm)("span",{class:p("text"),style:{fontSize:(0,d.Nn)(t.textSize),color:null!=(n=t.textColor)?n:t.color}},[e.default()])};return()=>{const{type:e,vertical:n}=t;return(0,i.Wm)("div",{class:p([e,{vertical:n}]),"aria-live":"polite","aria-busy":!0},[r(),o()])}}});const b=(0,r.n)(w);const[v,E]=(0,o["do"])("button"),A=(0,s.l7)({},u.g2,{tag:(0,a.SQ)("button"),text:String,icon:String,type:(0,a.SQ)("default"),size:(0,a.SQ)("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:(0,a.SQ)("button"),loadingSize:a.Or,loadingText:String,loadingType:String,iconPosition:(0,a.SQ)("left")});var C=(0,i.aZ)({name:v,props:A,emits:["click"],setup(t,{emit:e,slots:n}){const r=(0,u.yj)(),o=()=>n.loading?n.loading():(0,i.Wm)(b,{size:t.loadingSize,type:t.loadingType,class:E("loading")},null),s=()=>t.loading?o():n.icon?(0,i.Wm)("div",{class:E("icon")},[n.icon()]):t.icon?(0,i.Wm)(h.JO,{name:t.icon,class:E("icon"),classPrefix:t.iconPrefix},null):void 0,a=()=>{let e;if(e=t.loading?t.loadingText:n.default?n.default():t.text,e)return(0,i.Wm)("span",{class:E("text")},[e])},d=()=>{const{color:e,plain:n}=t;if(e){const t={color:n?e:"white"};return n||(t.background=e),e.includes("gradient")?t.border=0:t.borderColor=e,t}},f=n=>{t.loading?(0,c.PF)(n):t.disabled||(e("click",n),r())};return()=>{const{tag:e,type:n,size:r,block:o,round:c,plain:u,square:h,loading:p,disabled:g,hairline:m,nativeType:y,iconPosition:w}=t,b=[E([n,r,{plain:u,block:o,round:c,square:h,loading:p,disabled:g,hairline:m}]),{[l._K]:m}];return(0,i.Wm)(e,{type:y,class:b,style:d(),disabled:g,onClick:f},{default:()=>[(0,i.Wm)("div",{class:E("content")},["left"===w&&s(),a(),"right"===w&&s()])]})}}});const S=(0,r.n)(C)},9237:function(t,e,n){"use strict";n(1958),n(368),n(6742)},5728:function(t,e,n){"use strict";n.d(e,{bL:function(){return m}});var r=n(1404),i=n(3396),o=n(610),s=n(5323),a=n(2220),c=n(6491),l=n(6014),u=n(316);const[h,d]=(0,o["do"])("cell"),f={tag:(0,s.SQ)("div"),icon:String,size:String,title:s.Or,value:s.Or,label:s.Or,center:Boolean,isLink:Boolean,border:s.J5,required:Boolean,iconPrefix:String,valueClass:s.Vg,labelClass:s.Vg,titleClass:s.Vg,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},p=(0,a.l7)({},f,l.g2);var g=(0,i.aZ)({name:h,props:p,setup(t,{slots:e}){const n=(0,l.yj)(),r=()=>{const n=e.label||(0,c.Xq)(t.label);if(n)return(0,i.Wm)("div",{class:[d("label"),t.labelClass]},[e.label?e.label():t.label])},o=()=>{var n;if(e.title||(0,c.Xq)(t.title)){const o=null==(n=e.title)?void 0:n.call(e);if(Array.isArray(o)&&0===o.length)return;return(0,i.Wm)("div",{class:[d("title"),t.titleClass],style:t.titleStyle},[o||(0,i.Wm)("span",null,[t.title]),r()])}},s=()=>{const n=e.value||e.default,r=n||(0,c.Xq)(t.value);if(r)return(0,i.Wm)("div",{class:[d("value"),t.valueClass]},[n?n():(0,i.Wm)("span",null,[t.value])])},a=()=>e.icon?e.icon():t.icon?(0,i.Wm)(u.JO,{name:t.icon,class:d("left-icon"),classPrefix:t.iconPrefix},null):void 0,h=()=>{if(e["right-icon"])return e["right-icon"]();if(t.isLink){const e=t.arrowDirection&&"right"!==t.arrowDirection?`arrow-${t.arrowDirection}`:"arrow";return(0,i.Wm)(u.JO,{name:e,class:d("right-icon")},null)}};return()=>{var r;const{tag:c,size:l,center:u,border:f,isLink:p,required:g}=t,m=null!=(r=t.clickable)?r:p,y={center:u,required:g,clickable:m,borderless:!f};return l&&(y[l]=!!l),(0,i.Wm)(c,{class:d(y),role:m?"button":void 0,tabindex:m?0:void 0,onClick:n},{default:()=>{var t;return[a(),o(),s(),h(),null==(t=e.extra)?void 0:t.call(e)]}})}}});const m=(0,r.n)(g)},923:function(t,e,n){"use strict";n(1958),n(368),n(6742)},140:function(t,e,n){"use strict";n.d(e,{H:function(){return o},t:function(){return i}});let r=2e3;const i=()=>++r,o=t=>{r=t}},6014:function(t,e,n){"use strict";n.d(e,{g2:function(){return i},yj:function(){return s}});var r=n(3396);const i={to:[String,Object],url:String,replace:Boolean};function o({to:t,url:e,replace:n,$router:r}){t&&r?r[n?"replace":"push"](t):e&&(n?location.replace(e):location.href=e)}function s(){const t=(0,r.FN)().proxy;return()=>o(t)}},316:function(t,e,n){"use strict";n.d(e,{JO:function(){return T}});var r=n(1404),i=n(3396),o=n(610),s=n(5323),a=n(6048),c=n(6491);const[l,u]=(0,o["do"])("badge"),h={dot:Boolean,max:s.Or,tag:(0,s.SQ)("div"),color:String,offset:Array,content:s.Or,showZero:s.J5,position:(0,s.SQ)("top-right")};var d=(0,i.aZ)({name:l,props:h,setup(t,{slots:e}){const n=()=>{if(e.content)return!0;const{content:n,showZero:r}=t;return(0,c.Xq)(n)&&""!==n&&(r||0!==n&&"0"!==n)},r=()=>{const{dot:r,max:i,content:o}=t;if(!r&&n())return e.content?e.content():(0,c.Xq)(i)&&(0,c.kE)(o)&&+o>+i?`${i}+`:o},o=t=>t.startsWith("-")?t.replace("-",""):`-${t}`,s=(0,i.Fl)((()=>{const n={background:t.color};if(t.offset){const[r,i]=t.offset,{position:s}=t,[c,l]=s.split("-");e.default?(n[c]="number"===typeof i?(0,a.Nn)("top"===c?i:-i):"top"===c?(0,a.Nn)(i):o(i),n[l]="number"===typeof r?(0,a.Nn)("left"===l?r:-r):"left"===l?(0,a.Nn)(r):o(r)):(n.marginTop=(0,a.Nn)(i),n.marginLeft=(0,a.Nn)(r))}return n})),l=()=>{if(n()||t.dot)return(0,i.Wm)("div",{class:u([t.position,{dot:t.dot,fixed:!!e.default}]),style:s.value},[r()])};return()=>{if(e.default){const{tag:n}=t;return(0,i.Wm)(n,{class:u("wrapper")},{default:()=>[e.default(),l()]})}return l()}}});const f=(0,r.n)(d);var p=n(2220),g=n(140);const[m,y]=(0,o["do"])("config-provider"),w=Symbol(m),b={tag:(0,s.SQ)("div"),theme:(0,s.SQ)("light"),zIndex:Number,themeVars:Object,themeVarsDark:Object,themeVarsLight:Object,iconPrefix:String};function v(t){const e={};return Object.keys(t).forEach((n=>{e[`--van-${(0,a.GL)(n)}`]=t[n]})),e}(0,i.aZ)({name:m,props:b,setup(t,{slots:e}){const n=(0,i.Fl)((()=>v((0,p.l7)({},t.themeVars,"dark"===t.theme?t.themeVarsDark:t.themeVarsLight))));if(p._f){const e=()=>{document.documentElement.classList.add(`van-theme-${t.theme}`)},n=(e=t.theme)=>{document.documentElement.classList.remove(`van-theme-${e}`)};(0,i.YP)((()=>t.theme),((t,r)=>{r&&n(r),e()}),{immediate:!0}),(0,i.dl)(e),(0,i.se)(n),(0,i.Jd)(n)}return(0,i.JJ)(w,t),(0,i.m0)((()=>{void 0!==t.zIndex&&(0,g.H)(t.zIndex)})),()=>(0,i.Wm)(t.tag,{class:y(),style:n.value},{default:()=>{var t;return[null==(t=e.default)?void 0:t.call(e)]}})}});const[E,A]=(0,o["do"])("icon"),C=t=>null==t?void 0:t.includes("/"),S={dot:Boolean,tag:(0,s.SQ)("i"),name:String,size:s.Or,badge:s.Or,color:String,badgeProps:Object,classPrefix:String};var _=(0,i.aZ)({name:E,props:S,setup(t,{slots:e}){const n=(0,i.f3)(w,null),r=(0,i.Fl)((()=>t.classPrefix||(null==n?void 0:n.iconPrefix)||A()));return()=>{const{tag:n,dot:o,name:s,size:c,badge:l,color:u}=t,h=C(s);return(0,i.Wm)(f,(0,i.dG)({dot:o,tag:n,class:[r.value,h?"":`${r.value}-${s}`],style:{color:u,fontSize:(0,a.Nn)(c)},content:l},t.badgeProps),{default:()=>{var t;return[null==(t=e.default)?void 0:t.call(e),h&&(0,i.Wm)("img",{class:A("image"),src:s},null)]}})}}});const T=(0,r.n)(_)},4165:function(t,e,n){"use strict";n(1958),n(368),n(6742)},9591:function(t,e,n){"use strict";n.d(e,{GI:function(){return L}});var r=n(1404),i=n(3396),o=n(9242),s=n(4870),a=n(5323);const c={show:Boolean,zIndex:a.Or,overlay:a.J5,duration:a.Or,teleport:[String,Object],lockScroll:a.J5,lazyRender:a.J5,beforeClose:Function,overlayStyle:Object,overlayClass:a.Vg,transitionAppear:Boolean,closeOnClickOverlay:a.J5};Object.keys(c);var l=n(2220),u=n(610),h=n(6491);function d(t,{args:e=[],done:n,canceled:r}){if(t){const i=t.apply(null,e);(0,h.tI)(i)?i.then((t=>{t?n():r&&r()})).catch(l.ZT):i?n():r&&r()}else n()}var f=n(5322),p=n(253);function g(t){const e=(0,i.FN)();e&&(0,l.l7)(e.proxy,t)}function m(t,e){return t>e?"horizontal":e>t?"vertical":""}function y(){const t=(0,s.iH)(0),e=(0,s.iH)(0),n=(0,s.iH)(0),r=(0,s.iH)(0),i=(0,s.iH)(0),o=(0,s.iH)(0),a=(0,s.iH)(""),c=()=>"vertical"===a.value,l=()=>"horizontal"===a.value,u=()=>{n.value=0,r.value=0,i.value=0,o.value=0,a.value=""},h=n=>{u(),t.value=n.touches[0].clientX,e.value=n.touches[0].clientY},d=s=>{const c=s.touches[0];n.value=(c.clientX<0?0:c.clientX)-t.value,r.value=c.clientY-e.value,i.value=Math.abs(n.value),o.value=Math.abs(r.value);const l=10;(!a.value||i.value<l&&o.value<l)&&(a.value=m(i.value,o.value))};return{move:d,start:h,reset:u,startX:t,startY:e,deltaX:n,deltaY:r,offsetX:i,offsetY:o,direction:a,isVertical:c,isHorizontal:l}}var w=n(7936);let b=0;const v="van-overflow-hidden";function E(t,e){const n=y(),r="01",o="10",s=e=>{n.move(e);const i=n.deltaY.value>0?o:r,s=(0,p.rP)(e.target,t.value),{scrollHeight:a,offsetHeight:c,scrollTop:l}=s;let u="11";0===l?u=c>=a?"00":"01":l+c>=a&&(u="10"),"11"===u||!n.isVertical()||parseInt(u,2)&parseInt(i,2)||(0,w.PF)(e,!0)},a=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",s,{passive:!1}),b||document.body.classList.add(v),b++},c=()=>{b&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",s),b--,b||document.body.classList.remove(v))},l=()=>e()&&a(),u=()=>e()&&c();(0,p.Ib)(l),(0,i.se)(u),(0,i.Jd)(u),(0,i.YP)(e,(t=>{t?a():c()}))}function A(t){const e=(0,s.iH)(!1);return(0,i.YP)(t,(t=>{t&&(e.value=t)}),{immediate:!0}),t=>()=>e.value?t():null}const C=Symbol();var S=n(140),_=n(316),T=n(6048);const[I,M]=(0,u["do"])("overlay"),k={show:Boolean,zIndex:a.Or,duration:a.Or,className:a.Vg,lockScroll:a.J5,lazyRender:a.J5,customStyle:Object};var N=(0,i.aZ)({name:I,props:k,setup(t,{slots:e}){const n=(0,s.iH)(),r=A((()=>t.show||!t.lazyRender)),a=e=>{t.lockScroll&&(0,w.PF)(e,!0)},c=r((()=>{var r;const s=(0,l.l7)((0,T.As)(t.zIndex),t.customStyle);return(0,h.Xq)(t.duration)&&(s.animationDuration=`${t.duration}s`),(0,i.wy)((0,i.Wm)("div",{ref:n,style:s,class:[M(),t.className]},[null==(r=e.default)?void 0:r.call(e)]),[[o.F8,t.show]])}));return(0,p.OR)("touchmove",a,{target:n}),()=>(0,i.Wm)(o.uT,{name:"van-fade",appear:!0},{default:c})}});const O=(0,r.n)(N);const D=(0,l.l7)({},c,{round:Boolean,position:(0,a.SQ)("center"),closeIcon:(0,a.SQ)("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:(0,a.SQ)("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[x,R]=(0,u["do"])("popup");var B=(0,i.aZ)({name:x,inheritAttrs:!1,props:D,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(t,{emit:e,attrs:n,slots:r}){let a,c;const l=(0,s.iH)(),u=(0,s.iH)(),m=A((()=>t.show||!t.lazyRender)),y=(0,i.Fl)((()=>{const e={zIndex:l.value};if((0,h.Xq)(t.duration)){const n="center"===t.position?"animationDuration":"transitionDuration";e[n]=`${t.duration}s`}return e})),w=()=>{a||(a=!0,l.value=void 0!==t.zIndex?+t.zIndex:(0,S.t)(),e("open"))},b=()=>{a&&d(t.beforeClose,{done(){a=!1,e("close"),e("update:show",!1)}})},v=n=>{e("clickOverlay",n),t.closeOnClickOverlay&&b()},T=()=>{if(t.overlay)return(0,i.Wm)(O,{show:t.show,class:t.overlayClass,zIndex:l.value,duration:t.duration,customStyle:t.overlayStyle,role:t.closeOnClickOverlay?"button":void 0,tabindex:t.closeOnClickOverlay?0:void 0,onClick:v},{default:r["overlay-content"]})},I=t=>{e("clickCloseIcon",t),b()},M=()=>{if(t.closeable)return(0,i.Wm)(_.JO,{role:"button",tabindex:0,name:t.closeIcon,class:[R("close-icon",t.closeIconPosition),f.e9],classPrefix:t.iconPrefix,onClick:I},null)},k=()=>e("opened"),N=()=>e("closed"),D=t=>e("keydown",t),x=m((()=>{var e;const{round:s,position:a,safeAreaInsetTop:c,safeAreaInsetBottom:l}=t;return(0,i.wy)((0,i.Wm)("div",(0,i.dG)({ref:u,style:y.value,role:"dialog",tabindex:0,class:[R({round:s,[a]:a}),{"van-safe-area-top":c,"van-safe-area-bottom":l}],onKeydown:D},n),[null==(e=r.default)?void 0:e.call(r),M()]),[[o.F8,t.show]])})),B=()=>{const{position:e,transition:n,transitionAppear:r}=t,s="center"===e?"van-fade":`van-popup-slide-${e}`;return(0,i.Wm)(o.uT,{name:n||s,appear:r,onAfterEnter:k,onAfterLeave:N},{default:x})};return(0,i.YP)((()=>t.show),(t=>{t&&!a&&(w(),0===n.tabindex&&(0,i.Y3)((()=>{var t;null==(t=u.value)||t.focus()}))),!t&&a&&(a=!1,e("close"))})),g({popupRef:u}),E(u,(()=>t.show&&t.lockScroll)),(0,p.OR)("popstate",(()=>{t.closeOnPopstate&&(b(),c=!1)})),(0,i.bv)((()=>{t.show&&w()})),(0,i.dl)((()=>{c&&(e("update:show",!0),c=!1)})),(0,i.se)((()=>{t.show&&t.teleport&&(b(),c=!0)})),(0,i.JJ)(C,(()=>t.show)),()=>t.teleport?(0,i.Wm)(i.lR,{to:t.teleport},{default:()=>[T(),B()]}):(0,i.Wm)(i.HY,null,[T(),B()])}});const L=(0,r.n)(B)},6316:function(t,e,n){"use strict";n(1958),n(368),n(6742)},2220:function(t,e,n){"use strict";n.d(e,{U2:function(){return a},ZT:function(){return i},_f:function(){return s},l7:function(){return o}});var r=n(6491);function i(){}const o=Object.assign,s="undefined"!==typeof window;function a(t,e){const n=e.split(".");let i=t;return n.forEach((t=>{var e;i=(0,r.Kn)(i)&&null!=(e=i[t])?e:""})),i}},5322:function(t,e,n){"use strict";n.d(e,{_K:function(){return i},e9:function(){return o}});const r="van-hairline",i=`${r}--surround`,o="van-haptics-feedback";Symbol("van-form")},610:function(t,e,n){"use strict";n.d(e,{do:function(){return w}});var r=n(2220),i=n(6048),o=n(6491),s=n(4870);const{hasOwnProperty:a}=Object.prototype;function c(t,e,n){const r=e[n];(0,o.Xq)(r)&&(a.call(t,n)&&(0,o.Kn)(r)?t[n]=l(Object(t[n]),r):t[n]=r)}function l(t,e){return Object.keys(e).forEach((n=>{c(t,e,n)})),t}var u={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(t,e)=>`${t}年${e}月`,rangePrompt:t=>`最多选择 ${t} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:t=>`${t}折`,condition:t=>`满${t}元可用`},vanCouponCell:{title:"优惠券",count:t=>`${t}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const h=(0,s.iH)("zh-CN"),d=(0,s.qj)({"zh-CN":u}),f={messages(){return d[h.value]},use(t,e){h.value=t,this.add({[t]:e})},add(t={}){l(d,t)}};var p=f;function g(t){const e=(0,i._A)(t)+".";return(t,...n)=>{const i=p.messages(),s=(0,r.U2)(i,e+t)||(0,r.U2)(i,t);return(0,o.mf)(s)?s(...n):s}}function m(t,e){return e?"string"===typeof e?` ${t}--${e}`:Array.isArray(e)?e.reduce(((e,n)=>e+m(t,n)),""):Object.keys(e).reduce(((n,r)=>n+(e[r]?m(t,r):"")),""):""}function y(t){return(e,n)=>(e&&"string"!==typeof e&&(n=e,e=""),e=e?`${t}__${e}`:t,`${e}${m(e,n)}`)}function w(t){const e=`van-${t}`;return[e,y(e),g(e)]}},7936:function(t,e,n){"use strict";n.d(e,{PF:function(){return s}});var r=n(253),i=n(6491);(0,i.gn)();const o=t=>t.stopPropagation();function s(t,e){("boolean"!==typeof t.cancelable||t.cancelable)&&t.preventDefault(),e&&o(t)}const{width:a,height:c}=(0,r.iP)()},6048:function(t,e,n){"use strict";n.d(e,{As:function(){return s},GL:function(){return l},Nn:function(){return i},Xn:function(){return o},_A:function(){return c}});var r=n(6491);function i(t){if((0,r.Xq)(t))return(0,r.kE)(t)?`${t}px`:String(t)}function o(t){if((0,r.Xq)(t)){if(Array.isArray(t))return{width:i(t[0]),height:i(t[1])};const e=i(t);return{width:e,height:e}}}function s(t){const e={};return void 0!==t&&(e.zIndex=+t),e}const a=/-(\w)/g,c=t=>t.replace(a,((t,e)=>e.toUpperCase())),l=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")},5323:function(t,e,n){"use strict";n.d(e,{J5:function(){return o},Or:function(){return i},SQ:function(){return s},Vg:function(){return r}});const r=null,i=[Number,String],o={type:Boolean,default:!0},s=t=>({type:String,default:t})},6491:function(t,e,n){"use strict";n.d(e,{Kn:function(){return s},Xq:function(){return i},gn:function(){return l},kE:function(){return c},mf:function(){return o},tI:function(){return a}});var r=n(2220);const i=t=>void 0!==t&&null!==t,o=t=>"function"===typeof t,s=t=>null!==t&&"object"===typeof t,a=t=>s(t)&&o(t.then)&&o(t.catch);const c=t=>"number"===typeof t||/^\d+(\.\d+)?$/.test(t),l=()=>!!r._f&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())},1404:function(t,e,n){"use strict";n.d(e,{n:function(){return i}});var r=n(6048);function i(t){return t.install=e=>{const{name:n}=t;n&&(e.component(n,t),e.component((0,r._A)(`-${n}`),t))},t}},2483:function(t,e,n){"use strict";n.d(e,{PO:function(){return U},p7:function(){return ee}});n(7658),n(541);var r=n(3396),i=n(4870);
/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function c(t,e){const n={};for(const r in e){const i=e[r];n[r]=u(i)?i.map(t):t(i)}return n}const l=()=>{},u=Array.isArray;const h=/\/$/,d=t=>t.replace(h,"");function f(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),i=t(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=E(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function p(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function g(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function m(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&y(e.matched[r],n.matched[i])&&w(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function y(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function w(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!b(t[n],e[n]))return!1;return!0}function b(t,e){return u(t)?v(t,e):u(e)?v(e,t):t===e}function v(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function E(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],"."!==o){if(".."!==o)break;s>1&&s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}var A,C;(function(t){t["pop"]="pop",t["push"]="push"})(A||(A={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(C||(C={}));function S(t){if(!t)if(o){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const _=/^[^#]+#/;function T(t,e){return t.replace(_,"#")+e}function I(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const M=()=>({left:window.pageXOffset,top:window.pageYOffset});function k(t){let e;if("el"in t){const n=t.el,r="string"===typeof n&&n.startsWith("#");0;const i="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=I(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function N(t,e){const n=history.state?history.state.position-e:-1;return n+t}const O=new Map;function D(t,e){O.set(t,e)}function x(t){const e=O.get(t);return O.delete(t),e}let R=()=>location.protocol+"//"+location.host;function B(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),g(n,"")}const s=g(n,t);return s+r+i}function L(t,e,n,r){let i=[],o=[],s=null;const c=({state:o})=>{const a=B(t,location),c=n.value,l=e.value;let u=0;if(o){if(n.value=a,e.value=o,s&&s===c)return void(s=null);u=l?o.position-l.position:0}else r(a);i.forEach((t=>{t(n.value,c,{delta:u,type:A.pop,direction:u?u>0?C.forward:C.back:C.unknown})}))};function l(){s=n.value}function u(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:M()}),"")}function d(){for(const t of o)t();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:u,destroy:d}}function P(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?M():null}}function F(t){const{history:e,location:n}=window,r={value:B(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:R()+t+r;try{e[s?"replaceState":"pushState"](o,"",c),i.value=o}catch(l){console.error(l),n[s?"replace":"assign"](c)}}function s(t,n){const s=a({},e.state,P(i.value.back,t,i.value.forward,!0),n,{position:i.value.position});o(t,s,!0),r.value=t}function c(t,n){const s=a({},i.value,e.state,{forward:t,scroll:M()});o(s.current,s,!0);const c=a({},P(r.value,t,null),{position:s.position+1},n);o(t,c,!1),r.value=t}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:c,replace:s}}function U(t){t=S(t);const e=F(t),n=L(t,e.state,e.location,e.replace);function r(t,e=!0){e||n.pauseListeners(),history.go(t)}const i=a({location:"",base:t,go:r,createHref:T.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function z(t){return"string"===typeof t||t&&"object"===typeof t}function H(t){return"string"===typeof t||"symbol"===typeof t}const j={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},V=Symbol("");var W;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(W||(W={}));function $(t,e){return a(new Error,{type:t,[V]:!0},e)}function G(t,e){return t instanceof Error&&V in t&&(null==e||!!(t.type&e))}const Y="[^/]+?",X={sensitive:!1,strict:!1,start:!0,end:!0},q=/[.+*?^${}()[\]/\\]/g;function K(t,e){const n=a({},X,e),r=[];let i=n.start?"^":"";const o=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(i+="/");for(let e=0;e<a.length;e++){const r=a[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(q,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const u=l||Y;if(u!==Y){s+=10;try{new RegExp(`(${u})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+h.message)}}let d=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(d=c&&a.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),i+=d,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===u&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function c(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n}function l(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,c=o in e?e[o]:"";if(u(c)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const l=u(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n||"/"}return{re:s,score:r,keys:o,parse:c,stringify:l}}function J(t,e){let n=0;while(n<t.length&&n<e.length){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Z(t,e){let n=0;const r=t.score,i=e.score;while(n<r.length&&n<i.length){const t=J(r[n],i[n]);if(t)return t;n++}if(1===Math.abs(i.length-r.length)){if(Q(r))return 1;if(Q(i))return-1}return i.length-r.length}function Q(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${l}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,c=0,l="",u="";function h(){l&&(0===n?o.push({type:0,value:l}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:l,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),l="")}function d(){l+=a}while(c<t.length)if(a=t[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),s()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:et.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,u="";break;default:e("Unknown state");break}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${l}"`),h(),s(),i}function rt(t,e,n){const r=K(nt(t.path),n);const i=a(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf===!e.record.aliasOf&&e.children.push(i),i}function it(t,e){const n=[],r=new Map;function i(t){return r.get(t)}function o(t,n,r){const i=!r,c=st(t);c.aliasOf=r&&r.record;const h=ut(e,t),d=[c];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},c,{components:r?r.record.components:c.components,path:t,aliasOf:r?r.record:c}))}let f,p;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&r+a)}if(f=rt(e,n,h),r?r.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&t.name&&!ct(f)&&s(t.name)),c.children){const t=c.children;for(let e=0;e<t.length;e++)o(t[e],f,r&&r.children[e])}r=r||f,(f.record.components&&Object.keys(f.record.components).length||f.record.name||f.record.redirect)&&u(f)}return p?()=>{s(p)}:l}function s(t){if(H(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function c(){return n}function u(t){let e=0;while(e<n.length&&Z(t,n[e])>=0&&(t.record.path!==n[e].record.path||!ht(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!ct(t)&&r.set(t.record.name,t)}function h(t,e){let i,o,s,c={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw $(1,{location:t});0,s=i.record.name,c=a(ot(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,i.keys.map((t=>t.name)))),o=i.stringify(c)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(c=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw $(1,{location:t,currentLocation:e});s=i.record.name,c=a({},e.params,t.params),o=i.stringify(c)}const l=[];let u=i;while(u)l.unshift(u.record),u=u.parent;return{name:s,path:o,params:c,matched:l,meta:lt(l)}}return e=ut({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:h,removeRoute:s,getRoutes:c,getRecordMatcher:i}}function ot(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]="boolean"===typeof n?n:n[r];return e}function ct(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function lt(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ut(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function ht(t,e){return e.children.some((e=>e===t||ht(t,e)))}const dt=/#/g,ft=/&/g,pt=/\//g,gt=/=/g,mt=/\?/g,yt=/\+/g,wt=/%5B/g,bt=/%5D/g,vt=/%5E/g,Et=/%60/g,At=/%7B/g,Ct=/%7C/g,St=/%7D/g,_t=/%20/g;function Tt(t){return encodeURI(""+t).replace(Ct,"|").replace(wt,"[").replace(bt,"]")}function It(t){return Tt(t).replace(At,"{").replace(St,"}").replace(vt,"^")}function Mt(t){return Tt(t).replace(yt,"%2B").replace(_t,"+").replace(dt,"%23").replace(ft,"%26").replace(Et,"`").replace(At,"{").replace(St,"}").replace(vt,"^")}function kt(t){return Mt(t).replace(gt,"%3D")}function Nt(t){return Tt(t).replace(dt,"%23").replace(mt,"%3F")}function Ot(t){return null==t?"":Nt(t).replace(pt,"%2F")}function Dt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function xt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],r=(n?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const t=r[i].replace(yt," "),n=t.indexOf("="),o=Dt(n<0?t:t.slice(0,n)),s=n<0?null:Dt(t.slice(n+1));if(o in e){let t=e[o];u(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Rt(t){let e="";for(let n in t){const r=t[n];if(n=kt(n),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}const i=u(r)?r.map((t=>t&&Mt(t))):[r&&Mt(r)];i.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Bt(t){const e={};for(const n in t){const r=t[n];void 0!==r&&(e[n]=u(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}const Lt=Symbol(""),Pt=Symbol(""),Ft=Symbol(""),Ut=Symbol(""),zt=Symbol("");function Ht(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function jt(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const c=t=>{!1===t?a($(4,{from:n,to:e})):t instanceof Error?a(t):z(t)?a($(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"===typeof t&&o.push(t),s())},l=t.call(r&&r.instances[i],e,n,c);let u=Promise.resolve(l);t.length<3&&(u=u.then(c)),u.catch((t=>a(t)))}))}function Vt(t,e,n,r){const i=[];for(const o of t){0;for(const t in o.components){let a=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Wt(a)){const s=a.__vccOpts||a,c=s[e];c&&i.push(jt(c,n,r,o,t))}else{let c=a();0,i.push((()=>c.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const a=s(i)?i.default:i;o.components[t]=a;const c=a.__vccOpts||a,l=c[e];return l&&jt(l,n,r,o,t)()}))))}}}return i}function Wt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function $t(t){const e=(0,r.f3)(Ft),n=(0,r.f3)(Ut),o=(0,r.Fl)((()=>e.resolve((0,i.SU)(t.to)))),s=(0,r.Fl)((()=>{const{matched:t}=o.value,{length:e}=t,r=t[e-1],i=n.matched;if(!r||!i.length)return-1;const s=i.findIndex(y.bind(null,r));if(s>-1)return s;const a=Kt(t[e-2]);return e>1&&Kt(r)===a&&i[i.length-1].path!==a?i.findIndex(y.bind(null,t[e-2])):s})),a=(0,r.Fl)((()=>s.value>-1&&qt(n.params,o.value.params))),c=(0,r.Fl)((()=>s.value>-1&&s.value===n.matched.length-1&&w(n.params,o.value.params)));function u(n={}){return Xt(n)?e[(0,i.SU)(t.replace)?"replace":"push"]((0,i.SU)(t.to)).catch(l):Promise.resolve()}return{route:o,href:(0,r.Fl)((()=>o.value.href)),isActive:a,isExactActive:c,navigate:u}}const Gt=(0,r.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:$t,setup(t,{slots:e}){const n=(0,i.qj)($t(t)),{options:o}=(0,r.f3)(Ft),s=(0,r.Fl)((()=>({[Jt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Jt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const i=e.default&&e.default(n);return t.custom?i:(0,r.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Yt=Gt;function Xt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qt(t,e){for(const n in e){const r=e[n],i=t[n];if("string"===typeof r){if(r!==i)return!1}else if(!u(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}function Kt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=(0,r.f3)(zt),s=(0,r.Fl)((()=>t.route||o.value)),c=(0,r.f3)(Pt,0),l=(0,r.Fl)((()=>{let t=(0,i.SU)(c);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,r.Fl)((()=>s.value.matched[l.value]));(0,r.JJ)(Pt,(0,r.Fl)((()=>l.value+1))),(0,r.JJ)(Lt,u),(0,r.JJ)(zt,s);const h=(0,i.iH)();return(0,r.YP)((()=>[h.value,u.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&y(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const i=s.value,o=t.name,c=u.value,l=c&&c.components[o];if(!l)return Qt(n.default,{Component:l,route:i});const d=c.props[o],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=t=>{t.component.isUnmounted&&(c.instances[o]=null)},g=(0,r.h)(l,a({},f,e,{onVnodeUnmounted:p,ref:h}));return Qt(n.default,{Component:g,route:i})||g}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Zt;function ee(t){const e=it(t.routes,t),n=t.parseQuery||xt,s=t.stringifyQuery||Rt,h=t.history;const d=Ht(),g=Ht(),y=Ht(),w=(0,i.XI)(j);let b=j;o&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=c.bind(null,(t=>""+t)),E=c.bind(null,Ot),C=c.bind(null,Dt);function S(t,n){let r,i;return H(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)}function _(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function T(){return e.getRoutes().map((t=>t.record))}function I(t){return!!e.getRecordMatcher(t)}function O(t,r){if(r=a({},r||w.value),"string"===typeof t){const i=f(n,t,r.path),o=e.resolve({path:i.path},r),s=h.createHref(i.fullPath);return a(i,o,{params:C(o.params),hash:Dt(i.hash),redirectedFrom:void 0,href:s})}let i;if("path"in t)i=a({},t,{path:f(n,t.path,r.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];i=a({},t,{params:E(t.params)}),r.params=E(r.params)}const o=e.resolve(i,r),c=t.hash||"";o.params=v(C(o.params));const l=p(s,a({},t,{hash:It(c),path:o.path})),u=h.createHref(l);return a({fullPath:l,hash:c,query:s===Rt?Bt(t.query):t.query||{}},o,{redirectedFrom:void 0,href:u})}function R(t){return"string"===typeof t?f(n,t,w.value.path):a({},t)}function B(t,e){if(b!==t)return $(8,{from:e,to:t})}function L(t){return U(t)}function P(t){return L(a(R(t),{replace:!0}))}function F(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"===typeof n?n(t):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=R(r):{path:r},r.params={}),a({query:t.query,hash:t.hash,params:"path"in r?{}:t.params},r)}}function U(t,e){const n=b=O(t),r=w.value,i=t.state,o=t.force,c=!0===t.replace,l=F(n);if(l)return U(a(R(l),{state:"object"===typeof l?a({},i,l.state):i,force:o,replace:c}),e||n);const u=n;let h;return u.redirectedFrom=e,!o&&m(s,r,n)&&(h=$(16,{to:u,from:r}),nt(r,r,!0,!1)),(h?Promise.resolve(h):V(u,r)).catch((t=>G(t)?G(t,2)?t:et(t):Q(t,u,r))).then((t=>{if(t){if(G(t,2))return U(a({replace:c},R(t.to),{state:"object"===typeof t.to?a({},i,t.to.state):i,force:o}),e||u)}else t=Y(u,r,!0,c,i);return W(u,r,t),t}))}function z(t,e){const n=B(t,e);return n?Promise.reject(n):Promise.resolve()}function V(t,e){let n;const[r,i,o]=re(t,e);n=Vt(r.reverse(),"beforeRouteLeave",t,e);for(const a of r)a.leaveGuards.forEach((r=>{n.push(jt(r,t,e))}));const s=z.bind(null,t,e);return n.push(s),ne(n).then((()=>{n=[];for(const r of d.list())n.push(jt(r,t,e));return n.push(s),ne(n)})).then((()=>{n=Vt(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(jt(r,t,e))}));return n.push(s),ne(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(u(r.beforeEnter))for(const i of r.beforeEnter)n.push(jt(i,t,e));else n.push(jt(r.beforeEnter,t,e));return n.push(s),ne(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Vt(o,"beforeRouteEnter",t,e),n.push(s),ne(n)))).then((()=>{n=[];for(const r of g.list())n.push(jt(r,t,e));return n.push(s),ne(n)})).catch((t=>G(t,8)?t:Promise.reject(t)))}function W(t,e,n){for(const r of y.list())r(t,e,n)}function Y(t,e,n,r,i){const s=B(t,e);if(s)return s;const c=e===j,l=o?history.state:{};n&&(r||c?h.replace(t.fullPath,a({scroll:c&&l&&l.scroll},i)):h.push(t.fullPath,i)),w.value=t,nt(t,e,n,c),et()}let X;function q(){X||(X=h.listen(((t,e,n)=>{if(!at.listening)return;const r=O(t),i=F(r);if(i)return void U(a(i,{replace:!0}),r).catch(l);b=r;const s=w.value;o&&D(N(s.fullPath,n.delta),M()),V(r,s).catch((t=>G(t,12)?t:G(t,2)?(U(t.to,r).then((t=>{G(t,20)&&!n.delta&&n.type===A.pop&&h.go(-1,!1)})).catch(l),Promise.reject()):(n.delta&&h.go(-n.delta,!1),Q(t,r,s)))).then((t=>{t=t||Y(r,s,!1),t&&(n.delta&&!G(t,8)?h.go(-n.delta,!1):n.type===A.pop&&G(t,20)&&h.go(-1,!1)),W(r,s,t)})).catch(l)})))}let K,J=Ht(),Z=Ht();function Q(t,e,n){et(t);const r=Z.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function tt(){return K&&w.value!==j?Promise.resolve():new Promise(((t,e)=>{J.add([t,e])}))}function et(t){return K||(K=!t,q(),J.list().forEach((([e,n])=>t?n(t):e())),J.reset()),t}function nt(e,n,i,s){const{scrollBehavior:a}=t;if(!o||!a)return Promise.resolve();const c=!i&&x(N(e.fullPath,0))||(s||!i)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>a(e,n,c))).then((t=>t&&k(t))).catch((t=>Q(t,e,n)))}const rt=t=>h.go(t);let ot;const st=new Set,at={currentRoute:w,listening:!0,addRoute:S,removeRoute:_,hasRoute:I,getRoutes:T,resolve:O,options:t,push:L,replace:P,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:d.add,beforeResolve:g.add,afterEach:y.add,onError:Z.add,isReady:tt,install(t){const e=this;t.component("RouterLink",Yt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(w)}),o&&!ot&&w.value===j&&(ot=!0,L(h.location).catch((t=>{0})));const n={};for(const i in j)n[i]=(0,r.Fl)((()=>w.value[i]));t.provide(Ft,e),t.provide(Ut,(0,i.qj)(n)),t.provide(zt,w);const s=t.unmount;st.add(t),t.unmount=function(){st.delete(t),st.size<1&&(b=j,X&&X(),X=null,w.value=j,ot=!1,K=!1),s()}}};return at}function ne(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function re(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>y(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>y(t,a)))||i.push(a))}return[n,r,i]}},2543:function(t,e,n){"use strict";n.d(e,{xk:function(){return Us}});var r={};n.r(r),n.d(r,{code:function(){return Tr},createLink:function(){return Sr},createNode:function(){return Cr},decode:function(){return Mr},encode:function(){return Ir},name:function(){return _r},prepare:function(){return Er},validate:function(){return Ar}});var i={};n.r(i),n.d(i,{abortedError:function(){return Qi},notFoundError:function(){return Zi}});var o={};n.r(o),n.d(o,{code:function(){return vs},decode:function(){return As},encode:function(){return Es},name:function(){return bs}});n(7658);Symbol("TIMEOUT");function s(t){if("function"===typeof t.next)return t;if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function a(){let t,e;const n=new Promise(((n,r)=>{e=n,t=r}));return{promise:n,reject:t,resolve:e}}function c(t,e,n){const r=s(n),i=[],o=[];let c=!1,l=!1,u=0,h=null;function d(){while(o.length>0&&i.length>0){const{resolve:t}=o.shift(),e=i.shift();t({done:!1,value:e})}while(o.length>0&&0===u&&c){const{resolve:t,reject:e}=o.shift();h?(e(h),h=null):t({done:!0,value:void 0})}}async function f(){if(c)d();else if(!l&&!(u+i.length>=t)){l=!0,u++;try{const{done:t,value:e}=await r.next();t?(c=!0,u--,d()):p(e)}catch(e){c=!0,u--,h=e,d()}l=!1,f()}}async function p(t){try{const n=await e(t);i.push(n)}catch(n){c=!0,h=n}u--,d(),f()}async function g(){if(0===i.length){const t=a();return o.push(t),f(),t.promise}const t=i.shift();return f(),{done:!1,value:t}}const m={next:g,[Symbol.asyncIterator]:()=>m};return m}function l(t,e,n){return void 0===e?(e,n)=>n?l(t,e,n):l(t,e):void 0===n?n=>l(t,e,n):c(t,e,n)}var u=n(9437),h=n(7290),d=n(2100),f=(n(3767),n(8585),n(8696),n(2611)),p=n(9329),g=n(5226);const m=["string","number","bigint","symbol"],y=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function w(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(m.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(b(t))return"Buffer";const n=v(t);return n||"Object"}function b(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function v(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(y.includes(e))return e}class E{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}E.uint=new E(0,"uint",!0),E.negint=new E(1,"negint",!0),E.bytes=new E(2,"bytes",!0),E.string=new E(3,"string",!0),E.array=new E(4,"array",!1),E.map=new E(5,"map",!1),E.tag=new E(6,"tag",!1),E.float=new E(7,"float",!0),E.false=new E(7,"false",!0),E.true=new E(7,"true",!0),E.null=new E(7,"null",!0),E.undefined=new E(7,"undefined",!0),E.break=new E(7,"break",!0);class A{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const C=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,S=new TextDecoder,_=new TextEncoder;function T(t){return C&&globalThis.Buffer.isBuffer(t)}function I(t){return t instanceof Uint8Array?T(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const M=C?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):L(t,e,n):(t,e,n)=>n-e>64?S.decode(t.subarray(e,n)):L(t,e,n),k=C?t=>t.length>64?globalThis.Buffer.from(t):B(t):t=>t.length>64?_.encode(t):B(t),N=t=>Uint8Array.from(t),O=C?(t,e,n)=>T(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),D=C?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),I(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let r=0;for(let i of t)r+i.length>n.length&&(i=i.subarray(0,n.length-r)),n.set(i,r),r+=i.length;return n},x=C?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function R(t,e){if(T(t)&&T(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}function B(t,e=1/0){let n;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function L(t,e,n){const r=[];while(e<n){const i=t[e];let o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=n){let n,r,a,c;switch(s){case 1:i<128&&(o=i);break;case 2:n=t[e+1],128===(192&n)&&(c=(31&i)<<6|63&n,c>127&&(o=c));break;case 3:n=t[e+1],r=t[e+2],128===(192&n)&&128===(192&r)&&(c=(15&i)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=t[e+1],r=t[e+2],a=t[e+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(c=(15&i)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),e+=s}return F(r)}const P=4096;function F(t){const e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);let n="",r=0;while(r<e)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}const U=256;class z{constructor(t=U){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];const n=this.cursor+t.length;if(n<=this.maxCursor+1){const n=e.length-(this.maxCursor-this.cursor)-1;e.set(t,n)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=x(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=O(n,0,this.cursor)}else e=D(this.chunks,this.cursor);return t&&this.reset(),e}}const H="CBOR decode error:",j="CBOR encode error:",V=[];function W(t,e,n){if(t.length-e<n)throw new Error(`${H} not enough data for type`)}V[23]=1,V[24]=2,V[25]=3,V[26]=5,V[27]=9;const $=[24,256,65536,4294967296,BigInt("18446744073709551616")];function G(t,e,n){W(t,e,1);const r=t[e];if(!0===n.strict&&r<$[0])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);return r}function Y(t,e,n){W(t,e,2);const r=t[e]<<8|t[e+1];if(!0===n.strict&&r<$[1])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);return r}function X(t,e,n){W(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===n.strict&&r<$[2])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);return r}function q(t,e,n){W(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(r)<<BigInt(32))+BigInt(i);if(!0===n.strict&&o<$[3])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(!0===n.allowBigInt)return o;throw new Error(`${H} integers outside of the safe integer range are not supported`)}function K(t,e,n,r){return new A(E.uint,G(t,e+1,r),2)}function J(t,e,n,r){return new A(E.uint,Y(t,e+1,r),3)}function Z(t,e,n,r){return new A(E.uint,X(t,e+1,r),5)}function Q(t,e,n,r){return new A(E.uint,q(t,e+1,r),9)}function tt(t,e){return et(t,0,e.value)}function et(t,e,n){if(n<$[0]){const r=Number(n);t.push([e|r])}else if(n<$[1]){const r=Number(n);t.push([24|e,r])}else if(n<$[2]){const r=Number(n);t.push([25|e,r>>>8,255&r])}else if(n<$[3]){const r=Number(n);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<$[4]))throw new Error(`${H} encountered BigInt larger than allowable range`);{const n=[27|e,0,0,0,0,0,0,0];let i=Number(r&BigInt(4294967295)),o=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&i,i>>=8,n[7]=255&i,i>>=8,n[6]=255&i,i>>=8,n[5]=255&i,n[4]=255&o,o>>=8,n[3]=255&o,o>>=8,n[2]=255&o,o>>=8,n[1]=255&o,t.push(n)}}}function nt(t,e,n,r){return new A(E.negint,-1-G(t,e+1,r),2)}function rt(t,e,n,r){return new A(E.negint,-1-Y(t,e+1,r),3)}function it(t,e,n,r){return new A(E.negint,-1-X(t,e+1,r),5)}tt.encodedSize=function(t){return et.encodedSize(t.value)},et.encodedSize=function(t){return t<$[0]?1:t<$[1]?2:t<$[2]?3:t<$[3]?5:9},tt.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const ot=BigInt(-1),st=BigInt(1);function at(t,e,n,r){const i=q(t,e+1,r);if("bigint"!==typeof i){const t=-1-i;if(t>=Number.MIN_SAFE_INTEGER)return new A(E.negint,t,9)}if(!0!==r.allowBigInt)throw new Error(`${H} integers outside of the safe integer range are not supported`);return new A(E.negint,ot-BigInt(i),9)}function ct(t,e){const n=e.value,r="bigint"===typeof n?n*ot-st:-1*n-1;et(t,e.type.majorEncoded,r)}function lt(t,e,n,r){W(t,e,n+r);const i=O(t,e+n,e+n+r);return new A(E.bytes,i,n+r)}function ut(t,e,n,r){return lt(t,e,1,n)}function ht(t,e,n,r){return lt(t,e,2,G(t,e+1,r))}function dt(t,e,n,r){return lt(t,e,3,Y(t,e+1,r))}function ft(t,e,n,r){return lt(t,e,5,X(t,e+1,r))}function pt(t,e,n,r){const i=q(t,e+1,r);if("bigint"===typeof i)throw new Error(`${H} 64-bit integer bytes lengths not supported`);return lt(t,e,9,i)}function gt(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===E.string?k(t.value):t.value),t.encodedBytes}function mt(t,e){const n=gt(e);et(t,e.type.majorEncoded,n.length),t.push(n)}function yt(t,e){return t.length<e.length?-1:t.length>e.length?1:R(t,e)}function wt(t,e,n,r,i){const o=n+r;W(t,e,o);const s=new A(E.string,M(t,e+n,e+o),o);return!0===i.retainStringBytes&&(s.byteValue=O(t,e+n,e+o)),s}function bt(t,e,n,r){return wt(t,e,1,n,r)}function vt(t,e,n,r){return wt(t,e,2,G(t,e+1,r),r)}function Et(t,e,n,r){return wt(t,e,3,Y(t,e+1,r),r)}function At(t,e,n,r){return wt(t,e,5,X(t,e+1,r),r)}function Ct(t,e,n,r){const i=q(t,e+1,r);if("bigint"===typeof i)throw new Error(`${H} 64-bit integer string lengths not supported`);return wt(t,e,9,i,r)}ct.encodedSize=function(t){const e=t.value,n="bigint"===typeof e?e*ot-st:-1*e-1;return n<$[0]?1:n<$[1]?2:n<$[2]?3:n<$[3]?5:9},ct.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},mt.encodedSize=function(t){const e=gt(t);return et.encodedSize(e.length)+e.length},mt.compareTokens=function(t,e){return yt(gt(t),gt(e))};const St=mt;function _t(t,e,n,r){return new A(E.array,r,n)}function Tt(t,e,n,r){return _t(t,e,1,n)}function It(t,e,n,r){return _t(t,e,2,G(t,e+1,r))}function Mt(t,e,n,r){return _t(t,e,3,Y(t,e+1,r))}function kt(t,e,n,r){return _t(t,e,5,X(t,e+1,r))}function Nt(t,e,n,r){const i=q(t,e+1,r);if("bigint"===typeof i)throw new Error(`${H} 64-bit integer array lengths not supported`);return _t(t,e,9,i)}function Ot(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${H} indefinite length items not allowed`);return _t(t,e,1,1/0)}function Dt(t,e){et(t,E.array.majorEncoded,e.value)}function xt(t,e,n,r){return new A(E.map,r,n)}function Rt(t,e,n,r){return xt(t,e,1,n)}function Bt(t,e,n,r){return xt(t,e,2,G(t,e+1,r))}function Lt(t,e,n,r){return xt(t,e,3,Y(t,e+1,r))}function Pt(t,e,n,r){return xt(t,e,5,X(t,e+1,r))}function Ft(t,e,n,r){const i=q(t,e+1,r);if("bigint"===typeof i)throw new Error(`${H} 64-bit integer map lengths not supported`);return xt(t,e,9,i)}function Ut(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${H} indefinite length items not allowed`);return xt(t,e,1,1/0)}function zt(t,e){et(t,E.map.majorEncoded,e.value)}function Ht(t,e,n,r){return new A(E.tag,n,1)}function jt(t,e,n,r){return new A(E.tag,G(t,e+1,r),2)}function Vt(t,e,n,r){return new A(E.tag,Y(t,e+1,r),3)}function Wt(t,e,n,r){return new A(E.tag,X(t,e+1,r),5)}function $t(t,e,n,r){return new A(E.tag,q(t,e+1,r),9)}function Gt(t,e){et(t,E.tag.majorEncoded,e.value)}Dt.compareTokens=tt.compareTokens,Dt.encodedSize=function(t){return et.encodedSize(t.value)},zt.compareTokens=tt.compareTokens,zt.encodedSize=function(t){return et.encodedSize(t.value)},Gt.compareTokens=tt.compareTokens,Gt.encodedSize=function(t){return et.encodedSize(t.value)};const Yt=20,Xt=21,qt=22,Kt=23;function Jt(t,e,n,r){if(!1===r.allowUndefined)throw new Error(`${H} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new A(E["null"],null,1):new A(E.undefined,void 0,1)}function Zt(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${H} indefinite length items not allowed`);return new A(E["break"],void 0,1)}function Qt(t,e,n){if(n){if(!1===n.allowNaN&&Number.isNaN(t))throw new Error(`${H} NaN values are not supported`);if(!1===n.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${H} Infinity values are not supported`)}return new A(E.float,t,e)}function te(t,e,n,r){return Qt(ce(t,e+1),3,r)}function ee(t,e,n,r){return Qt(ue(t,e+1),5,r)}function ne(t,e,n,r){return Qt(de(t,e+1),9,r)}function re(t,e,n){const r=e.value;if(!1===r)t.push([E.float.majorEncoded|Yt]);else if(!0===r)t.push([E.float.majorEncoded|Xt]);else if(null===r)t.push([E.float.majorEncoded|qt]);else if(void 0===r)t.push([E.float.majorEncoded|Kt]);else{let e,i=!1;n&&!0===n.float64||(ae(r),e=ce(se,1),r===e||Number.isNaN(r)?(se[0]=249,t.push(se.slice(0,3)),i=!0):(le(r),e=ue(se,1),r===e&&(se[0]=250,t.push(se.slice(0,5)),i=!0))),i||(he(r),e=de(se,1),se[0]=251,t.push(se.slice(0,9)))}}re.encodedSize=function(t,e){const n=t.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!e||!0!==e.float64){ae(n);let t=ce(se,1);if(n===t||Number.isNaN(n))return 3;if(le(n),t=ue(se,1),n===t)return 5}return 9};const ie=new ArrayBuffer(9),oe=new DataView(ie,1),se=new Uint8Array(ie,0);function ae(t){if(t===1/0)oe.setUint16(0,31744,!1);else if(t===-1/0)oe.setUint16(0,64512,!1);else if(Number.isNaN(t))oe.setUint16(0,32256,!1);else{oe.setFloat32(0,t);const e=oe.getUint32(0),n=(2139095040&e)>>23,r=8388607&e;if(255===n)oe.setUint16(0,31744,!1);else if(0===n)oe.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=n-127;t<-24?oe.setUint16(0,0):t<-14?oe.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):oe.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function ce(t,e){if(t.length-e<2)throw new Error(`${H} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,i=1023&n;let o;return o=0===r?i*2**-24:31!==r?(i+1024)*2**(r-25):0===i?1/0:NaN,32768&n?-o:o}function le(t){oe.setFloat32(0,t,!1)}function ue(t,e){if(t.length-e<4)throw new Error(`${H} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function he(t){oe.setFloat64(0,t,!1)}function de(t,e){if(t.length-e<8)throw new Error(`${H} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}function fe(t,e,n){throw new Error(`${H} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function pe(t){return()=>{throw new Error(`${H} ${t}`)}}re.compareTokens=tt.compareTokens;const ge=[];for(let $s=0;$s<=23;$s++)ge[$s]=fe;ge[24]=K,ge[25]=J,ge[26]=Z,ge[27]=Q,ge[28]=fe,ge[29]=fe,ge[30]=fe,ge[31]=fe;for(let $s=32;$s<=55;$s++)ge[$s]=fe;ge[56]=nt,ge[57]=rt,ge[58]=it,ge[59]=at,ge[60]=fe,ge[61]=fe,ge[62]=fe,ge[63]=fe;for(let $s=64;$s<=87;$s++)ge[$s]=ut;ge[88]=ht,ge[89]=dt,ge[90]=ft,ge[91]=pt,ge[92]=fe,ge[93]=fe,ge[94]=fe,ge[95]=pe("indefinite length bytes/strings are not supported");for(let $s=96;$s<=119;$s++)ge[$s]=bt;ge[120]=vt,ge[121]=Et,ge[122]=At,ge[123]=Ct,ge[124]=fe,ge[125]=fe,ge[126]=fe,ge[127]=pe("indefinite length bytes/strings are not supported");for(let $s=128;$s<=151;$s++)ge[$s]=Tt;ge[152]=It,ge[153]=Mt,ge[154]=kt,ge[155]=Nt,ge[156]=fe,ge[157]=fe,ge[158]=fe,ge[159]=Ot;for(let $s=160;$s<=183;$s++)ge[$s]=Rt;ge[184]=Bt,ge[185]=Lt,ge[186]=Pt,ge[187]=Ft,ge[188]=fe,ge[189]=fe,ge[190]=fe,ge[191]=Ut;for(let $s=192;$s<=215;$s++)ge[$s]=Ht;ge[216]=jt,ge[217]=Vt,ge[218]=Wt,ge[219]=$t,ge[220]=fe,ge[221]=fe,ge[222]=fe,ge[223]=fe;for(let $s=224;$s<=243;$s++)ge[$s]=pe("simple values are not supported");ge[244]=fe,ge[245]=fe,ge[246]=fe,ge[247]=Jt,ge[248]=pe("simple values are not supported"),ge[249]=te,ge[250]=ee,ge[251]=ne,ge[252]=fe,ge[253]=fe,ge[254]=fe,ge[255]=Zt;const me=[];for(let $s=0;$s<24;$s++)me[$s]=new A(E.uint,$s,1);for(let $s=-1;$s>=-24;$s--)me[31-$s]=new A(E.negint,$s,1);function ye(t){switch(t.type){case E["false"]:return N([244]);case E["true"]:return N([245]);case E["null"]:return N([246]);case E.bytes:return t.value.length?void 0:N([64]);case E.string:return""===t.value?N([96]):void 0;case E.array:return 0===t.value?N([128]):void 0;case E.map:return 0===t.value?N([160]):void 0;case E.uint:return t.value<24?N([Number(t.value)]):void 0;case E.negint:if(t.value>=-24)return N([31-Number(t.value)])}}me[64]=new A(E.bytes,new Uint8Array(0),1),me[96]=new A(E.string,"",1),me[128]=new A(E.array,0,1),me[160]=new A(E.map,0,1),me[244]=new A(E["false"],!1,1),me[245]=new A(E["true"],!0,1),me[246]=new A(E["null"],null,1);const we={float64:!1,mapSorter:Ie,quickEncodeToken:ye};function be(){const t=[];return t[E.uint.major]=tt,t[E.negint.major]=ct,t[E.bytes.major]=mt,t[E.string.major]=St,t[E.array.major]=Dt,t[E.map.major]=zt,t[E.tag.major]=Gt,t[E.float.major]=re,t}const ve=be(),Ee=new z;class Ae{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${j} object contains circular references`);return new Ae(e,t)}}const Ce={null:new A(E["null"],null),undefined:new A(E.undefined,void 0),true:new A(E["true"],!0),false:new A(E["false"],!1),emptyArray:new A(E.array,0),emptyMap:new A(E.map,0)},Se={number(t,e,n,r){return Number.isInteger(t)&&Number.isSafeInteger(t)?new A(t>=0?E.uint:E.negint,t):new A(E.float,t)},bigint(t,e,n,r){return t>=BigInt(0)?new A(E.uint,t):new A(E.negint,t)},Uint8Array(t,e,n,r){return new A(E.bytes,t)},string(t,e,n,r){return new A(E.string,t)},boolean(t,e,n,r){return t?Ce.true:Ce.false},null(t,e,n,r){return Ce.null},undefined(t,e,n,r){return Ce.undefined},ArrayBuffer(t,e,n,r){return new A(E.bytes,new Uint8Array(t))},DataView(t,e,n,r){return new A(E.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,n,r){if(!t.length)return!0===n.addBreakTokens?[Ce.emptyArray,new A(E["break"])]:Ce.emptyArray;r=Ae.createCheck(r,t);const i=[];let o=0;for(const s of t)i[o++]=_e(s,n,r);return n.addBreakTokens?[new A(E.array,t.length),i,new A(E["break"])]:[new A(E.array,t.length),i]},Object(t,e,n,r){const i="Object"!==e,o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return!0===n.addBreakTokens?[Ce.emptyMap,new A(E["break"])]:Ce.emptyMap;r=Ae.createCheck(r,t);const a=[];let c=0;for(const l of o)a[c++]=[_e(l,n,r),_e(i?t.get(l):t[l],n,r)];return Te(a,n),n.addBreakTokens?[new A(E.map,s),a,new A(E["break"])]:[new A(E.map,s),a]}};Se.Map=Se.Object,Se.Buffer=Se.Uint8Array;for(const $s of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Se[`${$s}Array`]=Se.DataView;function _e(t,e={},n){const r=w(t),i=e&&e.typeEncoders&&e.typeEncoders[r]||Se[r];if("function"===typeof i){const o=i(t,r,e,n);if(null!=o)return o}const o=Se[r];if(!o)throw new Error(`${j} unsupported type: ${r}`);return o(t,r,e,n)}function Te(t,e){e.mapSorter&&t.sort(e.mapSorter)}function Ie(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],r=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==r.type)return n.type.compare(r.type);const i=n.type.major,o=ve[i].compareTokens(n,r);return 0===o&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function Me(t,e,n,r){if(Array.isArray(e))for(const i of e)Me(t,i,n,r);else n[e.type.major](t,e,r)}function ke(t,e,n){const r=_e(t,n);if(!Array.isArray(r)&&n.quickEncodeToken){const t=n.quickEncodeToken(r);if(t)return t;const i=e[r.type.major];if(i.encodedSize){const t=i.encodedSize(r,n),e=new z(t);if(i(e,r,n),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return I(e.chunks[0])}}return Ee.reset(),Me(Ee,r,e,n),Ee.toBytes(!0)}function Ne(t,e){return e=Object.assign({},we,e),ke(t,ve,e)}const Oe={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class De{constructor(t,e={}){this.pos=0,this.data=t,this.options=e}done(){return this.pos>=this.data.length}next(){const t=this.data[this.pos];let e=me[t];if(void 0===e){const n=ge[t];if(!n)throw new Error(`${H} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const r=31&t;e=n(this.data,this.pos,r,this.options)}return this.pos+=e.encodedLength,e}}const xe=Symbol.for("DONE"),Re=Symbol.for("BREAK");function Be(t,e,n){const r=[];for(let i=0;i<t.value;i++){const o=Pe(e,n);if(o===Re){if(t.value===1/0)break;throw new Error(`${H} got unexpected break to lengthed array`)}if(o===xe)throw new Error(`${H} found array but not enough entries (got ${i}, expected ${t.value})`);r[i]=o}return r}function Le(t,e,n){const r=!0===n.useMaps,i=r?void 0:{},o=r?new Map:void 0;for(let s=0;s<t.value;s++){const a=Pe(e,n);if(a===Re){if(t.value===1/0)break;throw new Error(`${H} got unexpected break to lengthed map`)}if(a===xe)throw new Error(`${H} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${H} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&o.has(a)||!r&&a in i))throw new Error(`${H} found repeat map key "${a}"`);const c=Pe(e,n);if(c===xe)throw new Error(`${H} found map but not enough entries (got ${s} [no value], expected ${t.value})`);r?o.set(a,c):i[a]=c}return r?o:i}function Pe(t,e){if(t.done())return xe;const n=t.next();if(n.type===E["break"])return Re;if(n.type.terminal)return n.value;if(n.type===E.array)return Be(n,t,e);if(n.type===E.map)return Le(n,t,e);if(n.type===E.tag){if(e.tags&&"function"===typeof e.tags[n.value]){const r=Pe(t,e);return e.tags[n.value](r)}throw new Error(`${H} tag not supported (${n.value})`)}throw new Error("unsupported")}function Fe(t,e){if(!(t instanceof Uint8Array))throw new Error(`${H} data to decode must be a Uint8Array`);e=Object.assign({},Oe,e);const n=e.tokenizer||new De(t,e),r=Pe(n,e);if(r===xe)throw new Error(`${H} did not find any content to decode`);if(r===Re)throw new Error(`${H} got unexpected break`);if(!n.done())throw new Error(`${H} too many terminals, data makes no sense`);return r}const Ue=42;function ze(t){if(t.asCID!==t)return null;const e=p.k.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new A(E.tag,Ue),new A(E.bytes,n)]}function He(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function je(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Ve={float64:!0,typeEncoders:{Object:ze,undefined:He,number:je}};function We(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return p.k.decode(t.subarray(1))}const $e={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};$e.tags[Ue]=We;const Ge=113,Ye=t=>Ne(t,Ve),Xe=t=>Fe(t,$e),qe={SHA2_256:18,LENGTH:32,DAG_PB:112};async function Ke(t){const e=await t.upTo(8),n=f.decode(e);return t.seek(f.decode.bytes),n}async function Je(t){const e=await Ke(t);if(0===e)throw new Error("Invalid CAR header (zero length)");const n=await t.exactly(e);t.seek(e);const r=Xe(n);if(null==r||Array.isArray(r)||"object"!==typeof r)throw new Error("Invalid CAR header format");if(1!==r.version){if("string"===typeof r.version)throw new Error(`Invalid CAR version: "${r.version}"`);throw new Error(`Invalid CAR version: ${r.version}`)}if(!Array.isArray(r.roots))throw new Error("Invalid CAR header format");if(Object.keys(r).filter((t=>"roots"!==t&&"version"!==t)).length)throw new Error("Invalid CAR header format");return r}async function Ze(t){const e=await t.upTo(8);f.decode(e);const n=f.decode.bytes,r=f.decode(e.subarray(f.decode.bytes)),i=f.decode.bytes,o=n+i+r,s=await t.exactly(o);return t.seek(o),s}async function Qe(t){const e=await t.exactly(2);if(e[0]===qe.SHA2_256&&e[1]===qe.LENGTH){const e=await t.exactly(34);t.seek(34);const n=g.Jx(e);return p.k.create(0,qe.DAG_PB,n)}const n=await Ke(t);if(1!==n)throw new Error(`Unexpected CID version (${n})`);const r=await Ke(t),i=await Ze(t),o=g.Jx(i);return p.k.create(n,r,o)}async function tn(t){const e=t.pos;let n=await Ke(t);if(0===n)throw new Error("Invalid CAR section (zero length)");n+=t.pos-e;const r=await Qe(t),i=n-(t.pos-e);return{cid:r,length:n,blockLength:i}}async function en(t){const{cid:e,blockLength:n}=await tn(t),r=await t.exactly(n);return t.seek(n),{bytes:r,cid:e}}async function nn(t){const e=t.pos,{cid:n,length:r,blockLength:i}=await tn(t),o={cid:n,length:r,blockLength:i,offset:e,blockOffset:t.pos};return t.seek(o.blockLength),o}function rn(t){const e=Je(t);return{header:()=>e,async*blocks(){await e;while((await t.upTo(8)).length>0)yield await en(t)},async*blocksIndex(){await e;while((await t.upTo(8)).length>0)yield await nn(t)}}}function on(t){let e=0;return{async upTo(n){return t.subarray(e,e+Math.min(n,t.length-e))},async exactly(n){if(n>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+n)},seek(t){e+=t},get pos(){return e}}}function sn(t){let e=0,n=0,r=0,i=new Uint8Array(0);const o=async e=>{n=i.length-r;const o=[i.subarray(r)];while(n<e){const e=await t();if(null==e)break;n<0?e.length>n&&o.push(e.subarray(-n)):o.push(e),n+=e.length}i=new Uint8Array(o.reduce(((t,e)=>t+e.length),0));let s=0;for(const t of o)i.set(t,s),s+=t.length;r=0};return{async upTo(t){return i.length-r<t&&await o(t),i.subarray(r,r+Math.min(i.length-r,t))},async exactly(t){if(i.length-r<t&&await o(t),i.length-r<t)throw new Error("Unexpected end of data");return i.subarray(r,r+t)},seek(t){e+=t,r+=t},get pos(){return e}}}function an(t){const e=t[Symbol.asyncIterator]();async function n(){const t=await e.next();return t.done?null:t.value}return sn(n)}class cn{constructor(t,e,n){this._version=t,this._roots=e,this._blocks=n,this._keys=n.map((t=>t.cid.toString()))}get version(){return this._version}async getRoots(){return this._roots}async has(t){return this._keys.indexOf(t.toString())>-1}async get(t){const e=this._keys.indexOf(t.toString());return e>-1?this._blocks[e]:void 0}async*blocks(){for(const t of this._blocks)yield t}async*cids(){for(const t of this._blocks)yield t.cid}static async fromBytes(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return ln(on(t))}static async fromIterable(t){if(!t||"function"!==typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return ln(an(t))}}async function ln(t){const e=rn(t),{version:n,roots:r}=await e.header(),i=[];for await(const o of e.blocks())i.push(o);return new cn(n,r,i)}class un{constructor(t,e,n){this._version=t,this._roots=e,this._iterator=n}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeIndexerComplete(bytesReader(t))}static async fromIterable(t){if(!t||"function"!==typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return decodeIndexerComplete(asyncIterableReader(t))}}class hn{constructor(t,e,n){this._version=t,this._roots=e,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class dn extends hn{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(t){const{version:e,roots:n,iterator:r}=await pn(t);return new dn(e,n,r)}static async fromIterable(t){const{version:e,roots:n,iterator:r}=await gn(t);return new dn(e,n,r)}}class fn extends(null){[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;const t=this._iterable[Symbol.asyncIterator]();return{async next(){const e=await t.next();return e.done?e:{done:!1,value:e.value.cid}}}}static async fromBytes(t){const{version:e,roots:n,iterator:r}=await pn(t);return new fn(e,n,r)}static async fromIterable(t){const{version:e,roots:n,iterator:r}=await gn(t);return new fn(e,n,r)}}async function pn(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return mn(on(t))}async function gn(t){if(!t||"function"!==typeof t[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return mn(an(t))}async function mn(t){const e=rn(t),{version:n,roots:r}=await e.header();return{version:n,roots:r,iterator:e.blocks()}}function yn(t){const e=Ye({version:1,roots:t}),n=f.encode(e.length),r=new Uint8Array(n.length+e.length);return r.set(n,0),r.set(e,n.length),r}function wn(t){return{async setRoots(e){const n=yn(e);await t.write(n)},async writeBlock(e){const{cid:n,bytes:r}=e;await t.write(new Uint8Array(f.encode(n.bytes.length+r.length))),await t.write(n.bytes),r.length&&await t.write(r)},async close(){return t.end()}}}function bn(){}function vn(){const t=[];let e=null,n=bn,r=!1,i=null,o=bn;const s=()=>(e||(e=new Promise((t=>{n=()=>{e=null,n=bn,t()}}))),e),a={write(e){t.push(e);const n=s();return o(),n},async end(){r=!0;const t=s();return o(),t}},c={async next(){const e=t.shift();return e?(0===t.length&&n(),{done:!1,value:e}):r?(n(),{done:!0,value:void 0}):(i||(i=new Promise((t=>{o=()=>(i=null,o=bn,t(c.next()))}))),i)}};return{writer:a,iterator:c}}class En{constructor(t,e){this._encoder=e,this._mutex=e.setRoots(t),this._ended=!1}async put(t){if(!(t.bytes instanceof Uint8Array)||!t.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const e=p.k.asCID(t.cid);if(!e)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:e,bytes:t.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(t){t=Sn(t);const{encoder:e,iterator:n}=Cn(),r=new En(t,e),i=new An(n);return{writer:r,out:i}}static createAppender(){const{encoder:t,iterator:e}=Cn();t.setRoots=()=>Promise.resolve();const n=new En([],t),r=new An(e);return{writer:n,out:r}}static async updateRootsInBytes(t,e){const n=on(t);await Je(n);const r=yn(e);if(n.pos!==r.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${r.length} bytes)`);return t.set(r,0),t}}class An{constructor(t){this._iterator=t}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function Cn(){const t=vn(),{writer:e,iterator:n}=t,r=wn(e);return{encoder:r,iterator:n}}function Sn(t){if(void 0===t)return[];if(!Array.isArray(t)){const e=p.k.asCID(t);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");return[e]}const e=[];for(const n of t){const t=p.k.asCID(n);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(t)}return e}var _n=n(8806),Tn=n(535),In=Tn,Mn=n(1919),kn=n(8212),Nn=n(2493),On=n(716);function Dn(t){const e=new Array(4);for(let n=0;n<4;n++)e[n]=255&t,t>>=8;return new Uint8Array(e)}(0,kn.D)({name:"murmur3-32",code:35,encode:t=>Dn(On.x86.hash32(t))});const xn=(0,kn.D)({name:"murmur3-128",code:34,encode:t=>Nn.aI.fromHex(On.x64.hash128(t))});async function Rn(t){return(await xn.encode(t)).slice(0,8).reverse()}const Bn={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Mn.sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:Rn,hamtHashCode:34,hamtBucketBits:8};var Ln=(t={})=>{const e=In.bind({ignoreUndefined:!0});return e(Bn,t)},Pn=n(9998),Fn=n(6425);const Un=Fn.Reader,zn=Fn.Writer,Hn=Fn.util,jn=Fn.roots["ipfs-unixfs"]||(Fn.roots["ipfs-unixfs"]={}),Vn=jn.Data=(()=>{function t(t){if(this.blocksizes=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.Type=0,t.prototype.Data=Hn.newBuffer([]),t.prototype.filesize=Hn.Long?Hn.Long.fromBits(0,0,!0):0,t.prototype.blocksizes=Hn.emptyArray,t.prototype.hashType=Hn.Long?Hn.Long.fromBits(0,0,!0):0,t.prototype.fanout=Hn.Long?Hn.Long.fromBits(0,0,!0):0,t.prototype.mode=0,t.prototype.mtime=null,t.encode=function(t,e){if(e||(e=zn.create()),e.uint32(8).int32(t.Type),null!=t.Data&&Object.hasOwnProperty.call(t,"Data")&&e.uint32(18).bytes(t.Data),null!=t.filesize&&Object.hasOwnProperty.call(t,"filesize")&&e.uint32(24).uint64(t.filesize),null!=t.blocksizes&&t.blocksizes.length)for(var n=0;n<t.blocksizes.length;++n)e.uint32(32).uint64(t.blocksizes[n]);return null!=t.hashType&&Object.hasOwnProperty.call(t,"hashType")&&e.uint32(40).uint64(t.hashType),null!=t.fanout&&Object.hasOwnProperty.call(t,"fanout")&&e.uint32(48).uint64(t.fanout),null!=t.mode&&Object.hasOwnProperty.call(t,"mode")&&e.uint32(56).uint32(t.mode),null!=t.mtime&&Object.hasOwnProperty.call(t,"mtime")&&jn.UnixTime.encode(t.mtime,e.uint32(66).fork()).ldelim(),e},t.decode=function(t,e){t instanceof Un||(t=Un.create(t));var n=void 0===e?t.len:t.pos+e,r=new jn.Data;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:r.Type=t.int32();break;case 2:r.Data=t.bytes();break;case 3:r.filesize=t.uint64();break;case 4:if(r.blocksizes&&r.blocksizes.length||(r.blocksizes=[]),2===(7&i)){var o=t.uint32()+t.pos;while(t.pos<o)r.blocksizes.push(t.uint64())}else r.blocksizes.push(t.uint64());break;case 5:r.hashType=t.uint64();break;case 6:r.fanout=t.uint64();break;case 7:r.mode=t.uint32();break;case 8:r.mtime=jn.UnixTime.decode(t,t.uint32());break;default:t.skipType(7&i);break}}if(!r.hasOwnProperty("Type"))throw Hn.ProtocolError("missing required 'Type'",{instance:r});return r},t.fromObject=function(t){if(t instanceof jn.Data)return t;var e=new jn.Data;switch(t.Type){case"Raw":case 0:e.Type=0;break;case"Directory":case 1:e.Type=1;break;case"File":case 2:e.Type=2;break;case"Metadata":case 3:e.Type=3;break;case"Symlink":case 4:e.Type=4;break;case"HAMTShard":case 5:e.Type=5;break}if(null!=t.Data&&("string"===typeof t.Data?Hn.base64.decode(t.Data,e.Data=Hn.newBuffer(Hn.base64.length(t.Data)),0):t.Data.length&&(e.Data=t.Data)),null!=t.filesize&&(Hn.Long?(e.filesize=Hn.Long.fromValue(t.filesize)).unsigned=!0:"string"===typeof t.filesize?e.filesize=parseInt(t.filesize,10):"number"===typeof t.filesize?e.filesize=t.filesize:"object"===typeof t.filesize&&(e.filesize=new Hn.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");e.blocksizes=[];for(var n=0;n<t.blocksizes.length;++n)Hn.Long?(e.blocksizes[n]=Hn.Long.fromValue(t.blocksizes[n])).unsigned=!0:"string"===typeof t.blocksizes[n]?e.blocksizes[n]=parseInt(t.blocksizes[n],10):"number"===typeof t.blocksizes[n]?e.blocksizes[n]=t.blocksizes[n]:"object"===typeof t.blocksizes[n]&&(e.blocksizes[n]=new Hn.LongBits(t.blocksizes[n].low>>>0,t.blocksizes[n].high>>>0).toNumber(!0))}if(null!=t.hashType&&(Hn.Long?(e.hashType=Hn.Long.fromValue(t.hashType)).unsigned=!0:"string"===typeof t.hashType?e.hashType=parseInt(t.hashType,10):"number"===typeof t.hashType?e.hashType=t.hashType:"object"===typeof t.hashType&&(e.hashType=new Hn.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),null!=t.fanout&&(Hn.Long?(e.fanout=Hn.Long.fromValue(t.fanout)).unsigned=!0:"string"===typeof t.fanout?e.fanout=parseInt(t.fanout,10):"number"===typeof t.fanout?e.fanout=t.fanout:"object"===typeof t.fanout&&(e.fanout=new Hn.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),null!=t.mode&&(e.mode=t.mode>>>0),null!=t.mtime){if("object"!==typeof t.mtime)throw TypeError(".Data.mtime: object expected");e.mtime=jn.UnixTime.fromObject(t.mtime)}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.blocksizes=[]),e.defaults){if(n.Type=e.enums===String?"Raw":0,e.bytes===String?n.Data="":(n.Data=[],e.bytes!==Array&&(n.Data=Hn.newBuffer(n.Data))),Hn.Long){var r=new Hn.Long(0,0,!0);n.filesize=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.filesize=e.longs===String?"0":0;if(Hn.Long){r=new Hn.Long(0,0,!0);n.hashType=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.hashType=e.longs===String?"0":0;if(Hn.Long){r=new Hn.Long(0,0,!0);n.fanout=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.fanout=e.longs===String?"0":0;n.mode=0,n.mtime=null}if(null!=t.Type&&t.hasOwnProperty("Type")&&(n.Type=e.enums===String?jn.Data.DataType[t.Type]:t.Type),null!=t.Data&&t.hasOwnProperty("Data")&&(n.Data=e.bytes===String?Hn.base64.encode(t.Data,0,t.Data.length):e.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),null!=t.filesize&&t.hasOwnProperty("filesize")&&("number"===typeof t.filesize?n.filesize=e.longs===String?String(t.filesize):t.filesize:n.filesize=e.longs===String?Hn.Long.prototype.toString.call(t.filesize):e.longs===Number?new Hn.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){n.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i)"number"===typeof t.blocksizes[i]?n.blocksizes[i]=e.longs===String?String(t.blocksizes[i]):t.blocksizes[i]:n.blocksizes[i]=e.longs===String?Hn.Long.prototype.toString.call(t.blocksizes[i]):e.longs===Number?new Hn.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(!0):t.blocksizes[i]}return null!=t.hashType&&t.hasOwnProperty("hashType")&&("number"===typeof t.hashType?n.hashType=e.longs===String?String(t.hashType):t.hashType:n.hashType=e.longs===String?Hn.Long.prototype.toString.call(t.hashType):e.longs===Number?new Hn.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),null!=t.fanout&&t.hasOwnProperty("fanout")&&("number"===typeof t.fanout?n.fanout=e.longs===String?String(t.fanout):t.fanout:n.fanout=e.longs===String?Hn.Long.prototype.toString.call(t.fanout):e.longs===Number?new Hn.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),null!=t.mode&&t.hasOwnProperty("mode")&&(n.mode=t.mode),null!=t.mtime&&t.hasOwnProperty("mtime")&&(n.mtime=jn.UnixTime.toObject(t.mtime,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Fn.util.toJSONOptions)},t.DataType=function(){const t={},e=Object.create(t);return e[t[0]="Raw"]=0,e[t[1]="Directory"]=1,e[t[2]="File"]=2,e[t[3]="Metadata"]=3,e[t[4]="Symlink"]=4,e[t[5]="HAMTShard"]=5,e}(),t})(),Wn=(jn.UnixTime=(()=>{function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.Seconds=Hn.Long?Hn.Long.fromBits(0,0,!1):0,t.prototype.FractionalNanoseconds=0,t.encode=function(t,e){return e||(e=zn.create()),e.uint32(8).int64(t.Seconds),null!=t.FractionalNanoseconds&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&e.uint32(21).fixed32(t.FractionalNanoseconds),e},t.decode=function(t,e){t instanceof Un||(t=Un.create(t));var n=void 0===e?t.len:t.pos+e,r=new jn.UnixTime;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:r.Seconds=t.int64();break;case 2:r.FractionalNanoseconds=t.fixed32();break;default:t.skipType(7&i);break}}if(!r.hasOwnProperty("Seconds"))throw Hn.ProtocolError("missing required 'Seconds'",{instance:r});return r},t.fromObject=function(t){if(t instanceof jn.UnixTime)return t;var e=new jn.UnixTime;return null!=t.Seconds&&(Hn.Long?(e.Seconds=Hn.Long.fromValue(t.Seconds)).unsigned=!1:"string"===typeof t.Seconds?e.Seconds=parseInt(t.Seconds,10):"number"===typeof t.Seconds?e.Seconds=t.Seconds:"object"===typeof t.Seconds&&(e.Seconds=new Hn.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),null!=t.FractionalNanoseconds&&(e.FractionalNanoseconds=t.FractionalNanoseconds>>>0),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(Hn.Long){var r=new Hn.Long(0,0,!1);n.Seconds=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.Seconds=e.longs===String?"0":0;n.FractionalNanoseconds=0}return null!=t.Seconds&&t.hasOwnProperty("Seconds")&&("number"===typeof t.Seconds?n.Seconds=e.longs===String?String(t.Seconds):t.Seconds:n.Seconds=e.longs===String?Hn.Long.prototype.toString.call(t.Seconds):e.longs===Number?new Hn.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),null!=t.FractionalNanoseconds&&t.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=t.FractionalNanoseconds),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Fn.util.toJSONOptions)},t})(),jn.Metadata=(()=>{function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.MimeType="",t.encode=function(t,e){return e||(e=zn.create()),null!=t.MimeType&&Object.hasOwnProperty.call(t,"MimeType")&&e.uint32(10).string(t.MimeType),e},t.decode=function(t,e){t instanceof Un||(t=Un.create(t));var n=void 0===e?t.len:t.pos+e,r=new jn.Metadata;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:r.MimeType=t.string();break;default:t.skipType(7&i);break}}return r},t.fromObject=function(t){if(t instanceof jn.Metadata)return t;var e=new jn.Metadata;return null!=t.MimeType&&(e.MimeType=String(t.MimeType)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.MimeType=""),null!=t.MimeType&&t.hasOwnProperty("MimeType")&&(n.MimeType=t.MimeType),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,Fn.util.toJSONOptions)},t})(),Vn),$n=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Gn=["directory","hamt-sharded-directory"],Yn=parseInt("0644",8),Xn=parseInt("0755",8);function qn(t){if(null!=t)return"number"===typeof t?4095&t:(t=t.toString(),"0"===t.substring(0,1)?4095&parseInt(t,8):4095&parseInt(t,10))}function Kn(t){if(null==t)return;let e;if(null!=t.secs&&(e={secs:t.secs,nsecs:t.nsecs}),null!=t.Seconds&&(e={secs:t.Seconds,nsecs:t.FractionalNanoseconds}),Array.isArray(t)&&(e={secs:t[0],nsecs:t[1]}),t instanceof Date){const n=t.getTime(),r=Math.floor(n/1e3);e={secs:r,nsecs:1e3*(n-1e3*r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(null!=e&&null!=e.nsecs&&(e.nsecs<0||e.nsecs>999999999))throw Pn(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return e}}class Jn{static unmarshal(t){const e=Wn.decode(t),n=Wn.toObject(e,{defaults:!1,arrays:!0,longs:Number,objects:!1}),r=new Jn({type:$n[n.Type],data:n.Data,blockSizes:n.blocksizes,mode:n.mode,mtime:n.mtime?{secs:n.mtime.Seconds,nsecs:n.mtime.FractionalNanoseconds}:void 0});return r._originalMode=n.mode||0,r}constructor(t={type:"file"}){const{type:e,data:n,blockSizes:r,hashType:i,fanout:o,mtime:s,mode:a}=t;if(e&&!$n.includes(e))throw Pn(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE");this.type=e||"file",this.data=n,this.hashType=i,this.fanout=o,this.blockSizes=r||[],this._originalMode=0,this.mode=qn(a),s&&(this.mtime=Kn(s),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(t){this._mode=this.isDirectory()?Xn:Yn;const e=qn(t);void 0!==e&&(this._mode=e)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Gn.includes(this.type))}addBlockSize(t){this.blockSizes.push(t)}removeBlockSize(t){this.blockSizes.splice(t,1)}fileSize(){if(this.isDirectory())return 0;let t=0;return this.blockSizes.forEach((e=>{t+=e})),this.data&&(t+=this.data.length),t}marshal(){let t;switch(this.type){case"raw":t=Wn.DataType.Raw;break;case"directory":t=Wn.DataType.Directory;break;case"file":t=Wn.DataType.File;break;case"metadata":t=Wn.DataType.Metadata;break;case"symlink":t=Wn.DataType.Symlink;break;case"hamt-sharded-directory":t=Wn.DataType.HAMTShard;break;default:throw Pn(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}let e,n,r=this.data;if(this.data&&this.data.length||(r=void 0),null!=this.mode&&(e=4294963200&this._originalMode|(qn(this.mode)||0),e!==Yn||this.isDirectory()||(e=void 0),e===Xn&&this.isDirectory()&&(e=void 0)),null!=this.mtime){const t=Kn(this.mtime);t&&(n={Seconds:t.secs,FractionalNanoseconds:t.nsecs},0===n.FractionalNanoseconds&&delete n.FractionalNanoseconds)}const i={Type:t,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:e,mtime:n};return Wn.encode(i).finish()}}const Zn=new TextDecoder;function Qn(t,e){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(n+=r<28?(127&i)<<r:(127&i)*2**r,i<128)break}return[n,e]}function tr(t,e){let n;[n,e]=Qn(t,e);const r=e+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,r),r]}function er(t,e){let n;return[n,e]=Qn(t,e),[7&n,n>>3,e]}function nr(t){const e={},n=t.length;let r=0;while(r<n){let n,i;if([n,i,r]=er(t,r),1===i){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==e.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,r]=tr(t,r)}else if(2===i){if(void 0!==e.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,r]=tr(t,r),e.Name=Zn.decode(i)}else{if(3!==i)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`);if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[e.Tsize,r]=Qn(t,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function rr(t){const e=t.length;let n,r,i=0,o=!1;while(i<e){let e,s;if([e,s,i]=er(t,i),2!==e)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${e}`);if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,i]=tr(t,i),n&&(o=!0)}else{if(2!==s)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${s}`);{if(o)throw new Error("protobuf: (PBNode) duplicate Links section");let e;n||(n=[]),[e,i]=tr(t,i),n.push(nr(e))}}}if(i>e)throw new Error("protobuf: (PBNode) unexpected end of data");const s={};return r&&(s.Data=r),s.Links=n||[],s}const ir=new TextEncoder,or=2**32,sr=2**31;function ar(t,e){let n=e.length;if("number"===typeof t.Tsize){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");n=hr(e,n,t.Tsize)-1,e[n]=24}if("string"===typeof t.Name){const r=ir.encode(t.Name);n-=r.length,e.set(r,n),n=hr(e,n,r.length)-1,e[n]=18}return t.Hash&&(n-=t.Hash.length,e.set(t.Hash,n),n=hr(e,n,t.Hash.length)-1,e[n]=10),e.length-n}function cr(t){const e=ur(t),n=new Uint8Array(e);let r=e;if(t.Data&&(r-=t.Data.length,n.set(t.Data,r),r=hr(n,r,t.Data.length)-1,n[r]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const e=ar(t.Links[i],n.subarray(0,r));r-=e,r=hr(n,r,e)-1,n[r]=18}return n}function lr(t){let e=0;if(t.Hash){const n=t.Hash.length;e+=1+n+dr(n)}if("string"===typeof t.Name){const n=ir.encode(t.Name).length;e+=1+n+dr(n)}return"number"===typeof t.Tsize&&(e+=1+dr(t.Tsize)),e}function ur(t){let e=0;if(t.Data){const n=t.Data.length;e+=1+n+dr(n)}if(t.Links)for(const n of t.Links){const t=lr(n);e+=1+t+dr(t)}return e}function hr(t,e,n){e-=dr(n);const r=e;while(n>=sr)t[e++]=127&n|128,n/=128;while(n>=128)t[e++]=127&n|128,n>>>=7;return t[e]=n,r}function dr(t){return t%2===0&&t++,Math.floor((fr(t)+6)/7)}function fr(t){let e=0;return t>=or&&(t=Math.floor(t/or),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+pr[t]}const pr=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],gr=["Data","Links"],mr=["Hash","Name","Tsize"],yr=new TextEncoder;function wr(t,e){if(t===e)return 0;const n=t.Name?yr.encode(t.Name):[],r=e.Name?yr.encode(e.Name):[];let i=n.length,o=r.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(n[s]!==r[s]){i=n[s],o=r[s];break}return i<o?-1:o<i?1:0}function br(t,e){return!Object.keys(t).some((t=>!e.includes(t)))}function vr(t){if("object"===typeof t.asCID){const e=p.k.asCID(t);if(!e)throw new TypeError("Invalid DAG-PB form");return{Hash:e}}if("object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=p.k.asCID(t.Hash);try{r||("string"===typeof t.Hash?r=p.k.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=p.k.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof t.Name&&(e.Name=t.Name),"number"===typeof t.Tsize&&(e.Tsize=t.Tsize),e}function Er(t){if((t instanceof Uint8Array||"string"===typeof t)&&(t={Data:t}),"object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(void 0!==t.Data)if("string"===typeof t.Data)e.Data=yr.encode(t.Data);else{if(!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");e.Data=t.Data}if(void 0!==t.Links){if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form");e.Links=t.Links.map(vr),e.Links.sort(wr)}else e.Links=[];return e}function Ar(t){if(!t||"object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");if(!br(t,gr))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==t.Data&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<t.Links.length;e++){const n=t.Links[e];if(!n||"object"!==typeof n||Array.isArray(n))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!br(n,mr))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash.asCID!==n.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!==typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize&&("number"!==typeof n.Tsize||n.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&-1===wr(n,t.Links[e-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Cr(t,e=[]){return Er({Data:t,Links:e})}function Sr(t,e,n){return vr({Hash:n,Name:t,Tsize:e})}const _r="dag-pb",Tr=112;function Ir(t){Ar(t);const e={};return t.Links&&(e.Links=t.Links.map((t=>{const e={};return t.Hash&&(e.Hash=t.Hash.bytes),void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),t.Data&&(e.Data=t.Data),cr(e)}function Mr(t){const e=rr(t),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map((t=>{const e={};try{e.Hash=p.k.decode(t.Hash)}catch(n){}if(!e.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),n}const kr=async(t,e,n)=>{n.codec||(n.codec=r),n.hasher||(n.hasher=Mn.sha256),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===r&&n.hasher!==Mn.sha256&&(n.cidVersion=1);const i=await n.hasher.digest(t),o=p.k.create(n.cidVersion,n.codec.code,i);return n.onlyHash||await e.put(o,t,{signal:n.signal}),o};var Nr=kr;const Or=async(t,e,n)=>{const r=new Jn({type:"directory",mtime:t.mtime,mode:t.mode}),i=Ir(Er({Data:r.marshal()})),o=await Nr(i,e,n),s=t.path;return{cid:o,path:s,unixfs:r,size:i.length}};var Dr=Or,xr=n(6347),Rr=n(7192);async function Br(t,e){return e(await Rr(t))}var Lr=Br,Pr=n(1131);function Fr(t,e,n){return Ur(t,e,n)}async function Ur(t,e,n){const r=[];for await(const i of Pr(t,n.maxChildrenPerNode))r.push(await e(i));return r.length>1?Ur(r,e,n):r[0]}var zr=Fr;async function Hr(t,e,n){const r=new Wr(n.layerRepeat);let i=0,o=1,s=r;for await(const a of Pr(t,n.maxChildrenPerNode))s.isFull()&&(s!==r&&r.addChild(await s.reduce(e)),i&&i%n.layerRepeat===0&&o++,s=new Vr(o,n.layerRepeat,i),i++),s.append(a);return s&&s!==r&&r.addChild(await s.reduce(e)),r.reduce(e)}var jr=Hr;class Vr{constructor(t,e,n=0){this.maxDepth=t,this.layerRepeat=e,this.currentDepth=1,this.iteration=n,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const t=this._findParent(this.node,this.currentDepth);return!t||(this._addNextNodeToParent(t),!1)}_addNextNodeToParent(t){this.parent=t;const e={children:[],depth:t.depth+1,parent:t,maxDepth:this.maxDepth,maxChildren:Math.floor(t.children.length/this.layerRepeat)*this.layerRepeat};t.children.push(e),this.currentDepth=e.depth,this.node=e}append(t){this.node.data=t}reduce(t){return this._reduce(this.root,t)}async _reduce(t,e){let n=[];return t.children.length&&(n=await Promise.all(t.children.filter((t=>t.data)).map((t=>this._reduce(t,e))))),e((t.data||[]).concat(n))}_findParent(t,e){const n=t.parent;if(n&&0!==n.depth)return n.children.length!==n.maxChildren&&n.maxChildren?n:this._findParent(n,e)}}class Wr extends Vr{constructor(t){super(0,t),this.root.depth=0,this.currentDepth=1}addChild(t){this.root.children.push(t)}reduce(t){return t((this.root.data||[]).concat(this.root.children))}}async function*$r(t,e,n){for await(let i of t.content)yield async()=>{let o;n.progress(i.length,t.path);const s={codec:r,cidVersion:n.cidVersion,hasher:n.hasher,onlyHash:n.onlyHash};return n.rawLeaves?(s.codec=xr,s.cidVersion=1):(o=new Jn({type:n.leafType,data:i}),i=Ir({Data:o.marshal(),Links:[]})),{cid:await Nr(i,e,s),unixfs:o,size:i.length}}}var Gr=$r;const Yr={flat:Lr,balanced:zr,trickle:jr};async function*Xr(t,e,n){let r,i,o=-1;i="function"===typeof n.bufferImporter?n.bufferImporter:Gr;for await(const s of _n(i(t,e,n),n.blockWriteConcurrency))o++,0!==o?(1===o&&r&&(yield r,r=null),yield s):r=s;r&&(r.single=!0,yield r)}const qr=(t,e,n)=>{async function i(i){if(1===i.length&&i[0].single&&n.reduceSingleLeafToSelf){const o=i[0];if(void 0!==t.mtime||void 0!==t.mode){let i=await e.get(o.cid);o.unixfs=new Jn({type:"file",mtime:t.mtime,mode:t.mode,data:i}),i=Ir(Er({Data:o.unixfs.marshal()})),o.cid=await Nr(i,e,{...n,codec:r,hasher:n.hasher,cidVersion:n.cidVersion}),o.size=i.length}return{cid:o.cid,path:t.path,unixfs:o.unixfs,size:o.size}}const o=new Jn({type:"file",mtime:t.mtime,mode:t.mode}),s=i.filter((t=>!(t.cid.code!==xr.code||!t.size)||(!(!t.unixfs||t.unixfs.data||!t.unixfs.fileSize())||Boolean(t.unixfs&&t.unixfs.data&&t.unixfs.data.length)))).map((t=>t.cid.code===xr.code?(o.addBlockSize(t.size),{Name:"",Tsize:t.size,Hash:t.cid}):(t.unixfs&&t.unixfs.data?o.addBlockSize(t.unixfs.data.length):o.addBlockSize(t.unixfs&&t.unixfs.fileSize()||0),{Name:"",Tsize:t.size,Hash:t.cid}))),a={Data:o.marshal(),Links:s},c=Ir(Er(a)),l=await Nr(c,e,n);return{cid:l,path:t.path,unixfs:o,size:c.length+a.Links.reduce(((t,e)=>t+e.Tsize),0)}}return i};function Kr(t,e,n){const r=Yr[n.strategy];if(!r)throw Pn(new Error(`Unknown importer build strategy name: ${n.strategy}`),"ERR_BAD_STRATEGY");return r(Xr(t,e,n),qr(t,e,n),n)}var Jr=Kr,Zr=n(9051),Qr=n(7393);async function*ti(t,e){let n,r,i;if(e.minChunkSize&&e.maxChunkSize&&e.avgChunkSize)i=e.avgChunkSize,n=e.minChunkSize,r=e.maxChunkSize;else{if(!e.avgChunkSize)throw Pn(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");i=e.avgChunkSize,n=i/3,r=i+i/2}if(n<16)throw Pn(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");r<n&&(r=n),i<n&&(i=n);const o=Math.floor(Math.log2(i));for await(const s of ni(t,{min:n,max:r,bits:o,window:e.window,polynomial:e.polynomial}))yield s}var ei=ti;async function*ni(t,e){const n=await(0,Qr.create)(e.bits,e.min,e.max,e.window),r=new Zr;for await(const i of t){r.append(i);const t=n.fingerprint(i);for(let e=0;e<t.length;e++){const n=t[e],i=r.slice(0,n);r.consume(n),yield i}}r.length&&(yield r.slice(0))}async function*ri(t,e){let n=new Zr,r=0,i=!1;const o=e.maxChunkSize;for await(const s of t){n.append(s),r+=s.length;while(r>=o)if(yield n.slice(0,o),i=!0,o===n.length)n=new Zr,r=0;else{const t=new Zr;t.append(n.shallowSlice(o)),n=t,r-=o}}i&&!r||(yield n.slice(0,r))}var ii=ri,oi=n(6555);async function*si(t){for await(const e of t){if(void 0===e.length)throw Pn(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"===typeof e||e instanceof String)yield(0,oi.fromString)(e.toString());else if(Array.isArray(e))yield Uint8Array.from(e);else{if(!(e instanceof Uint8Array))throw Pn(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield e}}}var ai=si;function ci(t){return Symbol.iterator in t}function li(t){return Symbol.asyncIterator in t}function ui(t){try{if(t instanceof Uint8Array)return async function*(){yield t}();if(ci(t))return async function*(){yield*t}();if(li(t))return t}catch{throw Pn(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw Pn(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*hi(t,e,n){for await(const r of t)if(r.path&&("./"===r.path.substring(0,2)&&(n.wrapWithDirectory=!0),r.path=r.path.split("/").filter((t=>t&&"."!==t)).join("/")),r.content){let t,i;t="function"===typeof n.chunker?n.chunker:"rabin"===n.chunker?ei:ii,i="function"===typeof n.chunkValidator?n.chunkValidator:ai;const o={path:r.path,mtime:r.mtime,mode:r.mode,content:t(i(ui(r.content),n),n)};yield()=>Jr(o,e,n)}else{if(!r.path)throw new Error("Import candidate must have content or path or both");{const t={path:r.path,mtime:r.mtime,mode:r.mode};yield()=>Dr(t,e,n)}}}var di=hi;class fi{constructor(t,e){this.options=e||{},this.root=t.root,this.dir=t.dir,this.path=t.path,this.dirty=t.dirty,this.flat=t.flat,this.parent=t.parent,this.parentKey=t.parentKey,this.unixfs=t.unixfs,this.mode=t.mode,this.mtime=t.mtime,this.cid=void 0,this.size=void 0}async put(t,e){}get(t){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(t){}}var pi=fi;class gi extends pi{constructor(t,e){super(t,e),this._children={}}async put(t,e){this.cid=void 0,this.size=void 0,this._children[t]=e}get(t){return Promise.resolve(this._children[t])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const t=Object.keys(this._children);for(let e=0;e<t.length;e++){const n=t[e];yield{key:n,child:this._children[n]}}}async*flush(t){const e=Object.keys(this._children),n=[];for(let c=0;c<e.length;c++){let r=this._children[e[c]];if(r instanceof pi)for await(const e of r.flush(t))r=e,yield r;null!=r.size&&r.cid&&n.push({Name:e[c],Tsize:r.size,Hash:r.cid})}const r=new Jn({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:r.marshal(),Links:n},o=Ir(Er(i)),s=await Nr(o,t,this.options),a=o.length+i.Links.reduce(((t,e)=>t+(null==e.Tsize?0:e.Tsize)),0);this.cid=s,this.size=a,yield{cid:s,unixfs:r,path:this.path,size:a}}}var mi=gi,yi=n(9800);class wi extends pi{constructor(t,e){super(t,e),this._bucket=(0,yi.createHAMT)({hashFn:e.hamtHashFn,bits:e.hamtBucketBits})}async put(t,e){await this._bucket.put(t,e)}get(t){return this._bucket.get(t)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:t,value:e}of this._bucket.eachLeafSeries())yield{key:t,child:e}}async*flush(t){for await(const e of vi(this._bucket,t,this,this.options))yield{...e,path:this.path}}}var bi=wi;async function*vi(t,e,n,r){const i=t._children,o=[];let s=0;for(let f=0;f<i.length;f++){const t=i.get(f);if(!t)continue;const n=f.toString(16).toUpperCase().padStart(2,"0");if(t instanceof yi.Bucket){let i;for await(const n of await vi(t,e,null,r))i=n;if(!i)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:n,Tsize:i.size,Hash:i.cid}),s+=i.size}else if("function"===typeof t.value.flush){const r=t.value;let i;for await(const t of r.flush(e))i=t,yield i;const a=n+t.key;o.push({Name:a,Tsize:i.size,Hash:i.cid}),s+=i.size}else{const e=t.value;if(!e.cid)continue;const r=n+t.key,i=e.size;o.push({Name:r,Tsize:i,Hash:e.cid}),s+=i}}const a=Uint8Array.from(i.bitField().reverse()),c=new Jn({type:"hamt-sharded-directory",data:a,fanout:t.tableSize(),hashType:r.hamtHashCode,mtime:n&&n.mtime,mode:n&&n.mode}),l={Data:c.marshal(),Links:o},u=Ir(Er(l)),h=await Nr(u,e,r),d=u.length+s;yield{cid:h,unixfs:c,size:d}}async function Ei(t,e,n,r){let i=e;e instanceof mi&&e.directChildrenCount()>=n&&(i=await Ai(e,r));const o=i.parent;if(o){if(i!==e){if(t&&(t.parent=i),!i.parentKey)throw new Error("No parent key found");await o.put(i.parentKey,i)}return Ei(i,o,n,r)}return i}async function Ai(t,e){const n=new bi({root:t.root,dir:!0,parent:t.parent,parentKey:t.parentKey,path:t.path,dirty:t.dirty,flat:!1,mtime:t.mtime,mode:t.mode},e);for await(const{key:r,child:i}of t.eachChildSeries())await n.put(r,i);return n}var Ci=Ei;const Si=(t="")=>(t.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);var _i=Si;async function Ti(t,e,n){const r=_i(t.path||""),i=r.length-1;let o=e,s="";for(let a=0;a<r.length;a++){const c=r[a];s+=`${s?"/":""}${c}`;const l=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,l)await o.put(c,t),e=await Ci(null,o,n.shardSplitThreshold,n);else{let t=await o.get(c);t&&t instanceof pi||(t=new mi({root:!1,dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0,mtime:t&&t.unixfs&&t.unixfs.mtime,mode:t&&t.unixfs&&t.unixfs.mode},n)),await o.put(c,t),o=t}}return e}async function*Ii(t,e){t instanceof pi?yield*t.flush(e):t&&t.unixfs&&t.unixfs.isDirectory()&&(yield t)}async function*Mi(t,e,n){let r=new mi({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n);for await(const i of t)i&&(r=await Ti(i,r,n),i.unixfs&&i.unixfs.isDirectory()||(yield i));if(n.wrapWithDirectory)yield*Ii(r,e);else for await(const i of r.eachChildSeries())i&&(yield*Ii(i.child,e))}var ki=Mi;async function*Ni(t,e,n={}){const r=Ln(n);let i,o,s;i="function"===typeof n.dagBuilder?n.dagBuilder:di,o="function"===typeof n.treeBuilder?n.treeBuilder:ki,s=Symbol.asyncIterator in t||Symbol.iterator in t?t:[t];for await(const a of o(_n(i(s,e,r),r.fileImportConcurrency),e,r))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}var Oi=n(411),Di=n(7336),xi=n(4395),Ri=n(9927);function Bi(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Li(t){return t.constructor&&("Blob"===t.constructor.name||"File"===t.constructor.name)&&"function"===typeof t.stream}function Pi(t){return"object"===typeof t&&(t.path||t.content)}const Fi=t=>t&&"function"===typeof t.getReader;async function*Ui(t){yield t}async function zi(t){if(Bi(t))return Ui(Hi(t));if("string"===typeof t||t instanceof String)return Ui(Hi(t.toString()));if(Li(t))return Di(t);if(Fi(t)&&(t=Oi(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=xi(t),{value:n,done:r}=await e.peek();if(r)return Ui(new Uint8Array(0));if(e.push(n),Number.isInteger(n))return Ui(Uint8Array.from(await Rr(e)));if(Bi(n)||"string"===typeof n||n instanceof String)return Ri(e,Hi)}throw Pn(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT")}function Hi(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new Uint8Array(t):Array.isArray(t)?Uint8Array.from(t):(0,oi.fromString)(t.toString())}async function*ji(t,e){if(null===t||void 0===t)throw Pn(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof t||t instanceof String)yield Vi(t.toString(),e);else if(Bi(t)||Li(t))yield Vi(t,e);else{if(Fi(t)&&(t=Oi(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const n=xi(t),{value:r,done:i}=await n.peek();if(i)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Bi(r)||"string"===typeof r||r instanceof String)return void(yield Vi(n,e));throw Pn(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Pi(t))throw Pn(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield Vi(t,e)}}async function Vi(t,e){const{path:n,mode:r,mtime:i,content:o}=t,s={path:n||"",mode:qn(r),mtime:Kn(i)};return o?s.content=await e(o):n||(s.content=await e(t)),s}function Wi(t){return ji(t,zi)}async function*$i(t,e){if("string"===typeof t||t instanceof String||Bi(t)||Li(t)||t._readableState)throw Pn(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Fi(t)&&(t=Oi(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const n=xi(t),{value:r,done:i}=await n.peek();if(i)return void(yield*[]);if(n.push(r),Number.isInteger(r))throw Pn(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState)return void(yield*Ri(n,(t=>Gi({content:t},e))));if(Bi(r))return void(yield Gi({content:n},e));if(Pi(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||Fi(r)||Li(r))return void(yield*Ri(n,(t=>Gi(t,e))))}if(Pi(t))throw Pn(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw Pn(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function Gi(t,e){const{path:n,mode:r,mtime:i,content:o}=t,s={path:n||"",mode:qn(r),mtime:Kn(i)};return o?s.content=await e(o):n||(s.content=await e(t)),s}function Yi(t){return $i(t,zi)}function Xi(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function qi(t){return Boolean(t.constructor)&&("Blob"===t.constructor.name||"File"===t.constructor.name)&&"function"===typeof t.stream}function Ki(t){return"string"===typeof t||t instanceof String||Xi(t)||qi(t)||"_readableState"in t}function Ji(t){return Ki(t)?Wi(t):Yi(t)}function Zi(t){return t=t||new Error("Not Found"),Pn(t,"ERR_NOT_FOUND")}function Qi(t){return t=t||new Error("Aborted"),Pn(t,"ERR_ABORTED")}var to=n(9164),eo=n(3726),no=n(6855);const ro=(t,e)=>async function*(){const n=await Rr(t);yield*n.sort(e)}();class io{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(t,e,n){return Promise.reject(new Error(".put is not implemented"))}get(t,e){return Promise.reject(new Error(".get is not implemented"))}has(t,e){return Promise.reject(new Error(".has is not implemented"))}delete(t,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(t,e={}){for await(const{key:n,value:r}of t)await this.put(n,r,e),yield{key:n,value:r}}async*getMany(t,e={}){for await(const n of t)yield this.get(n,e)}async*deleteMany(t,e={}){for await(const n of t)await this.delete(n,e),yield n}batch(){let t=[],e=[];return{put(e,n){t.push({key:e,value:n})},delete(t){e.push(t)},commit:async n=>{await to(this.putMany(t,n)),t=[],await to(this.deleteMany(e,n)),e=[]}}}async*_all(t,e){throw new Error("._all is not implemented")}async*_allKeys(t,e){throw new Error("._allKeys is not implemented")}query(t,e){let n=this._all(t,e);if(null!=t.prefix&&(n=eo(n,(e=>e.key.toString().startsWith(t.prefix||"")))),Array.isArray(t.filters)&&(n=t.filters.reduce(((t,e)=>eo(t,e)),n)),Array.isArray(t.orders)&&(n=t.orders.reduce(((t,e)=>ro(t,e)),n)),null!=t.offset){let e=0;n=eo(n,(()=>e++>=(t.offset||0)))}return null!=t.limit&&(n=no(n,t.limit)),n}queryKeys(t,e){let n=this._allKeys(t,e);if(null!=t.prefix&&(n=eo(n,(e=>e.toString().startsWith(t.prefix||"")))),Array.isArray(t.filters)&&(n=t.filters.reduce(((t,e)=>eo(t,e)),n)),Array.isArray(t.orders)&&(n=t.orders.reduce(((t,e)=>ro(t,e)),n)),null!=t.offset){let e=0;n=eo(n,(()=>e++>=t.offset))}return null!=t.limit&&(n=no(n,t.limit)),n}}n(2056);class oo extends io{constructor(){super(),this.store=new Map}async*blocks(){for(const[t,e]of this.store.entries())yield{cid:Nn.k0.parse(t),bytes:e}}put(t,e){return this.store.set(t.toString(),e),Promise.resolve()}get(t){const e=this.store.get(t.toString());if(!e)throw new Error(`block with cid ${t.toString()} no found`);return Promise.resolve(e)}has(t){return Promise.resolve(this.store.has(t.toString()))}close(){return this.store.clear(),Promise.resolve()}}const so={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:Mn.sha256,rawLeaves:!0,wrapWithDirectory:!0,maxChildrenPerNode:174};async function ao({input:t,blockstore:e,hasher:n,maxChunkSize:r,maxChildrenPerNode:i,wrapWithDirectory:o,rawLeaves:s}){if(!t||Array.isArray(t)&&!t.length)throw new Error("missing input file(s)");const a=e||new oo,c=await h(d(Ji(t),(t=>Ni(t,a,{...so,hasher:n||so.hasher,maxChunkSize:r||so.maxChunkSize,maxChildrenPerNode:i||so.maxChildrenPerNode,wrapWithDirectory:!1!==o&&so.wrapWithDirectory,rawLeaves:null==s?so.rawLeaves:s}))));if(!c||!c.cid)throw new Error("given input could not be parsed correctly");const l=c.cid,{writer:u,out:f}=await En.create([l]),p=f[Symbol.asyncIterator]();let g;const m=async()=>{for await(const t of a.blocks())await u.put(t);await u.close(),e||await a.close()},y={[Symbol.asyncIterator](){if(null!=g)throw new Error("Multiple iterator not supported");return g=m(),{async next(){const t=await p.next();return t.done&&await g,t}}}};return{root:l,out:y}}const co=2e3,lo=!1;function uo(t){return t&&t.rel}function ho(t,e){function n(n){t[n]=Object.assign({},e,{rel:n})}return e.rel.split(/\s+/).forEach(n),t}function fo(t,e){const n=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return n&&(t[n[1]]=n[2]),t}function po(t){try{const e=t.match(/<?([^>]*)>(.*)/),n=e[1],r=e[2].split(";"),i={},o=new URL(n,"https://example.com");for(const[t,a]of o.searchParams)i[t]=a;r.shift();let s=r.reduce(fo,{});return s=Object.assign({},i,s),s.url=n,s}catch{return null}}function go(t,e){if(!t)return!1;e=e||{};const n=e.maxHeaderLength||co,r=e.throwOnMaxHeaderLengthExceeded||lo;if(t.length>n){if(r)throw new Error("Input string too long, it should be under "+n+" characters.");return!1}return!0}function mo(t,e){return go(t,e)?t.split(/,\s*</).map(po).filter(uo).reduce(ho,{}):null}var yo=n(7041);const wo=async function(t){return(await xn.encode(t)).slice(0,8).reverse()},bo=(t,e,n)=>Promise.all(t.map((t=>{if(null==t.Name)throw new Error("Unexpected Link without a Name");if(2===t.Name.length){const r=parseInt(t.Name,16);return e._putObjectAt(r,new yi.Bucket({hash:n._options.hash,bits:n._options.bits},e,r))}return n.put(t.Name.substring(2),!0)}))),vo=t=>t.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Eo=t=>{let e=t.bucket;const n=[];while(e._parent)n.push(e),e=e._parent;return n.push(e),n.reverse()},Ao=async(t,e,n,r,i)=>{if(!r){const t=(0,yi.createHAMT)({hashFn:wo});r={rootBucket:t,hamtDepth:1,lastBucket:t}}await bo(t.Links,r.lastBucket,r.rootBucket);const o=await r.rootBucket._findNewBucketAndPos(e);let s=vo(o.pos);const a=Eo(o);a.length>r.hamtDepth&&(r.lastBucket=a[r.hamtDepth],s=vo(r.lastBucket._posAtParent));const c=t.Links.find((t=>{if(null==t.Name)return!1;const n=t.Name.substring(0,2),r=t.Name.substring(2);return n===s&&(!r||r===e)}));if(!c)return null;if(null!=c.Name&&c.Name.substring(2)===e)return c.Hash;r.hamtDepth++;const l=await n.get(c.Hash,i);return t=Mr(l),Ao(t,e,n,r,i)};var Co=Ao;function So(t,e,n,r){const i=t.length,o=e+i;return n>=o||r<e?new Uint8Array(0):(r>=e&&r<o&&(t=t.slice(0,r-e)),n>=e&&n<o&&(t=t.slice(n-e)),t)}var _o=So;const To=(t,e,n)=>{if(e||(e=0),e<0)throw Pn(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(e>t)throw Pn(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(n||0===n||(n=t-e),n<0)throw Pn(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return e+n>t&&(n=t-e),{offset:e,length:n}};var Io=To;async function*Mo(t,e,n,r,i=0,o){if(e instanceof Uint8Array){const t=_o(e,i,n,r);return t.length&&(yield t),i+=t.length,i}if(null==e.Data)throw Pn(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let s;try{s=Jn.unmarshal(e.Data)}catch(c){throw Pn(c,"ERR_NOT_UNIXFS")}if(s.data&&s.data.length){const t=_o(s.data,i,n,r);t.length&&(yield t),i+=s.data.length}let a=i;for(let l=0;l<e.Links.length;l++){const c=e.Links[l],u=i+s.blockSizes[l];if(n>=a&&n<u||r>a&&r<=u||n<a&&r>u){const e=await t.get(c.Hash,{signal:o.signal});let s;switch(c.Hash.code){case Tr:s=await Mr(e);break;case xr.code:s=e;break;case Ge:s=await Xe(e);break;default:throw Error(`Unsupported codec: ${c.Hash.code}`)}for await(const a of Mo(t,s,n,r,i,o))i+=a.length,yield a}i=u,a=u+1}}const ko=(t,e,n,r,i,o,s)=>{function a(t={}){const r=n.fileSize();if(void 0===r)throw new Error("File was a directory");const{offset:i,length:o}=Io(r,t.offset,t.length),a=i,c=i+o;return Mo(s,e,a,c,0,t)}return a};var No=ko;const Oo=(t,e,n,r,i,o,s)=>{async function*a(t={}){const n=t.offset||0,a=t.length||e.Links.length,c=e.Links.slice(n,a);for(const e of c){const n=await i(e.Hash,e.Name||"",`${r}/${e.Name||""}`,[],o+1,s,t);n.entry&&(yield n.entry)}}return a};var Do=Oo;const xo=(t,e,n,r,i,o,s)=>{function a(t={}){return Ro(e,r,i,o,s,t)}return a};async function*Ro(t,e,n,r,i,o){const s=t.Links;for(const a of s){const s=null!=a.Name?a.Name.substring(2):null;if(s){const t=await n(a.Hash,s,`${e}/${s}`,[],r+1,i,o);yield t.entry}else{const s=await i.get(a.Hash);t=Mr(s);for await(const a of Ro(t,e,n,r,i,o))yield a}}}var Bo=xo;const Lo=(t,e)=>{const n=t.Links.find((t=>t.Name===e));return n&&n.Hash},Po={raw:No,file:No,directory:Do,"hamt-sharded-directory":Bo,metadata:(t,e,n,r,i,o,s)=>()=>[],symlink:(t,e,n,r,i,o,s)=>()=>[]},Fo=async(t,e,n,r,i,o,s,a)=>{const c=await s.get(t,a),l=Mr(c);let u,h;if(e||(e=t.toString()),null==l.Data)throw Pn(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{u=Jn.unmarshal(l.Data)}catch(d){throw Pn(d,"ERR_NOT_UNIXFS")}if(n||(n=e),r.length){let t;if(t=u&&"hamt-sharded-directory"===u.type?await Co(l,r[0],s):Lo(l,r[0]),!t)throw Pn(new Error("file does not exist"),"ERR_NOT_FOUND");const e=r.shift(),i=`${n}/${e}`;h={cid:t,toResolve:r,name:e||"",path:i}}return{entry:{type:u.isDirectory()?"directory":"file",name:e,path:n,cid:t,content:Po[u.type](t,l,u,n,i,o,s),unixfs:u,depth:o,node:l,size:u.fileSize()},next:h}};var Uo=Fo;const zo=t=>{async function*e(e={}){const{offset:n,length:r}=Io(t.length,e.offset,e.length);yield _o(t,0,n,n+r)}return e},Ho=async(t,e,n,r,i,o,s,a)=>{if(r.length)throw Pn(new Error(`No link named ${n} found in raw node ${t}`),"ERR_NOT_FOUND");const c=await s.get(t,a);return{entry:{type:"raw",name:e,path:n,cid:t,content:zo(c),depth:o,size:c.length,node:c}}};var jo=Ho;const Vo=async(t,e,n,r,i,o,s,a)=>{const c=await s.get(t),l=Xe(c);let u=l,h=n;while(r.length){const i=r[0];if(!(i in u))throw Pn(new Error(`No property named ${i} found in cbor node ${t}`),"ERR_NO_PROP");{r.shift(),h=`${h}/${i}`;const s=p.k.asCID(u[i]);if(s)return{entry:{type:"object",name:e,path:n,cid:t,node:c,depth:o,size:c.length,content:async function*(){yield l}},next:{cid:s,name:i,path:h,toResolve:r}};u=u[i]}}return{entry:{type:"object",name:e,path:n,cid:t,node:c,depth:o,size:c.length,content:async function*(){yield l}}}};var Wo=Vo;const $o=t=>{async function*e(e={}){const{offset:n,length:r}=Io(t.length,e.offset,e.length);yield _o(t,0,n,n+r)}return e},Go=async(t,e,n,r,i,o,s,a)=>{if(r.length)throw Pn(new Error(`No link named ${n} found in raw node ${t}`),"ERR_NOT_FOUND");const c=await g.Jx(t.multihash.bytes);return{entry:{type:"identity",name:e,path:n,cid:t,content:$o(c.digest),depth:o,size:c.digest.length,node:c.digest}}};var Yo=Go;const Xo={[Tr]:Uo,[xr.code]:jo,[Ge]:Wo,[yo.identity.code]:Yo};function qo(t,e,n,r,i,o,s){const a=Xo[t.code];if(!a)throw Pn(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return a(t,e,n,r,qo,i,o,s)}var Ko=qo;const Jo=(t="")=>(t.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),Zo=t=>{if(t instanceof Uint8Array)return{cid:p.k.decode(t),toResolve:[]};const e=p.k.asCID(t);if(e)return{cid:e,toResolve:[]};if("string"===typeof t){0===t.indexOf("/ipfs/")&&(t=t.substring(6));const e=Jo(t);return{cid:p.k.parse(e[0]),toResolve:e.slice(1)}}throw Pn(new Error(`Unknown path type ${t}`),"ERR_BAD_PATH")};async function*Qo(t,e,n={}){let{cid:r,toResolve:i}=Zo(t),o=r.toString(),s=o;const a=i.length;while(1){const c=await Ko(r,o,s,i,a,e,n);if(!c.entry&&!c.next)throw Pn(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;i=c.next.toResolve,r=c.next.cid,o=c.next.name,s=c.next.path}}async function ts(t,e,n={}){const r=await h(Qo(t,e,n));if(!r)throw Pn(new Error(`Could not resolve ${t}`),"ERR_NOT_FOUND");return r}async function*es(t,e,n={}){const r=await ts(t,e,n);if(r&&(yield r,"directory"===r.type))for await(const o of i(r,n))yield o;async function*i(t,e){for await(const n of t.content(e))yield n,n instanceof Uint8Array||"directory"===n.type&&(yield*i(n,e))}}function ns(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}class rs extends io{constructor(t){super(),this.store=t}async get(t){const e=await this.store.get(t);if(!e)throw new Error(`Incomplete CAR. Block missing for CID ${t}`);if(!is({cid:t,bytes:e}))throw new Error(`Invalid CAR. Hash of block data does not match CID ${t}`);return e}static fromBlockstore(t){return new rs(t)}static fromCarReader(t){return new rs({get:async e=>{const n=await t.get(e);return null===n||void 0===n?void 0:n.bytes}})}}async function is({cid:t,bytes:e}){const n=await Mn.sha256.digest(e);return ns(n.digest,t.multihash.digest)}async function*os(t,{roots:e,blockstore:n}={}){const r=await dn.fromIterable(ss(t)),i=n||new oo;for await(const s of r)await i.put(s.cid,s.bytes);const o=rs.fromBlockstore(i);e&&0!==e.length||(e=await r.getRoots());for(const s of e)yield*es(s,o)}function ss(t){return Symbol.asyncIterator in t?t:Oi(t)}const as=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),cs=function*(t,e){if(null!=t&&!(t instanceof Uint8Array))for(const[n,r]of Object.entries(t)){const t=[...e,n];if(null!=r&&"object"===typeof r)if(Array.isArray(r))for(const[e,n]of r.entries()){const r=[...t,e],i=Nn.k0.asCID(n);i?yield[r.join("/"),i]:"object"===typeof n&&(yield*cs(n,r))}else{const e=Nn.k0.asCID(r);e?yield[t.join("/"),e]:yield*cs(r,t)}}},ls=function*(t,e){if(null!=t)for(const[n,r]of Object.entries(t)){const t=[...e,n];if(yield t.join("/"),null!=r&&!(r instanceof Uint8Array)&&"object"===typeof r&&!Nn.k0.asCID(r))if(Array.isArray(r))for(const[e,n]of r.entries()){const r=[...t,e];yield r.join("/"),"object"!==typeof n||Nn.k0.asCID(n)||(yield*ls(n,r))}else yield*ls(r,t)}},us=(t,e)=>{let n=t;for(const[r,i]of e.entries()){if(n=n[i],null==n)throw new Error(`Object has no property at ${e.slice(0,r+1).map((t=>`[${JSON.stringify(t)}]`)).join("")}`);const t=Nn.k0.asCID(n);if(t)return{value:t,remaining:e.slice(r+1).join("/")}}return{value:n}};class hs{constructor({cid:t,bytes:e,value:n}){if(!t||!e||"undefined"===typeof n)throw new Error("Missing required argument");this.cid=t,this.bytes=e,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:as(),bytes:as(),value:as(),asBlock:as()})}links(){return cs(this.value,[])}tree(){return ls(this.value,[])}get(t="/"){return us(this.value,t.split("/").filter(Boolean))}}const ds=42;function fs(t){if(t.asCID!==t)return null;const e=p.k.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new A(E.tag,ds),new A(E.bytes,n)]}function ps(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function gs(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const ms={float64:!0,typeEncoders:{Object:fs,undefined:ps,number:gs}};function ys(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return p.k.decode(t.subarray(1))}const ws={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};ws.tags[ds]=ys;const bs="dag-cbor",vs=113,Es=t=>Ne(t,ms),As=t=>Fe(t,ws);class Cs{constructor(t,e,n={}){if("number"!==typeof e||e<=0)throw new Error("invalid target chunk size");this._reader=t,this._targetSize=e,this._decoders=[r,xr,o,...n.decoders||[]]}async*cars(){const t=await this._reader.getRoots();if(1!==t.length)throw new Error(`unexpected number of roots: ${t.length}`);let e;for await(const n of this._cars(t[0]))e=n.channel,n.out&&(yield n.out);if(!e)throw new Error("missing CAR writer channel");e.writer.close(),yield e.out}async _get(t){const e=await this._reader.get(t);if(!e)throw new Error(`missing block for ${t}`);const{bytes:n}=e,r=this._decoders.find((e=>e.code===t.code));if(!r)throw new Error(`missing decoder for ${t.code}`);return new hs({cid:t,bytes:n,value:r.decode(n)})}async*_cars(t,e=[],n=undefined){const r=await this._get(t);if(n=n||Object.assign(En.create(t),{size:0}),n.size>0&&n.size+r.bytes.byteLength>=this._targetSize){n.writer.close();const{out:t}=n;n=Ss(e),yield{channel:n,out:t}}e=e.concat(r),n.size+=r.bytes.byteLength,n.writer.put(r);for(const[,i]of r.links())for await(const t of this._cars(i,e,n))n=t.channel,yield t;if(!n)throw new Error("missing CAR writer channel");yield{channel:n}}static async fromIterable(t,e,n){const r=await cn.fromIterable(t);return new Cs(r,e,n)}static async fromBlob(t,e,n){const r=await t.arrayBuffer(),i=await cn.fromBytes(new Uint8Array(r));return new Cs(i,e,n)}}function Ss(t){const e=Object.assign(En.create(t[0].cid),{size:t.reduce(((t,e)=>t+e.bytes.byteLength),0)});for(const n of t)e.writer.put(n);return e}var _s=n(1978);const Ts=globalThis.fetch,Is=(globalThis.Request,globalThis.Response,globalThis.Blob),Ms=globalThis.File,ks=oo,Ns=5,Os=3,Ds=52428800,xs=1048576,Rs=104857600,Bs=30,Ls=1e4;function Ps(){const t=_s(Bs,Ls);return()=>t((()=>{}))}const Fs=Ps();class Us{constructor({token:t,endpoint:e=new URL("https://api.web3.storage"),rateLimiter:n,fetch:r=Ts}){this.token=t,this.endpoint=e,this.rateLimiter=n||Ps(),this.fetch=r}static headers(t){if(!t)throw new Error("missing token");return{Authorization:`Bearer ${t}`,"X-Client":"web3.storage/js"}}static async put({endpoint:t,token:e,rateLimiter:n=Fs,fetch:r=Ts},i,{onRootCidReady:o,onStoredChunk:s,maxRetries:a=Ns,maxChunkSize:c=Ds,wrapWithDirectory:l=!0,name:u,signal:h}={}){if(c>=Rs||c<xs)throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");const d=new ks;try{const{out:f,root:p}=await ao({input:Array.from(i).map(Vs),blockstore:d,wrapWithDirectory:l,maxChunkSize:xs,maxChildrenPerNode:1024});o&&o(p.toString());const g=await cn.fromIterable(f);return await Us.putCar({endpoint:t,token:e,rateLimiter:n,fetch:r},g,{onStoredChunk:s,maxRetries:a,maxChunkSize:c,name:u,signal:h})}finally{await d.close()}}static async putCar({endpoint:t,token:e,rateLimiter:n=Fs,fetch:r=Ts},i,{name:o,onStoredChunk:s,maxRetries:a=Ns,maxChunkSize:c=Ds,decoders:h,signal:d}={}){if(c>=Rs||c<xs)throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");const f=c,p=new URL("car",t);let g=Us.headers(e);o&&(g={...g,"X-Name":encodeURIComponent(o)});const m=await i.getRoots();if(null==m[0])throw new Error("missing root CID");if(m.length>1)throw new Error("too many roots");const y=m[0].toString(),w=new Cs(i,f,{decoders:h}),b=async t=>{const e=[];for await(const n of t)e.push(n);const i=new Is(e,{type:"application/vnd.ipld.car"}),o=await u((async()=>{let t;await n();try{t=await r(p.toString(),{method:"POST",headers:g,body:i,signal:d})}catch(o){throw d&&d.aborted?new u.AbortError(o):o}if(429===t.status)throw new Error("rate limited");const e=await t.json();if(!t.ok)throw new Error(e.message);if(e.cid!==y)throw new Error(`root CID mismatch, expected: ${y}, received: ${e.cid}`);return e.cid}),{retries:a});return s&&s(i.size),o},v=l(Os,b);for await(const l of v(w.cars()));return y}static async get({endpoint:t,token:e,rateLimiter:n=Fs,fetch:r=Ts},i,o={}){const s=new URL(`car/${i}`,t);await n();const a=await r(s.toString(),{method:"GET",headers:Us.headers(e),signal:o.signal});if(429===a.status)throw new Error("rate limited");return js(a)}static async delete({endpoint:t,token:e,rateLimiter:n=Fs},r,i={}){throw console.log("Not deleting",r,t,e,n,i),Error(".delete not implemented yet")}static async status({endpoint:t,token:e,rateLimiter:n=Fs,fetch:r=Ts},i,o={}){const s=new URL(`status/${i}`,t);await n();const a=await r(s.toString(),{method:"GET",headers:Us.headers(e),signal:o.signal});if(429===a.status)throw new Error("rate limited");if(404!==a.status){if(!a.ok)throw new Error(a.statusText);return a.json()}}static async*list(t,{before:e=(new Date).toISOString(),maxResults:n=1/0,signal:r}={}){async function i({endpoint:t,token:e,rateLimiter:n=Fs,fetch:i=Ts},{before:o,size:s}){const a=new URLSearchParams({before:o,size:s.toString()}),c=new URL(`user/uploads?${a}`,t);return await n(),i(c.toString(),{method:"GET",headers:{...Us.headers(e),"Access-Control-Request-Headers":"Link"},signal:r})}let o=0;const s=n>100?100:n;for await(const a of Ws(i,t,{before:e,size:s})){if(!a.ok){if(429===a.status)throw new Error("rate limited");const t=await a.json();throw new Error(`${a.status} ${a.statusText} ${t?"- "+t.message:""}`)}const t=await a.json();for(const e of t){if(++o>n)return;yield e}}}put(t,e){return Us.put(this,t,e)}putCar(t,e){return Us.putCar(this,t,e)}get(t,e){return Us.get(this,t,e)}delete(t,e){return Us.delete(this,t,e)}status(t,e){return Us.status(this,t,e)}list(t){return Us.list(this,t)}}async function zs({content:t,path:e,cid:n}){const r=[];for await(const o of t())r.push(o);const i=new Ms(r,Hs(e));return Object.assign(i,{cid:n.toString()})}function Hs(t){const e=t.indexOf("/");return-1===e?t:t.substring(e+1)}function js(t){const e=Object.assign(t,{unixFsIterator:async function*(){if(!t.ok)throw new Error(`Response was not ok: ${t.status} ${t.statusText} - Check for { "ok": false } on the Response object before calling .unixFsIterator`);if(!t.body)throw new Error("No body on response");const e=new ks;try{for await(const n of os(t.body,{blockstore:e}))yield n}finally{await e.close()}},files:async()=>{if(!t.ok)throw new Error(`Response was not ok: ${t.status} ${t.statusText} - Check for { "ok": false } on the Response object before calling .files`);const n=[];for await(const t of e.unixFsIterator()){if("directory"===t.type)continue;const e=await zs(t);n.push(e)}return n}});return e}function Vs(t){let e;return{path:t.name,get content(){return e=e||t.stream(),e}}}async function*Ws(t,e,n){let r=await t(e,n);yield r;let i=mo(r.headers.get("Link")||"");while(i&&i.next)r=await t(e,i.next),yield r,i=mo(r.headers.get("Link")||"")}},7195:function(t,e,n){"use strict";n.d(e,{JR:function(){return h},SF:function(){return f},US:function(){return u}});var r=n(1811),i=n(3248),o=n(6969),s=n(7862),a=n(1634);let c=null;const l=()=>{const t=c;c=null,t.forEach(((t,e)=>{const n=e.state.tr,i=r.Gt.getState(e.state);i&&i.binding&&!i.binding.isDestroyed&&(t.forEach(((t,e)=>{n.setMeta(e,t)})),e.dispatch(n))}))},u=(t,e,n)=>{c||(c=new Map,a.Vs(0,l)),s.Yu(c,t,s.Ue).set(e,n)},h=(t,e,n)=>{if(0===t)return i.w$(e,0);let r=null===e._first?null:e._first.content.type;while(null!==r&&e!==r){if(r instanceof i.eI){if(r._length>=t)return i.w$(r,t);if(t-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,t--}while(r!==e&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==e&&(r=null===r._item?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&t<o)r=r._first.content.type,t--;else{if(1===t&&0===r._length&&o>1)return new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);if(t-=o,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===t)return r=null===r._item?r:r._item.parent,new i.Zi(null===r._item?null:r._item.id,null===r._item?i.BW(r):null,null);do{r=r._item.parent,t--}while(r!==e&&null===r._item.next);r!==e&&(r=r._item.next.content.type)}}}if(null===r)throw o.zR();if(0===t&&r.constructor!==i.eI&&r!==e)return d(r._item.parent,r._item)}return i.w$(e,e._length)},d=(t,e)=>{let n=null,r=null;return null===t._item?r=i.BW(t):n=i.at(t._item.id.client,t._item.id.clock),new i.Zi(n,r,e.id)},f=(t,e,n,r)=>{const o=i.or(n,t);if(null===o||o.type!==e&&!i.$4(e,o.type._item))return null;let s=o.type,a=0;if(s.constructor===i.eI)a=o.index;else if(null===s._item||!s._item.deleted){let t=s._first,e=0;while(e<s._length&&e<o.index&&null!==t){if(!t.deleted){const n=t.content.type;e++,n instanceof i.eI?a+=n._length:a+=r.get(n).nodeSize}t=t.right}a+=1}while(s!==e&&null!==s._item){const t=s._item.parent;if(null===t._item||!t._item.deleted){a+=1;let e=t._first;while(null!==e){const t=e.content.type;if(t===s)break;e.deleted||(t instanceof i.eI?a+=t._length:a+=r.get(t).nodeSize),e=e.right}}s=t}return a-1}},1811:function(t,e,n){"use strict";n.d(e,{Gk:function(){return o},Gt:function(){return i},uJ:function(){return s}});var r=n(157);const i=new r.H$("y-sync"),o=new r.H$("y-undo"),s=new r.H$("yjs-cursor")},3248:function(t,e,n){"use strict";n.d(e,{MM:function(){return vi},$_:function(){return Ti},zc:function(){return Li},QW:function(){return Ee},ck:function(){return ji},Zi:function(){return rn},aC:function(){return dn},xv:function(){return Kr},H6:function(){return zn},lt:function(){return ei},eI:function(){return si},NG:function(){return Pe},Uq:function(){return hn},or:function(){return un},VG:function(){return ge},at:function(){return tn},og:function(){return on},w$:function(){return ln},Ox:function(){return fn},D$:function(){return ze},gJ:function(){return Ge},BW:function(){return en},uY:function(){return he},$4:function(){return nn},UQ:function(){return le},CO:function(){return pn},ud:function(){return fr}});n(7658),n(3767),n(8585),n(8696),n(541);var r=n(7862),i=n(893);const o=t=>t[t.length-1],s=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},a=Array.from,c=Array.isArray;class l{constructor(){this._observers=r.Ue()}on(t,e){r.Yu(this._observers,t,i.Ue).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return a((this._observers.get(t)||r.Ue()).values()).forEach((t=>t(...e)))}destroy(){this._observers=r.Ue()}}var u=n(1383),h=(n(2801),n(654)),d=n(6413);const f=t=>new Uint8Array(t),p=(t,e,n)=>new Uint8Array(t,e,n),g=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=h.IK(t[n]);return btoa(e)},m=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),y=t=>{const e=atob(t),n=f(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},w=t=>{const e=Buffer.from(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},b=(d.jU,d.jU,t=>{const e=f(t.byteLength);return e.set(t),e}),v=1,E=2,A=4,C=8,S=32,_=64,T=128,I=31,M=63,k=127,N=2147483647,O=Number.MAX_SAFE_INTEGER,D=(Number.MIN_SAFE_INTEGER,Number.isInteger||(t=>"number"===typeof t&&isFinite(t)&&u.GW(t)===t));Number.isNaN,Number.parseInt;class x{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const R=()=>new x,B=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},L=t=>{const e=new Uint8Array(B(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(p(t.cbuf.buffer,0,t.cpos),n),e},P=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(p(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*u.Fp(n,e)),t.cpos=0)},F=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},U=F,z=(t,e)=>{while(e>k)F(t,T|k&e),e=u.GW(e/128);F(t,k&e)},H=(t,e)=>{const n=u.GR(e);n&&(e=-e),F(t,(e>M?T:0)|(n?_:0)|M&e),e=u.GW(e/64);while(e>0)F(t,(e>k?T:0)|k&e),e=u.GW(e/128)},j=new Uint8Array(3e4),V=j.length/3,W=(t,e)=>{if(e.length<V){const n=h.YZ.encodeInto(e,j).written||0;z(t,n);for(let e=0;e<n;e++)F(t,j[e])}else X(t,h.lz(e))},$=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;z(t,r);for(let i=0;i<r;i++)F(t,n.codePointAt(i))},G=h.YZ&&h.YZ.encodeInto?W:$,Y=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=u.VV(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(u.Fp(2*n,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},X=(t,e)=>{z(t,e.byteLength),Y(t,e)},q=(t,e)=>{P(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},K=(t,e)=>q(t,4).setFloat32(0,e,!1),J=(t,e)=>q(t,8).setFloat64(0,e,!1),Z=(t,e)=>q(t,8).setBigInt64(0,e,!1),Q=new DataView(new ArrayBuffer(4)),tt=t=>(Q.setFloat32(0,t),Q.getFloat32(0)===t),et=(t,e)=>{switch(typeof e){case"string":F(t,119),G(t,e);break;case"number":D(e)&&u.Wn(e)<=N?(F(t,125),H(t,e)):tt(e)?(F(t,124),K(t,e)):(F(t,123),J(t,e));break;case"bigint":F(t,122),Z(t,e);break;case"object":if(null===e)F(t,126);else if(e instanceof Array){F(t,117),z(t,e.length);for(let n=0;n<e.length;n++)et(t,e[n])}else if(e instanceof Uint8Array)F(t,116),X(t,e);else{F(t,118);const n=Object.keys(e);z(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];G(t,i),et(t,e[i])}}break;case"boolean":F(t,e?120:121);break;default:F(t,127)}};class nt extends x{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&z(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const rt=t=>{t.count>0&&(H(t.encoder,1===t.count?t.s:-t.s),t.count>1&&z(t.encoder,t.count-2))};class it{constructor(){this.encoder=new x,this.s=0,this.count=0}write(t){this.s===t?this.count++:(rt(this),this.count=1,this.s=t)}toUint8Array(){return rt(this),L(this.encoder)}}const ot=t=>{if(t.count>0){const e=2*t.diff+(1===t.count?0:1);H(t.encoder,e),t.count>1&&z(t.encoder,t.count-2)}};class st{constructor(){this.encoder=new x,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(ot(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return ot(this),L(this.encoder)}}class at{constructor(){this.sarr=[],this.s="",this.lensE=new it}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new x;return this.sarr.push(this.s),this.s="",G(t,this.sarr.join("")),Y(t,this.lensE.toUint8Array()),L(t)}}var ct=n(6969);const lt=ct.Ue("Unexpected end of array"),ut=ct.Ue("Integer out of Range");class ht{constructor(t){this.arr=t,this.pos=0}}const dt=t=>new ht(t),ft=t=>t.pos!==t.arr.length,pt=(t,e)=>{const n=p(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},gt=t=>pt(t,yt(t)),mt=t=>t.arr[t.pos++],yt=t=>{let e=0,n=1;const r=t.arr.length;while(t.pos<r){const r=t.arr[t.pos++];if(e+=(r&k)*n,n*=128,r<T)return e;if(e>O)throw ut}throw lt},wt=t=>{let e=t.arr[t.pos++],n=e&M,r=64;const i=(e&_)>0?-1:1;if(0===(e&T))return i*n;const o=t.arr.length;while(t.pos<o){if(e=t.arr[t.pos++],n+=(e&k)*r,r*=128,e<T)return i*n;if(n>O)throw ut}throw lt},bt=t=>{let e=yt(t);if(0===e)return"";{let n=String.fromCodePoint(mt(t));if(--e<100)while(e--)n+=String.fromCodePoint(mt(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},vt=t=>h.CO.decode(gt(t)),Et=h.CO?vt:bt,At=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},Ct=t=>At(t,4).getFloat32(0,!1),St=t=>At(t,8).getFloat64(0,!1),_t=t=>At(t,8).getBigInt64(0,!1),Tt=[t=>{},t=>null,wt,Ct,St,_t,t=>!1,t=>!0,Et,t=>{const e=yt(t),n={};for(let r=0;r<e;r++){const e=Et(t);n[e]=It(t)}return n},t=>{const e=yt(t),n=[];for(let r=0;r<e;r++)n.push(It(t));return n},gt],It=t=>Tt[127-mt(t)](t);class Mt extends ht{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),ft(this)?this.count=yt(this)+1:this.count=-1),this.count--,this.s}}class kt extends ht{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=wt(this);const t=u.GR(this.s);this.count=1,t&&(this.s=-this.s,this.count=yt(this)+2)}return this.count--,this.s}}class Nt extends ht{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=wt(this),e=1&t;this.diff=u.GW(t/2),this.count=1,e&&(this.count=yt(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Ot{constructor(t){this.decoder=new kt(t),this.str=Et(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}var Dt=n(6157);const xt=t=>new Promise(t);var Rt=n(7409);const Bt=Symbol;class Lt{constructor(t,e){this.left=t,this.right=e}}const Pt=(t,e)=>new Lt(t,e);var Ft=n(7214);const Ut=Date.now,zt=Bt(),Ht=Bt(),jt=Bt(),Vt=Bt(),Wt=Bt(),$t=Bt(),Gt=Bt(),Yt=Bt(),Xt=Bt(),qt={[zt]:Pt("font-weight","bold"),[Ht]:Pt("font-weight","normal"),[jt]:Pt("color","blue"),[Wt]:Pt("color","green"),[Vt]:Pt("color","grey"),[$t]:Pt("color","red"),[Gt]:Pt("color","purple"),[Yt]:Pt("color","orange"),[Xt]:Pt("color","black")},Kt={[zt]:"[1m",[Ht]:"[2m",[jt]:"[34m",[Wt]:"[32m",[Vt]:"[37m",[$t]:"[31m",[Gt]:"[35m",[Yt]:"[38;5;208m",[Xt]:"[0m"},Jt=t=>{const e=[],n=[],i=r.Ue();let o=[],s=0;for(;s<t.length;s++){const r=t[s],o=qt[r];if(void 0!==o)i.set(o.left,o.right);else{if(r.constructor!==String&&r.constructor!==Number)break;{const t=Ft.x0(i);s>0||t.length>0?(e.push("%c"+r),n.push(t)):e.push(r)}}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const e=t[s];e instanceof Symbol||o.push(e)}return o},Zt=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const n=t[r],i=Kt[n];if(void 0===i){if(n.constructor!==String&&n.constructor!==Number)break;e.push(n)}}for(r>0&&n.push(e.join(""));r<t.length;r++){const e=t[r];e instanceof Symbol||(e.constructor===Object?n.push(JSON.stringify(e)):n.push(e))}return n},Qt=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const n=t[r],i=Kt[n];if(void 0!==i)e.push(i);else{if(n.constructor!==String&&n.constructor!==Number)break;e.push(n)}}for(r>0&&(e.push("[0m"),n.push(e.join("")));r<t.length;r++){const e=t[r];e instanceof Symbol||n.push(e)}return n},te=d.hH?d.UG?Qt:Jt:Zt,ee=(...t)=>{console.log(...te(t)),ne.forEach((e=>e.print(t)))},ne=i.Ue();Ut();const re=t=>({[Symbol.iterator](){return this},next:t}),ie=(t,e)=>re((()=>{let n;do{n=t.next()}while(!n.done&&!e(n.value));return n})),oe=(t,e)=>re((()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}}));var se=n(1370);class ae{constructor(t,e){this.clock=t,this.len=e}}class ce{constructor(){this.clients=new Map}}const le=(t,e,n)=>e.clients.forEach(((e,r)=>{const i=t.doc.store.clients.get(r);for(let o=0;o<e.length;o++){const r=e[o];Mn(t,i,r.clock,r.len,n)}})),ue=(t,e)=>{let n=0,r=t.length-1;while(n<=r){const i=u.GW((n+r)/2),o=t[i],s=o.clock;if(s<=e){if(e<s+o.len)return i;n=i+1}else r=i-1}return null},he=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==ue(n,e.clock)},de=t=>{t.clients.forEach((t=>{let e,n;for(t.sort(((t,e)=>t.clock-e.clock)),e=1,n=1;e<t.length;e++){const r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=u.Fp(r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n}))},fe=t=>{const e=new ce;for(let n=0;n<t.length;n++)t[n].clients.forEach(((r,i)=>{if(!e.clients.has(i)){const o=r.slice();for(let e=n+1;e<t.length;e++)s(o,t[e].clients.get(i)||[]);e.clients.set(i,o)}}));return de(e),e},pe=(t,e,n,i)=>{r.Yu(t.clients,e,(()=>[])).push(new ae(n,i))},ge=()=>new ce,me=t=>{const e=ge();return t.clients.forEach(((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const i=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new ae(i,o))}}r.length>0&&e.clients.set(n,r)})),e},ye=(t,e)=>{z(t.restEncoder,e.clients.size),a(e.clients.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{t.resetDsCurVal(),z(t.restEncoder,e);const r=n.length;z(t.restEncoder,r);for(let i=0;i<r;i++){const e=n[i];t.writeDsClock(e.clock),t.writeDsLen(e.len)}}))},we=t=>{const e=new ce,n=yt(t.restDecoder);for(let i=0;i<n;i++){t.resetDsCurVal();const n=yt(t.restDecoder),i=yt(t.restDecoder);if(i>0){const o=r.Yu(e.clients,n,(()=>[]));for(let e=0;e<i;e++)o.push(new ae(t.readDsClock(),t.readDsLen()))}}return e},be=(t,e,n)=>{const r=new ce,i=yt(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const i=yt(t.restDecoder),o=yt(t.restDecoder),s=n.clients.get(i)||[],a=bn(n,i);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<a){a<o&&pe(r,i,a,o-a);let t=En(s,n),c=s[t];!c.deleted&&c.id.clock<n&&(s.splice(t+1,0,zi(e,c,n-c.id.clock)),t++);while(t<s.length){if(c=s[t++],!(c.id.clock<o))break;c.deleted||(o<c.id.clock+c.length&&s.splice(t,0,zi(e,c,o-c.id.clock)),c.delete(e))}}else pe(r,i,n,o-n)}}if(r.clients.size>0){const t=new ke;return z(t.restEncoder,0),ye(t,r),t.toUint8Array()}return null},ve=Dt.U7;class Ee extends l{constructor({guid:t=Dt.k$(),collectionid:e=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=ve(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new yn,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=xt((t=>{this.on("load",(()=>{this.isLoaded=!0,t(this)}))}));const a=()=>xt((t=>{const e=n=>{void 0!==n&&!0!==n||(this.off("sync",e),t())};this.on("sync",e)}));this.on("sync",(t=>{!1===t&&this.isSynced&&(this.whenSynced=a()),this.isSynced=void 0===t||!0===t,this.isLoaded||this.emit("load",[])})),this.whenSynced=a()}load(){const t=this._item;null===t||this.shouldLoad||Ln(t.parent.doc,(t=>{t.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(a(this.subdocs).map((t=>t.guid)))}transact(t,e=null){return Ln(this,t,e)}get(t,e=ur){const n=r.Yu(this.share,t,(()=>{const t=new e;return t._integrate(this,null),t})),i=n.constructor;if(e!==ur&&i!==e){if(i===ur){const r=new e;r._map=n._map,n._map.forEach((t=>{for(;null!==t;t=t.left)t.parent=r})),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,Nr)}getText(t=""){return this.get(t,Kr)}getMap(t=""){return this.get(t,xr)}getXmlFragment(t=""){return this.get(t,Qr)}toJSON(){const t={};return this.share.forEach(((e,n)=>{t[n]=e.toJSON()})),t}destroy(){a(this.subdocs).forEach((t=>t.destroy()));const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new Ee({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Ln(t.parent.doc,(n=>{const r=e.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class Ae{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return yt(this.restDecoder)}readDsLen(){return yt(this.restDecoder)}}class Ce extends Ae{readLeftID(){return tn(yt(this.restDecoder),yt(this.restDecoder))}readRightID(){return tn(yt(this.restDecoder),yt(this.restDecoder))}readClient(){return yt(this.restDecoder)}readInfo(){return mt(this.restDecoder)}readString(){return Et(this.restDecoder)}readParentInfo(){return 1===yt(this.restDecoder)}readTypeRef(){return yt(this.restDecoder)}readLen(){return yt(this.restDecoder)}readAny(){return It(this.restDecoder)}readBuf(){return b(gt(this.restDecoder))}readJSON(){return JSON.parse(Et(this.restDecoder))}readKey(){return Et(this.restDecoder)}}class Se{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=yt(this.restDecoder),this.dsCurrVal}readDsLen(){const t=yt(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class _e extends Se{constructor(t){super(t),this.keys=[],yt(t),this.keyClockDecoder=new Nt(gt(t)),this.clientDecoder=new kt(gt(t)),this.leftClockDecoder=new Nt(gt(t)),this.rightClockDecoder=new Nt(gt(t)),this.infoDecoder=new Mt(gt(t),mt),this.stringDecoder=new Ot(gt(t)),this.parentInfoDecoder=new Mt(gt(t),mt),this.typeRefDecoder=new kt(gt(t)),this.lenDecoder=new kt(gt(t))}readLeftID(){return new Ze(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Ze(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return It(this.restDecoder)}readBuf(){return gt(this.restDecoder)}readJSON(){return It(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class Te{constructor(){this.restEncoder=R()}toUint8Array(){return L(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){z(this.restEncoder,t)}writeDsLen(t){z(this.restEncoder,t)}}class Ie extends Te{writeLeftID(t){z(this.restEncoder,t.client),z(this.restEncoder,t.clock)}writeRightID(t){z(this.restEncoder,t.client),z(this.restEncoder,t.clock)}writeClient(t){z(this.restEncoder,t)}writeInfo(t){U(this.restEncoder,t)}writeString(t){G(this.restEncoder,t)}writeParentInfo(t){z(this.restEncoder,t?1:0)}writeTypeRef(t){z(this.restEncoder,t)}writeLen(t){z(this.restEncoder,t)}writeAny(t){et(this.restEncoder,t)}writeBuf(t){X(this.restEncoder,t)}writeJSON(t){G(this.restEncoder,JSON.stringify(t))}writeKey(t){G(this.restEncoder,t)}}class Me{constructor(){this.restEncoder=R(),this.dsCurrVal=0}toUint8Array(){return L(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,z(this.restEncoder,e)}writeDsLen(t){0===t&&ct.zR(),z(this.restEncoder,t-1),this.dsCurrVal+=t}}class ke extends Me{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new st,this.clientEncoder=new it,this.leftClockEncoder=new st,this.rightClockEncoder=new st,this.infoEncoder=new nt(U),this.stringEncoder=new at,this.parentInfoEncoder=new nt(U),this.typeRefEncoder=new it,this.lenEncoder=new it}toUint8Array(){const t=R();return z(t,0),X(t,this.keyClockEncoder.toUint8Array()),X(t,this.clientEncoder.toUint8Array()),X(t,this.leftClockEncoder.toUint8Array()),X(t,this.rightClockEncoder.toUint8Array()),X(t,L(this.infoEncoder)),X(t,this.stringEncoder.toUint8Array()),X(t,L(this.parentInfoEncoder)),X(t,this.typeRefEncoder.toUint8Array()),X(t,this.lenEncoder.toUint8Array()),Y(t,L(this.restEncoder)),L(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){et(this.restEncoder,t)}writeBuf(t){X(this.restEncoder,t)}writeJSON(t){et(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const Ne=(t,e,n,r)=>{r=u.Fp(r,e[0].id.clock);const i=En(e,r);z(t.restEncoder,e.length-i),t.writeClient(n),z(t.restEncoder,r);const o=e[i];o.write(t,r-o.id.clock);for(let s=i+1;s<e.length;s++)e[s].write(t,0)},Oe=(t,e,n)=>{const r=new Map;n.forEach(((t,n)=>{bn(e,n)>t&&r.set(n,t)})),wn(e).forEach(((t,e)=>{n.has(e)||r.set(e,0)})),z(t.restEncoder,r.size),a(r.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([n,r])=>{Ne(t,e.clients.get(n),n,r)}))},De=(t,e)=>{const n=r.Ue(),i=yt(t.restDecoder);for(let r=0;r<i;r++){const r=yt(t.restDecoder),i=new Array(r),o=t.readClient();let s=yt(t.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=t.readInfo();switch(I&r){case 0:{const e=t.readLen();i[n]=new ui(tn(o,s),e),s+=e;break}case 10:{const e=yt(t.restDecoder);i[n]=new Gi(tn(o,s),e),s+=e;break}default:{const a=0===(r&(_|T)),c=new ji(tn(o,s),null,(r&T)===T?t.readLeftID():null,null,(r&_)===_?t.readRightID():null,a?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,a&&(r&S)===S?t.readString():null,Vi(t,r));i[n]=c,s+=c.length}}}}return n},xe=(t,e,n)=>{const i=[];let o=a(n.keys()).sort(((t,e)=>t-e));if(0===o.length)return null;const s=()=>{if(0===o.length)return null;let t=n.get(o[o.length-1]);while(t.refs.length===t.i){if(o.pop(),!(o.length>0))return null;t=n.get(o[o.length-1])}return t};let c=s();if(null===c&&0===i.length)return null;const l=new yn,u=new Map,h=(t,e)=>{const n=u.get(t);(null==n||n>e)&&u.set(t,e)};let d=c.refs[c.i++];const f=new Map,p=()=>{for(const t of i){const e=t.id.client,r=n.get(e);r?(r.i--,l.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):l.clients.set(e,[t]),o=o.filter((t=>t!==e))}i.length=0};while(1){if(d.constructor!==Gi){const o=r.Yu(f,d.id.client,(()=>bn(e,d.id.client))),s=o-d.id.clock;if(s<0)i.push(d),h(d.id.client,d.id.clock-1),p();else{const r=d.getMissing(t,e);if(null!==r){i.push(d);const t=n.get(r)||{refs:[],i:0};if(t.refs.length!==t.i){d=t.refs[t.i++];continue}h(r,bn(e,r)),p()}else(0===s||s<d.length)&&(d.integrate(t,s),f.set(d.id.client,d.id.clock+d.length))}}if(i.length>0)d=i.pop();else if(null!==c&&c.i<c.refs.length)d=c.refs[c.i++];else{if(c=s(),null===c)break;d=c.refs[c.i++]}}if(l.clients.size>0){const t=new ke;return Oe(t,l,new Map),z(t.restEncoder,0),{missing:u,update:t.toUint8Array()}}return null},Re=(t,e)=>Oe(t,e.doc.store,e.beforeState),Be=(t,e,n,r=new _e(t))=>Ln(e,(t=>{t.local=!1;let e=!1;const n=t.doc,i=n.store,o=De(r,n),s=xe(t,i,o),a=i.pendingStructs;if(a){for(const[t,n]of a.missing)if(n<bn(i,t)){e=!0;break}if(s){for(const[t,e]of s.missing){const n=a.missing.get(t);(null==n||n>e)&&a.missing.set(t,e)}a.update=Gn([a.update,s.update])}}else i.pendingStructs=s;const c=be(r,t,i);if(i.pendingDs){const e=new _e(dt(i.pendingDs));yt(e.restDecoder);const n=be(e,t,i);i.pendingDs=c&&n?Gn([c,n]):c||n}else i.pendingDs=c;if(e){const e=i.pendingStructs.update;i.pendingStructs=null,Le(t.doc,e)}}),n,!1),Le=(t,e,n,r=_e)=>{const i=dt(e);Be(i,t,n,new r(i))},Pe=(t,e,n)=>Le(t,e,n,Ce),Fe=(t,e,n=new Map)=>{Oe(t,e.store,n),ye(t,me(e.store))},Ue=(t,e=new Uint8Array([0]),n=new ke)=>{const r=je(e);Fe(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Yn(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===Ie)return Wn(i.map(((t,e)=>0===e?t:Zn(t))));if(n.constructor===ke)return Gn(i)}return i[0]},ze=(t,e)=>Ue(t,e,new Ie),He=t=>{const e=new Map,n=yt(t.restDecoder);for(let r=0;r<n;r++){const n=yt(t.restDecoder),r=yt(t.restDecoder);e.set(n,r)}return e},je=t=>He(new Ae(dt(t))),Ve=(t,e)=>(z(t.restEncoder,e.size),a(e.entries()).sort(((t,e)=>e[0]-t[0])).forEach((([e,n])=>{z(t.restEncoder,e),z(t.restEncoder,n)})),t),We=(t,e)=>Ve(t,wn(e.store)),$e=(t,e=new Me)=>(t instanceof Map?Ve(e,t):We(e,t),e.toUint8Array()),Ge=t=>$e(t,new Te);class Ye{constructor(){this.l=[]}}const Xe=()=>new Ye,qe=(t,e)=>t.l.push(e),Ke=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter((t=>e!==t)),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Je=(t,e,n)=>Rt.PP(t.l,[e,n]);class Ze{constructor(t,e){this.client=t,this.clock=e}}const Qe=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,tn=(t,e)=>new Ze(t,e),en=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw ct.zR()},nn=(t,e)=>{while(null!==e){if(e.parent===t)return!0;e=e.parent._item}return!1};class rn{constructor(t,e,n,r=0){this.type=t,this.tname=e,this.item=n,this.assoc=r}}const on=t=>new rn(null==t.type?null:tn(t.type.client,t.type.clock),t.tname||null,null==t.item?null:tn(t.item.client,t.item.clock),null==t.assoc?0:t.assoc);class sn{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const an=(t,e,n=0)=>new sn(t,e,n),cn=(t,e,n)=>{let r=null,i=null;return null===t._item?i=en(t):r=tn(t._item.id.client,t._item.id.clock),new rn(r,i,e,n)},ln=(t,e,n=0)=>{let r=t._start;if(n<0){if(0===e)return cn(t,null,n);e--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>e)return cn(t,tn(r.id.client,r.id.clock+e),n);e-=r.length}if(null===r.right&&n<0)return cn(t,r.lastId,n);r=r.right}return cn(t,null,n)},un=(t,e)=>{const n=e.store,r=t.item,i=t.type,o=t.tname,s=t.assoc;let a=null,c=0;if(null!==r){if(bn(n,r.client)<=r.clock)return null;const t=Fi(n,r),e=t.item;if(!(e instanceof ji))return null;if(a=e.parent,null===a._item||!a._item.deleted){c=e.deleted||!e.countable?0:t.diff+(s>=0?0:1);let n=e.left;while(null!==n)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==o)a=e.get(o);else{if(null===i)throw ct.zR();{if(bn(n,i.client)<=i.clock)return null;const{item:t}=Fi(n,i);if(!(t instanceof ji&&t.content instanceof Li))return null;a=t.content.type}}c=s>=0?a._length:0}return an(a,c,t.assoc)},hn=(t,e)=>t===e||null!==t&&null!==e&&t.tname===e.tname&&Qe(t.item,e.item)&&Qe(t.type,e.type)&&t.assoc===e.assoc;class dn{constructor(t,e){this.ds=t,this.sv=e}}const fn=(t,e)=>new dn(t,e),pn=(fn(ge(),new Map),t=>fn(me(t.store),wn(t.store))),gn=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!he(e.ds,t.id),mn=(t,e)=>{const n=r.Yu(t.meta,mn,i.Ue),o=t.doc.store;n.has(e)||(e.sv.forEach(((e,n)=>{e<bn(o,n)&&_n(t,tn(n,e))})),le(t,e.ds,(t=>{})),n.add(e))};class yn{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const wn=t=>{const e=new Map;return t.clients.forEach(((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)})),e},bn=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},vn=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw ct.zR()}n.push(e)},En=(t,e)=>{let n=0,r=t.length-1,i=t[r],o=i.id.clock;if(o===e)return r;let s=u.GW(e/(o+i.length-1)*r);while(n<=r){if(i=t[s],o=i.id.clock,o<=e){if(e<o+i.length)return s;n=s+1}else r=s-1;s=u.GW((n+r)/2)}throw ct.zR()},An=(t,e)=>{const n=t.clients.get(e.client);return n[En(n,e.clock)]},Cn=An,Sn=(t,e,n)=>{const r=En(e,n),i=e[r];return i.id.clock<n&&i instanceof ji?(e.splice(r+1,0,zi(t,i,n-i.id.clock)),r+1):r},_n=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Sn(t,n,e.clock)]},Tn=(t,e,n)=>{const r=e.clients.get(n.client),i=En(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==ui&&r.splice(i+1,0,zi(t,o,n.clock-o.id.clock+1)),o},In=(t,e,n)=>{const r=t.clients.get(e.id.client);r[En(r,e.id.clock)]=n},Mn=(t,e,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Sn(t,e,n);do{s=e[a++],o<s.id.clock+s.length&&Sn(t,e,o),i(s)}while(a<e.length&&e[a].id.clock<o)};class kn{constructor(t,e,n){this.doc=t,this.deleteSet=new ce,this.beforeState=wn(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Nn=(t,e)=>!(0===e.deleteSet.clients.size&&!r.Yj(e.afterState,((t,n)=>e.beforeState.get(n)!==t)))&&(de(e.deleteSet),Re(t,e),ye(t,e.deleteSet),!0),On=(t,e,n)=>{const o=e._item;(null===o||o.id.clock<(t.beforeState.get(o.id.client)||0)&&!o.deleted)&&r.Yu(t.changed,e,i.Ue).add(n)},Dn=(t,e)=>{const n=t[e-1],r=t[e];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(t.splice(e,1),r instanceof ji&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},xn=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const t=e.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=En(t,o.clock),i=t[r];r<t.length&&i.id.clock<s;i=t[++r]){const i=t[r];if(o.clock+o.len<=i.id.clock)break;i instanceof ji&&i.deleted&&!i.keep&&n(i)&&i.gc(e,!1)}}}},Rn=(t,e)=>{t.clients.forEach(((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e],i=u.VV(r.length-1,1+En(r,n.clock+n.len-1));for(let t=i,e=r[t];t>0&&e.id.clock>=n.clock;e=r[--t])Dn(r,t)}}))},Bn=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{de(o),n.afterState=wn(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const t=[];n.changed.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||r._callObserver(n,e)})))),t.push((()=>{n.changedParentTypes.forEach(((e,r)=>t.push((()=>{null!==r._item&&r._item.deleted||(e=e.filter((t=>null===t.target._item||!t.target._item.deleted)),e.forEach((t=>{t.currentTarget=r})),e.sort(((t,e)=>t.path.length-e.path.length)),Je(r._dEH,e,n))})))),t.push((()=>r.emit("afterTransaction",[n,r])))})),(0,Rt.PP)(t,[])}finally{r.gc&&xn(o,i,r.gcFilter),Rn(o,i),n.afterState.forEach(((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=i.clients.get(e),n=u.Fp(En(t,r),1);for(let e=t.length-1;e>=n;e--)Dn(t,e)}}));for(let t=0;t<s.length;t++){const{client:e,clock:n}=s[t].id,r=i.clients.get(e),o=En(r,n);o+1<r.length&&Dn(r,o+1),o>0&&Dn(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(ee(Yt,zt,"[yjs] ",Ht,$t,"Changed the client-id because another client seems to be using it."),r.clientID=ve()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new Ie,e=Nn(t,n);e&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new ke,e=Nn(t,n);e&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:l}=n;(a.size>0||l.size>0||c.size>0)&&(a.forEach((t=>{t.clientID=r.clientID,null==t.collectionid&&(t.collectionid=r.collectionid),r.subdocs.add(t)})),l.forEach((t=>r.subdocs.delete(t))),r.emit("subdocs",[{loaded:c,added:a,removed:l},r,n]),l.forEach((t=>t.destroy()))),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Bn(t,e+1)}}},Ln=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1,s=null;null===t._transaction&&(o=!0,t._transaction=new kn(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(o){const e=t._transaction===i[0];t._transaction=null,e&&Bn(i,0)}}return s};class Pn{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Fn=(t,e,n)=>{le(t,n.deletions,(t=>{t instanceof ji&&e.scope.some((e=>nn(e,t)))&&Ui(t,!1)}))},Un=(t,e,n)=>{let r=null,i=null;const o=t.doc,s=t.scope;if(Ln(o,(n=>{while(e.length>0&&null===r){const i=o.store,a=e.pop(),c=new Set,l=[];let u=!1;le(n,a.insertions,(t=>{if(t instanceof ji){if(null!==t.redone){let{item:e,diff:r}=Fi(i,t.id);r>0&&(e=_n(n,tn(e.id.client,e.id.clock+r))),t=e}!t.deleted&&s.some((e=>nn(e,t)))&&l.push(t)}})),le(n,a.deletions,(t=>{t instanceof ji&&s.some((e=>nn(e,t)))&&!he(a.insertions,t.id)&&c.add(t)})),c.forEach((e=>{u=null!==Hi(n,e,c,a.insertions,t.ignoreRemoteMapChanges)||u}));for(let e=l.length-1;e>=0;e--){const r=l[e];t.deleteFilter(r)&&(r.delete(n),u=!0)}r=u?a:null}n.changed.forEach(((t,e)=>{t.has(null)&&e._searchMarker&&(e._searchMarker.length=0)})),i=n}),t),null!=r){const e=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:e},t])}return r};class zn extends l{constructor(t,{captureTimeout:e=500,captureTransaction:n=(t=>!0),deleteFilter:r=(()=>!0),trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:s=(c(t)?t[0].doc:t.doc)}={}){super(),this.scope=[],this.addToScope(t),this.deleteFilter=r,i.add(this),this.trackedOrigins=i,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=s,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=e,this.afterTransactionHandler=t=>{if(!this.captureTransaction(t)||!this.scope.some((e=>t.changedParentTypes.has(e)))||!this.trackedOrigins.has(t.origin)&&(!t.origin||!this.trackedOrigins.has(t.origin.constructor)))return;const e=this.undoing,n=this.redoing,r=e?this.redoStack:this.undoStack;e?this.stopCapturing():n||this.clear(!1,!0);const i=new ce;t.afterState.forEach(((e,n)=>{const r=t.beforeState.get(n)||0,o=e-r;o>0&&pe(i,n,r,o)}));const o=Ut();let s=!1;if(this.lastChange>0&&o-this.lastChange<this.captureTimeout&&r.length>0&&!e&&!n){const e=r[r.length-1];e.deletions=fe([e.deletions,t.deleteSet]),e.insertions=fe([e.insertions,i])}else r.push(new Pn(t.deleteSet,i)),s=!0;e||n||(this.lastChange=o),le(t,t.deleteSet,(t=>{t instanceof ji&&this.scope.some((e=>nn(e,t)))&&Ui(t,!0)}));const a=[{stackItem:r[r.length-1],origin:t.origin,type:e?"redo":"undo",changedParentTypes:t.changedParentTypes},this];s?this.emit("stack-item-added",a):this.emit("stack-item-updated",a)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(t){t=c(t)?t:[t],t.forEach((t=>{this.scope.every((e=>e!==t))&&this.scope.push(t)}))}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&this.doc.transact((n=>{t&&(this.undoStack.forEach((t=>Fn(n,this,t))),this.undoStack=[]),e&&(this.redoStack.forEach((t=>Fn(n,this,t))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}])}))}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=Un(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=Un(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Hn(t){const e=yt(t.restDecoder);for(let n=0;n<e;n++){const e=yt(t.restDecoder),n=t.readClient();let r=yt(t.restDecoder);for(let i=0;i<e;i++){const e=t.readInfo();if(10===e){const e=yt(t.restDecoder);yield new Gi(tn(n,r),e),r+=e}else if(0!==(I&e)){const i=0===(e&(_|T)),o=new ji(tn(n,r),null,(e&T)===T?t.readLeftID():null,null,(e&_)===_?t.readRightID():null,i?t.readParentInfo()?t.readString():t.readLeftID():null,i&&(e&S)===S?t.readString():null,Vi(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new ui(tn(n,r),e),r+=e}}}}class jn{constructor(t,e){this.gen=Hn(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===Gi);return this.curr}}class Vn{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Wn=t=>Gn(t,Ce,Ie),$n=(t,e)=>{if(t.constructor===ui){const{client:n,clock:r}=t.id;return new ui(tn(n,r+e),t.length-e)}if(t.constructor===Gi){const{client:n,clock:r}=t.id;return new Gi(tn(n,r+e),t.length-e)}{const n=t,{client:r,clock:i}=n.id;return new ji(tn(r,i+e),null,tn(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Gn=(t,e=_e,n=ke)=>{if(1===t.length)return t[0];const r=t.map((t=>new e(dt(t))));let i=r.map((t=>new jn(t,!0))),o=null;const s=new n,a=new Vn(s);while(1){if(i=i.filter((t=>null!==t.curr)),i.sort(((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===Gi?1:-1:n}return e.curr.id.client-t.curr.id.client})),0===i.length)break;const t=i[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)qn(a,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===Gi)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{qn(a,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length,r=new Gi(tn(e,o.struct.id.clock+o.struct.length),t);o={struct:r,offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===Gi?o.struct.length-=e:n=$n(n,e)),o.struct.mergeWith(n)||(qn(a,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==Gi;n=t.next())qn(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(qn(a,o.struct,o.offset),o=null),Kn(a);const c=r.map((t=>we(t))),l=fe(c);return ye(s,l),s.toUint8Array()},Yn=(t,e,n=_e,r=ke)=>{const i=je(e),o=new r,s=new Vn(o),a=new n(dt(t)),c=new jn(a,!1);while(c.curr){const t=c.curr,e=t.id.client,n=i.get(e)||0;if(c.curr.constructor!==Gi)if(t.id.clock+t.length>n){qn(s,t,u.Fp(n-t.id.clock,0)),c.next();while(c.curr&&c.curr.id.client===e)qn(s,c.curr,0),c.next()}else while(c.curr&&c.curr.id.client===e&&c.curr.id.clock+c.curr.length<=n)c.next();else c.next()}Kn(s);const l=we(a);return ye(o,l),o.toUint8Array()},Xn=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:L(t.encoder.restEncoder)}),t.encoder.restEncoder=R(),t.written=0)},qn=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&Xn(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),z(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Kn=t=>{Xn(t);const e=t.encoder.restEncoder;z(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];z(e,r.written),Y(e,r.restEncoder)}},Jn=(t,e,n)=>{const r=new e(dt(t)),i=new jn(r,!1),o=new n,s=new Vn(o);for(let c=i.curr;null!==c;c=i.next())qn(s,c,0);Kn(s);const a=we(r);return ye(o,a),o.toUint8Array()},Zn=t=>Jn(t,_e,Ie);class Qn{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null}get path(){return tr(this.currentTarget,this.target)}deletes(t){return he(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){const t=new Map,e=this.target,n=this.transaction.changed.get(e);n.forEach((n=>{if(null!==n){const r=e._map.get(n);let i,s;if(this.adds(r)){let t=r.left;while(null!==t&&this.adds(t))t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;i="delete",s=o(t.content.getContent())}else null!==t&&this.deletes(t)?(i="update",s=o(t.content.getContent())):(i="add",s=void 0)}else{if(!this.deletes(r))return;i="delete",s=o(r.content.getContent())}t.set(n,{action:i,oldValue:s})}})),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){const e=this.target,n=i.Ue(),r=i.Ue(),o=[];t={added:n,deleted:r,delta:o,keys:this.keys};const s=this.transaction.changed.get(e);if(s.has(null)){let t=null;const i=()=>{t&&o.push(t)};for(let o=e._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&(null!==t&&void 0!==t.delete||(i(),t={delete:0}),t.delete+=o.length,r.add(o)):this.adds(o)?(null!==t&&void 0!==t.insert||(i(),t={insert:[]}),t.insert=t.insert.concat(o.content.getContent()),n.add(o)):(null!==t&&void 0!==t.retain||(i(),t={retain:0}),t.retain+=o.length);null!==t&&void 0===t.retain&&i()}this._changes=t}return t}}const tr=(t,e)=>{const n=[];while(null!==e._item&&e!==t){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;while(r!==e._item&&null!==r)r.deleted||t++,r=r.right;n.unshift(t)}e=e._item.parent}return n},er=80;let nr=0;class rr{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=nr++}}const ir=t=>{t.timestamp=nr++},or=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=nr++},sr=(t,e,n)=>{if(t.length>=er){const r=t.reduce(((t,e)=>t.timestamp<e.timestamp?t:e));return or(r,e,n),r}{const r=new rr(e,n);return t.push(r),r}},ar=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce(((t,n)=>u.Wn(e-t.index)<u.Wn(e-n.index)?t:n));let r=t._start,i=0;null!==n&&(r=n.p,i=n.index,ir(n));while(null!==r.right&&i<e){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>e)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&u.Wn(n.index-i)<r.parent.length/er?(or(n,r,i),n):sr(t._searchMarker,r,i)},cr=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let e=i.p;e.marker=!1;while(e&&(e.deleted||!e.countable))e=e.left,e&&!e.deleted&&e.countable&&(i.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}i.p=e,e.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=u.Fp(e,i.index+n))}},lr=(t,e,n)=>{const i=t,o=e.changedParentTypes;while(1){if(r.Yu(o,t,(()=>[])).push(n),null===t._item)break;t=t._item.parent}Je(i._eH,n,e)};class ur{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Xe(),this._dEH=Xe(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw ct.Nw()}clone(){throw ct.Nw()}_write(t){}get _first(){let t=this._start;while(null!==t&&t.deleted)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){qe(this._eH,t)}observeDeep(t){qe(this._dEH,t)}unobserve(t){Ke(this._eH,t)}unobserveDeep(t){Ke(this._dEH,t)}toJSON(){}}const hr=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)i.push(t[n]),r--;e=0}}o=o.right}return i},dr=t=>{const e=[];let n=t._start;while(null!==n){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},fr=(t,e)=>{const n=[];let r=t._start;while(null!==r){if(r.countable&&gn(r,e)){const t=r.content.getContent();for(let e=0;e<t.length;e++)n.push(t[e])}r=r.right}return n},pr=(t,e)=>{let n=0,r=t._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)e(i[r],n++,t)}r=r.right}},gr=(t,e)=>{const n=[];return pr(t,((r,i)=>{n.push(e(r,i,t))})),n},mr=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==e&&e.deleted)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},yr=(t,e)=>{const n=ar(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},wr=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,a=o.store,c=null===n?e._start:n.right;let l=[];const u=()=>{l.length>0&&(i=new ji(tn(s,bn(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Si(l)),i.integrate(t,0),l=[])};r.forEach((n=>{if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new ji(tn(s,bn(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new hi(new Uint8Array(n))),i.integrate(t,0);break;case Ee:i=new ji(tn(s,bn(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new mi(n)),i.integrate(t,0);break;default:if(!(n instanceof ur))throw new Error("Unexpected content type in insert operation");i=new ji(tn(s,bn(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Li(n)),i.integrate(t,0)}}})),u()},br=ct.Ue("Length exceeded!"),vr=(t,e,n,r)=>{if(n>e._length)throw br;if(0===n)return e._searchMarker&&cr(e._searchMarker,n,r.length),wr(t,e,null,r);const i=n,o=ar(e,n);let s=e._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&_n(t,tn(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&cr(e._searchMarker,i,r.length),wr(t,e,s,r)},Er=(t,e,n)=>{const r=(e._searchMarker||[]).reduce(((t,e)=>e.index>t.index?e:t),{index:0,p:e._start});let i=r.p;if(i)while(i.right)i=i.right;return wr(t,e,i,n)},Ar=(t,e,n,r)=>{if(0===r)return;const i=n,o=r,s=ar(e,n);let a=e._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&_n(t,tn(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&_n(t,tn(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw br;e._searchMarker&&cr(e._searchMarker,i,-o+r)},Cr=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},Sr=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let a;if(null==r)a=new Si([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Si([r]);break;case Uint8Array:a=new hi(r);break;case Ee:a=new mi(r);break;default:if(!(r instanceof ur))throw new Error("Unexpected content type");a=new Li(r)}new ji(tn(s,bn(o.store,s)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},_r=(t,e)=>{const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Tr=t=>{const e={};return t._map.forEach(((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])})),e},Ir=(t,e)=>{const n=t._map.get(e);return void 0!==n&&!n.deleted},Mr=t=>ie(t.entries(),(t=>!t[1].deleted));class kr extends Qn{constructor(t,e){super(t,e),this._transaction=e}}class Nr extends ur{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Nr;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Nr}clone(){const t=new Nr;return t.insert(0,this.toArray().map((t=>t instanceof ur?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),lr(this,t,new kr(this,t))}insert(t,e){null!==this.doc?Ln(this.doc,(n=>{vr(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?Ln(this.doc,(e=>{Er(e,this,t)})):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?Ln(this.doc,(n=>{Ar(n,this,t,e)})):this._prelimContent.splice(t,e)}get(t){return yr(this,t)}toArray(){return dr(this)}slice(t=0,e=this.length){return hr(this,t,e)}toJSON(){return this.map((t=>t instanceof ur?t.toJSON():t))}map(t){return gr(this,t)}forEach(t){pr(this,t)}[Symbol.iterator](){return mr(this)}_write(t){t.writeTypeRef(ki)}}const Or=t=>new Nr;class Dr extends Qn{constructor(t,e,n){super(t,e),this.keysChanged=n}}class xr extends ur{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach(((t,e)=>{this.set(e,t)})),this._prelimContent=null}_copy(){return new xr}clone(){const t=new xr;return this.forEach(((e,n)=>{t.set(n,e instanceof ur?e.clone():e)})),t}_callObserver(t,e){lr(this,t,new Dr(this,t,e))}toJSON(){const t={};return this._map.forEach(((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof ur?r.toJSON():r}})),t}get size(){return[...Mr(this._map)].length}keys(){return oe(Mr(this._map),(t=>t[0]))}values(){return oe(Mr(this._map),(t=>t[1].content.getContent()[t[1].length-1]))}entries(){return oe(Mr(this._map),(t=>[t[0],t[1].content.getContent()[t[1].length-1]]))}forEach(t){this._map.forEach(((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?Ln(this.doc,(e=>{Cr(e,this,t)})):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?Ln(this.doc,(n=>{Sr(n,this,t,e)})):this._prelimContent.set(t,e),e}get(t){return _r(this,t)}has(t){return Ir(this,t)}clear(){null!==this.doc?Ln(this.doc,(t=>{this.forEach((function(e,n,r){Cr(t,r,n)}))})):this._prelimContent.clear()}_write(t){t.writeTypeRef(Ni)}}const Rr=t=>new xr,Br=(t,e)=>t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&se.$m(t,e);class Lr{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&ct.zR(),this.right.content.constructor){case vi:this.right.deleted||zr(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Pr=(t,e,n)=>{while(null!==e.right&&n>0){switch(e.right.content.constructor){case vi:e.right.deleted||zr(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&_n(t,tn(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Fr=(t,e,n)=>{const r=new Map,i=ar(e,n);if(i){const e=new Lr(i.p.left,i.p,i.index,r);return Pr(t,e,n-i.index)}{const i=new Lr(null,e._start,0,r);return Pr(t,i,n)}},Ur=(t,e,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===vi&&Br(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach(((r,s)=>{const a=n.left,c=n.right,l=new ji(tn(o,bn(i.store,o)),a,a&&a.lastId,c,c&&c.id,e,null,new vi(s,r));l.integrate(t,0),n.right=l,n.forward()}))},zr=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},Hr=(t,e)=>{while(1){if(null===t.right)break;if(!(t.right.deleted||t.right.content.constructor===vi&&Br(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},jr=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],l=n.currentAttributes.get(a)||null;if(!Br(l,c)){s.set(a,l);const{left:r,right:u}=n;n.right=new ji(tn(o,bn(i.store,o)),r,r&&r.lastId,u,u&&u.id,e,null,new vi(a,c)),n.right.integrate(t,0),n.forward()}}return s},Vr=(t,e,n,r,i)=>{n.currentAttributes.forEach(((t,e)=>{void 0===i[e]&&(i[e]=null)}));const o=t.doc,s=o.clientID;Hr(n,i);const a=jr(t,e,n,i),c=r.constructor===String?new Ti(r):r instanceof ur?new Li(r):new wi(r);let{left:l,right:u,index:h}=n;e._searchMarker&&cr(e._searchMarker,n.index,c.getLength()),u=new ji(tn(s,bn(o.store,s)),l,l&&l.lastId,u,u&&u.id,e,null,c),u.integrate(t,0),n.right=u,n.index=h,n.forward(),Ur(t,e,n,a)},Wr=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;Hr(n,i);const a=jr(t,e,n,i);t:while(null!==n.right&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===vi))){if(!n.right.deleted)switch(n.right.content.constructor){case vi:{const{key:e,value:o}=n.right.content,s=i[e];if(void 0!==s){if(Br(s,o))a.delete(e);else{if(0===r)break t;a.set(e,o)}n.right.delete(t)}else n.currentAttributes.set(e,o);break}default:r<n.right.length&&_n(t,tn(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new ji(tn(s,bn(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Ti(i)),n.right.integrate(t,0),n.forward()}Ur(t,e,n,a)},$r=(t,e,n,i,o)=>{let s=e;const a=r.Ue();while(s&&(!s.countable||s.deleted)){if(!s.deleted&&s.content.constructor===vi){const t=s.content;a.set(t.key,t)}s=s.right}let c=0,l=!1;while(e!==s){if(n===e&&(l=!0),!e.deleted){const n=e.content;switch(n.constructor){case vi:{const{key:r,value:s}=n,u=i.get(r)||null;a.get(r)===n&&u!==s||(e.delete(t),c++,l||(o.get(r)||null)!==s||u===s||(null===u?o.delete(r):o.set(r,u))),l||e.deleted||zr(o,n);break}}}e=e.right}return c},Gr=(t,e)=>{while(e&&e.right&&(e.right.deleted||!e.right.countable))e=e.right;const n=new Set;while(e&&(e.deleted||!e.countable)){if(!e.deleted&&e.content.constructor===vi){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Yr=t=>{let e=0;return Ln(t.doc,(n=>{let i=t._start,o=t._start,s=r.Ue();const a=r.JG(s);while(o){if(!1===o.deleted)switch(o.content.constructor){case vi:zr(a,o.content);break;default:e+=$r(n,i,o,s,a),s=r.JG(a),i=o;break}o=o.right}})),e},Xr=(t,e,n)=>{const i=n,o=r.JG(e.currentAttributes),s=e.right;while(n>0&&null!==e.right){if(!1===e.right.deleted)switch(e.right.content.constructor){case Li:case wi:case Ti:n<e.right.length&&_n(t,tn(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&$r(t,s,e.right,o,e.currentAttributes);const a=(e.left||e.right).parent;return a._searchMarker&&cr(a._searchMarker,e.index,-i+n),e};class qr extends Qn{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)}))}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];Ln(t,(t=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",c=0,l=0;const u=()=>{if(null!==o){let t;switch(o){case"delete":t={delete:l},l=0;break;case"insert":t={insert:a},n.size>0&&(t.attributes={},n.forEach(((e,n)=>{null!==e&&(t.attributes[n]=e)}))),a="";break;case"retain":if(t={retain:c},Object.keys(s).length>0){t.attributes={};for(const e in s)t.attributes[e]=s[e]}c=0;break}e.push(t),o=null}};while(null!==i){switch(i.content.constructor){case Li:case wi:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),l+=1):i.deleted||("retain"!==o&&(u(),o="retain"),c+=1);break;case Ti:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),l+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),c+=i.length);break;case vi:{const{key:e,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const c=n.get(e)||null;Br(c,a)?null!==a&&i.delete(t):("retain"===o&&u(),Br(a,r.get(e)||null)?delete s[e]:s[e]=a)}}else if(this.deletes(i)){r.set(e,a);const t=n.get(e)||null;Br(t,a)||("retain"===o&&u(),s[e]=t)}else if(!i.deleted){r.set(e,a);const n=s[e];void 0!==n&&(Br(n,a)?null!==n&&i.delete(t):("retain"===o&&u(),null===a?delete s[e]:s[e]=a))}i.deleted||("insert"===o&&u(),zr(n,i.content));break}}i=i.right}u();while(e.length>0){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}})),this._delta=e}return this._delta}}class Kr extends ur{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach((t=>t()))}catch(n){console.error(n)}this._pending=null}_copy(){return new Kr}clone(){const t=new Kr;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new qr(this,t,e),r=t.doc;if(lr(this,t,n),!t.local){let e=!1;for(const[n,i]of t.afterState.entries()){const o=t.beforeState.get(n)||0;if(i!==o&&(Mn(t,r.store.clients.get(n),o,i,(t=>{t.deleted||t.content.constructor!==vi||(e=!0)})),e))break}e||le(t,t.deleteSet,(t=>{t instanceof ui||e||t.parent===this&&t.content.constructor===vi&&(e=!0)})),Ln(r,(t=>{e?Yr(this):le(t,t.deleteSet,(e=>{e instanceof ui||e.parent===this&&Gr(t,e)}))}))}}toString(){let t="",e=this._start;while(null!==e)!e.deleted&&e.countable&&e.content.constructor===Ti&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?Ln(this.doc,(n=>{const r=new Lr(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(void 0!==o.insert){const s=e||"string"!==typeof o.insert||i!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&Vr(n,this,r,s,o.attributes||{})}else void 0!==o.retain?Wr(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&Xr(n,r,o.delete)}})):this._pending.push((()=>this.applyDelta(t)))}toDelta(t,e,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function c(){if(s.length>0){const t={};let e=!1;i.forEach(((n,r)=>{e=!0,t[r]=n}));const n={insert:s};e&&(n.attributes=t),r.push(n),s=""}}const l=()=>{while(null!==a){if(gn(a,t)||void 0!==e&&gn(a,e))switch(a.content.constructor){case Ti:{const r=i.get("ychange");void 0===t||gn(a,t)?void 0===e||gn(a,e)?void 0!==r&&(c(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.type||(c(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.type||(c(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Li:case wi:{c();const t={insert:a.content.getContent()[0]};if(i.size>0){const e={};t.attributes=e,i.forEach(((t,n)=>{e[n]=t}))}r.push(t);break}case vi:gn(a,t)&&(c(),zr(i,a.content));break}a=a.right}c()};return t||e?Ln(o,(n=>{t&&mn(n,t),e&&mn(n,e),l()}),"cleanup"):l(),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?Ln(r,(r=>{const i=Fr(r,this,t);n||(n={},i.currentAttributes.forEach(((t,e)=>{n[e]=t}))),Vr(r,this,i,e,n)})):this._pending.push((()=>this.insert(t,e,n)))}insertEmbed(t,e,n={}){const r=this.doc;null!==r?Ln(r,(r=>{const i=Fr(r,this,t);Vr(r,this,i,e,n)})):this._pending.push((()=>this.insertEmbed(t,e,n)))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?Ln(n,(n=>{Xr(n,Fr(n,this,t),e)})):this._pending.push((()=>this.delete(t,e)))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?Ln(r,(r=>{const i=Fr(r,this,t);null!==i.right&&Wr(r,this,i,e,n)})):this._pending.push((()=>this.format(t,e,n)))}removeAttribute(t){null!==this.doc?Ln(this.doc,(e=>{Cr(e,this,t)})):this._pending.push((()=>this.removeAttribute(t)))}setAttribute(t,e){null!==this.doc?Ln(this.doc,(n=>{Sr(n,this,t,e)})):this._pending.push((()=>this.setAttribute(t,e)))}getAttribute(t){return _r(this,t)}getAttributes(){return Tr(this)}_write(t){t.writeTypeRef(Oi)}}const Jr=t=>new Kr;class Zr{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==ei&&e.constructor!==Qr||null===e._start)while(null!==t){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Qr extends ur{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Qr}clone(){const t=new Qr;return t.insert(0,this.toArray().map((t=>t instanceof ur?t.clone():t))),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new Zr(this,t)}querySelector(t){t=t.toUpperCase();const e=new Zr(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)),n=e.next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),a(new Zr(this,(e=>e.nodeName&&e.nodeName.toUpperCase()===t)))}_callObserver(t,e){lr(this,t,new ri(this,e,t))}toString(){return gr(this,(t=>t.toString())).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),pr(this,(i=>{r.insertBefore(i.toDOM(t,e,n),null)})),r}insert(t,e){null!==this.doc?Ln(this.doc,(n=>{vr(n,this,t,e)})):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)Ln(this.doc,(n=>{const r=t&&t instanceof ur?t._item:t;wr(n,this,r,e)}));else{const n=this._prelimContent,r=null===t?0:n.findIndex((e=>e===t))+1;if(0===r&&null!==t)throw ct.Ue("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?Ln(this.doc,(n=>{Ar(n,this,t,e)})):this._prelimContent.splice(t,e)}toArray(){return dr(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return yr(this,t)}slice(t=0,e=this.length){return hr(this,t,e)}forEach(t){pr(this,t)}_write(t){t.writeTypeRef(xi)}}const ti=t=>new Qr;class ei extends Qr{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach(((t,e)=>{this.setAttribute(e,t)})),this._prelimAttrs=null}_copy(){return new ei(this.nodeName)}clone(){const t=new ei(this.nodeName),e=this.getAttributes();for(const n in e)t.setAttribute(n,e[n]);return t.insert(0,this.toArray().map((t=>t instanceof ur?t.clone():t))),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const s in t)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];e.push(r+'="'+t[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){null!==this.doc?Ln(this.doc,(e=>{Cr(e,this,t)})):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?Ln(this.doc,(n=>{Sr(n,this,t,e)})):this._prelimAttrs.set(t,e)}getAttribute(t){return _r(this,t)}hasAttribute(t){return Ir(this,t)}getAttributes(){return Tr(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i)r.setAttribute(o,i[o]);return pr(this,(i=>{r.appendChild(i.toDOM(t,e,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(Di),t.writeKey(this.nodeName)}}const ni=t=>new ei(t.readKey());class ri extends Qn{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach((t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)}))}}class ii extends xr{constructor(t){super(),this.hookName=t}_copy(){return new ii(this.hookName)}clone(){const t=new ii(this.hookName);return this.forEach(((e,n)=>{t.set(n,e)})),t}toDOM(t=document,e={},n){const r=e[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(Ri),t.writeKey(this.hookName)}}const oi=t=>new ii(t.readKey());class si extends Kr{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new si}clone(){const t=new si;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map((t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort(((t,e)=>t.key<e.key?-1:1)),e.push({nodeName:r,attrs:n})}e.sort(((t,e)=>t.nodeName<e.nodeName?-1:1));let n="";for(let r=0;r<e.length;r++){const t=e[r];n+=`<${t.nodeName}`;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n})).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Bi)}}const ai=t=>new si;class ci{constructor(t,e){this.id=t,this.length=e}get deleted(){throw ct.Nw()}mergeWith(t){return!1}write(t,e,n){throw ct.Nw()}integrate(t,e){throw ct.Nw()}}const li=0;class ui extends ci{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),vn(t.doc.store,this)}write(t,e){t.writeInfo(li),t.writeLen(this.length-e)}getMissing(t,e){return null}}class hi{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new hi(this.content)}splice(t){throw ct.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const di=t=>new hi(t.readBuf());class fi{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new fi(this.len)}splice(t){const e=new fi(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){pe(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const pi=t=>new fi(t.readLen()),gi=(t,e)=>new Ee({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class mi{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new mi(gi(this.doc.guid,this.opts))}splice(t){throw ct.Nw()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const yi=t=>new mi(gi(t.readString(),t.readAny()));class wi{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new wi(this.embed)}splice(t){throw ct.Nw()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const bi=t=>new wi(t.readJSON());class vi{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new vi(this.key,this.value)}splice(t){throw ct.Nw()}mergeWith(t){return!1}integrate(t,e){e.parent._searchMarker=null}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Ei=t=>new vi(t.readKey(),t.readJSON());class Ai{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Ai(this.arr)}splice(t){const e=new Ai(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const Ci=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new Ai(n)};class Si{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Si(this.arr)}splice(t){const e=new Si(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}const _i=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Si(n)};class Ti{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ti(this.str)}splice(t){const e=new Ti(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const Ii=t=>new Ti(t.readString()),Mi=[Or,Rr,Jr,ni,ti,oi,ai],ki=0,Ni=1,Oi=2,Di=3,xi=4,Ri=5,Bi=6;class Li{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Li(this.type._copy())}splice(t){throw ct.Nw()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;while(null!==e)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach((e=>{e.deleted?t._mergeStructs.push(e):e.delete(t)})),t.changed.delete(this.type)}gc(t){let e=this.type._start;while(null!==e)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach((e=>{while(null!==e)e.gc(t,!0),e=e.left})),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const Pi=t=>new Li(Mi[t.readTypeRef()](t)),Fi=(t,e)=>{let n,r=e,i=0;do{i>0&&(r=tn(r.client,r.clock+i)),n=Cn(t,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof ji);return{item:n,diff:i}},Ui=(t,e)=>{while(null!==t&&t.keep!==e)t.keep=e,t=t.parent._item},zi=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new ji(tn(r,i+n),e,tn(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=tn(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o},Hi=(t,e,n,r,i)=>{const o=t.doc,s=o.store,a=o.clientID,c=e.redone;if(null!==c)return _n(t,c);let l,u=e.parent._item,h=null;if(null!==u&&!0===u.deleted){if(null===u.redone&&(!n.has(u)||null===Hi(t,u,n,r,i)))return null;while(null!==u.redone)u=_n(t,u.redone)}const d=null===u?e.parent:u.content.type;if(null===e.parentSub){h=e.left,l=e;while(null!==h){let e=h;while(null!==e&&e.parent._item!==u)e=null===e.redone?null:_n(t,e.redone);if(null!==e&&e.parent._item===u){h=e;break}h=h.left}while(null!==l){let e=l;while(null!==e&&e.parent._item!==u)e=null===e.redone?null:_n(t,e.redone);if(null!==e&&e.parent._item===u){l=e;break}l=l.right}}else if(l=null,e.right&&!i){h=e;while(null!==h&&null!==h.right&&he(r,h.right.id))h=h.right;while(null!==h&&null!==h.redone)h=_n(t,h.redone);if(h&&null!==h.right)return null}else h=d._map.get(e.parentSub)||null;const f=bn(s,a),p=tn(a,f),g=new ji(p,h,h&&h.lastId,l,l&&l.id,d,e.parentSub,e.content.copy());return e.redone=p,Ui(g,!0),g.integrate(t,0),g};class ji extends ci{constructor(t,e,n,r,i,o,s,a){super(t,a.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?E:0}set marker(t){(this.info&C)>0!==t&&(this.info^=C)}get marker(){return(this.info&C)>0}get keep(){return(this.info&v)>0}set keep(t){this.keep!==t&&(this.info^=v)}get countable(){return(this.info&E)>0}get deleted(){return(this.info&A)>0}set deleted(t){this.deleted!==t&&(this.info^=A)}markDeleted(){this.info|=A}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=bn(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=bn(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ze&&this.id.client!==this.parent.client&&this.parent.clock>=bn(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Tn(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=_n(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===ui||this.right&&this.right.constructor===ui)&&(this.parent=null),this.parent){if(this.parent.constructor===Ze){const t=Cn(e,this.parent);t.constructor===ui?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===ji&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===ji&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Tn(t,t.doc.store,tn(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start;const r=new Set,i=new Set;while(null!==e&&e!==this.right){if(i.add(e),r.add(e),Qe(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(Qe(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!i.has(Cn(t.doc.store,e.origin)))break;r.has(Cn(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),vn(t.doc.store,this),this.content.integrate(t,this),On(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new ui(this.id,this.length).integrate(t,0)}get next(){let t=this.right;while(null!==t&&t.deleted)t=t.right;return t}get prev(){let t=this.left;while(null!==t&&t.deleted)t=t.left;return t}get lastId(){return 1===this.length?this.id:tn(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Qe(t.origin,this.lastId)&&this.right===t&&Qe(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach((e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))})),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),pe(t.deleteSet,this.id.client,this.id.clock,this.length),On(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw ct.zR();this.content.gc(t),e?In(t,this,new ui(this.id,this.length)):this.content=new fi(this.length)}write(t,e){const n=e>0?tn(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&I|(null===n?0:T)|(null===r?0:_)|(null===i?0:S);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=en(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===Ze?(t.writeParentInfo(!1),t.writeLeftID(e)):ct.zR();null!==i&&t.writeString(i)}this.content.write(t,e)}}const Vi=(t,e)=>Wi[e&I](t),Wi=[()=>{ct.zR()},pi,Ci,di,Ii,bi,Ei,Pi,_i,yi,()=>{ct.zR()}],$i=10;class Gi extends ci{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){ct.zR()}write(t,e){t.writeInfo($i),z(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const Yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},Xi="__ $YJS$ __";!0===Yi[Xi]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Yi[Xi]=!0}}]);
//# sourceMappingURL=chunk-vendors.9c9c09d9.js.map